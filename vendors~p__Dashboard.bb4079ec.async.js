(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"+K+b":function(Oe,mt,R){var U=R("JHRd");function E(T){var e=new T.constructor(T.byteLength);return new U(e).set(new U(T)),e}Oe.exports=E},"+Qka":function(Oe,mt,R){var U=R("fmRc"),E=R("t2Dn"),T=R("cq/+"),e=R("T1AV"),t=R("GoyQ"),l=R("mTTR"),s=R("itsj");function c(r,h,n,i,a){r!==h&&T(h,function(o,u){if(a||(a=new U),t(o))e(r,h,u,n,c,i,a);else{var f=i?i(s(r,u),o,u+"",r,h,a):void 0;f===void 0&&(f=o),E(r,u,f)}},l)}Oe.exports=c},"+VLl":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return o});var U=R("lSNA"),E=R.n(U),T=R("J4zp"),e=R.n(T),t=R("Hel2"),l=Math.PI/3,s=[0,l,2*l,3*l,4*l,5*l];function c(u){return u[0]}function r(u){return u[1]}var h=function(){var u=0,f=0,v=1,b=1,y=c,g=r,_,M,x;function m(P){var A={},O=[],L,W=P.length;for(L=0;L<W;++L)if(!(isNaN(K=+y.call(null,F=P[L],L,P))||isNaN(V=+g.call(null,F,L,P)))){var F,K,V,k=Math.round(V=V/x),Z=Math.round(K=K/M-(k&1)/2),X=V-k;if(Math.abs(X)*3>1){var it=K-Z,ft=Z+(K<Z?-1:1)/2,pt=k+(V<k?-1:1),ut=K-ft,It=V-pt;it*it+X*X>ut*ut+It*It&&(Z=ft+(k&1?1:-1)/2,k=pt)}var Nt=Z+"-"+k,Rt=A[Nt];Rt?Rt.push(F):(O.push(Rt=A[Nt]=[F]),Rt.x=(Z+(k&1)/2)*M,Rt.y=k*x)}return O}function S(P){var A=0,O=0;return s.map(function(L){var W=Math.sin(L)*P,F=-Math.cos(L)*P,K=W-A,V=F-O;return A=W,O=F,[K,V]})}return m.hexagon=function(P){return"m"+S(P==null?_:+P).join("l")+"z"},m.centers=function(){for(var P=[],A=Math.round(f/x),O=Math.round(u/M),L=A*x;L<b+_;L+=x,++A)for(var W=O*M+(A&1)*M/2;W<v+M/2;W+=M)P.push([W,L]);return P},m.mesh=function(){var P=S(_).slice(0,4).join("l");return m.centers().map(function(A){return"M"+A+"m"+P}).join("")},m.x=function(P){return arguments.length?(y=P,m):y},m.y=function(P){return arguments.length?(g=P,m):g},m.radius=function(P){return arguments.length?(_=+P,M=_*2*Math.sin(l),x=_*1.5,m):_},m.size=function(P){return arguments.length?(u=f=0,v=+P[0],b=+P[1],m):[v-u,b-f]},m.extent=function(P){return arguments.length?(u=+P[0][0],f=+P[0][1],v=+P[1][0],b=+P[1][1],m):[[u,f],[v,b]]},m.radius(1)};function n(u,f){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(u);f&&(b=b.filter(function(y){return Object.getOwnPropertyDescriptor(u,y).enumerable})),v.push.apply(v,b)}return v}function i(u){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?n(Object(v),!0).forEach(function(b){E()(u,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(b){Object.defineProperty(u,b,Object.getOwnPropertyDescriptor(v,b))})}return u}var a=6378e3;function o(u,f){var v=u.dataArray,b=f.size,y=b===void 0?10:b,g=f.method,_=g===void 0?"sum":g,M=y/(2*Math.PI*a)*(256<<20)/2,x=v.map(function(A){var O=Object(t.d)(A.coordinates),L=e()(O,2),W=L[0],F=L[1];return i(i({},A),{},{coordinates:[W,F]})}),m=h().radius(M).x(function(A){return A.coordinates[0]}).y(function(A){return A.coordinates[1]}),S=m(x),P={dataArray:S.map(function(A,O){var L;if(f.field&&_){var W=t.c.getColumn(A,f.field);A[_]=t.c.statMap[_](W)}return L={},E()(L,f.method,A[_]),E()(L,"count",A.length),E()(L,"rawData",A),E()(L,"coordinates",[A.x,A.y]),E()(L,"_id",O),L}),radius:M,xOffset:M,yOffset:M,type:"hexagon"};return P}},"+em5":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return V});var U=R("lSNA"),E=R.n(U),T=R("yG8O"),e=R.n(T),t=R("lwsE"),l=R.n(t),s=R("W8MJ"),c=R.n(s),r=R("U+yc"),h=R.n(r),n=R("1ABj"),i=R.n(n),a=R("gQMU"),o=R.n(a),u=R("J2iB"),f=R.n(u),v=R("u6S6"),b=R.n(v),y=R("4cb6"),g=R.n(y),_=R("h1nZ"),M=R("bB6j"),x=R("bPkA"),m,S,P,A,O,L;function W(k,Z){var X=Object.keys(k);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(k);Z&&(it=it.filter(function(ft){return Object.getOwnPropertyDescriptor(k,ft).enumerable})),X.push.apply(X,it)}return X}function F(k){for(var Z=1;Z<arguments.length;Z++){var X=arguments[Z]!=null?arguments[Z]:{};Z%2?W(Object(X),!0).forEach(function(it){E()(k,it,X[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(X)):W(Object(X)).forEach(function(it){Object.defineProperty(k,it,Object.getOwnPropertyDescriptor(X,it))})}return k}var K=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,V=(m=Object(y.injectable)(),S=Object(y.inject)(M.a.IShaderModuleService),m(P=(A=(L=function(){function k(){l()(this,k),e()(this,"shaderModuleService",O,this),this.rendererService=void 0,this.config=void 0,this.quad=K,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return c()(k,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(X){this.name=X}},{key:"getType",value:function(){return x.a.PostProcessing}},{key:"init",value:function(X,it){this.config=it,this.rendererService=X.getContainer().get(M.a.IRendererService);var ft=this.rendererService,pt=ft.createAttribute,ut=ft.createBuffer,It=ft.createModel,Nt=this.setupShaders(),Rt=Nt.vs,Mt=Nt.fs,bt=Nt.uniforms;this.model=It({vs:Rt,fs:Mt,attributes:{a_Position:pt({buffer:ut({data:[-4,-4,4,-4,0,4],type:_.gl.FLOAT}),size:2})},uniforms:F(F({u_Texture:null},bt),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(X){var it=this,ft=X.multiPassRenderer.getPostProcessor(),pt=this.rendererService,ut=pt.useFramebuffer,It=pt.getViewportSize,Nt=pt.clear,Rt=It(),Mt=Rt.width,bt=Rt.height;ut(this.renderToScreen?null:ft.getWriteFBO(),function(){Nt({framebuffer:ft.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),it.model.draw({uniforms:F({u_Texture:ft.getReadFBO(),u_ViewportSize:[Mt,bt]},it.convertOptionsToUniforms(it.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(X){this.enabled=X}},{key:"setRenderToScreen",value:function(X){this.renderToScreen=X}},{key:"updateOptions",value:function(X){this.optionsToUpdate=F(F({},this.optionsToUpdate),X)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(X){var it={};return Object.keys(X).forEach(function(ft){f()(X[ft])||(it["u_".concat(o()(b()(ft)))]=X[ft])}),it}}]),k}(),L),O=h()(A.prototype,"shaderModuleService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A))||P)},"+iFO":function(Oe,mt,R){var U=R("dTAl"),E=R("LcsW"),T=R("6sVZ");function e(t){return typeof t.constructor=="function"&&!T(t)?U(E(t)):{}}Oe.exports=e},"/33/":function(Oe,mt){},"/Uc5":function(Oe,mt){},"/ezw":function(Oe,mt,R){"use strict";var U=R("rePB"),E=R("wx14"),T=R("U8pU"),e=R("q1tI"),t=R("TSYQ"),l=R.n(t),s=function(V){var k=V.prefixCls,Z=V.className,X=V.width,it=V.style;return e.createElement("h3",{className:l()(k,Z),style:Object(E.a)({width:X},it)})},c=s,r=R("KQm4"),h=function(V){var k=function(It){var Nt=V.width,Rt=V.rows,Mt=Rt===void 0?2:Rt;if(Array.isArray(Nt))return Nt[It];if(Mt-1===It)return Nt},Z=V.prefixCls,X=V.className,it=V.style,ft=V.rows,pt=Object(r.a)(Array(ft)).map(function(ut,It){return e.createElement("li",{key:It,style:{width:k(It)}})});return e.createElement("ul",{className:l()(Z,X),style:it},pt)},n=h,i=R("H84U"),a=function(V){var k,Z,X=V.prefixCls,it=V.className,ft=V.style,pt=V.size,ut=V.shape,It=l()((k={},Object(U.a)(k,"".concat(X,"-lg"),pt==="large"),Object(U.a)(k,"".concat(X,"-sm"),pt==="small"),k)),Nt=l()((Z={},Object(U.a)(Z,"".concat(X,"-circle"),ut==="circle"),Object(U.a)(Z,"".concat(X,"-square"),ut==="square"),Object(U.a)(Z,"".concat(X,"-round"),ut==="round"),Z)),Rt=typeof pt=="number"?{width:pt,height:pt,lineHeight:"".concat(pt,"px")}:{};return e.createElement("span",{className:l()(X,It,Nt,it),style:Object(E.a)(Object(E.a)({},Rt),ft)})},o=a,u=R("bT9E"),f=function(V){var k=function(X){var it=X.getPrefixCls,ft=V.prefixCls,pt=V.className,ut=V.active,It=it("skeleton",ft),Nt=Object(u.a)(V,["prefixCls"]),Rt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),pt);return e.createElement("div",{className:Rt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-avatar")},Nt)))};return e.createElement(i.a,null,k)};f.defaultProps={size:"default",shape:"circle"};var v=f,b=function(V){var k=function(X){var it=X.getPrefixCls,ft=V.prefixCls,pt=V.className,ut=V.active,It=it("skeleton",ft),Nt=Object(u.a)(V,["prefixCls"]),Rt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),pt);return e.createElement("div",{className:Rt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-button")},Nt)))};return e.createElement(i.a,null,k)};b.defaultProps={size:"default"};var y=b,g=function(V){var k=function(X){var it=X.getPrefixCls,ft=V.prefixCls,pt=V.className,ut=V.active,It=it("skeleton",ft),Nt=Object(u.a)(V,["prefixCls"]),Rt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),pt);return e.createElement("div",{className:Rt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-input")},Nt)))};return e.createElement(i.a,null,k)};g.defaultProps={size:"default"};var _=g,M="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",x=function(V){var k=function(X){var it=X.getPrefixCls,ft=V.prefixCls,pt=V.className,ut=V.style,It=it("skeleton",ft),Nt=l()(It,"".concat(It,"-element"),pt);return e.createElement("div",{className:Nt},e.createElement("div",{className:l()("".concat(It,"-image"),pt),style:ut},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(It,"-image-svg")},e.createElement("path",{d:M,className:"".concat(It,"-image-path")}))))};return e.createElement(i.a,null,k)},m=x;function S(K){return K&&Object(T.a)(K)==="object"?K:{}}function P(K,V){return K&&!V?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function A(K,V){return!K&&V?{width:"38%"}:K&&V?{width:"50%"}:{}}function O(K,V){var k={};return(!K||!V)&&(k.width="61%"),!K&&V?k.rows=3:k.rows=2,k}var L=function(V){var k=function(X){var it=X.getPrefixCls,ft=X.direction,pt=V.prefixCls,ut=V.loading,It=V.className,Nt=V.children,Rt=V.avatar,Mt=V.title,bt=V.paragraph,At=V.active,rt=V.round,Pt=it("skeleton",pt);if(ut||!("loading"in V)){var z,Q=!!Rt,gt=!!Mt,et=!!bt,ot;if(Q){var xt=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-avatar")},P(gt,et)),S(Rt));ot=e.createElement("div",{className:"".concat(Pt,"-header")},e.createElement(o,xt))}var H;if(gt||et){var nt;if(gt){var at=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-title")},A(Q,et)),S(Mt));nt=e.createElement(c,at)}var q;if(et){var _t=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-paragraph")},O(Q,gt)),S(bt));q=e.createElement(n,_t)}H=e.createElement("div",{className:"".concat(Pt,"-content")},nt,q)}var yt=l()(Pt,(z={},Object(U.a)(z,"".concat(Pt,"-with-avatar"),Q),Object(U.a)(z,"".concat(Pt,"-active"),At),Object(U.a)(z,"".concat(Pt,"-rtl"),ft==="rtl"),Object(U.a)(z,"".concat(Pt,"-round"),rt),z),It);return e.createElement("div",{className:yt},ot,H)}return Nt};return e.createElement(i.a,null,k)};L.defaultProps={avatar:!1,title:!0,paragraph:!0},L.Button=y,L.Avatar=v,L.Input=_,L.Image=m;var W=L,F=mt.a=W},"/zsF":function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("bE4E"),e=R.n(T)},"0JQy":function(Oe,mt){var R="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",u="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+u+o+")*",v=u+o+f,b="(?:"+[h+s+"?",s,n,i,l].join("|")+")",y=RegExp(c+"(?="+c+")|"+b+v,"g");function g(_){return _.match(y)||[]}Oe.exports=g},"0ZTe":function(Oe,mt,R){var U=R("wy8a"),E=R("quyA"),T=R("Em2t"),e=R("dt0z");function t(l){return function(s){s=e(s);var c=E(s)?T(s):void 0,r=c?c[0]:s.charAt(0),h=c?U(c,1).join(""):s.slice(1);return r[l]()+h}}Oe.exports=t},"0eqD":function(Oe,mt){},"0gSV":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.tagged=void 0;var U=R("GXnB"),E=R("Ztfv");function T(e,t){return function(l,s,c){var r=new U.Metadata(e,t);typeof c=="number"?E.tagParameter(l,s,c,r):E.tagProperty(l,s,r)}}mt.tagged=T},"0wsv":function(Oe,mt,R){"use strict";R.d(mt,"b",function(){return t}),R.d(mt,"f",function(){return s}),R.d(mt,"e",function(){return n}),R.d(mt,"g",function(){return y}),R.d(mt,"a",function(){return m}),R.d(mt,"c",function(){return A}),R.d(mt,"d",function(){return O});var U=63710088e-1,E={centimeters:U*100,centimetres:U*100,degrees:U/111325,feet:U*3.28084,inches:U*39.37,kilometers:U/1e3,kilometres:U/1e3,meters:U,metres:U,miles:U/1609.344,millimeters:U*1e3,millimetres:U*1e3,nauticalmiles:U/1852,radians:1,yards:U/1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/U,yards:1/1.0936},e={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(F,K,V){V===void 0&&(V={});var k={type:"Feature"};return(V.id===0||V.id)&&(k.id=V.id),V.bbox&&(k.bbox=V.bbox),k.properties=K||{},k.geometry=F,k}function l(F,K,V){switch(V===void 0&&(V={}),F){case"Point":return s(K).geometry;case"LineString":return n(K).geometry;case"Polygon":return r(K).geometry;case"MultiPoint":return u(K).geometry;case"MultiLineString":return o(K).geometry;case"MultiPolygon":return f(K).geometry;default:throw new Error(F+" is invalid")}}function s(F,K,V){if(V===void 0&&(V={}),!F)throw new Error("coordinates is required");if(!Array.isArray(F))throw new Error("coordinates must be an Array");if(F.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(F[0])||!A(F[1]))throw new Error("coordinates must contain numbers");var k={type:"Point",coordinates:F};return t(k,K,V)}function c(F,K,V){return V===void 0&&(V={}),a(F.map(function(k){return s(k,K)}),V)}function r(F,K,V){V===void 0&&(V={});for(var k=0,Z=F;k<Z.length;k++){var X=Z[k];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var it=0;it<X[X.length-1].length;it++)if(X[X.length-1][it]!==X[0][it])throw new Error("First and last Position are not equivalent.")}var ft={type:"Polygon",coordinates:F};return t(ft,K,V)}function h(F,K,V){return V===void 0&&(V={}),a(F.map(function(k){return r(k,K)}),V)}function n(F,K,V){if(V===void 0&&(V={}),F.length<2)throw new Error("coordinates must be an array of two or more positions");var k={type:"LineString",coordinates:F};return t(k,K,V)}function i(F,K,V){return V===void 0&&(V={}),a(F.map(function(k){return n(k,K)}),V)}function a(F,K){K===void 0&&(K={});var V={type:"FeatureCollection"};return K.id&&(V.id=K.id),K.bbox&&(V.bbox=K.bbox),V.features=F,V}function o(F,K,V){V===void 0&&(V={});var k={type:"MultiLineString",coordinates:F};return t(k,K,V)}function u(F,K,V){V===void 0&&(V={});var k={type:"MultiPoint",coordinates:F};return t(k,K,V)}function f(F,K,V){V===void 0&&(V={});var k={type:"MultiPolygon",coordinates:F};return t(k,K,V)}function v(F,K,V){V===void 0&&(V={});var k={type:"GeometryCollection",geometries:F};return t(k,K,V)}function b(F,K){if(K===void 0&&(K=0),K&&!(K>=0))throw new Error("precision must be a positive number");var V=Math.pow(10,K||0);return Math.round(F*V)/V}function y(F,K){K===void 0&&(K="kilometers");var V=E[K];if(!V)throw new Error(K+" units is invalid");return F*V}function g(F,K){K===void 0&&(K="kilometers");var V=E[K];if(!V)throw new Error(K+" units is invalid");return F/V}function _(F,K){return x(g(F,K))}function M(F){var K=F%360;return K<0&&(K+=360),K}function x(F){var K=F%(2*Math.PI);return K*180/Math.PI}function m(F){var K=F%360;return K*Math.PI/180}function S(F,K,V){if(K===void 0&&(K="kilometers"),V===void 0&&(V="kilometers"),!(F>=0))throw new Error("length must be a positive number");return y(g(F,K),V)}function P(F,K,V){if(K===void 0&&(K="meters"),V===void 0&&(V="kilometers"),!(F>=0))throw new Error("area must be a positive number");var k=e[K];if(!k)throw new Error("invalid original units");var Z=e[V];if(!Z)throw new Error("invalid final units");return F/k*Z}function A(F){return!isNaN(F)&&F!==null&&!Array.isArray(F)}function O(F){return!!F&&F.constructor===Object}function L(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(F.length!==4&&F.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(K){if(!A(K))throw new Error("bbox must only contain numbers")})}function W(F){if(!F)throw new Error("id is required");if(["string","number"].indexOf(typeof F)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(Oe,mt,R){var U=R("w/wX"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isSet,t=e?E(e):U;Oe.exports=t},"14J3":function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("1GLa")},"1ABj":function(Oe,mt){function R(U,E){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},"1gqn":function(Oe,mt){Oe.exports=function(U){return U&&typeof U=="object"&&typeof U.copy=="function"&&typeof U.fill=="function"&&typeof U.readUInt8=="function"}},"1jvM":function(Oe,mt){},"2ajD":function(Oe,mt){function R(U){return U!==U}Oe.exports=R},"3DfO":function(Oe,mt){function R(U){return U==null}Oe.exports=R},"3L66":function(Oe,mt,R){var U=R("MMmD"),E=R("ExA7");function T(e){return E(e)&&U(e)}Oe.exports=T},"3cYt":function(Oe,mt){function R(U){return function(E){return U==null?void 0:U[E]}}Oe.exports=R},"406g":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingOnSyntax=void 0;var U=R("z4Hk"),E=function(){function T(e){this._binding=e}return T.prototype.onActivation=function(e){return this._binding.onActivation=e,new U.BindingWhenSyntax(this._binding)},T}();mt.BindingOnSyntax=E},"4U9+":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.default=function(u){return(0,E.default)((0,c.default)(u)&&u.length>=1,"Must merge at least 1 JSON schema."),e.default.apply(void 0,[{}].concat(o(u),[function(f,v,b){if(!(0,l.default)(f)){if(b==="required")return(0,h.default)(f.concat(v));if((0,i.default)(f)){if(!(0,i.default)(v))throw new Error('Failed to merge schemas because "'+b+'" has different values.');return}E.default.deepEqual(f,v,'Failed to merge schemas because "'+b+'" has different values: '+JSON.stringify(f)+" and "+JSON.stringify(v)+".")}}]))};var U=R("9lTW"),E=a(U),T=R("qd8s"),e=a(T),t=R("3DfO"),l=a(t),s=R("WFAs"),c=a(s),r=R("w26f"),h=a(r),n=R("zZPE"),i=a(n);function a(u){return u&&u.__esModule?u:{default:u}}function o(u){if(Array.isArray(u)){for(var f=0,v=Array(u.length);f<u.length;f++)v[f]=u[f];return v}else return Array.from(u)}Oe.exports=mt.default},"4ZJM":function(Oe,mt,R){(function(U,E){Oe.exports=E()})(this,function(){"use strict";var U,E,T;function e(t,l){if(!U)U=l;else if(!E)E=l;else{var s="var sharedChunk = {}; ("+U+")(sharedChunk); ("+E+")(sharedChunk);",c={};U(c),T=l(c),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return e(["exports"],function(t){"use strict";function l(d,p){return d(p={exports:{}},p.exports),p.exports}var s=c;function c(d,p,C,N){this.cx=3*d,this.bx=3*(C-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(N-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=N,this.p2x=C,this.p2y=N}c.prototype.sampleCurveX=function(d){return((this.ax*d+this.bx)*d+this.cx)*d},c.prototype.sampleCurveY=function(d){return((this.ay*d+this.by)*d+this.cy)*d},c.prototype.sampleCurveDerivativeX=function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},c.prototype.solveCurveX=function(d,p){var C,N,J,ct,Tt;for(p===void 0&&(p=1e-6),J=d,Tt=0;Tt<8;Tt++){if(ct=this.sampleCurveX(J)-d,Math.abs(ct)<p)return J;var Bt=this.sampleCurveDerivativeX(J);if(Math.abs(Bt)<1e-6)break;J-=ct/Bt}if((J=d)<(C=0))return C;if(J>(N=1))return N;for(;C<N;){if(ct=this.sampleCurveX(J),Math.abs(ct-d)<p)return J;d>ct?C=J:N=J,J=.5*(N-C)+C}return J},c.prototype.solve=function(d,p){return this.sampleCurveY(this.solveCurveX(d,p))};var r=h;function h(d,p){this.x=d,this.y=p}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,C){return this.clone()._rotateAround(p,C)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var C=p.x-this.x,N=p.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,C){return Math.atan2(this.x*C-this.y*p,this.x*p+this.y*C)},_matMult:function(p){var C=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=C,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var C=Math.cos(p),N=Math.sin(p),J=N*this.x+C*this.y;return this.x=C*this.x-N*this.y,this.y=J,this},_rotateAround:function(p,C){var N=Math.cos(p),J=Math.sin(p),ct=C.y+J*(this.x-C.x)+N*(this.y-C.y);return this.x=C.x+N*(this.x-C.x)-J*(this.y-C.y),this.y=ct,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(d){return d instanceof h?d:Array.isArray(d)?new h(d[0],d[1]):d};var n=typeof self!="undefined"?self:{},i=Math.pow(2,53)-1;function a(d,p,C,N){var J=new s(d,p,C,N);return function(ct){return J.solve(ct)}}var o=a(.25,.1,.25,1);function u(d,p,C){return Math.min(C,Math.max(p,d))}function f(d,p,C){var N=C-p,J=((d-p)%N+N)%N+p;return J===p?C:J}function v(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,J=p;N<J.length;N+=1){var ct=J[N];for(var Tt in ct)d[Tt]=ct[Tt]}return d}var b=1;function y(){return b++}function g(){return function d(p){return p?(p^16*Math.random()>>p/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()}function _(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)}function M(d,p){d.forEach(function(C){p[C]&&(p[C]=p[C].bind(p))})}function x(d,p){return d.indexOf(p,d.length-p.length)!==-1}function m(d,p,C){var N={};for(var J in d)N[J]=p.call(C||this,d[J],J,d);return N}function S(d,p,C){var N={};for(var J in d)p.call(C||this,d[J],J,d)&&(N[J]=d[J]);return N}function P(d){return Array.isArray(d)?d.map(P):typeof d=="object"&&d?m(d,P):d}var A={};function O(d){A[d]||(typeof console!="undefined"&&console.warn(d),A[d]=!0)}function L(d,p,C){return(C.y-d.y)*(p.x-d.x)>(p.y-d.y)*(C.x-d.x)}function W(d){for(var p=0,C=0,N=d.length,J=N-1,ct=void 0,Tt=void 0;C<N;J=C++)p+=((Tt=d[J]).x-(ct=d[C]).x)*(ct.y+Tt.y);return p}function F(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function K(d){var p={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(N,J,ct,Tt){var Bt=ct||Tt;return p[J]=!Bt||Bt.toLowerCase(),""}),p["max-age"]){var C=parseInt(p["max-age"],10);isNaN(C)?delete p["max-age"]:p["max-age"]=C}return p}var V=null;function k(d){if(V==null){var p=d.navigator?d.navigator.userAgent:null;V=!!d.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return V}function Z(d){try{var p=n[d];return p.setItem("_mapbox_test_",1),p.removeItem("_mapbox_test_"),!0}catch(C){return!1}}var X,it,ft,pt,ut=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),It=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Nt=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,Rt={now:ut,frame:function(p){var C=It(p);return{cancel:function(){return Nt(C)}}},getImageData:function(p,C){C===void 0&&(C=0);var N=n.document.createElement("canvas"),J=N.getContext("2d");if(!J)throw new Error("failed to create canvas 2d context");return N.width=p.width,N.height=p.height,J.drawImage(p,0,0,p.width,p.height),J.getImageData(-C,-C,p.width+2*C,p.height+2*C)},resolveURL:function(p){return X||(X=n.document.createElement("a")),X.href=p,X.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(it==null&&(it=n.matchMedia("(prefers-reduced-motion: reduce)")),it.matches)}},Mt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},bt={supported:!1,testSupport:function(p){!At&&pt&&(rt?Pt(p):ft=p)}},At=!1,rt=!1;function Pt(d){var p=d.createTexture();d.bindTexture(d.TEXTURE_2D,p);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,pt),d.isContextLost())return;bt.supported=!0}catch(C){}d.deleteTexture(p),At=!0}n.document&&((pt=n.document.createElement("img")).onload=function(){ft&&Pt(ft),ft=null,rt=!0},pt.onerror=function(){At=!0,ft=null},pt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",Q=function(p,C){this._transformRequestFn=p,this._customAccessToken=C,this._createSkuToken()};function gt(d){return d.indexOf("mapbox:")===0}Q.prototype._createSkuToken=function(){var d=function(){for(var p="",C=0;C<10;C++)p+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,p].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=d.token,this._skuTokenExpiresAt=d.tokenExpiresAt},Q.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Q.prototype.transformRequest=function(d,p){return this._transformRequestFn&&this._transformRequestFn(d,p)||{url:d}},Q.prototype.normalizeStyleURL=function(d,p){if(!gt(d))return d;var C=H(d);return C.path="/styles/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeGlyphsURL=function(d,p){if(!gt(d))return d;var C=H(d);return C.path="/fonts/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeSourceURL=function(d,p){if(!gt(d))return d;var C=H(d);return C.path="/v4/"+C.authority+".json",C.params.push("secure"),this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeSpriteURL=function(d,p,C,N){var J=H(d);return gt(d)?(J.path="/styles/v1"+J.path+"/sprite"+p+C,this._makeAPIURL(J,this._customAccessToken||N)):(J.path+=""+p+C,nt(J))},Q.prototype.normalizeTileURL=function(d,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),d&&!gt(d))return d;var C=H(d);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Rt.devicePixelRatio>=2||p===512?"@2x":"")+(bt.supported?".webp":"$1")),C.path=C.path.replace(/^.+\/v4\//,"/"),C.path="/v4"+C.path;var N=this._customAccessToken||function(J){for(var ct=0,Tt=J;ct<Tt.length;ct+=1){var Bt=Tt[ct].match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(C.params)||Mt.ACCESS_TOKEN;return Mt.REQUIRE_ACCESS_TOKEN&&N&&this._skuToken&&C.params.push("sku="+this._skuToken),this._makeAPIURL(C,N)},Q.prototype.canonicalizeTileURL=function(d,p){var C=H(d);if(!C.path.match(/(^\/v4\/)/)||!C.path.match(/\.[\w]+$/))return d;var N="mapbox://tiles/";N+=C.path.replace("/v4/","");var J=C.params;return p&&(J=J.filter(function(ct){return!ct.match(/^access_token=/)})),J.length&&(N+="?"+J.join("&")),N},Q.prototype.canonicalizeTileset=function(d,p){for(var C=!!p&&gt(p),N=[],J=0,ct=d.tiles||[];J<ct.length;J+=1){var Tt=ct[J];ot(Tt)?N.push(this.canonicalizeTileURL(Tt,C)):N.push(Tt)}return N},Q.prototype._makeAPIURL=function(d,p){var C="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",N=H(Mt.API_URL);if(d.protocol=N.protocol,d.authority=N.authority,d.protocol==="http"){var J=d.params.indexOf("secure");J>=0&&d.params.splice(J,1)}if(N.path!=="/"&&(d.path=""+N.path+d.path),!Mt.REQUIRE_ACCESS_TOKEN)return nt(d);if(!(p=p||Mt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+C);if(p[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+C);return d.params=d.params.filter(function(ct){return ct.indexOf("access_token")===-1}),d.params.push("access_token="+p),nt(d)};var et=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ot(d){return et.test(d)}var xt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function H(d){var p=d.match(xt);if(!p)throw new Error("Unable to parse URL object");return{protocol:p[1],authority:p[2],path:p[3]||"/",params:p[4]?p[4].split("&"):[]}}function nt(d){var p=d.params.length?"?"+d.params.join("&"):"";return d.protocol+"://"+d.authority+d.path+p}function at(d){if(!d)return null;var p=d.split(".");if(!p||p.length!==3)return null;try{return JSON.parse(decodeURIComponent(n.atob(p[1]).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(C){return null}}var q=function(p){this.type=p,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};q.prototype.getStorageKey=function(d){var p,C=at(Mt.ACCESS_TOKEN);return p=C&&C.u?n.btoa(encodeURIComponent(C.u).replace(/%([0-9A-F]{2})/g,function(N,J){return String.fromCharCode(Number("0x"+J))})):Mt.ACCESS_TOKEN||"",d?"mapbox.eventData."+d+":"+p:"mapbox.eventData:"+p},q.prototype.fetchEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{var N=n.localStorage.getItem(p);N&&(this.eventData=JSON.parse(N));var J=n.localStorage.getItem(C);J&&(this.anonId=J)}catch(ct){O("Unable to read from LocalStorage")}},q.prototype.saveEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{n.localStorage.setItem(C,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(p,JSON.stringify(this.eventData))}catch(N){O("Unable to write to LocalStorage")}},q.prototype.processRequests=function(d){},q.prototype.postEvent=function(d,p,C,N){var J=this;if(Mt.EVENTS_URL){var ct=H(Mt.EVENTS_URL);ct.params.push("access_token="+(N||Mt.ACCESS_TOKEN||""));var Tt={event:this.type,created:new Date(d).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:z,userId:this.anonId},Bt=p?v(Tt,p):Tt,Xt={url:nt(ct),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=hi(Xt,function(de){J.pendingRequest=null,C(de),J.saveEventData(),J.processRequests(N)})}},q.prototype.queueRequest=function(d,p){this.queue.push(d),this.processRequests(p)};var _t,yt,Ft=function(d){function p(){d.call(this,"map.load"),this.success={},this.skuToken=""}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postMapLoadEvent=function(C,N,J,ct){this.skuToken=J,(Mt.EVENTS_URL&&ct||Mt.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Tt){return gt(Tt)||ot(Tt)}))&&this.queueRequest({id:N,timestamp:Date.now()},ct)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){var J=this.queue.shift(),ct=J.id,Tt=J.timestamp;ct&&this.success[ct]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=g()),this.postEvent(Tt,{skuToken:this.skuToken},function(Bt){Bt||ct&&(N.success[ct]=!0)},C))}},p}(q),Qt=new(function(d){function p(C){d.call(this,"appUserTurnstile"),this._customAccessToken=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postTurnstileEvent=function(C,N){Mt.EVENTS_URL&&Mt.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(J){return gt(J)||ot(J)})&&this.queueRequest(Date.now(),N)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var J=at(Mt.ACCESS_TOKEN),ct=J?J.u:Mt.ACCESS_TOKEN,Tt=ct!==this.eventData.tokenU;_(this.anonId)||(this.anonId=g(),Tt=!0);var Bt=this.queue.shift();if(this.eventData.lastSuccess){var Xt=new Date(this.eventData.lastSuccess),de=new Date(Bt),De=(Bt-this.eventData.lastSuccess)/864e5;Tt=Tt||De>=1||De<-1||Xt.getDate()!==de.getDate()}else Tt=!0;if(!Tt)return this.processRequests();this.postEvent(Bt,{"enabled.telemetry":!1},function(Ge){Ge||(N.eventData.lastSuccess=Bt,N.eventData.tokenU=ct)},C)}},p}(q)),ee=Qt.postTurnstileEvent.bind(Qt),Vt=new Ft,$t=Vt.postMapLoadEvent.bind(Vt),Me=500,me=50;function le(){n.caches&&!_t&&(_t=n.caches.open("mapbox-tiles"))}function be(d){var p=d.indexOf("?");return p<0?d:d.slice(0,p)}var ze,Xe=1/0;function Sn(){return ze==null&&(ze=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),ze}var Xn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Xn);var Hn=function(d){function p(C,N,J){N===401&&ot(J)&&(C+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),d.call(this,C),this.status=N,this.url=J,this.name=this.constructor.name,this.message=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},p}(Error),nn=F()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href},en,An,Nn=function(p,C){if(!(/^file:/.test(N=p.url)||/^file:/.test(nn())&&!/^\w+:/.test(N))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(J,ct){var Tt,Bt=new n.AbortController,Xt=new n.Request(J.url,{method:J.method||"GET",body:J.body,credentials:J.credentials,headers:J.headers,referrer:nn(),signal:Bt.signal}),de=!1,De=!1,Ge=(Tt=Xt.url).indexOf("sku=")>0&&ot(Tt);J.type==="json"&&Xt.headers.set("Accept","application/json");var He=function(On,$n,Qn){if(!De){if(On&&On.message!=="SecurityError"&&O(On),$n&&Qn)return cn($n);var Sr=Date.now();n.fetch(Xt).then(function(Nr){if(Nr.ok){var Wr=Ge?Nr.clone():null;return cn(Nr,Wr,Sr)}return ct(new Hn(Nr.statusText,Nr.status,J.url))}).catch(function(Nr){Nr.code!==20&&ct(new Error(Nr.message))})}},cn=function(On,$n,Qn){(J.type==="arrayBuffer"?On.arrayBuffer():J.type==="json"?On.json():On.text()).then(function(Sr){De||($n&&Qn&&function(Nr,Wr,pi){if(le(),_t){var ai={status:Wr.status,statusText:Wr.statusText,headers:new n.Headers};Wr.headers.forEach(function(zi,ia){return ai.headers.set(ia,zi)});var Bi=K(Wr.headers.get("Cache-Control")||"");Bi["no-store"]||(Bi["max-age"]&&ai.headers.set("Expires",new Date(pi+1e3*Bi["max-age"]).toUTCString()),new Date(ai.headers.get("Expires")).getTime()-pi<42e4||function(zi,ia){if(yt===void 0)try{new Response(new ReadableStream),yt=!0}catch(va){yt=!1}yt?ia(zi.body):zi.blob().then(ia)}(Wr,function(zi){var ia=new n.Response(zi,ai);le(),_t&&_t.then(function(va){return va.put(be(Nr.url),ia)}).catch(function(va){return O(va.message)})}))}}(Xt,$n,Qn),de=!0,ct(null,Sr,On.headers.get("Cache-Control"),On.headers.get("Expires")))}).catch(function(Sr){De||ct(new Error(Sr.message))})};return Ge?function(Rn,On){if(le(),!_t)return On(null);var $n=be(Rn.url);_t.then(function(Qn){Qn.match($n).then(function(Sr){var Nr=function(Wr){if(!Wr)return!1;var pi=new Date(Wr.headers.get("Expires")||0),ai=K(Wr.headers.get("Cache-Control")||"");return pi>Date.now()&&!ai["no-cache"]}(Sr);Qn.delete($n),Nr&&Qn.put($n,Sr.clone()),On(null,Sr,Nr)}).catch(On)}).catch(On)}(Xt,He):He(null,null),{cancel:function(){De=!0,de||Bt.abort()}}}(p,C);if(F()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,C,void 0,!0)}var N;return function(J,ct){var Tt=new n.XMLHttpRequest;for(var Bt in Tt.open(J.method||"GET",J.url,!0),J.type==="arrayBuffer"&&(Tt.responseType="arraybuffer"),J.headers)Tt.setRequestHeader(Bt,J.headers[Bt]);return J.type==="json"&&(Tt.responseType="text",Tt.setRequestHeader("Accept","application/json")),Tt.withCredentials=J.credentials==="include",Tt.onerror=function(){ct(new Error(Tt.statusText))},Tt.onload=function(){if((Tt.status>=200&&Tt.status<300||Tt.status===0)&&Tt.response!==null){var Xt=Tt.response;if(J.type==="json")try{Xt=JSON.parse(Tt.response)}catch(de){return ct(de)}ct(null,Xt,Tt.getResponseHeader("Cache-Control"),Tt.getResponseHeader("Expires"))}else ct(new Hn(Tt.statusText,Tt.status,J.url))},Tt.send(J.body),{cancel:function(){return Tt.abort()}}}(p,C)},fr=function(p,C){return Nn(v(p,{type:"arrayBuffer"}),C)},hi=function(p,C){return Nn(v(p,{method:"POST"}),C)},Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";en=[],An=0;var Te=function d(p,C){if(bt.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),An>=Mt.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:p,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return en.push(N),N}An++;var J=!1,ct=function(){if(!J)for(J=!0,An--;en.length&&An<Mt.MAX_PARALLEL_IMAGE_REQUESTS;){var Xt=en.shift();Xt.cancelled||(Xt.cancel=d(Xt.requestParameters,Xt.callback).cancel)}},Tt=fr(p,function(Bt,Xt,de,De){ct(),Bt?C(Bt):Xt&&(Sn()?function(Ge,He){var cn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});n.createImageBitmap(cn).then(function(Rn){He(null,Rn)}).catch(function(Rn){He(new Error("Could not load image because of "+Rn.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Xt,C):function(Ge,He,cn,Rn){var On=new n.Image,$n=n.URL;On.onload=function(){He(null,On),$n.revokeObjectURL(On.src),On.onload=null,n.requestAnimationFrame(function(){On.src=Ce})},On.onerror=function(){return He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Qn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});On.cacheControl=cn,On.expires=Rn,On.src=Ge.byteLength?$n.createObjectURL(Qn):Ce}(Xt,C,de,De))});return{cancel:function(){Tt.cancel(),ct()}}};function Jt(d,p,C){C[d]&&C[d].indexOf(p)!==-1||(C[d]=C[d]||[],C[d].push(p))}function pe(d,p,C){if(C&&C[d]){var N=C[d].indexOf(p);N!==-1&&C[d].splice(N,1)}}var Wt=function(p,C){C===void 0&&(C={}),v(this,C),this.type=p},ie=function(d){function p(C,N){N===void 0&&(N={}),d.call(this,"error",v({error:C},N))}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Wt),Ae=function(){};Ae.prototype.on=function(d,p){return this._listeners=this._listeners||{},Jt(d,p,this._listeners),this},Ae.prototype.off=function(d,p){return pe(d,p,this._listeners),pe(d,p,this._oneTimeListeners),this},Ae.prototype.once=function(d,p){return this._oneTimeListeners=this._oneTimeListeners||{},Jt(d,p,this._oneTimeListeners),this},Ae.prototype.fire=function(d,p){typeof d=="string"&&(d=new Wt(d,p||{}));var C=d.type;if(this.listens(C)){d.target=this;for(var N=0,J=this._listeners&&this._listeners[C]?this._listeners[C].slice():[];N<J.length;N+=1)J[N].call(this,d);for(var ct=0,Tt=this._oneTimeListeners&&this._oneTimeListeners[C]?this._oneTimeListeners[C].slice():[];ct<Tt.length;ct+=1){var Bt=Tt[ct];pe(C,Bt,this._oneTimeListeners),Bt.call(this,d)}var Xt=this._eventedParent;Xt&&(v(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Xt.fire(d))}else d instanceof ie&&console.error(d.error);return this},Ae.prototype.listens=function(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)},Ae.prototype.setEventedParent=function(d,p){return this._eventedParent=d,this._eventedParentData=p,this};var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},xe=function(p,C,N,J){this.message=(p?p+": ":"")+N,J&&(this.identifier=J),C!=null&&C.__line__&&(this.line=C.__line__)};function $e(d){var p=d.value;return p?[new xe(d.key,p,"constants have been deprecated as of v8")]:[]}function Fn(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,J=p;N<J.length;N+=1){var ct=J[N];for(var Tt in ct)d[Tt]=ct[Tt]}return d}function or(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function En(d){if(Array.isArray(d))return d.map(En);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var p={};for(var C in d)p[C]=En(d[C]);return p}return or(d)}var Pn=function(d){function p(C,N){d.call(this,N),this.message=N,this.key=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Error),br=function(p,C){C===void 0&&(C=[]),this.parent=p,this.bindings={};for(var N=0,J=C;N<J.length;N+=1){var ct=J[N];this.bindings[ct[0]]=ct[1]}};br.prototype.concat=function(d){return new br(this,d)},br.prototype.get=function(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(d+" not found in scope.")},br.prototype.has=function(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)};var Pr={kind:"null"},ln={kind:"number"},Cr={kind:"string"},Ar={kind:"boolean"},Be={kind:"color"},We={kind:"object"},Ye={kind:"value"},fn={kind:"collator"},gn={kind:"formatted"},Bn={kind:"resolvedImage"};function bn(d,p){return{kind:"array",itemType:d,N:p}}function Ln(d){if(d.kind==="array"){var p=Ln(d.itemType);return typeof d.N=="number"?"array<"+p+", "+d.N+">":d.itemType.kind==="value"?"array":"array<"+p+">"}return d.kind}var ir=[Pr,ln,Cr,Ar,Be,gn,We,bn(Ye),Bn];function Yn(d,p){if(p.kind==="error")return null;if(d.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!Yn(d.itemType,p.itemType))&&(typeof d.N!="number"||d.N===p.N))return null}else{if(d.kind===p.kind)return null;if(d.kind==="value"){for(var C=0,N=ir;C<N.length;C+=1)if(!Yn(N[C],p))return null}}return"Expected "+Ln(d)+" but found "+Ln(p)+" instead."}function _n(d,p){return p.some(function(C){return C.kind===d.kind})}function Dr(d,p){return p.some(function(C){return C==="null"?d===null:C==="array"?Array.isArray(d):C==="object"?d&&!Array.isArray(d)&&typeof d=="object":C===typeof d})}var vr=l(function(d,p){var C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function N(Bt){return(Bt=Math.round(Bt))<0?0:Bt>255?255:Bt}function J(Bt){return N(Bt[Bt.length-1]==="%"?parseFloat(Bt)/100*255:parseInt(Bt))}function ct(Bt){return(Xt=Bt[Bt.length-1]==="%"?parseFloat(Bt)/100:parseFloat(Bt))<0?0:Xt>1?1:Xt;var Xt}function Tt(Bt,Xt,de){return de<0?de+=1:de>1&&(de-=1),6*de<1?Bt+(Xt-Bt)*de*6:2*de<1?Xt:3*de<2?Bt+(Xt-Bt)*(2/3-de)*6:Bt}try{p.parseCSSColor=function(Bt){var Xt,de=Bt.replace(/ /g,"").toLowerCase();if(de in C)return C[de].slice();if(de[0]==="#")return de.length===4?(Xt=parseInt(de.substr(1),16))>=0&&Xt<=4095?[(3840&Xt)>>4|(3840&Xt)>>8,240&Xt|(240&Xt)>>4,15&Xt|(15&Xt)<<4,1]:null:de.length===7&&(Xt=parseInt(de.substr(1),16))>=0&&Xt<=16777215?[(16711680&Xt)>>16,(65280&Xt)>>8,255&Xt,1]:null;var De=de.indexOf("("),Ge=de.indexOf(")");if(De!==-1&&Ge+1===de.length){var He=de.substr(0,De),cn=de.substr(De+1,Ge-(De+1)).split(","),Rn=1;switch(He){case"rgba":if(cn.length!==4)return null;Rn=ct(cn.pop());case"rgb":return cn.length!==3?null:[J(cn[0]),J(cn[1]),J(cn[2]),Rn];case"hsla":if(cn.length!==4)return null;Rn=ct(cn.pop());case"hsl":if(cn.length!==3)return null;var On=(parseFloat(cn[0])%360+360)%360/360,$n=ct(cn[1]),Qn=ct(cn[2]),Sr=Qn<=.5?Qn*($n+1):Qn+$n-Qn*$n,Nr=2*Qn-Sr;return[N(255*Tt(Nr,Sr,On+1/3)),N(255*Tt(Nr,Sr,On)),N(255*Tt(Nr,Sr,On-1/3)),Rn];default:return null}}return null}}catch(Bt){}}).parseCSSColor,zr=function(p,C,N,J){J===void 0&&(J=1),this.r=p,this.g=C,this.b=N,this.a=J};zr.parse=function(d){if(d){if(d instanceof zr)return d;if(typeof d=="string"){var p=vr(d);if(p)return new zr(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3])}}},zr.prototype.toString=function(){var d=this.toArray(),p=d[1],C=d[2],N=d[3];return"rgba("+Math.round(d[0])+","+Math.round(p)+","+Math.round(C)+","+N+")"},zr.prototype.toArray=function(){var d=this.a;return d===0?[0,0,0,0]:[255*this.r/d,255*this.g/d,255*this.b/d,d]},zr.black=new zr(0,0,0,1),zr.white=new zr(1,1,1,1),zr.transparent=new zr(0,0,0,0),zr.red=new zr(1,0,0,1);var Ai=function(p,C,N){this.sensitivity=p?C?"variant":"case":C?"accent":"base",this.locale=N,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ai.prototype.compare=function(d,p){return this.collator.compare(d,p)},Ai.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Aa=function(p,C,N,J,ct){this.text=p,this.image=C,this.scale=N,this.fontStack=J,this.textColor=ct},ka=function(p){this.sections=p};ka.fromString=function(d){return new ka([new Aa(d,null,null,null,null)])},ka.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(d){return d.text.length!==0||d.image&&d.image.name.length!==0})},ka.factory=function(d){return d instanceof ka?d:ka.fromString(d)},ka.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(d){return d.text}).join("")},ka.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];if(N.image)d.push(["image",N.image.name]);else{d.push(N.text);var J={};N.fontStack&&(J["text-font"]=["literal",N.fontStack.split(",")]),N.scale&&(J["font-scale"]=N.scale),N.textColor&&(J["text-color"]=["rgba"].concat(N.textColor.toArray())),d.push(J)}}return d};var eo=function(p){this.name=p.name,this.available=p.available};function Zo(d,p,C,N){return typeof d=="number"&&d>=0&&d<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof C=="number"&&C>=0&&C<=255?N===void 0||typeof N=="number"&&N>=0&&N<=1?null:"Invalid rgba value ["+[d,p,C,N].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof N=="number"?[d,p,C,N]:[d,p,C]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ea(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof zr||d instanceof Ai||d instanceof ka||d instanceof eo)return!0;if(Array.isArray(d)){for(var p=0,C=d;p<C.length;p+=1)if(!Ea(C[p]))return!1;return!0}if(typeof d=="object"){for(var N in d)if(!Ea(d[N]))return!1;return!0}return!1}function so(d){if(d===null)return Pr;if(typeof d=="string")return Cr;if(typeof d=="boolean")return Ar;if(typeof d=="number")return ln;if(d instanceof zr)return Be;if(d instanceof Ai)return fn;if(d instanceof ka)return gn;if(d instanceof eo)return Bn;if(Array.isArray(d)){for(var p,C=d.length,N=0,J=d;N<J.length;N+=1){var ct=so(J[N]);if(p){if(p===ct)continue;p=Ye;break}p=ct}return bn(p||Ye,C)}return We}function Ko(d){var p=typeof d;return d===null?"":p==="string"||p==="number"||p==="boolean"?String(d):d instanceof zr||d instanceof ka||d instanceof eo?d.toString():JSON.stringify(d)}eo.prototype.toString=function(){return this.name},eo.fromString=function(d){return d?new eo({name:d,available:!1}):null},eo.prototype.serialize=function(){return["image",this.name]};var no=function(p,C){this.type=p,this.value=C};no.parse=function(d,p){if(d.length!==2)return p.error("'literal' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(!Ea(d[1]))return p.error("invalid value");var C=d[1],N=so(C),J=p.expectedType;return N.kind!=="array"||N.N!==0||!J||J.kind!=="array"||typeof J.N=="number"&&J.N!==0||(N=J),new no(N,C)},no.prototype.evaluate=function(){return this.value},no.prototype.eachChild=function(){},no.prototype.outputDefined=function(){return!0},no.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zr?["rgba"].concat(this.value.toArray()):this.value instanceof ka?this.value.serialize():this.value};var So=function(p){this.name="ExpressionEvaluationError",this.message=p};So.prototype.toJSON=function(){return this.message};var cs={string:Cr,number:ln,boolean:Ar,object:We},wa=function(p,C){this.type=p,this.args=C};wa.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C,N=1,J=d[0];if(J==="array"){var ct,Tt;if(d.length>2){var Bt=d[1];if(typeof Bt!="string"||!(Bt in cs)||Bt==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);ct=cs[Bt],N++}else ct=Ye;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Tt=d[2],N++}C=bn(ct,Tt)}else C=cs[J];for(var Xt=[];N<d.length;N++){var de=p.parse(d[N],N,Ye);if(!de)return null;Xt.push(de)}return new wa(C,Xt)},wa.prototype.evaluate=function(d){for(var p=0;p<this.args.length;p++){var C=this.args[p].evaluate(d);if(!Yn(this.type,so(C)))return C;if(p===this.args.length-1)throw new So("Expected value to be of type "+Ln(this.type)+", but found "+Ln(so(C))+" instead.")}return null},wa.prototype.eachChild=function(d){this.args.forEach(d)},wa.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},wa.prototype.serialize=function(){var d=this.type,p=[d.kind];if(d.kind==="array"){var C=d.itemType;if(C.kind==="string"||C.kind==="number"||C.kind==="boolean"){p.push(C.kind);var N=d.N;(typeof N=="number"||this.args.length>1)&&p.push(N)}}return p.concat(this.args.map(function(J){return J.serialize()}))};var zo=function(p){this.type=gn,this.sections=p};zo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[1];if(!Array.isArray(C)&&typeof C=="object")return p.error("First argument must be an image or text section.");for(var N=[],J=!1,ct=1;ct<=d.length-1;++ct){var Tt=d[ct];if(J&&typeof Tt=="object"&&!Array.isArray(Tt)){J=!1;var Bt=null;if(Tt["font-scale"]&&!(Bt=p.parse(Tt["font-scale"],1,ln)))return null;var Xt=null;if(Tt["text-font"]&&!(Xt=p.parse(Tt["text-font"],1,bn(Cr))))return null;var de=null;if(Tt["text-color"]&&!(de=p.parse(Tt["text-color"],1,Be)))return null;var De=N[N.length-1];De.scale=Bt,De.font=Xt,De.textColor=de}else{var Ge=p.parse(d[ct],1,Ye);if(!Ge)return null;var He=Ge.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");J=!0,N.push({content:Ge,scale:null,font:null,textColor:null})}}return new zo(N)},zo.prototype.evaluate=function(d){return new ka(this.sections.map(function(p){var C=p.content.evaluate(d);return so(C)===Bn?new Aa("",C,null,null,null):new Aa(Ko(C),null,p.scale?p.scale.evaluate(d):null,p.font?p.font.evaluate(d).join(","):null,p.textColor?p.textColor.evaluate(d):null)}))},zo.prototype.eachChild=function(d){for(var p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d(N.content),N.scale&&d(N.scale),N.font&&d(N.font),N.textColor&&d(N.textColor)}},zo.prototype.outputDefined=function(){return!1},zo.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d.push(N.content.serialize());var J={};N.scale&&(J["font-scale"]=N.scale.serialize()),N.font&&(J["text-font"]=N.font.serialize()),N.textColor&&(J["text-color"]=N.textColor.serialize()),d.push(J)}return d};var Ro=function(p){this.type=Bn,this.input=p};Ro.parse=function(d,p){if(d.length!==2)return p.error("Expected two arguments.");var C=p.parse(d[1],1,Cr);return C?new Ro(C):p.error("No image name provided.")},Ro.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=eo.fromString(p);return C&&d.availableImages&&(C.available=d.availableImages.indexOf(p)>-1),C},Ro.prototype.eachChild=function(d){d(this.input)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){return["image",this.input.serialize()]};var fu={"to-boolean":Ar,"to-color":Be,"to-number":ln,"to-string":Cr},Xo=function(p,C){this.type=p,this.args=C};Xo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[0];if((C==="to-boolean"||C==="to-string")&&d.length!==2)return p.error("Expected one argument.");for(var N=fu[C],J=[],ct=1;ct<d.length;ct++){var Tt=p.parse(d[ct],ct,Ye);if(!Tt)return null;J.push(Tt)}return new Xo(N,J)},Xo.prototype.evaluate=function(d){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(d));if(this.type.kind==="color"){for(var p,C,N=0,J=this.args;N<J.length;N+=1){if(C=null,(p=J[N].evaluate(d))instanceof zr)return p;if(typeof p=="string"){var ct=d.parseColor(p);if(ct)return ct}else if(Array.isArray(p)&&!(C=p.length<3||p.length>4?"Invalid rbga value "+JSON.stringify(p)+": expected an array containing either three or four numeric values.":Zo(p[0],p[1],p[2],p[3])))return new zr(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new So(C||"Could not parse color from value '"+(typeof p=="string"?p:String(JSON.stringify(p)))+"'")}if(this.type.kind==="number"){for(var Tt=null,Bt=0,Xt=this.args;Bt<Xt.length;Bt+=1){if((Tt=Xt[Bt].evaluate(d))===null)return 0;var de=Number(Tt);if(!isNaN(de))return de}throw new So("Could not convert "+JSON.stringify(Tt)+" to number.")}return this.type.kind==="formatted"?ka.fromString(Ko(this.args[0].evaluate(d))):this.type.kind==="resolvedImage"?eo.fromString(Ko(this.args[0].evaluate(d))):Ko(this.args[0].evaluate(d))},Xo.prototype.eachChild=function(d){this.args.forEach(d)},Xo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Xo.prototype.serialize=function(){if(this.type.kind==="formatted")return new zo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ro(this.args[0]).serialize();var d=["to-"+this.type.kind];return this.eachChild(function(p){d.push(p.serialize())}),d};var au=["Unknown","Point","LineString","Polygon"],$s=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};$s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$s.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null},$s.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},$s.prototype.canonicalID=function(){return this.canonical},$s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$s.prototype.parseColor=function(d){var p=this._parseColorCache[d];return p||(p=this._parseColorCache[d]=zr.parse(d)),p};var Ne=function(p,C,N,J){this.name=p,this.type=C,this._evaluate=N,this.args=J};Ne.prototype.evaluate=function(d){return this._evaluate(d,this.args)},Ne.prototype.eachChild=function(d){this.args.forEach(d)},Ne.prototype.outputDefined=function(){return!1},Ne.prototype.serialize=function(){return[this.name].concat(this.args.map(function(d){return d.serialize()}))},Ne.parse=function(d,p){var C,N=d[0],J=Ne.definitions[N];if(!J)return p.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ct=Array.isArray(J)?J[0]:J.type,Tt=Array.isArray(J)?[[J[1],J[2]]]:J.overloads,Bt=Tt.filter(function(ca){var ta=ca[0];return!Array.isArray(ta)||ta.length===d.length-1}),Xt=null,de=0,De=Bt;de<De.length;de+=1){var Ge=De[de],He=Ge[0],cn=Ge[1];Xt=new Do(p.registry,p.path,null,p.scope);for(var Rn=[],On=!1,$n=1;$n<d.length;$n++){var Qn=d[$n],Sr=Array.isArray(He)?He[$n-1]:He.type,Nr=Xt.parse(Qn,1+Rn.length,Sr);if(!Nr){On=!0;break}Rn.push(Nr)}if(!On)if(Array.isArray(He)&&He.length!==Rn.length)Xt.error("Expected "+He.length+" arguments, but found "+Rn.length+" instead.");else{for(var Wr=0;Wr<Rn.length;Wr++){var pi=Array.isArray(He)?He[Wr]:He.type,ai=Rn[Wr];Xt.concat(Wr+1).checkSubtype(pi,ai.type)}if(Xt.errors.length===0)return new Ne(N,ct,cn,Rn)}}if(Bt.length===1)(C=p.errors).push.apply(C,Xt.errors);else{for(var Bi=(Bt.length?Bt:Tt).map(function(ca){var ta;return ta=ca[0],Array.isArray(ta)?"("+ta.map(Ln).join(", ")+")":"("+Ln(ta.type)+"...)"}).join(" | "),zi=[],ia=1;ia<d.length;ia++){var va=p.parse(d[ia],1+zi.length);if(!va)return null;zi.push(Ln(va.type))}p.error("Expected arguments of type "+Bi+", but found ("+zi.join(", ")+") instead.")}return null},Ne.register=function(d,p){for(var C in Ne.definitions=p,p)d[C]=Ne};var oe=function(p,C,N){this.type=fn,this.locale=N,this.caseSensitive=p,this.diacriticSensitive=C};function Ht(d,p){d[0]=Math.min(d[0],p[0]),d[1]=Math.min(d[1],p[1]),d[2]=Math.max(d[2],p[0]),d[3]=Math.max(d[3],p[1])}function Ee(d,p){return!(d[0]<=p[0]||d[2]>=p[2]||d[1]<=p[1]||d[3]>=p[3])}function an(d,p){var C=(180+d[0])/360,N=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,J=Math.pow(2,p.z);return[Math.round(C*J*8192),Math.round(N*J*8192)]}function zn(d,p,C){return p[1]>d[1]!=C[1]>d[1]&&d[0]<(C[0]-p[0])*(d[1]-p[1])/(C[1]-p[1])+p[0]}function qn(d,p){for(var C,N,J,ct,Tt,Bt,Xt,de=!1,De=0,Ge=p.length;De<Ge;De++)for(var He=p[De],cn=0,Rn=He.length;cn<Rn-1;cn++){if((ct=(C=d)[0]-(N=He[cn])[0])*(Xt=C[1]-(J=He[cn+1])[1])-(Bt=C[0]-J[0])*(Tt=C[1]-N[1])==0&&ct*Bt<=0&&Tt*Xt<=0)return!1;zn(d,He[cn],He[cn+1])&&(de=!de)}return de}function Un(d,p){for(var C=0;C<p.length;C++)if(qn(d,p[C]))return!0;return!1}function Jr(d,p,C,N){var J=N[0]-C[0],ct=N[1]-C[1],Tt=(d[0]-C[0])*ct-J*(d[1]-C[1]),Bt=(p[0]-C[0])*ct-J*(p[1]-C[1]);return Tt>0&&Bt<0||Tt<0&&Bt>0}function Si(d,p,C){for(var N=0,J=C;N<J.length;N+=1)for(var ct=J[N],Tt=0;Tt<ct.length-1;++Tt)if((Ge=[(De=ct[Tt+1])[0]-(de=ct[Tt])[0],De[1]-de[1]])[0]*(He=[(Xt=p)[0]-(Bt=d)[0],Xt[1]-Bt[1]])[1]-Ge[1]*He[0]!=0&&Jr(Bt,Xt,de,De)&&Jr(de,De,Bt,Xt))return!0;var Bt,Xt,de,De,Ge,He;return!1}function Ci(d,p){for(var C=0;C<d.length;++C)if(!qn(d[C],p))return!1;for(var N=0;N<d.length-1;++N)if(Si(d[N],d[N+1],p))return!1;return!0}function ki(d,p){for(var C=0;C<p.length;C++)if(Ci(d,p[C]))return!0;return!1}function oa(d,p,C){for(var N=[],J=0;J<d.length;J++){for(var ct=[],Tt=0;Tt<d[J].length;Tt++){var Bt=an(d[J][Tt],C);Ht(p,Bt),ct.push(Bt)}N.push(ct)}return N}function Xa(d,p,C){for(var N=[],J=0;J<d.length;J++){var ct=oa(d[J],p,C);N.push(ct)}return N}function ma(d,p,C,N){if(d[0]<C[0]||d[0]>C[2]){var J=.5*N,ct=d[0]-C[0]>J?-N:C[0]-d[0]>J?N:0;ct===0&&(ct=d[0]-C[2]>J?-N:C[2]-d[0]>J?N:0),d[0]+=ct}Ht(p,d)}function mo(d,p,C,N){for(var J=8192*Math.pow(2,N.z),ct=[8192*N.x,8192*N.y],Tt=[],Bt=0,Xt=d;Bt<Xt.length;Bt+=1)for(var de=0,De=Xt[Bt];de<De.length;de+=1){var Ge=De[de],He=[Ge.x+ct[0],Ge.y+ct[1]];ma(He,p,C,J),Tt.push(He)}return Tt}function Ba(d,p,C,N){for(var J,ct=8192*Math.pow(2,N.z),Tt=[8192*N.x,8192*N.y],Bt=[],Xt=0,de=d;Xt<de.length;Xt+=1){for(var De=[],Ge=0,He=de[Xt];Ge<He.length;Ge+=1){var cn=He[Ge],Rn=[cn.x+Tt[0],cn.y+Tt[1]];Ht(p,Rn),De.push(Rn)}Bt.push(De)}if(p[2]-p[0]<=ct/2){(J=p)[0]=J[1]=1/0,J[2]=J[3]=-1/0;for(var On=0,$n=Bt;On<$n.length;On+=1)for(var Qn=0,Sr=$n[On];Qn<Sr.length;Qn+=1)ma(Sr[Qn],p,C,ct)}return Bt}oe.parse=function(d,p){if(d.length!==2)return p.error("Expected one argument.");var C=d[1];if(typeof C!="object"||Array.isArray(C))return p.error("Collator options argument must be an object.");var N=p.parse(C["case-sensitive"]!==void 0&&C["case-sensitive"],1,Ar);if(!N)return null;var J=p.parse(C["diacritic-sensitive"]!==void 0&&C["diacritic-sensitive"],1,Ar);if(!J)return null;var ct=null;return C.locale&&!(ct=p.parse(C.locale,1,Cr))?null:new oe(N,J,ct)},oe.prototype.evaluate=function(d){return new Ai(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)},oe.prototype.eachChild=function(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)},oe.prototype.outputDefined=function(){return!1},oe.prototype.serialize=function(){var d={};return d["case-sensitive"]=this.caseSensitive.serialize(),d["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(d.locale=this.locale.serialize()),["collator",d]};var ao=function(p,C){this.type=Ar,this.geojson=p,this.geometries=C};function yo(d){if(d instanceof Ne&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof ao)return!1;var p=!0;return d.eachChild(function(C){p&&!yo(C)&&(p=!1)}),p}function Ja(d){if(d instanceof Ne&&d.name==="feature-state")return!1;var p=!0;return d.eachChild(function(C){p&&!Ja(C)&&(p=!1)}),p}function _o(d,p){if(d instanceof Ne&&p.indexOf(d.name)>=0)return!1;var C=!0;return d.eachChild(function(N){C&&!_o(N,p)&&(C=!1)}),C}ao.parse=function(d,p){if(d.length!==2)return p.error("'within' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(Ea(d[1])){var C=d[1];if(C.type==="FeatureCollection")for(var N=0;N<C.features.length;++N){var J=C.features[N].geometry.type;if(J==="Polygon"||J==="MultiPolygon")return new ao(C,C.features[N].geometry)}else if(C.type==="Feature"){var ct=C.geometry.type;if(ct==="Polygon"||ct==="MultiPolygon")return new ao(C,C.geometry)}else if(C.type==="Polygon"||C.type==="MultiPolygon")return new ao(C,C)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ao.prototype.evaluate=function(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],J=[1/0,1/0,-1/0,-1/0],ct=p.canonicalID();if(C.type==="Polygon"){var Tt=oa(C.coordinates,J,ct),Bt=mo(p.geometry(),N,J,ct);if(!Ee(N,J))return!1;for(var Xt=0,de=Bt;Xt<de.length;Xt+=1)if(!qn(de[Xt],Tt))return!1}if(C.type==="MultiPolygon"){var De=Xa(C.coordinates,J,ct),Ge=mo(p.geometry(),N,J,ct);if(!Ee(N,J))return!1;for(var He=0,cn=Ge;He<cn.length;He+=1)if(!Un(cn[He],De))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],J=[1/0,1/0,-1/0,-1/0],ct=p.canonicalID();if(C.type==="Polygon"){var Tt=oa(C.coordinates,J,ct),Bt=Ba(p.geometry(),N,J,ct);if(!Ee(N,J))return!1;for(var Xt=0,de=Bt;Xt<de.length;Xt+=1)if(!Ci(de[Xt],Tt))return!1}if(C.type==="MultiPolygon"){var De=Xa(C.coordinates,J,ct),Ge=Ba(p.geometry(),N,J,ct);if(!Ee(N,J))return!1;for(var He=0,cn=Ge;He<cn.length;He+=1)if(!ki(cn[He],De))return!1}return!0}(d,this.geometries)}return!1},ao.prototype.eachChild=function(){},ao.prototype.outputDefined=function(){return!0},ao.prototype.serialize=function(){return["within",this.geojson]};var ts=function(p,C){this.type=C.type,this.name=p,this.boundExpression=C};ts.parse=function(d,p){if(d.length!==2||typeof d[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");var C=d[1];return p.scope.has(C)?new ts(C,p.scope.get(C)):p.error('Unknown variable "'+C+'". Make sure "'+C+'" has been bound in an enclosing "let" expression before using it.',1)},ts.prototype.evaluate=function(d){return this.boundExpression.evaluate(d)},ts.prototype.eachChild=function(){},ts.prototype.outputDefined=function(){return!1},ts.prototype.serialize=function(){return["var",this.name]};var Do=function(p,C,N,J,ct){C===void 0&&(C=[]),J===void 0&&(J=new br),ct===void 0&&(ct=[]),this.registry=p,this.path=C,this.key=C.map(function(Tt){return"["+Tt+"]"}).join(""),this.scope=J,this.errors=ct,this.expectedType=N};function xs(d,p){for(var C,N=d.length-1,J=0,ct=N,Tt=0;J<=ct;)if((C=d[Tt=Math.floor((J+ct)/2)])<=p){if(Tt===N||p<d[Tt+1])return Tt;J=Tt+1}else{if(!(C>p))throw new So("Input is not a number.");ct=Tt-1}return 0}Do.prototype.parse=function(d,p,C,N,J){return J===void 0&&(J={}),p?this.concat(p,C,N)._parse(d,J):this._parse(d,J)},Do.prototype._parse=function(d,p){function C(de,De,Ge){return Ge==="assert"?new wa(De,[de]):Ge==="coerce"?new Xo(De,[de]):de}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var N=d[0];if(typeof N!="string")return this.error("Expression name must be a string, but found "+typeof N+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var J=this.registry[N];if(J){var ct=J.parse(d,this);if(!ct)return null;if(this.expectedType){var Tt=this.expectedType,Bt=ct.type;if(Tt.kind!=="string"&&Tt.kind!=="number"&&Tt.kind!=="boolean"&&Tt.kind!=="object"&&Tt.kind!=="array"||Bt.kind!=="value")if(Tt.kind!=="color"&&Tt.kind!=="formatted"&&Tt.kind!=="resolvedImage"||Bt.kind!=="value"&&Bt.kind!=="string"){if(this.checkSubtype(Tt,Bt))return null}else ct=C(ct,Tt,p.typeAnnotation||"coerce");else ct=C(ct,Tt,p.typeAnnotation||"assert")}if(!(ct instanceof no)&&ct.type.kind!=="resolvedImage"&&function de(De){if(De instanceof ts)return de(De.boundExpression);if(De instanceof Ne&&De.name==="error"||De instanceof oe||De instanceof ao)return!1;var Ge=De instanceof Xo||De instanceof wa,He=!0;return De.eachChild(function(cn){He=Ge?He&&de(cn):He&&cn instanceof no}),!!He&&yo(De)&&_o(De,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ct)){var Xt=new $s;try{ct=new no(ct.type,ct.evaluate(Xt))}catch(de){return this.error(de.message),null}}return ct}return this.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof d+" instead.")},Do.prototype.concat=function(d,p,C){var N=typeof d=="number"?this.path.concat(d):this.path,J=C?this.scope.concat(C):this.scope;return new Do(this.registry,N,p||null,J,this.errors)},Do.prototype.error=function(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];var N=""+this.key+p.map(function(J){return"["+J+"]"}).join("");this.errors.push(new Pn(N,d))},Do.prototype.checkSubtype=function(d,p){var C=Yn(d,p);return C&&this.error(C),C};var Mo=function(p,C,N){this.type=p,this.input=C,this.labels=[],this.outputs=[];for(var J=0,ct=N;J<ct.length;J+=1){var Tt=ct[J],Bt=Tt[1];this.labels.push(Tt[0]),this.outputs.push(Bt)}};function $a(d,p,C){return d*(1-C)+p*C}Mo.parse=function(d,p){if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");var C=p.parse(d[1],1,ln);if(!C)return null;var N=[],J=null;p.expectedType&&p.expectedType.kind!=="value"&&(J=p.expectedType);for(var ct=1;ct<d.length;ct+=2){var Tt=ct===1?-1/0:d[ct],Bt=d[ct+1],Xt=ct,de=ct+1;if(typeof Tt!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(N.length&&N[N.length-1][0]>=Tt)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Xt);var De=p.parse(Bt,de,J);if(!De)return null;J=J||De.type,N.push([Tt,De])}return new Mo(J,C,N)},Mo.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var J=p.length;return N>=p[J-1]?C[J-1].evaluate(d):C[xs(p,N)].evaluate(d)},Mo.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Mo.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Mo.prototype.serialize=function(){for(var d=["step",this.input.serialize()],p=0;p<this.labels.length;p++)p>0&&d.push(this.labels[p]),d.push(this.outputs[p].serialize());return d};var Ms=Object.freeze({__proto__:null,number:$a,color:function(p,C,N){return new zr($a(p.r,C.r,N),$a(p.g,C.g,N),$a(p.b,C.b,N),$a(p.a,C.a,N))},array:function(p,C,N){return p.map(function(J,ct){return $a(J,C[ct],N)})}}),as=6/29*3*(6/29),Ca=Math.PI/180,mn=180/Math.PI;function hr(d){return d>.008856451679035631?Math.pow(d,1/3):d/as+4/29}function Gr(d){return d>6/29?d*d*d:as*(d-4/29)}function Ui(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Ka(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function xo(d){var p=Ka(d.r),C=Ka(d.g),N=Ka(d.b),J=hr((.4124564*p+.3575761*C+.1804375*N)/.95047),ct=hr((.2126729*p+.7151522*C+.072175*N)/1);return{l:116*ct-16,a:500*(J-ct),b:200*(ct-hr((.0193339*p+.119192*C+.9503041*N)/1.08883)),alpha:d.a}}function vo(d){var p=(d.l+16)/116,C=isNaN(d.a)?p:p+d.a/500,N=isNaN(d.b)?p:p-d.b/200;return p=1*Gr(p),C=.95047*Gr(C),N=1.08883*Gr(N),new zr(Ui(3.2404542*C-1.5371385*p-.4985314*N),Ui(-.969266*C+1.8760108*p+.041556*N),Ui(.0556434*C-.2040259*p+1.0572252*N),d.alpha)}function qi(d,p,C){var N=p-d;return d+C*(N>180||N<-180?N-360*Math.round(N/360):N)}var Qa={forward:xo,reverse:vo,interpolate:function(p,C,N){return{l:$a(p.l,C.l,N),a:$a(p.a,C.a,N),b:$a(p.b,C.b,N),alpha:$a(p.alpha,C.alpha,N)}}},bs={forward:function(p){var C=xo(p),N=C.l,J=C.a,ct=C.b,Tt=Math.atan2(ct,J)*mn;return{h:Tt<0?Tt+360:Tt,c:Math.sqrt(J*J+ct*ct),l:N,alpha:p.a}},reverse:function(p){var C=p.h*Ca,N=p.c;return vo({l:p.l,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:p.alpha})},interpolate:function(p,C,N){return{h:qi(p.h,C.h,N),c:$a(p.c,C.c,N),l:$a(p.l,C.l,N),alpha:$a(p.alpha,C.alpha,N)}}},Es=Object.freeze({__proto__:null,lab:Qa,hcl:bs}),Ga=function(p,C,N,J,ct){this.type=p,this.operator=C,this.interpolation=N,this.input=J,this.labels=[],this.outputs=[];for(var Tt=0,Bt=ct;Tt<Bt.length;Tt+=1){var Xt=Bt[Tt],de=Xt[1];this.labels.push(Xt[0]),this.outputs.push(de)}};function Pu(d,p,C,N){var J=N-C,ct=d-C;return J===0?0:p===1?ct/J:(Math.pow(p,ct)-1)/(Math.pow(p,J)-1)}Ga.interpolationFactor=function(d,p,C,N){var J=0;if(d.name==="exponential")J=Pu(p,d.base,C,N);else if(d.name==="linear")J=Pu(p,1,C,N);else if(d.name==="cubic-bezier"){var ct=d.controlPoints;J=new s(ct[0],ct[1],ct[2],ct[3]).solve(Pu(p,1,C,N))}return J},Ga.parse=function(d,p){var C=d[0],N=d[1],J=d[2],ct=d.slice(3);if(!Array.isArray(N)||N.length===0)return p.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){var Tt=N[1];if(typeof Tt!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:Tt}}else{if(N[0]!=="cubic-bezier")return p.error("Unknown interpolation type "+String(N[0]),1,0);var Bt=N.slice(1);if(Bt.length!==4||Bt.some(function($n){return typeof $n!="number"||$n<0||$n>1}))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:Bt}}if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(!(J=p.parse(J,2,ln)))return null;var Xt=[],de=null;C==="interpolate-hcl"||C==="interpolate-lab"?de=Be:p.expectedType&&p.expectedType.kind!=="value"&&(de=p.expectedType);for(var De=0;De<ct.length;De+=2){var Ge=ct[De],He=ct[De+1],cn=De+3,Rn=De+4;if(typeof Ge!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',cn);if(Xt.length&&Xt[Xt.length-1][0]>=Ge)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',cn);var On=p.parse(He,Rn,de);if(!On)return null;de=de||On.type,Xt.push([Ge,On])}return de.kind==="number"||de.kind==="color"||de.kind==="array"&&de.itemType.kind==="number"&&typeof de.N=="number"?new Ga(de,C,N,J,Xt):p.error("Type "+Ln(de)+" is not interpolatable.")},Ga.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var J=p.length;if(N>=p[J-1])return C[J-1].evaluate(d);var ct=xs(p,N),Tt=Ga.interpolationFactor(this.interpolation,N,p[ct],p[ct+1]),Bt=C[ct].evaluate(d),Xt=C[ct+1].evaluate(d);return this.operator==="interpolate"?Ms[this.type.kind.toLowerCase()](Bt,Xt,Tt):this.operator==="interpolate-hcl"?bs.reverse(bs.interpolate(bs.forward(Bt),bs.forward(Xt),Tt)):Qa.reverse(Qa.interpolate(Qa.forward(Bt),Qa.forward(Xt),Tt))},Ga.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Ga.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Ga.prototype.serialize=function(){var d;d=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var p=[this.operator,d,this.input.serialize()],C=0;C<this.labels.length;C++)p.push(this.labels[C],this.outputs[C].serialize());return p};var Uo=function(p,C){this.type=p,this.args=C};Uo.parse=function(d,p){if(d.length<2)return p.error("Expectected at least one argument.");var C=null,N=p.expectedType;N&&N.kind!=="value"&&(C=N);for(var J=[],ct=0,Tt=d.slice(1);ct<Tt.length;ct+=1){var Bt=p.parse(Tt[ct],1+J.length,C,void 0,{typeAnnotation:"omit"});if(!Bt)return null;C=C||Bt.type,J.push(Bt)}var Xt=N&&J.some(function(de){return Yn(N,de.type)});return new Uo(Xt?Ye:C,J)},Uo.prototype.evaluate=function(d){for(var p,C=null,N=0,J=0,ct=this.args;J<ct.length&&(N++,(C=ct[J].evaluate(d))&&C instanceof eo&&!C.available&&(p||(p=C.name),C=null,N===this.args.length&&(C=p)),C===null);J+=1);return C},Uo.prototype.eachChild=function(d){this.args.forEach(d)},Uo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Uo.prototype.serialize=function(){var d=["coalesce"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Ps=function(p,C){this.type=C.type,this.bindings=[].concat(p),this.result=C};Ps.prototype.evaluate=function(d){return this.result.evaluate(d)},Ps.prototype.eachChild=function(d){for(var p=0,C=this.bindings;p<C.length;p+=1)d(C[p][1]);d(this.result)},Ps.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found "+(d.length-1)+" instead.");for(var C=[],N=1;N<d.length-1;N+=2){var J=d[N];if(typeof J!="string")return p.error("Expected string, but found "+typeof J+" instead.",N);if(/[^a-zA-Z0-9_]/.test(J))return p.error("Variable names must contain only alphanumeric characters or '_'.",N);var ct=p.parse(d[N+1],N+1);if(!ct)return null;C.push([J,ct])}var Tt=p.parse(d[d.length-1],d.length-1,p.expectedType,C);return Tt?new Ps(C,Tt):null},Ps.prototype.outputDefined=function(){return this.result.outputDefined()},Ps.prototype.serialize=function(){for(var d=["let"],p=0,C=this.bindings;p<C.length;p+=1){var N=C[p];d.push(N[0],N[1].serialize())}return d.push(this.result.serialize()),d};var Qs=function(p,C,N){this.type=p,this.index=C,this.input=N};Qs.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,ln),N=p.parse(d[2],2,bn(p.expectedType||Ye));return C&&N?new Qs(N.type.itemType,C,N):null},Qs.prototype.evaluate=function(d){var p=this.index.evaluate(d),C=this.input.evaluate(d);if(p<0)throw new So("Array index out of bounds: "+p+" < 0.");if(p>=C.length)throw new So("Array index out of bounds: "+p+" > "+(C.length-1)+".");if(p!==Math.floor(p))throw new So("Array index must be an integer, but found "+p+" instead.");return C[p]},Qs.prototype.eachChild=function(d){d(this.index),d(this.input)},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fs=function(p,C){this.type=Ar,this.needle=p,this.haystack=C};fs.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,Ye);return C&&N?_n(C.type,[Ar,Cr,ln,Pr,Ye])?new fs(C,N):p.error("Expected first argument to be of type boolean, string, number or null, but found "+Ln(C.type)+" instead"):null},fs.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!C)return!1;if(!Dr(p,["boolean","string","number","null"]))throw new So("Expected first argument to be of type boolean, string, number or null, but found "+Ln(so(p))+" instead.");if(!Dr(C,["string","array"]))throw new So("Expected second argument to be of type array or string, but found "+Ln(so(C))+" instead.");return C.indexOf(p)>=0},fs.prototype.eachChild=function(d){d(this.needle),d(this.haystack)},fs.prototype.outputDefined=function(){return!0},fs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hs=function(p,C,N){this.type=ln,this.needle=p,this.haystack=C,this.fromIndex=N};hs.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,Ye);if(!C||!N)return null;if(!_n(C.type,[Ar,Cr,ln,Pr,Ye]))return p.error("Expected first argument to be of type boolean, string, number or null, but found "+Ln(C.type)+" instead");if(d.length===4){var J=p.parse(d[3],3,ln);return J?new hs(C,N,J):null}return new hs(C,N)},hs.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!Dr(p,["boolean","string","number","null"]))throw new So("Expected first argument to be of type boolean, string, number or null, but found "+Ln(so(p))+" instead.");if(!Dr(C,["string","array"]))throw new So("Expected second argument to be of type array or string, but found "+Ln(so(C))+" instead.");if(this.fromIndex){var N=this.fromIndex.evaluate(d);return C.indexOf(p,N)}return C.indexOf(p)},hs.prototype.eachChild=function(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)},hs.prototype.outputDefined=function(){return!1},hs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var d=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),d]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var os=function(p,C,N,J,ct,Tt){this.inputType=p,this.type=C,this.input=N,this.cases=J,this.outputs=ct,this.otherwise=Tt};os.parse=function(d,p){if(d.length<5)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if(d.length%2!=1)return p.error("Expected an even number of arguments.");var C,N;p.expectedType&&p.expectedType.kind!=="value"&&(N=p.expectedType);for(var J={},ct=[],Tt=2;Tt<d.length-1;Tt+=2){var Bt=d[Tt],Xt=d[Tt+1];Array.isArray(Bt)||(Bt=[Bt]);var de=p.concat(Tt);if(Bt.length===0)return de.error("Expected at least one branch label.");for(var De=0,Ge=Bt;De<Ge.length;De+=1){var He=Ge[De];if(typeof He!="number"&&typeof He!="string")return de.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return de.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return de.error("Numeric branch labels must be integer values.");if(C){if(de.checkSubtype(C,so(He)))return null}else C=so(He);if(J[String(He)]!==void 0)return de.error("Branch labels must be unique.");J[String(He)]=ct.length}var cn=p.parse(Xt,Tt,N);if(!cn)return null;N=N||cn.type,ct.push(cn)}var Rn=p.parse(d[1],1,Ye);if(!Rn)return null;var On=p.parse(d[d.length-1],d.length-1,N);return On?Rn.type.kind!=="value"&&p.concat(1).checkSubtype(C,Rn.type)?null:new os(C,N,Rn,J,ct,On):null},os.prototype.evaluate=function(d){var p=this.input.evaluate(d);return(so(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(d)},os.prototype.eachChild=function(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)},os.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})&&this.otherwise.outputDefined()},os.prototype.serialize=function(){for(var d=this,p=["match",this.input.serialize()],C=[],N={},J=0,ct=Object.keys(this.cases).sort();J<ct.length;J+=1){var Tt=ct[J];(Ge=N[this.cases[Tt]])===void 0?(N[this.cases[Tt]]=C.length,C.push([this.cases[Tt],[Tt]])):C[Ge][1].push(Tt)}for(var Bt=function(Rn){return d.inputType.kind==="number"?Number(Rn):Rn},Xt=0,de=C;Xt<de.length;Xt+=1){var De=de[Xt],Ge=De[0],He=De[1];p.push(He.length===1?Bt(He[0]):He.map(Bt)),p.push(this.outputs[outputIndex$1].serialize())}return p.push(this.otherwise.serialize()),p};var ds=function(p,C,N){this.type=p,this.branches=C,this.otherwise=N};ds.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found only "+(d.length-1)+".");if(d.length%2!=0)return p.error("Expected an odd number of arguments.");var C;p.expectedType&&p.expectedType.kind!=="value"&&(C=p.expectedType);for(var N=[],J=1;J<d.length-1;J+=2){var ct=p.parse(d[J],J,Ar);if(!ct)return null;var Tt=p.parse(d[J+1],J+1,C);if(!Tt)return null;N.push([ct,Tt]),C=C||Tt.type}var Bt=p.parse(d[d.length-1],d.length-1,C);return Bt?new ds(C,N,Bt):null},ds.prototype.evaluate=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],J=N[1];if(N[0].evaluate(d))return J.evaluate(d)}return this.otherwise.evaluate(d)},ds.prototype.eachChild=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],J=N[1];d(N[0]),d(J)}d(this.otherwise)},ds.prototype.outputDefined=function(){return this.branches.every(function(d){return d[1].outputDefined()})&&this.otherwise.outputDefined()},ds.prototype.serialize=function(){var d=["case"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Ts=function(p,C,N,J){this.type=p,this.input=C,this.beginIndex=N,this.endIndex=J};function Ou(d,p){return d==="=="||d==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function Uu(d,p,C,N){return N.compare(p,C)===0}function uo(d,p,C){var N=d!=="=="&&d!=="!=";return function(){function J(ct,Tt,Bt){this.type=Ar,this.lhs=ct,this.rhs=Tt,this.collator=Bt,this.hasUntypedArgument=ct.type.kind==="value"||Tt.type.kind==="value"}return J.parse=function(ct,Tt){if(ct.length!==3&&ct.length!==4)return Tt.error("Expected two or three arguments.");var Bt=ct[0],Xt=Tt.parse(ct[1],1,Ye);if(!Xt)return null;if(!Ou(Bt,Xt.type))return Tt.concat(1).error('"'+Bt+`" comparisons are not supported for type '`+Ln(Xt.type)+"'.");var de=Tt.parse(ct[2],2,Ye);if(!de)return null;if(!Ou(Bt,de.type))return Tt.concat(2).error('"'+Bt+`" comparisons are not supported for type '`+Ln(de.type)+"'.");if(Xt.type.kind!==de.type.kind&&Xt.type.kind!=="value"&&de.type.kind!=="value")return Tt.error("Cannot compare types '"+Ln(Xt.type)+"' and '"+Ln(de.type)+"'.");N&&(Xt.type.kind==="value"&&de.type.kind!=="value"?Xt=new wa(de.type,[Xt]):Xt.type.kind!=="value"&&de.type.kind==="value"&&(de=new wa(Xt.type,[de])));var De=null;if(ct.length===4){if(Xt.type.kind!=="string"&&de.type.kind!=="string"&&Xt.type.kind!=="value"&&de.type.kind!=="value")return Tt.error("Cannot use collator to compare non-string types.");if(!(De=Tt.parse(ct[3],3,fn)))return null}return new J(Xt,de,De)},J.prototype.evaluate=function(ct){var Tt=this.lhs.evaluate(ct),Bt=this.rhs.evaluate(ct);if(N&&this.hasUntypedArgument){var Xt=so(Tt),de=so(Bt);if(Xt.kind!==de.kind||Xt.kind!=="string"&&Xt.kind!=="number")throw new So('Expected arguments for "'+d+'" to be (string, string) or (number, number), but found ('+Xt.kind+", "+de.kind+") instead.")}if(this.collator&&!N&&this.hasUntypedArgument){var De=so(Tt),Ge=so(Bt);if(De.kind!=="string"||Ge.kind!=="string")return p(ct,Tt,Bt)}return this.collator?C(ct,Tt,Bt,this.collator.evaluate(ct)):p(ct,Tt,Bt)},J.prototype.eachChild=function(ct){ct(this.lhs),ct(this.rhs),this.collator&&ct(this.collator)},J.prototype.outputDefined=function(){return!0},J.prototype.serialize=function(){var ct=[d];return this.eachChild(function(Tt){ct.push(Tt.serialize())}),ct},J}()}Ts.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,ln);if(!C||!N)return null;if(!_n(C.type,[bn(Ye),Cr,Ye]))return p.error("Expected first argument to be of type array or string, but found "+Ln(C.type)+" instead");if(d.length===4){var J=p.parse(d[3],3,ln);return J?new Ts(C.type,C,N,J):null}return new Ts(C.type,C,N)},Ts.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=this.beginIndex.evaluate(d);if(!Dr(p,["string","array"]))throw new So("Expected first argument to be of type array or string, but found "+Ln(so(p))+" instead.");if(this.endIndex){var N=this.endIndex.evaluate(d);return p.slice(C,N)}return p.slice(C)},Ts.prototype.eachChild=function(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)},Ts.prototype.outputDefined=function(){return!1},Ts.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var d=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),d]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fs=uo("==",function(d,p,C){return p===C},Uu),ku=uo("!=",function(d,p,C){return p!==C},function(d,p,C,N){return!Uu(0,p,C,N)}),ul=uo("<",function(d,p,C){return p<C},function(d,p,C,N){return N.compare(p,C)<0}),ll=uo(">",function(d,p,C){return p>C},function(d,p,C,N){return N.compare(p,C)>0}),Qu=uo("<=",function(d,p,C){return p<=C},function(d,p,C,N){return N.compare(p,C)<=0}),To=uo(">=",function(d,p,C){return p>=C},function(d,p,C,N){return N.compare(p,C)>=0}),La=function(p,C,N,J,ct){this.type=Cr,this.number=p,this.locale=C,this.currency=N,this.minFractionDigits=J,this.maxFractionDigits=ct};La.parse=function(d,p){if(d.length!==3)return p.error("Expected two arguments.");var C=p.parse(d[1],1,ln);if(!C)return null;var N=d[2];if(typeof N!="object"||Array.isArray(N))return p.error("NumberFormat options argument must be an object.");var J=null;if(N.locale&&!(J=p.parse(N.locale,1,Cr)))return null;var ct=null;if(N.currency&&!(ct=p.parse(N.currency,1,Cr)))return null;var Tt=null;if(N["min-fraction-digits"]&&!(Tt=p.parse(N["min-fraction-digits"],1,ln)))return null;var Bt=null;return N["max-fraction-digits"]&&!(Bt=p.parse(N["max-fraction-digits"],1,ln))?null:new La(C,J,ct,Tt,Bt)},La.prototype.evaluate=function(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))},La.prototype.eachChild=function(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){var d={};return this.locale&&(d.locale=this.locale.serialize()),this.currency&&(d.currency=this.currency.serialize()),this.minFractionDigits&&(d["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(d["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),d]};var ya=function(p){this.type=ln,this.input=p};ya.parse=function(d,p){if(d.length!==2)return p.error("Expected 1 argument, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1);return C?C.type.kind!=="array"&&C.type.kind!=="string"&&C.type.kind!=="value"?p.error("Expected argument of type string or array, but found "+Ln(C.type)+" instead."):new ya(C):null},ya.prototype.evaluate=function(d){var p=this.input.evaluate(d);if(typeof p=="string"||Array.isArray(p))return p.length;throw new So("Expected value to be of type string or array, but found "+Ln(so(p))+" instead.")},ya.prototype.eachChild=function(d){d(this.input)},ya.prototype.outputDefined=function(){return!1},ya.prototype.serialize=function(){var d=["length"];return this.eachChild(function(p){d.push(p.serialize())}),d};var wo={"==":Fs,"!=":ku,">":ll,"<":ul,">=":To,"<=":Qu,array:wa,at:Qs,boolean:wa,case:ds,coalesce:Uo,collator:oe,format:zo,image:Ro,in:fs,"index-of":hs,interpolate:Ga,"interpolate-hcl":Ga,"interpolate-lab":Ga,length:ya,let:Ps,literal:no,match:os,number:wa,"number-format":La,object:wa,slice:Ts,step:Mo,string:wa,"to-boolean":Xo,"to-color":Xo,"to-number":Xo,"to-string":Xo,var:ts,within:ao};function pu(d,p){var C=p[0],N=p[1],J=p[2],ct=p[3];C=C.evaluate(d),N=N.evaluate(d),J=J.evaluate(d);var Tt=ct?ct.evaluate(d):1,Bt=Zo(C,N,J,Tt);if(Bt)throw new So(Bt);return new zr(C/255*Tt,N/255*Tt,J/255*Tt,Tt)}function El(d,p){return d in p}function zs(d,p){var C=p[d];return C===void 0?null:C}function Ss(d){return{type:d}}function ou(d){return{result:"success",value:d}}function qs(d){return{result:"error",value:d}}function Ls(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function qu(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function su(d){return!!d.expression&&d.expression.interpolated}function Wa(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Sl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Ql(d){return d}function _l(d,p,C){return d!==void 0?d:p!==void 0?p:C!==void 0?C:void 0}function ql(d,p,C,N,J){return _l(typeof C===J?N[C]:void 0,d.default,p.default)}function Gu(d,p,C){if(Wa(C)!=="number")return _l(d.default,p.default);var N=d.stops.length;if(N===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[N-1][0])return d.stops[N-1][1];var J=xs(d.stops.map(function(ct){return ct[0]}),C);return d.stops[J][1]}function Ha(d,p,C){var N=d.base!==void 0?d.base:1;if(Wa(C)!=="number")return _l(d.default,p.default);var J=d.stops.length;if(J===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[J-1][0])return d.stops[J-1][1];var ct=xs(d.stops.map(function(Ge){return Ge[0]}),C),Tt=function(Ge,He,cn,Rn){var On=Rn-cn,$n=Ge-cn;return On===0?0:He===1?$n/On:(Math.pow(He,$n)-1)/(Math.pow(He,On)-1)}(C,N,d.stops[ct][0],d.stops[ct+1][0]),Bt=d.stops[ct][1],Xt=d.stops[ct+1][1],de=Ms[p.type]||Ql;if(d.colorSpace&&d.colorSpace!=="rgb"){var De=Es[d.colorSpace];de=function(He,cn){return De.reverse(De.interpolate(De.forward(He),De.forward(cn),Tt))}}return typeof Bt.evaluate=="function"?{evaluate:function(){for(var He=[],cn=arguments.length;cn--;)He[cn]=arguments[cn];var Rn=Bt.evaluate.apply(void 0,He),On=Xt.evaluate.apply(void 0,He);if(Rn!==void 0&&On!==void 0)return de(Rn,On,Tt)}}:de(Bt,Xt,Tt)}function uu(d,p,C){return p.type==="color"?C=zr.parse(C):p.type==="formatted"?C=ka.fromString(C.toString()):p.type==="resolvedImage"?C=eo.fromString(C.toString()):Wa(C)===p.type||p.type==="enum"&&p.values[C]||(C=void 0),_l(C,d.default,p.default)}Ne.register(wo,{error:[{kind:"error"},[Cr],function(d,p){throw new So(p[0].evaluate(d))}],typeof:[Cr,[Ye],function(d,p){return Ln(so(p[0].evaluate(d)))}],"to-rgba":[bn(ln,4),[Be],function(d,p){return p[0].evaluate(d).toArray()}],rgb:[Be,[ln,ln,ln],pu],rgba:[Be,[ln,ln,ln,ln],pu],has:{type:Ar,overloads:[[[Cr],function(d,p){return El(p[0].evaluate(d),d.properties())}],[[Cr,We],function(d,p){var C=p[1];return El(p[0].evaluate(d),C.evaluate(d))}]]},get:{type:Ye,overloads:[[[Cr],function(d,p){return zs(p[0].evaluate(d),d.properties())}],[[Cr,We],function(d,p){var C=p[1];return zs(p[0].evaluate(d),C.evaluate(d))}]]},"feature-state":[Ye,[Cr],function(d,p){return zs(p[0].evaluate(d),d.featureState||{})}],properties:[We,[],function(d){return d.properties()}],"geometry-type":[Cr,[],function(d){return d.geometryType()}],id:[Ye,[],function(d){return d.id()}],zoom:[ln,[],function(d){return d.globals.zoom}],"heatmap-density":[ln,[],function(d){return d.globals.heatmapDensity||0}],"line-progress":[ln,[],function(d){return d.globals.lineProgress||0}],accumulated:[Ye,[],function(d){return d.globals.accumulated===void 0?null:d.globals.accumulated}],"+":[ln,Ss(ln),function(d,p){for(var C=0,N=0,J=p;N<J.length;N+=1)C+=J[N].evaluate(d);return C}],"*":[ln,Ss(ln),function(d,p){for(var C=1,N=0,J=p;N<J.length;N+=1)C*=J[N].evaluate(d);return C}],"-":{type:ln,overloads:[[[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)-C.evaluate(d)}],[[ln],function(d,p){return-p[0].evaluate(d)}]]},"/":[ln,[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)/C.evaluate(d)}],"%":[ln,[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)%C.evaluate(d)}],ln2:[ln,[],function(){return Math.LN2}],pi:[ln,[],function(){return Math.PI}],e:[ln,[],function(){return Math.E}],"^":[ln,[ln,ln],function(d,p){var C=p[1];return Math.pow(p[0].evaluate(d),C.evaluate(d))}],sqrt:[ln,[ln],function(d,p){return Math.sqrt(p[0].evaluate(d))}],log10:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN10}],ln:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))}],log2:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN2}],sin:[ln,[ln],function(d,p){return Math.sin(p[0].evaluate(d))}],cos:[ln,[ln],function(d,p){return Math.cos(p[0].evaluate(d))}],tan:[ln,[ln],function(d,p){return Math.tan(p[0].evaluate(d))}],asin:[ln,[ln],function(d,p){return Math.asin(p[0].evaluate(d))}],acos:[ln,[ln],function(d,p){return Math.acos(p[0].evaluate(d))}],atan:[ln,[ln],function(d,p){return Math.atan(p[0].evaluate(d))}],min:[ln,Ss(ln),function(d,p){return Math.min.apply(Math,p.map(function(C){return C.evaluate(d)}))}],max:[ln,Ss(ln),function(d,p){return Math.max.apply(Math,p.map(function(C){return C.evaluate(d)}))}],abs:[ln,[ln],function(d,p){return Math.abs(p[0].evaluate(d))}],round:[ln,[ln],function(d,p){var C=p[0].evaluate(d);return C<0?-Math.round(-C):Math.round(C)}],floor:[ln,[ln],function(d,p){return Math.floor(p[0].evaluate(d))}],ceil:[ln,[ln],function(d,p){return Math.ceil(p[0].evaluate(d))}],"filter-==":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1];return d.properties()[C.value]===N.value}],"filter-id-==":[Ar,[Ye],function(d,p){var C=p[0];return d.id()===C.value}],"filter-type-==":[Ar,[Cr],function(d,p){var C=p[0];return d.geometryType()===C.value}],"filter-<":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],J=d.properties()[C.value],ct=N.value;return typeof J==typeof ct&&J<ct}],"filter-id-<":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),J=C.value;return typeof N==typeof J&&N<J}],"filter->":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],J=d.properties()[C.value],ct=N.value;return typeof J==typeof ct&&J>ct}],"filter-id->":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),J=C.value;return typeof N==typeof J&&N>J}],"filter-<=":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],J=d.properties()[C.value],ct=N.value;return typeof J==typeof ct&&J<=ct}],"filter-id-<=":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),J=C.value;return typeof N==typeof J&&N<=J}],"filter->=":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],J=d.properties()[C.value],ct=N.value;return typeof J==typeof ct&&J>=ct}],"filter-id->=":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),J=C.value;return typeof N==typeof J&&N>=J}],"filter-has":[Ar,[Ye],function(d,p){return p[0].value in d.properties()}],"filter-has-id":[Ar,[],function(d){return d.id()!==null&&d.id()!==void 0}],"filter-type-in":[Ar,[bn(Cr)],function(d,p){return p[0].value.indexOf(d.geometryType())>=0}],"filter-id-in":[Ar,[bn(Ye)],function(d,p){return p[0].value.indexOf(d.id())>=0}],"filter-in-small":[Ar,[Cr,bn(Ye)],function(d,p){var C=p[0];return p[1].value.indexOf(d.properties()[C.value])>=0}],"filter-in-large":[Ar,[Cr,bn(Ye)],function(d,p){var C=p[0],N=p[1];return function(J,ct,Tt,Bt){for(;Tt<=Bt;){var Xt=Tt+Bt>>1;if(ct[Xt]===J)return!0;ct[Xt]>J?Bt=Xt-1:Tt=Xt+1}return!1}(d.properties()[C.value],N.value,0,N.value.length-1)}],all:{type:Ar,overloads:[[[Ar,Ar],function(d,p){var C=p[1];return p[0].evaluate(d)&&C.evaluate(d)}],[Ss(Ar),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(!N[C].evaluate(d))return!1;return!0}]]},any:{type:Ar,overloads:[[[Ar,Ar],function(d,p){var C=p[1];return p[0].evaluate(d)||C.evaluate(d)}],[Ss(Ar),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(N[C].evaluate(d))return!0;return!1}]]},"!":[Ar,[Ar],function(d,p){return!p[0].evaluate(d)}],"is-supported-script":[Ar,[Cr],function(d,p){var C=d.globals&&d.globals.isSupportedScript;return!C||C(p[0].evaluate(d))}],upcase:[Cr,[Cr],function(d,p){return p[0].evaluate(d).toUpperCase()}],downcase:[Cr,[Cr],function(d,p){return p[0].evaluate(d).toLowerCase()}],concat:[Cr,Ss(Ye),function(d,p){return p.map(function(C){return Ko(C.evaluate(d))}).join("")}],"resolved-locale":[Cr,[fn],function(d,p){return p[0].evaluate(d).resolvedLocale()}]});var Ml=function(p,C){this.expression=p,this._warningHistory={},this._evaluator=new $s,this._defaultValue=C?function(N){return N.type==="color"&&Sl(N.default)?new zr(0,0,0,0):N.type==="color"?zr.parse(N.default)||null:N.default===void 0?null:N.default}(C):null,this._enumValues=C&&C.type==="enum"?C.values:null};function vs(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in wo}function wu(d,p){var C=new Do(wo,[],p?function(J){var ct={color:Be,string:Cr,number:ln,enum:Cr,boolean:Ar,formatted:gn,resolvedImage:Bn};return J.type==="array"?bn(ct[J.value]||Ye,J.length):ct[J.type]}(p):void 0),N=C.parse(d,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return N?ou(new Ml(N,p)):qs(C.errors)}Ml.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,J,ct){return this._evaluator.globals=d,this._evaluator.feature=p,this._evaluator.featureState=C,this._evaluator.canonical=N,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=ct,this.expression.evaluate(this._evaluator)},Ml.prototype.evaluate=function(d,p,C,N,J,ct){this._evaluator.globals=d,this._evaluator.feature=p||null,this._evaluator.featureState=C||null,this._evaluator.canonical=N,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=ct||null;try{var Tt=this.expression.evaluate(this._evaluator);if(Tt==null||typeof Tt=="number"&&Tt!=Tt)return this._defaultValue;if(this._enumValues&&!(Tt in this._enumValues))throw new So("Expected value to be one of "+Object.keys(this._enumValues).map(function(Bt){return JSON.stringify(Bt)}).join(", ")+", but found "+JSON.stringify(Tt)+" instead.");return Tt}catch(Bt){return this._warningHistory[Bt.message]||(this._warningHistory[Bt.message]=!0,typeof console!="undefined"&&console.warn(Bt.message)),this._defaultValue}};var gu=function(p,C){this.kind=p,this._styleExpression=C,this.isStateDependent=p!=="constant"&&!Ja(C.expression)};gu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,J,ct){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,J,ct)},gu.prototype.evaluate=function(d,p,C,N,J,ct){return this._styleExpression.evaluate(d,p,C,N,J,ct)};var Vu=function(p,C,N,J){this.kind=p,this.zoomStops=N,this._styleExpression=C,this.isStateDependent=p!=="camera"&&!Ja(C.expression),this.interpolationType=J};function Ws(d,p){if((d=wu(d,p)).result==="error")return d;var C=d.value.expression,N=yo(C);if(!N&&!Ls(p))return qs([new Pn("","data expressions not supported")]);var J=_o(C,["zoom"]);if(!J&&!qu(p))return qs([new Pn("","zoom expressions not supported")]);var ct=function Tt(Bt){var Xt=null;if(Bt instanceof Ps)Xt=Tt(Bt.result);else if(Bt instanceof Uo)for(var de=0,De=Bt.args;de<De.length&&!(Xt=Tt(De[de]));de+=1);else(Bt instanceof Mo||Bt instanceof Ga)&&Bt.input instanceof Ne&&Bt.input.name==="zoom"&&(Xt=Bt);return Xt instanceof Pn||Bt.eachChild(function(Ge){var He=Tt(Ge);He instanceof Pn?Xt=He:!Xt&&He?Xt=new Pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Xt&&He&&Xt!==He&&(Xt=new Pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Xt}(C);return ct||J?ct instanceof Pn?qs([ct]):ct instanceof Ga&&!su(p)?qs([new Pn("",'"interpolate" expressions cannot be used with this property')]):ou(ct?new Vu(N?"camera":"composite",d.value,ct.labels,ct instanceof Ga?ct.interpolation:void 0):new gu(N?"constant":"source",d.value)):qs([new Pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Vu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,J,ct){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,J,ct)},Vu.prototype.evaluate=function(d,p,C,N,J,ct){return this._styleExpression.evaluate(d,p,C,N,J,ct)},Vu.prototype.interpolationFactor=function(d,p,C){return this.interpolationType?Ga.interpolationFactor(this.interpolationType,d,p,C):0};var Jo=function(p,C){this._parameters=p,this._specification=C,Fn(this,function N(J,ct){var Tt,Bt,Xt,de=ct.type==="color",De=J.stops&&typeof J.stops[0][0]=="object",Ge=De||!(De||J.property!==void 0),He=J.type||(su(ct)?"exponential":"interval");if(de&&((J=Fn({},J)).stops&&(J.stops=J.stops.map(function(ca){return[ca[0],zr.parse(ca[1])]})),J.default=zr.parse(J.default?J.default:ct.default)),J.colorSpace&&J.colorSpace!=="rgb"&&!Es[J.colorSpace])throw new Error("Unknown color space: "+J.colorSpace);if(He==="exponential")Tt=Ha;else if(He==="interval")Tt=Gu;else if(He==="categorical"){Tt=ql,Bt=Object.create(null);for(var cn=0,Rn=J.stops;cn<Rn.length;cn+=1){var On=Rn[cn];Bt[On[0]]=On[1]}Xt=typeof J.stops[0][0]}else{if(He!=="identity")throw new Error('Unknown function type "'+He+'"');Tt=uu}if(De){for(var $n={},Qn=[],Sr=0;Sr<J.stops.length;Sr++){var Nr=J.stops[Sr],Wr=Nr[0].zoom;$n[Wr]===void 0&&($n[Wr]={zoom:Wr,type:J.type,property:J.property,default:J.default,stops:[]},Qn.push(Wr)),$n[Wr].stops.push([Nr[0].value,Nr[1]])}for(var pi=[],ai=0,Bi=Qn;ai<Bi.length;ai+=1){var zi=Bi[ai];pi.push([$n[zi].zoom,N($n[zi],ct)])}var ia={name:"linear"};return{kind:"composite",interpolationType:ia,interpolationFactor:Ga.interpolationFactor.bind(void 0,ia),zoomStops:pi.map(function(ca){return ca[0]}),evaluate:function(ta,to){var Ta=ta.zoom;return Ha({stops:pi,base:J.base},ct,Ta).evaluate(Ta,to)}}}if(Ge){var va=He==="exponential"?{name:"exponential",base:J.base!==void 0?J.base:1}:null;return{kind:"camera",interpolationType:va,interpolationFactor:Ga.interpolationFactor.bind(void 0,va),zoomStops:J.stops.map(function(ca){return ca[0]}),evaluate:function(ta){return Tt(J,ct,ta.zoom,Bt,Xt)}}}return{kind:"source",evaluate:function(ta,to){var Ta=to&&to.properties?to.properties[J.property]:void 0;return Ta===void 0?_l(J.default,ct.default):Tt(J,ct,Ta,Bt,Xt)}}}(this._parameters,this._specification))};function ss(d){var p=d.key,C=d.value,N=d.valueSpec||{},J=d.objectElementValidators||{},ct=d.style,Tt=d.styleSpec,Bt=[],Xt=Wa(C);if(Xt!=="object")return[new xe(p,C,"object expected, "+Xt+" found")];for(var de in C){var De=de.split(".")[0],Ge=N[De]||N["*"],He=void 0;if(J[De])He=J[De];else if(N[De])He=Da;else if(J["*"])He=J["*"];else{if(!N["*"]){Bt.push(new xe(p,C[de],'unknown property "'+de+'"'));continue}He=Da}Bt=Bt.concat(He({key:(p&&p+".")+de,value:C[de],valueSpec:Ge,style:ct,styleSpec:Tt,object:C,objectKey:de},C))}for(var cn in N)J[cn]||N[cn].required&&N[cn].default===void 0&&C[cn]===void 0&&Bt.push(new xe(p,C,'missing required property "'+cn+'"'));return Bt}function cl(d){var p=d.value,C=d.valueSpec,N=d.style,J=d.styleSpec,ct=d.key,Tt=d.arrayElementValidator||Da;if(Wa(p)!=="array")return[new xe(ct,p,"array expected, "+Wa(p)+" found")];if(C.length&&p.length!==C.length)return[new xe(ct,p,"array length "+C.length+" expected, length "+p.length+" found")];if(C["min-length"]&&p.length<C["min-length"])return[new xe(ct,p,"array length at least "+C["min-length"]+" expected, length "+p.length+" found")];var Bt={type:C.value,values:C.values};J.$version<7&&(Bt.function=C.function),Wa(C.value)==="object"&&(Bt=C.value);for(var Xt=[],de=0;de<p.length;de++)Xt=Xt.concat(Tt({array:p,arrayIndex:de,value:p[de],valueSpec:Bt,style:N,styleSpec:J,key:ct+"["+de+"]"}));return Xt}function Rl(d){var p=d.key,C=d.value,N=d.valueSpec,J=Wa(C);return J==="number"&&C!=C&&(J="NaN"),J!=="number"?[new xe(p,C,"number expected, "+J+" found")]:"minimum"in N&&C<N.minimum?[new xe(p,C,C+" is less than the minimum value "+N.minimum)]:"maximum"in N&&C>N.maximum?[new xe(p,C,C+" is greater than the maximum value "+N.maximum)]:[]}function tc(d){var p,C,N,J=d.valueSpec,ct=or(d.value.type),Tt={},Bt=ct!=="categorical"&&d.value.property===void 0,Xt=!Bt,de=Wa(d.value.stops)==="array"&&Wa(d.value.stops[0])==="array"&&Wa(d.value.stops[0][0])==="object",De=ss({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Rn){if(ct==="identity")return[new xe(Rn.key,Rn.value,'identity function may not have a "stops" property')];var On=[],$n=Rn.value;return On=On.concat(cl({key:Rn.key,value:$n,valueSpec:Rn.valueSpec,style:Rn.style,styleSpec:Rn.styleSpec,arrayElementValidator:Ge})),Wa($n)==="array"&&$n.length===0&&On.push(new xe(Rn.key,$n,"array must have at least one stop")),On},default:function(Rn){return Da({key:Rn.key,value:Rn.value,valueSpec:J,style:Rn.style,styleSpec:Rn.styleSpec})}}});return ct==="identity"&&Bt&&De.push(new xe(d.key,d.value,'missing required property "property"')),ct==="identity"||d.value.stops||De.push(new xe(d.key,d.value,'missing required property "stops"')),ct==="exponential"&&d.valueSpec.expression&&!su(d.valueSpec)&&De.push(new xe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Xt&&!Ls(d.valueSpec)?De.push(new xe(d.key,d.value,"property functions not supported")):Bt&&!qu(d.valueSpec)&&De.push(new xe(d.key,d.value,"zoom functions not supported"))),ct!=="categorical"&&!de||d.value.property!==void 0||De.push(new xe(d.key,d.value,'"property" property is required')),De;function Ge(cn){var Rn=[],On=cn.value,$n=cn.key;if(Wa(On)!=="array")return[new xe($n,On,"array expected, "+Wa(On)+" found")];if(On.length!==2)return[new xe($n,On,"array length 2 expected, length "+On.length+" found")];if(de){if(Wa(On[0])!=="object")return[new xe($n,On,"object expected, "+Wa(On[0])+" found")];if(On[0].zoom===void 0)return[new xe($n,On,"object stop key must have zoom")];if(On[0].value===void 0)return[new xe($n,On,"object stop key must have value")];if(N&&N>or(On[0].zoom))return[new xe($n,On[0].zoom,"stop zoom values must appear in ascending order")];or(On[0].zoom)!==N&&(N=or(On[0].zoom),C=void 0,Tt={}),Rn=Rn.concat(ss({key:$n+"[0]",value:On[0],valueSpec:{zoom:{}},style:cn.style,styleSpec:cn.styleSpec,objectElementValidators:{zoom:Rl,value:He}}))}else Rn=Rn.concat(He({key:$n+"[0]",value:On[0],valueSpec:{},style:cn.style,styleSpec:cn.styleSpec},On));return vs(En(On[1]))?Rn.concat([new xe($n+"[1]",On[1],"expressions are not allowed in function stops.")]):Rn.concat(Da({key:$n+"[1]",value:On[1],valueSpec:J,style:cn.style,styleSpec:cn.styleSpec}))}function He(cn,Rn){var On=Wa(cn.value),$n=or(cn.value),Qn=cn.value!==null?cn.value:Rn;if(p){if(On!==p)return[new xe(cn.key,Qn,On+" stop domain type must match previous stop domain type "+p)]}else p=On;if(On!=="number"&&On!=="string"&&On!=="boolean")return[new xe(cn.key,Qn,"stop domain value must be a number, string, or boolean")];if(On!=="number"&&ct!=="categorical"){var Sr="number expected, "+On+" found";return Ls(J)&&ct===void 0&&(Sr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xe(cn.key,Qn,Sr)]}return ct!=="categorical"||On!=="number"||isFinite($n)&&Math.floor($n)===$n?ct!=="categorical"&&On==="number"&&C!==void 0&&$n<C?[new xe(cn.key,Qn,"stop domain values must appear in ascending order")]:(C=$n,ct==="categorical"&&$n in Tt?[new xe(cn.key,Qn,"stop domain values must be unique")]:(Tt[$n]=!0,[])):[new xe(cn.key,Qn,"integer expected, found "+$n)]}}function Wu(d){var p=(d.expressionContext==="property"?Ws:wu)(En(d.value),d.valueSpec);if(p.result==="error")return p.value.map(function(N){return new xe(""+d.key+N.key,d.value,N.message)});var C=p.value.expression||p.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!C.outputDefined())return[new xe(d.key,d.value,'Invalid data expression for "'+d.propertyKey+'". Output values must be contained as literals within the expression.')];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Ja(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Ja(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!_o(C,["zoom","feature-state"]))return[new xe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!yo(C))return[new xe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tl(d){var p=d.key,C=d.value,N=d.valueSpec,J=[];return Array.isArray(N.values)?N.values.indexOf(or(C))===-1&&J.push(new xe(p,C,"expected one of ["+N.values.join(", ")+"], "+JSON.stringify(C)+" found")):Object.keys(N.values).indexOf(or(C))===-1&&J.push(new xe(p,C,"expected one of ["+Object.keys(N.values).join(", ")+"], "+JSON.stringify(C)+" found")),J}function Iu(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(var p=0,C=d.slice(1);p<C.length;p+=1){var N=C[p];if(!Iu(N)&&typeof N!="boolean")return!1}return!0;default:return!0}}Jo.deserialize=function(d){return new Jo(d._parameters,d._specification)},Jo.serialize=function(d){return{_parameters:d._parameters,_specification:d._specification}};var Lu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mu(d){if(d==null)return{filter:function(){return!0},needGeometry:!1};Iu(d)||(d=Us(d));var p=wu(d,Lu);if(p.result==="error")throw new Error(p.value.map(function(C){return C.key+": "+C.message}).join(", "));return{filter:function(N,J,ct){return p.value.evaluate(N,J,{},ct)},needGeometry:function C(N){if(!Array.isArray(N))return!1;if(N[0]==="within")return!0;for(var J=1;J<N.length;J++)if(C(N[J]))return!0;return!1}(d)}}function Hu(d,p){return d<p?-1:d>p?1:0}function Us(d){if(!d)return!0;var p,C=d[0];return d.length<=1?C!=="any":C==="=="?Dl(d[1],d[2],"=="):C==="!="?jl(Dl(d[1],d[2],"==")):C==="<"||C===">"||C==="<="||C===">="?Dl(d[1],d[2],C):C==="any"?(p=d.slice(1),["any"].concat(p.map(Us))):C==="all"?["all"].concat(d.slice(1).map(Us)):C==="none"?["all"].concat(d.slice(1).map(Us).map(jl)):C==="in"?hc(d[1],d.slice(2)):C==="!in"?jl(hc(d[1],d.slice(2))):C==="has"?Pl(d[1]):C==="!has"?jl(Pl(d[1])):C!=="within"||d}function Dl(d,p,C){switch(d){case"$type":return["filter-type-"+C,p];case"$id":return["filter-id-"+C,p];default:return["filter-"+C,d,p]}}function hc(d,p){if(p.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(function(C){return typeof C!=typeof p[0]})?["filter-in-large",d,["literal",p.sort(Hu)]]:["filter-in-small",d,["literal",p]]}}function Pl(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function jl(d){return["!",d]}function Bl(d){return Iu(En(d.value))?Wu(Fn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function p(C){var N=C.value,J=C.key;if(Wa(N)!=="array")return[new xe(J,N,"array expected, "+Wa(N)+" found")];var ct,Tt=C.styleSpec,Bt=[];if(N.length<1)return[new xe(J,N,"filter array must have at least 1 element")];switch(Bt=Bt.concat(tl({key:J+"[0]",value:N[0],valueSpec:Tt.filter_operator,style:C.style,styleSpec:C.styleSpec})),or(N[0])){case"<":case"<=":case">":case">=":N.length>=2&&or(N[1])==="$type"&&Bt.push(new xe(J,N,'"$type" cannot be use with operator "'+N[0]+'"'));case"==":case"!=":N.length!==3&&Bt.push(new xe(J,N,'filter array for operator "'+N[0]+'" must have 3 elements'));case"in":case"!in":N.length>=2&&(ct=Wa(N[1]))!=="string"&&Bt.push(new xe(J+"[1]",N[1],"string expected, "+ct+" found"));for(var Xt=2;Xt<N.length;Xt++)ct=Wa(N[Xt]),or(N[1])==="$type"?Bt=Bt.concat(tl({key:J+"["+Xt+"]",value:N[Xt],valueSpec:Tt.geometry_type,style:C.style,styleSpec:C.styleSpec})):ct!=="string"&&ct!=="number"&&ct!=="boolean"&&Bt.push(new xe(J+"["+Xt+"]",N[Xt],"string, number, or boolean expected, "+ct+" found"));break;case"any":case"all":case"none":for(var de=1;de<N.length;de++)Bt=Bt.concat(p({key:J+"["+de+"]",value:N[de],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":ct=Wa(N[1]),N.length!==2?Bt.push(new xe(J,N,'filter array for "'+N[0]+'" operator must have 2 elements')):ct!=="string"&&Bt.push(new xe(J+"[1]",N[1],"string expected, "+ct+" found"));break;case"within":ct=Wa(N[1]),N.length!==2?Bt.push(new xe(J,N,'filter array for "'+N[0]+'" operator must have 2 elements')):ct!=="object"&&Bt.push(new xe(J+"[1]",N[1],"object expected, "+ct+" found"))}return Bt}(d)}function sc(d,p){var C=d.key,N=d.style,J=d.styleSpec,ct=d.value,Tt=d.objectKey,Bt=J[p+"_"+d.layerType];if(!Bt)return[];var Xt=Tt.match(/^(.*)-transition$/);if(p==="paint"&&Xt&&Bt[Xt[1]]&&Bt[Xt[1]].transition)return Da({key:C,value:ct,valueSpec:J.transition,style:N,styleSpec:J});var de,De=d.valueSpec||Bt[Tt];if(!De)return[new xe(C,ct,'unknown property "'+Tt+'"')];if(Wa(ct)==="string"&&Ls(De)&&!De.tokens&&(de=/^{([^}]+)}$/.exec(ct)))return[new xe(C,ct,'"'+Tt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(de[1])+" }`.")];var Ge=[];return d.layerType==="symbol"&&(Tt==="text-field"&&N&&!N.glyphs&&Ge.push(new xe(C,ct,'use of "text-field" requires a style "glyphs" property')),Tt==="text-font"&&Sl(En(ct))&&or(ct.type)==="identity"&&Ge.push(new xe(C,ct,'"text-font" does not support identity functions'))),Ge.concat(Da({key:d.key,value:ct,valueSpec:De,style:N,styleSpec:J,expressionContext:"property",propertyType:p,propertyKey:Tt}))}function el(d){return sc(d,"paint")}function Tl(d){return sc(d,"layout")}function Nl(d){var p=[],C=d.value,N=d.key,J=d.style,ct=d.styleSpec;C.type||C.ref||p.push(new xe(N,C,'either "type" or "ref" is required'));var Tt,Bt=or(C.type),Xt=or(C.ref);if(C.id)for(var de=or(C.id),De=0;De<d.arrayIndex;De++){var Ge=J.layers[De];or(Ge.id)===de&&p.push(new xe(N,C.id,'duplicate layer id "'+C.id+'", previously used at line '+Ge.id.__line__))}if("ref"in C)["type","source","source-layer","filter","layout"].forEach(function(Rn){Rn in C&&p.push(new xe(N,C[Rn],'"'+Rn+'" is prohibited for ref layers'))}),J.layers.forEach(function(Rn){or(Rn.id)===Xt&&(Tt=Rn)}),Tt?Tt.ref?p.push(new xe(N,C.ref,"ref cannot reference another ref layer")):Bt=or(Tt.type):p.push(new xe(N,C.ref,'ref layer "'+Xt+'" not found'));else if(Bt!=="background")if(C.source){var He=J.sources&&J.sources[C.source],cn=He&&or(He.type);He?cn==="vector"&&Bt==="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a raster source')):cn==="raster"&&Bt!=="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a vector source')):cn!=="vector"||C["source-layer"]?cn==="raster-dem"&&Bt!=="hillshade"?p.push(new xe(N,C.source,"raster-dem source can only be used with layer type 'hillshade'.")):Bt!=="line"||!C.paint||!C.paint["line-gradient"]||cn==="geojson"&&He.lineMetrics||p.push(new xe(N,C,'layer "'+C.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):p.push(new xe(N,C,'layer "'+C.id+'" must specify a "source-layer"')):p.push(new xe(N,C.source,'source "'+C.source+'" not found'))}else p.push(new xe(N,C,'missing required property "source"'));return p=p.concat(ss({key:N,value:C,valueSpec:ct.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Da({key:N+".type",value:C.type,valueSpec:ct.layer.type,style:d.style,styleSpec:d.styleSpec,object:C,objectKey:"type"})},filter:Bl,layout:function(On){return ss({layer:C,key:On.key,value:On.value,style:On.style,styleSpec:On.styleSpec,objectElementValidators:{"*":function(Qn){return Tl(Fn({layerType:Bt},Qn))}}})},paint:function(On){return ss({layer:C,key:On.key,value:On.value,style:On.style,styleSpec:On.styleSpec,objectElementValidators:{"*":function(Qn){return el(Fn({layerType:Bt},Qn))}}})}}}))}function tu(d){var p=d.value,C=d.key,N=Wa(p);return N!=="string"?[new xe(C,p,"string expected, "+N+" found")]:[]}var po={promoteId:function(p){var C=p.key,N=p.value;if(Wa(N)==="string")return tu({key:C,value:N});var J=[];for(var ct in N)J.push.apply(J,tu({key:C+"."+ct,value:N[ct]}));return J}};function pl(d){var p=d.value,C=d.key,N=d.styleSpec,J=d.style;if(!p.type)return[new xe(C,p,'"type" is required')];var ct,Tt=or(p.type);switch(Tt){case"vector":case"raster":case"raster-dem":return ss({key:C,value:p,valueSpec:N["source_"+Tt.replace("-","_")],style:d.style,styleSpec:N,objectElementValidators:po});case"geojson":if(ct=ss({key:C,value:p,valueSpec:N.source_geojson,style:J,styleSpec:N,objectElementValidators:po}),p.cluster)for(var Bt in p.clusterProperties){var Xt=p.clusterProperties[Bt],de=Xt[0],De=typeof de=="string"?[de,["accumulated"],["get",Bt]]:de;ct.push.apply(ct,Wu({key:C+"."+Bt+".map",value:Xt[1],expressionContext:"cluster-map"})),ct.push.apply(ct,Wu({key:C+"."+Bt+".reduce",value:De,expressionContext:"cluster-reduce"}))}return ct;case"video":return ss({key:C,value:p,valueSpec:N.source_video,style:J,styleSpec:N});case"image":return ss({key:C,value:p,valueSpec:N.source_image,style:J,styleSpec:N});case"canvas":return[new xe(C,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tl({key:C+".type",value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:J,styleSpec:N})}}function fl(d){var p=d.value,C=d.styleSpec,N=C.light,J=d.style,ct=[],Tt=Wa(p);if(p===void 0)return ct;if(Tt!=="object")return ct.concat([new xe("light",p,"object expected, "+Tt+" found")]);for(var Bt in p){var Xt=Bt.match(/^(.*)-transition$/);ct=ct.concat(Xt&&N[Xt[1]]&&N[Xt[1]].transition?Da({key:Bt,value:p[Bt],valueSpec:C.transition,style:J,styleSpec:C}):N[Bt]?Da({key:Bt,value:p[Bt],valueSpec:N[Bt],style:J,styleSpec:C}):[new xe(Bt,p[Bt],'unknown property "'+Bt+'"')])}return ct}var Hs={"*":function(){return[]},array:cl,boolean:function(p){var C=p.value,N=p.key,J=Wa(C);return J!=="boolean"?[new xe(N,C,"boolean expected, "+J+" found")]:[]},number:Rl,color:function(p){var C=p.key,N=p.value,J=Wa(N);return J!=="string"?[new xe(C,N,"color expected, "+J+" found")]:vr(N)===null?[new xe(C,N,'color expected, "'+N+'" found')]:[]},constants:$e,enum:tl,filter:Bl,function:tc,layer:Nl,object:ss,source:pl,light:fl,string:tu,formatted:function(p){return tu(p).length===0?[]:Wu(p)},resolvedImage:function(p){return tu(p).length===0?[]:Wu(p)}};function Da(d){var p=d.value,C=d.valueSpec,N=d.styleSpec;return C.expression&&Sl(or(p))?tc(d):C.expression&&vs(En(p))?Wu(d):C.type&&Hs[C.type]?Hs[C.type](d):ss(Fn({},d,{valueSpec:C.type?N[C.type]:C}))}function bo(d){var p=d.value,C=d.key,N=tu(d);return N.length||(p.indexOf("{fontstack}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{range}" token'))),N}function ks(d,p){p===void 0&&(p=ue);var C=[];return C=C.concat(Da({key:"",value:d,valueSpec:p.$root,styleSpec:p,style:d,objectElementValidators:{glyphs:bo,"*":function(){return[]}}})),d.constants&&(C=C.concat($e({key:"constants",value:d.constants,style:d,styleSpec:p}))),gl(C)}function gl(d){return[].concat(d).sort(function(p,C){return p.line-C.line})}function nl(d){return function(){for(var p=[],C=arguments.length;C--;)p[C]=arguments[C];return gl(d.apply(this,p))}}ks.source=nl(pl),ks.light=nl(fl),ks.layer=nl(Nl),ks.filter=nl(Bl),ks.paintProperty=nl(el),ks.layoutProperty=nl(Tl);var Yu=ks,dc=Yu.light,As=Yu.paintProperty,rl=Yu.layoutProperty;function lu(d,p){var C=!1;if(p&&p.length)for(var N=0,J=p;N<J.length;N+=1)d.fire(new ie(new Error(J[N].message))),C=!0;return C}var Ys=$o;function $o(d,p,C){var N=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var J=new Int32Array(this.arrayBuffer);d=J[0],this.d=(p=J[1])+2*(C=J[2]);for(var ct=0;ct<this.d*this.d;ct++){var Tt=J[3+ct],Bt=J[3+ct+1];N.push(Tt===Bt?null:J.subarray(Tt,Bt))}var Xt=J[3+N.length+1];this.keys=J.subarray(J[3+N.length],Xt),this.bboxes=J.subarray(Xt),this.insert=this._insertReadonly}else{this.d=p+2*C;for(var de=0;de<this.d*this.d;de++)N.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=d,this.padding=C,this.scale=p/d,this.uid=0;var De=C/p*d;this.min=-De,this.max=d+De}$o.prototype.insert=function(d,p,C,N,J){this._forEachCell(p,C,N,J,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(J)},$o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$o.prototype._insertCell=function(d,p,C,N,J,ct){this.cells[J].push(ct)},$o.prototype.query=function(d,p,C,N,J){var ct=this.min,Tt=this.max;if(d<=ct&&p<=ct&&Tt<=C&&Tt<=N&&!J)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(d,p,C,N,this._queryCell,Bt,{},J),Bt},$o.prototype._queryCell=function(d,p,C,N,J,ct,Tt,Bt){var Xt=this.cells[J];if(Xt!==null)for(var de=this.keys,De=this.bboxes,Ge=0;Ge<Xt.length;Ge++){var He=Xt[Ge];if(Tt[He]===void 0){var cn=4*He;(Bt?Bt(De[cn+0],De[cn+1],De[cn+2],De[cn+3]):d<=De[cn+2]&&p<=De[cn+3]&&C>=De[cn+0]&&N>=De[cn+1])?(Tt[He]=!0,ct.push(de[He])):Tt[He]=!1}}},$o.prototype._forEachCell=function(d,p,C,N,J,ct,Tt,Bt){for(var Xt=this._convertToCellCoord(d),de=this._convertToCellCoord(p),De=this._convertToCellCoord(C),Ge=this._convertToCellCoord(N),He=Xt;He<=De;He++)for(var cn=de;cn<=Ge;cn++){var Rn=this.d*cn+He;if((!Bt||Bt(this._convertFromCellCoord(He),this._convertFromCellCoord(cn),this._convertFromCellCoord(He+1),this._convertFromCellCoord(cn+1)))&&J.call(this,d,p,C,N,Rn,ct,Tt,Bt))return}},$o.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},$o.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},$o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,p=3+this.cells.length+1+1,C=0,N=0;N<this.cells.length;N++)C+=this.cells[N].length;var J=new Int32Array(p+C+this.keys.length+this.bboxes.length);J[0]=this.extent,J[1]=this.n,J[2]=this.padding;for(var ct=p,Tt=0;Tt<d.length;Tt++){var Bt=d[Tt];J[3+Tt]=ct,J.set(Bt,ct),ct+=Bt.length}return J[3+d.length]=ct,J.set(this.keys,ct),J[3+d.length+1]=ct+=this.keys.length,J.set(this.bboxes,ct),ct+=this.bboxes.length,J.buffer};var eu=n.ImageData,Ru=n.ImageBitmap,Qo={};function Wi(d,p,C){C===void 0&&(C={}),Object.defineProperty(p,"_classRegistryKey",{value:d,writeable:!1}),Qo[d]={klass:p,omit:C.omit||[],shallow:C.shallow||[]}}for(var Cs in Wi("Object",Object),Ys.serialize=function(d,p){var C=d.toArrayBuffer();return p&&p.push(C),{buffer:C}},Ys.deserialize=function(d){return new Ys(d.buffer)},Wi("Grid",Ys),Wi("Color",zr),Wi("Error",Error),Wi("ResolvedImage",eo),Wi("StylePropertyFunction",Jo),Wi("StyleExpression",Ml,{omit:["_evaluator"]}),Wi("ZoomDependentExpression",Vu),Wi("ZoomConstantExpression",gu),Wi("CompoundExpression",Ne,{omit:["_evaluate"]}),wo)wo[Cs]._classRegistryKey||Wi("Expression_"+Cs,wo[Cs]);function Zu(d){return d&&typeof ArrayBuffer!="undefined"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Du(d){return Ru&&d instanceof Ru}function jo(d,p){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Zu(d)||Du(d))return p&&p.push(d),d;if(ArrayBuffer.isView(d)){var C=d;return p&&p.push(C.buffer),C}if(d instanceof eu)return p&&p.push(d.data.buffer),d;if(Array.isArray(d)){for(var N=[],J=0,ct=d;J<ct.length;J+=1)N.push(jo(ct[J],p));return N}if(typeof d=="object"){var Tt=d.constructor,Bt=Tt._classRegistryKey;if(!Bt)throw new Error("can't serialize object of unregistered class");var Xt=Tt.serialize?Tt.serialize(d,p):{};if(!Tt.serialize){for(var de in d)if(d.hasOwnProperty(de)&&!(Qo[Bt].omit.indexOf(de)>=0)){var De=d[de];Xt[de]=Qo[Bt].shallow.indexOf(de)>=0?De:jo(De,p)}d instanceof Error&&(Xt.message=d.message)}if(Xt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Bt!=="Object"&&(Xt.$name=Bt),Xt}throw new Error("can't serialize object of type "+typeof d)}function Bo(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Zu(d)||Du(d)||ArrayBuffer.isView(d)||d instanceof eu)return d;if(Array.isArray(d))return d.map(Bo);if(typeof d=="object"){var p=d.$name||"Object",C=Qo[p].klass;if(!C)throw new Error("can't deserialize unregistered class "+p);if(C.deserialize)return C.deserialize(d);for(var N=Object.create(C.prototype),J=0,ct=Object.keys(d);J<ct.length;J+=1){var Tt=ct[J];if(Tt!=="$name"){var Bt=d[Tt];N[Tt]=Qo[p].shallow.indexOf(Tt)>=0?Bt:Bo(Bt)}}return N}throw new Error("can't deserialize object of type "+typeof d)}var Tu=function(){this.first=!0};Tu.prototype.update=function(d,p){var C=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=C,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=C,!0):(this.lastFloorZoom>C?(this.lastIntegerZoom=C+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<C&&(this.lastIntegerZoom=C,this.lastIntegerZoomTime=p),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=C,!0))};var Mi={"Latin-1 Supplement":function(p){return p>=128&&p<=255},Arabic:function(p){return p>=1536&&p<=1791},"Arabic Supplement":function(p){return p>=1872&&p<=1919},"Arabic Extended-A":function(p){return p>=2208&&p<=2303},"Hangul Jamo":function(p){return p>=4352&&p<=4607},"Unified Canadian Aboriginal Syllabics":function(p){return p>=5120&&p<=5759},Khmer:function(p){return p>=6016&&p<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(p){return p>=6320&&p<=6399},"General Punctuation":function(p){return p>=8192&&p<=8303},"Letterlike Symbols":function(p){return p>=8448&&p<=8527},"Number Forms":function(p){return p>=8528&&p<=8591},"Miscellaneous Technical":function(p){return p>=8960&&p<=9215},"Control Pictures":function(p){return p>=9216&&p<=9279},"Optical Character Recognition":function(p){return p>=9280&&p<=9311},"Enclosed Alphanumerics":function(p){return p>=9312&&p<=9471},"Geometric Shapes":function(p){return p>=9632&&p<=9727},"Miscellaneous Symbols":function(p){return p>=9728&&p<=9983},"Miscellaneous Symbols and Arrows":function(p){return p>=11008&&p<=11263},"CJK Radicals Supplement":function(p){return p>=11904&&p<=12031},"Kangxi Radicals":function(p){return p>=12032&&p<=12255},"Ideographic Description Characters":function(p){return p>=12272&&p<=12287},"CJK Symbols and Punctuation":function(p){return p>=12288&&p<=12351},Hiragana:function(p){return p>=12352&&p<=12447},Katakana:function(p){return p>=12448&&p<=12543},Bopomofo:function(p){return p>=12544&&p<=12591},"Hangul Compatibility Jamo":function(p){return p>=12592&&p<=12687},Kanbun:function(p){return p>=12688&&p<=12703},"Bopomofo Extended":function(p){return p>=12704&&p<=12735},"CJK Strokes":function(p){return p>=12736&&p<=12783},"Katakana Phonetic Extensions":function(p){return p>=12784&&p<=12799},"Enclosed CJK Letters and Months":function(p){return p>=12800&&p<=13055},"CJK Compatibility":function(p){return p>=13056&&p<=13311},"CJK Unified Ideographs Extension A":function(p){return p>=13312&&p<=19903},"Yijing Hexagram Symbols":function(p){return p>=19904&&p<=19967},"CJK Unified Ideographs":function(p){return p>=19968&&p<=40959},"Yi Syllables":function(p){return p>=40960&&p<=42127},"Yi Radicals":function(p){return p>=42128&&p<=42191},"Hangul Jamo Extended-A":function(p){return p>=43360&&p<=43391},"Hangul Syllables":function(p){return p>=44032&&p<=55215},"Hangul Jamo Extended-B":function(p){return p>=55216&&p<=55295},"Private Use Area":function(p){return p>=57344&&p<=63743},"CJK Compatibility Ideographs":function(p){return p>=63744&&p<=64255},"Arabic Presentation Forms-A":function(p){return p>=64336&&p<=65023},"Vertical Forms":function(p){return p>=65040&&p<=65055},"CJK Compatibility Forms":function(p){return p>=65072&&p<=65103},"Small Form Variants":function(p){return p>=65104&&p<=65135},"Arabic Presentation Forms-B":function(p){return p>=65136&&p<=65279},"Halfwidth and Fullwidth Forms":function(p){return p>=65280&&p<=65519}};function il(d){for(var p=0,C=d;p<C.length;p+=1)if(ju(C[p].charCodeAt(0)))return!0;return!1}function ju(d){return!(d!==746&&d!==747&&(d<4352||!(Mi["Bopomofo Extended"](d)||Mi.Bopomofo(d)||Mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Mi["CJK Compatibility Ideographs"](d)||Mi["CJK Compatibility"](d)||Mi["CJK Radicals Supplement"](d)||Mi["CJK Strokes"](d)||!(!Mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Mi["CJK Unified Ideographs Extension A"](d)||Mi["CJK Unified Ideographs"](d)||Mi["Enclosed CJK Letters and Months"](d)||Mi["Hangul Compatibility Jamo"](d)||Mi["Hangul Jamo Extended-A"](d)||Mi["Hangul Jamo Extended-B"](d)||Mi["Hangul Jamo"](d)||Mi["Hangul Syllables"](d)||Mi.Hiragana(d)||Mi["Ideographic Description Characters"](d)||Mi.Kanbun(d)||Mi["Kangxi Radicals"](d)||Mi["Katakana Phonetic Extensions"](d)||Mi.Katakana(d)&&d!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](d)||Mi["Unified Canadian Aboriginal Syllabics Extended"](d)||Mi["Vertical Forms"](d)||Mi["Yijing Hexagram Symbols"](d)||Mi["Yi Syllables"](d)||Mi["Yi Radicals"](d))))}function Bu(d){return!(ju(d)||function(p){return!!(Mi["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||Mi["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||Mi["Letterlike Symbols"](p)||Mi["Number Forms"](p)||Mi["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||Mi["Control Pictures"](p)&&p!==9251||Mi["Optical Character Recognition"](p)||Mi["Enclosed Alphanumerics"](p)||Mi["Geometric Shapes"](p)||Mi["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||Mi["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||Mi["CJK Symbols and Punctuation"](p)||Mi.Katakana(p)||Mi["Private Use Area"](p)||Mi["CJK Compatibility Forms"](p)||Mi["Small Form Variants"](p)||Mi["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(d))}function nu(d){return d>=1424&&d<=2303||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d)}function we(d,p){return!(!p&&nu(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Mi.Khmer(d))}function Pe(d){for(var p=0,C=d;p<C.length;p+=1)if(nu(C[p].charCodeAt(0)))return!0;return!1}var dn=null,tn="unavailable",wn=null,dr=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(tn="error"),dn&&dn(p)};function Rr(){Xr.fire(new Wt("pluginStateChange",{pluginStatus:tn,pluginURL:wn}))}var Xr=new Ae,ti=function(){return tn},Fr=function(){if(tn!=="deferred"||!wn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tn="loading",Rr(),wn&&fr({url:wn},function(p){p?dr(p):(tn="loaded",Rr())})},li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tn==="loaded"||li.applyArabicShaping!=null},isLoading:function(){return tn==="loading"},setState:function(p){tn=p.pluginStatus,wn=p.pluginURL},isParsed:function(){return li.applyArabicShaping!=null&&li.processBidirectionalText!=null&&li.processStyledBidirectionalText!=null},getPluginURL:function(){return wn}},yr=function(p,C){this.zoom=p,C?(this.now=C.now,this.fadeDuration=C.fadeDuration,this.zoomHistory=C.zoomHistory,this.transition=C.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tu,this.transition={})};yr.prototype.isSupportedScript=function(d){return function(p,C){for(var N=0,J=p;N<J.length;N+=1)if(!we(J[N].charCodeAt(0),C))return!1;return!0}(d,li.isLoaded())},yr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},yr.prototype.getCrossfadeParameters=function(){var d=this.zoom,p=d-Math.floor(d),C=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*C}:{fromScale:.5,toScale:1,t:1-(1-C)*p}};var Zt=function(p,C){this.property=p,this.value=C,this.expression=function(N,J){if(Sl(N))return new Jo(N,J);if(vs(N)){var ct=Ws(N,J);if(ct.result==="error")throw new Error(ct.value.map(function(Bt){return Bt.key+": "+Bt.message}).join(", "));return ct.value}var Tt=N;return typeof N=="string"&&J.type==="color"&&(Tt=zr.parse(N)),{kind:"constant",evaluate:function(){return Tt}}}(C===void 0?p.specification.default:C,p.specification)};Zt.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Zt.prototype.possiblyEvaluate=function(d,p,C){return this.property.possiblyEvaluate(this,d,p,C)};var te=function(p){this.property=p,this.value=new Zt(p,void 0)};te.prototype.transitioned=function(d,p){return new Se(this.property,this.value,p,v({},d.transition,this.transition),d.now)},te.prototype.untransitioned=function(){return new Se(this.property,this.value,null,{},0)};var Le=function(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)};Le.prototype.getValue=function(d){return P(this._values[d].value.value)},Le.prototype.setValue=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].value=new Zt(this._values[d].property,p===null?void 0:P(p))},Le.prototype.getTransition=function(d){return P(this._values[d].transition)},Le.prototype.setTransition=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].transition=P(p)||void 0},Le.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],J=this.getValue(N);J!==void 0&&(d[N]=J);var ct=this.getTransition(N);ct!==void 0&&(d[N+"-transition"]=ct)}return d},Le.prototype.transitioned=function(d,p){for(var C=new Dt(this._properties),N=0,J=Object.keys(this._values);N<J.length;N+=1){var ct=J[N];C._values[ct]=this._values[ct].transitioned(d,p._values[ct])}return C},Le.prototype.untransitioned=function(){for(var d=new Dt(this._properties),p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p];d._values[N]=this._values[N].untransitioned()}return d};var Se=function(p,C,N,J,ct){this.property=p,this.value=C,this.begin=ct+J.delay||0,this.end=this.begin+J.duration||0,p.specification.transition&&(J.delay||J.duration)&&(this.prior=N)};Se.prototype.possiblyEvaluate=function(d,p,C){var N=d.now||0,J=this.value.possiblyEvaluate(d,p,C),ct=this.prior;if(ct){if(N>this.end)return this.prior=null,J;if(this.value.isDataDriven())return this.prior=null,J;if(N<this.begin)return ct.possiblyEvaluate(d,p,C);var Tt=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(ct.possiblyEvaluate(d,p,C),J,function(Bt){if(Bt<=0)return 0;if(Bt>=1)return 1;var Xt=Bt*Bt,de=Xt*Bt;return 4*(Bt<.5?de:3*(Bt-Xt)+de-.75)}(Tt))}return J};var Dt=function(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)};Dt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new re(this._properties),J=0,ct=Object.keys(this._values);J<ct.length;J+=1){var Tt=ct[J];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N},Dt.prototype.hasTransition=function(){for(var d=0,p=Object.keys(this._values);d<p.length;d+=1)if(this._values[p[d]].prior)return!0;return!1};var zt=function(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)};zt.prototype.getValue=function(d){return P(this._values[d].value)},zt.prototype.setValue=function(d,p){this._values[d]=new Zt(this._values[d].property,p===null?void 0:P(p))},zt.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],J=this.getValue(N);J!==void 0&&(d[N]=J)}return d},zt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new re(this._properties),J=0,ct=Object.keys(this._values);J<ct.length;J+=1){var Tt=ct[J];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N};var se=function(p,C,N){this.property=p,this.value=C,this.parameters=N};se.prototype.isConstant=function(){return this.value.kind==="constant"},se.prototype.constantOr=function(d){return this.value.kind==="constant"?this.value.value:d},se.prototype.evaluate=function(d,p,C,N){return this.property.evaluate(this.value,this.parameters,d,p,C,N)};var re=function(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)};re.prototype.get=function(d){return this._values[d]};var fe=function(p){this.specification=p};fe.prototype.possiblyEvaluate=function(d,p){return d.expression.evaluate(p)},fe.prototype.interpolate=function(d,p,C){var N=Ms[this.specification.type];return N?N(d,p,C):d};var Fe=function(p,C){this.specification=p,this.overrides=C};Fe.prototype.possiblyEvaluate=function(d,p,C,N){return new se(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(p,null,{},C,N)}:d.expression,p)},Fe.prototype.interpolate=function(d,p,C){if(d.value.kind!=="constant"||p.value.kind!=="constant")return d;if(d.value.value===void 0||p.value.value===void 0)return new se(this,{kind:"constant",value:void 0},d.parameters);var N=Ms[this.specification.type];return N?new se(this,{kind:"constant",value:N(d.value.value,p.value.value,C)},d.parameters):d},Fe.prototype.evaluate=function(d,p,C,N,J,ct){return d.kind==="constant"?d.value:d.evaluate(p,C,N,J,ct)};var Ke=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N,J,ct){if(C.value===void 0)return new se(this,{kind:"constant",value:void 0},N);if(C.expression.kind==="constant"){var Tt=C.expression.evaluate(N,null,{},J,ct),Bt=C.property.specification.type==="resolvedImage"&&typeof Tt!="string"?Tt.name:Tt,Xt=this._calculate(Bt,Bt,Bt,N);return new se(this,{kind:"constant",value:Xt},N)}if(C.expression.kind==="camera"){var de=this._calculate(C.expression.evaluate({zoom:N.zoom-1}),C.expression.evaluate({zoom:N.zoom}),C.expression.evaluate({zoom:N.zoom+1}),N);return new se(this,{kind:"constant",value:de},N)}return new se(this,C.expression,N)},p.prototype.evaluate=function(C,N,J,ct,Tt,Bt){if(C.kind==="source"){var Xt=C.evaluate(N,J,ct,Tt,Bt);return this._calculate(Xt,Xt,Xt,N)}return C.kind==="composite"?this._calculate(C.evaluate({zoom:Math.floor(N.zoom)-1},J,ct),C.evaluate({zoom:Math.floor(N.zoom)},J,ct),C.evaluate({zoom:Math.floor(N.zoom)+1},J,ct),N):C.value},p.prototype._calculate=function(C,N,J,ct){return ct.zoom>ct.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:J,to:N}},p.prototype.interpolate=function(C){return C},p}(Fe),rn=function(p){this.specification=p};rn.prototype.possiblyEvaluate=function(d,p,C,N){if(d.value!==void 0){if(d.expression.kind==="constant"){var J=d.expression.evaluate(p,null,{},C,N);return this._calculate(J,J,J,p)}return this._calculate(d.expression.evaluate(new yr(Math.floor(p.zoom-1),p)),d.expression.evaluate(new yr(Math.floor(p.zoom),p)),d.expression.evaluate(new yr(Math.floor(p.zoom+1),p)),p)}},rn.prototype._calculate=function(d,p,C,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:d,to:p}:{from:C,to:p}},rn.prototype.interpolate=function(d){return d};var Je=function(p){this.specification=p};Je.prototype.possiblyEvaluate=function(d,p,C,N){return!!d.expression.evaluate(p,null,{},C,N)},Je.prototype.interpolate=function(){return!1};var pn=function(p){for(var C in this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],p){var N=p[C];N.specification.overridable&&this.overridableProperties.push(C);var J=this.defaultPropertyValues[C]=new Zt(N,void 0),ct=this.defaultTransitionablePropertyValues[C]=new te(N);this.defaultTransitioningPropertyValues[C]=ct.untransitioned(),this.defaultPossiblyEvaluatedValues[C]=J.possiblyEvaluate({})}};Wi("DataDrivenProperty",Fe),Wi("DataConstantProperty",fe),Wi("CrossFadedDataDrivenProperty",Ke),Wi("CrossFadedProperty",rn),Wi("ColorRampProperty",Je);var hn=function(d){function p(C,N){if(d.call(this),this.id=C.id,this.type=C.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},C.type!=="custom"&&(this.metadata=(C=C).metadata,this.minzoom=C.minzoom,this.maxzoom=C.maxzoom,C.type!=="background"&&(this.source=C.source,this.sourceLayer=C["source-layer"],this.filter=C.filter),N.layout&&(this._unevaluatedLayout=new zt(N.layout)),N.paint)){for(var J in this._transitionablePaint=new Le(N.paint),C.paint)this.setPaintProperty(J,C.paint[J],{validate:!1});for(var ct in C.layout)this.setLayoutProperty(ct,C.layout[ct],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new re(N.paint)}}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},p.prototype.getLayoutProperty=function(C){return C==="visibility"?this.visibility:this._unevaluatedLayout.getValue(C)},p.prototype.setLayoutProperty=function(C,N,J){J===void 0&&(J={}),N!=null&&this._validate(rl,"layers."+this.id+".layout."+C,C,N,J)||(C!=="visibility"?this._unevaluatedLayout.setValue(C,N):this.visibility=N)},p.prototype.getPaintProperty=function(C){return x(C,"-transition")?this._transitionablePaint.getTransition(C.slice(0,-"-transition".length)):this._transitionablePaint.getValue(C)},p.prototype.setPaintProperty=function(C,N,J){if(J===void 0&&(J={}),N!=null&&this._validate(As,"layers."+this.id+".paint."+C,C,N,J))return!1;if(x(C,"-transition"))return this._transitionablePaint.setTransition(C.slice(0,-"-transition".length),N||void 0),!1;var ct=this._transitionablePaint._values[C],Tt=ct.property.specification["property-type"]==="cross-faded-data-driven",Bt=ct.value.isDataDriven(),Xt=ct.value;this._transitionablePaint.setValue(C,N),this._handleSpecialPaintPropertyUpdate(C);var de=this._transitionablePaint._values[C].value;return de.isDataDriven()||Bt||Tt||this._handleOverridablePaintPropertyUpdate(C,Xt,de)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,J){return!1},p.prototype.isHidden=function(C){return!!(this.minzoom&&C<this.minzoom)||!!(this.maxzoom&&C>=this.maxzoom)||this.visibility==="none"},p.prototype.updateTransitions=function(C){this._transitioningPaint=this._transitionablePaint.transitioned(C,this._transitioningPaint)},p.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},p.prototype.recalculate=function(C,N){C.getCrossfadeParameters&&(this._crossfadeParameters=C.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(C,void 0,N)),this.paint=this._transitioningPaint.possiblyEvaluate(C,void 0,N)},p.prototype.serialize=function(){var C={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(C.layout=C.layout||{},C.layout.visibility=this.visibility),S(C,function(N,J){return!(N===void 0||J==="layout"&&!Object.keys(N).length||J==="paint"&&!Object.keys(N).length)})},p.prototype._validate=function(C,N,J,ct,Tt){return Tt===void 0&&(Tt={}),(!Tt||Tt.validate!==!1)&&lu(this,C.call(Yu,{key:N,layerType:this.type,objectKey:J,value:ct,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))},p.prototype.is3D=function(){return!1},p.prototype.isTileClipped=function(){return!1},p.prototype.hasOffscreenPass=function(){return!1},p.prototype.resize=function(){},p.prototype.isStateDependent=function(){for(var C in this.paint._values){var N=this.paint.get(C);if(N instanceof se&&Ls(N.property.specification)&&(N.value.kind==="source"||N.value.kind==="composite")&&N.value.isStateDependent)return!0}return!1},p}(Ae),Jn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Vn=function(p,C){this._structArray=p,this._pos1=C*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Zn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Wn(d,p){p===void 0&&(p=1);var C=0,N=0;return{members:d.map(function(J){var ct=Jn[J.type].BYTES_PER_ELEMENT,Tt=C=cr(C,Math.max(p,ct)),Bt=J.components||1;return N=Math.max(N,ct),C+=ct*Bt,{name:J.name,type:J.type,components:Bt,offset:Tt}}),size:cr(C,Math.max(N,p)),alignment:p}}function cr(d,p){return Math.ceil(d/p)*p}Zn.serialize=function(d,p){return d._trim(),p&&(d.isTransferred=!0,p.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}},Zn.deserialize=function(d){var p=Object.create(this.prototype);return p.arrayBuffer=d.arrayBuffer,p.length=d.length,p.capacity=d.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p},Zn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Zn.prototype.clear=function(){this.length=0},Zn.prototype.resize=function(d){this.reserve(d),this.length=d},Zn.prototype.reserve=function(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}},Zn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var xr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var J=this.length;return this.resize(J+1),this.emplace(J,C,N)},p.prototype.emplace=function(C,N,J){var ct=2*C;return this.int16[ct+0]=N,this.int16[ct+1]=J,C},p}(Zn);xr.prototype.bytesPerElement=4,Wi("StructArrayLayout2i4",xr);var Hr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,J,ct)},p.prototype.emplace=function(C,N,J,ct,Tt){var Bt=4*C;return this.int16[Bt+0]=N,this.int16[Bt+1]=J,this.int16[Bt+2]=ct,this.int16[Bt+3]=Tt,C},p}(Zn);Hr.prototype.bytesPerElement=8,Wi("StructArrayLayout4i8",Hr);var mi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,J,ct,Tt,Bt)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt){var de=6*C;return this.int16[de+0]=N,this.int16[de+1]=J,this.int16[de+2]=ct,this.int16[de+3]=Tt,this.int16[de+4]=Bt,this.int16[de+5]=Xt,C},p}(Zn);mi.prototype.bytesPerElement=12,Wi("StructArrayLayout2i4i12",mi);var Br=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,J,ct,Tt,Bt)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt){var de=4*C,De=8*C;return this.int16[de+0]=N,this.int16[de+1]=J,this.uint8[De+4]=ct,this.uint8[De+5]=Tt,this.uint8[De+6]=Bt,this.uint8[De+7]=Xt,C},p}(Zn);Br.prototype.bytesPerElement=8,Wi("StructArrayLayout2i4ub8",Br);var ui=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var J=this.length;return this.resize(J+1),this.emplace(J,C,N)},p.prototype.emplace=function(C,N,J){var ct=2*C;return this.float32[ct+0]=N,this.float32[ct+1]=J,C},p}(Zn);ui.prototype.bytesPerElement=8,Wi("StructArrayLayout2f8",ui);var _i=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge){var He=this.length;return this.resize(He+1),this.emplace(He,C,N,J,ct,Tt,Bt,Xt,de,De,Ge)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He){var cn=10*C;return this.uint16[cn+0]=N,this.uint16[cn+1]=J,this.uint16[cn+2]=ct,this.uint16[cn+3]=Tt,this.uint16[cn+4]=Bt,this.uint16[cn+5]=Xt,this.uint16[cn+6]=de,this.uint16[cn+7]=De,this.uint16[cn+8]=Ge,this.uint16[cn+9]=He,C},p}(Zn);_i.prototype.bytesPerElement=20,Wi("StructArrayLayout10ui20",_i);var Zi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn){var Rn=this.length;return this.resize(Rn+1),this.emplace(Rn,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn){var On=12*C;return this.int16[On+0]=N,this.int16[On+1]=J,this.int16[On+2]=ct,this.int16[On+3]=Tt,this.uint16[On+4]=Bt,this.uint16[On+5]=Xt,this.uint16[On+6]=de,this.uint16[On+7]=De,this.int16[On+8]=Ge,this.int16[On+9]=He,this.int16[On+10]=cn,this.int16[On+11]=Rn,C},p}(Zn);Zi.prototype.bytesPerElement=24,Wi("StructArrayLayout4i4ui4i24",Zi);var Ri=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,J)},p.prototype.emplace=function(C,N,J,ct){var Tt=3*C;return this.float32[Tt+0]=N,this.float32[Tt+1]=J,this.float32[Tt+2]=ct,C},p}(Zn);Ri.prototype.bytesPerElement=12,Wi("StructArrayLayout3f12",Ri);var Ma=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint32[1*C+0]=N,C},p}(Zn);Ma.prototype.bytesPerElement=4,Wi("StructArrayLayout1ul4",Ma);var ga=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt,Xt,de,De){var Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,C,N,J,ct,Tt,Bt,Xt,de,De)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge){var He=10*C,cn=5*C;return this.int16[He+0]=N,this.int16[He+1]=J,this.int16[He+2]=ct,this.int16[He+3]=Tt,this.int16[He+4]=Bt,this.int16[He+5]=Xt,this.uint32[cn+3]=de,this.uint16[He+8]=De,this.uint16[He+9]=Ge,C},p}(Zn);ga.prototype.bytesPerElement=20,Wi("StructArrayLayout6i1ul2ui20",ga);var la=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,J,ct,Tt,Bt)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt){var de=6*C;return this.int16[de+0]=N,this.int16[de+1]=J,this.int16[de+2]=ct,this.int16[de+3]=Tt,this.int16[de+4]=Bt,this.int16[de+5]=Xt,C},p}(Zn);la.prototype.bytesPerElement=12,Wi("StructArrayLayout2i2i2i12",la);var ii=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,C,N,J,ct,Tt)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt){var Xt=4*C,de=8*C;return this.float32[Xt+0]=N,this.float32[Xt+1]=J,this.float32[Xt+2]=ct,this.int16[de+6]=Tt,this.int16[de+7]=Bt,C},p}(Zn);ii.prototype.bytesPerElement=16,Wi("StructArrayLayout2f1f2i16",ii);var Pa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,J,ct)},p.prototype.emplace=function(C,N,J,ct,Tt){var Bt=12*C,Xt=3*C;return this.uint8[Bt+0]=N,this.uint8[Bt+1]=J,this.float32[Xt+1]=ct,this.float32[Xt+2]=Tt,C},p}(Zn);Pa.prototype.bytesPerElement=12,Wi("StructArrayLayout2ub2f12",Pa);var Va=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,J)},p.prototype.emplace=function(C,N,J,ct){var Tt=3*C;return this.uint16[Tt+0]=N,this.uint16[Tt+1]=J,this.uint16[Tt+2]=ct,C},p}(Zn);Va.prototype.bytesPerElement=6,Wi("StructArrayLayout3ui6",Va);var Ya=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr){var Nr=this.length;return this.resize(Nr+1),this.emplace(Nr,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr,Nr){var Wr=24*C,pi=12*C,ai=48*C;return this.int16[Wr+0]=N,this.int16[Wr+1]=J,this.uint16[Wr+2]=ct,this.uint16[Wr+3]=Tt,this.uint32[pi+2]=Bt,this.uint32[pi+3]=Xt,this.uint32[pi+4]=de,this.uint16[Wr+10]=De,this.uint16[Wr+11]=Ge,this.uint16[Wr+12]=He,this.float32[pi+7]=cn,this.float32[pi+8]=Rn,this.uint8[ai+36]=On,this.uint8[ai+37]=$n,this.uint8[ai+38]=Qn,this.uint32[pi+10]=Sr,this.int16[Wr+22]=Nr,C},p}(Zn);Ya.prototype.bytesPerElement=48,Wi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ya);var Ii=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr,Nr,Wr,pi,ai,Bi,zi,ia,va,ca,ta,to){var Ta=this.length;return this.resize(Ta+1),this.emplace(Ta,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr,Nr,Wr,pi,ai,Bi,zi,ia,va,ca,ta,to)},p.prototype.emplace=function(C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On,$n,Qn,Sr,Nr,Wr,pi,ai,Bi,zi,ia,va,ca,ta,to,Ta){var pa=34*C,Yo=17*C;return this.int16[pa+0]=N,this.int16[pa+1]=J,this.int16[pa+2]=ct,this.int16[pa+3]=Tt,this.int16[pa+4]=Bt,this.int16[pa+5]=Xt,this.int16[pa+6]=de,this.int16[pa+7]=De,this.uint16[pa+8]=Ge,this.uint16[pa+9]=He,this.uint16[pa+10]=cn,this.uint16[pa+11]=Rn,this.uint16[pa+12]=On,this.uint16[pa+13]=$n,this.uint16[pa+14]=Qn,this.uint16[pa+15]=Sr,this.uint16[pa+16]=Nr,this.uint16[pa+17]=Wr,this.uint16[pa+18]=pi,this.uint16[pa+19]=ai,this.uint16[pa+20]=Bi,this.uint16[pa+21]=zi,this.uint16[pa+22]=ia,this.uint32[Yo+12]=va,this.float32[Yo+13]=ca,this.float32[Yo+14]=ta,this.float32[Yo+15]=to,this.float32[Yo+16]=Ta,C},p}(Zn);Ii.prototype.bytesPerElement=68,Wi("StructArrayLayout8i15ui1ul4f68",Ii);var Ra=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.float32[1*C+0]=N,C},p}(Zn);Ra.prototype.bytesPerElement=4,Wi("StructArrayLayout1f4",Ra);var lo=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,J)},p.prototype.emplace=function(C,N,J,ct){var Tt=3*C;return this.int16[Tt+0]=N,this.int16[Tt+1]=J,this.int16[Tt+2]=ct,C},p}(Zn);lo.prototype.bytesPerElement=6,Wi("StructArrayLayout3i6",lo);var Rs=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,J)},p.prototype.emplace=function(C,N,J,ct){var Tt=4*C;return this.uint32[2*C+0]=N,this.uint16[Tt+2]=J,this.uint16[Tt+3]=ct,C},p}(Zn);Rs.prototype.bytesPerElement=8,Wi("StructArrayLayout1ul2ui8",Rs);var Ds=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var J=this.length;return this.resize(J+1),this.emplace(J,C,N)},p.prototype.emplace=function(C,N,J){var ct=2*C;return this.uint16[ct+0]=N,this.uint16[ct+1]=J,C},p}(Zn);Ds.prototype.bytesPerElement=4,Wi("StructArrayLayout2ui4",Ds);var Ku=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint16[1*C+0]=N,C},p}(Zn);Ku.prototype.bytesPerElement=2,Wi("StructArrayLayout1ui2",Ku);var hu=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,J,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,J,ct)},p.prototype.emplace=function(C,N,J,ct,Tt){var Bt=4*C;return this.float32[Bt+0]=N,this.float32[Bt+1]=J,this.float32[Bt+2]=ct,this.float32[Bt+3]=Tt,C},p}(Zn);hu.prototype.bytesPerElement=16,Wi("StructArrayLayout4f16",hu);var j=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return C.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},C.x1.get=function(){return this._structArray.int16[this._pos2+2]},C.y1.get=function(){return this._structArray.int16[this._pos2+3]},C.x2.get=function(){return this._structArray.int16[this._pos2+4]},C.y2.get=function(){return this._structArray.int16[this._pos2+5]},C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(p.prototype,C),p}(Vn);j.prototype.size=20;var I=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new j(this,C)},p}(ga);Wi("CollisionBoxArray",I);var w=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},C.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},C.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},C.segment.get=function(){return this._structArray.uint16[this._pos2+10]},C.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},C.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},C.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},C.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},C.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},C.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},C.placedOrientation.set=function(N){this._structArray.uint8[this._pos1+37]=N},C.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},C.hidden.set=function(N){this._structArray.uint8[this._pos1+38]=N},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+10]=N},C.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(p.prototype,C),p}(Vn);w.prototype.size=48;var B=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new w(this,C)},p}(Ya);Wi("PlacedSymbolArray",B);var D=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},C.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},C.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},C.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},C.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},C.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},C.key.get=function(){return this._structArray.uint16[this._pos2+8]},C.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},C.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},C.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},C.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},C.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},C.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},C.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},C.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},C.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},C.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},C.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},C.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},C.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+12]=N},C.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},C.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},C.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},C.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(p.prototype,C),p}(Vn);D.prototype.size=68;var G=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new D(this,C)},p}(Ii);Wi("SymbolInstanceArray",G);var $=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getoffsetX=function(C){return this.float32[1*C+0]},p}(Ra);Wi("GlyphOffsetArray",$);var st=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getx=function(C){return this.int16[3*C+0]},p.prototype.gety=function(C){return this.int16[3*C+1]},p.prototype.gettileUnitDistanceFromAnchor=function(C){return this.int16[3*C+2]},p}(lo);Wi("SymbolLineVertexArray",st);var Ct=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(p.prototype,C),p}(Vn);Ct.prototype.size=8;var wt=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new Ct(this,C)},p}(Rs);Wi("FeatureIndexArray",wt);var Ut=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,Yt=function(p){p===void 0&&(p=[]),this.segments=p};function qt(d,p){return 256*(d=u(Math.floor(d),0,255))+u(Math.floor(p),0,255)}Yt.prototype.prepareSegment=function(d,p,C,N){var J=this.segments[this.segments.length-1];return d>Yt.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Yt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+d),(!J||J.vertexLength+d>Yt.MAX_VERTEX_ARRAY_LENGTH||J.sortKey!==N)&&(J={vertexOffset:p.length,primitiveOffset:C.length,vertexLength:0,primitiveLength:0},N!==void 0&&(J.sortKey=N),this.segments.push(J)),J},Yt.prototype.get=function(){return this.segments},Yt.prototype.destroy=function(){for(var d=0,p=this.segments;d<p.length;d+=1){var C=p[d];for(var N in C.vaos)C.vaos[N].destroy()}},Yt.simpleSegment=function(d,p,C,N){return new Yt([{vertexOffset:d,primitiveOffset:p,vertexLength:C,primitiveLength:N,vaos:{},sortKey:0}])},Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wi("SegmentVector",Yt);var he=Wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ye=l(function(d){d.exports=function(p,C){var N,J,ct,Tt,Bt,Xt,de,De;for(J=p.length-(N=3&p.length),ct=C,Bt=3432918353,Xt=461845907,De=0;De<J;)de=255&p.charCodeAt(De)|(255&p.charCodeAt(++De))<<8|(255&p.charCodeAt(++De))<<16|(255&p.charCodeAt(++De))<<24,++De,ct=27492+(65535&(Tt=5*(65535&(ct=(ct^=de=(65535&(de=(de=(65535&de)*Bt+(((de>>>16)*Bt&65535)<<16)&4294967295)<<15|de>>>17))*Xt+(((de>>>16)*Xt&65535)<<16)&4294967295)<<13|ct>>>19))+((5*(ct>>>16)&65535)<<16)&4294967295))+((58964+(Tt>>>16)&65535)<<16);switch(de=0,N){case 3:de^=(255&p.charCodeAt(De+2))<<16;case 2:de^=(255&p.charCodeAt(De+1))<<8;case 1:ct^=de=(65535&(de=(de=(65535&(de^=255&p.charCodeAt(De)))*Bt+(((de>>>16)*Bt&65535)<<16)&4294967295)<<15|de>>>17))*Xt+(((de>>>16)*Xt&65535)<<16)&4294967295}return ct^=p.length,ct=2246822507*(65535&(ct^=ct>>>16))+((2246822507*(ct>>>16)&65535)<<16)&4294967295,ct=3266489909*(65535&(ct^=ct>>>13))+((3266489909*(ct>>>16)&65535)<<16)&4294967295,(ct^=ct>>>16)>>>0}}),je=l(function(d){d.exports=function(p,C){for(var N,J=p.length,ct=C^J,Tt=0;J>=4;)N=1540483477*(65535&(N=255&p.charCodeAt(Tt)|(255&p.charCodeAt(++Tt))<<8|(255&p.charCodeAt(++Tt))<<16|(255&p.charCodeAt(++Tt))<<24))+((1540483477*(N>>>16)&65535)<<16),ct=1540483477*(65535&ct)+((1540483477*(ct>>>16)&65535)<<16)^(N=1540483477*(65535&(N^=N>>>24))+((1540483477*(N>>>16)&65535)<<16)),J-=4,++Tt;switch(J){case 3:ct^=(255&p.charCodeAt(Tt+2))<<16;case 2:ct^=(255&p.charCodeAt(Tt+1))<<8;case 1:ct=1540483477*(65535&(ct^=255&p.charCodeAt(Tt)))+((1540483477*(ct>>>16)&65535)<<16)}return ct=1540483477*(65535&(ct^=ct>>>13))+((1540483477*(ct>>>16)&65535)<<16),(ct^=ct>>>15)>>>0}}),Ie=ye,Ve=je;Ie.murmur3=ye,Ie.murmur2=Ve;var qe=function(){this.ids=[],this.positions=[],this.indexed=!1};qe.prototype.add=function(d,p,C,N){this.ids.push(tr(d)),this.positions.push(p,C,N)},qe.prototype.getPositions=function(d){for(var p=tr(d),C=0,N=this.ids.length-1;C<N;){var J=C+N>>1;this.ids[J]>=p?N=J:C=J+1}for(var ct=[];this.ids[C]===p;)ct.push({index:this.positions[3*C],start:this.positions[3*C+1],end:this.positions[3*C+2]}),C++;return ct},qe.serialize=function(d,p){var C=new Float64Array(d.ids),N=new Uint32Array(d.positions);return function J(ct,Tt,Bt,Xt){for(;Bt<Xt;){for(var de=ct[Bt+Xt>>1],De=Bt-1,Ge=Xt+1;;){do De++;while(ct[De]<de);do Ge--;while(ct[Ge]>de);if(De>=Ge)break;kn(ct,De,Ge),kn(Tt,3*De,3*Ge),kn(Tt,3*De+1,3*Ge+1),kn(Tt,3*De+2,3*Ge+2)}Ge-Bt<Xt-Ge?(J(ct,Tt,Bt,Ge),Bt=Ge+1):(J(ct,Tt,Ge+1,Xt),Xt=Ge)}}(C,N,0,C.length-1),p&&p.push(C.buffer,N.buffer),{ids:C,positions:N}},qe.deserialize=function(d){var p=new qe;return p.ids=d.ids,p.positions=d.positions,p.indexed=!0,p};var sn=Math.pow(2,53)-1;function tr(d){var p=+d;return!isNaN(p)&&p<=sn?p:Ie(String(d))}function kn(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}Wi("FeaturePositionMap",qe);var pr=function(p,C){this.gl=p.gl,this.location=C},Mr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))},p}(pr),$r=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1f(this.location,C))},p}(pr),Yr=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))},p}(pr),Ti=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))},p}(pr),Li=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]&&C[3]===this.current[3]||(this.current=C,this.gl.uniform4f(this.location,C[0],C[1],C[2],C[3]))},p}(pr),Ki=function(d){function p(C,N){d.call(this,C,N),this.current=zr.transparent}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C.r===this.current.r&&C.g===this.current.g&&C.b===this.current.b&&C.a===this.current.a||(this.current=C,this.gl.uniform4f(this.location,C.r,C.g,C.b,C.a))},p}(pr),Xi=new Float32Array(16),Oa=function(d){function p(C,N){d.call(this,C,N),this.current=Xi}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(var N=1;N<16;N++)if(C[N]!==this.current[N]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}},p}(pr);function Na(d){return[qt(255*d.r,255*d.g),qt(255*d.b,255*d.a)]}var ji=function(p,C,N){this.value=p,this.uniformNames=C.map(function(J){return"u_"+J}),this.type=N};ji.prototype.setUniform=function(d,p,C){d.set(C.constantOr(this.value))},ji.prototype.getBinding=function(d,p,C){return this.type==="color"?new Ki(d,p):new $r(d,p)};var Sa=function(p,C){this.uniformNames=C.map(function(N){return"u_"+N}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Sa.prototype.setConstantPatternPositions=function(d,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=d.tlbr},Sa.prototype.setUniform=function(d,p,C,N){var J=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;J&&d.set(J)},Sa.prototype.getBinding=function(d,p,C){return C.substr(0,9)==="u_pattern"?new Li(d,p):new $r(d,p)};var xa=function(p,C,N,J){this.expression=p,this.type=N,this.maxValue=0,this.paintVertexAttributes=C.map(function(ct){return{name:"a_"+ct,type:"Float32",components:N==="color"?2:1,offset:0}}),this.paintVertexArray=new J};xa.prototype.populatePaintArray=function(d,p,C,N,J){var ct=this.paintVertexArray.length,Tt=this.expression.evaluate(new yr(0),p,{},N,[],J);this.paintVertexArray.resize(d),this._setPaintValue(ct,d,Tt)},xa.prototype.updatePaintArray=function(d,p,C,N){var J=this.expression.evaluate({zoom:0},C,N);this._setPaintValue(d,p,J)},xa.prototype._setPaintValue=function(d,p,C){if(this.type==="color")for(var N=Na(C),J=d;J<p;J++)this.paintVertexArray.emplace(J,N[0],N[1]);else{for(var ct=d;ct<p;ct++)this.paintVertexArray.emplace(ct,C);this.maxValue=Math.max(this.maxValue,Math.abs(C))}},xa.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yi=function(p,C,N,J,ct,Tt){this.expression=p,this.uniformNames=C.map(function(Bt){return"u_"+Bt+"_t"}),this.type=N,this.useIntegerZoom=J,this.zoom=ct,this.maxValue=0,this.paintVertexAttributes=C.map(function(Bt){return{name:"a_"+Bt,type:"Float32",components:N==="color"?4:2,offset:0}}),this.paintVertexArray=new Tt};Yi.prototype.populatePaintArray=function(d,p,C,N,J){var ct=this.expression.evaluate(new yr(this.zoom),p,{},N,[],J),Tt=this.expression.evaluate(new yr(this.zoom+1),p,{},N,[],J),Bt=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(Bt,d,ct,Tt)},Yi.prototype.updatePaintArray=function(d,p,C,N){var J=this.expression.evaluate({zoom:this.zoom},C,N),ct=this.expression.evaluate({zoom:this.zoom+1},C,N);this._setPaintValue(d,p,J,ct)},Yi.prototype._setPaintValue=function(d,p,C,N){if(this.type==="color")for(var J=Na(C),ct=Na(N),Tt=d;Tt<p;Tt++)this.paintVertexArray.emplace(Tt,J[0],J[1],ct[0],ct[1]);else{for(var Bt=d;Bt<p;Bt++)this.paintVertexArray.emplace(Bt,C,N);this.maxValue=Math.max(this.maxValue,Math.abs(C),Math.abs(N))}},Yi.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.setUniform=function(d,p){var C=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,N=u(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);d.set(N)},Yi.prototype.getBinding=function(d,p,C){return new $r(d,p)};var _a=function(p,C,N,J,ct,Tt){this.expression=p,this.type=C,this.useIntegerZoom=N,this.zoom=J,this.layerId=Tt,this.zoomInPaintVertexArray=new ct,this.zoomOutPaintVertexArray=new ct};_a.prototype.populatePaintArray=function(d,p,C){var N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(N,d,p.patterns&&p.patterns[this.layerId],C)},_a.prototype.updatePaintArray=function(d,p,C,N,J){this._setPaintValues(d,p,C.patterns&&C.patterns[this.layerId],J)},_a.prototype._setPaintValues=function(d,p,C,N){if(N&&C){var J=N[C.min],ct=N[C.mid],Tt=N[C.max];if(J&&ct&&Tt)for(var Bt=d;Bt<p;Bt++)this.zoomInPaintVertexArray.emplace(Bt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],J.tl[0],J.tl[1],J.br[0],J.br[1],ct.pixelRatio,J.pixelRatio),this.zoomOutPaintVertexArray.emplace(Bt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Tt.tl[0],Tt.tl[1],Tt.br[0],Tt.br[1],ct.pixelRatio,Tt.pixelRatio)}},_a.prototype.upload=function(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,he.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,he.members,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var sa=function(p,C,N){this.binders={},this._buffers=[];var J=[];for(var ct in p.paint._values)if(N(ct)){var Tt=p.paint.get(ct);if(Tt instanceof se&&Ls(Tt.property.specification)){var Bt=Fa(ct,p.type),Xt=Tt.value,de=Tt.property.specification.type,De=Tt.property.useIntegerZoom,Ge=Tt.property.specification["property-type"],He=Ge==="cross-faded"||Ge==="cross-faded-data-driven";if(Xt.kind==="constant")this.binders[ct]=He?new Sa(Xt.value,Bt):new ji(Xt.value,Bt,de),J.push("/u_"+ct);else if(Xt.kind==="source"||He){var cn=_s(ct,de,"source");this.binders[ct]=He?new _a(Xt,de,De,C,cn,p.id):new xa(Xt,Bt,de,cn),J.push("/a_"+ct)}else{var Rn=_s(ct,de,"composite");this.binders[ct]=new Yi(Xt,Bt,de,De,C,Rn),J.push("/z_"+ct)}}}this.cacheKey=J.sort().join("")};sa.prototype.getMaxValue=function(d){var p=this.binders[d];return p instanceof xa||p instanceof Yi?p.maxValue:0},sa.prototype.populatePaintArrays=function(d,p,C,N,J){for(var ct in this.binders){var Tt=this.binders[ct];(Tt instanceof xa||Tt instanceof Yi||Tt instanceof _a)&&Tt.populatePaintArray(d,p,C,N,J)}},sa.prototype.setConstantPatternPositions=function(d,p){for(var C in this.binders){var N=this.binders[C];N instanceof Sa&&N.setConstantPatternPositions(d,p)}},sa.prototype.updatePaintArrays=function(d,p,C,N,J){var ct=!1;for(var Tt in d)for(var Bt=0,Xt=p.getPositions(Tt);Bt<Xt.length;Bt+=1){var de=Xt[Bt],De=C.feature(de.index);for(var Ge in this.binders){var He=this.binders[Ge];if((He instanceof xa||He instanceof Yi||He instanceof _a)&&He.expression.isStateDependent===!0){var cn=N.paint.get(Ge);He.expression=cn.value,He.updatePaintArray(de.start,de.end,De,d[Tt],J),ct=!0}}}return ct},sa.prototype.defines=function(){var d=[];for(var p in this.binders){var C=this.binders[p];(C instanceof ji||C instanceof Sa)&&d.push.apply(d,C.uniformNames.map(function(N){return"#define HAS_UNIFORM_"+N}))}return d},sa.prototype.getBinderAttributes=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof xa||C instanceof Yi)for(var N=0;N<C.paintVertexAttributes.length;N++)d.push(C.paintVertexAttributes[N].name);else if(C instanceof _a)for(var J=0;J<he.members.length;J++)d.push(he.members[J].name)}return d},sa.prototype.getBinderUniforms=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof ji||C instanceof Sa||C instanceof Yi)for(var N=0,J=C.uniformNames;N<J.length;N+=1)d.push(J[N])}return d},sa.prototype.getPaintVertexBuffers=function(){return this._buffers},sa.prototype.getUniforms=function(d,p){var C=[];for(var N in this.binders){var J=this.binders[N];if(J instanceof ji||J instanceof Sa||J instanceof Yi)for(var ct=0,Tt=J.uniformNames;ct<Tt.length;ct+=1){var Bt=Tt[ct];if(p[Bt]){var Xt=J.getBinding(d,p[Bt],Bt);C.push({name:Bt,property:N,binding:Xt})}}}return C},sa.prototype.setUniforms=function(d,p,C,N){for(var J=0,ct=p;J<ct.length;J+=1){var Tt=ct[J],Bt=Tt.name,Xt=Tt.property;this.binders[Xt].setUniform(Tt.binding,N,C.get(Xt),Bt)}},sa.prototype.updatePaintBuffers=function(d){for(var p in this._buffers=[],this.binders){var C=this.binders[p];if(d&&C instanceof _a){var N=d.fromScale===2?C.zoomInPaintVertexBuffer:C.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(C instanceof xa||C instanceof Yi)&&C.paintVertexBuffer&&this._buffers.push(C.paintVertexBuffer)}},sa.prototype.upload=function(d){for(var p in this.binders){var C=this.binders[p];(C instanceof xa||C instanceof Yi||C instanceof _a)&&C.upload(d)}this.updatePaintBuffers()},sa.prototype.destroy=function(){for(var d in this.binders){var p=this.binders[d];(p instanceof xa||p instanceof Yi||p instanceof _a)&&p.destroy()}};var Ia=function(p,C,N){N===void 0&&(N=function(){return!0}),this.programConfigurations={};for(var J=0,ct=p;J<ct.length;J+=1){var Tt=ct[J];this.programConfigurations[Tt.id]=new sa(Tt,C,N)}this.needsUpload=!1,this._featureMap=new qe,this._bufferOffset=0};function Fa(d,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(p+"-","").replace(/-/g,"_")]}function _s(d,p,C){var N={color:{source:ui,composite:hu},number:{source:Ra,composite:ui}},J=function(ct){return{"line-pattern":{source:_i,composite:_i},"fill-pattern":{source:_i,composite:_i},"fill-extrusion-pattern":{source:_i,composite:_i}}[ct]}(d);return J&&J[C]||N[p][C]}Ia.prototype.populatePaintArrays=function(d,p,C,N,J,ct){for(var Tt in this.programConfigurations)this.programConfigurations[Tt].populatePaintArrays(d,p,N,J,ct);p.id!==void 0&&this._featureMap.add(p.id,C,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0},Ia.prototype.updatePaintArrays=function(d,p,C,N){for(var J=0,ct=C;J<ct.length;J+=1){var Tt=ct[J];this.needsUpload=this.programConfigurations[Tt.id].updatePaintArrays(d,this._featureMap,p,Tt,N)||this.needsUpload}},Ia.prototype.get=function(d){return this.programConfigurations[d]},Ia.prototype.upload=function(d){if(this.needsUpload){for(var p in this.programConfigurations)this.programConfigurations[p].upload(d);this.needsUpload=!1}},Ia.prototype.destroy=function(){for(var d in this.programConfigurations)this.programConfigurations[d].destroy()},Wi("ConstantBinder",ji),Wi("CrossFadedConstantBinder",Sa),Wi("SourceExpressionBinder",xa),Wi("CrossFadedCompositeBinder",_a),Wi("CompositeExpressionBinder",Yi),Wi("ProgramConfiguration",sa,{omit:["_buffers"]}),Wi("ProgramConfigurationSet",Ia);var us=Math.pow(2,14)-1,Os=-us-1;function es(d){for(var p=8192/d.extent,C=d.loadGeometry(),N=0;N<C.length;N++)for(var J=C[N],ct=0;ct<J.length;ct++){var Tt=J[ct],Bt=Math.round(Tt.x*p),Xt=Math.round(Tt.y*p);Tt.x=u(Bt,Os,us),Tt.y=u(Xt,Os,us),(Bt<Tt.x||Bt>Tt.x+1||Xt<Tt.y||Xt>Tt.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return C}function js(d,p){return{type:d.type,id:d.id,properties:d.properties,geometry:p?es(d):[]}}function ml(d,p,C,N,J){d.emplaceBack(2*p+(N+1)/2,2*C+(J+1)/2)}var yu=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new xr,this.indexArray=new Va,this.segments=new Yt,this.programConfigurations=new Ia(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function Fl(d,p){for(var C=0;C<d.length;C++)if(Lc(p,d[C]))return!0;for(var N=0;N<p.length;N++)if(Lc(d,p[N]))return!0;return!!Nc(d,p)}function xc(d,p,C){return!!Lc(d,p)||!!Tc(p,d,C)}function zl(d,p){if(d.length===1)return Yc(p,d[0]);for(var C=0;C<p.length;C++)for(var N=p[C],J=0;J<N.length;J++)if(Lc(d,N[J]))return!0;for(var ct=0;ct<d.length;ct++)if(Yc(p,d[ct]))return!0;for(var Tt=0;Tt<p.length;Tt++)if(Nc(d,p[Tt]))return!0;return!1}function Al(d,p,C){if(d.length>1){if(Nc(d,p))return!0;for(var N=0;N<p.length;N++)if(Tc(p[N],d,C))return!0}for(var J=0;J<d.length;J++)if(Tc(d[J],p,C))return!0;return!1}function Nc(d,p){if(d.length===0||p.length===0)return!1;for(var C=0;C<d.length-1;C++)for(var N=d[C],J=d[C+1],ct=0;ct<p.length-1;ct++)if(Hc(N,J,p[ct],p[ct+1]))return!0;return!1}function Hc(d,p,C,N){return L(d,C,N)!==L(p,C,N)&&L(d,p,C)!==L(d,p,N)}function Tc(d,p,C){var N=C*C;if(p.length===1)return d.distSqr(p[0])<N;for(var J=1;J<p.length;J++)if(kc(d,p[J-1],p[J])<N)return!0;return!1}function kc(d,p,C){var N=p.distSqr(C);if(N===0)return d.distSqr(p);var J=((d.x-p.x)*(C.x-p.x)+(d.y-p.y)*(C.y-p.y))/N;return d.distSqr(J<0?p:J>1?C:C.sub(p)._mult(J)._add(p))}function Yc(d,p){for(var C,N,J,ct=!1,Tt=0;Tt<d.length;Tt++)for(var Bt=0,Xt=(C=d[Tt]).length-1;Bt<C.length;Xt=Bt++)(N=C[Bt]).y>p.y!=(J=C[Xt]).y>p.y&&p.x<(J.x-N.x)*(p.y-N.y)/(J.y-N.y)+N.x&&(ct=!ct);return ct}function Lc(d,p){for(var C=!1,N=0,J=d.length-1;N<d.length;J=N++){var ct=d[N],Tt=d[J];ct.y>p.y!=Tt.y>p.y&&p.x<(Tt.x-ct.x)*(p.y-ct.y)/(Tt.y-ct.y)+ct.x&&(C=!C)}return C}function Zc(d,p,C){var N=C[0],J=C[2];if(d.x<N.x&&p.x<N.x||d.x>J.x&&p.x>J.x||d.y<N.y&&p.y<N.y||d.y>J.y&&p.y>J.y)return!1;var ct=L(d,p,C[0]);return ct!==L(d,p,C[1])||ct!==L(d,p,C[2])||ct!==L(d,p,C[3])}function bc(d,p,C){var N=p.paint.get(d).value;return N.kind==="constant"?N.value:C.programConfigurations.get(p.id).getMaxValue(d)}function Au(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Ec(d,p,C,N,J){if(!p[0]&&!p[1])return d;var ct=r.convert(p)._mult(J);C==="viewport"&&ct._rotate(-N);for(var Tt=[],Bt=0;Bt<d.length;Bt++)Tt.push(d[Bt].sub(ct));return Tt}yu.prototype.populate=function(d,p,C){var N=this.layers[0],J=[],ct=null;N.type==="circle"&&(ct=N.layout.get("circle-sort-key"));for(var Tt=0,Bt=d;Tt<Bt.length;Tt+=1){var Xt=Bt[Tt],de=Xt.feature,De=Xt.id,Ge=Xt.index,He=Xt.sourceLayerIndex,cn=this.layers[0]._featureFilter.needGeometry,Rn=js(de,cn);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),Rn,C)){var On=ct?ct.evaluate(Rn,{},C):void 0,$n={id:De,properties:de.properties,type:de.type,sourceLayerIndex:He,index:Ge,geometry:cn?Rn.geometry:es(de),patterns:{},sortKey:On};J.push($n)}}ct&&J.sort(function(zi,ia){return zi.sortKey-ia.sortKey});for(var Qn=0,Sr=J;Qn<Sr.length;Qn+=1){var Nr=Sr[Qn],Wr=Nr.geometry,pi=Nr.index,ai=Nr.sourceLayerIndex,Bi=d[pi].feature;this.addFeature(Nr,Wr,pi,C),p.featureIndex.insert(Bi,Wr,pi,ai,this.index)}},yu.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},yu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yu.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yu.prototype.addFeature=function(d,p,C,N){for(var J=0,ct=p;J<ct.length;J+=1)for(var Tt=0,Bt=ct[J];Tt<Bt.length;Tt+=1){var Xt=Bt[Tt],de=Xt.x,De=Xt.y;if(!(de<0||de>=8192||De<0||De>=8192)){var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),He=Ge.vertexLength;ml(this.layoutVertexArray,de,De,-1,-1),ml(this.layoutVertexArray,de,De,1,-1),ml(this.layoutVertexArray,de,De,1,1),ml(this.layoutVertexArray,de,De,-1,1),this.indexArray.emplaceBack(He,He+1,He+2),this.indexArray.emplaceBack(He,He+3,He+2),Ge.vertexLength+=4,Ge.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,{},N)},Wi("CircleBucket",yu,{omit:["layers"]});var Kc=new pn({"circle-sort-key":new Fe(ue.layout_circle["circle-sort-key"])}),Hl={paint:new pn({"circle-radius":new Fe(ue.paint_circle["circle-radius"]),"circle-color":new Fe(ue.paint_circle["circle-color"]),"circle-blur":new Fe(ue.paint_circle["circle-blur"]),"circle-opacity":new Fe(ue.paint_circle["circle-opacity"]),"circle-translate":new fe(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new fe(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fe(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fe(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fe(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fe(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fe(ue.paint_circle["circle-stroke-opacity"])}),layout:Kc},al=typeof Float32Array!="undefined"?Float32Array:Array;function Cl(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function ws(d,p,C){var N=p[0],J=p[1],ct=p[2],Tt=p[3],Bt=p[4],Xt=p[5],de=p[6],De=p[7],Ge=p[8],He=p[9],cn=p[10],Rn=p[11],On=p[12],$n=p[13],Qn=p[14],Sr=p[15],Nr=C[0],Wr=C[1],pi=C[2],ai=C[3];return d[0]=Nr*N+Wr*Bt+pi*Ge+ai*On,d[1]=Nr*J+Wr*Xt+pi*He+ai*$n,d[2]=Nr*ct+Wr*de+pi*cn+ai*Qn,d[3]=Nr*Tt+Wr*De+pi*Rn+ai*Sr,d[4]=(Nr=C[4])*N+(Wr=C[5])*Bt+(pi=C[6])*Ge+(ai=C[7])*On,d[5]=Nr*J+Wr*Xt+pi*He+ai*$n,d[6]=Nr*ct+Wr*de+pi*cn+ai*Qn,d[7]=Nr*Tt+Wr*De+pi*Rn+ai*Sr,d[8]=(Nr=C[8])*N+(Wr=C[9])*Bt+(pi=C[10])*Ge+(ai=C[11])*On,d[9]=Nr*J+Wr*Xt+pi*He+ai*$n,d[10]=Nr*ct+Wr*de+pi*cn+ai*Qn,d[11]=Nr*Tt+Wr*De+pi*Rn+ai*Sr,d[12]=(Nr=C[12])*N+(Wr=C[13])*Bt+(pi=C[14])*Ge+(ai=C[15])*On,d[13]=Nr*J+Wr*Xt+pi*He+ai*$n,d[14]=Nr*ct+Wr*de+pi*cn+ai*Qn,d[15]=Nr*Tt+Wr*De+pi*Rn+ai*Sr,d}Math.hypot||(Math.hypot=function(){for(var d=arguments,p=0,C=arguments.length;C--;)p+=d[C]*d[C];return Math.sqrt(p)});var cu,Is=ws;function Yl(d,p,C){var N=p[0],J=p[1],ct=p[2],Tt=p[3];return d[0]=C[0]*N+C[4]*J+C[8]*ct+C[12]*Tt,d[1]=C[1]*N+C[5]*J+C[9]*ct+C[13]*Tt,d[2]=C[2]*N+C[6]*J+C[10]*ct+C[14]*Tt,d[3]=C[3]*N+C[7]*J+C[11]*ct+C[15]*Tt,d}cu=new al(3),al!=Float32Array&&(cu[0]=0,cu[1]=0,cu[2]=0),function(){var d=new al(4);al!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0)}();var Rc=(function(){var d=new al(2);al!=Float32Array&&(d[0]=0,d[1]=0)}(),function(d){function p(C){d.call(this,C,Hl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new yu(C)},p.prototype.queryRadius=function(C){var N=C;return bc("circle-radius",this,N)+bc("circle-stroke-width",this,N)+Au(this.paint.get("circle-translate"))},p.prototype.queryIntersectsFeature=function(C,N,J,ct,Tt,Bt,Xt,de){for(var De=Ec(C,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Bt.angle,Xt),Ge=this.paint.get("circle-radius").evaluate(N,J)+this.paint.get("circle-stroke-width").evaluate(N,J),He=this.paint.get("circle-pitch-alignment")==="map",cn=He?De:function(Bi,zi){return Bi.map(function(ia){return Dc(ia,zi)})}(De,de),Rn=He?Ge*Xt:Ge,On=0,$n=ct;On<$n.length;On+=1)for(var Qn=0,Sr=$n[On];Qn<Sr.length;Qn+=1){var Nr=Sr[Qn],Wr=He?Nr:Dc(Nr,de),pi=Rn,ai=Yl([],[Nr.x,Nr.y,0,1],de);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pi*=ai[3]/Bt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pi*=Bt.cameraToCenterDistance/ai[3]),xc(cn,Wr,pi))return!0}return!1},p}(hn));function Dc(d,p){var C=Yl([],[d.x,d.y,0,1],p);return new r(C[0]/C[3],C[1]/C[3])}var of=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(yu);function Ac(d,p,C,N){var J=p.width,ct=p.height;if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==J*ct*C)throw new RangeError("mismatched image size")}else N=new Uint8Array(J*ct*C);return d.width=J,d.height=ct,d.data=N,d}function tf(d,p,C){var N=p.width,J=p.height;if(N!==d.width||J!==d.height){var ct=Ac({},{width:N,height:J},C);jc(d,ct,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,N),height:Math.min(d.height,J)},C),d.width=N,d.height=J,d.data=ct.data}}function jc(d,p,C,N,J,ct){if(J.width===0||J.height===0)return p;if(J.width>d.width||J.height>d.height||C.x>d.width-J.width||C.y>d.height-J.height)throw new RangeError("out of range source coordinates for image copy");if(J.width>p.width||J.height>p.height||N.x>p.width-J.width||N.y>p.height-J.height)throw new RangeError("out of range destination coordinates for image copy");for(var Tt=d.data,Bt=p.data,Xt=0;Xt<J.height;Xt++)for(var de=((C.y+Xt)*d.width+C.x)*ct,De=((N.y+Xt)*p.width+N.x)*ct,Ge=0;Ge<J.width*ct;Ge++)Bt[De+Ge]=Tt[de+Ge];return p}Wi("HeatmapBucket",of,{omit:["layers"]});var Ul=function(p,C){Ac(this,p,1,C)};Ul.prototype.resize=function(d){tf(this,d,1)},Ul.prototype.clone=function(){return new Ul({width:this.width,height:this.height},new Uint8Array(this.data))},Ul.copy=function(d,p,C,N,J){jc(d,p,C,N,J,1)};var Nu=function(p,C){Ac(this,p,4,C)};Nu.prototype.resize=function(d){tf(this,d,4)},Nu.prototype.replace=function(d,p){p?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d},Nu.prototype.clone=function(){return new Nu({width:this.width,height:this.height},new Uint8Array(this.data))},Nu.copy=function(d,p,C,N,J){jc(d,p,C,N,J,4)},Wi("AlphaImage",Ul),Wi("RGBAImage",Nu);var Cc={paint:new pn({"heatmap-radius":new Fe(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fe(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fe(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Je(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fe(ue.paint_heatmap["heatmap-opacity"])})};function Tf(d){var p={},C=d.resolution||256,N=d.clips?d.clips.length:1,J=d.image||new Nu({width:C,height:N}),ct=function(On,$n,Qn){p[d.evaluationKey]=Qn;var Sr=d.expression.evaluate(p);J.data[On+$n+0]=Math.floor(255*Sr.r/Sr.a),J.data[On+$n+1]=Math.floor(255*Sr.g/Sr.a),J.data[On+$n+2]=Math.floor(255*Sr.b/Sr.a),J.data[On+$n+3]=Math.floor(255*Sr.a)};if(d.clips)for(var Tt=0,Bt=0;Tt<N;++Tt,Bt+=4*C)for(var Xt=0,de=0;Xt<C;Xt++,de+=4){var De=Xt/(C-1),Ge=d.clips[Tt];ct(Bt,de,Ge.start*(1-De)+Ge.end*De)}else for(var He=0,cn=0;He<C;He++,cn+=4)ct(0,cn,He/(C-1));return J}var Zf=function(d){function p(C){d.call(this,C,Cc),this._updateColorRamp()}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new of(C)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="heatmap-color"&&this._updateColorRamp()},p.prototype._updateColorRamp=function(){this.colorRamp=Tf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},p.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},p}(hn),oh={paint:new pn({"hillshade-illumination-direction":new fe(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fe(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fe(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fe(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fe(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fe(ue.paint_hillshade["hillshade-accent-color"])})},Kf=function(d){function p(C){d.call(this,C,oh)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},p}(hn),sh=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,Gc=Fc,Af=Fc;function Fc(d,p,C){C=C||2;var N,J,ct,Tt,Bt,Xt,de,De=p&&p.length,Ge=De?p[0]*C:d.length,He=Cf(d,0,Ge,C,!0),cn=[];if(!He||He.next===He.prev)return cn;if(De&&(He=function(On,$n,Qn,Sr){var Nr,Wr,pi,ai=[];for(Nr=0,Wr=$n.length;Nr<Wr;Nr++)(pi=Cf(On,$n[Nr]*Sr,Nr<Wr-1?$n[Nr+1]*Sr:On.length,Sr,!1))===pi.next&&(pi.steiner=!0),ai.push(uh(pi));for(ai.sort(Xf),Nr=0;Nr<ai.length;Nr++)Jf(ai[Nr],Qn),Qn=vc(Qn,Qn.next);return Qn}(d,p,He,C)),d.length>80*C){N=ct=d[0],J=Tt=d[1];for(var Rn=C;Rn<Ge;Rn+=C)(Bt=d[Rn])<N&&(N=Bt),(Xt=d[Rn+1])<J&&(J=Xt),Bt>ct&&(ct=Bt),Xt>Tt&&(Tt=Xt);de=(de=Math.max(ct-N,Tt-J))!==0?1/de:0}return ef(He,cn,C,N,J,de),cn}function Cf(d,p,C,N,J){var ct,Tt;if(J===zc(d,p,C,N)>0)for(ct=p;ct<C;ct+=N)Tt=Wc(ct,d[ct],d[ct+1],Tt);else for(ct=C-N;ct>=p;ct-=N)Tt=Wc(ct,d[ct],d[ct+1],Tt);return Tt&&Vc(Tt,Tt.next)&&(rf(Tt),Tt=Tt.next),Tt}function vc(d,p){if(!d)return d;p||(p=d);var C,N=d;do if(C=!1,N.steiner||!Vc(N,N.next)&&xu(N.prev,N,N.next)!==0)N=N.next;else{if(rf(N),(N=p=N.prev)===N.next)break;C=!0}while(C||N!==p);return p}function ef(d,p,C,N,J,ct,Tt){if(d){!Tt&&ct&&function(De,Ge,He,cn){var Rn=De;do Rn.z===null&&(Rn.z=Of(Rn.x,Rn.y,Ge,He,cn)),Rn.prevZ=Rn.prev,Rn.nextZ=Rn.next,Rn=Rn.next;while(Rn!==De);Rn.prevZ.nextZ=null,Rn.prevZ=null,function(On){var $n,Qn,Sr,Nr,Wr,pi,ai,Bi,zi=1;do{for(Qn=On,On=null,Wr=null,pi=0;Qn;){for(pi++,Sr=Qn,ai=0,$n=0;$n<zi&&(ai++,Sr=Sr.nextZ);$n++);for(Bi=zi;ai>0||Bi>0&&Sr;)ai!==0&&(Bi===0||!Sr||Qn.z<=Sr.z)?(Nr=Qn,Qn=Qn.nextZ,ai--):(Nr=Sr,Sr=Sr.nextZ,Bi--),Wr?Wr.nextZ=Nr:On=Nr,Nr.prevZ=Wr,Wr=Nr;Qn=Sr}Wr.nextZ=null,zi*=2}while(pi>1)}(Rn)}(d,N,J,ct);for(var Bt,Xt,de=d;d.prev!==d.next;)if(Bt=d.prev,Xt=d.next,ct?jf(d,N,J,ct):Df(d))p.push(Bt.i/C),p.push(d.i/C),p.push(Xt.i/C),rf(d),d=Xt.next,de=Xt.next;else if((d=Xt)===de){Tt?Tt===1?ef(d=sf(vc(d),p,C),p,C,N,J,ct,2):Tt===2&&Bf(d,p,C,N,J,ct):ef(vc(d),p,C,N,J,ct,1);break}}}function Df(d){var p=d.prev,C=d,N=d.next;if(xu(p,C,N)>=0)return!1;for(var J=d.next.next;J!==d.prev;){if(nf(p.x,p.y,C.x,C.y,N.x,N.y,J.x,J.y)&&xu(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function jf(d,p,C,N){var J=d.prev,ct=d,Tt=d.next;if(xu(J,ct,Tt)>=0)return!1;for(var Bt=J.x>ct.x?J.x>Tt.x?J.x:Tt.x:ct.x>Tt.x?ct.x:Tt.x,Xt=J.y>ct.y?J.y>Tt.y?J.y:Tt.y:ct.y>Tt.y?ct.y:Tt.y,de=Of(J.x<ct.x?J.x<Tt.x?J.x:Tt.x:ct.x<Tt.x?ct.x:Tt.x,J.y<ct.y?J.y<Tt.y?J.y:Tt.y:ct.y<Tt.y?ct.y:Tt.y,p,C,N),De=Of(Bt,Xt,p,C,N),Ge=d.prevZ,He=d.nextZ;Ge&&Ge.z>=de&&He&&He.z<=De;){if(Ge!==d.prev&&Ge!==d.next&&nf(J.x,J.y,ct.x,ct.y,Tt.x,Tt.y,Ge.x,Ge.y)&&xu(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,He!==d.prev&&He!==d.next&&nf(J.x,J.y,ct.x,ct.y,Tt.x,Tt.y,He.x,He.y)&&xu(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ge&&Ge.z>=de;){if(Ge!==d.prev&&Ge!==d.next&&nf(J.x,J.y,ct.x,ct.y,Tt.x,Tt.y,Ge.x,Ge.y)&&xu(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;He&&He.z<=De;){if(He!==d.prev&&He!==d.next&&nf(J.x,J.y,ct.x,ct.y,Tt.x,Tt.y,He.x,He.y)&&xu(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function sf(d,p,C){var N=d;do{var J=N.prev,ct=N.next.next;!Vc(J,ct)&&uf(J,N,N.next,ct)&&pc(J,ct)&&pc(ct,J)&&(p.push(J.i/C),p.push(N.i/C),p.push(ct.i/C),rf(N),rf(N.next),N=d=ct),N=N.next}while(N!==d);return vc(N)}function Bf(d,p,C,N,J,ct){var Tt=d;do{for(var Bt=Tt.next.next;Bt!==Tt.prev;){if(Tt.i!==Bt.i&&gf(Tt,Bt)){var Xt=mf(Tt,Bt);return Tt=vc(Tt,Tt.next),Xt=vc(Xt,Xt.next),ef(Tt,p,C,N,J,ct),void ef(Xt,p,C,N,J,ct)}Bt=Bt.next}Tt=Tt.next}while(Tt!==d)}function Xf(d,p){return d.x-p.x}function Jf(d,p){if(p=function(N,J){var ct,Tt=J,Bt=N.x,Xt=N.y,de=-1/0;do{if(Xt<=Tt.y&&Xt>=Tt.next.y&&Tt.next.y!==Tt.y){var De=Tt.x+(Xt-Tt.y)*(Tt.next.x-Tt.x)/(Tt.next.y-Tt.y);if(De<=Bt&&De>de){if(de=De,De===Bt){if(Xt===Tt.y)return Tt;if(Xt===Tt.next.y)return Tt.next}ct=Tt.x<Tt.next.x?Tt:Tt.next}}Tt=Tt.next}while(Tt!==J);if(!ct)return null;if(Bt===de)return ct;var Ge,He=ct,cn=ct.x,Rn=ct.y,On=1/0;Tt=ct;do Bt>=Tt.x&&Tt.x>=cn&&Bt!==Tt.x&&nf(Xt<Rn?Bt:de,Xt,cn,Rn,Xt<Rn?de:Bt,Xt,Tt.x,Tt.y)&&(Ge=Math.abs(Xt-Tt.y)/(Bt-Tt.x),pc(Tt,N)&&(Ge<On||Ge===On&&(Tt.x>ct.x||Tt.x===ct.x&&pf(ct,Tt)))&&(ct=Tt,On=Ge)),Tt=Tt.next;while(Tt!==He);return ct}(d,p)){var C=mf(p,d);vc(p,p.next),vc(C,C.next)}}function pf(d,p){return xu(d.prev,d,p.prev)<0&&xu(p.next,d,d.next)<0}function Of(d,p,C,N,J){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-C)*J)|d<<8))|d<<4))|d<<2))|d<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-N)*J)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function uh(d){var p=d,C=d;do(p.x<C.x||p.x===C.x&&p.y<C.y)&&(C=p),p=p.next;while(p!==d);return C}function nf(d,p,C,N,J,ct,Tt,Bt){return(J-Tt)*(p-Bt)-(d-Tt)*(ct-Bt)>=0&&(d-Tt)*(N-Bt)-(C-Tt)*(p-Bt)>=0&&(C-Tt)*(ct-Bt)-(J-Tt)*(N-Bt)>=0}function gf(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!function(C,N){var J=C;do{if(J.i!==C.i&&J.next.i!==C.i&&J.i!==N.i&&J.next.i!==N.i&&uf(J,J.next,C,N))return!0;J=J.next}while(J!==C);return!1}(d,p)&&(pc(d,p)&&pc(p,d)&&function(C,N){var J=C,ct=!1,Tt=(C.x+N.x)/2,Bt=(C.y+N.y)/2;do J.y>Bt!=J.next.y>Bt&&J.next.y!==J.y&&Tt<(J.next.x-J.x)*(Bt-J.y)/(J.next.y-J.y)+J.x&&(ct=!ct),J=J.next;while(J!==C);return ct}(d,p)&&(xu(d.prev,d,p.prev)||xu(d,p.prev,p))||Vc(d,p)&&xu(d.prev,d,d.next)>0&&xu(p.prev,p,p.next)>0)}function xu(d,p,C){return(p.y-d.y)*(C.x-p.x)-(p.x-d.x)*(C.y-p.y)}function Vc(d,p){return d.x===p.x&&d.y===p.y}function uf(d,p,C,N){var J=Oc(xu(d,p,C)),ct=Oc(xu(d,p,N)),Tt=Oc(xu(C,N,d)),Bt=Oc(xu(C,N,p));return J!==ct&&Tt!==Bt||!(J!==0||!lf(d,C,p))||!(ct!==0||!lf(d,N,p))||!(Tt!==0||!lf(C,d,N))||!(Bt!==0||!lf(C,p,N))}function lf(d,p,C){return p.x<=Math.max(d.x,C.x)&&p.x>=Math.min(d.x,C.x)&&p.y<=Math.max(d.y,C.y)&&p.y>=Math.min(d.y,C.y)}function Oc(d){return d>0?1:d<0?-1:0}function pc(d,p){return xu(d.prev,d,d.next)<0?xu(d,p,d.next)>=0&&xu(d,d.prev,p)>=0:xu(d,p,d.prev)<0||xu(d,d.next,p)<0}function mf(d,p){var C=new yf(d.i,d.x,d.y),N=new yf(p.i,p.x,p.y),J=d.next,ct=p.prev;return d.next=p,p.prev=d,C.next=J,J.prev=C,N.next=C,C.prev=N,ct.next=N,N.prev=ct,N}function Wc(d,p,C,N){var J=new yf(d,p,C);return N?(J.next=N.next,J.prev=N,N.next.prev=J,N.next=J):(J.prev=J,J.next=J),J}function rf(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function yf(d,p,C){this.i=d,this.x=p,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zc(d,p,C,N){for(var J=0,ct=p,Tt=C-N;ct<C;ct+=N)J+=(d[Tt]-d[ct])*(d[ct+1]+d[Tt+1]),Tt=ct;return J}function xf(d,p,C,N,J){(function ct(Tt,Bt,Xt,de,De){for(;de>Xt;){if(de-Xt>600){var Ge=de-Xt+1,He=Bt-Xt+1,cn=Math.log(Ge),Rn=.5*Math.exp(2*cn/3),On=.5*Math.sqrt(cn*Rn*(Ge-Rn)/Ge)*(He-Ge/2<0?-1:1);ct(Tt,Bt,Math.max(Xt,Math.floor(Bt-He*Rn/Ge+On)),Math.min(de,Math.floor(Bt+(Ge-He)*Rn/Ge+On)),De)}var $n=Tt[Bt],Qn=Xt,Sr=de;for(ve(Tt,Xt,Bt),De(Tt[de],$n)>0&&ve(Tt,Xt,de);Qn<Sr;){for(ve(Tt,Qn,Sr),Qn++,Sr--;De(Tt[Qn],$n)<0;)Qn++;for(;De(Tt[Sr],$n)>0;)Sr--}De(Tt[Xt],$n)===0?ve(Tt,Xt,Sr):ve(Tt,++Sr,de),Sr<=Bt&&(Xt=Sr+1),Bt<=Sr&&(de=Sr-1)}})(d,p,C||0,N||d.length-1,J||ge)}function ve(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}function ge(d,p){return d<p?-1:d>p?1:0}function Gt(d,p){var C=d.length;if(C<=1)return[d];for(var N,J,ct=[],Tt=0;Tt<C;Tt++){var Bt=W(d[Tt]);Bt!==0&&(d[Tt].area=Math.abs(Bt),J===void 0&&(J=Bt<0),J===Bt<0?(N&&ct.push(N),N=[d[Tt]]):N.push(d[Tt]))}if(N&&ct.push(N),p>1)for(var Xt=0;Xt<ct.length;Xt++)ct[Xt].length<=p||(xf(ct[Xt],p,1,ct[Xt].length-1,Kt),ct[Xt]=ct[Xt].slice(0,p));return ct}function Kt(d,p){return p.area-d.area}function Ue(d,p,C){for(var N=C.patternDependencies,J=!1,ct=0,Tt=p;ct<Tt.length;ct+=1){var Bt=Tt[ct].paint.get(d+"-pattern");Bt.isConstant()||(J=!0);var Xt=Bt.constantOr(null);Xt&&(J=!0,N[Xt.to]=!0,N[Xt.from]=!0)}return J}function un(d,p,C,N,J){for(var ct=J.patternDependencies,Tt=0,Bt=p;Tt<Bt.length;Tt+=1){var Xt=Bt[Tt],de=Xt.paint.get(d+"-pattern").value;if(de.kind!=="constant"){var De=de.evaluate({zoom:N-1},C,{},J.availableImages),Ge=de.evaluate({zoom:N},C,{},J.availableImages),He=de.evaluate({zoom:N+1},C,{},J.availableImages);Ge=Ge&&Ge.name?Ge.name:Ge,He=He&&He.name?He.name:He,ct[De=De&&De.name?De.name:De]=!0,ct[Ge]=!0,ct[He]=!0,C.patterns[Xt.id]={min:De,mid:Ge,max:He}}}return C}Fc.deviation=function(d,p,C,N){var J=p&&p.length,ct=Math.abs(zc(d,0,J?p[0]*C:d.length,C));if(J)for(var Tt=0,Bt=p.length;Tt<Bt;Tt++)ct-=Math.abs(zc(d,p[Tt]*C,Tt<Bt-1?p[Tt+1]*C:d.length,C));var Xt=0;for(Tt=0;Tt<N.length;Tt+=3){var de=N[Tt]*C,De=N[Tt+1]*C,Ge=N[Tt+2]*C;Xt+=Math.abs((d[de]-d[Ge])*(d[De+1]-d[de+1])-(d[de]-d[De])*(d[Ge+1]-d[de+1]))}return ct===0&&Xt===0?0:Math.abs((Xt-ct)/ct)},Fc.flatten=function(d){for(var p=d[0][0].length,C={vertices:[],holes:[],dimensions:p},N=0,J=0;J<d.length;J++){for(var ct=0;ct<d[J].length;ct++)for(var Tt=0;Tt<p;Tt++)C.vertices.push(d[J][ct][Tt]);J>0&&C.holes.push(N+=d[J-1].length)}return C},Gc.default=Af;var Gn=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xr,this.indexArray=new Va,this.indexArray2=new Ds,this.programConfigurations=new Ia(p.layers,p.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};Gn.prototype.populate=function(d,p,C){this.hasPattern=Ue("fill",this.layers,p);for(var N=this.layers[0].layout.get("fill-sort-key"),J=[],ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct],Xt=Bt.feature,de=Bt.id,De=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,cn=js(Xt,He);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),cn,C)){var Rn=N?N.evaluate(cn,{},C,p.availableImages):void 0,On={id:de,properties:Xt.properties,type:Xt.type,sourceLayerIndex:Ge,index:De,geometry:He?cn.geometry:es(Xt),patterns:{},sortKey:Rn};J.push(On)}}N&&J.sort(function(Bi,zi){return Bi.sortKey-zi.sortKey});for(var $n=0,Qn=J;$n<Qn.length;$n+=1){var Sr=Qn[$n],Nr=Sr.geometry,Wr=Sr.index,pi=Sr.sourceLayerIndex;if(this.hasPattern){var ai=un("fill",this.layers,Sr,this.zoom,p);this.patternFeatures.push(ai)}else this.addFeature(Sr,Nr,Wr,C,{});p.featureIndex.insert(d[Wr].feature,Nr,Wr,pi,this.index)}},Gn.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Gn.prototype.addFeatures=function(d,p,C){for(var N=0,J=this.patternFeatures;N<J.length;N+=1){var ct=J[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},Gn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gn.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,sh),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0},Gn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Gn.prototype.addFeature=function(d,p,C,N,J){for(var ct=0,Tt=Gt(p,500);ct<Tt.length;ct+=1){for(var Bt=Tt[ct],Xt=0,de=0,De=Bt;de<De.length;de+=1)Xt+=De[de].length;for(var Ge=this.segments.prepareSegment(Xt,this.layoutVertexArray,this.indexArray),He=Ge.vertexLength,cn=[],Rn=[],On=0,$n=Bt;On<$n.length;On+=1){var Qn=$n[On];if(Qn.length!==0){Qn!==Bt[0]&&Rn.push(cn.length/2);var Sr=this.segments2.prepareSegment(Qn.length,this.layoutVertexArray,this.indexArray2),Nr=Sr.vertexLength;this.layoutVertexArray.emplaceBack(Qn[0].x,Qn[0].y),this.indexArray2.emplaceBack(Nr+Qn.length-1,Nr),cn.push(Qn[0].x),cn.push(Qn[0].y);for(var Wr=1;Wr<Qn.length;Wr++)this.layoutVertexArray.emplaceBack(Qn[Wr].x,Qn[Wr].y),this.indexArray2.emplaceBack(Nr+Wr-1,Nr+Wr),cn.push(Qn[Wr].x),cn.push(Qn[Wr].y);Sr.vertexLength+=Qn.length,Sr.primitiveLength+=Qn.length}}for(var pi=Gc(cn,Rn),ai=0;ai<pi.length;ai+=3)this.indexArray.emplaceBack(He+pi[ai],He+pi[ai+1],He+pi[ai+2]);Ge.vertexLength+=Xt,Ge.primitiveLength+=pi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,N)},Wi("FillBucket",Gn,{omit:["layers","patternFeatures"]});var mr=new pn({"fill-sort-key":new Fe(ue.layout_fill["fill-sort-key"])}),gr={paint:new pn({"fill-antialias":new fe(ue.paint_fill["fill-antialias"]),"fill-opacity":new Fe(ue.paint_fill["fill-opacity"]),"fill-color":new Fe(ue.paint_fill["fill-color"]),"fill-outline-color":new Fe(ue.paint_fill["fill-outline-color"]),"fill-translate":new fe(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new fe(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ke(ue.paint_fill["fill-pattern"])}),layout:mr},Qr=function(d){function p(C){d.call(this,C,gr)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N);var J=this.paint._values["fill-outline-color"];J.value.kind==="constant"&&J.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},p.prototype.createBucket=function(C){return new Gn(C)},p.prototype.queryRadius=function(){return Au(this.paint.get("fill-translate"))},p.prototype.queryIntersectsFeature=function(C,N,J,ct,Tt,Bt,Xt){return zl(Ec(C,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Bt.angle,Xt),ct)},p.prototype.isTileClipped=function(){return!0},p}(hn),xi=Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ji=fa;function fa(d,p,C,N,J){this.properties={},this.extent=C,this.type=0,this._pbf=d,this._geometry=-1,this._keys=N,this._values=J,d.readFields(ba,this,p)}function ba(d,p,C){d==1?p.id=C.readVarint():d==2?function(N,J){for(var ct=N.readVarint()+N.pos;N.pos<ct;){var Tt=J._keys[N.readVarint()],Bt=J._values[N.readVarint()];J.properties[Tt]=Bt}}(C,p):d==3?p.type=C.readVarint():d==4&&(p._geometry=C.pos)}function oo(d){for(var p,C,N=0,J=0,ct=d.length,Tt=ct-1;J<ct;Tt=J++)N+=((C=d[Tt]).x-(p=d[J]).x)*(p.y+C.y);return N}fa.types=["Unknown","Point","LineString","Polygon"],fa.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var p,C=d.readVarint()+d.pos,N=1,J=0,ct=0,Tt=0,Bt=[];d.pos<C;){if(J<=0){var Xt=d.readVarint();N=7&Xt,J=Xt>>3}if(J--,N===1||N===2)ct+=d.readSVarint(),Tt+=d.readSVarint(),N===1&&(p&&Bt.push(p),p=[]),p.push(new r(ct,Tt));else{if(N!==7)throw new Error("unknown command "+N);p&&p.push(p[0].clone())}}return p&&Bt.push(p),Bt},fa.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var p=d.readVarint()+d.pos,C=1,N=0,J=0,ct=0,Tt=1/0,Bt=-1/0,Xt=1/0,de=-1/0;d.pos<p;){if(N<=0){var De=d.readVarint();C=7&De,N=De>>3}if(N--,C===1||C===2)(J+=d.readSVarint())<Tt&&(Tt=J),J>Bt&&(Bt=J),(ct+=d.readSVarint())<Xt&&(Xt=ct),ct>de&&(de=ct);else if(C!==7)throw new Error("unknown command "+C)}return[Tt,Xt,Bt,de]},fa.prototype.toGeoJSON=function(d,p,C){var N,J,ct=this.extent*Math.pow(2,C),Tt=this.extent*d,Bt=this.extent*p,Xt=this.loadGeometry(),de=fa.types[this.type];function De(cn){for(var Rn=0;Rn<cn.length;Rn++){var On=cn[Rn];cn[Rn]=[360*(On.x+Tt)/ct-180,360/Math.PI*Math.atan(Math.exp((180-360*(On.y+Bt)/ct)*Math.PI/180))-90]}}switch(this.type){case 1:var Ge=[];for(N=0;N<Xt.length;N++)Ge[N]=Xt[N][0];De(Xt=Ge);break;case 2:for(N=0;N<Xt.length;N++)De(Xt[N]);break;case 3:for(Xt=function(cn){var Rn=cn.length;if(Rn<=1)return[cn];for(var On,$n,Qn=[],Sr=0;Sr<Rn;Sr++){var Nr=oo(cn[Sr]);Nr!==0&&($n===void 0&&($n=Nr<0),$n===Nr<0?(On&&Qn.push(On),On=[cn[Sr]]):On.push(cn[Sr]))}return On&&Qn.push(On),Qn}(Xt),N=0;N<Xt.length;N++)for(J=0;J<Xt[N].length;J++)De(Xt[N][J])}Xt.length===1?Xt=Xt[0]:de="Multi"+de;var He={type:"Feature",geometry:{type:de,coordinates:Xt},properties:this.properties};return"id"in this&&(He.id=this.id),He};var ro=No;function No(d,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(ko,this,p),this.length=this._features.length}function ko(d,p,C){d===15?p.version=C.readVarint():d===1?p.name=C.readString():d===5?p.extent=C.readVarint():d===2?p._features.push(C.pos):d===3?p._keys.push(C.readString()):d===4&&p._values.push(function(N){for(var J=null,ct=N.readVarint()+N.pos;N.pos<ct;){var Tt=N.readVarint()>>3;J=Tt===1?N.readString():Tt===2?N.readFloat():Tt===3?N.readDouble():Tt===4?N.readVarint64():Tt===5?N.readVarint():Tt===6?N.readSVarint():Tt===7?N.readBoolean():null}return J}(C))}function Gs(d,p,C){if(d===3){var N=new ro(C,C.readVarint()+C.pos);N.length&&(p[N.name]=N)}}No.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var p=this._pbf.readVarint()+this._pbf.pos;return new Ji(this._pbf,p,this.extent,this._keys,this._values)};var Bs={VectorTile:function(p,C){this.layers=p.readFields(Gs,{},C)},VectorTileFeature:Ji,VectorTileLayer:ro},bu=Bs.VectorTileFeature.types,Ns=Math.pow(2,13);function ru(d,p,C,N,J,ct,Tt,Bt){d.emplaceBack(p,C,2*Math.floor(N*Ns)+Tt,J*Ns*2,ct*Ns*2,Math.round(Bt))}var io=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new mi,this.indexArray=new Va,this.programConfigurations=new Ia(p.layers,p.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function Eu(d,p){return d.x===p.x&&(d.x<0||d.x>8192)||d.y===p.y&&(d.y<0||d.y>8192)}io.prototype.populate=function(d,p,C){this.features=[],this.hasPattern=Ue("fill-extrusion",this.layers,p);for(var N=0,J=d;N<J.length;N+=1){var ct=J[N],Tt=ct.feature,Bt=ct.id,Xt=ct.index,de=ct.sourceLayerIndex,De=this.layers[0]._featureFilter.needGeometry,Ge=js(Tt,De);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),Ge,C)){var He={id:Bt,sourceLayerIndex:de,index:Xt,geometry:De?Ge.geometry:es(Tt),properties:Tt.properties,type:Tt.type,patterns:{}};this.hasPattern?this.features.push(un("fill-extrusion",this.layers,He,this.zoom,p)):this.addFeature(He,He.geometry,Xt,C,{}),p.featureIndex.insert(Tt,He.geometry,Xt,de,this.index,!0)}}},io.prototype.addFeatures=function(d,p,C){for(var N=0,J=this.features;N<J.length;N+=1){var ct=J[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},io.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},io.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},io.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},io.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,xi),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},io.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},io.prototype.addFeature=function(d,p,C,N,J){for(var ct=0,Tt=Gt(p,500);ct<Tt.length;ct+=1){for(var Bt=Tt[ct],Xt=0,de=0,De=Bt;de<De.length;de+=1)Xt+=De[de].length;for(var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),He=0,cn=Bt;He<cn.length;He+=1){var Rn=cn[He];if(Rn.length!==0&&!((Yo=Rn).every(function(go){return go.x<0})||Yo.every(function(go){return go.x>8192})||Yo.every(function(go){return go.y<0})||Yo.every(function(go){return go.y>8192})))for(var On=0,$n=0;$n<Rn.length;$n++){var Qn=Rn[$n];if($n>=1){var Sr=Rn[$n-1];if(!Eu(Qn,Sr)){Ge.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nr=Qn.sub(Sr)._perp()._unit(),Wr=Sr.dist(Qn);On+Wr>32768&&(On=0),ru(this.layoutVertexArray,Qn.x,Qn.y,Nr.x,Nr.y,0,0,On),ru(this.layoutVertexArray,Qn.x,Qn.y,Nr.x,Nr.y,0,1,On),ru(this.layoutVertexArray,Sr.x,Sr.y,Nr.x,Nr.y,0,0,On+=Wr),ru(this.layoutVertexArray,Sr.x,Sr.y,Nr.x,Nr.y,0,1,On);var pi=Ge.vertexLength;this.indexArray.emplaceBack(pi,pi+2,pi+1),this.indexArray.emplaceBack(pi+1,pi+2,pi+3),Ge.vertexLength+=4,Ge.primitiveLength+=2}}}}if(Ge.vertexLength+Xt>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(Xt,this.layoutVertexArray,this.indexArray)),bu[d.type]==="Polygon"){for(var ai=[],Bi=[],zi=Ge.vertexLength,ia=0,va=Bt;ia<va.length;ia+=1){var ca=va[ia];if(ca.length!==0){ca!==Bt[0]&&Bi.push(ai.length/2);for(var ta=0;ta<ca.length;ta++){var to=ca[ta];ru(this.layoutVertexArray,to.x,to.y,0,0,1,1,0),ai.push(to.x),ai.push(to.y)}}}for(var Ta=Gc(ai,Bi),pa=0;pa<Ta.length;pa+=3)this.indexArray.emplaceBack(zi+Ta[pa],zi+Ta[pa+2],zi+Ta[pa+1]);Ge.primitiveLength+=Ta.length/3,Ge.vertexLength+=Xt}}var Yo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,N)},Wi("FillExtrusionBucket",io,{omit:["layers","features"]});var Ol={paint:new pn({"fill-extrusion-opacity":new fe(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fe(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fe(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fe(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ps=function(d){function p(C){d.call(this,C,Ol)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new io(C)},p.prototype.queryRadius=function(){return Au(this.paint.get("fill-extrusion-translate"))},p.prototype.is3D=function(){return!0},p.prototype.queryIntersectsFeature=function(C,N,J,ct,Tt,Bt,Xt,de){var De=Ec(C,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Bt.angle,Xt),Ge=this.paint.get("fill-extrusion-height").evaluate(N,J),He=this.paint.get("fill-extrusion-base").evaluate(N,J),cn=function(On,$n,Qn,Sr){for(var Nr=[],Wr=0,pi=On;Wr<pi.length;Wr+=1){var ai=pi[Wr],Bi=[ai.x,ai.y,0,1];Yl(Bi,Bi,$n),Nr.push(new r(Bi[0]/Bi[3],Bi[1]/Bi[3]))}return Nr}(De,de),Rn=function(On,$n,Qn,Sr){for(var Nr=[],Wr=[],pi=Sr[8]*$n,ai=Sr[9]*$n,Bi=Sr[10]*$n,zi=Sr[11]*$n,ia=Sr[8]*Qn,va=Sr[9]*Qn,ca=Sr[10]*Qn,ta=Sr[11]*Qn,to=0,Ta=On;to<Ta.length;to+=1){for(var pa=[],Yo=[],go=0,Xs=Ta[to];go<Xs.length;go+=1){var Za=Xs[go],rs=Za.x,Xu=Za.y,Cu=Sr[0]*rs+Sr[4]*Xu+Sr[12],ol=Sr[1]*rs+Sr[5]*Xu+Sr[13],sl=Sr[2]*rs+Sr[6]*Xu+Sr[14],zu=Sr[3]*rs+Sr[7]*Xu+Sr[15],cc=sl+Bi,Xl=zu+zi,_c=Cu+ia,fc=ol+va,wc=sl+ca,wl=zu+ta,yl=new r((Cu+pi)/Xl,(ol+ai)/Xl);yl.z=cc/Xl,pa.push(yl);var Il=new r(_c/wl,fc/wl);Il.z=wc/wl,Yo.push(Il)}Nr.push(pa),Wr.push(Yo)}return[Nr,Wr]}(ct,He,Ge,de);return function(On,$n,Qn){var Sr=1/0;zl(Qn,$n)&&(Sr=Go(Qn,$n[0]));for(var Nr=0;Nr<$n.length;Nr++)for(var Wr=$n[Nr],pi=On[Nr],ai=0;ai<Wr.length-1;ai++){var Bi=Wr[ai],zi=[Bi,Wr[ai+1],pi[ai+1],pi[ai],Bi];Fl(Qn,zi)&&(Sr=Math.min(Sr,Go(Qn,zi)))}return Sr!==1/0&&Sr}(Rn[0],Rn[1],cn)},p}(hn);function Vs(d,p){return d.x*p.x+d.y*p.y}function Go(d,p){if(d.length===1){for(var C,N=0,J=p[N++];!C||J.equals(C);)if(!(C=p[N++]))return 1/0;for(;N<p.length;N++){var ct=p[N],Tt=d[0],Bt=C.sub(J),Xt=ct.sub(J),de=Tt.sub(J),De=Vs(Bt,Bt),Ge=Vs(Bt,Xt),He=Vs(Xt,Xt),cn=Vs(de,Bt),Rn=Vs(de,Xt),On=De*He-Ge*Ge,$n=(He*cn-Ge*Rn)/On,Qn=(De*Rn-Ge*cn)/On,Sr=J.z*(1-$n-Qn)+C.z*$n+ct.z*Qn;if(isFinite(Sr))return Sr}return 1/0}for(var Nr=1/0,Wr=0,pi=p;Wr<pi.length;Wr+=1)Nr=Math.min(Nr,pi[Wr].z);return Nr}var hl=Wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,bf=Wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Xc=Bs.VectorTileFeature.types,mh=Math.cos(Math.PI/180*37.5),wf=Math.pow(2,14)/.5,ic=function(p){var C=this;this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(N){C.gradients[N.id]={}}),this.layoutVertexArray=new Br,this.layoutVertexArray2=new ui,this.indexArray=new Va,this.programConfigurations=new Ia(p.layers,p.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};ic.prototype.populate=function(d,p,C){this.hasPattern=Ue("line",this.layers,p);for(var N=this.layers[0].layout.get("line-sort-key"),J=[],ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct],Xt=Bt.feature,de=Bt.id,De=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,cn=js(Xt,He);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),cn,C)){var Rn=N?N.evaluate(cn,{},C):void 0,On={id:de,properties:Xt.properties,type:Xt.type,sourceLayerIndex:Ge,index:De,geometry:He?cn.geometry:es(Xt),patterns:{},sortKey:Rn};J.push(On)}}N&&J.sort(function(Bi,zi){return Bi.sortKey-zi.sortKey});for(var $n=0,Qn=J;$n<Qn.length;$n+=1){var Sr=Qn[$n],Nr=Sr.geometry,Wr=Sr.index,pi=Sr.sourceLayerIndex;if(this.hasPattern){var ai=un("line",this.layers,Sr,this.zoom,p);this.patternFeatures.push(ai)}else this.addFeature(Sr,Nr,Wr,C,{});p.featureIndex.insert(d[Wr].feature,Nr,Wr,pi,this.index)}},ic.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},ic.prototype.addFeatures=function(d,p,C){for(var N=0,J=this.patternFeatures;N<J.length;N+=1){var ct=J[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},ic.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ic.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ic.prototype.upload=function(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,bf)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,hl),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},ic.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ic.prototype.lineFeatureClips=function(d){if(d.properties&&d.properties.hasOwnProperty("mapbox_clip_start")&&d.properties.hasOwnProperty("mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}},ic.prototype.addFeature=function(d,p,C,N,J){var ct=this.layers[0].layout,Tt=ct.get("line-join").evaluate(d,{}),Bt=ct.get("line-cap"),Xt=ct.get("line-miter-limit"),de=ct.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(var De=0,Ge=p;De<Ge.length;De+=1)this.addLine(Ge[De],d,Tt,Bt,Xt,de);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,N)},ic.prototype.addLine=function(d,p,C,N,J,ct){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Tt=0;Tt<d.length-1;Tt++)this.totalDistance+=d[Tt].dist(d[Tt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Bt=Xc[p.type]==="Polygon",Xt=d.length;Xt>=2&&d[Xt-1].equals(d[Xt-2]);)Xt--;for(var de=0;de<Xt-1&&d[de].equals(d[de+1]);)de++;if(!(Xt<(Bt?3:2))){C==="bevel"&&(J=1.05);var De,Ge=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*Xt,this.layoutVertexArray,this.indexArray),cn=void 0,Rn=void 0,On=void 0,$n=void 0;this.e1=this.e2=-1,Bt&&($n=d[de].sub(De=d[Xt-2])._unit()._perp());for(var Qn=de;Qn<Xt;Qn++)if(!(Rn=Qn===Xt-1?Bt?d[de+1]:void 0:d[Qn+1])||!d[Qn].equals(Rn)){$n&&(On=$n),De&&(cn=De),De=d[Qn],$n=Rn?Rn.sub(De)._unit()._perp():On;var Sr=(On=On||$n).add($n);Sr.x===0&&Sr.y===0||Sr._unit();var Nr=On.x*$n.x+On.y*$n.y,Wr=Sr.x*$n.x+Sr.y*$n.y,pi=Wr!==0?1/Wr:1/0,ai=2*Math.sqrt(2-2*Wr),Bi=Wr<mh&&cn&&Rn,zi=On.x*$n.y-On.y*$n.x>0;if(Bi&&Qn>de){var ia=De.dist(cn);if(ia>2*Ge){var va=De.sub(De.sub(cn)._mult(Ge/ia)._round());this.updateDistance(cn,va),this.addCurrentVertex(va,On,0,0,He),cn=va}}var ca=cn&&Rn,ta=ca?C:Bt?"butt":N;if(ca&&ta==="round"&&(pi<ct?ta="miter":pi<=2&&(ta="fakeround")),ta==="miter"&&pi>J&&(ta="bevel"),ta==="bevel"&&(pi>2&&(ta="flipbevel"),pi<J&&(ta="miter")),cn&&this.updateDistance(cn,De),ta==="miter")Sr._mult(pi),this.addCurrentVertex(De,Sr,0,0,He);else if(ta==="flipbevel"){if(pi>100)Sr=$n.mult(-1);else{var to=pi*On.add($n).mag()/On.sub($n).mag();Sr._perp()._mult(to*(zi?-1:1))}this.addCurrentVertex(De,Sr,0,0,He),this.addCurrentVertex(De,Sr.mult(-1),0,0,He)}else if(ta==="bevel"||ta==="fakeround"){var Ta=-Math.sqrt(pi*pi-1),pa=zi?Ta:0,Yo=zi?0:Ta;if(cn&&this.addCurrentVertex(De,On,pa,Yo,He),ta==="fakeround")for(var go=Math.round(180*ai/Math.PI/20),Xs=1;Xs<go;Xs++){var Za=Xs/go;if(Za!==.5){var rs=Za-.5;Za+=Za*rs*(Za-1)*((1.0904+Nr*(Nr*(3.55645-1.43519*Nr)-3.2452))*rs*rs+(.848013+Nr*(.215638*Nr-1.06021)))}var Xu=$n.sub(On)._mult(Za)._add(On)._unit()._mult(zi?-1:1);this.addHalfVertex(De,Xu.x,Xu.y,!1,zi,0,He)}Rn&&this.addCurrentVertex(De,$n,-pa,-Yo,He)}else if(ta==="butt")this.addCurrentVertex(De,Sr,0,0,He);else if(ta==="square"){var Cu=cn?1:-1;this.addCurrentVertex(De,Sr,Cu,Cu,He)}else ta==="round"&&(cn&&(this.addCurrentVertex(De,On,0,0,He),this.addCurrentVertex(De,On,1,1,He,!0)),Rn&&(this.addCurrentVertex(De,$n,-1,-1,He,!0),this.addCurrentVertex(De,$n,0,0,He)));if(Bi&&Qn<Xt-1){var ol=De.dist(Rn);if(ol>2*Ge){var sl=De.add(Rn.sub(De)._mult(Ge/ol)._round());this.updateDistance(De,sl),this.addCurrentVertex(sl,$n,0,0,He),De=sl}}}}},ic.prototype.addCurrentVertex=function(d,p,C,N,J,ct){ct===void 0&&(ct=!1);var Tt=p.y*N-p.x,Bt=-p.y-p.x*N;this.addHalfVertex(d,p.x+p.y*C,p.y-p.x*C,ct,!1,C,J),this.addHalfVertex(d,Tt,Bt,ct,!0,-N,J),this.distance>wf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(d,p,C,N,J,ct))},ic.prototype.addHalfVertex=function(d,p,C,N,J,ct,Tt){var Bt=.5*(this.lineClips?this.scaledDistance*(wf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d.x<<1)+(N?1:0),(d.y<<1)+(J?1:0),Math.round(63*p)+128,Math.round(63*C)+128,1+(ct===0?0:ct<0?-1:1)|(63&Bt)<<2,Bt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Xt=Tt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Xt),Tt.primitiveLength++),J?this.e2=Xt:this.e1=Xt},ic.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ic.prototype.updateDistance=function(d,p){this.distance+=d.dist(p),this.updateScaledDistance()},Wi("LineBucket",ic,{omit:["layers","patternFeatures"]});var Dh=new pn({"line-cap":new fe(ue.layout_line["line-cap"]),"line-join":new Fe(ue.layout_line["line-join"]),"line-miter-limit":new fe(ue.layout_line["line-miter-limit"]),"line-round-limit":new fe(ue.layout_line["line-round-limit"]),"line-sort-key":new Fe(ue.layout_line["line-sort-key"])}),Nf={paint:new pn({"line-opacity":new Fe(ue.paint_line["line-opacity"]),"line-color":new Fe(ue.paint_line["line-color"]),"line-translate":new fe(ue.paint_line["line-translate"]),"line-translate-anchor":new fe(ue.paint_line["line-translate-anchor"]),"line-width":new Fe(ue.paint_line["line-width"]),"line-gap-width":new Fe(ue.paint_line["line-gap-width"]),"line-offset":new Fe(ue.paint_line["line-offset"]),"line-blur":new Fe(ue.paint_line["line-blur"]),"line-dasharray":new rn(ue.paint_line["line-dasharray"]),"line-pattern":new Ke(ue.paint_line["line-pattern"]),"line-gradient":new Je(ue.paint_line["line-gradient"])}),layout:Dh},lh=new(function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N){return N=new yr(Math.floor(N.zoom),{now:N.now,fadeDuration:N.fadeDuration,zoomHistory:N.zoomHistory,transition:N.transition}),d.prototype.possiblyEvaluate.call(this,C,N)},p.prototype.evaluate=function(C,N,J,ct){return N=v({},N,{zoom:Math.floor(N.zoom)}),d.prototype.evaluate.call(this,C,N,J,ct)},p}(Fe))(Nf.paint.properties["line-width"].specification);lh.useIntegerZoom=!0;var jt=function(d){function p(C){d.call(this,C,Nf),this.gradientVersion=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Mo,this.gradientVersion=(this.gradientVersion+1)%i)},p.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N),this.paint._values["line-floorwidth"]=lh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,C)},p.prototype.createBucket=function(C){return new ic(C)},p.prototype.queryRadius=function(C){var N=C,J=Et(bc("line-width",this,N),bc("line-gap-width",this,N)),ct=bc("line-offset",this,N);return J/2+Math.abs(ct)+Au(this.paint.get("line-translate"))},p.prototype.queryIntersectsFeature=function(C,N,J,ct,Tt,Bt,Xt){var de=Ec(C,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Bt.angle,Xt),De=Xt/2*Et(this.paint.get("line-width").evaluate(N,J),this.paint.get("line-gap-width").evaluate(N,J)),Ge=this.paint.get("line-offset").evaluate(N,J);return Ge&&(ct=function(He,cn){for(var Rn=[],On=new r(0,0),$n=0;$n<He.length;$n++){for(var Qn=He[$n],Sr=[],Nr=0;Nr<Qn.length;Nr++){var Wr=Qn[Nr],pi=Qn[Nr+1],ai=Nr===0?On:Wr.sub(Qn[Nr-1])._unit()._perp(),Bi=Nr===Qn.length-1?On:pi.sub(Wr)._unit()._perp(),zi=ai._add(Bi)._unit();zi._mult(1/(zi.x*Bi.x+zi.y*Bi.y)),Sr.push(zi._mult(cn)._add(Wr))}Rn.push(Sr)}return Rn}(ct,Ge*Xt)),function(He,cn,Rn){for(var On=0;On<cn.length;On++){var $n=cn[On];if(He.length>=3){for(var Qn=0;Qn<$n.length;Qn++)if(Lc(He,$n[Qn]))return!0}if(Al(He,$n,Rn))return!0}return!1}(de,ct,De)},p.prototype.isTileClipped=function(){return!0},p}(hn);function Et(d,p){return p>0?p+2*d:d}var tt=Wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),St=Wn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Lt=(Wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ae=(Wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ke=Wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yn(d,p,C){return d.sections.forEach(function(N){N.text=function(J,ct,Tt){var Bt=ct.layout.get("text-transform").evaluate(Tt,{});return Bt==="uppercase"?J=J.toLocaleUpperCase():Bt==="lowercase"&&(J=J.toLocaleLowerCase()),li.applyArabicShaping&&(J=li.applyArabicShaping(J)),J}(N.text,p,C)}),d}Wn([{name:"triangle",components:3,type:"Uint16"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Wn([{type:"Float32",name:"offsetX"}]),Wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Cn=function(p,C,N,J,ct){var Tt,Bt,Xt=8*ct-J-1,de=(1<<Xt)-1,De=de>>1,Ge=-7,He=N?ct-1:0,cn=N?-1:1,Rn=p[C+He];for(He+=cn,Tt=Rn&(1<<-Ge)-1,Rn>>=-Ge,Ge+=Xt;Ge>0;Tt=256*Tt+p[C+He],He+=cn,Ge-=8);for(Bt=Tt&(1<<-Ge)-1,Tt>>=-Ge,Ge+=J;Ge>0;Bt=256*Bt+p[C+He],He+=cn,Ge-=8);if(Tt===0)Tt=1-De;else{if(Tt===de)return Bt?NaN:1/0*(Rn?-1:1);Bt+=Math.pow(2,J),Tt-=De}return(Rn?-1:1)*Bt*Math.pow(2,Tt-J)},ne=function(p,C,N,J,ct,Tt){var Bt,Xt,de,De=8*Tt-ct-1,Ge=(1<<De)-1,He=Ge>>1,cn=ct===23?Math.pow(2,-24)-Math.pow(2,-77):0,Rn=J?0:Tt-1,On=J?1:-1,$n=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Xt=isNaN(C)?1:0,Bt=Ge):(Bt=Math.floor(Math.log(C)/Math.LN2),C*(de=Math.pow(2,-Bt))<1&&(Bt--,de*=2),(C+=Bt+He>=1?cn/de:cn*Math.pow(2,1-He))*de>=2&&(Bt++,de/=2),Bt+He>=Ge?(Xt=0,Bt=Ge):Bt+He>=1?(Xt=(C*de-1)*Math.pow(2,ct),Bt+=He):(Xt=C*Math.pow(2,He-1)*Math.pow(2,ct),Bt=0));ct>=8;p[N+Rn]=255&Xt,Rn+=On,Xt/=256,ct-=8);for(Bt=Bt<<ct|Xt,De+=ct;De>0;p[N+Rn]=255&Bt,Rn+=On,Bt/=256,De-=8);p[N+Rn-On]|=128*$n},_e=Ze;function Ze(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Ze.Varint=0,Ze.Fixed64=1,Ze.Bytes=2,Ze.Fixed32=5;var In=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ar(d){return d.type===Ze.Bytes?d.readVarint()+d.pos:d.pos+1}function ur(d,p,C){return C?4294967296*p+(d>>>0):4294967296*(p>>>0)+(d>>>0)}function sr(d,p,C){var N=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));C.realloc(N);for(var J=C.pos-1;J>=d;J--)C.buf[J+N]=C.buf[J]}function Or(d,p){for(var C=0;C<d.length;C++)p.writeVarint(d[C])}function ri(d,p){for(var C=0;C<d.length;C++)p.writeSVarint(d[C])}function Vr(d,p){for(var C=0;C<d.length;C++)p.writeFloat(d[C])}function ni(d,p){for(var C=0;C<d.length;C++)p.writeDouble(d[C])}function fi(d,p){for(var C=0;C<d.length;C++)p.writeBoolean(d[C])}function Oi(d,p){for(var C=0;C<d.length;C++)p.writeFixed32(d[C])}function vi(d,p){for(var C=0;C<d.length;C++)p.writeSFixed32(d[C])}function si(d,p){for(var C=0;C<d.length;C++)p.writeFixed64(d[C])}function Lr(d,p){for(var C=0;C<d.length;C++)p.writeSFixed64(d[C])}function _r(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+16777216*d[p+3]}function di(d,p,C){d[C]=p,d[C+1]=p>>>8,d[C+2]=p>>>16,d[C+3]=p>>>24}function Vi(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+(d[p+3]<<24)}function qr(d,p,C){d===1&&C.readMessage(na,p)}function na(d,p,C){if(d===3){var N=C.readMessage(wi,{}),J=N.width,ct=N.height,Tt=N.left,Bt=N.top,Xt=N.advance;p.push({id:N.id,bitmap:new Ul({width:J+6,height:ct+6},N.bitmap),metrics:{width:J,height:ct,left:Tt,top:Bt,advance:Xt}})}}function wi(d,p,C){d===1?p.id=C.readVarint():d===2?p.bitmap=C.readBytes():d===3?p.width=C.readVarint():d===4?p.height=C.readVarint():d===5?p.left=C.readSVarint():d===6?p.top=C.readSVarint():d===7&&(p.advance=C.readVarint())}function Pi(d){for(var p=0,C=0,N=0,J=d;N<J.length;N+=1){var ct=J[N];p+=ct.w*ct.h,C=Math.max(C,ct.w)}d.sort(function(On,$n){return $n.h-On.h});for(var Tt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),C),h:1/0}],Bt=0,Xt=0,de=0,De=d;de<De.length;de+=1)for(var Ge=De[de],He=Tt.length-1;He>=0;He--){var cn=Tt[He];if(!(Ge.w>cn.w||Ge.h>cn.h)){if(Ge.x=cn.x,Ge.y=cn.y,Xt=Math.max(Xt,Ge.y+Ge.h),Bt=Math.max(Bt,Ge.x+Ge.w),Ge.w===cn.w&&Ge.h===cn.h){var Rn=Tt.pop();He<Tt.length&&(Tt[He]=Rn)}else Ge.h===cn.h?(cn.x+=Ge.w,cn.w-=Ge.w):Ge.w===cn.w?(cn.y+=Ge.h,cn.h-=Ge.h):(Tt.push({x:cn.x+Ge.w,y:cn.y,w:cn.w-Ge.w,h:Ge.h}),cn.y+=Ge.h,cn.h-=Ge.h);break}}return{w:Bt,h:Xt,fill:p/(Bt*Xt)||0}}Ze.prototype={destroy:function(){this.buf=null},readFields:function(p,C,N){for(N=N||this.length;this.pos<N;){var J=this.readVarint(),ct=J>>3,Tt=this.pos;this.type=7&J,p(ct,C,this),this.pos===Tt&&this.skip(J)}return C},readMessage:function(p,C){return this.readFields(p,C,this.readVarint()+this.pos)},readFixed32:function(){var p=_r(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=Vi(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=_r(this.buf,this.pos)+4294967296*_r(this.buf,this.pos+4);return this.pos+=8,p},readSFixed64:function(){var p=_r(this.buf,this.pos)+4294967296*Vi(this.buf,this.pos+4);return this.pos+=8,p},readFloat:function(){var p=Cn(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=Cn(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var C,N,J=this.buf;return C=127&(N=J[this.pos++]),N<128?C:(C|=(127&(N=J[this.pos++]))<<7,N<128?C:(C|=(127&(N=J[this.pos++]))<<14,N<128?C:(C|=(127&(N=J[this.pos++]))<<21,N<128?C:function(ct,Tt,Bt){var Xt,de,De=Bt.buf;if(Xt=(112&(de=De[Bt.pos++]))>>4,de<128||(Xt|=(127&(de=De[Bt.pos++]))<<3,de<128)||(Xt|=(127&(de=De[Bt.pos++]))<<10,de<128)||(Xt|=(127&(de=De[Bt.pos++]))<<17,de<128)||(Xt|=(127&(de=De[Bt.pos++]))<<24,de<128)||(Xt|=(1&(de=De[Bt.pos++]))<<31,de<128))return ur(ct,Xt,Tt);throw new Error("Expected varint not more than 10 bytes")}(C|=(15&(N=J[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,C=this.pos;return this.pos=p,p-C>=12&&In?function(N,J,ct){return In.decode(N.subarray(J,ct))}(this.buf,C,p):function(N,J,ct){for(var Tt="",Bt=J;Bt<ct;){var Xt,de,De,Ge=N[Bt],He=null,cn=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Bt+cn>ct)break;cn===1?Ge<128&&(He=Ge):cn===2?(192&(Xt=N[Bt+1]))==128&&(He=(31&Ge)<<6|63&Xt)<=127&&(He=null):cn===3?(de=N[Bt+2],(192&(Xt=N[Bt+1]))==128&&(192&de)==128&&((He=(15&Ge)<<12|(63&Xt)<<6|63&de)<=2047||He>=55296&&He<=57343)&&(He=null)):cn===4&&(de=N[Bt+2],De=N[Bt+3],(192&(Xt=N[Bt+1]))==128&&(192&de)==128&&(192&De)==128&&((He=(15&Ge)<<18|(63&Xt)<<12|(63&de)<<6|63&De)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,cn=1):He>65535&&(He-=65536,Tt+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),Tt+=String.fromCharCode(He),Bt+=cn}return Tt}(this.buf,C,p)},readBytes:function(){var p=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,p);return this.pos=p,C},readPackedVarint:function(p,C){if(this.type!==Ze.Bytes)return p.push(this.readVarint(C));var N=ar(this);for(p=p||[];this.pos<N;)p.push(this.readVarint(C));return p},readPackedSVarint:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSVarint());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==Ze.Bytes)return p.push(this.readBoolean());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFloat());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==Ze.Bytes)return p.push(this.readDouble());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFixed32());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSFixed32());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFixed64());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSFixed64());var C=ar(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed64());return p},skip:function(p){var C=7&p;if(C===Ze.Varint)for(;this.buf[this.pos++]>127;);else if(C===Ze.Bytes)this.pos=this.readVarint()+this.pos;else if(C===Ze.Fixed32)this.pos+=4;else{if(C!==Ze.Fixed64)throw new Error("Unimplemented type: "+C);this.pos+=8}},writeTag:function(p,C){this.writeVarint(p<<3|C)},realloc:function(p){for(var C=this.length||16;C<this.pos+p;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),di(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),di(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),di(this.buf,-1&p,this.pos),di(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),di(this.buf,-1&p,this.pos),di(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(C,N){var J,ct;if(C>=0?(J=C%4294967296|0,ct=C/4294967296|0):(ct=~(-C/4294967296),4294967295^(J=~(-C%4294967296))?J=J+1|0:(J=0,ct=ct+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),function(Tt,Bt,Xt){Xt.buf[Xt.pos++]=127&Tt|128,Tt>>>=7,Xt.buf[Xt.pos++]=127&Tt|128,Tt>>>=7,Xt.buf[Xt.pos++]=127&Tt|128,Tt>>>=7,Xt.buf[Xt.pos++]=127&Tt|128,Xt.buf[Xt.pos]=127&(Tt>>>=7)}(J,0,N),function(Tt,Bt){var Xt=(7&Tt)<<4;Bt.buf[Bt.pos++]|=Xt|((Tt>>>=3)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt)))))}(ct,N)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var C=this.pos;this.pos=function(J,ct,Tt){for(var Bt,Xt,de=0;de<ct.length;de++){if((Bt=ct.charCodeAt(de))>55295&&Bt<57344){if(!Xt){Bt>56319||de+1===ct.length?(J[Tt++]=239,J[Tt++]=191,J[Tt++]=189):Xt=Bt;continue}if(Bt<56320){J[Tt++]=239,J[Tt++]=191,J[Tt++]=189,Xt=Bt;continue}Bt=Xt-55296<<10|Bt-56320|65536,Xt=null}else Xt&&(J[Tt++]=239,J[Tt++]=191,J[Tt++]=189,Xt=null);Bt<128?J[Tt++]=Bt:(Bt<2048?J[Tt++]=Bt>>6|192:(Bt<65536?J[Tt++]=Bt>>12|224:(J[Tt++]=Bt>>18|240,J[Tt++]=Bt>>12&63|128),J[Tt++]=Bt>>6&63|128),J[Tt++]=63&Bt|128)}return Tt}(this.buf,p,this.pos);var N=this.pos-C;N>=128&&sr(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(p){this.realloc(4),ne(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),ne(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var C=p.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=p[N]},writeRawMessage:function(p,C){this.pos++;var N=this.pos;p(C,this);var J=this.pos-N;J>=128&&sr(N,J,this),this.pos=N-1,this.writeVarint(J),this.pos+=J},writeMessage:function(p,C,N){this.writeTag(p,Ze.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(p,C){C.length&&this.writeMessage(p,Or,C)},writePackedSVarint:function(p,C){C.length&&this.writeMessage(p,ri,C)},writePackedBoolean:function(p,C){C.length&&this.writeMessage(p,fi,C)},writePackedFloat:function(p,C){C.length&&this.writeMessage(p,Vr,C)},writePackedDouble:function(p,C){C.length&&this.writeMessage(p,ni,C)},writePackedFixed32:function(p,C){C.length&&this.writeMessage(p,Oi,C)},writePackedSFixed32:function(p,C){C.length&&this.writeMessage(p,vi,C)},writePackedFixed64:function(p,C){C.length&&this.writeMessage(p,si,C)},writePackedSFixed64:function(p,C){C.length&&this.writeMessage(p,Lr,C)},writeBytesField:function(p,C){this.writeTag(p,Ze.Bytes),this.writeBytes(C)},writeFixed32Field:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeSFixed64(C)},writeVarintField:function(p,C){this.writeTag(p,Ze.Varint),this.writeVarint(C)},writeSVarintField:function(p,C){this.writeTag(p,Ze.Varint),this.writeSVarint(C)},writeStringField:function(p,C){this.writeTag(p,Ze.Bytes),this.writeString(C)},writeFloatField:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeFloat(C)},writeDoubleField:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeDouble(C)},writeBooleanField:function(p,C){this.writeVarintField(p,Boolean(C))}};var yi=function(p,C){var N=C.pixelRatio,J=C.version,ct=C.stretchX,Tt=C.stretchY,Bt=C.content;this.paddedRect=p,this.pixelRatio=N,this.stretchX=ct,this.stretchY=Tt,this.content=Bt,this.version=J},bi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},bi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},bi.tlbr.get=function(){return this.tl.concat(this.br)},bi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yi.prototype,bi);var ra=function(p,C){var N={},J={};this.haveRenderCallbacks=[];var ct=[];this.addImages(p,N,ct),this.addImages(C,J,ct);var Tt=Pi(ct),Bt=new Nu({width:Tt.w||1,height:Tt.h||1});for(var Xt in p){var de=p[Xt],De=N[Xt].paddedRect;Nu.copy(de.data,Bt,{x:0,y:0},{x:De.x+1,y:De.y+1},de.data)}for(var Ge in C){var He=C[Ge],cn=J[Ge].paddedRect,Rn=cn.x+1,On=cn.y+1,$n=He.data.width,Qn=He.data.height;Nu.copy(He.data,Bt,{x:0,y:0},{x:Rn,y:On},He.data),Nu.copy(He.data,Bt,{x:0,y:Qn-1},{x:Rn,y:On-1},{width:$n,height:1}),Nu.copy(He.data,Bt,{x:0,y:0},{x:Rn,y:On+Qn},{width:$n,height:1}),Nu.copy(He.data,Bt,{x:$n-1,y:0},{x:Rn-1,y:On},{width:1,height:Qn}),Nu.copy(He.data,Bt,{x:0,y:0},{x:Rn+$n,y:On},{width:1,height:Qn})}this.image=Bt,this.iconPositions=N,this.patternPositions=J};ra.prototype.addImages=function(d,p,C){for(var N in d){var J=d[N],ct={x:0,y:0,w:J.data.width+2,h:J.data.height+2};C.push(ct),p[N]=new yi(ct,J),J.hasRenderCallback&&this.haveRenderCallbacks.push(N)}},ra.prototype.patchUpdatedImages=function(d,p){for(var C in d.dispatchRenderCallbacks(this.haveRenderCallbacks),d.updatedImages)this.patchUpdatedImage(this.iconPositions[C],d.getImage(C),p),this.patchUpdatedImage(this.patternPositions[C],d.getImage(C),p)},ra.prototype.patchUpdatedImage=function(d,p,C){if(d&&p&&d.version!==p.version){d.version=p.version;var N=d.tl;C.update(p.data,void 0,{x:N[0],y:N[1]})}},Wi("ImagePosition",yi),Wi("ImageAtlas",ra);var ha={horizontal:1,vertical:2,horizontalOnly:3},Ni=function(){this.scale=1,this.fontStack="",this.imageName=null};Ni.forText=function(d,p){var C=new Ni;return C.scale=d||1,C.fontStack=p,C},Ni.forImage=function(d){var p=new Ni;return p.imageName=d,p};var Ei=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function gi(d,p,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On){var $n,Qn=Ei.fromFeature(d,J);Ge===ha.vertical&&Qn.verticalizePunctuation();var Sr=li.processBidirectionalText,Nr=li.processStyledBidirectionalText;if(Sr&&Qn.sections.length===1){$n=[];for(var Wr=0,pi=Sr(Qn.toString(),Fo(Qn,de,ct,p,N,cn,Rn));Wr<pi.length;Wr+=1){var ai=pi[Wr],Bi=new Ei;Bi.text=ai,Bi.sections=Qn.sections;for(var zi=0;zi<ai.length;zi++)Bi.sectionIndex.push(0);$n.push(Bi)}}else if(Nr){$n=[];for(var ia=0,va=Nr(Qn.text,Qn.sectionIndex,Fo(Qn,de,ct,p,N,cn,Rn));ia<va.length;ia+=1){var ca=va[ia],ta=new Ei;ta.text=ca[0],ta.sectionIndex=ca[1],ta.sections=Qn.sections,$n.push(ta)}}else $n=function(pa,Yo){for(var go=[],Xs=pa.text,Za=0,rs=0,Xu=Yo;rs<Xu.length;rs+=1){var Cu=Xu[rs];go.push(pa.substring(Za,Cu)),Za=Cu}return Za<Xs.length&&go.push(pa.substring(Za,Xs.length)),go}(Qn,Fo(Qn,de,ct,p,N,cn,Rn));var to=[],Ta={positionedLines:to,text:Qn.toString(),top:De[1],bottom:De[1],left:De[0],right:De[0],writingMode:Ge,iconsInText:!1,verticalizable:!1};return function(pa,Yo,go,Xs,Za,rs,Xu,Cu,ol,sl,zu,cc){for(var Xl=0,_c=-17,fc=0,wc=0,wl=Cu==="right"?1:Cu==="left"?0:.5,yl=0,Il=0,qo=Za;Il<qo.length;Il+=1){var is=qo[Il];is.trim();var du=is.getMaxScale(),Mu=24*(du-1),Ic={positionedGlyphs:[],lineOffset:0};pa.positionedLines[yl]=Ic;var Ju=Ic.positionedGlyphs,$u=0;if(is.length()){for(var Mc=0;Mc<is.length();Mc++){var ls=is.getSection(Mc),kf=is.getSectionIndex(Mc),cf=is.getCharCode(Mc),ff=0,$c=null,Pc=null,Lf=null,Gf=24,eh=!(ol===ha.horizontal||!zu&&!ju(cf)||zu&&(za[cf]||(nh=cf,Mi.Arabic(nh)||Mi["Arabic Supplement"](nh)||Mi["Arabic Extended-A"](nh)||Mi["Arabic Presentation Forms-A"](nh)||Mi["Arabic Presentation Forms-B"](nh))));if(ls.imageName){var $h=Xs[ls.imageName];if(!$h)continue;Lf=ls.imageName,pa.iconsInText=pa.iconsInText||!0,Pc=$h.paddedRect;var af=$h.displaySize;ls.scale=24*ls.scale/cc,ff=Mu+(24-af[1]*ls.scale),Gf=($c={width:af[0],height:af[1],left:1,top:-3,advance:eh?af[1]:af[0]}).advance;var hf=eh?af[0]*ls.scale-24*du:af[1]*ls.scale-24*du;hf>0&&hf>$u&&($u=hf)}else{var Nh=go[ls.fontStack],Eh=Nh&&Nh[cf];if(Eh&&Eh.rect)Pc=Eh.rect,$c=Eh.metrics;else{var Qh=Yo[ls.fontStack],Sh=Qh&&Qh[cf];if(!Sh)continue;$c=Sh.metrics}ff=24*(du-ls.scale)}eh?(pa.verticalizable=!0,Ju.push({glyph:cf,imageName:Lf,x:Xl,y:_c+ff,vertical:eh,scale:ls.scale,fontStack:ls.fontStack,sectionIndex:kf,metrics:$c,rect:Pc}),Xl+=Gf*ls.scale+sl):(Ju.push({glyph:cf,imageName:Lf,x:Xl,y:_c+ff,vertical:eh,scale:ls.scale,fontStack:ls.fontStack,sectionIndex:kf,metrics:$c,rect:Pc}),Xl+=$c.advance*ls.scale+sl)}Ju.length!==0&&(fc=Math.max(Xl-sl,fc),kl(Ju,0,Ju.length-1,wl,$u)),Xl=0;var yd=rs*du+$u;Ic.lineOffset=Math.max($u,Mu),_c+=yd,wc=Math.max(yd,wc),++yl}else _c+=rs,++yl}var nh,Vf=_c- -17,qh=dl(Xu),_h=qh.horizontalAlign,rh=qh.verticalAlign;(function(Mh,xd,Qc,ch,Fh,zh,fh,hh,Ph){var Th,Ah=(xd-Qc)*Fh;Th=zh!==fh?-hh*ch- -17:(-ch*Ph+.5)*fh;for(var Ch=0,Uh=Mh;Ch<Uh.length;Ch+=1)for(var Oh=0,dh=Uh[Ch].positionedGlyphs;Oh<dh.length;Oh+=1){var wh=dh[Oh];wh.x+=Ah,wh.y+=Th}})(pa.positionedLines,wl,_h,rh,fc,wc,rs,Vf,Za.length),pa.top+=-rh*Vf,pa.bottom=pa.top+Vf,pa.left+=-_h*fc,pa.right=pa.left+fc}(Ta,p,C,N,$n,Tt,Bt,Xt,Ge,de,He,On),!function(pa){for(var Yo=0,go=pa;Yo<go.length;Yo+=1)if(go[Yo].positionedGlyphs.length!==0)return!1;return!0}(to)&&Ta}Ei.fromFeature=function(d,p){for(var C=new Ei,N=0;N<d.sections.length;N++){var J=d.sections[N];J.image?C.addImageSection(J):C.addTextSection(J,p)}return C},Ei.prototype.length=function(){return this.text.length},Ei.prototype.getSection=function(d){return this.sections[this.sectionIndex[d]]},Ei.prototype.getSectionIndex=function(d){return this.sectionIndex[d]},Ei.prototype.getCharCode=function(d){return this.text.charCodeAt(d)},Ei.prototype.verticalizePunctuation=function(){this.text=function(d){for(var p="",C=0;C<d.length;C++){var N=d.charCodeAt(C+1)||null,J=d.charCodeAt(C-1)||null;p+=N&&Bu(N)&&!vn[d[C+1]]||J&&Bu(J)&&!vn[d[C-1]]||!vn[d[C]]?d[C]:vn[d[C]]}return p}(this.text)},Ei.prototype.trim=function(){for(var d=0,p=0;p<this.text.length&&za[this.text.charCodeAt(p)];p++)d++;for(var C=this.text.length,N=this.text.length-1;N>=0&&N>=d&&za[this.text.charCodeAt(N)];N--)C--;this.text=this.text.substring(d,C),this.sectionIndex=this.sectionIndex.slice(d,C)},Ei.prototype.substring=function(d,p){var C=new Ei;return C.text=this.text.substring(d,p),C.sectionIndex=this.sectionIndex.slice(d,p),C.sections=this.sections,C},Ei.prototype.toString=function(){return this.text},Ei.prototype.getMaxScale=function(){var d=this;return this.sectionIndex.reduce(function(p,C){return Math.max(p,d.sections[C].scale)},0)},Ei.prototype.addTextSection=function(d,p){this.text+=d.text,this.sections.push(Ni.forText(d.scale,d.fontStack||p));for(var C=this.sections.length-1,N=0;N<d.text.length;++N)this.sectionIndex.push(C)},Ei.prototype.addImageSection=function(d){var p=d.image?d.image.name:"";if(p.length!==0){var C=this.getNextImageSectionCharCode();C?(this.text+=String.fromCharCode(C),this.sections.push(Ni.forImage(p)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},Ei.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var za={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$i={};function Gi(d,p,C,N,J,ct){if(p.imageName){var Tt=N[p.imageName];return Tt?Tt.displaySize[0]*p.scale*24/ct+J:0}var Bt=C[p.fontStack],Xt=Bt&&Bt[d];return Xt?Xt.metrics.advance*p.scale+J:0}function co(d,p,C,N){var J=Math.pow(d-p,2);return N?d<p?J/2:2*J:J+Math.abs(C)*C}function qa(d,p,C){var N=0;return d===10&&(N-=1e4),C&&(N+=150),d!==40&&d!==65288||(N+=50),p!==41&&p!==65289||(N+=50),N}function Ao(d,p,C,N,J,ct){for(var Tt=null,Bt=co(p,C,J,ct),Xt=0,de=N;Xt<de.length;Xt+=1){var De=de[Xt],Ge=co(p-De.x,C,J,ct)+De.badness;Ge<=Bt&&(Tt=De,Bt=Ge)}return{index:d,x:p,priorBreak:Tt,badness:Bt}}function Fo(d,p,C,N,J,ct,Tt){if(ct!=="point")return[];if(!d)return[];for(var Bt,Xt=[],de=function($n,Qn,Sr,Nr,Wr,pi){for(var ai=0,Bi=0;Bi<$n.length();Bi++){var zi=$n.getSection(Bi);ai+=Gi($n.getCharCode(Bi),zi,Nr,Wr,Qn,pi)}return ai/Math.max(1,Math.ceil(ai/Sr))}(d,p,C,N,J,Tt),De=d.text.indexOf("\u200B")>=0,Ge=0,He=0;He<d.length();He++){var cn=d.getSection(He),Rn=d.getCharCode(He);if(za[Rn]||(Ge+=Gi(Rn,cn,N,J,p,Tt)),He<d.length()-1){var On=!((Bt=Rn)<11904||!(Mi["Bopomofo Extended"](Bt)||Mi.Bopomofo(Bt)||Mi["CJK Compatibility Forms"](Bt)||Mi["CJK Compatibility Ideographs"](Bt)||Mi["CJK Compatibility"](Bt)||Mi["CJK Radicals Supplement"](Bt)||Mi["CJK Strokes"](Bt)||Mi["CJK Symbols and Punctuation"](Bt)||Mi["CJK Unified Ideographs Extension A"](Bt)||Mi["CJK Unified Ideographs"](Bt)||Mi["Enclosed CJK Letters and Months"](Bt)||Mi["Halfwidth and Fullwidth Forms"](Bt)||Mi.Hiragana(Bt)||Mi["Ideographic Description Characters"](Bt)||Mi["Kangxi Radicals"](Bt)||Mi["Katakana Phonetic Extensions"](Bt)||Mi.Katakana(Bt)||Mi["Vertical Forms"](Bt)||Mi["Yi Radicals"](Bt)||Mi["Yi Syllables"](Bt)));($i[Rn]||On||cn.imageName)&&Xt.push(Ao(He+1,Ge,de,Xt,qa(Rn,d.getCharCode(He+1),On&&De),!1))}}return function $n(Qn){return Qn?$n(Qn.priorBreak).concat(Qn.index):[]}(Ao(d.length(),Ge,de,Xt,0,!0))}function dl(d){var p=.5,C=.5;switch(d){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":C=1;break;case"top":case"top-right":case"top-left":C=0}return{horizontalAlign:p,verticalAlign:C}}function kl(d,p,C,N,J){if(N||J)for(var ct=d[C],Tt=(d[C].x+ct.metrics.advance*ct.scale)*N,Bt=p;Bt<=C;Bt++)d[Bt].x-=Tt,d[Bt].y+=J}function Vo(d,p,C,N,J,ct){var Tt,Bt=d.image;if(Bt.content){var Xt=Bt.content,de=Bt.pixelRatio||1;Tt=[Xt[0]/de,Xt[1]/de,Bt.displaySize[0]-Xt[2]/de,Bt.displaySize[1]-Xt[3]/de]}var De,Ge,He,cn,Rn=p.left*ct,On=p.right*ct;C==="width"||C==="both"?(cn=J[0]+Rn-N[3],Ge=J[0]+On+N[1]):Ge=(cn=J[0]+(Rn+On-Bt.displaySize[0])/2)+Bt.displaySize[0];var $n=p.top*ct,Qn=p.bottom*ct;return C==="height"||C==="both"?(De=J[1]+$n-N[0],He=J[1]+Qn+N[2]):He=(De=J[1]+($n+Qn-Bt.displaySize[1])/2)+Bt.displaySize[1],{image:Bt,top:De,right:Ge,bottom:He,left:cn,collisionPadding:Tt}}$i[10]=!0,$i[32]=!0,$i[38]=!0,$i[40]=!0,$i[41]=!0,$i[43]=!0,$i[45]=!0,$i[47]=!0,$i[173]=!0,$i[183]=!0,$i[8203]=!0,$i[8208]=!0,$i[8211]=!0,$i[8231]=!0;var vl=function(d){function p(C,N,J,ct){d.call(this,C,N),this.angle=J,ct!==void 0&&(this.segment=ct)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.clone=function(){return new p(this.x,this.y,this.angle,this.segment)},p}(r);function Zs(d,p){var C=p.expression;if(C.kind==="constant")return{kind:"constant",layoutSize:C.evaluate(new yr(d+1))};if(C.kind==="source")return{kind:"source"};for(var N=C.zoomStops,J=C.interpolationType,ct=0;ct<N.length&&N[ct]<=d;)ct++;for(var Tt=ct=Math.max(0,ct-1);Tt<N.length&&N[Tt]<d+1;)Tt++;Tt=Math.min(N.length-1,Tt);var Bt=N[ct],Xt=N[Tt];return C.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Xt,interpolationType:J}:{kind:"camera",minZoom:Bt,maxZoom:Xt,minSize:C.evaluate(new yr(Bt)),maxSize:C.evaluate(new yr(Xt)),interpolationType:J}}function Gl(d,p,C){var N=p.uSize,J=C.lowerSize;return d.kind==="source"?J/128:d.kind==="composite"?$a(J/128,C.upperSize/128,p.uSizeT):N}function Zl(d,p){var C=0,N=0;if(d.kind==="constant")N=d.layoutSize;else if(d.kind!=="source"){var J=d.interpolationType,ct=J?u(Ga.interpolationFactor(J,p,d.minZoom,d.maxZoom),0,1):0;d.kind==="camera"?N=$a(d.minSize,d.maxSize,ct):C=ct}return{uSizeT:C,uSize:N}}Wi("Anchor",vl);var ac=Object.freeze({__proto__:null,getSizeData:Zs,evaluateSizeForFeature:Gl,evaluateSizeForZoom:Zl,SIZE_PACK_FACTOR:128});function uc(d,p,C,N,J){if(p.segment===void 0)return!0;for(var ct=p,Tt=p.segment+1,Bt=0;Bt>-C/2;){if(--Tt<0)return!1;Bt-=d[Tt].dist(ct),ct=d[Tt]}Bt+=d[Tt].dist(d[Tt+1]),Tt++;for(var Xt=[],de=0;Bt<C/2;){var De=d[Tt],Ge=d[Tt+1];if(!Ge)return!1;var He=d[Tt-1].angleTo(De)-De.angleTo(Ge);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),Xt.push({distance:Bt,angleDelta:He}),de+=He;Bt-Xt[0].distance>N;)de-=Xt.shift().angleDelta;if(de>J)return!1;Tt++,Bt+=De.dist(Ge)}return!0}function gc(d){for(var p=0,C=0;C<d.length-1;C++)p+=d[C].dist(d[C+1]);return p}function Vl(d,p,C){return d?.6*p*C:0}function Co(d,p){return Math.max(d?d.right-d.left:0,p?p.right-p.left:0)}function Sc(d,p,C,N,J,ct){for(var Tt=Vl(C,J,ct),Bt=Co(C,N)*ct,Xt=0,de=gc(d)/2,De=0;De<d.length-1;De++){var Ge=d[De],He=d[De+1],cn=Ge.dist(He);if(Xt+cn>de){var Rn=(de-Xt)/cn,On=$a(Ge.x,He.x,Rn),$n=$a(Ge.y,He.y,Rn),Qn=new vl(On,$n,He.angleTo(Ge),De);return Qn._round(),!Tt||uc(d,Qn,Bt,Tt,p)?Qn:void 0}Xt+=cn}}function Ks(d,p,C,N,J,ct,Tt,Bt,Xt){var de=Vl(N,ct,Tt),De=Co(N,J),Ge=De*Tt,He=d[0].x===0||d[0].x===Xt||d[0].y===0||d[0].y===Xt;return p-Ge<p/4&&(p=Ge+p/4),function cn(Rn,On,$n,Qn,Sr,Nr,Wr,pi,ai){for(var Bi=Nr/2,zi=gc(Rn),ia=0,va=On-$n,ca=[],ta=0;ta<Rn.length-1;ta++){for(var to=Rn[ta],Ta=Rn[ta+1],pa=to.dist(Ta),Yo=Ta.angleTo(to);va+$n<ia+pa;){var go=((va+=$n)-ia)/pa,Xs=$a(to.x,Ta.x,go),Za=$a(to.y,Ta.y,go);if(Xs>=0&&Xs<ai&&Za>=0&&Za<ai&&va-Bi>=0&&va+Bi<=zi){var rs=new vl(Xs,Za,Yo,ta);rs._round(),Qn&&!uc(Rn,rs,Nr,Qn,Sr)||ca.push(rs)}}ia+=pa}return pi||ca.length||Wr||(ca=cn(Rn,ia/2,$n,Qn,Sr,Nr,Wr,!0,ai)),ca}(d,He?p/2*Bt%p:(De/2+2*ct)*Tt*Bt%p,p,de,C,Ge,He,!1,Xt)}function Ua(d,p,C,N,J){for(var ct=[],Tt=0;Tt<d.length;Tt++)for(var Bt=d[Tt],Xt=void 0,de=0;de<Bt.length-1;de++){var De=Bt[de],Ge=Bt[de+1];De.x<p&&Ge.x<p||(De.x<p?De=new r(p,De.y+(p-De.x)/(Ge.x-De.x)*(Ge.y-De.y))._round():Ge.x<p&&(Ge=new r(p,De.y+(p-De.x)/(Ge.x-De.x)*(Ge.y-De.y))._round()),De.y<C&&Ge.y<C||(De.y<C?De=new r(De.x+(C-De.y)/(Ge.y-De.y)*(Ge.x-De.x),C)._round():Ge.y<C&&(Ge=new r(De.x+(C-De.y)/(Ge.y-De.y)*(Ge.x-De.x),C)._round()),De.x>=N&&Ge.x>=N||(De.x>=N?De=new r(N,De.y+(N-De.x)/(Ge.x-De.x)*(Ge.y-De.y))._round():Ge.x>=N&&(Ge=new r(N,De.y+(N-De.x)/(Ge.x-De.x)*(Ge.y-De.y))._round()),De.y>=J&&Ge.y>=J||(De.y>=J?De=new r(De.x+(J-De.y)/(Ge.y-De.y)*(Ge.x-De.x),J)._round():Ge.y>=J&&(Ge=new r(De.x+(J-De.y)/(Ge.y-De.y)*(Ge.x-De.x),J)._round()),Xt&&De.equals(Xt[Xt.length-1])||ct.push(Xt=[De]),Xt.push(Ge)))))}return ct}function ho(d,p,C,N){var J=[],ct=d.image,Tt=ct.pixelRatio,Bt=ct.paddedRect.w-2,Xt=ct.paddedRect.h-2,de=d.right-d.left,De=d.bottom-d.top,Ge=ct.stretchX||[[0,Bt]],He=ct.stretchY||[[0,Xt]],cn=function(Za,rs){return Za+rs[1]-rs[0]},Rn=Ge.reduce(cn,0),On=He.reduce(cn,0),$n=Bt-Rn,Qn=Xt-On,Sr=0,Nr=Rn,Wr=0,pi=On,ai=0,Bi=$n,zi=0,ia=Qn;if(ct.content&&N){var va=ct.content;Sr=ns(Ge,0,va[0]),Wr=ns(He,0,va[1]),Nr=ns(Ge,va[0],va[2]),pi=ns(He,va[1],va[3]),ai=va[0]-Sr,zi=va[1]-Wr,Bi=va[2]-va[0]-Nr,ia=va[3]-va[1]-pi}var ca=function(Za,rs,Xu,Cu){var ol=mc(Za.stretch-Sr,Nr,de,d.left),sl=Ef(Za.fixed-ai,Bi,Za.stretch,Rn),zu=mc(rs.stretch-Wr,pi,De,d.top),cc=Ef(rs.fixed-zi,ia,rs.stretch,On),Xl=mc(Xu.stretch-Sr,Nr,de,d.left),_c=Ef(Xu.fixed-ai,Bi,Xu.stretch,Rn),fc=mc(Cu.stretch-Wr,pi,De,d.top),wc=Ef(Cu.fixed-zi,ia,Cu.stretch,On),wl=new r(ol,zu),yl=new r(Xl,zu),Il=new r(Xl,fc),qo=new r(ol,fc),is=new r(sl/Tt,cc/Tt),du=new r(_c/Tt,wc/Tt),Mu=p*Math.PI/180;if(Mu){var Ic=Math.sin(Mu),Ju=Math.cos(Mu),$u=[Ju,-Ic,Ic,Ju];wl._matMult($u),yl._matMult($u),qo._matMult($u),Il._matMult($u)}var Mc=Za.stretch+Za.fixed,ls=rs.stretch+rs.fixed;return{tl:wl,tr:yl,bl:qo,br:Il,tex:{x:ct.paddedRect.x+1+Mc,y:ct.paddedRect.y+1+ls,w:Xu.stretch+Xu.fixed-Mc,h:Cu.stretch+Cu.fixed-ls},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:is,pixelOffsetBR:du,minFontScaleX:Bi/Tt/de,minFontScaleY:ia/Tt/De,isSDF:C}};if(N&&(ct.stretchX||ct.stretchY))for(var ta=ec(Ge,$n,Rn),to=ec(He,Qn,On),Ta=0;Ta<ta.length-1;Ta++)for(var pa=ta[Ta],Yo=ta[Ta+1],go=0;go<to.length-1;go++)J.push(ca(pa,to[go],Yo,to[go+1]));else J.push(ca({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Xt+1}));return J}function ns(d,p,C){for(var N=0,J=0,ct=d;J<ct.length;J+=1){var Tt=ct[J];N+=Math.max(p,Math.min(C,Tt[1]))-Math.max(p,Math.min(C,Tt[0]))}return N}function ec(d,p,C){for(var N=[{fixed:-1,stretch:0}],J=0,ct=d;J<ct.length;J+=1){var Tt=ct[J],Bt=Tt[0],Xt=Tt[1],de=N[N.length-1];N.push({fixed:Bt-de.stretch,stretch:de.stretch}),N.push({fixed:Bt-de.stretch,stretch:de.stretch+(Xt-Bt)})}return N.push({fixed:p+1,stretch:C}),N}function mc(d,p,C,N){return d/p*C+N}function Ef(d,p,C,N){return d-p*C/N}var jn=function(p,C,N,J,ct,Tt,Bt,Xt,de,De){if(this.boxStartIndex=p.length,de){var Ge=Tt.top,He=Tt.bottom,cn=Tt.collisionPadding;cn&&(Ge-=cn[1],He+=cn[3]);var Rn=He-Ge;Rn>0&&(Rn=Math.max(10,Rn),this.circleDiameter=Rn)}else{var On=Tt.top*Bt-Xt,$n=Tt.bottom*Bt+Xt,Qn=Tt.left*Bt-Xt,Sr=Tt.right*Bt+Xt,Nr=Tt.collisionPadding;if(Nr&&(Qn-=Nr[0]*Bt,On-=Nr[1]*Bt,Sr+=Nr[2]*Bt,$n+=Nr[3]*Bt),De){var Wr=new r(Qn,On),pi=new r(Sr,On),ai=new r(Qn,$n),Bi=new r(Sr,$n),zi=De*Math.PI/180;Wr._rotate(zi),pi._rotate(zi),ai._rotate(zi),Bi._rotate(zi),Qn=Math.min(Wr.x,pi.x,ai.x,Bi.x),Sr=Math.max(Wr.x,pi.x,ai.x,Bi.x),On=Math.min(Wr.y,pi.y,ai.y,Bi.y),$n=Math.max(Wr.y,pi.y,ai.y,Bi.y)}p.emplaceBack(C.x,C.y,Qn,On,Sr,$n,N,J,ct)}this.boxEndIndex=p.length},Zr=function(p,C){if(p===void 0&&(p=[]),C===void 0&&(C=Ur),this.data=p,this.length=this.data.length,this.compare=C,this.length>0)for(var N=(this.length>>1)-1;N>=0;N--)this._down(N)};function Ur(d,p){return d<p?-1:d>p?1:0}function Qi(d,p,C){p===void 0&&(p=1),C===void 0&&(C=!1);for(var N=1/0,J=1/0,ct=-1/0,Tt=-1/0,Bt=d[0],Xt=0;Xt<Bt.length;Xt++){var de=Bt[Xt];(!Xt||de.x<N)&&(N=de.x),(!Xt||de.y<J)&&(J=de.y),(!Xt||de.x>ct)&&(ct=de.x),(!Xt||de.y>Tt)&&(Tt=de.y)}var De=Math.min(ct-N,Tt-J),Ge=De/2,He=new Zr([],Po);if(De===0)return new r(N,J);for(var cn=N;cn<ct;cn+=De)for(var Rn=J;Rn<Tt;Rn+=De)He.push(new Mn(cn+Ge,Rn+Ge,Ge,d));for(var On=function(Sr){for(var Nr=0,Wr=0,pi=0,ai=Sr[0],Bi=0,zi=ai.length,ia=zi-1;Bi<zi;ia=Bi++){var va=ai[Bi],ca=ai[ia],ta=va.x*ca.y-ca.x*va.y;Wr+=(va.x+ca.x)*ta,pi+=(va.y+ca.y)*ta,Nr+=3*ta}return new Mn(Wr/Nr,pi/Nr,0,Sr)}(d),$n=He.length;He.length;){var Qn=He.pop();(Qn.d>On.d||!On.d)&&(On=Qn,C&&console.log("found best %d after %d probes",Math.round(1e4*Qn.d)/1e4,$n)),Qn.max-On.d<=p||(He.push(new Mn(Qn.p.x-(Ge=Qn.h/2),Qn.p.y-Ge,Ge,d)),He.push(new Mn(Qn.p.x+Ge,Qn.p.y-Ge,Ge,d)),He.push(new Mn(Qn.p.x-Ge,Qn.p.y+Ge,Ge,d)),He.push(new Mn(Qn.p.x+Ge,Qn.p.y+Ge,Ge,d)),$n+=4)}return C&&(console.log("num probes: "+$n),console.log("best distance: "+On.d)),On.p}function Po(d,p){return p.max-d.max}function Mn(d,p,C,N){this.p=new r(d,p),this.h=C,this.d=function(J,ct){for(var Tt=!1,Bt=1/0,Xt=0;Xt<ct.length;Xt++)for(var de=ct[Xt],De=0,Ge=de.length,He=Ge-1;De<Ge;He=De++){var cn=de[De],Rn=de[He];cn.y>J.y!=Rn.y>J.y&&J.x<(Rn.x-cn.x)*(J.y-cn.y)/(Rn.y-cn.y)+cn.x&&(Tt=!Tt),Bt=Math.min(Bt,kc(J,cn,Rn))}return(Tt?1:-1)*Math.sqrt(Bt)}(this.p,N),this.max=this.d+this.h*Math.SQRT2}Zr.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},Zr.prototype.pop=function(){if(this.length!==0){var d=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),d}},Zr.prototype.peek=function(){return this.data[0]},Zr.prototype._up=function(d){for(var p=this.data,C=this.compare,N=p[d];d>0;){var J=d-1>>1,ct=p[J];if(C(N,ct)>=0)break;p[d]=ct,d=J}p[d]=N},Zr.prototype._down=function(d){for(var p=this.data,C=this.compare,N=this.length>>1,J=p[d];d<N;){var ct=1+(d<<1),Tt=p[ct],Bt=ct+1;if(Bt<this.length&&C(p[Bt],Tt)<0&&(ct=Bt,Tt=p[Bt]),C(Tt,J)>=0)break;p[d]=Tt,d=ct}p[d]=J};var on=Number.POSITIVE_INFINITY;function er(d,p){return p[1]!==on?function(C,N,J){var ct=0,Tt=0;switch(N=Math.abs(N),J=Math.abs(J),C){case"top-right":case"top-left":case"top":Tt=J-7;break;case"bottom-right":case"bottom-left":case"bottom":Tt=7-J}switch(C){case"top-right":case"bottom-right":case"right":ct=-N;break;case"top-left":case"bottom-left":case"left":ct=N}return[ct,Tt]}(d,p[0],p[1]):function(C,N){var J=0,ct=0;N<0&&(N=0);var Tt=N/Math.sqrt(2);switch(C){case"top-right":case"top-left":ct=Tt-7;break;case"bottom-right":case"bottom-left":ct=7-Tt;break;case"bottom":ct=7-N;break;case"top":ct=N-7}switch(C){case"top-right":case"bottom-right":J=-Tt;break;case"top-left":case"bottom-left":J=Tt;break;case"left":J=N;break;case"right":J=-N}return[J,ct]}(d,p[0])}function Ir(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wr(d,p,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn){var On=function(Wr,pi,ai,Bi,zi,ia,va,ca){for(var ta=Bi.layout.get("text-rotate").evaluate(ia,{})*Math.PI/180,to=[],Ta=0,pa=pi.positionedLines;Ta<pa.length;Ta+=1)for(var Yo=pa[Ta],go=0,Xs=Yo.positionedGlyphs;go<Xs.length;go+=1){var Za=Xs[go];if(Za.rect){var rs=Za.rect||{},Xu=4,Cu=!0,ol=1,sl=0,zu=(zi||ca)&&Za.vertical,cc=Za.metrics.advance*Za.scale/2;if(ca&&pi.verticalizable&&(sl=Yo.lineOffset/2-(Za.imageName?-(24-Za.metrics.width*Za.scale)/2:24*(Za.scale-1))),Za.imageName){var Xl=va[Za.imageName];Cu=Xl.sdf,Xu=1/(ol=Xl.pixelRatio)}var _c=zi?[Za.x+cc,Za.y]:[0,0],fc=zi?[0,0]:[Za.x+cc+ai[0],Za.y+ai[1]-sl],wc=[0,0];zu&&(wc=fc,fc=[0,0]);var wl=(Za.metrics.left-Xu)*Za.scale-cc+fc[0],yl=(-Za.metrics.top-Xu)*Za.scale+fc[1],Il=wl+rs.w*Za.scale/ol,qo=yl+rs.h*Za.scale/ol,is=new r(wl,yl),du=new r(Il,yl),Mu=new r(wl,qo),Ic=new r(Il,qo);if(zu){var Ju=new r(-cc,cc- -17),$u=-Math.PI/2,Mc=12-cc,ls=new r(22-Mc,-(Za.imageName?Mc:0)),kf=new(Function.prototype.bind.apply(r,[null].concat(wc)));is._rotateAround($u,Ju)._add(ls)._add(kf),du._rotateAround($u,Ju)._add(ls)._add(kf),Mu._rotateAround($u,Ju)._add(ls)._add(kf),Ic._rotateAround($u,Ju)._add(ls)._add(kf)}if(ta){var cf=Math.sin(ta),ff=Math.cos(ta),$c=[ff,-cf,cf,ff];is._matMult($c),du._matMult($c),Mu._matMult($c),Ic._matMult($c)}var Pc=new r(0,0),Lf=new r(0,0);to.push({tl:is,tr:du,bl:Mu,br:Ic,tex:rs,writingMode:pi.writingMode,glyphOffset:_c,sectionIndex:Za.sectionIndex,isSDF:Cu,pixelOffsetTL:Pc,pixelOffsetBR:Lf,minFontScaleX:0,minFontScaleY:0})}}return to}(0,C,Bt,J,ct,Tt,N,d.allowVerticalPlacement),$n=d.textSizeData,Qn=null;$n.kind==="source"?(Qn=[128*J.layout.get("text-size").evaluate(Tt,{})])[0]>32640&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):$n.kind==="composite"&&((Qn=[128*cn.compositeTextSizes[0].evaluate(Tt,{},Rn),128*cn.compositeTextSizes[1].evaluate(Tt,{},Rn)])[0]>32640||Qn[1]>32640)&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),d.addSymbols(d.text,On,Qn,Bt,ct,Tt,de,p,Xt.lineStartIndex,Xt.lineLength,He,Rn);for(var Sr=0,Nr=De;Sr<Nr.length;Sr+=1)Ge[Nr[Sr]]=d.text.placedSymbolArray.length-1;return 4*On.length}function lr(d){for(var p in d)return d[p];return null}function nr(d,p,C,N){var J=d.compareText;if(p in J){for(var ct=J[p],Tt=ct.length-1;Tt>=0;Tt--)if(N.dist(ct[Tt])<C)return!0}else J[p]=[];return J[p].push(N),!1}var Er=Bs.VectorTileFeature.types,Tn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Kn(d,p,C,N,J,ct,Tt,Bt,Xt,de,De,Ge,He){var cn=Bt?Math.min(32640,Math.round(Bt[0])):0,Rn=Bt?Math.min(32640,Math.round(Bt[1])):0;d.emplaceBack(p,C,Math.round(32*N),Math.round(32*J),ct,Tt,(cn<<1)+(Xt?1:0),Rn,16*de,16*De,256*Ge,256*He)}function xn(d,p,C){d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C)}function Tr(d){for(var p=0,C=d.sections;p<C.length;p+=1)if(Pe(C[p].text))return!0;return!1}var jr=function(p){this.layoutVertexArray=new Zi,this.indexArray=new Va,this.programConfigurations=p,this.segments=new Yt,this.dynamicLayoutVertexArray=new Ri,this.opacityVertexArray=new Ma,this.placedSymbolArray=new B};jr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},jr.prototype.upload=function(d,p,C,N){this.isEmpty()||(C&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,tt.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,St.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,Tn,!0),this.opacityVertexBuffer.itemSize=1),(C||N)&&this.programConfigurations.upload(d))},jr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wi("SymbolBuffers",jr);var ci=function(p,C,N){this.layoutVertexArray=new p,this.layoutAttributes=C,this.indexArray=new N,this.segments=new Yt,this.collisionVertexArray=new Pa};ci.prototype.upload=function(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,Lt.members,!0)},ci.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wi("CollisionBuffers",ci);var Kr=function(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(Tt){return Tt.id}),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cl([]),this.placementViewportMatrix=Cl([]);var C=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Zs(this.zoom,C["text-size"]),this.iconSizeData=Zs(this.zoom,C["icon-size"]);var N=this.layers[0].layout,J=N.get("symbol-sort-key"),ct=N.get("symbol-z-order");this.canOverlap=N.get("text-allow-overlap")||N.get("icon-allow-overlap")||N.get("text-ignore-placement")||N.get("icon-ignore-placement"),this.sortFeaturesByKey=ct!=="viewport-y"&&J.constantOr(1)!==void 0,this.sortFeaturesByY=(ct==="viewport-y"||ct==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,N.get("symbol-placement")==="point"&&(this.writingModes=N.get("text-writing-mode").map(function(Tt){return ha[Tt]})),this.stateDependentLayerIds=this.layers.filter(function(Tt){return Tt.isStateDependent()}).map(function(Tt){return Tt.id}),this.sourceID=p.sourceID};Kr.prototype.createArrays=function(){this.text=new jr(new Ia(this.layers,this.zoom,function(d){return/^text/.test(d)})),this.icon=new jr(new Ia(this.layers,this.zoom,function(d){return/^icon/.test(d)})),this.glyphOffsetArray=new $,this.lineVertexArray=new st,this.symbolInstances=new G},Kr.prototype.calculateGlyphDependencies=function(d,p,C,N,J){for(var ct=0;ct<d.length;ct++)if(p[d.charCodeAt(ct)]=!0,(C||N)&&J){var Tt=vn[d.charAt(ct)];Tt&&(p[Tt.charCodeAt(0)]=!0)}},Kr.prototype.populate=function(d,p,C){var N=this.layers[0],J=N.layout,ct=J.get("text-font"),Tt=J.get("text-field"),Bt=J.get("icon-image"),Xt=(Tt.value.kind!=="constant"||Tt.value.value instanceof ka&&!Tt.value.value.isEmpty()||Tt.value.value.toString().length>0)&&(ct.value.kind!=="constant"||ct.value.value.length>0),de=Bt.value.kind!=="constant"||!!Bt.value.value||Object.keys(Bt.parameters).length>0,De=J.get("symbol-sort-key");if(this.features=[],Xt||de){for(var Ge=p.iconDependencies,He=p.glyphDependencies,cn=p.availableImages,Rn=new yr(this.zoom),On=0,$n=d;On<$n.length;On+=1){var Qn=$n[On],Sr=Qn.feature,Nr=Qn.id,Wr=Qn.index,pi=Qn.sourceLayerIndex,ai=N._featureFilter.needGeometry,Bi=js(Sr,ai);if(N._featureFilter.filter(Rn,Bi,C)){ai||(Bi.geometry=es(Sr));var zi=void 0;if(Xt){var ia=N.getValueAndResolveTokens("text-field",Bi,C,cn),va=ka.factory(ia);Tr(va)&&(this.hasRTLText=!0),(!this.hasRTLText||ti()==="unavailable"||this.hasRTLText&&li.isParsed())&&(zi=yn(va,N,Bi))}var ca=void 0;if(de){var ta=N.getValueAndResolveTokens("icon-image",Bi,C,cn);ca=ta instanceof eo?ta:eo.fromString(ta)}if(zi||ca){var to=this.sortFeaturesByKey?De.evaluate(Bi,{},C):void 0;if(this.features.push({id:Nr,text:zi,icon:ca,index:Wr,sourceLayerIndex:pi,geometry:Bi.geometry,properties:Sr.properties,type:Er[Sr.type],sortKey:to}),ca&&(Ge[ca.name]=!0),zi){var Ta=ct.evaluate(Bi,{},C).join(","),pa=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ha.vertical)>=0;for(var Yo=0,go=zi.sections;Yo<go.length;Yo+=1){var Xs=go[Yo];if(Xs.image)Ge[Xs.image.name]=!0;else{var Za=il(zi.toString()),rs=Xs.fontStack||Ta,Xu=He[rs]=He[rs]||{};this.calculateGlyphDependencies(Xs.text,Xu,pa,this.allowVerticalPlacement,Za)}}}}}}J.get("symbol-placement")==="line"&&(this.features=function(Cu){var ol={},sl={},zu=[],cc=0;function Xl(Ju){zu.push(Cu[Ju]),cc++}function _c(Ju,$u,Mc){var ls=sl[Ju];return delete sl[Ju],sl[$u]=ls,zu[ls].geometry[0].pop(),zu[ls].geometry[0]=zu[ls].geometry[0].concat(Mc[0]),ls}function fc(Ju,$u,Mc){var ls=ol[$u];return delete ol[$u],ol[Ju]=ls,zu[ls].geometry[0].shift(),zu[ls].geometry[0]=Mc[0].concat(zu[ls].geometry[0]),ls}function wc(Ju,$u,Mc){var ls=Mc?$u[0][$u[0].length-1]:$u[0][0];return Ju+":"+ls.x+":"+ls.y}for(var wl=0;wl<Cu.length;wl++){var yl=Cu[wl],Il=yl.geometry,qo=yl.text?yl.text.toString():null;if(qo){var is=wc(qo,Il),du=wc(qo,Il,!0);if(is in sl&&du in ol&&sl[is]!==ol[du]){var Mu=fc(is,du,Il),Ic=_c(is,du,zu[Mu].geometry);delete ol[is],delete sl[du],sl[wc(qo,zu[Ic].geometry,!0)]=Ic,zu[Mu].geometry=null}else is in sl?_c(is,du,Il):du in ol?fc(is,du,Il):(Xl(wl),ol[is]=cc-1,sl[du]=cc-1)}else Xl(wl)}return zu.filter(function(Ju){return Ju.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Cu,ol){return Cu.sortKey-ol.sortKey})}},Kr.prototype.update=function(d,p,C){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,p,this.layers,C),this.icon.programConfigurations.updatePaintArrays(d,p,this.layers,C))},Kr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Kr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Kr.prototype.upload=function(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Kr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Kr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Kr.prototype.addToLineVertexArray=function(d,p){var C=this.lineVertexArray.length;if(d.segment!==void 0){for(var N=d.dist(p[d.segment+1]),J=d.dist(p[d.segment]),ct={},Tt=d.segment+1;Tt<p.length;Tt++)ct[Tt]={x:p[Tt].x,y:p[Tt].y,tileUnitDistanceFromAnchor:N},Tt<p.length-1&&(N+=p[Tt+1].dist(p[Tt]));for(var Bt=d.segment||0;Bt>=0;Bt--)ct[Bt]={x:p[Bt].x,y:p[Bt].y,tileUnitDistanceFromAnchor:J},Bt>0&&(J+=p[Bt-1].dist(p[Bt]));for(var Xt=0;Xt<p.length;Xt++){var de=ct[Xt];this.lineVertexArray.emplaceBack(de.x,de.y,de.tileUnitDistanceFromAnchor)}}return{lineStartIndex:C,lineLength:this.lineVertexArray.length-C}},Kr.prototype.addSymbols=function(d,p,C,N,J,ct,Tt,Bt,Xt,de,De,Ge){for(var He=d.indexArray,cn=d.layoutVertexArray,Rn=d.segments.prepareSegment(4*p.length,cn,He,this.canOverlap?ct.sortKey:void 0),On=this.glyphOffsetArray.length,$n=Rn.vertexLength,Qn=this.allowVerticalPlacement&&Tt===ha.vertical?Math.PI/2:0,Sr=ct.text&&ct.text.sections,Nr=0;Nr<p.length;Nr++){var Wr=p[Nr],pi=Wr.tl,ai=Wr.tr,Bi=Wr.bl,zi=Wr.br,ia=Wr.tex,va=Wr.pixelOffsetTL,ca=Wr.pixelOffsetBR,ta=Wr.minFontScaleX,to=Wr.minFontScaleY,Ta=Wr.glyphOffset,pa=Wr.isSDF,Yo=Wr.sectionIndex,go=Rn.vertexLength,Xs=Ta[1];Kn(cn,Bt.x,Bt.y,pi.x,Xs+pi.y,ia.x,ia.y,C,pa,va.x,va.y,ta,to),Kn(cn,Bt.x,Bt.y,ai.x,Xs+ai.y,ia.x+ia.w,ia.y,C,pa,ca.x,va.y,ta,to),Kn(cn,Bt.x,Bt.y,Bi.x,Xs+Bi.y,ia.x,ia.y+ia.h,C,pa,va.x,ca.y,ta,to),Kn(cn,Bt.x,Bt.y,zi.x,Xs+zi.y,ia.x+ia.w,ia.y+ia.h,C,pa,ca.x,ca.y,ta,to),xn(d.dynamicLayoutVertexArray,Bt,Qn),He.emplaceBack(go,go+1,go+2),He.emplaceBack(go+1,go+2,go+3),Rn.vertexLength+=4,Rn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ta[0]),Nr!==p.length-1&&Yo===p[Nr+1].sectionIndex||d.programConfigurations.populatePaintArrays(cn.length,ct,ct.index,{},Ge,Sr&&Sr[Yo])}d.placedSymbolArray.emplaceBack(Bt.x,Bt.y,On,this.glyphOffsetArray.length-On,$n,Xt,de,Bt.segment,C?C[0]:0,C?C[1]:0,N[0],N[1],Tt,0,!1,0,De)},Kr.prototype._addCollisionDebugVertex=function(d,p,C,N,J,ct){return p.emplaceBack(0,0),d.emplaceBack(C.x,C.y,N,J,Math.round(ct.x),Math.round(ct.y))},Kr.prototype.addCollisionDebugVertices=function(d,p,C,N,J,ct,Tt){var Bt=J.segments.prepareSegment(4,J.layoutVertexArray,J.indexArray),Xt=Bt.vertexLength,de=J.layoutVertexArray,De=J.collisionVertexArray,Ge=Tt.anchorX,He=Tt.anchorY;this._addCollisionDebugVertex(de,De,ct,Ge,He,new r(d,p)),this._addCollisionDebugVertex(de,De,ct,Ge,He,new r(C,p)),this._addCollisionDebugVertex(de,De,ct,Ge,He,new r(C,N)),this._addCollisionDebugVertex(de,De,ct,Ge,He,new r(d,N)),Bt.vertexLength+=4;var cn=J.indexArray;cn.emplaceBack(Xt,Xt+1),cn.emplaceBack(Xt+1,Xt+2),cn.emplaceBack(Xt+2,Xt+3),cn.emplaceBack(Xt+3,Xt),Bt.primitiveLength+=4},Kr.prototype.addDebugCollisionBoxes=function(d,p,C,N){for(var J=d;J<p;J++){var ct=this.collisionBoxArray.get(J);this.addCollisionDebugVertices(ct.x1,ct.y1,ct.x2,ct.y2,N?this.textCollisionBox:this.iconCollisionBox,ct.anchorPoint,C)}},Kr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ci(la,ae.members,Ds),this.iconCollisionBox=new ci(la,ae.members,Ds);for(var d=0;d<this.symbolInstances.length;d++){var p=this.symbolInstances.get(d);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}},Kr.prototype._deserializeCollisionBoxesForSymbol=function(d,p,C,N,J,ct,Tt,Bt,Xt){for(var de={},De=p;De<C;De++){var Ge=d.get(De);de.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},de.textFeatureIndex=Ge.featureIndex;break}for(var He=N;He<J;He++){var cn=d.get(He);de.verticalTextBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},de.verticalTextFeatureIndex=cn.featureIndex;break}for(var Rn=ct;Rn<Tt;Rn++){var On=d.get(Rn);de.iconBox={x1:On.x1,y1:On.y1,x2:On.x2,y2:On.y2,anchorPointX:On.anchorPointX,anchorPointY:On.anchorPointY},de.iconFeatureIndex=On.featureIndex;break}for(var $n=Bt;$n<Xt;$n++){var Qn=d.get($n);de.verticalIconBox={x1:Qn.x1,y1:Qn.y1,x2:Qn.x2,y2:Qn.y2,anchorPointX:Qn.anchorPointX,anchorPointY:Qn.anchorPointY},de.verticalIconFeatureIndex=Qn.featureIndex;break}return de},Kr.prototype.deserializeCollisionBoxes=function(d){this.collisionArrays=[];for(var p=0;p<this.symbolInstances.length;p++){var C=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,C.textBoxStartIndex,C.textBoxEndIndex,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C.iconBoxStartIndex,C.iconBoxEndIndex,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex))}},Kr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Kr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Kr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Kr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Kr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Kr.prototype.addIndicesForPlacedSymbol=function(d,p){for(var C=d.placedSymbolArray.get(p),N=C.vertexStartIndex+4*C.numGlyphs,J=C.vertexStartIndex;J<N;J+=4)d.indexArray.emplaceBack(J,J+1,J+2),d.indexArray.emplaceBack(J+1,J+2,J+3)},Kr.prototype.getSortedSymbolIndexes=function(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var p=Math.sin(d),C=Math.cos(d),N=[],J=[],ct=[],Tt=0;Tt<this.symbolInstances.length;++Tt){ct.push(Tt);var Bt=this.symbolInstances.get(Tt);N.push(0|Math.round(p*Bt.anchorX+C*Bt.anchorY)),J.push(Bt.featureIndex)}return ct.sort(function(Xt,de){return N[Xt]-N[de]||J[de]-J[Xt]}),ct},Kr.prototype.addToSortKeyRanges=function(d,p){var C=this.sortKeyRanges[this.sortKeyRanges.length-1];C&&C.sortKey===p?C.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:d,symbolInstanceEnd:d+1})},Kr.prototype.sortFeatures=function(d){var p=this;if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var C=0,N=this.symbolInstanceIndexes;C<N.length;C+=1){var J=this.symbolInstances.get(N[C]);this.featureSortOrder.push(J.featureIndex),[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(function(ct,Tt,Bt){ct>=0&&Bt.indexOf(ct)===Tt&&p.addIndicesForPlacedSymbol(p.text,ct)}),J.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,J.verticalPlacedTextSymbolIndex),J.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.placedIconSymbolIndex),J.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wi("SymbolBucket",Kr,{omit:["layers","collisionBoxArray","features","compareText"]}),Kr.MAX_GLYPHS=65535,Kr.addDynamicAttributes=xn;var oi=new pn({"symbol-placement":new fe(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new fe(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fe(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fe(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fe(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fe(ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fe(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new fe(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fe(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fe(ue.layout_symbol["icon-size"]),"icon-text-fit":new fe(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fe(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fe(ue.layout_symbol["icon-image"]),"icon-rotate":new Fe(ue.layout_symbol["icon-rotate"]),"icon-padding":new fe(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new fe(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Fe(ue.layout_symbol["icon-offset"]),"icon-anchor":new Fe(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fe(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fe(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fe(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Fe(ue.layout_symbol["text-field"]),"text-font":new Fe(ue.layout_symbol["text-font"]),"text-size":new Fe(ue.layout_symbol["text-size"]),"text-max-width":new Fe(ue.layout_symbol["text-max-width"]),"text-line-height":new fe(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Fe(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Fe(ue.layout_symbol["text-justify"]),"text-radial-offset":new Fe(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fe(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Fe(ue.layout_symbol["text-anchor"]),"text-max-angle":new fe(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new fe(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Fe(ue.layout_symbol["text-rotate"]),"text-padding":new fe(ue.layout_symbol["text-padding"]),"text-keep-upright":new fe(ue.layout_symbol["text-keep-upright"]),"text-transform":new Fe(ue.layout_symbol["text-transform"]),"text-offset":new Fe(ue.layout_symbol["text-offset"]),"text-allow-overlap":new fe(ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fe(ue.layout_symbol["text-ignore-placement"]),"text-optional":new fe(ue.layout_symbol["text-optional"])}),Di={paint:new pn({"icon-opacity":new Fe(ue.paint_symbol["icon-opacity"]),"icon-color":new Fe(ue.paint_symbol["icon-color"]),"icon-halo-color":new Fe(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fe(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fe(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new fe(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new fe(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fe(ue.paint_symbol["text-opacity"]),"text-color":new Fe(ue.paint_symbol["text-color"],{runtimeType:Be,getOverride:function(p){return p.textColor},hasOverride:function(p){return!!p.textColor}}),"text-halo-color":new Fe(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Fe(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Fe(ue.paint_symbol["text-halo-blur"]),"text-translate":new fe(ue.paint_symbol["text-translate"]),"text-translate-anchor":new fe(ue.paint_symbol["text-translate-anchor"])}),layout:oi},da=function(p){this.type=p.property.overrides?p.property.overrides.runtimeType:Pr,this.defaultValue=p};da.prototype.evaluate=function(d){if(d.formattedSection){var p=this.defaultValue.property.overrides;if(p&&p.hasOverride(d.formattedSection))return p.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default},da.prototype.eachChild=function(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)},da.prototype.outputDefined=function(){return!1},da.prototype.serialize=function(){return null},Wi("FormatSectionOverride",da,{omit:["defaultValue"]});var Io=function(d){function p(C){d.call(this,C,Di)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){if(d.prototype.recalculate.call(this,C,N),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var J=this.layout.get("text-writing-mode");if(J){for(var ct=[],Tt=0,Bt=J;Tt<Bt.length;Tt+=1){var Xt=Bt[Tt];ct.indexOf(Xt)<0&&ct.push(Xt)}this.layout._values["text-writing-mode"]=ct}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(C,N,J,ct){var Tt=this.layout.get(C).evaluate(N,{},J,ct),Bt=this._unevaluatedLayout._values[C];return Bt.isDataDriven()||vs(Bt.value)||!Tt?Tt:function(Xt,de){return de.replace(/{([^{}]+)}/g,function(De,Ge){return Ge in Xt?String(Xt[Ge]):""})}(N.properties,Tt)},p.prototype.createBucket=function(C){return new Kr(C)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var C=0,N=Di.paint.overridableProperties;C<N.length;C+=1){var J=N[C];if(p.hasPaintOverride(this.layout,J)){var ct,Tt=this.paint.get(J),Bt=new da(Tt),Xt=new Ml(Bt,Tt.property.specification);ct=Tt.value.kind==="constant"||Tt.value.kind==="source"?new gu("source",Xt):new Vu("composite",Xt,Tt.value.zoomStops,Tt.value._interpolationType),this.paint._values[J]=new se(Tt.property,ct,Tt.parameters)}}},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,J){return!(!this.layout||N.isDataDriven()||J.isDataDriven())&&p.hasPaintOverride(this.layout,C)},p.hasPaintOverride=function(C,N){var J=C.get("text-field"),ct=Di.paint.properties[N],Tt=!1,Bt=function(Ge){for(var He=0,cn=Ge;He<cn.length;He+=1)if(ct.overrides&&ct.overrides.hasOverride(cn[He]))return void(Tt=!0)};if(J.value.kind==="constant"&&J.value.value instanceof ka)Bt(J.value.value.sections);else if(J.value.kind==="source"){var Xt=function De(Ge){Tt||(Ge instanceof no&&so(Ge.value)===gn?Bt(Ge.value.sections):Ge instanceof zo?Bt(Ge.sections):Ge.eachChild(De))},de=J.value;de._styleExpression&&Xt(de._styleExpression.expression)}return Tt},p}(hn),ua={paint:new pn({"background-color":new fe(ue.paint_background["background-color"]),"background-pattern":new rn(ue.paint_background["background-pattern"]),"background-opacity":new fe(ue.paint_background["background-opacity"])})},ja=function(d){function p(C){d.call(this,C,ua)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(hn),Eo={paint:new pn({"raster-opacity":new fe(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new fe(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fe(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fe(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new fe(ue.paint_raster["raster-saturation"]),"raster-contrast":new fe(ue.paint_raster["raster-contrast"]),"raster-resampling":new fe(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new fe(ue.paint_raster["raster-fade-duration"])})},gs=function(d){function p(C){d.call(this,C,Eo)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(hn),Fu=function(d){function p(C){d.call(this,C,{}),this.implementation=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},p.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},p.prototype.recalculate=function(){},p.prototype.updateTransitions=function(){},p.prototype.hasTransition=function(){},p.prototype.serialize=function(){},p.prototype.onAdd=function(C){this.implementation.onAdd&&this.implementation.onAdd(C,C.painter.context.gl)},p.prototype.onRemove=function(C){this.implementation.onRemove&&this.implementation.onRemove(C,C.painter.context.gl)},p}(hn),Uc={circle:Rc,heatmap:Zf,hillshade:Kf,fill:Qr,"fill-extrusion":ps,line:jt,symbol:Io,background:ja,raster:gs},$f=n.HTMLImageElement,Bc=n.HTMLCanvasElement,Ff=n.HTMLVideoElement,Jc=n.ImageData,Qf=n.ImageBitmap,Kl=function(p,C,N,J){this.context=p,this.format=N,this.texture=p.gl.createTexture(),this.update(C,J)};Kl.prototype.update=function(d,p,C){var N=d.width,J=d.height,ct=!(this.size&&this.size[0]===N&&this.size[1]===J||C),Tt=this.context,Bt=Tt.gl;if(this.useMipmap=Boolean(p&&p.useMipmap),Bt.bindTexture(Bt.TEXTURE_2D,this.texture),Tt.pixelStoreUnpackFlipY.set(!1),Tt.pixelStoreUnpack.set(1),Tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!p||p.premultiply!==!1)),ct)this.size=[N,J],d instanceof $f||d instanceof Bc||d instanceof Ff||d instanceof Jc||Qf&&d instanceof Qf?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,d):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,N,J,0,this.format,Bt.UNSIGNED_BYTE,d.data);else{var Xt=C||{x:0,y:0},de=Xt.x,De=Xt.y;d instanceof $f||d instanceof Bc||d instanceof Ff||d instanceof Jc||Qf&&d instanceof Qf?Bt.texSubImage2D(Bt.TEXTURE_2D,0,de,De,Bt.RGBA,Bt.UNSIGNED_BYTE,d):Bt.texSubImage2D(Bt.TEXTURE_2D,0,de,De,N,J,Bt.RGBA,Bt.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Bt.generateMipmap(Bt.TEXTURE_2D)},Kl.prototype.bind=function(d,p,C){var N=this.context.gl;N.bindTexture(N.TEXTURE_2D,this.texture),C!==N.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=N.LINEAR),d!==this.filter&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,d),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,C||d),this.filter=d),p!==this.wrap&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,p),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,p),this.wrap=p)},Kl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Kl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var pd=function(p){var C=this;this._callback=p,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){C._triggered=!1,C._callback()})};pd.prototype.trigger=function(){var d=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){d._triggered=!1,d._callback()},0))},pd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yh=function(p,C,N){this.target=p,this.parent=C,this.mapId=N,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new pd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=F()?p:n};function Su(d,p,C){var N=2*Math.PI*6378137/256/Math.pow(2,C);return[d*N-2*Math.PI*6378137/2,p*N-2*Math.PI*6378137/2]}yh.prototype.send=function(d,p,C,N,J){var ct=this;J===void 0&&(J=!1);var Tt=Math.round(1e18*Math.random()).toString(36).substring(0,10);C&&(this.callbacks[Tt]=C);var Bt=k(this.globalScope)?void 0:[];return this.target.postMessage({id:Tt,type:d,hasCallback:!!C,targetMapId:N,mustQueue:J,sourceMapId:this.mapId,data:jo(p,Bt)},Bt),{cancel:function(){C&&delete ct.callbacks[Tt],ct.target.postMessage({id:Tt,type:"<cancel>",targetMapId:N,sourceMapId:ct.mapId})}}},yh.prototype.receive=function(d){var p=d.data,C=p.id;if(C&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[C];var N=this.cancelCallbacks[C];delete this.cancelCallbacks[C],N&&N()}else F()||p.mustQueue?(this.tasks[C]=p,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,p)},yh.prototype.process=function(){if(this.taskQueue.length){var d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)}},yh.prototype.processTask=function(d,p){var C=this;if(p.type==="<response>"){var N=this.callbacks[d];delete this.callbacks[d],N&&(p.error?N(Bo(p.error)):N(null,Bo(p.data)))}else{var J=!1,ct=k(this.globalScope)?void 0:[],Tt=p.hasCallback?function(De,Ge){J=!0,delete C.cancelCallbacks[d],C.target.postMessage({id:d,type:"<response>",sourceMapId:C.mapId,error:De?jo(De):null,data:jo(Ge,ct)},ct)}:function(De){J=!0},Bt=null,Xt=Bo(p.data);if(this.parent[p.type])Bt=this.parent[p.type](p.sourceMapId,Xt,Tt);else if(this.parent.getWorkerSource){var de=p.type.split(".");Bt=this.parent.getWorkerSource(p.sourceMapId,de[0],Xt.source)[de[1]](Xt,Tt)}else Tt(new Error("Could not find function "+p.type));!J&&Bt&&Bt.cancel&&(this.cancelCallbacks[d]=Bt.cancel)}},yh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var nc=function(p,C){p&&(C?this.setSouthWest(p).setNorthEast(C):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))};nc.prototype.setNorthEast=function(d){return this._ne=d instanceof _u?new _u(d.lng,d.lat):_u.convert(d),this},nc.prototype.setSouthWest=function(d){return this._sw=d instanceof _u?new _u(d.lng,d.lat):_u.convert(d),this},nc.prototype.extend=function(d){var p,C,N=this._sw,J=this._ne;if(d instanceof _u)p=d,C=d;else{if(!(d instanceof nc))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(nc.convert(d)):this.extend(_u.convert(d)):this;if(C=d._ne,!(p=d._sw)||!C)return this}return N||J?(N.lng=Math.min(p.lng,N.lng),N.lat=Math.min(p.lat,N.lat),J.lng=Math.max(C.lng,J.lng),J.lat=Math.max(C.lat,J.lat)):(this._sw=new _u(p.lng,p.lat),this._ne=new _u(C.lng,C.lat)),this},nc.prototype.getCenter=function(){return new _u((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},nc.prototype.getSouthWest=function(){return this._sw},nc.prototype.getNorthEast=function(){return this._ne},nc.prototype.getNorthWest=function(){return new _u(this.getWest(),this.getNorth())},nc.prototype.getSouthEast=function(){return new _u(this.getEast(),this.getSouth())},nc.prototype.getWest=function(){return this._sw.lng},nc.prototype.getSouth=function(){return this._sw.lat},nc.prototype.getEast=function(){return this._ne.lng},nc.prototype.getNorth=function(){return this._ne.lat},nc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},nc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},nc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},nc.prototype.contains=function(d){var p=_u.convert(d),C=p.lng,N=p.lat,J=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&(J=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=N&&N<=this._ne.lat&&J},nc.convert=function(d){return!d||d instanceof nc?d:new nc(d)};var _u=function(p,C){if(isNaN(p)||isNaN(C))throw new Error("Invalid LngLat object: ("+p+", "+C+")");if(this.lng=+p,this.lat=+C,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_u.prototype.wrap=function(){return new _u(f(this.lng,-180,180),this.lat)},_u.prototype.toArray=function(){return[this.lng,this.lat]},_u.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_u.prototype.distanceTo=function(d){var p=Math.PI/180,C=this.lat*p,N=d.lat*p,J=Math.sin(C)*Math.sin(N)+Math.cos(C)*Math.cos(N)*Math.cos((d.lng-this.lng)*p);return 63710088e-1*Math.acos(Math.min(J,1))},_u.prototype.toBounds=function(d){d===void 0&&(d=0);var p=360*d/40075017,C=p/Math.cos(Math.PI/180*this.lat);return new nc(new _u(this.lng-C,this.lat-p),new _u(this.lng+C,this.lat+p))},_u.convert=function(d){if(d instanceof _u)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new _u(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new _u(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var xh=2*Math.PI*63710088e-1;function Rd(d){return xh*Math.cos(d*Math.PI/180)}function Dd(d){return(180+d)/360}function jd(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Bd(d,p){return d/Rd(p)}function gd(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}var qf=function(p,C,N){N===void 0&&(N=0),this.x=+p,this.y=+C,this.z=+N};qf.fromLngLat=function(d,p){p===void 0&&(p=0);var C=_u.convert(d);return new qf(Dd(C.lng),jd(C.lat),Bd(p,C.lat))},qf.prototype.toLngLat=function(){return new _u(360*this.x-180,gd(this.y))},qf.prototype.toAltitude=function(){return this.z*Rd(gd(this.y))},qf.prototype.meterInMercatorCoordinateUnits=function(){return 1/xh*(d=gd(this.y),1/Math.cos(d*Math.PI/180));var d};var th=function(p,C,N){this.z=p,this.x=C,this.y=N,this.key=jh(0,p,p,C,N)};th.prototype.equals=function(d){return this.z===d.z&&this.x===d.x&&this.y===d.y},th.prototype.url=function(d,p){var C,N,J,ct,Tt,Bt=(N=this.y,J=this.z,ct=Su(256*(C=this.x),256*(N=Math.pow(2,J)-N-1),J),Tt=Su(256*(C+1),256*(N+1),J),ct[0]+","+ct[1]+","+Tt[0]+","+Tt[1]),Xt=function(de,De,Ge){for(var He,cn="",Rn=de;Rn>0;Rn--)cn+=(De&(He=1<<Rn-1)?1:0)+(Ge&He?2:0);return cn}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Xt).replace("{bbox-epsg-3857}",Bt)},th.prototype.getTilePoint=function(d){var p=Math.pow(2,this.z);return new r(8192*(d.x*p-this.x),8192*(d.y*p-this.y))},th.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nd=function(p,C){this.wrap=p,this.canonical=C,this.key=jh(p,C.z,C.z,C.x,C.y)},rc=function(p,C,N,J,ct){this.overscaledZ=p,this.wrap=C,this.canonical=new th(N,+J,+ct),this.key=jh(C,p,N,J,ct)};function jh(d,p,C,N,J){(d*=2)<0&&(d=-1*d-1);var ct=1<<C;return(ct*ct*d+ct*J+N).toString(36)+C.toString(36)+p.toString(36)}rc.prototype.equals=function(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)},rc.prototype.scaledTo=function(d){var p=this.canonical.z-d;return d>this.canonical.z?new rc(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rc(d,this.wrap,d,this.canonical.x>>p,this.canonical.y>>p)},rc.prototype.calculateScaledKey=function(d,p){var C=this.canonical.z-d;return d>this.canonical.z?jh(this.wrap*+p,d,this.canonical.z,this.canonical.x,this.canonical.y):jh(this.wrap*+p,d,d,this.canonical.x>>C,this.canonical.y>>C)},rc.prototype.isChildOf=function(d){if(d.wrap!==this.wrap)return!1;var p=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>p&&d.canonical.y===this.canonical.y>>p},rc.prototype.children=function(d){if(this.overscaledZ>=d)return[new rc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var p=this.canonical.z+1,C=2*this.canonical.x,N=2*this.canonical.y;return[new rc(p,this.wrap,p,C,N),new rc(p,this.wrap,p,C+1,N),new rc(p,this.wrap,p,C,N+1),new rc(p,this.wrap,p,C+1,N+1)]},rc.prototype.isLessThan=function(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))},rc.prototype.wrapped=function(){return new rc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},rc.prototype.unwrapTo=function(d){return new rc(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)},rc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},rc.prototype.toUnwrapped=function(){return new Nd(this.wrap,this.canonical)},rc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},rc.prototype.getTilePoint=function(d){return this.canonical.getTilePoint(new qf(d.x-this.wrap,d.y))},Wi("CanonicalTileID",th),Wi("OverscaledTileID",rc,{omit:["posMatrix"]});var If=function(p,C,N){if(this.uid=p,C.height!==C.width)throw new RangeError("DEM tiles must be square");if(N&&N!=="mapbox"&&N!=="terrarium")return O('"'+N+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=C.height;var J=this.dim=C.height-2;this.data=new Uint32Array(C.data.buffer),this.encoding=N||"mapbox";for(var ct=0;ct<J;ct++)this.data[this._idx(-1,ct)]=this.data[this._idx(0,ct)],this.data[this._idx(J,ct)]=this.data[this._idx(J-1,ct)],this.data[this._idx(ct,-1)]=this.data[this._idx(ct,0)],this.data[this._idx(ct,J)]=this.data[this._idx(ct,J-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(J,-1)]=this.data[this._idx(J-1,0)],this.data[this._idx(-1,J)]=this.data[this._idx(0,J-1)],this.data[this._idx(J,J)]=this.data[this._idx(J-1,J-1)]};If.prototype.get=function(d,p){var C=new Uint8Array(this.data.buffer),N=4*this._idx(d,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(C[N],C[N+1],C[N+2])},If.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},If.prototype._idx=function(d,p){if(d<-1||d>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(d+1)},If.prototype._unpackMapbox=function(d,p,C){return(256*d*256+256*p+C)/10-1e4},If.prototype._unpackTerrarium=function(d,p,C){return 256*d+p+C/256-32768},If.prototype.getPixels=function(){return new Nu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},If.prototype.backfillBorder=function(d,p,C){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");var N=p*this.dim,J=p*this.dim+this.dim,ct=C*this.dim,Tt=C*this.dim+this.dim;switch(p){case-1:N=J-1;break;case 1:J=N+1}switch(C){case-1:ct=Tt-1;break;case 1:Tt=ct+1}for(var Bt=-p*this.dim,Xt=-C*this.dim,de=ct;de<Tt;de++)for(var De=N;De<J;De++)this.data[this._idx(De,de)]=d.data[this._idx(De+Bt,de+Xt)]},Wi("DEMData",If);var Jh=function(p){this._stringToNumber={},this._numberToString=[];for(var C=0;C<p.length;C++){var N=p[C];this._stringToNumber[N]=C,this._numberToString[C]=N}};Jh.prototype.encode=function(d){return this._stringToNumber[d]},Jh.prototype.decode=function(d){return this._numberToString[d]};var Bh=function(p,C,N,J,ct){this.type="Feature",this._vectorTileFeature=p,p._z=C,p._x=N,p._y=J,this.properties=p.properties,this.id=ct},md={geometry:{configurable:!0}};md.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},md.geometry.set=function(d){this._geometry=d},Bh.prototype.toJSON=function(){var d={geometry:this.geometry};for(var p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(d[p]=this[p]);return d},Object.defineProperties(Bh.prototype,md);var bh=function(){this.state={},this.stateChanges={},this.deletedStates={}};bh.prototype.updateState=function(d,p,C){var N=String(p);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][N]=this.stateChanges[d][N]||{},v(this.stateChanges[d][N],C),this.deletedStates[d]===null)for(var J in this.deletedStates[d]={},this.state[d])J!==N&&(this.deletedStates[d][J]=null);else if(this.deletedStates[d]&&this.deletedStates[d][N]===null)for(var ct in this.deletedStates[d][N]={},this.state[d][N])C[ct]||(this.deletedStates[d][N][ct]=null);else for(var Tt in C)this.deletedStates[d]&&this.deletedStates[d][N]&&this.deletedStates[d][N][Tt]===null&&delete this.deletedStates[d][N][Tt]},bh.prototype.removeFeatureState=function(d,p,C){if(this.deletedStates[d]!==null){var N=String(p);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&p!==void 0)this.deletedStates[d][N]!==null&&(this.deletedStates[d][N]=this.deletedStates[d][N]||{},this.deletedStates[d][N][C]=null);else if(p!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][N])for(C in this.deletedStates[d][N]={},this.stateChanges[d][N])this.deletedStates[d][N][C]=null;else this.deletedStates[d][N]=null;else this.deletedStates[d]=null}},bh.prototype.getState=function(d,p){var C=String(p),N=v({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){var J=this.deletedStates[d][p];if(J===null)return{};for(var ct in J)delete N[ct]}return N},bh.prototype.initializeTileState=function(d,p){d.setFeatureState(this.state,p)},bh.prototype.coalesceChanges=function(d,p){var C={};for(var N in this.stateChanges){this.state[N]=this.state[N]||{};var J={};for(var ct in this.stateChanges[N])this.state[N][ct]||(this.state[N][ct]={}),v(this.state[N][ct],this.stateChanges[N][ct]),J[ct]=this.state[N][ct];C[N]=J}for(var Tt in this.deletedStates){this.state[Tt]=this.state[Tt]||{};var Bt={};if(this.deletedStates[Tt]===null)for(var Xt in this.state[Tt])Bt[Xt]={},this.state[Tt][Xt]={};else for(var de in this.deletedStates[Tt]){if(this.deletedStates[Tt][de]===null)this.state[Tt][de]={};else for(var De=0,Ge=Object.keys(this.deletedStates[Tt][de]);De<Ge.length;De+=1)delete this.state[Tt][de][Ge[De]];Bt[de]=this.state[Tt][de]}C[Tt]=C[Tt]||{},v(C[Tt],Bt)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(var He in d)d[He].setFeatureState(C,p)};var zf=function(p,C){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Ys(8192,16,0),this.grid3D=new Ys(8192,16,0),this.featureIndexArray=new wt,this.promoteId=C};function Fd(d,p,C,N,J){return m(d,function(ct,Tt){var Bt=p instanceof re?p.get(Tt):null;return Bt&&Bt.evaluate?Bt.evaluate(C,N,J):Bt})}function zd(d){for(var p=1/0,C=1/0,N=-1/0,J=-1/0,ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct];p=Math.min(p,Bt.x),C=Math.min(C,Bt.y),N=Math.max(N,Bt.x),J=Math.max(J,Bt.y)}return{minX:p,minY:C,maxX:N,maxY:J}}function Xd(d,p){return p-d}zf.prototype.insert=function(d,p,C,N,J,ct){var Tt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(C,N,J);for(var Bt=ct?this.grid3D:this.grid,Xt=0;Xt<p.length;Xt++){for(var de=p[Xt],De=[1/0,1/0,-1/0,-1/0],Ge=0;Ge<de.length;Ge++){var He=de[Ge];De[0]=Math.min(De[0],He.x),De[1]=Math.min(De[1],He.y),De[2]=Math.max(De[2],He.x),De[3]=Math.max(De[3],He.y)}De[0]<8192&&De[1]<8192&&De[2]>=0&&De[3]>=0&&Bt.insert(Tt,De[0],De[1],De[2],De[3])}},zf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Bs.VectorTile(new _e(this.rawTileData)).layers,this.sourceLayerCoder=new Jh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},zf.prototype.query=function(d,p,C,N){var J=this;this.loadVTLayers();for(var ct=d.params||{},Tt=8192/d.tileSize/d.scale,Bt=mu(ct.filter),Xt=d.queryGeometry,de=d.queryPadding*Tt,De=zd(Xt),Ge=this.grid.query(De.minX-de,De.minY-de,De.maxX+de,De.maxY+de),He=zd(d.cameraQueryGeometry),cn=this.grid3D.query(He.minX-de,He.minY-de,He.maxX+de,He.maxY+de,function(Wr,pi,ai,Bi){return function(zi,ia,va,ca,ta){for(var to=0,Ta=zi;to<Ta.length;to+=1){var pa=Ta[to];if(ia<=pa.x&&va<=pa.y&&ca>=pa.x&&ta>=pa.y)return!0}var Yo=[new r(ia,va),new r(ia,ta),new r(ca,ta),new r(ca,va)];if(zi.length>2){for(var go=0,Xs=Yo;go<Xs.length;go+=1)if(Lc(zi,Xs[go]))return!0}for(var Za=0;Za<zi.length-1;Za++)if(Zc(zi[Za],zi[Za+1],Yo))return!0;return!1}(d.cameraQueryGeometry,Wr-de,pi-de,ai+de,Bi+de)}),Rn=0,On=cn;Rn<On.length;Rn+=1)Ge.push(On[Rn]);Ge.sort(Xd);for(var $n,Qn={},Sr=function(pi){var ai=Ge[pi];if(ai!==$n){$n=ai;var Bi=J.featureIndexArray.get(ai),zi=null;J.loadMatchingFeature(Qn,Bi.bucketIndex,Bi.sourceLayerIndex,Bi.featureIndex,Bt,ct.layers,ct.availableImages,p,C,N,function(ia,va,ca){return zi||(zi=es(ia)),va.queryIntersectsFeature(Xt,ia,ca,zi,J.z,d.transform,Tt,d.pixelPosMatrix)})}},Nr=0;Nr<Ge.length;Nr++)Sr(Nr);return Qn},zf.prototype.loadMatchingFeature=function(d,p,C,N,J,ct,Tt,Bt,Xt,de,De){var Ge=this.bucketLayerIDs[p];if(!ct||function(zi,ia){for(var va=0;va<zi.length;va++)if(ia.indexOf(zi[va])>=0)return!0;return!1}(ct,Ge)){var He=this.sourceLayerCoder.decode(C),cn=this.vtLayers[He].feature(N);if(J.needGeometry){var Rn=js(cn,!0);if(!J.filter(new yr(this.tileID.overscaledZ),Rn,this.tileID.canonical))return}else if(!J.filter(new yr(this.tileID.overscaledZ),cn))return;for(var On=this.getId(cn,He),$n=0;$n<Ge.length;$n++){var Qn=Ge[$n];if(!(ct&&ct.indexOf(Qn)<0)){var Sr=Bt[Qn];if(Sr){var Nr={};On!==void 0&&de&&(Nr=de.getState(Sr.sourceLayer||"_geojsonTileLayer",On));var Wr=v({},Xt[Qn]);Wr.paint=Fd(Wr.paint,Sr.paint,cn,Nr,Tt),Wr.layout=Fd(Wr.layout,Sr.layout,cn,Nr,Tt);var pi=!De||De(cn,Sr,Nr);if(pi){var ai=new Bh(cn,this.z,this.x,this.y,On);ai.layer=Wr;var Bi=d[Qn];Bi===void 0&&(Bi=d[Qn]=[]),Bi.push({featureIndex:N,feature:ai,intersectionZ:pi})}}}}}},zf.prototype.lookupSymbolFeatures=function(d,p,C,N,J,ct,Tt,Bt){var Xt={};this.loadVTLayers();for(var de=mu(J),De=0,Ge=d;De<Ge.length;De+=1)this.loadMatchingFeature(Xt,C,N,Ge[De],de,ct,Tt,Bt,p);return Xt},zf.prototype.hasLayer=function(d){for(var p=0,C=this.bucketLayerIDs;p<C.length;p+=1)for(var N=0,J=C[p];N<J.length;N+=1)if(d===J[N])return!0;return!1},zf.prototype.getId=function(d,p){var C=d.id;return this.promoteId&&typeof(C=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]])=="boolean"&&(C=Number(C)),C},Wi("FeatureIndex",zf,{omit:["rawTileData","sourceLayerCoder"]});var lc=function(p,C){this.tileID=p,this.uid=y(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};lc.prototype.registerFadeDuration=function(d){var p=d+this.timeAdded;p<Rt.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)},lc.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},lc.prototype.loadVectorData=function(d,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){for(var N in d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(de,De){var Ge={};if(!De)return Ge;for(var He=function(){var $n=Rn[cn],Qn=$n.layerIds.map(function(Wr){return De.getLayer(Wr)}).filter(Boolean);if(Qn.length!==0){$n.layers=Qn,$n.stateDependentLayerIds&&($n.stateDependentLayers=$n.stateDependentLayerIds.map(function(Wr){return Qn.filter(function(pi){return pi.id===Wr})[0]}));for(var Sr=0,Nr=Qn;Sr<Nr.length;Sr+=1)Ge[Nr[Sr].id]=$n}},cn=0,Rn=de;cn<Rn.length;cn+=1)He();return Ge}(d.buckets,p.style),this.hasSymbolBuckets=!1,this.buckets){var J=this.buckets[N];if(J instanceof Kr){if(this.hasSymbolBuckets=!0,!C)break;J.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ct in this.buckets){var Tt=this.buckets[ct];if(Tt instanceof Kr&&Tt.hasRTLText){this.hasRTLText=!0,li.isLoading()||li.isLoaded()||ti()!=="deferred"||Fr();break}}for(var Bt in this.queryPadding=0,this.buckets){var Xt=this.buckets[Bt];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(Bt).queryRadius(Xt))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new I},lc.prototype.unloadVectorData=function(){for(var d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},lc.prototype.getBucket=function(d){return this.buckets[d.id]},lc.prototype.upload=function(d){for(var p in this.buckets){var C=this.buckets[p];C.uploadPending()&&C.upload(d)}var N=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kl(d,this.imageAtlas.image,N.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kl(d,this.glyphAtlasImage,N.ALPHA),this.glyphAtlasImage=null)},lc.prototype.prepare=function(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)},lc.prototype.queryRenderedFeatures=function(d,p,C,N,J,ct,Tt,Bt,Xt,de){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:N,cameraQueryGeometry:J,scale:ct,tileSize:this.tileSize,pixelPosMatrix:de,transform:Bt,params:Tt,queryPadding:this.queryPadding*Xt},d,p,C):{}},lc.prototype.querySourceFeatures=function(d,p){var C=this.latestFeatureIndex;if(C&&C.rawTileData){var N=C.loadVTLayers(),J=p?p.sourceLayer:"",ct=N._geojsonTileLayer||N[J];if(ct)for(var Tt=mu(p&&p.filter),Bt=this.tileID.canonical,Xt=Bt.z,de=Bt.x,De=Bt.y,Ge={z:Xt,x:de,y:De},He=0;He<ct.length;He++){var cn=ct.feature(He);if(Tt.needGeometry){var Rn=js(cn,!0);if(!Tt.filter(new yr(this.tileID.overscaledZ),Rn,this.tileID.canonical))continue}else if(!Tt.filter(new yr(this.tileID.overscaledZ),cn))continue;var On=C.getId(cn,J),$n=new Bh(cn,Xt,de,De,On);$n.tile=Ge,d.push($n)}}},lc.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},lc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},lc.prototype.setExpiryData=function(d){var p=this.expirationTime;if(d.cacheControl){var C=K(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){var N=Date.now(),J=!1;if(this.expirationTime>N)J=!1;else if(p)if(this.expirationTime<p)J=!0;else{var ct=this.expirationTime-p;ct?this.expirationTime=N+Math.max(ct,3e4):J=!0}else J=!0;J?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},lc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},lc.prototype.setFeatureState=function(d,p){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(d).length!==0){var C=this.latestFeatureIndex.loadVTLayers();for(var N in this.buckets)if(p.style.hasLayer(N)){var J=this.buckets[N],ct=J.layers[0].sourceLayer||"_geojsonTileLayer",Tt=C[ct],Bt=d[ct];if(Tt&&Bt&&Object.keys(Bt).length!==0){J.update(Bt,Tt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Xt=p&&p.style&&p.style.getLayer(N);Xt&&(this.queryPadding=Math.max(this.queryPadding,Xt.queryRadius(J)))}}}},lc.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},lc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Rt.now()},lc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},lc.prototype.setHoldDuration=function(d){this.symbolFadeHoldUntil=Rt.now()+d},lc.prototype.setDependencies=function(d,p){for(var C={},N=0,J=p;N<J.length;N+=1)C[J[N]]=!0;this.dependencies[d]=C},lc.prototype.hasDependency=function(d,p){for(var C=0,N=d;C<N.length;C+=1){var J=this.dependencies[N[C]];if(J){for(var ct=0,Tt=p;ct<Tt.length;ct+=1)if(J[Tt[ct]])return!0}}return!1};var Uf=n.performance,Ud=function(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},Uf.mark(this._marks.start)};Ud.prototype.finish=function(){Uf.mark(this._marks.end);var d=Uf.getEntriesByName(this._marks.measure);return d.length===0&&(Uf.measure(this._marks.measure,this._marks.start,this._marks.end),d=Uf.getEntriesByName(this._marks.measure),Uf.clearMarks(this._marks.start),Uf.clearMarks(this._marks.end),Uf.clearMeasures(this._marks.measure)),d},t.Actor=yh,t.AlphaImage=Ul,t.CanonicalTileID=th,t.CollisionBoxArray=I,t.Color=zr,t.DEMData=If,t.DataConstantProperty=fe,t.DictionaryCoder=Jh,t.EXTENT=8192,t.ErrorEvent=ie,t.EvaluationParameters=yr,t.Event=Wt,t.Evented=Ae,t.FeatureIndex=zf,t.FillBucket=Gn,t.FillExtrusionBucket=io,t.ImageAtlas=ra,t.ImagePosition=yi,t.LineBucket=ic,t.LngLat=_u,t.LngLatBounds=nc,t.MercatorCoordinate=qf,t.ONE_EM=24,t.OverscaledTileID=rc,t.Point=r,t.Point$1=r,t.Properties=pn,t.Protobuf=_e,t.RGBAImage=Nu,t.RequestManager=Q,t.RequestPerformance=Ud,t.ResourceType=Xn,t.SegmentVector=Yt,t.SourceFeatureState=bh,t.StructArrayLayout1ui2=Ku,t.StructArrayLayout2f1f2i16=ii,t.StructArrayLayout2i4=xr,t.StructArrayLayout3ui6=Va,t.StructArrayLayout4i8=Hr,t.SymbolBucket=Kr,t.Texture=Kl,t.Tile=lc,t.Transitionable=Le,t.Uniform1f=$r,t.Uniform1i=Mr,t.Uniform2f=Yr,t.Uniform3f=Ti,t.Uniform4f=Li,t.UniformColor=Ki,t.UniformMatrix4f=Oa,t.UnwrappedTileID=Nd,t.ValidationError=xe,t.WritingMode=ha,t.ZoomHistory=Tu,t.add=function(d,p,C){return d[0]=p[0]+C[0],d[1]=p[1]+C[1],d[2]=p[2]+C[2],d},t.addDynamicAttributes=xn,t.asyncAll=function(d,p,C){if(!d.length)return C(null,[]);var N=d.length,J=new Array(d.length),ct=null;d.forEach(function(Tt,Bt){p(Tt,function(Xt,de){Xt&&(ct=Xt),J[Bt]=de,--N==0&&C(ct,J)})})},t.bezier=a,t.bindAll=M,t.browser=Rt,t.cacheEntryPossiblyAdded=function(d){++Xe>me&&(d.getActor().send("enforceCacheSizeLimit",Me),Xe=0)},t.clamp=u,t.clearTileCache=function(d){var p=n.caches.delete("mapbox-tiles");d&&p.catch(d).then(function(){return d()})},t.clipLine=Ua,t.clone=function(d){var p=new al(16);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=d[6],p[7]=d[7],p[8]=d[8],p[9]=d[9],p[10]=d[10],p[11]=d[11],p[12]=d[12],p[13]=d[13],p[14]=d[14],p[15]=d[15],p},t.clone$1=P,t.clone$2=function(d){var p=new al(3);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p},t.collisionCircleLayout=ke,t.config=Mt,t.create=function(){var d=new al(16);return al!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},t.create$1=function(){var d=new al(9);return al!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d},t.create$2=function(){var d=new al(4);return al!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.createCommonjsModule=l,t.createExpression=wu,t.createLayout=Wn,t.createStyleLayer=function(d){return d.type==="custom"?new Fu(d):new Uc[d.type](d)},t.cross=function(d,p,C){var N=p[0],J=p[1],ct=p[2],Tt=C[0],Bt=C[1],Xt=C[2];return d[0]=J*Xt-ct*Bt,d[1]=ct*Tt-N*Xt,d[2]=N*Bt-J*Tt,d},t.deepEqual=function d(p,C){if(Array.isArray(p)){if(!Array.isArray(C)||p.length!==C.length)return!1;for(var N=0;N<p.length;N++)if(!d(p[N],C[N]))return!1;return!0}if(typeof p=="object"&&p!==null&&C!==null){if(typeof C!="object"||Object.keys(p).length!==Object.keys(C).length)return!1;for(var J in p)if(!d(p[J],C[J]))return!1;return!0}return p===C},t.dot=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]},t.dot$1=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},t.ease=o,t.emitValidationErrors=lu,t.endsWith=x,t.enforceCacheSizeLimit=function(d){le(),_t&&_t.then(function(p){p.keys().then(function(C){for(var N=0;N<C.length-d;N++)p.delete(C[N])})})},t.evaluateSizeForFeature=Gl,t.evaluateSizeForZoom=Zl,t.evaluateVariableOffset=er,t.evented=Xr,t.extend=v,t.featureFilter=mu,t.filterObject=S,t.fromRotation=function(d,p){var C=Math.sin(p),N=Math.cos(p);return d[0]=N,d[1]=C,d[2]=0,d[3]=-C,d[4]=N,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.getAnchorAlignment=dl,t.getAnchorJustification=Ir,t.getArrayBuffer=fr,t.getImage=Te,t.getJSON=function(d,p){return Nn(v(d,{type:"json"}),p)},t.getRTLTextPluginStatus=ti,t.getReferrer=nn,t.getVideo=function(d,p){var C,N,J=n.document.createElement("video");J.muted=!0,J.onloadstart=function(){p(null,J)};for(var ct=0;ct<d.length;ct++){var Tt=n.document.createElement("source");C=d[ct],N=void 0,(N=n.document.createElement("a")).href=C,(N.protocol!==n.document.location.protocol||N.host!==n.document.location.host)&&(J.crossOrigin="Anonymous"),Tt.src=d[ct],J.appendChild(Tt)}return{cancel:function(){}}},t.identity=Cl,t.invert=function(d,p){var C=p[0],N=p[1],J=p[2],ct=p[3],Tt=p[4],Bt=p[5],Xt=p[6],de=p[7],De=p[8],Ge=p[9],He=p[10],cn=p[11],Rn=p[12],On=p[13],$n=p[14],Qn=p[15],Sr=C*Bt-N*Tt,Nr=C*Xt-J*Tt,Wr=C*de-ct*Tt,pi=N*Xt-J*Bt,ai=N*de-ct*Bt,Bi=J*de-ct*Xt,zi=De*On-Ge*Rn,ia=De*$n-He*Rn,va=De*Qn-cn*Rn,ca=Ge*$n-He*On,ta=Ge*Qn-cn*On,to=He*Qn-cn*$n,Ta=Sr*to-Nr*ta+Wr*ca+pi*va-ai*ia+Bi*zi;return Ta?(d[0]=(Bt*to-Xt*ta+de*ca)*(Ta=1/Ta),d[1]=(J*ta-N*to-ct*ca)*Ta,d[2]=(On*Bi-$n*ai+Qn*pi)*Ta,d[3]=(He*ai-Ge*Bi-cn*pi)*Ta,d[4]=(Xt*va-Tt*to-de*ia)*Ta,d[5]=(C*to-J*va+ct*ia)*Ta,d[6]=($n*Wr-Rn*Bi-Qn*Nr)*Ta,d[7]=(De*Bi-He*Wr+cn*Nr)*Ta,d[8]=(Tt*ta-Bt*va+de*zi)*Ta,d[9]=(N*va-C*ta-ct*zi)*Ta,d[10]=(Rn*ai-On*Wr+Qn*Sr)*Ta,d[11]=(Ge*Wr-De*ai-cn*Sr)*Ta,d[12]=(Bt*ia-Tt*ca-Xt*zi)*Ta,d[13]=(C*ca-N*ia+J*zi)*Ta,d[14]=(On*Nr-Rn*pi-$n*Sr)*Ta,d[15]=(De*pi-Ge*Nr+He*Sr)*Ta,d):null},t.isChar=Mi,t.isMapboxURL=gt,t.keysDifference=function(d,p){var C=[];for(var N in d)N in p||C.push(N);return C},t.makeRequest=Nn,t.mapObject=m,t.mercatorXfromLng=Dd,t.mercatorYfromLat=jd,t.mercatorZfromAltitude=Bd,t.mul=Is,t.multiply=ws,t.mvt=Bs,t.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},t.normalize=function(d,p){var C=p[0],N=p[1],J=p[2],ct=C*C+N*N+J*J;return ct>0&&(ct=1/Math.sqrt(ct)),d[0]=p[0]*ct,d[1]=p[1]*ct,d[2]=p[2]*ct,d},t.number=$a,t.offscreenCanvasSupported=Sn,t.ortho=function(d,p,C,N,J,ct,Tt){var Bt=1/(p-C),Xt=1/(N-J),de=1/(ct-Tt);return d[0]=-2*Bt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Xt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*de,d[11]=0,d[12]=(p+C)*Bt,d[13]=(J+N)*Xt,d[14]=(Tt+ct)*de,d[15]=1,d},t.parseGlyphPBF=function(d){return new _e(d).readFields(qr,[])},t.pbf=_e,t.performSymbolLayout=function(d,p,C,N,J,ct,Tt){d.createArrays(),d.tilePixelRatio=8192/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;var Bt=d.layers[0].layout,Xt=d.layers[0]._unevaluatedLayout._values,de={};if(d.textSizeData.kind==="composite"){var De=d.textSizeData,Ge=De.maxZoom;de.compositeTextSizes=[Xt["text-size"].possiblyEvaluate(new yr(De.minZoom),Tt),Xt["text-size"].possiblyEvaluate(new yr(Ge),Tt)]}if(d.iconSizeData.kind==="composite"){var He=d.iconSizeData,cn=He.maxZoom;de.compositeIconSizes=[Xt["icon-size"].possiblyEvaluate(new yr(He.minZoom),Tt),Xt["icon-size"].possiblyEvaluate(new yr(cn),Tt)]}de.layoutTextSize=Xt["text-size"].possiblyEvaluate(new yr(d.zoom+1),Tt),de.layoutIconSize=Xt["icon-size"].possiblyEvaluate(new yr(d.zoom+1),Tt),de.textMaxSize=Xt["text-size"].possiblyEvaluate(new yr(18));for(var Rn=24*Bt.get("text-line-height"),On=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",$n=Bt.get("text-keep-upright"),Qn=Bt.get("text-size"),Sr=function(){var ai=Wr[Nr],Bi=Bt.get("text-font").evaluate(ai,{},Tt).join(","),zi=Qn.evaluate(ai,{},Tt),ia=de.layoutTextSize.evaluate(ai,{},Tt),va=de.layoutIconSize.evaluate(ai,{},Tt),ca={horizontal:{},vertical:void 0},ta=ai.text,to=[0,0];if(ta){var Ta=ta.toString(),pa=24*Bt.get("text-letter-spacing").evaluate(ai,{},Tt),Yo=function(qo){for(var is=0,du=qo;is<du.length;is+=1)if(Mu=du[is].charCodeAt(0),Mi.Arabic(Mu)||Mi["Arabic Supplement"](Mu)||Mi["Arabic Extended-A"](Mu)||Mi["Arabic Presentation Forms-A"](Mu)||Mi["Arabic Presentation Forms-B"](Mu))return!1;var Mu;return!0}(Ta)?pa:0,go=Bt.get("text-anchor").evaluate(ai,{},Tt),Xs=Bt.get("text-variable-anchor");if(!Xs){var Za=Bt.get("text-radial-offset").evaluate(ai,{},Tt);to=Za?er(go,[24*Za,on]):Bt.get("text-offset").evaluate(ai,{},Tt).map(function(qo){return 24*qo})}var rs=On?"center":Bt.get("text-justify").evaluate(ai,{},Tt),Xu=Bt.get("symbol-placement"),Cu=Xu==="point"?24*Bt.get("text-max-width").evaluate(ai,{},Tt):0,ol=function(){d.allowVerticalPlacement&&il(Ta)&&(ca.vertical=gi(ta,p,C,J,Bi,Cu,Rn,go,"left",Yo,to,ha.vertical,!0,Xu,ia,zi))};if(!On&&Xs){for(var sl=rs==="auto"?Xs.map(function(qo){return Ir(qo)}):[rs],zu=!1,cc=0;cc<sl.length;cc++){var Xl=sl[cc];if(!ca.horizontal[Xl])if(zu)ca.horizontal[Xl]=ca.horizontal[0];else{var _c=gi(ta,p,C,J,Bi,Cu,Rn,"center",Xl,Yo,to,ha.horizontal,!1,Xu,ia,zi);_c&&(ca.horizontal[Xl]=_c,zu=_c.positionedLines.length===1)}}ol()}else{rs==="auto"&&(rs=Ir(go));var fc=gi(ta,p,C,J,Bi,Cu,Rn,go,rs,Yo,to,ha.horizontal,!1,Xu,ia,zi);fc&&(ca.horizontal[rs]=fc),ol(),il(Ta)&&On&&$n&&(ca.vertical=gi(ta,p,C,J,Bi,Cu,Rn,go,rs,Yo,to,ha.vertical,!1,Xu,ia,zi))}}var wc=void 0,wl=!1;if(ai.icon&&ai.icon.name){var yl=N[ai.icon.name];yl&&(wc=function(qo,is,du){var Mu=dl(du),Ic=is[0]-qo.displaySize[0]*Mu.horizontalAlign,Ju=is[1]-qo.displaySize[1]*Mu.verticalAlign;return{image:qo,top:Ju,bottom:Ju+qo.displaySize[1],left:Ic,right:Ic+qo.displaySize[0]}}(J[ai.icon.name],Bt.get("icon-offset").evaluate(ai,{},Tt),Bt.get("icon-anchor").evaluate(ai,{},Tt)),wl=yl.sdf,d.sdfIcons===void 0?d.sdfIcons=yl.sdf:d.sdfIcons!==yl.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(yl.pixelRatio!==d.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}var Il=lr(ca.horizontal)||ca.vertical;d.iconsInText=!!Il&&Il.iconsInText,(Il||wc)&&function(qo,is,du,Mu,Ic,Ju,$u,Mc,ls,kf,cf){var ff=Ju.textMaxSize.evaluate(is,{});ff===void 0&&(ff=$u);var $c,Pc=qo.layers[0].layout,Lf=Pc.get("icon-offset").evaluate(is,{},cf),Gf=lr(du.horizontal),eh=$u/24,$h=qo.tilePixelRatio*eh,af=qo.tilePixelRatio*ff/24,hf=qo.tilePixelRatio*Mc,Nh=qo.tilePixelRatio*Pc.get("symbol-spacing"),Eh=Pc.get("text-padding")*qo.tilePixelRatio,Qh=Pc.get("icon-padding")*qo.tilePixelRatio,Sh=Pc.get("text-max-angle")/180*Math.PI,yd=Pc.get("text-rotation-alignment")==="map"&&Pc.get("symbol-placement")!=="point",nh=Pc.get("icon-rotation-alignment")==="map"&&Pc.get("symbol-placement")!=="point",Vf=Pc.get("symbol-placement"),qh=Nh/2,_h=Pc.get("icon-text-fit");Mu&&_h!=="none"&&(qo.allowVerticalPlacement&&du.vertical&&($c=Vo(Mu,du.vertical,_h,Pc.get("icon-text-fit-padding"),Lf,eh)),Gf&&(Mu=Vo(Mu,Gf,_h,Pc.get("icon-text-fit-padding"),Lf,eh)));var rh=function($d,Gh){Gh.x<0||Gh.x>=8192||Gh.y<0||Gh.y>=8192||function(Ll,df,Qd,Wf,id,kd,Vh,Sf,Wh,Hf,Hh,ad,Ed,Gd,od,Vd,Wd,Sd,_d,Yh,qc,Zh,Md,_f,Pd){var Td,ih,Ih,vh,ph,gh=Ll.addToLineVertexArray(df,Qd),Ad=0,Cd=0,Lh=0,Od=0,sd=-1,ud=-1,Rf={},Hd=Ie(""),ld=0,cd=0;if(Sf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ld=(Td=Sf.layout.get("text-offset").evaluate(qc,{},_f).map(function(Fi){return 24*Fi}))[0],cd=Td[1]):(ld=24*Sf.layout.get("text-radial-offset").evaluate(qc,{},_f),cd=on),Ll.allowVerticalPlacement&&Wf.vertical){var Yd=Sf.layout.get("text-rotate").evaluate(qc,{},_f)+90;vh=new jn(Wh,df,Hf,Hh,ad,Wf.vertical,Ed,Gd,od,Yd),Vh&&(ph=new jn(Wh,df,Hf,Hh,ad,Vh,Wd,Sd,od,Yd))}if(id){var fd=Sf.layout.get("icon-rotate").evaluate(qc,{}),wd=Sf.layout.get("icon-text-fit")!=="none",Id=ho(id,fd,Md,wd),Kh=Vh?ho(Vh,fd,Md,wd):void 0;Ih=new jn(Wh,df,Hf,Hh,ad,id,Wd,Sd,!1,fd),Ad=4*Id.length;var Ld=Ll.iconSizeData,Rh=null;Ld.kind==="source"?(Rh=[128*Sf.layout.get("icon-size").evaluate(qc,{})])[0]>32640&&O(Ll.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Ld.kind==="composite"&&((Rh=[128*Zh.compositeIconSizes[0].evaluate(qc,{},_f),128*Zh.compositeIconSizes[1].evaluate(qc,{},_f)])[0]>32640||Rh[1]>32640)&&O(Ll.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ll.addSymbols(Ll.icon,Id,Rh,Yh,_d,qc,!1,df,gh.lineStartIndex,gh.lineLength,-1,_f),sd=Ll.icon.placedSymbolArray.length-1,Kh&&(Cd=4*Kh.length,Ll.addSymbols(Ll.icon,Kh,Rh,Yh,_d,qc,ha.vertical,df,gh.lineStartIndex,gh.lineLength,-1,_f),ud=Ll.icon.placedSymbolArray.length-1)}for(var Zd in Wf.horizontal){var Y=Wf.horizontal[Zd];if(!ih){Hd=Ie(Y.text);var vt=Sf.layout.get("text-rotate").evaluate(qc,{},_f);ih=new jn(Wh,df,Hf,Hh,ad,Y,Ed,Gd,od,vt)}var dt=Y.positionedLines.length===1;if(Lh+=wr(Ll,df,Y,kd,Sf,od,qc,Vd,gh,Wf.vertical?ha.horizontal:ha.horizontalOnly,dt?Object.keys(Wf.horizontal):[Zd],Rf,sd,Zh,_f),dt)break}Wf.vertical&&(Od+=wr(Ll,df,Wf.vertical,kd,Sf,od,qc,Vd,gh,ha.vertical,["vertical"],Rf,ud,Zh,_f));var lt=ih?ih.boxStartIndex:Ll.collisionBoxArray.length,ht=ih?ih.boxEndIndex:Ll.collisionBoxArray.length,Ot=vh?vh.boxStartIndex:Ll.collisionBoxArray.length,kt=vh?vh.boxEndIndex:Ll.collisionBoxArray.length,ce=Ih?Ih.boxStartIndex:Ll.collisionBoxArray.length,Re=Ih?Ih.boxEndIndex:Ll.collisionBoxArray.length,Qe=ph?ph.boxStartIndex:Ll.collisionBoxArray.length,Dn=ph?ph.boxEndIndex:Ll.collisionBoxArray.length,rr=-1,kr=function(Hi,aa){return Hi&&Hi.circleDiameter?Math.max(Hi.circleDiameter,aa):aa};rr=kr(ih,rr),rr=kr(vh,rr),rr=kr(Ih,rr);var ei=(rr=kr(ph,rr))>-1?1:0;ei&&(rr*=Pd/24),Ll.glyphOffsetArray.length>=Kr.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qc.sortKey!==void 0&&Ll.addToSortKeyRanges(Ll.symbolInstances.length,qc.sortKey),Ll.symbolInstances.emplaceBack(df.x,df.y,Rf.right>=0?Rf.right:-1,Rf.center>=0?Rf.center:-1,Rf.left>=0?Rf.left:-1,Rf.vertical||-1,sd,ud,Hd,lt,ht,Ot,kt,ce,Re,Qe,Dn,Hf,Lh,Od,Ad,Cd,ei,0,Ed,ld,cd,rr)}(qo,Gh,$d,du,Mu,Ic,$c,qo.layers[0],qo.collisionBoxArray,is.index,is.sourceLayerIndex,qo.index,$h,Eh,yd,ls,hf,Qh,nh,Lf,is,Ju,kf,cf,$u)};if(Vf==="line")for(var Mh=0,xd=Ua(is.geometry,0,0,8192,8192);Mh<xd.length;Mh+=1)for(var Qc=xd[Mh],ch=0,Fh=Ks(Qc,Nh,Sh,du.vertical||Gf,Mu,24,af,qo.overscaling,8192);ch<Fh.length;ch+=1){var zh=Fh[ch];Gf&&nr(qo,Gf.text,qh,zh)||rh(Qc,zh)}else if(Vf==="line-center")for(var fh=0,hh=is.geometry;fh<hh.length;fh+=1){var Ph=hh[fh];if(Ph.length>1){var Th=Sc(Ph,Sh,du.vertical||Gf,Mu,24,af);Th&&rh(Ph,Th)}}else if(is.type==="Polygon")for(var Ah=0,Ch=Gt(is.geometry,0);Ah<Ch.length;Ah+=1){var Uh=Ch[Ah],Oh=Qi(Uh,16);rh(Uh[0],new vl(Oh.x,Oh.y,0))}else if(is.type==="LineString")for(var dh=0,wh=is.geometry;dh<wh.length;dh+=1){var td=wh[dh];rh(td,new vl(td[0].x,td[0].y,0))}else if(is.type==="Point")for(var ed=0,kh=is.geometry;ed<kh.length;ed+=1)for(var nd=0,bd=kh[ed];nd<bd.length;nd+=1){var rd=bd[nd];rh([rd],new vl(rd.x,rd.y,0))}}(d,ai,ca,wc,N,de,ia,va,to,wl,Tt)},Nr=0,Wr=d.features;Nr<Wr.length;Nr+=1)Sr();ct&&d.generateCollisionDebugBuffers()},t.perspective=function(d,p,C,N,J){var ct,Tt=1/Math.tan(p/2);return d[0]=Tt/C,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Tt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,J!=null&&J!==1/0?(d[10]=(J+N)*(ct=1/(N-J)),d[14]=2*J*N*ct):(d[10]=-1,d[14]=-2*N),d},t.pick=function(d,p){for(var C={},N=0;N<p.length;N++){var J=p[N];J in d&&(C[J]=d[J])}return C},t.plugin=li,t.polygonIntersectsPolygon=Fl,t.postMapLoadEvent=$t,t.postTurnstileEvent=ee,t.potpack=Pi,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Wi,t.registerForPluginStateChange=function(d){return d({pluginStatus:tn,pluginURL:wn}),Xr.on("pluginStateChange",d),d},t.renderColorRamp=Tf,t.rotate=function(d,p,C){var N=p[0],J=p[1],ct=p[2],Tt=p[3],Bt=Math.sin(C),Xt=Math.cos(C);return d[0]=N*Xt+ct*Bt,d[1]=J*Xt+Tt*Bt,d[2]=N*-Bt+ct*Xt,d[3]=J*-Bt+Tt*Xt,d},t.rotateX=function(d,p,C){var N=Math.sin(C),J=Math.cos(C),ct=p[4],Tt=p[5],Bt=p[6],Xt=p[7],de=p[8],De=p[9],Ge=p[10],He=p[11];return p!==d&&(d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[4]=ct*J+de*N,d[5]=Tt*J+De*N,d[6]=Bt*J+Ge*N,d[7]=Xt*J+He*N,d[8]=de*J-ct*N,d[9]=De*J-Tt*N,d[10]=Ge*J-Bt*N,d[11]=He*J-Xt*N,d},t.rotateZ=function(d,p,C){var N=Math.sin(C),J=Math.cos(C),ct=p[0],Tt=p[1],Bt=p[2],Xt=p[3],de=p[4],De=p[5],Ge=p[6],He=p[7];return p!==d&&(d[8]=p[8],d[9]=p[9],d[10]=p[10],d[11]=p[11],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[0]=ct*J+de*N,d[1]=Tt*J+De*N,d[2]=Bt*J+Ge*N,d[3]=Xt*J+He*N,d[4]=de*J-ct*N,d[5]=De*J-Tt*N,d[6]=Ge*J-Bt*N,d[7]=He*J-Xt*N,d},t.scale=function(d,p,C){var N=C[0],J=C[1],ct=C[2];return d[0]=p[0]*N,d[1]=p[1]*N,d[2]=p[2]*N,d[3]=p[3]*N,d[4]=p[4]*J,d[5]=p[5]*J,d[6]=p[6]*J,d[7]=p[7]*J,d[8]=p[8]*ct,d[9]=p[9]*ct,d[10]=p[10]*ct,d[11]=p[11]*ct,d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15],d},t.scale$1=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d[3]=p[3]*C,d},t.scale$2=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d},t.setCacheLimits=function(d,p){Me=d,me=p},t.setRTLTextPlugin=function(d,p,C){if(C===void 0&&(C=!1),tn==="deferred"||tn==="loading"||tn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");wn=Rt.resolveURL(d),tn="deferred",dn=p,Rr(),C||Fr()},t.sphericalToCartesian=function(d){var p=d[0],C=d[1],N=d[2];return C+=90,C*=Math.PI/180,N*=Math.PI/180,{x:p*Math.cos(C)*Math.sin(N),y:p*Math.sin(C)*Math.sin(N),z:p*Math.cos(N)}},t.sqrLen=function(d){var p=d[0],C=d[1];return p*p+C*C},t.styleSpec=ue,t.sub=function(d,p,C){return d[0]=p[0]-C[0],d[1]=p[1]-C[1],d[2]=p[2]-C[2],d},t.symbolSize=ac,t.transformMat3=function(d,p,C){var N=p[0],J=p[1],ct=p[2];return d[0]=N*C[0]+J*C[3]+ct*C[6],d[1]=N*C[1]+J*C[4]+ct*C[7],d[2]=N*C[2]+J*C[5]+ct*C[8],d},t.transformMat4=Yl,t.translate=function(d,p,C){var N,J,ct,Tt,Bt,Xt,de,De,Ge,He,cn,Rn,On=C[0],$n=C[1],Qn=C[2];return p===d?(d[12]=p[0]*On+p[4]*$n+p[8]*Qn+p[12],d[13]=p[1]*On+p[5]*$n+p[9]*Qn+p[13],d[14]=p[2]*On+p[6]*$n+p[10]*Qn+p[14],d[15]=p[3]*On+p[7]*$n+p[11]*Qn+p[15]):(J=p[1],ct=p[2],Tt=p[3],Bt=p[4],Xt=p[5],de=p[6],De=p[7],Ge=p[8],He=p[9],cn=p[10],Rn=p[11],d[0]=N=p[0],d[1]=J,d[2]=ct,d[3]=Tt,d[4]=Bt,d[5]=Xt,d[6]=de,d[7]=De,d[8]=Ge,d[9]=He,d[10]=cn,d[11]=Rn,d[12]=N*On+Bt*$n+Ge*Qn+p[12],d[13]=J*On+Xt*$n+He*Qn+p[13],d[14]=ct*On+de*$n+cn*Qn+p[14],d[15]=Tt*On+De*$n+Rn*Qn+p[15]),d},t.triggerPluginCompletionEvent=dr,t.uniqueId=y,t.validateCustomStyleLayer=function(d){var p=[],C=d.id;return C===void 0&&p.push({message:"layers."+C+': missing required property "id"'}),d.render===void 0&&p.push({message:"layers."+C+': missing required method "render"'}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&p.push({message:"layers."+C+': property "renderingMode" must be either "2d" or "3d"'}),p},t.validateLight=dc,t.validateStyle=Yu,t.values=function(d){var p=[];for(var C in d)p.push(d[C]);return p},t.vectorTile=Bs,t.version="1.13.1",t.warnOnce=O,t.webpSupported=bt,t.window=n,t.wrap=f}),e(["./shared"],function(t){"use strict";function l(Ce){var Te=typeof Ce;if(Te==="number"||Te==="boolean"||Te==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){for(var Jt="[",pe=0,Wt=Ce;pe<Wt.length;pe+=1)Jt+=l(Wt[pe])+",";return Jt+"]"}for(var ie=Object.keys(Ce).sort(),Ae="{",ue=0;ue<ie.length;ue++)Ae+=JSON.stringify(ie[ue])+":"+l(Ce[ie[ue]])+",";return Ae+"}"}function s(Ce){for(var Te="",Jt=0,pe=t.refProperties;Jt<pe.length;Jt+=1)Te+="/"+l(Ce[pe[Jt]]);return Te}var c=function(Te){this.keyCache={},Te&&this.replace(Te)};c.prototype.replace=function(Ce){this._layerConfigs={},this._layers={},this.update(Ce,[])},c.prototype.update=function(Ce,Te){for(var Jt=this,pe=0,Wt=Ce;pe<Wt.length;pe+=1){var ie=Wt[pe];this._layerConfigs[ie.id]=ie;var Ae=this._layers[ie.id]=t.createStyleLayer(ie);Ae._featureFilter=t.featureFilter(Ae.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(var ue=0,xe=Te;ue<xe.length;ue+=1){var $e=xe[ue];delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e]}this.familiesBySource={};for(var Fn=0,or=function(Ar,Be){for(var We={},Ye=0;Ye<Ar.length;Ye++){var fn=Be&&Be[Ar[Ye].id]||s(Ar[Ye]);Be&&(Be[Ar[Ye].id]=fn);var gn=We[fn];gn||(gn=We[fn]=[]),gn.push(Ar[Ye])}var Bn=[];for(var bn in We)Bn.push(We[bn]);return Bn}(t.values(this._layerConfigs),this.keyCache);Fn<or.length;Fn+=1){var En=or[Fn].map(function(Ar){return Jt._layers[Ar.id]}),Pn=En[0];if(Pn.visibility!=="none"){var br=Pn.source||"",Pr=this.familiesBySource[br];Pr||(Pr=this.familiesBySource[br]={});var ln=Pn.sourceLayer||"_geojsonTileLayer",Cr=Pr[ln];Cr||(Cr=Pr[ln]=[]),Cr.push(En)}}};var r=function(Te){var Jt={},pe=[];for(var Wt in Te){var ie=Te[Wt],Ae=Jt[Wt]={};for(var ue in ie){var xe=ie[+ue];if(xe&&xe.bitmap.width!==0&&xe.bitmap.height!==0){var $e={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};pe.push($e),Ae[ue]={rect:$e,metrics:xe.metrics}}}}var Fn=t.potpack(pe),or=new t.AlphaImage({width:Fn.w||1,height:Fn.h||1});for(var En in Te){var Pn=Te[En];for(var br in Pn){var Pr=Pn[+br];if(Pr&&Pr.bitmap.width!==0&&Pr.bitmap.height!==0){var ln=Jt[En][br].rect;t.AlphaImage.copy(Pr.bitmap,or,{x:0,y:0},{x:ln.x+1,y:ln.y+1},Pr.bitmap)}}}this.image=or,this.positions=Jt};t.register("GlyphAtlas",r);var h=function(Te){this.tileID=new t.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId};function n(Ce,Te,Jt){for(var pe=new t.EvaluationParameters(Te),Wt=0,ie=Ce;Wt<ie.length;Wt+=1)ie[Wt].recalculate(pe,Jt)}function i(Ce,Te){var Jt=t.getArrayBuffer(Ce.request,function(pe,Wt,ie,Ae){pe?Te(pe):Wt&&Te(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Wt)),rawData:Wt,cacheControl:ie,expires:Ae})});return function(){Jt.cancel(),Te()}}h.prototype.parse=function(Ce,Te,Jt,pe,Wt){var ie=this;this.status="parsing",this.data=Ce,this.collisionBoxArray=new t.CollisionBoxArray;var Ae=new t.DictionaryCoder(Object.keys(Ce.layers).sort()),ue=new t.FeatureIndex(this.tileID,this.promoteId);ue.bucketLayerIDs=[];var xe,$e,Fn,or,En={},Pn={featureIndex:ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Jt},br=Te.familiesBySource[this.source];for(var Pr in br){var ln=Ce.layers[Pr];if(ln){ln.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Pr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Cr=Ae.encode(Pr),Ar=[],Be=0;Be<ln.length;Be++){var We=ln.feature(Be),Ye=ue.getId(We,Pr);Ar.push({feature:We,id:Ye,index:Be,sourceLayerIndex:Cr})}for(var fn=0,gn=br[Pr];fn<gn.length;fn+=1){var Bn=gn[fn],bn=Bn[0];bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||bn.visibility!=="none"&&(n(Bn,this.zoom,Jt),(En[bn.id]=bn.createBucket({index:ue.bucketLayerIDs.length,layers:Bn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cr,sourceID:this.source})).populate(Ar,Pn,this.tileID.canonical),ue.bucketLayerIDs.push(Bn.map(function(Dr){return Dr.id})))}}}var Ln=t.mapObject(Pn.glyphDependencies,function(Dr){return Object.keys(Dr).map(Number)});Object.keys(Ln).length?pe.send("getGlyphs",{uid:this.uid,stacks:Ln},function(Dr,vr){xe||(xe=Dr,$e=vr,_n.call(ie))}):$e={};var ir=Object.keys(Pn.iconDependencies);ir.length?pe.send("getImages",{icons:ir,source:this.source,tileID:this.tileID,type:"icons"},function(Dr,vr){xe||(xe=Dr,Fn=vr,_n.call(ie))}):Fn={};var Yn=Object.keys(Pn.patternDependencies);function _n(){if(xe)return Wt(xe);if($e&&Fn&&or){var Dr=new r($e),vr=new t.ImageAtlas(Fn,or);for(var zr in En){var Ai=En[zr];Ai instanceof t.SymbolBucket?(n(Ai.layers,this.zoom,Jt),t.performSymbolLayout(Ai,$e,Dr.positions,Fn,vr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ai.hasPattern&&(Ai instanceof t.LineBucket||Ai instanceof t.FillBucket||Ai instanceof t.FillExtrusionBucket)&&(n(Ai.layers,this.zoom,Jt),Ai.addFeatures(Pn,this.tileID.canonical,vr.patternPositions))}this.status="done",Wt(null,{buckets:t.values(En).filter(function(Aa){return!Aa.isEmpty()}),featureIndex:ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Dr.image,imageAtlas:vr,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?Dr.positions:null})}}Yn.length?pe.send("getImages",{icons:Yn,source:this.source,tileID:this.tileID,type:"patterns"},function(Dr,vr){xe||(xe=Dr,or=vr,_n.call(ie))}):or={},_n.call(this)};var a=function(Te,Jt,pe,Wt){this.actor=Te,this.layerIndex=Jt,this.availableImages=pe,this.loadVectorData=Wt||i,this.loading={},this.loaded={}};a.prototype.loadTile=function(Ce,Te){var Jt=this,pe=Ce.uid;this.loading||(this.loading={});var Wt=!!(Ce&&Ce.request&&Ce.request.collectResourceTiming)&&new t.RequestPerformance(Ce.request),ie=this.loading[pe]=new h(Ce);ie.abort=this.loadVectorData(Ce,function(Ae,ue){if(delete Jt.loading[pe],Ae||!ue)return ie.status="done",Jt.loaded[pe]=ie,Te(Ae);var xe=ue.rawData,$e={};ue.expires&&($e.expires=ue.expires),ue.cacheControl&&($e.cacheControl=ue.cacheControl);var Fn={};if(Wt){var or=Wt.finish();or&&(Fn.resourceTiming=JSON.parse(JSON.stringify(or)))}ie.vectorTile=ue.vectorTile,ie.parse(ue.vectorTile,Jt.layerIndex,Jt.availableImages,Jt.actor,function(En,Pn){if(En||!Pn)return Te(En);Te(null,t.extend({rawTileData:xe.slice(0)},Pn,$e,Fn))}),Jt.loaded=Jt.loaded||{},Jt.loaded[pe]=ie})},a.prototype.reloadTile=function(Ce,Te){var Jt=this,pe=this.loaded,Wt=Ce.uid,ie=this;if(pe&&pe[Wt]){var Ae=pe[Wt];Ae.showCollisionBoxes=Ce.showCollisionBoxes;var ue=function($e,Fn){var or=Ae.reloadCallback;or&&(delete Ae.reloadCallback,Ae.parse(Ae.vectorTile,ie.layerIndex,Jt.availableImages,ie.actor,or)),Te($e,Fn)};Ae.status==="parsing"?Ae.reloadCallback=ue:Ae.status==="done"&&(Ae.vectorTile?Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,ue):ue())}},a.prototype.abortTile=function(Ce,Te){var Jt=this.loading,pe=Ce.uid;Jt&&Jt[pe]&&Jt[pe].abort&&(Jt[pe].abort(),delete Jt[pe]),Te()},a.prototype.removeTile=function(Ce,Te){var Jt=this.loaded,pe=Ce.uid;Jt&&Jt[pe]&&delete Jt[pe],Te()};var o=t.window.ImageBitmap,u=function(){this.loaded={}};function f(Ce,Te){if(Ce.length!==0){v(Ce[0],Te);for(var Jt=1;Jt<Ce.length;Jt++)v(Ce[Jt],!Te)}}function v(Ce,Te){for(var Jt=0,pe=0,Wt=Ce.length,ie=Wt-1;pe<Wt;ie=pe++)Jt+=(Ce[pe][0]-Ce[ie][0])*(Ce[ie][1]+Ce[pe][1]);Jt>=0!=!!Te&&Ce.reverse()}u.prototype.loadTile=function(Ce,Te){var Jt=Ce.uid,pe=Ce.encoding,Wt=Ce.rawImageData,ie=o&&Wt instanceof o?this.getImageData(Wt):Wt,Ae=new t.DEMData(Jt,ie,pe);this.loaded=this.loaded||{},this.loaded[Jt]=Ae,Te(null,Ae)},u.prototype.getImageData=function(Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ce.width,Ce.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ce.width,this.offscreenCanvas.height=Ce.height,this.offscreenCanvasContext.drawImage(Ce,0,0,Ce.width,Ce.height);var Te=this.offscreenCanvasContext.getImageData(-1,-1,Ce.width+2,Ce.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Te.width,height:Te.height},Te.data)},u.prototype.removeTile=function(Ce){var Te=this.loaded,Jt=Ce.uid;Te&&Te[Jt]&&delete Te[Jt]};var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,y=function(Te){this._feature=Te,this.extent=t.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))};y.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ce=[],Te=0,Jt=this._feature.geometry;Te<Jt.length;Te+=1){var pe=Jt[Te];Ce.push([new t.Point$1(pe[0],pe[1])])}return Ce}for(var Wt=[],ie=0,Ae=this._feature.geometry;ie<Ae.length;ie+=1){for(var ue=[],xe=0,$e=Ae[ie];xe<$e.length;xe+=1){var Fn=$e[xe];ue.push(new t.Point$1(Fn[0],Fn[1]))}Wt.push(ue)}return Wt},y.prototype.toGeoJSON=function(Ce,Te,Jt){return b.call(this,Ce,Te,Jt)};var g=function(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Te.length,this._features=Te};g.prototype.feature=function(Ce){return new y(this._features[Ce])};var _=t.vectorTile.VectorTileFeature,M=x;function x(Ce,Te){this.options=Te||{},this.features=Ce,this.length=Ce.length}function m(Ce,Te){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=Te||4096}x.prototype.feature=function(Ce){return new m(this.features[Ce],this.options.extent)},m.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var Te=0;Te<Ce.length;Te++){for(var Jt=Ce[Te],pe=[],Wt=0;Wt<Jt.length;Wt++)pe.push(new t.Point$1(Jt[Wt][0],Jt[Wt][1]));this.geometry.push(pe)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,Te=1/0,Jt=-1/0,pe=1/0,Wt=-1/0,ie=0;ie<Ce.length;ie++)for(var Ae=Ce[ie],ue=0;ue<Ae.length;ue++){var xe=Ae[ue];Te=Math.min(Te,xe.x),Jt=Math.max(Jt,xe.x),pe=Math.min(pe,xe.y),Wt=Math.max(Wt,xe.y)}return[Te,pe,Jt,Wt]},m.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=A,P=M;function A(Ce){var Te=new t.pbf;return function(Jt,pe){for(var Wt in Jt.layers)pe.writeMessage(3,O,Jt.layers[Wt])}(Ce,Te),Te.finish()}function O(Ce,Te){var Jt;Te.writeVarintField(15,Ce.version||1),Te.writeStringField(1,Ce.name||""),Te.writeVarintField(5,Ce.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(Jt=0;Jt<Ce.length;Jt++)pe.feature=Ce.feature(Jt),Te.writeMessage(2,L,pe);var Wt=pe.keys;for(Jt=0;Jt<Wt.length;Jt++)Te.writeStringField(3,Wt[Jt]);var ie=pe.values;for(Jt=0;Jt<ie.length;Jt++)Te.writeMessage(4,k,ie[Jt])}function L(Ce,Te){var Jt=Ce.feature;Jt.id!==void 0&&Te.writeVarintField(1,Jt.id),Te.writeMessage(2,W,Ce),Te.writeVarintField(3,Jt.type),Te.writeMessage(4,V,Jt)}function W(Ce,Te){var Jt=Ce.feature,pe=Ce.keys,Wt=Ce.values,ie=Ce.keycache,Ae=Ce.valuecache;for(var ue in Jt.properties){var xe=ie[ue];xe===void 0&&(pe.push(ue),ie[ue]=xe=pe.length-1),Te.writeVarint(xe);var $e=Jt.properties[ue],Fn=typeof $e;Fn!=="string"&&Fn!=="boolean"&&Fn!=="number"&&($e=JSON.stringify($e));var or=Fn+":"+$e,En=Ae[or];En===void 0&&(Wt.push($e),Ae[or]=En=Wt.length-1),Te.writeVarint(En)}}function F(Ce,Te){return(Te<<3)+(7&Ce)}function K(Ce){return Ce<<1^Ce>>31}function V(Ce,Te){for(var Jt=Ce.loadGeometry(),pe=Ce.type,Wt=0,ie=0,Ae=Jt.length,ue=0;ue<Ae;ue++){var xe=Jt[ue],$e=1;pe===1&&($e=xe.length),Te.writeVarint(F(1,$e));for(var Fn=pe===3?xe.length-1:xe.length,or=0;or<Fn;or++){or===1&&pe!==1&&Te.writeVarint(F(2,Fn-1));var En=xe[or].x-Wt,Pn=xe[or].y-ie;Te.writeVarint(K(En)),Te.writeVarint(K(Pn)),Wt+=En,ie+=Pn}pe===3&&Te.writeVarint(F(7,1))}}function k(Ce,Te){var Jt=typeof Ce;Jt==="string"?Te.writeStringField(1,Ce):Jt==="boolean"?Te.writeBooleanField(7,Ce):Jt==="number"&&(Ce%1!=0?Te.writeDoubleField(3,Ce):Ce<0?Te.writeSVarintField(6,Ce):Te.writeVarintField(5,Ce))}function Z(Ce,Te,Jt,pe){X(Ce,Jt,pe),X(Te,2*Jt,2*pe),X(Te,2*Jt+1,2*pe+1)}function X(Ce,Te,Jt){var pe=Ce[Te];Ce[Te]=Ce[Jt],Ce[Jt]=pe}function it(Ce,Te,Jt,pe){var Wt=Ce-Jt,ie=Te-pe;return Wt*Wt+ie*ie}S.fromVectorTileJs=A,S.fromGeojsonVt=function(Ce,Te){Te=Te||{};var Jt={};for(var pe in Ce)Jt[pe]=new M(Ce[pe].features,Te),Jt[pe].name=pe,Jt[pe].version=Te.version,Jt[pe].extent=Te.extent;return A({layers:Jt})},S.GeoJSONWrapper=P;var ft=function(Te){return Te[0]},pt=function(Te){return Te[1]},ut=function(Te,Jt,pe,Wt,ie){Jt===void 0&&(Jt=ft),pe===void 0&&(pe=pt),Wt===void 0&&(Wt=64),ie===void 0&&(ie=Float64Array),this.nodeSize=Wt,this.points=Te;for(var Ae=Te.length<65536?Uint16Array:Uint32Array,ue=this.ids=new Ae(Te.length),xe=this.coords=new ie(2*Te.length),$e=0;$e<Te.length;$e++)ue[$e]=$e,xe[2*$e]=Jt(Te[$e]),xe[2*$e+1]=pe(Te[$e]);(function Fn(or,En,Pn,br,Pr,ln){if(!(Pr-br<=Pn)){var Cr=br+Pr>>1;(function Ar(Be,We,Ye,fn,gn,Bn){for(;gn>fn;){if(gn-fn>600){var bn=gn-fn+1,Ln=Ye-fn+1,ir=Math.log(bn),Yn=.5*Math.exp(2*ir/3),_n=.5*Math.sqrt(ir*Yn*(bn-Yn)/bn)*(Ln-bn/2<0?-1:1);Ar(Be,We,Ye,Math.max(fn,Math.floor(Ye-Ln*Yn/bn+_n)),Math.min(gn,Math.floor(Ye+(bn-Ln)*Yn/bn+_n)),Bn)}var Dr=We[2*Ye+Bn],vr=fn,zr=gn;for(Z(Be,We,fn,Ye),We[2*gn+Bn]>Dr&&Z(Be,We,fn,gn);vr<zr;){for(Z(Be,We,vr,zr),vr++,zr--;We[2*vr+Bn]<Dr;)vr++;for(;We[2*zr+Bn]>Dr;)zr--}We[2*fn+Bn]===Dr?Z(Be,We,fn,zr):Z(Be,We,++zr,gn),zr<=Ye&&(fn=zr+1),Ye<=zr&&(gn=zr-1)}})(or,En,Cr,br,Pr,ln%2),Fn(or,En,Pn,br,Cr-1,ln+1),Fn(or,En,Pn,Cr+1,Pr,ln+1)}})(ue,xe,Wt,0,ue.length-1,0)};ut.prototype.range=function(Ce,Te,Jt,pe){return function(Wt,ie,Ae,ue,xe,$e,Fn){for(var or,En,Pn=[0,Wt.length-1,0],br=[];Pn.length;){var Pr=Pn.pop(),ln=Pn.pop(),Cr=Pn.pop();if(ln-Cr<=Fn)for(var Ar=Cr;Ar<=ln;Ar++)En=ie[2*Ar+1],(or=ie[2*Ar])>=Ae&&or<=xe&&En>=ue&&En<=$e&&br.push(Wt[Ar]);else{var Be=Math.floor((Cr+ln)/2);En=ie[2*Be+1],(or=ie[2*Be])>=Ae&&or<=xe&&En>=ue&&En<=$e&&br.push(Wt[Be]);var We=(Pr+1)%2;(Pr===0?Ae<=or:ue<=En)&&(Pn.push(Cr),Pn.push(Be-1),Pn.push(We)),(Pr===0?xe>=or:$e>=En)&&(Pn.push(Be+1),Pn.push(ln),Pn.push(We))}}return br}(this.ids,this.coords,Ce,Te,Jt,pe,this.nodeSize)},ut.prototype.within=function(Ce,Te,Jt){return function(pe,Wt,ie,Ae,ue,xe){for(var $e=[0,pe.length-1,0],Fn=[],or=ue*ue;$e.length;){var En=$e.pop(),Pn=$e.pop(),br=$e.pop();if(Pn-br<=xe)for(var Pr=br;Pr<=Pn;Pr++)it(Wt[2*Pr],Wt[2*Pr+1],ie,Ae)<=or&&Fn.push(pe[Pr]);else{var ln=Math.floor((br+Pn)/2),Cr=Wt[2*ln],Ar=Wt[2*ln+1];it(Cr,Ar,ie,Ae)<=or&&Fn.push(pe[ln]);var Be=(En+1)%2;(En===0?ie-ue<=Cr:Ae-ue<=Ar)&&($e.push(br),$e.push(ln-1),$e.push(Be)),(En===0?ie+ue>=Cr:Ae+ue>=Ar)&&($e.push(ln+1),$e.push(Pn),$e.push(Be))}}return Fn}(this.ids,this.coords,Ce,Te,Jt,this.nodeSize)};var It={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Te){return Te}},Nt=function(Te){this.options=z(Object.create(It),Te),this.trees=new Array(this.options.maxZoom+1)};function Rt(Ce,Te,Jt,pe,Wt){return{x:Ce,y:Te,zoom:1/0,id:Jt,parentId:-1,numPoints:pe,properties:Wt}}function Mt(Ce,Te){var Jt=Ce.geometry.coordinates,pe=Jt[1];return{x:rt(Jt[0]),y:Pt(pe),zoom:1/0,index:Te,parentId:-1}}function bt(Ce){return{type:"Feature",id:Ce.id,properties:At(Ce),geometry:{type:"Point",coordinates:[(pe=Ce.x,360*(pe-.5)),(Te=Ce.y,Jt=(180-360*Te)*Math.PI/180,360*Math.atan(Math.exp(Jt))/Math.PI-90)]}};var Te,Jt,pe}function At(Ce){var Te=Ce.numPoints,Jt=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return z(z({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:Te,point_count_abbreviated:Jt})}function rt(Ce){return Ce/360+.5}function Pt(Ce){var Te=Math.sin(Ce*Math.PI/180),Jt=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function z(Ce,Te){for(var Jt in Te)Ce[Jt]=Te[Jt];return Ce}function Q(Ce){return Ce.x}function gt(Ce){return Ce.y}function et(Ce,Te,Jt,pe,Wt,ie){var Ae=Wt-Jt,ue=ie-pe;if(Ae!==0||ue!==0){var xe=((Ce-Jt)*Ae+(Te-pe)*ue)/(Ae*Ae+ue*ue);xe>1?(Jt=Wt,pe=ie):xe>0&&(Jt+=Ae*xe,pe+=ue*xe)}return(Ae=Ce-Jt)*Ae+(ue=Te-pe)*ue}function ot(Ce,Te,Jt,pe){var Wt={id:Ce===void 0?null:Ce,type:Te,geometry:Jt,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var Ae=ie.geometry,ue=ie.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")xt(ie,Ae);else if(ue==="Polygon"||ue==="MultiLineString")for(var xe=0;xe<Ae.length;xe++)xt(ie,Ae[xe]);else if(ue==="MultiPolygon")for(xe=0;xe<Ae.length;xe++)for(var $e=0;$e<Ae[xe].length;$e++)xt(ie,Ae[xe][$e])}(Wt),Wt}function xt(Ce,Te){for(var Jt=0;Jt<Te.length;Jt+=3)Ce.minX=Math.min(Ce.minX,Te[Jt]),Ce.minY=Math.min(Ce.minY,Te[Jt+1]),Ce.maxX=Math.max(Ce.maxX,Te[Jt]),Ce.maxY=Math.max(Ce.maxY,Te[Jt+1])}function H(Ce,Te,Jt,pe){if(Te.geometry){var Wt=Te.geometry.coordinates,ie=Te.geometry.type,Ae=Math.pow(Jt.tolerance/((1<<Jt.maxZoom)*Jt.extent),2),ue=[],xe=Te.id;if(Jt.promoteId?xe=Te.properties[Jt.promoteId]:Jt.generateId&&(xe=pe||0),ie==="Point")nt(Wt,ue);else if(ie==="MultiPoint")for(var $e=0;$e<Wt.length;$e++)nt(Wt[$e],ue);else if(ie==="LineString")at(Wt,ue,Ae,!1);else if(ie==="MultiLineString"){if(Jt.lineMetrics){for($e=0;$e<Wt.length;$e++)at(Wt[$e],ue=[],Ae,!1),Ce.push(ot(xe,"LineString",ue,Te.properties));return}q(Wt,ue,Ae,!1)}else if(ie==="Polygon")q(Wt,ue,Ae,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for($e=0;$e<Te.geometry.geometries.length;$e++)H(Ce,{id:xe,geometry:Te.geometry.geometries[$e],properties:Te.properties},Jt,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for($e=0;$e<Wt.length;$e++){var Fn=[];q(Wt[$e],Fn,Ae,!0),ue.push(Fn)}}Ce.push(ot(xe,ie,ue,Te.properties))}}function nt(Ce,Te){Te.push(_t(Ce[0])),Te.push(yt(Ce[1])),Te.push(0)}function at(Ce,Te,Jt,pe){for(var Wt,ie,Ae=0,ue=0;ue<Ce.length;ue++){var xe=_t(Ce[ue][0]),$e=yt(Ce[ue][1]);Te.push(xe),Te.push($e),Te.push(0),ue>0&&(Ae+=pe?(Wt*$e-xe*ie)/2:Math.sqrt(Math.pow(xe-Wt,2)+Math.pow($e-ie,2))),Wt=xe,ie=$e}var Fn=Te.length-3;Te[2]=1,function or(En,Pn,br,Pr){for(var ln,Cr=Pr,Ar=br-Pn>>1,Be=br-Pn,We=En[Pn],Ye=En[Pn+1],fn=En[br],gn=En[br+1],Bn=Pn+3;Bn<br;Bn+=3){var bn=et(En[Bn],En[Bn+1],We,Ye,fn,gn);if(bn>Cr)ln=Bn,Cr=bn;else if(bn===Cr){var Ln=Math.abs(Bn-Ar);Ln<Be&&(ln=Bn,Be=Ln)}}Cr>Pr&&(ln-Pn>3&&or(En,Pn,ln,Pr),En[ln+2]=Cr,br-ln>3&&or(En,ln,br,Pr))}(Te,0,Fn,Jt),Te[Fn+2]=1,Te.size=Math.abs(Ae),Te.start=0,Te.end=Te.size}function q(Ce,Te,Jt,pe){for(var Wt=0;Wt<Ce.length;Wt++){var ie=[];at(Ce[Wt],ie,Jt,pe),Te.push(ie)}}function _t(Ce){return Ce/360+.5}function yt(Ce){var Te=Math.sin(Ce*Math.PI/180),Jt=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function Ft(Ce,Te,Jt,pe,Wt,ie,Ae,ue){if(pe/=Te,ie>=(Jt/=Te)&&Ae<pe)return Ce;if(Ae<Jt||ie>=pe)return null;for(var xe=[],$e=0;$e<Ce.length;$e++){var Fn=Ce[$e],or=Fn.geometry,En=Fn.type,Pn=Wt===0?Fn.minX:Fn.minY,br=Wt===0?Fn.maxX:Fn.maxY;if(Pn>=Jt&&br<pe)xe.push(Fn);else if(!(br<Jt||Pn>=pe)){var Pr=[];if(En==="Point"||En==="MultiPoint")Qt(or,Pr,Jt,pe,Wt);else if(En==="LineString")ee(or,Pr,Jt,pe,Wt,!1,ue.lineMetrics);else if(En==="MultiLineString")$t(or,Pr,Jt,pe,Wt,!1);else if(En==="Polygon")$t(or,Pr,Jt,pe,Wt,!0);else if(En==="MultiPolygon")for(var ln=0;ln<or.length;ln++){var Cr=[];$t(or[ln],Cr,Jt,pe,Wt,!0),Cr.length&&Pr.push(Cr)}if(Pr.length){if(ue.lineMetrics&&En==="LineString"){for(ln=0;ln<Pr.length;ln++)xe.push(ot(Fn.id,En,Pr[ln],Fn.tags));continue}En!=="LineString"&&En!=="MultiLineString"||(Pr.length===1?(En="LineString",Pr=Pr[0]):En="MultiLineString"),En!=="Point"&&En!=="MultiPoint"||(En=Pr.length===3?"Point":"MultiPoint"),xe.push(ot(Fn.id,En,Pr,Fn.tags))}}}return xe.length?xe:null}function Qt(Ce,Te,Jt,pe,Wt){for(var ie=0;ie<Ce.length;ie+=3){var Ae=Ce[ie+Wt];Ae>=Jt&&Ae<=pe&&(Te.push(Ce[ie]),Te.push(Ce[ie+1]),Te.push(Ce[ie+2]))}}function ee(Ce,Te,Jt,pe,Wt,ie,Ae){for(var ue,xe,$e=Vt(Ce),Fn=Wt===0?me:le,or=Ce.start,En=0;En<Ce.length-3;En+=3){var Pn=Ce[En],br=Ce[En+1],Pr=Ce[En+2],ln=Ce[En+3],Cr=Ce[En+4],Ar=Wt===0?Pn:br,Be=Wt===0?ln:Cr,We=!1;Ae&&(ue=Math.sqrt(Math.pow(Pn-ln,2)+Math.pow(br-Cr,2))),Ar<Jt?Be>Jt&&(xe=Fn($e,Pn,br,ln,Cr,Jt),Ae&&($e.start=or+ue*xe)):Ar>pe?Be<pe&&(xe=Fn($e,Pn,br,ln,Cr,pe),Ae&&($e.start=or+ue*xe)):Me($e,Pn,br,Pr),Be<Jt&&Ar>=Jt&&(xe=Fn($e,Pn,br,ln,Cr,Jt),We=!0),Be>pe&&Ar<=pe&&(xe=Fn($e,Pn,br,ln,Cr,pe),We=!0),!ie&&We&&(Ae&&($e.end=or+ue*xe),Te.push($e),$e=Vt(Ce)),Ae&&(or+=ue)}var Ye=Ce.length-3;Pn=Ce[Ye],br=Ce[Ye+1],Pr=Ce[Ye+2],(Ar=Wt===0?Pn:br)>=Jt&&Ar<=pe&&Me($e,Pn,br,Pr),Ye=$e.length-3,ie&&Ye>=3&&($e[Ye]!==$e[0]||$e[Ye+1]!==$e[1])&&Me($e,$e[0],$e[1],$e[2]),$e.length&&Te.push($e)}function Vt(Ce){var Te=[];return Te.size=Ce.size,Te.start=Ce.start,Te.end=Ce.end,Te}function $t(Ce,Te,Jt,pe,Wt,ie){for(var Ae=0;Ae<Ce.length;Ae++)ee(Ce[Ae],Te,Jt,pe,Wt,ie,!1)}function Me(Ce,Te,Jt,pe){Ce.push(Te),Ce.push(Jt),Ce.push(pe)}function me(Ce,Te,Jt,pe,Wt,ie){var Ae=(ie-Te)/(pe-Te);return Ce.push(ie),Ce.push(Jt+(Wt-Jt)*Ae),Ce.push(1),Ae}function le(Ce,Te,Jt,pe,Wt,ie){var Ae=(ie-Jt)/(Wt-Jt);return Ce.push(Te+(pe-Te)*Ae),Ce.push(ie),Ce.push(1),Ae}function be(Ce,Te){for(var Jt=[],pe=0;pe<Ce.length;pe++){var Wt,ie=Ce[pe],Ae=ie.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Wt=ze(ie.geometry,Te);else if(Ae==="MultiLineString"||Ae==="Polygon"){Wt=[];for(var ue=0;ue<ie.geometry.length;ue++)Wt.push(ze(ie.geometry[ue],Te))}else if(Ae==="MultiPolygon")for(Wt=[],ue=0;ue<ie.geometry.length;ue++){for(var xe=[],$e=0;$e<ie.geometry[ue].length;$e++)xe.push(ze(ie.geometry[ue][$e],Te));Wt.push(xe)}Jt.push(ot(ie.id,Ae,Wt,ie.tags))}return Jt}function ze(Ce,Te){var Jt=[];Jt.size=Ce.size,Ce.start!==void 0&&(Jt.start=Ce.start,Jt.end=Ce.end);for(var pe=0;pe<Ce.length;pe+=3)Jt.push(Ce[pe]+Te,Ce[pe+1],Ce[pe+2]);return Jt}function Xe(Ce,Te){if(Ce.transformed)return Ce;var Jt,pe,Wt,ie=1<<Ce.z,Ae=Ce.x,ue=Ce.y;for(Jt=0;Jt<Ce.features.length;Jt++){var xe=Ce.features[Jt],$e=xe.geometry,Fn=xe.type;if(xe.geometry=[],Fn===1)for(pe=0;pe<$e.length;pe+=2)xe.geometry.push(Sn($e[pe],$e[pe+1],Te,ie,Ae,ue));else for(pe=0;pe<$e.length;pe++){var or=[];for(Wt=0;Wt<$e[pe].length;Wt+=2)or.push(Sn($e[pe][Wt],$e[pe][Wt+1],Te,ie,Ae,ue));xe.geometry.push(or)}}return Ce.transformed=!0,Ce}function Sn(Ce,Te,Jt,pe,Wt,ie){return[Math.round(Jt*(Ce*pe-Wt)),Math.round(Jt*(Te*pe-ie))]}function Xn(Ce,Te,Jt,pe,Wt){for(var ie=Te===Wt.maxZoom?0:Wt.tolerance/((1<<Te)*Wt.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Jt,y:pe,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ue=0;ue<Ce.length;ue++){Ae.numFeatures++,Hn(Ae,Ce[ue],ie,Wt);var xe=Ce[ue].minX,$e=Ce[ue].minY,Fn=Ce[ue].maxX,or=Ce[ue].maxY;xe<Ae.minX&&(Ae.minX=xe),$e<Ae.minY&&(Ae.minY=$e),Fn>Ae.maxX&&(Ae.maxX=Fn),or>Ae.maxY&&(Ae.maxY=or)}return Ae}function Hn(Ce,Te,Jt,pe){var Wt=Te.geometry,ie=Te.type,Ae=[];if(ie==="Point"||ie==="MultiPoint")for(var ue=0;ue<Wt.length;ue+=3)Ae.push(Wt[ue]),Ae.push(Wt[ue+1]),Ce.numPoints++,Ce.numSimplified++;else if(ie==="LineString")nn(Ae,Wt,Ce,Jt,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(ue=0;ue<Wt.length;ue++)nn(Ae,Wt[ue],Ce,Jt,ie==="Polygon",ue===0);else if(ie==="MultiPolygon")for(var xe=0;xe<Wt.length;xe++){var $e=Wt[xe];for(ue=0;ue<$e.length;ue++)nn(Ae,$e[ue],Ce,Jt,!0,ue===0)}if(Ae.length){var Fn=Te.tags||null;if(ie==="LineString"&&pe.lineMetrics){for(var or in Fn={},Te.tags)Fn[or]=Te.tags[or];Fn.mapbox_clip_start=Wt.start/Wt.size,Fn.mapbox_clip_end=Wt.end/Wt.size}var En={geometry:Ae,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:Fn};Te.id!==null&&(En.id=Te.id),Ce.features.push(En)}}function nn(Ce,Te,Jt,pe,Wt,ie){var Ae=pe*pe;if(pe>0&&Te.size<(Wt?Ae:pe))Jt.numPoints+=Te.length/3;else{for(var ue=[],xe=0;xe<Te.length;xe+=3)(pe===0||Te[xe+2]>Ae)&&(Jt.numSimplified++,ue.push(Te[xe]),ue.push(Te[xe+1])),Jt.numPoints++;Wt&&function($e,Fn){for(var or=0,En=0,Pn=$e.length,br=Pn-2;En<Pn;br=En,En+=2)or+=($e[En]-$e[br])*($e[En+1]+$e[br+1]);if(or>0===Fn)for(En=0,Pn=$e.length;En<Pn/2;En+=2){var Pr=$e[En],ln=$e[En+1];$e[En]=$e[Pn-2-En],$e[En+1]=$e[Pn-1-En],$e[Pn-2-En]=Pr,$e[Pn-1-En]=ln}}(ue,ie),Ce.push(ue)}}function en(Ce,Te){var Jt=(Te=this.options=function(Wt,ie){for(var Ae in ie)Wt[Ae]=ie[Ae];return Wt}(Object.create(this.options),Te)).debug;if(Jt&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Wt,ie){var Ae=[];if(Wt.type==="FeatureCollection")for(var ue=0;ue<Wt.features.length;ue++)H(Ae,Wt.features[ue],ie,ue);else H(Ae,Wt.type==="Feature"?Wt:{geometry:Wt},ie);return Ae}(Ce,Te);this.tiles={},this.tileCoords=[],Jt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(pe=function(Wt,ie){var Ae=ie.buffer/ie.extent,ue=Wt,xe=Ft(Wt,1,-1-Ae,Ae,0,-1,2,ie),$e=Ft(Wt,1,1-Ae,2+Ae,0,-1,2,ie);return(xe||$e)&&(ue=Ft(Wt,1,-Ae,1+Ae,0,-1,2,ie)||[],xe&&(ue=be(xe,1).concat(ue)),$e&&(ue=ue.concat(be($e,-1)))),ue}(pe,Te)).length&&this.splitTile(pe,0,0,0),Jt&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(Ce,Te,Jt){return 32*((1<<Ce)*Jt+Te)+Ce}function Nn(Ce,Te){var Jt=Ce.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var pe=this._geoJSONIndex.getTile(Jt.z,Jt.x,Jt.y);if(!pe)return Te(null,null);var Wt=new g(pe.features),ie=S(Wt);ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),Te(null,{vectorTile:Wt,rawData:ie.buffer})}Nt.prototype.load=function(Ce){var Te=this.options,Jt=Te.log,pe=Te.minZoom,Wt=Te.maxZoom,ie=Te.nodeSize;Jt&&console.time("total time");var Ae="prepare "+Ce.length+" points";Jt&&console.time(Ae),this.points=Ce;for(var ue=[],xe=0;xe<Ce.length;xe++)Ce[xe].geometry&&ue.push(Mt(Ce[xe],xe));this.trees[Wt+1]=new ut(ue,Q,gt,ie,Float32Array),Jt&&console.timeEnd(Ae);for(var $e=Wt;$e>=pe;$e--){var Fn=+Date.now();ue=this._cluster(ue,$e),this.trees[$e]=new ut(ue,Q,gt,ie,Float32Array),Jt&&console.log("z%d: %d clusters in %dms",$e,ue.length,+Date.now()-Fn)}return Jt&&console.timeEnd("total time"),this},Nt.prototype.getClusters=function(Ce,Te){var Jt=((Ce[0]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,Ce[1])),Wt=Ce[2]===180?180:((Ce[2]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,Ce[3]));if(Ce[2]-Ce[0]>=360)Jt=-180,Wt=180;else if(Jt>Wt){var Ae=this.getClusters([Jt,pe,180,ie],Te),ue=this.getClusters([-180,pe,Wt,ie],Te);return Ae.concat(ue)}for(var xe=this.trees[this._limitZoom(Te)],$e=[],Fn=0,or=xe.range(rt(Jt),Pt(ie),rt(Wt),Pt(pe));Fn<or.length;Fn+=1){var En=xe.points[or[Fn]];$e.push(En.numPoints?bt(En):this.points[En.index])}return $e},Nt.prototype.getChildren=function(Ce){var Te=this._getOriginId(Ce),Jt=this._getOriginZoom(Ce),pe="No cluster with the specified id.",Wt=this.trees[Jt];if(!Wt)throw new Error(pe);var ie=Wt.points[Te];if(!ie)throw new Error(pe);for(var Ae=this.options.radius/(this.options.extent*Math.pow(2,Jt-1)),ue=[],xe=0,$e=Wt.within(ie.x,ie.y,Ae);xe<$e.length;xe+=1){var Fn=Wt.points[$e[xe]];Fn.parentId===Ce&&ue.push(Fn.numPoints?bt(Fn):this.points[Fn.index])}if(ue.length===0)throw new Error(pe);return ue},Nt.prototype.getLeaves=function(Ce,Te,Jt){var pe=[];return this._appendLeaves(pe,Ce,Te=Te||10,Jt=Jt||0,0),pe},Nt.prototype.getTile=function(Ce,Te,Jt){var pe=this.trees[this._limitZoom(Ce)],Wt=Math.pow(2,Ce),ie=this.options,Ae=ie.radius/ie.extent,ue=(Jt-Ae)/Wt,xe=(Jt+1+Ae)/Wt,$e={features:[]};return this._addTileFeatures(pe.range((Te-Ae)/Wt,ue,(Te+1+Ae)/Wt,xe),pe.points,Te,Jt,Wt,$e),Te===0&&this._addTileFeatures(pe.range(1-Ae/Wt,ue,1,xe),pe.points,Wt,Jt,Wt,$e),Te===Wt-1&&this._addTileFeatures(pe.range(0,ue,Ae/Wt,xe),pe.points,-1,Jt,Wt,$e),$e.features.length?$e:null},Nt.prototype.getClusterExpansionZoom=function(Ce){for(var Te=this._getOriginZoom(Ce)-1;Te<=this.options.maxZoom;){var Jt=this.getChildren(Ce);if(Te++,Jt.length!==1)break;Ce=Jt[0].properties.cluster_id}return Te},Nt.prototype._appendLeaves=function(Ce,Te,Jt,pe,Wt){for(var ie=0,Ae=this.getChildren(Te);ie<Ae.length;ie+=1){var ue=Ae[ie],xe=ue.properties;if(xe&&xe.cluster?Wt+xe.point_count<=pe?Wt+=xe.point_count:Wt=this._appendLeaves(Ce,xe.cluster_id,Jt,pe,Wt):Wt<pe?Wt++:Ce.push(ue),Ce.length===Jt)break}return Wt},Nt.prototype._addTileFeatures=function(Ce,Te,Jt,pe,Wt,ie){for(var Ae=0,ue=Ce;Ae<ue.length;Ae+=1){var xe=Te[ue[Ae]],$e=xe.numPoints,Fn={type:1,geometry:[[Math.round(this.options.extent*(xe.x*Wt-Jt)),Math.round(this.options.extent*(xe.y*Wt-pe))]],tags:$e?At(xe):this.points[xe.index].properties},or=void 0;$e?or=xe.id:this.options.generateId?or=xe.index:this.points[xe.index].id&&(or=this.points[xe.index].id),or!==void 0&&(Fn.id=or),ie.features.push(Fn)}},Nt.prototype._limitZoom=function(Ce){return Math.max(this.options.minZoom,Math.min(+Ce,this.options.maxZoom+1))},Nt.prototype._cluster=function(Ce,Te){for(var Jt=[],pe=this.options,Wt=pe.reduce,ie=pe.minPoints,Ae=pe.radius/(pe.extent*Math.pow(2,Te)),ue=0;ue<Ce.length;ue++){var xe=Ce[ue];if(!(xe.zoom<=Te)){xe.zoom=Te;for(var $e=this.trees[Te+1],Fn=$e.within(xe.x,xe.y,Ae),or=xe.numPoints||1,En=or,Pn=0,br=Fn;Pn<br.length;Pn+=1){var Pr=$e.points[br[Pn]];Pr.zoom>Te&&(En+=Pr.numPoints||1)}if(En>=ie){for(var ln=xe.x*or,Cr=xe.y*or,Ar=Wt&&or>1?this._map(xe,!0):null,Be=(ue<<5)+(Te+1)+this.points.length,We=0,Ye=Fn;We<Ye.length;We+=1){var fn=$e.points[Ye[We]];if(!(fn.zoom<=Te)){fn.zoom=Te;var gn=fn.numPoints||1;ln+=fn.x*gn,Cr+=fn.y*gn,fn.parentId=Be,Wt&&(Ar||(Ar=this._map(xe,!0)),Wt(Ar,this._map(fn)))}}xe.parentId=Be,Jt.push(Rt(ln/En,Cr/En,Be,En,Ar))}else if(Jt.push(xe),En>1)for(var Bn=0,bn=Fn;Bn<bn.length;Bn+=1){var Ln=$e.points[bn[Bn]];Ln.zoom<=Te||(Ln.zoom=Te,Jt.push(Ln))}}}return Jt},Nt.prototype._getOriginId=function(Ce){return Ce-this.points.length>>5},Nt.prototype._getOriginZoom=function(Ce){return(Ce-this.points.length)%32},Nt.prototype._map=function(Ce,Te){if(Ce.numPoints)return Te?z({},Ce.properties):Ce.properties;var Jt=this.points[Ce.index].properties,pe=this.options.map(Jt);return Te&&pe===Jt?z({},pe):pe},en.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},en.prototype.splitTile=function(Ce,Te,Jt,pe,Wt,ie,Ae){for(var ue=[Ce,Te,Jt,pe],xe=this.options,$e=xe.debug;ue.length;){pe=ue.pop(),Jt=ue.pop(),Te=ue.pop(),Ce=ue.pop();var Fn=1<<Te,or=An(Te,Jt,pe),En=this.tiles[or];if(!En&&($e>1&&console.time("creation"),En=this.tiles[or]=Xn(Ce,Te,Jt,pe,xe),this.tileCoords.push({z:Te,x:Jt,y:pe}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,Jt,pe,En.numFeatures,En.numPoints,En.numSimplified),console.timeEnd("creation"));var Pn="z"+Te;this.stats[Pn]=(this.stats[Pn]||0)+1,this.total++}if(En.source=Ce,Wt){if(Te===xe.maxZoom||Te===Wt)continue;var br=1<<Wt-Te;if(Jt!==Math.floor(ie/br)||pe!==Math.floor(Ae/br))continue}else if(Te===xe.indexMaxZoom||En.numPoints<=xe.indexMaxPoints)continue;if(En.source=null,Ce.length!==0){$e>1&&console.time("clipping");var Pr,ln,Cr,Ar,Be,We,Ye=.5*xe.buffer/xe.extent,fn=.5-Ye,gn=.5+Ye,Bn=1+Ye;Pr=ln=Cr=Ar=null,Be=Ft(Ce,Fn,Jt-Ye,Jt+gn,0,En.minX,En.maxX,xe),We=Ft(Ce,Fn,Jt+fn,Jt+Bn,0,En.minX,En.maxX,xe),Ce=null,Be&&(Pr=Ft(Be,Fn,pe-Ye,pe+gn,1,En.minY,En.maxY,xe),ln=Ft(Be,Fn,pe+fn,pe+Bn,1,En.minY,En.maxY,xe),Be=null),We&&(Cr=Ft(We,Fn,pe-Ye,pe+gn,1,En.minY,En.maxY,xe),Ar=Ft(We,Fn,pe+fn,pe+Bn,1,En.minY,En.maxY,xe),We=null),$e>1&&console.timeEnd("clipping"),ue.push(Pr||[],Te+1,2*Jt,2*pe),ue.push(ln||[],Te+1,2*Jt,2*pe+1),ue.push(Cr||[],Te+1,2*Jt+1,2*pe),ue.push(Ar||[],Te+1,2*Jt+1,2*pe+1)}}},en.prototype.getTile=function(Ce,Te,Jt){var pe=this.options,Wt=pe.extent,ie=pe.debug;if(Ce<0||Ce>24)return null;var Ae=1<<Ce,ue=An(Ce,Te=(Te%Ae+Ae)%Ae,Jt);if(this.tiles[ue])return Xe(this.tiles[ue],Wt);ie>1&&console.log("drilling down to z%d-%d-%d",Ce,Te,Jt);for(var xe,$e=Ce,Fn=Te,or=Jt;!xe&&$e>0;)$e--,Fn=Math.floor(Fn/2),or=Math.floor(or/2),xe=this.tiles[An($e,Fn,or)];return xe&&xe.source?(ie>1&&console.log("found parent tile z%d-%d-%d",$e,Fn,or),ie>1&&console.time("drilling down"),this.splitTile(xe.source,$e,Fn,or,Ce,Te,Jt),ie>1&&console.timeEnd("drilling down"),this.tiles[ue]?Xe(this.tiles[ue],Wt):null):null};var fr=function(Ce){function Te(Jt,pe,Wt,ie){Ce.call(this,Jt,pe,Wt,Nn),ie&&(this.loadGeoJSON=ie)}return Ce&&(Te.__proto__=Ce),(Te.prototype=Object.create(Ce&&Ce.prototype)).constructor=Te,Te.prototype.loadData=function(Jt,pe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=pe,this._pendingLoadDataParams=Jt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var Jt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var pe=this._pendingCallback,Wt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ie=!!(Wt&&Wt.request&&Wt.request.collectResourceTiming)&&new t.RequestPerformance(Wt.request);this.loadGeoJSON(Wt,function(Ae,ue){if(Ae||!ue)return pe(Ae);if(typeof ue!="object")return pe(new Error("Input data given to '"+Wt.source+"' is not a valid GeoJSON object."));(function En(Pn,br){var Pr,ln=Pn&&Pn.type;if(ln==="FeatureCollection")for(Pr=0;Pr<Pn.features.length;Pr++)En(Pn.features[Pr],br);else if(ln==="GeometryCollection")for(Pr=0;Pr<Pn.geometries.length;Pr++)En(Pn.geometries[Pr],br);else if(ln==="Feature")En(Pn.geometry,br);else if(ln==="Polygon")f(Pn.coordinates,br);else if(ln==="MultiPolygon")for(Pr=0;Pr<Pn.coordinates.length;Pr++)f(Pn.coordinates[Pr],br);return Pn})(ue,!0);try{if(Wt.filter){var xe=t.createExpression(Wt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(xe.result==="error")throw new Error(xe.value.map(function(En){return En.key+": "+En.message}).join(", "));var $e=ue.features.filter(function(En){return xe.value.evaluate({zoom:0},En)});ue={type:"FeatureCollection",features:$e}}Jt._geoJSONIndex=Wt.cluster?new Nt(function(En){var Pn=En.superclusterOptions,br=En.clusterProperties;if(!br||!Pn)return Pn;for(var Pr={},ln={},Cr={accumulated:null,zoom:0},Ar={properties:null},Be=Object.keys(br),We=0,Ye=Be;We<Ye.length;We+=1){var fn=Ye[We],gn=br[fn],Bn=gn[0],bn=t.createExpression(gn[1]),Ln=t.createExpression(typeof Bn=="string"?[Bn,["accumulated"],["get",fn]]:Bn);Pr[fn]=bn.value,ln[fn]=Ln.value}return Pn.map=function(ir){Ar.properties=ir;for(var Yn={},_n=0,Dr=Be;_n<Dr.length;_n+=1){var vr=Dr[_n];Yn[vr]=Pr[vr].evaluate(Cr,Ar)}return Yn},Pn.reduce=function(ir,Yn){Ar.properties=Yn;for(var _n=0,Dr=Be;_n<Dr.length;_n+=1){var vr=Dr[_n];Cr.accumulated=ir[vr],ir[vr]=ln[vr].evaluate(Cr,Ar)}},Pn}(Wt)).load(ue.features):function(En,Pn){return new en(En,Pn)}(ue,Wt.geojsonVtOptions)}catch(En){return pe(En)}Jt.loaded={};var Fn={};if(ie){var or=ie.finish();or&&(Fn.resourceTiming={},Fn.resourceTiming[Wt.source]=JSON.parse(JSON.stringify(or)))}pe(null,Fn)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(Jt,pe){var Wt=this.loaded;return Wt&&Wt[Jt.uid]?Ce.prototype.reloadTile.call(this,Jt,pe):this.loadTile(Jt,pe)},Te.prototype.loadGeoJSON=function(Jt,pe){if(Jt.request)t.getJSON(Jt.request,pe);else{if(typeof Jt.data!="string")return pe(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."));try{return pe(null,JSON.parse(Jt.data))}catch(Wt){return pe(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."))}}},Te.prototype.removeSource=function(Jt,pe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),pe()},Te.prototype.getClusterExpansionZoom=function(Jt,pe){try{pe(null,this._geoJSONIndex.getClusterExpansionZoom(Jt.clusterId))}catch(Wt){pe(Wt)}},Te.prototype.getClusterChildren=function(Jt,pe){try{pe(null,this._geoJSONIndex.getChildren(Jt.clusterId))}catch(Wt){pe(Wt)}},Te.prototype.getClusterLeaves=function(Jt,pe){try{pe(null,this._geoJSONIndex.getLeaves(Jt.clusterId,Jt.limit,Jt.offset))}catch(Wt){pe(Wt)}},Te}(a),hi=function(Te){var Jt=this;this.self=Te,this.actor=new t.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:fr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pe,Wt){if(Jt.workerSourceTypes[pe])throw new Error('Worker source with name "'+pe+'" already registered.');Jt.workerSourceTypes[pe]=Wt},this.self.registerRTLTextPlugin=function(pe){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=pe.applyArabicShaping,t.plugin.processBidirectionalText=pe.processBidirectionalText,t.plugin.processStyledBidirectionalText=pe.processStyledBidirectionalText}};return hi.prototype.setReferrer=function(Ce,Te){this.referrer=Te},hi.prototype.setImages=function(Ce,Te,Jt){for(var pe in this.availableImages[Ce]=Te,this.workerSources[Ce]){var Wt=this.workerSources[Ce][pe];for(var ie in Wt)Wt[ie].availableImages=Te}Jt()},hi.prototype.setLayers=function(Ce,Te,Jt){this.getLayerIndex(Ce).replace(Te),Jt()},hi.prototype.updateLayers=function(Ce,Te,Jt){this.getLayerIndex(Ce).update(Te.layers,Te.removedIds),Jt()},hi.prototype.loadTile=function(Ce,Te,Jt){this.getWorkerSource(Ce,Te.type,Te.source).loadTile(Te,Jt)},hi.prototype.loadDEMTile=function(Ce,Te,Jt){this.getDEMWorkerSource(Ce,Te.source).loadTile(Te,Jt)},hi.prototype.reloadTile=function(Ce,Te,Jt){this.getWorkerSource(Ce,Te.type,Te.source).reloadTile(Te,Jt)},hi.prototype.abortTile=function(Ce,Te,Jt){this.getWorkerSource(Ce,Te.type,Te.source).abortTile(Te,Jt)},hi.prototype.removeTile=function(Ce,Te,Jt){this.getWorkerSource(Ce,Te.type,Te.source).removeTile(Te,Jt)},hi.prototype.removeDEMTile=function(Ce,Te){this.getDEMWorkerSource(Ce,Te.source).removeTile(Te)},hi.prototype.removeSource=function(Ce,Te,Jt){if(this.workerSources[Ce]&&this.workerSources[Ce][Te.type]&&this.workerSources[Ce][Te.type][Te.source]){var pe=this.workerSources[Ce][Te.type][Te.source];delete this.workerSources[Ce][Te.type][Te.source],pe.removeSource!==void 0?pe.removeSource(Te,Jt):Jt()}},hi.prototype.loadWorkerSource=function(Ce,Te,Jt){try{this.self.importScripts(Te.url),Jt()}catch(pe){Jt(pe.toString())}},hi.prototype.syncRTLPluginState=function(Ce,Te,Jt){try{t.plugin.setState(Te);var pe=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&pe!=null){this.self.importScripts(pe);var Wt=t.plugin.isParsed();Jt(Wt?void 0:new Error("RTL Text Plugin failed to import scripts from "+pe),Wt)}}catch(ie){Jt(ie.toString())}},hi.prototype.getAvailableImages=function(Ce){var Te=this.availableImages[Ce];return Te||(Te=[]),Te},hi.prototype.getLayerIndex=function(Ce){var Te=this.layerIndexes[Ce];return Te||(Te=this.layerIndexes[Ce]=new c),Te},hi.prototype.getWorkerSource=function(Ce,Te,Jt){var pe=this;return this.workerSources[Ce]||(this.workerSources[Ce]={}),this.workerSources[Ce][Te]||(this.workerSources[Ce][Te]={}),this.workerSources[Ce][Te][Jt]||(this.workerSources[Ce][Te][Jt]=new this.workerSourceTypes[Te]({send:function(ie,Ae,ue){pe.actor.send(ie,Ae,ue,Ce)}},this.getLayerIndex(Ce),this.getAvailableImages(Ce))),this.workerSources[Ce][Te][Jt]},hi.prototype.getDEMWorkerSource=function(Ce,Te){return this.demWorkerSources[Ce]||(this.demWorkerSources[Ce]={}),this.demWorkerSources[Ce][Te]||(this.demWorkerSources[Ce][Te]=new u),this.demWorkerSources[Ce][Te]},hi.prototype.enforceCacheSizeLimit=function(Ce,Te){t.enforceCacheSizeLimit(Te)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new hi(self)),hi}),e(["./shared"],function(t){"use strict";var l=t.createCommonjsModule(function(j){function I(D){return!w(D)}function w(D){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var $,st,Ct=new Blob([""],{type:"text/javascript"}),wt=URL.createObjectURL(Ct);try{st=new Worker(wt),$=!0}catch(Ut){$=!1}return st&&st.terminate(),URL.revokeObjectURL(wt),$}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var $=document.createElement("canvas");$.width=$.height=1;var st=$.getContext("2d");if(!st)return!1;var Ct=st.getImageData(0,0,1,1);return Ct&&Ct.width===$.width}()?(B[G=D&&D.failIfMajorPerformanceCaveat]===void 0&&(B[G]=function($){var st=function(wt){var Ut=document.createElement("canvas"),Yt=Object.create(I.webGLContextAttributes);return Yt.failIfMajorPerformanceCaveat=wt,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Yt)||Ut.probablySupportsContext("experimental-webgl",Yt):Ut.supportsContext?Ut.supportsContext("webgl",Yt)||Ut.supportsContext("experimental-webgl",Yt):Ut.getContext("webgl",Yt)||Ut.getContext("experimental-webgl",Yt)}($);if(!st)return!1;var Ct=st.createShader(st.VERTEX_SHADER);return!(!Ct||st.isContextLost())&&(st.shaderSource(Ct,"void main() {}"),st.compileShader(Ct),st.getShaderParameter(Ct,st.COMPILE_STATUS)===!0)}(G)),B[G]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var G}j.exports?j.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=w);var B={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),s={create:function(I,w,B){var D=t.window.document.createElement(I);return w!==void 0&&(D.className=w),B&&B.appendChild(D),D},createNS:function(I,w){return t.window.document.createElementNS(I,w)}},c=t.window.document&&t.window.document.documentElement.style;function r(j){if(!c)return j[0];for(var I=0;I<j.length;I++)if(j[I]in c)return j[I];return j[0]}var h,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){c&&n&&(h=c[n],c[n]="none")},s.enableDrag=function(){c&&n&&(c[n]=h)};var i=r(["transform","WebkitTransform"]);s.setTransform=function(j,I){j.style[i]=I};var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});t.window.addEventListener("test",o,o),t.window.removeEventListener("test",o,o)}catch(j){a=!1}s.addEventListener=function(j,I,w,B){B===void 0&&(B={}),j.addEventListener(I,w,"passive"in B&&a?B:B.capture)},s.removeEventListener=function(j,I,w,B){B===void 0&&(B={}),j.removeEventListener(I,w,"passive"in B&&a?B:B.capture)};var u=function j(I){I.preventDefault(),I.stopPropagation(),t.window.removeEventListener("click",j,!0)};function f(j){var I=j.userImage;return!!(I&&I.render&&I.render())&&(j.data.replace(new Uint8Array(I.data.buffer)),!0)}s.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",u,!0)},0)},s.mousePos=function(j,I){var w=j.getBoundingClientRect();return new t.Point(I.clientX-w.left-j.clientLeft,I.clientY-w.top-j.clientTop)},s.touchPos=function(j,I){for(var w=j.getBoundingClientRect(),B=[],D=0;D<I.length;D++)B.push(new t.Point(I[D].clientX-w.left-j.clientLeft,I[D].clientY-w.top-j.clientTop));return B},s.mouseButton=function(j){return t.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},s.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var v=function(j){function I(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var B=0,D=this.requestors;B<D.length;B+=1){var G=D[B];this._notify(G.ids,G.callback)}this.requestors=[]}},I.prototype.getImage=function(w){return this.images[w]},I.prototype.addImage=function(w,B){this._validate(w,B)&&(this.images[w]=B)},I.prototype._validate=function(w,B){var D=!0;return this._validateStretch(B.stretchX,B.data&&B.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(B.stretchY,B.data&&B.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),D=!1),this._validateContent(B.content,B)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),D=!1),D},I.prototype._validateStretch=function(w,B){if(!w)return!0;for(var D=0,G=0,$=w;G<$.length;G+=1){var st=$[G];if(st[0]<D||st[1]<st[0]||B<st[1])return!1;D=st[1]}return!0},I.prototype._validateContent=function(w,B){return!(w&&(w.length!==4||w[0]<0||B.data.width<w[0]||w[1]<0||B.data.height<w[1]||w[2]<0||B.data.width<w[2]||w[3]<0||B.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},I.prototype.updateImage=function(w,B){B.version=this.images[w].version+1,this.images[w]=B,this.updatedImages[w]=!0},I.prototype.removeImage=function(w){var B=this.images[w];delete this.images[w],delete this.patterns[w],B.userImage&&B.userImage.onRemove&&B.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(w,B){var D=!0;if(!this.isLoaded())for(var G=0,$=w;G<$.length;G+=1)this.images[$[G]]||(D=!1);this.isLoaded()||D?this._notify(w,B):this.requestors.push({ids:w,callback:B})},I.prototype._notify=function(w,B){for(var D={},G=0,$=w;G<$.length;G+=1){var st=$[G];this.images[st]||this.fire(new t.Event("styleimagemissing",{id:st}));var Ct=this.images[st];Ct?D[st]={data:Ct.data.clone(),pixelRatio:Ct.pixelRatio,sdf:Ct.sdf,version:Ct.version,stretchX:Ct.stretchX,stretchY:Ct.stretchY,content:Ct.content,hasRenderCallback:Boolean(Ct.userImage&&Ct.userImage.render)}:t.warnOnce('Image "'+st+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}B(null,D)},I.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},I.prototype.getPattern=function(w){var B=this.patterns[w],D=this.getImage(w);if(!D)return null;if(B&&B.position.version===D.version)return B.position;if(B)B.position.version=D.version;else{var G={w:D.data.width+2,h:D.data.height+2,x:0,y:0},$=new t.ImagePosition(G,D);this.patterns[w]={bin:G,position:$}}return this._updatePatternAtlas(),this.patterns[w].position},I.prototype.bind=function(w){var B=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(w,this.atlasImage,B.RGBA),this.atlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var w=[];for(var B in this.patterns)w.push(this.patterns[B].bin);var D=t.potpack(w),G=D.w,$=D.h,st=this.atlasImage;for(var Ct in st.resize({width:G||1,height:$||1}),this.patterns){var wt=this.patterns[Ct].bin,Ut=wt.x+1,Yt=wt.y+1,qt=this.images[Ct].data,he=qt.width,ye=qt.height;t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Yt},{width:he,height:ye}),t.RGBAImage.copy(qt,st,{x:0,y:ye-1},{x:Ut,y:Yt-1},{width:he,height:1}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Yt+ye},{width:he,height:1}),t.RGBAImage.copy(qt,st,{x:he-1,y:0},{x:Ut-1,y:Yt},{width:1,height:ye}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut+he,y:Yt},{width:1,height:ye})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(w){for(var B=0,D=w;B<D.length;B+=1){var G=D[B];if(!this.callbackDispatchedThisFrame[G]){this.callbackDispatchedThisFrame[G]=!0;var $=this.images[G];f($)&&this.updateImage(G,$)}}},I}(t.Evented),b=_,y=_,g=1e20;function _(j,I,w,B,D,G){this.fontSize=j||24,this.buffer=I===void 0?3:I,this.cutoff=B||.25,this.fontFamily=D||"sans-serif",this.fontWeight=G||"normal",this.radius=w||8;var $=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=$,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.d=new Float64Array($),this.z=new Float64Array($+1),this.v=new Int16Array($),this.middle=Math.round($/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(j,I,w,B,D,G,$){for(var st=0;st<I;st++){for(var Ct=0;Ct<w;Ct++)B[Ct]=j[Ct*I+st];for(x(B,D,G,$,w),Ct=0;Ct<w;Ct++)j[Ct*I+st]=D[Ct]}for(Ct=0;Ct<w;Ct++){for(st=0;st<I;st++)B[st]=j[Ct*I+st];for(x(B,D,G,$,I),st=0;st<I;st++)j[Ct*I+st]=Math.sqrt(D[st])}}function x(j,I,w,B,D){w[0]=0,B[0]=-g,B[1]=+g;for(var G=1,$=0;G<D;G++){for(var st=(j[G]+G*G-(j[w[$]]+w[$]*w[$]))/(2*G-2*w[$]);st<=B[$];)$--,st=(j[G]+G*G-(j[w[$]]+w[$]*w[$]))/(2*G-2*w[$]);w[++$]=G,B[$]=st,B[$+1]=+g}for(G=0,$=0;G<D;G++){for(;B[$+1]<G;)$++;I[G]=(G-w[$])*(G-w[$])+j[w[$]]}}_.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),B=0;B<this.size*this.size;B++){var D=I.data[4*B+3]/255;this.gridOuter[B]=D===1?0:D===0?g:Math.pow(Math.max(0,.5-D),2),this.gridInner[B]=D===1?g:D===0?0:Math.pow(Math.max(0,D-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),B=0;B<this.size*this.size;B++)w[B]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[B]-this.gridInner[B])/this.radius+this.cutoff))));return w},b.default=y;var m=function(I,w){this.requestManager=I,this.localIdeographFontFamily=w,this.entries={}};m.prototype.setURL=function(j){this.url=j},m.prototype.getGlyphs=function(j,I){var w=this,B=[];for(var D in j)for(var G=0,$=j[D];G<$.length;G+=1)B.push({stack:D,id:$[G]});t.asyncAll(B,function(st,Ct){var wt=st.stack,Ut=st.id,Yt=w.entries[wt];Yt||(Yt=w.entries[wt]={glyphs:{},requests:{},ranges:{}});var qt=Yt.glyphs[Ut];if(qt===void 0){if(qt=w._tinySDF(Yt,wt,Ut))return Yt.glyphs[Ut]=qt,void Ct(null,{stack:wt,id:Ut,glyph:qt});var he=Math.floor(Ut/256);if(256*he>65535)Ct(new Error("glyphs > 65535 not supported"));else if(Yt.ranges[he])Ct(null,{stack:wt,id:Ut,glyph:qt});else{var ye=Yt.requests[he];ye||(ye=Yt.requests[he]=[],m.loadGlyphRange(wt,he,w.url,w.requestManager,function(je,Ie){if(Ie){for(var Ve in Ie)w._doesCharSupportLocalGlyph(+Ve)||(Yt.glyphs[+Ve]=Ie[+Ve]);Yt.ranges[he]=!0}for(var qe=0,sn=ye;qe<sn.length;qe+=1)(0,sn[qe])(je,Ie);delete Yt.requests[he]})),ye.push(function(je,Ie){je?Ct(je):Ie&&Ct(null,{stack:wt,id:Ut,glyph:Ie[Ut]||null})})}}else Ct(null,{stack:wt,id:Ut,glyph:qt})},function(st,Ct){if(st)I(st);else if(Ct){for(var wt={},Ut=0,Yt=Ct;Ut<Yt.length;Ut+=1){var qt=Yt[Ut],he=qt.stack,ye=qt.id,je=qt.glyph;(wt[he]||(wt[he]={}))[ye]=je&&{id:je.id,bitmap:je.bitmap.clone(),metrics:je.metrics}}I(null,wt)}})},m.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](j)||t.isChar["Hangul Syllables"](j)||t.isChar.Hiragana(j)||t.isChar.Katakana(j))},m.prototype._tinySDF=function(j,I,w){var B=this.localIdeographFontFamily;if(B&&this._doesCharSupportLocalGlyph(w)){var D=j.tinySDF;if(!D){var G="400";/bold/i.test(I)?G="900":/medium/i.test(I)?G="500":/light/i.test(I)&&(G="200"),D=j.tinySDF=new m.TinySDF(24,3,8,.25,B,G)}return{id:w,bitmap:new t.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(j,I,w,B,D){var G=256*I,$=G+255,st=B.transformRequest(B.normalizeGlyphsURL(w).replace("{fontstack}",j).replace("{range}",G+"-"+$),t.ResourceType.Glyphs);t.getArrayBuffer(st,function(Ct,wt){if(Ct)D(Ct);else if(wt){for(var Ut={},Yt=0,qt=t.parseGlyphPBF(wt);Yt<qt.length;Yt+=1){var he=qt[Yt];Ut[he.id]=he}D(null,Ut)}})},m.TinySDF=b;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(j,I){return t.sphericalToCartesian(j.expression.evaluate(I))},S.prototype.interpolate=function(j,I,w){return{x:t.number(j.x,I.x,w),y:t.number(j.y,I.y,w),z:t.number(j.z,I.z,w)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),A=function(j){function I(w){j.call(this),this._transitionable=new t.Transitionable(P),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(w,B){if(B===void 0&&(B={}),!this._validate(t.validateLight,w,B))for(var D in w){var G=w[D];t.endsWith(D,"-transition")?this._transitionable.setTransition(D.slice(0,-"-transition".length),G):this._transitionable.setValue(D,G)}},I.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},I.prototype._validate=function(w,B,D){return(!D||D.validate!==!1)&&t.emitValidationErrors(this,w.call(t.validateStyle,t.extend({value:B,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},I}(t.Evented),O=function(I,w){this.width=I,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(j,I){var w=j.join(",")+String(I);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(j,I)),this.dashEntry[w]},O.prototype.getDashRanges=function(j,I,w){var B=[],D=j.length%2==1?-j[j.length-1]*w:0,G=j[0]*w,$=!0;B.push({left:D,right:G,isDash:$,zeroLength:j[0]===0});for(var st=j[0],Ct=1;Ct<j.length;Ct++){var wt=j[Ct];B.push({left:D=st*w,right:G=(st+=wt)*w,isDash:$=!$,zeroLength:wt===0})}return B},O.prototype.addRoundDash=function(j,I,w){for(var B=I/2,D=-w;D<=w;D++)for(var G=this.width*(this.nextRow+w+D),$=0,st=j[$],Ct=0;Ct<this.width;Ct++){Ct/st.right>1&&(st=j[++$]);var wt=Math.abs(Ct-st.left),Ut=Math.abs(Ct-st.right),Yt=Math.min(wt,Ut),qt=void 0,he=D/w*(B+1);if(st.isDash){var ye=B-Math.abs(he);qt=Math.sqrt(Yt*Yt+ye*ye)}else qt=B-Math.sqrt(Yt*Yt+he*he);this.data[G+Ct]=Math.max(0,Math.min(255,qt+128))}},O.prototype.addRegularDash=function(j){for(var I=j.length-1;I>=0;--I){var w=j[I],B=j[I+1];w.zeroLength?j.splice(I,1):B&&B.isDash===w.isDash&&(B.left=w.left,j.splice(I,1))}var D=j[0],G=j[j.length-1];D.isDash===G.isDash&&(D.left=G.left-this.width,G.right=D.right+this.width);for(var $=this.width*this.nextRow,st=0,Ct=j[st],wt=0;wt<this.width;wt++){wt/Ct.right>1&&(Ct=j[++st]);var Ut=Math.abs(wt-Ct.left),Yt=Math.abs(wt-Ct.right),qt=Math.min(Ut,Yt);this.data[$+wt]=Math.max(0,Math.min(255,(Ct.isDash?qt:-qt)+128))}},O.prototype.addDash=function(j,I){var w=I?7:0,B=2*w+1;if(this.nextRow+B>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var D=0,G=0;G<j.length;G++)D+=j[G];if(D!==0){var $=this.width/D,st=this.getDashRanges(j,this.width,$);I?this.addRoundDash(st,$,w):this.addRegularDash(st)}var Ct={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:D};return this.nextRow+=B,this.dirty=!0,Ct},O.prototype.bind=function(j){var I=j.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var L=function j(I,w){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var B=this.workerPool.acquire(this.id),D=0;D<B.length;D++){var G=new j.Actor(B[D],w,this.id);G.name="Worker "+D,this.actors.push(G)}};function W(j,I,w){var B=function(G,$){if(G)return w(G);if($){var st=t.pick(t.extend($,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);$.vector_layers&&(st.vectorLayers=$.vector_layers,st.vectorLayerIds=st.vectorLayers.map(function(Ct){return Ct.id})),st.tiles=I.canonicalizeTileset(st,j.url),w(null,st)}};return j.url?t.getJSON(I.transformRequest(I.normalizeSourceURL(j.url),t.ResourceType.Source),B):t.browser.frame(function(){return B(null,j)})}L.prototype.broadcast=function(j,I,w){t.asyncAll(this.actors,function(B,D){B.send(j,I,D)},w=w||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=t.Actor;var F=function(I,w,B){this.bounds=t.LngLatBounds.convert(this.validateBounds(I)),this.minzoom=w||0,this.maxzoom=B||24};F.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},F.prototype.contains=function(j){var I=Math.pow(2,j.z),w=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*I),B=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*I),D=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*I),G=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*I);return j.x>=w&&j.x<D&&j.y>=B&&j.y<G};var K=function(j){function I(w,B,D,G){if(j.call(this),this.id=w,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(B,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},B),this._collectResourceTiming=B.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(G)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles,w.map._requestManager._customAccessToken),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(w){var B=this;return this.setSourceProperty(function(){B._options.tiles=w}),this},I.prototype.setUrl=function(w){var B=this;return this.setSourceProperty(function(){B.url=w,B._options.url=w}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),G={request:this.map._requestManager.transformRequest(D,t.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function $(st,Ct){return delete w.request,w.aborted?B(null):st&&st.status!==404?B(st):(Ct&&Ct.resourceTiming&&(w.resourceTiming=Ct.resourceTiming),this.map._refreshExpiredTiles&&Ct&&w.setExpiryData(Ct),w.loadVectorData(Ct,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),B(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}G.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=B:w.request=w.actor.send("reloadTile",G,$.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",G,$.bind(this)))},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(t.Evented),V=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.setEventedParent(G),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},B),t.extend(this,t.pick(B,["url","scheme","tileSize"]))}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.loadTile=function(w,B){var D=this,G=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=t.getImage(this.map._requestManager.transformRequest(G,t.ResourceType.Tile),function($,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if($)w.state="errored",B($);else if(st){D.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=D.map.painter.context,wt=Ct.gl;w.texture=D.map.painter.getTileTexture(st.width),w.texture?w.texture.update(st,{useMipmap:!0}):(w.texture=new t.Texture(Ct,st,wt.RGBA,{useMipmap:!0}),w.texture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE,wt.LINEAR_MIPMAP_NEAREST),Ct.extTextureFilterAnisotropic&&wt.texParameterf(wt.TEXTURE_2D,Ct.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ct.extTextureFilterAnisotropicMax)),w.state="loaded",t.cacheEntryPossiblyAdded(D.dispatcher),B(null)}})},I.prototype.abortTile=function(w,B){w.request&&(w.request.cancel(),delete w.request),B()},I.prototype.unloadTile=function(w,B){w.texture&&this.map.painter.saveTileTexture(w.texture),B()},I.prototype.hasTransition=function(){return!1},I}(t.Evented),k=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},B),this.encoding=B.encoding||"mapbox"}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function G($,st){$&&(w.state="errored",B($)),st&&(w.dem=st,w.needsHillshadePrepare=!0,w.state="loaded",B(null))}w.request=t.getImage(this.map._requestManager.transformRequest(D,t.ResourceType.Tile),function($,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if($)w.state="errored",B($);else if(st){this.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=t.window.ImageBitmap&&st instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?st:t.browser.getImageData(st,1),wt={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:Ct,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",wt,G.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},I.prototype._getNeighboringTiles=function(w){var B=w.canonical,D=Math.pow(2,B.z),G=(B.x-1+D)%D,$=B.x===0?w.wrap-1:w.wrap,st=(B.x+1+D)%D,Ct=B.x+1===D?w.wrap+1:w.wrap,wt={};return wt[new t.OverscaledTileID(w.overscaledZ,$,B.z,G,B.y).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y).key]={backfilled:!1},B.y>0&&(wt[new t.OverscaledTileID(w.overscaledZ,$,B.z,G,B.y-1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y-1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y-1).key]={backfilled:!1}),B.y+1<D&&(wt[new t.OverscaledTileID(w.overscaledZ,$,B.z,G,B.y+1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y+1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y+1).key]={backfilled:!1}),wt},I.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},I}(V),Z=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=D.getActor(),this.setEventedParent(G),this._data=B.data,this._options=t.extend({},B),this._collectResourceTiming=B.collectResourceTiming,this._resourceTiming=[],B.maxzoom!==void 0&&(this.maxzoom=B.maxzoom),B.type&&(this.type=B.type),B.attribution&&(this.attribution=B.attribution),this.promoteId=B.promoteId;var $=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:B.cluster||!1,geojsonVtOptions:{buffer:(B.buffer!==void 0?B.buffer:128)*$,tolerance:(B.tolerance!==void 0?B.tolerance:.375)*$,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:B.lineMetrics||!1,generateId:B.generateId||!1},superclusterOptions:{maxZoom:B.clusterMaxZoom!==void 0?Math.min(B.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,B.clusterMinPoints||2),extent:t.EXTENT,radius:(B.clusterRadius||50)*$,log:!1,generateId:B.generateId||!1},clusterProperties:B.clusterProperties,filter:B.filter},B.workerOptions)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(B){if(B)w.fire(new t.ErrorEvent(B));else{var D={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(D.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new t.Event("data",D))}})},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setData=function(w){var B=this;return this._data=w,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)B.fire(new t.ErrorEvent(D));else{var G={dataType:"source",sourceDataType:"content"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(G.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new t.Event("data",G))}}),this},I.prototype.getClusterExpansionZoom=function(w,B){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},B),this},I.prototype.getClusterChildren=function(w,B){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},B),this},I.prototype.getClusterLeaves=function(w,B,D,G){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:B,offset:D},G),this},I.prototype._updateWorkerData=function(w){var B=this;this._loaded=!1;var D=t.extend({},this.workerOptions),G=this._data;typeof G=="string"?(D.request=this.map._requestManager.transformRequest(t.browser.resolveURL(G),t.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(G),this.actor.send(this.type+".loadData",D,function($,st){B._removed||st&&st.abandoned||(B._loaded=!0,st&&st.resourceTiming&&st.resourceTiming[B.id]&&(B._resourceTiming=st.resourceTiming[B.id].slice(0)),B.actor.send(B.type+".coalesce",{source:D.source},null),w($))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(w,B){var D=this,G=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(G,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function($,st){return delete w.request,w.unloadVectorData(),w.aborted?B(null):$?B($):(w.loadVectorData(st,D.map.painter,G==="reloadTile"),B(null))})},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},I.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(t.Evented),X=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),it=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.coordinates=B.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(G),this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(w,B){var D=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(G,$){D._loaded=!0,G?D.fire(new t.ErrorEvent(G)):$&&(D.image=$,w&&(D.coordinates=w),B&&B(),D._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(w){var B=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){B.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setCoordinates=function(w){var B=this;this.coordinates=w;var D=w.map(t.MercatorCoordinate.fromLngLat);this.tileID=function($){for(var st=1/0,Ct=1/0,wt=-1/0,Ut=-1/0,Yt=0,qt=$;Yt<qt.length;Yt+=1){var he=qt[Yt];st=Math.min(st,he.x),Ct=Math.min(Ct,he.y),wt=Math.max(wt,he.x),Ut=Math.max(Ut,he.y)}var ye=Math.max(wt-st,Ut-Ct),je=Math.max(0,Math.floor(-Math.log(ye)/Math.LN2)),Ie=Math.pow(2,je);return new t.CanonicalTileID(je,Math.floor((st+wt)/2*Ie),Math.floor((Ct+Ut)/2*Ie))}(D),this.minzoom=this.maxzoom=this.tileID.z;var G=D.map(function($){return B.tileID.getTilePoint($)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(w,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.loadTile=function(w,B){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},B(null)):(w.state="errored",B(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(t.Evented),ft=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.roundZoom=!0,this.type="video",this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1;var B=this.options;this.urls=[];for(var D=0,G=B.urls;D<G.length;D+=1)this.urls.push(this.map._requestManager.transformRequest(G[D],t.ResourceType.Source).url);t.getVideo(this.urls,function($,st){w._loaded=!0,$?w.fire(new t.ErrorEvent($)):st&&(w.video=st,w.video.loop=!0,w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(w){if(this.video){var B=this.video.seekable;w<B.start(0)||w>B.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+B.start(0)+" and "+B.end(0)+"-second mark."))):this.video.currentTime=w}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(w,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(it),pt=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),B.coordinates?Array.isArray(B.coordinates)&&B.coordinates.length===4&&!B.coordinates.some(function($){return!Array.isArray($)||$.length!==2||$.some(function(st){return typeof st!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "coordinates"'))),B.animate&&typeof B.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),B.canvas?typeof B.canvas=="string"||B.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=B,this.animate=B.animate===void 0||B.animate}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var B=this.map.painter.context,D=B.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(B,this.canvas,D.RGBA,{premultiply:!0}),this.tiles){var $=this.tiles[G];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var w=0,B=[this.canvas.width,this.canvas.height];w<B.length;w+=1){var D=B[w];if(isNaN(D)||D<=0)return!0}return!1},I}(it),ut={vector:K,raster:V,"raster-dem":k,geojson:Z,video:ft,image:it,canvas:pt};function It(j,I){var w=t.identity([]);return t.translate(w,w,[1,1,0]),t.scale(w,w,[.5*j.width,.5*j.height,1]),t.multiply(w,w,j.calculatePosMatrix(I.toUnwrapped()))}function Nt(j,I,w,B,D,G){var $=function(je,Ie,Ve){if(je)for(var qe=0,sn=je;qe<sn.length;qe+=1){var tr=Ie[sn[qe]];if(tr&&tr.source===Ve&&tr.type==="fill-extrusion")return!0}else for(var kn in Ie){var pr=Ie[kn];if(pr.source===Ve&&pr.type==="fill-extrusion")return!0}return!1}(D&&D.layers,I,j.id),st=G.maxPitchScaleFactor(),Ct=j.tilesIn(B,st,$);Ct.sort(Rt);for(var wt=[],Ut=0,Yt=Ct;Ut<Yt.length;Ut+=1){var qt=Yt[Ut];wt.push({wrappedTileID:qt.tileID.wrapped().key,queryResults:qt.tile.queryRenderedFeatures(I,w,j._state,qt.queryGeometry,qt.cameraQueryGeometry,qt.scale,D,G,st,It(j.transform,qt.tileID))})}var he=function(je){for(var Ie={},Ve={},qe=0,sn=je;qe<sn.length;qe+=1){var tr=sn[qe],kn=tr.queryResults,pr=tr.wrappedTileID,Mr=Ve[pr]=Ve[pr]||{};for(var $r in kn)for(var Yr=kn[$r],Ti=Mr[$r]=Mr[$r]||{},Li=Ie[$r]=Ie[$r]||[],Ki=0,Xi=Yr;Ki<Xi.length;Ki+=1){var Oa=Xi[Ki];Ti[Oa.featureIndex]||(Ti[Oa.featureIndex]=!0,Li.push(Oa))}}return Ie}(wt);for(var ye in he)he[ye].forEach(function(je){var Ie=je.feature,Ve=j.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Ve});return he}function Rt(j,I){var w=j.tileID,B=I.tileID;return w.overscaledZ-B.overscaledZ||w.canonical.y-B.canonical.y||w.wrap-B.wrap||w.canonical.x-B.canonical.x}var Mt=function(I,w){this.max=I,this.onRemove=w,this.reset()};Mt.prototype.reset=function(){for(var j in this.data)for(var I=0,w=this.data[j];I<w.length;I+=1){var B=w[I];B.timeout&&clearTimeout(B.timeout),this.onRemove(B.value)}return this.data={},this.order=[],this},Mt.prototype.add=function(j,I,w){var B=this,D=j.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var G={value:I,timeout:void 0};if(w!==void 0&&(G.timeout=setTimeout(function(){B.remove(j,G)},w)),this.data[D].push(G),this.order.push(D),this.order.length>this.max){var $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this},Mt.prototype.has=function(j){return j.wrapped().key in this.data},Mt.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},Mt.prototype._getAndRemoveByKey=function(j){var I=this.data[j].shift();return I.timeout&&clearTimeout(I.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),I.value},Mt.prototype.getByKey=function(j){var I=this.data[j];return I?I[0].value:null},Mt.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},Mt.prototype.remove=function(j,I){if(!this.has(j))return this;var w=j.wrapped().key,B=I===void 0?0:this.data[w].indexOf(I),D=this.data[w][B];return this.data[w].splice(B,1),D.timeout&&clearTimeout(D.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(D.value),this.order.splice(this.order.indexOf(w),1),this},Mt.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},Mt.prototype.filter=function(j){var I=[];for(var w in this.data)for(var B=0,D=this.data[w];B<D.length;B+=1){var G=D[B];j(G.value)||I.push(G)}for(var $=0,st=I;$<st.length;$+=1){var Ct=st[$];this.remove(Ct.value.tileID,Ct)}};var bt=function(I,w,B){this.context=I;var D=I.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),I.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};bt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},bt.prototype.updateData=function(j){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},bt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var At={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},rt=function(I,w,B,D){this.length=w.length,this.attributes=B,this.itemSize=w.bytesPerElement,this.dynamicDraw=D,this.context=I;var G=I.gl;this.buffer=G.createBuffer(),I.bindVertexBuffer.set(this.buffer),G.bufferData(G.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};rt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},rt.prototype.updateData=function(j){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,j.arrayBuffer)},rt.prototype.enableAttributes=function(j,I){for(var w=0;w<this.attributes.length;w++){var B=I.attributes[this.attributes[w].name];B!==void 0&&j.enableVertexAttribArray(B)}},rt.prototype.setVertexAttribPointers=function(j,I,w){for(var B=0;B<this.attributes.length;B++){var D=this.attributes[B],G=I.attributes[D.name];G!==void 0&&j.vertexAttribPointer(G,D.components,j[At[D.type]],!1,this.itemSize,D.offset+this.itemSize*(w||0))}},rt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Pt=function(I){this.gl=I.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Pt.prototype.get=function(){return this.current},Pt.prototype.set=function(j){},Pt.prototype.getDefault=function(){return this.default},Pt.prototype.setDefault=function(){this.set(this.default)};var z=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Pt),Q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},I}(Pt),gt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},I}(Pt),et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Pt),ot=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},I}(Pt),xt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},I}(Pt),H=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(w){var B=this.current;(w.func!==B.func||w.ref!==B.ref||w.mask!==B.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},I}(Pt),nt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},I}(Pt),at=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this.current=w,this.dirty=!1}},I}(Pt),q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Pt),_t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this.current=w,this.dirty=!1}},I}(Pt),yt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},I}(Pt),Ft=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.BLEND):B.disable(B.BLEND),this.current=w,this.dirty=!1}},I}(Pt),Qt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Pt),ee=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Pt),Vt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},I}(Pt),$t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this.current=w,this.dirty=!1}},I}(Pt),Me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},I}(Pt),me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},I}(Pt),le=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},I}(Pt),be=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},I}(Pt),ze=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Pt),Xe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),Sn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindRenderbuffer(B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),Xn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindTexture(B.TEXTURE_2D,w),this.current=w,this.dirty=!1}},I}(Pt),Hn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindBuffer(B.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),nn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){var B=this.gl;B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},I}(Pt),en=function(j){function I(w){j.call(this,w),this.vao=w.extVertexArrayObject}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},I}(Pt),An=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},I}(Pt),Nn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},I}(Pt),fr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},I}(Pt),hi=function(j){function I(w,B){j.call(this,w),this.context=w,this.parent=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(Pt),Ce=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},I}(hi),Te=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(hi),Jt=function(I,w,B,D){this.context=I,this.width=w,this.height=B;var G=this.framebuffer=I.gl.createFramebuffer();this.colorAttachment=new Ce(I,G),D&&(this.depthAttachment=new Te(I,G))};Jt.prototype.destroy=function(){var j=this.context.gl,I=this.colorAttachment.get();if(I&&j.deleteTexture(I),this.depthAttachment){var w=this.depthAttachment.get();w&&j.deleteRenderbuffer(w)}j.deleteFramebuffer(this.framebuffer)};var pe=function(I,w,B){this.func=I,this.mask=w,this.range=B};pe.ReadOnly=!1,pe.ReadWrite=!0,pe.disabled=new pe(519,pe.ReadOnly,[0,1]);var Wt=function(I,w,B,D,G,$){this.test=I,this.ref=w,this.mask=B,this.fail=D,this.depthFail=G,this.pass=$};Wt.disabled=new Wt({func:519,mask:0},0,0,7680,7680,7680);var ie=function(I,w,B){this.blendFunction=I,this.blendColor=w,this.mask=B};ie.disabled=new ie(ie.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),ie.unblended=new ie(ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),ie.alphaBlended=new ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ae=function(I,w,B){this.enable=I,this.mode=w,this.frontFace=B};Ae.disabled=new Ae(!1,1029,2305),Ae.backCCW=new Ae(!0,1029,2305);var ue=function(I){this.gl=I,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new Q(this),this.clearStencil=new gt(this),this.colorMask=new et(this),this.depthMask=new ot(this),this.stencilMask=new xt(this),this.stencilFunc=new H(this),this.stencilOp=new nt(this),this.stencilTest=new at(this),this.depthRange=new q(this),this.depthTest=new _t(this),this.depthFunc=new yt(this),this.blend=new Ft(this),this.blendFunc=new Qt(this),this.blendColor=new ee(this),this.blendEquation=new Vt(this),this.cullFace=new $t(this),this.cullFaceSide=new Me(this),this.frontFace=new me(this),this.program=new le(this),this.activeTexture=new be(this),this.viewport=new ze(this),this.bindFramebuffer=new Xe(this),this.bindRenderbuffer=new Sn(this),this.bindTexture=new Xn(this),this.bindVertexBuffer=new Hn(this),this.bindElementBuffer=new nn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new en(this),this.pixelStoreUnpack=new An(this),this.pixelStoreUnpackPremultiplyAlpha=new Nn(this),this.pixelStoreUnpackFlipY=new fr(this),this.extTextureFilterAnisotropic=I.getExtension("EXT_texture_filter_anisotropic")||I.getExtension("MOZ_EXT_texture_filter_anisotropic")||I.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=I.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=I.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(I.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=I.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=I.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)};ue.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ue.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ue.prototype.createIndexBuffer=function(j,I){return new bt(this,j,I)},ue.prototype.createVertexBuffer=function(j,I,w){return new rt(this,j,I,w)},ue.prototype.createRenderbuffer=function(j,I,w){var B=this.gl,D=B.createRenderbuffer();return this.bindRenderbuffer.set(D),B.renderbufferStorage(B.RENDERBUFFER,j,I,w),this.bindRenderbuffer.set(null),D},ue.prototype.createFramebuffer=function(j,I,w){return new Jt(this,j,I,w)},ue.prototype.clear=function(j){var I=j.color,w=j.depth,B=this.gl,D=0;I&&(D|=B.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(D|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),B.clear(D)},ue.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},ue.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},ue.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},ue.prototype.setColorMode=function(j){t.deepEqual(j.blendFunction,ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},ue.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var xe=function(j){function I(w,B,D){var G=this;j.call(this),this.id=w,this.dispatcher=D,this.on("data",function($){$.dataType==="source"&&$.sourceDataType==="metadata"&&(G._sourceLoaded=!0),G._sourceLoaded&&!G._paused&&$.dataType==="source"&&$.sourceDataType==="content"&&(G.reload(),G.transform&&G.update(G.transform))}),this.on("error",function(){G._sourceErrored=!0}),this._source=function($,st,Ct,wt){var Ut=new ut[st.type]($,st,Ct,wt);if(Ut.id!==$)throw new Error("Expected Source id to be "+$+" instead of "+Ut.id);return t.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(w,B,D,this),this._tiles={},this._cache=new Mt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},I.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var B=this._tiles[w];if(B.state!=="loaded"&&B.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(w,B){return this._source.loadTile(w,B)},I.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},I.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(w){for(var B in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var D=this._tiles[B];D.upload(w),D.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return t.values(this._tiles).map(function(w){return w.tileID}).sort($e).map(function(w){return w.key})},I.prototype.getRenderableIds=function(w){var B=this,D=[];for(var G in this._tiles)this._isIdRenderable(G,w)&&D.push(this._tiles[G]);return w?D.sort(function($,st){var Ct=$.tileID,wt=st.tileID,Ut=new t.Point(Ct.canonical.x,Ct.canonical.y)._rotate(B.transform.angle),Yt=new t.Point(wt.canonical.x,wt.canonical.y)._rotate(B.transform.angle);return Ct.overscaledZ-wt.overscaledZ||Yt.y-Ut.y||Yt.x-Ut.x}).map(function($){return $.tileID.key}):D.map(function($){return $.tileID}).sort($e).map(function($){return $.key})},I.prototype.hasRenderableParent=function(w){var B=this.findLoadedParent(w,0);return!!B&&this._isIdRenderable(B.tileID.key)},I.prototype._isIdRenderable=function(w,B){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(B||!this._tiles[w].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},I.prototype._reloadTile=function(w,B){var D=this._tiles[w];D&&(D.state!=="loading"&&(D.state=B),this._loadTile(D,this._tileLoaded.bind(this,D,w,B)))},I.prototype._tileLoaded=function(w,B,D,G){if(G)return w.state="errored",void(G.status!==404?this._source.fire(new t.ErrorEvent(G,{tile:w})):this.update(this.transform));w.timeAdded=t.browser.now(),D==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(B,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},I.prototype._backfillDEM=function(w){for(var B=this.getRenderableIds(),D=0;D<B.length;D++){var G=B[D];if(w.neighboringTiles&&w.neighboringTiles[G]){var $=this.getTileByID(G);st(w,$),st($,w)}}function st(Ct,wt){Ct.needsHillshadePrepare=!0;var Ut=wt.tileID.canonical.x-Ct.tileID.canonical.x,Yt=wt.tileID.canonical.y-Ct.tileID.canonical.y,qt=Math.pow(2,Ct.tileID.canonical.z),he=wt.tileID.key;Ut===0&&Yt===0||Math.abs(Yt)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+qt)===1?Ut+=qt:Math.abs(Ut-qt)===1&&(Ut-=qt)),wt.dem&&Ct.dem&&(Ct.dem.backfillBorder(wt.dem,Ut,Yt),Ct.neighboringTiles&&Ct.neighboringTiles[he]&&(Ct.neighboringTiles[he].backfilled=!0)))}},I.prototype.getTile=function(w){return this.getTileByID(w.key)},I.prototype.getTileByID=function(w){return this._tiles[w]},I.prototype._retainLoadedChildren=function(w,B,D,G){for(var $ in this._tiles){var st=this._tiles[$];if(!(G[$]||!st.hasData()||st.tileID.overscaledZ<=B||st.tileID.overscaledZ>D)){for(var Ct=st.tileID;st&&st.tileID.overscaledZ>B+1;){var wt=st.tileID.scaledTo(st.tileID.overscaledZ-1);(st=this._tiles[wt.key])&&st.hasData()&&(Ct=wt)}for(var Ut=Ct;Ut.overscaledZ>B;)if(w[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){G[Ct.key]=Ct;break}}}},I.prototype.findLoadedParent=function(w,B){if(w.key in this._loadedParentTiles){var D=this._loadedParentTiles[w.key];return D&&D.tileID.overscaledZ>=B?D:null}for(var G=w.overscaledZ-1;G>=B;G--){var $=w.scaledTo(G),st=this._getLoadedTile($);if(st)return st}},I.prototype._getLoadedTile=function(w){var B=this._tiles[w.key];return B&&B.hasData()?B:this._cache.getByKey(w.wrapped().key)},I.prototype.updateCacheSize=function(w){var B=Math.ceil(w.width/this._source.tileSize)+1,D=Math.ceil(w.height/this._source.tileSize)+1,G=Math.floor(B*D*5),$=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize($)},I.prototype.handleWrapJump=function(w){var B=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,B){var D={};for(var G in this._tiles){var $=this._tiles[G];$.tileID=$.tileID.unwrapTo($.tileID.wrap+B),D[$.tileID.key]=$}for(var st in this._tiles=D,this._timers)clearTimeout(this._timers[st]),delete this._timers[st];for(var Ct in this._tiles)this._setTileReloadTimer(Ct,this._tiles[Ct])}},I.prototype.update=function(w){var B=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var D;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?D=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Mr){return new t.OverscaledTileID(Mr.canonical.z,Mr.wrap,Mr.canonical.z,Mr.canonical.x,Mr.canonical.y)}):(D=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(Mr){return B._source.hasTile(Mr)}))):D=[];var G=w.coveringZoomLevel(this._source),$=Math.max(G-I.maxOverzooming,this._source.minzoom),st=Math.max(G+I.maxUnderzooming,this._source.minzoom),Ct=this._updateRetainedTiles(D,G);if(Fn(this._source.type)){for(var wt={},Ut={},Yt=0,qt=Object.keys(Ct);Yt<qt.length;Yt+=1){var he=qt[Yt],ye=Ct[he],je=this._tiles[he];if(je&&!(je.fadeEndTime&&je.fadeEndTime<=t.browser.now())){var Ie=this.findLoadedParent(ye,$);Ie&&(this._addTile(Ie.tileID),wt[Ie.tileID.key]=Ie.tileID),Ut[he]=ye}}for(var Ve in this._retainLoadedChildren(Ut,G,st,Ct),wt)Ct[Ve]||(this._coveredTiles[Ve]=!0,Ct[Ve]=wt[Ve])}for(var qe in Ct)this._tiles[qe].clearFadeHold();for(var sn=0,tr=t.keysDifference(this._tiles,Ct);sn<tr.length;sn+=1){var kn=tr[sn],pr=this._tiles[kn];pr.hasSymbolBuckets&&!pr.holdingForFade()?pr.setHoldDuration(this.map._fadeDuration):pr.hasSymbolBuckets&&!pr.symbolFadeFinished()||this._removeTile(kn)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},I.prototype._updateRetainedTiles=function(w,B){for(var D={},G={},$=Math.max(B-I.maxOverzooming,this._source.minzoom),st=Math.max(B+I.maxUnderzooming,this._source.minzoom),Ct={},wt=0,Ut=w;wt<Ut.length;wt+=1){var Yt=Ut[wt],qt=this._addTile(Yt);D[Yt.key]=Yt,qt.hasData()||B<this._source.maxzoom&&(Ct[Yt.key]=Yt)}this._retainLoadedChildren(Ct,B,st,D);for(var he=0,ye=w;he<ye.length;he+=1){var je=ye[he],Ie=this._tiles[je.key];if(!Ie.hasData()){if(B+1>this._source.maxzoom){var Ve=je.children(this._source.maxzoom)[0],qe=this.getTile(Ve);if(qe&&qe.hasData()){D[Ve.key]=Ve;continue}}else{var sn=je.children(this._source.maxzoom);if(D[sn[0].key]&&D[sn[1].key]&&D[sn[2].key]&&D[sn[3].key])continue}for(var tr=Ie.wasRequested(),kn=je.overscaledZ-1;kn>=$;--kn){var pr=je.scaledTo(kn);if(G[pr.key]||(G[pr.key]=!0,!(Ie=this.getTile(pr))&&tr&&(Ie=this._addTile(pr)),Ie&&(D[pr.key]=pr,tr=Ie.wasRequested(),Ie.hasData())))break}}}return D},I.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var B=[],D=void 0,G=this._tiles[w].tileID;G.overscaledZ>0;){if(G.key in this._loadedParentTiles){D=this._loadedParentTiles[G.key];break}B.push(G.key);var $=G.scaledTo(G.overscaledZ-1);if(D=this._getLoadedTile($))break;G=$}for(var st=0,Ct=B;st<Ct.length;st+=1)this._loadedParentTiles[Ct[st]]=D}},I.prototype._addTile=function(w){var B=this._tiles[w.key];if(B)return B;(B=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,B),B.tileID=w,this._state.initializeTileState(B,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,B)));var D=Boolean(B);return D||(B=new t.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(B,this._tileLoaded.bind(this,B,w.key,B.state))),B?(B.uses++,this._tiles[w.key]=B,D||this._source.fire(new t.Event("dataloading",{tile:B,coord:B.tileID,dataType:"source"})),B):null},I.prototype._setTileReloadTimer=function(w,B){var D=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var G=B.getExpiryTimeout();G&&(this._timers[w]=setTimeout(function(){D._reloadTile(w,"expired"),delete D._timers[w]},G))},I.prototype._removeTile=function(w){var B=this._tiles[w];B&&(B.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),B.uses>0||(B.hasData()&&B.state!=="reloading"?this._cache.add(B.tileID,B,B.getExpiryTimeout()):(B.aborted=!0,this._abortTile(B),this._unloadTile(B))))},I.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},I.prototype.tilesIn=function(w,B,D){var G=this,$=[],st=this.transform;if(!st)return $;for(var Ct=D?st.getCameraQueryGeometry(w):w,wt=w.map(function(kn){return st.pointCoordinate(kn)}),Ut=Ct.map(function(kn){return st.pointCoordinate(kn)}),Yt=this.getIds(),qt=1/0,he=1/0,ye=-1/0,je=-1/0,Ie=0,Ve=Ut;Ie<Ve.length;Ie+=1){var qe=Ve[Ie];qt=Math.min(qt,qe.x),he=Math.min(he,qe.y),ye=Math.max(ye,qe.x),je=Math.max(je,qe.y)}for(var sn=function(pr){var Mr=G._tiles[Yt[pr]];if(!Mr.holdingForFade()){var $r=Mr.tileID,Yr=Math.pow(2,st.zoom-Mr.tileID.overscaledZ),Ti=B*Mr.queryPadding*t.EXTENT/Mr.tileSize/Yr,Li=[$r.getTilePoint(new t.MercatorCoordinate(qt,he)),$r.getTilePoint(new t.MercatorCoordinate(ye,je))];if(Li[0].x-Ti<t.EXTENT&&Li[0].y-Ti<t.EXTENT&&Li[1].x+Ti>=0&&Li[1].y+Ti>=0){var Ki=wt.map(function(Oa){return $r.getTilePoint(Oa)}),Xi=Ut.map(function(Oa){return $r.getTilePoint(Oa)});$.push({tile:Mr,tileID:$r,queryGeometry:Ki,cameraQueryGeometry:Xi,scale:Yr})}}},tr=0;tr<Yt.length;tr++)sn(tr);return $},I.prototype.getVisibleCoordinates=function(w){for(var B=this,D=this.getRenderableIds(w).map(function(Ct){return B._tiles[Ct].tileID}),G=0,$=D;G<$.length;G+=1){var st=$[G];st.posMatrix=this.transform.calculatePosMatrix(st.toUnwrapped())}return D},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Fn(this._source.type))for(var w in this._tiles){var B=this._tiles[w];if(B.fadeEndTime!==void 0&&B.fadeEndTime>=t.browser.now())return!0}return!1},I.prototype.setFeatureState=function(w,B,D){this._state.updateState(w=w||"_geojsonTileLayer",B,D)},I.prototype.removeFeatureState=function(w,B,D){this._state.removeFeatureState(w=w||"_geojsonTileLayer",B,D)},I.prototype.getFeatureState=function(w,B){return this._state.getState(w=w||"_geojsonTileLayer",B)},I.prototype.setDependencies=function(w,B,D){var G=this._tiles[w];G&&G.setDependencies(B,D)},I.prototype.reloadTilesForDependencies=function(w,B){for(var D in this._tiles)this._tiles[D].hasDependency(w,B)&&this._reloadTile(D,"reloading");this._cache.filter(function(G){return!G.hasDependency(w,B)})},I}(t.Evented);function $e(j,I){var w=Math.abs(2*j.wrap)-+(j.wrap<0),B=Math.abs(2*I.wrap)-+(I.wrap<0);return j.overscaledZ-I.overscaledZ||B-w||I.canonical.y-j.canonical.y||I.canonical.x-j.canonical.x}function Fn(j){return j==="raster"||j==="image"||j==="video"}function or(){return new t.window.Worker(hu.workerUrl)}xe.maxOverzooming=10,xe.maxUnderzooming=3;var En="mapboxgl_preloaded_worker_pool",Pn=function(){this.active={}};Pn.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<Pn.workerCount;)this.workers.push(new or);return this.active[j]=!0,this.workers.slice()},Pn.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},Pn.prototype.isPreloaded=function(){return!!this.active[En]},Pn.prototype.numActive=function(){return Object.keys(this.active).length};var br,Pr=Math.floor(t.browser.hardwareConcurrency/2);function ln(){return br||(br=new Pn),br}function Cr(j,I){var w={};for(var B in j)B!=="ref"&&(w[B]=j[B]);return t.refProperties.forEach(function(D){D in I&&(w[D]=I[D])}),w}function Ar(j){j=j.slice();for(var I=Object.create(null),w=0;w<j.length;w++)I[j[w].id]=j[w];for(var B=0;B<j.length;B++)"ref"in j[B]&&(j[B]=Cr(j[B],I[j[B].ref]));return j}Pn.workerCount=Math.max(Math.min(Pr,6),1);var Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function We(j,I,w){w.push({command:Be.addSource,args:[j,I[j]]})}function Ye(j,I,w){I.push({command:Be.removeSource,args:[j]}),w[j]=!0}function fn(j,I,w,B){Ye(j,w,B),We(j,I,w)}function gn(j,I,w){var B;for(B in j[w])if(j[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;for(B in I[w])if(I[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;return!0}function Bn(j,I,w,B,D,G){var $;for($ in I=I||{},j=j||{})j.hasOwnProperty($)&&(t.deepEqual(j[$],I[$])||w.push({command:G,args:[B,$,I[$],D]}));for($ in I)I.hasOwnProperty($)&&!j.hasOwnProperty($)&&(t.deepEqual(j[$],I[$])||w.push({command:G,args:[B,$,I[$],D]}))}function bn(j){return j.id}function Ln(j,I){return j[I.id]=I,j}var ir=function(I,w){this.reset(I,w)};ir.prototype.reset=function(j,I){this.points=j||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ir.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=t.clamp(j,0,1);for(var I=1,w=this._distances[I],B=j*this.paddedLength+this.padding;w<B&&I<this._distances.length;)w=this._distances[++I];var D=I-1,G=this._distances[D],$=w-G,st=$>0?(B-G)/$:0;return this.points[D].mult(1-st).add(this.points[I].mult(st))};var Yn=function(I,w,B){var D=this.boxCells=[],G=this.circleCells=[];this.xCellCount=Math.ceil(I/B),this.yCellCount=Math.ceil(w/B);for(var $=0;$<this.xCellCount*this.yCellCount;$++)D.push([]),G.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=I,this.height=w,this.xScale=this.xCellCount/I,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0};function _n(j,I,w,B,D){var G=t.create();return I?(t.scale(G,G,[1/D,1/D,1]),w||t.rotateZ(G,G,B.angle)):t.multiply(G,B.labelPlaneMatrix,j),G}function Dr(j,I,w,B,D){if(I){var G=t.clone(j);return t.scale(G,G,[D,D,1]),w||t.rotateZ(G,G,-B.angle),G}return B.glCoordMatrix}function vr(j,I){var w=[j.x,j.y,0,1];So(w,w,I);var B=w[3];return{point:new t.Point(w[0]/B,w[1]/B),signedDistanceFromCamera:B}}function zr(j,I){return .5+j/I*.5}function Ai(j,I){var w=j[0]/j[3],B=j[1]/j[3];return w>=-I[0]&&w<=I[0]&&B>=-I[1]&&B<=I[1]}function Aa(j,I,w,B,D,G,$,st){var Ct=B?j.textSizeData:j.iconSizeData,wt=t.evaluateSizeForZoom(Ct,w.transform.zoom),Ut=[256/w.width*2+1,256/w.height*2+1],Yt=B?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Yt.clear();for(var qt=j.lineVertexArray,he=B?j.text.placedSymbolArray:j.icon.placedSymbolArray,ye=w.transform.width/w.transform.height,je=!1,Ie=0;Ie<he.length;Ie++){var Ve=he.get(Ie);if(Ve.hidden||Ve.writingMode===t.WritingMode.vertical&&!je)no(Ve.numGlyphs,Yt);else{je=!1;var qe=[Ve.anchorX,Ve.anchorY,0,1];if(t.transformMat4(qe,qe,I),Ai(qe,Ut)){var sn=zr(w.transform.cameraToCenterDistance,qe[3]),tr=t.evaluateSizeForFeature(Ct,wt,Ve),kn=$?tr/sn:tr*sn,pr=new t.Point(Ve.anchorX,Ve.anchorY),Mr=vr(pr,D).point,$r={},Yr=Zo(Ve,kn,!1,st,I,D,G,j.glyphOffsetArray,qt,Yt,Mr,pr,$r,ye);je=Yr.useVertical,(Yr.notEnoughRoom||je||Yr.needsFlipping&&Zo(Ve,kn,!0,st,I,D,G,j.glyphOffsetArray,qt,Yt,Mr,pr,$r,ye).notEnoughRoom)&&no(Ve.numGlyphs,Yt)}else no(Ve.numGlyphs,Yt)}}B?j.text.dynamicLayoutVertexBuffer.updateData(Yt):j.icon.dynamicLayoutVertexBuffer.updateData(Yt)}function ka(j,I,w,B,D,G,$,st,Ct,wt,Ut){var Yt=st.glyphStartIndex+st.numGlyphs,qt=st.lineStartIndex,he=st.lineStartIndex+st.lineLength,ye=I.getoffsetX(st.glyphStartIndex),je=I.getoffsetX(Yt-1),Ie=so(j*ye,w,B,D,G,$,st.segment,qt,he,Ct,wt,Ut);if(!Ie)return null;var Ve=so(j*je,w,B,D,G,$,st.segment,qt,he,Ct,wt,Ut);return Ve?{first:Ie,last:Ve}:null}function eo(j,I,w,B){return j===t.WritingMode.horizontal&&Math.abs(w.y-I.y)>Math.abs(w.x-I.x)*B?{useVertical:!0}:(j===t.WritingMode.vertical?I.y<w.y:I.x>w.x)?{needsFlipping:!0}:null}function Zo(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt,qt,he){var ye,je=I/24,Ie=j.lineOffsetX*je,Ve=j.lineOffsetY*je;if(j.numGlyphs>1){var qe=j.glyphStartIndex+j.numGlyphs,sn=j.lineStartIndex,tr=j.lineStartIndex+j.lineLength,kn=ka(je,st,Ie,Ve,w,Ut,Yt,j,Ct,G,qt);if(!kn)return{notEnoughRoom:!0};var pr=vr(kn.first.point,$).point,Mr=vr(kn.last.point,$).point;if(B&&!w){var $r=eo(j.writingMode,pr,Mr,he);if($r)return $r}ye=[kn.first];for(var Yr=j.glyphStartIndex+1;Yr<qe-1;Yr++)ye.push(so(je*st.getoffsetX(Yr),Ie,Ve,w,Ut,Yt,j.segment,sn,tr,Ct,G,qt));ye.push(kn.last)}else{if(B&&!w){var Ti=vr(Yt,D).point,Li=j.lineStartIndex+j.segment+1,Ki=new t.Point(Ct.getx(Li),Ct.gety(Li)),Xi=vr(Ki,D),Oa=Xi.signedDistanceFromCamera>0?Xi.point:Ea(Yt,Ki,Ti,1,D),Na=eo(j.writingMode,Ti,Oa,he);if(Na)return Na}var ji=so(je*st.getoffsetX(j.glyphStartIndex),Ie,Ve,w,Ut,Yt,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,Ct,G,qt);if(!ji)return{notEnoughRoom:!0};ye=[ji]}for(var Sa=0,xa=ye;Sa<xa.length;Sa+=1){var Yi=xa[Sa];t.addDynamicAttributes(wt,Yi.point,Yi.angle)}return{}}function Ea(j,I,w,B,D){var G=vr(j.add(j.sub(I)._unit()),D).point,$=w.sub(G);return w.add($._mult(B/$.mag()))}function so(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt){var qt=B?j-I:j+I,he=qt>0?1:-1,ye=0;B&&(he*=-1,ye=Math.PI),he<0&&(ye+=Math.PI);for(var je=he>0?st+$:st+$+1,Ie=D,Ve=D,qe=0,sn=0,tr=Math.abs(qt),kn=[];qe+sn<=tr;){if((je+=he)<st||je>=Ct)return null;if(Ve=Ie,kn.push(Ie),(Ie=Yt[je])===void 0){var pr=new t.Point(wt.getx(je),wt.gety(je)),Mr=vr(pr,Ut);if(Mr.signedDistanceFromCamera>0)Ie=Yt[je]=Mr.point;else{var $r=je-he;Ie=Ea(qe===0?G:new t.Point(wt.getx($r),wt.gety($r)),pr,Ve,tr-qe+1,Ut)}}qe+=sn,sn=Ve.dist(Ie)}var Yr=(tr-qe)/sn,Ti=Ie.sub(Ve),Li=Ti.mult(Yr)._add(Ve);Li._add(Ti._unit()._perp()._mult(w*he));var Ki=ye+Math.atan2(Ie.y-Ve.y,Ie.x-Ve.x);return kn.push(Li),{point:Li,angle:Ki,path:kn}}Yn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yn.prototype.insert=function(j,I,w,B,D){this._forEachCell(I,w,B,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(I),this.bboxes.push(w),this.bboxes.push(B),this.bboxes.push(D)},Yn.prototype.insertCircle=function(j,I,w,B){this._forEachCell(I-B,w-B,I+B,w+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(I),this.circles.push(w),this.circles.push(B)},Yn.prototype._insertBoxCell=function(j,I,w,B,D,G){this.boxCells[D].push(G)},Yn.prototype._insertCircleCell=function(j,I,w,B,D,G){this.circleCells[D].push(G)},Yn.prototype._query=function(j,I,w,B,D,G){if(w<0||j>this.width||B<0||I>this.height)return!D&&[];var $=[];if(j<=0&&I<=0&&this.width<=w&&this.height<=B){if(D)return!0;for(var st=0;st<this.boxKeys.length;st++)$.push({key:this.boxKeys[st],x1:this.bboxes[4*st],y1:this.bboxes[4*st+1],x2:this.bboxes[4*st+2],y2:this.bboxes[4*st+3]});for(var Ct=0;Ct<this.circleKeys.length;Ct++){var wt=this.circles[3*Ct],Ut=this.circles[3*Ct+1],Yt=this.circles[3*Ct+2];$.push({key:this.circleKeys[Ct],x1:wt-Yt,y1:Ut-Yt,x2:wt+Yt,y2:Ut+Yt})}return G?$.filter(G):$}return this._forEachCell(j,I,w,B,this._queryCell,$,{hitTest:D,seenUids:{box:{},circle:{}}},G),D?$.length>0:$},Yn.prototype._queryCircle=function(j,I,w,B,D){var G=j-w,$=j+w,st=I-w,Ct=I+w;if($<0||G>this.width||Ct<0||st>this.height)return!B&&[];var wt=[];return this._forEachCell(G,st,$,Ct,this._queryCellCircle,wt,{hitTest:B,circle:{x:j,y:I,radius:w},seenUids:{box:{},circle:{}}},D),B?wt.length>0:wt},Yn.prototype.query=function(j,I,w,B,D){return this._query(j,I,w,B,!1,D)},Yn.prototype.hitTest=function(j,I,w,B,D){return this._query(j,I,w,B,!0,D)},Yn.prototype.hitTestCircle=function(j,I,w,B){return this._queryCircle(j,I,w,!0,B)},Yn.prototype._queryCell=function(j,I,w,B,D,G,$,st){var Ct=$.seenUids,wt=this.boxCells[D];if(wt!==null)for(var Ut=this.bboxes,Yt=0,qt=wt;Yt<qt.length;Yt+=1){var he=qt[Yt];if(!Ct.box[he]){Ct.box[he]=!0;var ye=4*he;if(j<=Ut[ye+2]&&I<=Ut[ye+3]&&w>=Ut[ye+0]&&B>=Ut[ye+1]&&(!st||st(this.boxKeys[he]))){if($.hitTest)return G.push(!0),!0;G.push({key:this.boxKeys[he],x1:Ut[ye],y1:Ut[ye+1],x2:Ut[ye+2],y2:Ut[ye+3]})}}}var je=this.circleCells[D];if(je!==null)for(var Ie=this.circles,Ve=0,qe=je;Ve<qe.length;Ve+=1){var sn=qe[Ve];if(!Ct.circle[sn]){Ct.circle[sn]=!0;var tr=3*sn;if(this._circleAndRectCollide(Ie[tr],Ie[tr+1],Ie[tr+2],j,I,w,B)&&(!st||st(this.circleKeys[sn]))){if($.hitTest)return G.push(!0),!0;var kn=Ie[tr],pr=Ie[tr+1],Mr=Ie[tr+2];G.push({key:this.circleKeys[sn],x1:kn-Mr,y1:pr-Mr,x2:kn+Mr,y2:pr+Mr})}}}},Yn.prototype._queryCellCircle=function(j,I,w,B,D,G,$,st){var Ct=$.circle,wt=$.seenUids,Ut=this.boxCells[D];if(Ut!==null)for(var Yt=this.bboxes,qt=0,he=Ut;qt<he.length;qt+=1){var ye=he[qt];if(!wt.box[ye]){wt.box[ye]=!0;var je=4*ye;if(this._circleAndRectCollide(Ct.x,Ct.y,Ct.radius,Yt[je+0],Yt[je+1],Yt[je+2],Yt[je+3])&&(!st||st(this.boxKeys[ye])))return G.push(!0),!0}}var Ie=this.circleCells[D];if(Ie!==null)for(var Ve=this.circles,qe=0,sn=Ie;qe<sn.length;qe+=1){var tr=sn[qe];if(!wt.circle[tr]){wt.circle[tr]=!0;var kn=3*tr;if(this._circlesCollide(Ve[kn],Ve[kn+1],Ve[kn+2],Ct.x,Ct.y,Ct.radius)&&(!st||st(this.circleKeys[tr])))return G.push(!0),!0}}},Yn.prototype._forEachCell=function(j,I,w,B,D,G,$,st){for(var Ct=this._convertToXCellCoord(j),wt=this._convertToYCellCoord(I),Ut=this._convertToXCellCoord(w),Yt=this._convertToYCellCoord(B),qt=Ct;qt<=Ut;qt++)for(var he=wt;he<=Yt;he++)if(D.call(this,j,I,w,B,this.xCellCount*he+qt,G,$,st))return},Yn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},Yn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},Yn.prototype._circlesCollide=function(j,I,w,B,D,G){var $=B-j,st=D-I,Ct=w+G;return Ct*Ct>$*$+st*st},Yn.prototype._circleAndRectCollide=function(j,I,w,B,D,G,$){var st=(G-B)/2,Ct=Math.abs(j-(B+st));if(Ct>st+w)return!1;var wt=($-D)/2,Ut=Math.abs(I-(D+wt));if(Ut>wt+w)return!1;if(Ct<=st||Ut<=wt)return!0;var Yt=Ct-st,qt=Ut-wt;return Yt*Yt+qt*qt<=w*w};var Ko=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function no(j,I){for(var w=0;w<j;w++){var B=I.length;I.resize(B+4),I.float32.set(Ko,3*B)}}function So(j,I,w){var B=I[0],D=I[1];return j[0]=w[0]*B+w[4]*D+w[12],j[1]=w[1]*B+w[5]*D+w[13],j[3]=w[3]*B+w[7]*D+w[15],j}var cs=function(I,w,B){w===void 0&&(w=new Yn(I.width+200,I.height+200,25)),B===void 0&&(B=new Yn(I.width+200,I.height+200,25)),this.transform=I,this.grid=w,this.ignoredGrid=B,this.pitchfactor=Math.cos(I._pitch)*I.cameraToCenterDistance,this.screenRightBoundary=I.width+100,this.screenBottomBoundary=I.height+100,this.gridRightBoundary=I.width+200,this.gridBottomBoundary=I.height+200};function wa(j,I,w){return I*(t.EXTENT/(j.tileSize*Math.pow(2,w-j.tileID.overscaledZ)))}cs.prototype.placeCollisionBox=function(j,I,w,B,D){var G=this.projectAndGetPerspectiveRatio(B,j.anchorPointX,j.anchorPointY),$=w*G.perspectiveRatio,st=j.x1*$+G.point.x,Ct=j.y1*$+G.point.y,wt=j.x2*$+G.point.x,Ut=j.y2*$+G.point.y;return!this.isInsideGrid(st,Ct,wt,Ut)||!I&&this.grid.hitTest(st,Ct,wt,Ut,D)?{box:[],offscreen:!1}:{box:[st,Ct,wt,Ut],offscreen:this.isOffscreen(st,Ct,wt,Ut)}},cs.prototype.placeCollisionCircles=function(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt,qt){var he=[],ye=new t.Point(I.anchorX,I.anchorY),je=vr(ye,G),Ie=zr(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),Ve=(wt?D/Ie:D*Ie)/t.ONE_EM,qe=vr(ye,$).point,sn=ka(Ve,B,I.lineOffsetX*Ve,I.lineOffsetY*Ve,!1,qe,ye,I,w,$,{}),tr=!1,kn=!1,pr=!0;if(sn){for(var Mr=.5*Yt*Ie+qt,$r=new t.Point(-100,-100),Yr=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Ti=new ir,Li=sn.first,Ki=sn.last,Xi=[],Oa=Li.path.length-1;Oa>=1;Oa--)Xi.push(Li.path[Oa]);for(var Na=1;Na<Ki.path.length;Na++)Xi.push(Ki.path[Na]);var ji=2.5*Mr;if(st){var Sa=Xi.map(function(Al){return vr(Al,st)});Xi=Sa.some(function(Al){return Al.signedDistanceFromCamera<=0})?[]:Sa.map(function(Al){return Al.point})}var xa=[];if(Xi.length>0){for(var Yi=Xi[0].clone(),_a=Xi[0].clone(),sa=1;sa<Xi.length;sa++)Yi.x=Math.min(Yi.x,Xi[sa].x),Yi.y=Math.min(Yi.y,Xi[sa].y),_a.x=Math.max(_a.x,Xi[sa].x),_a.y=Math.max(_a.y,Xi[sa].y);xa=Yi.x>=$r.x&&_a.x<=Yr.x&&Yi.y>=$r.y&&_a.y<=Yr.y?[Xi]:_a.x<$r.x||Yi.x>Yr.x||_a.y<$r.y||Yi.y>Yr.y?[]:t.clipLine([Xi],$r.x,$r.y,Yr.x,Yr.y)}for(var Ia=0,Fa=xa;Ia<Fa.length;Ia+=1){var _s;Ti.reset(Fa[Ia],.25*Mr),_s=Ti.length<=.5*Mr?1:Math.ceil(Ti.paddedLength/ji)+1;for(var us=0;us<_s;us++){var Os=us/Math.max(_s-1,1),es=Ti.lerp(Os),js=es.x+100,ml=es.y+100;he.push(js,ml,Mr,0);var yu=js-Mr,Fl=ml-Mr,xc=js+Mr,zl=ml+Mr;if(pr=pr&&this.isOffscreen(yu,Fl,xc,zl),kn=kn||this.isInsideGrid(yu,Fl,xc,zl),!j&&this.grid.hitTestCircle(js,ml,Mr,Ut)&&(tr=!0,!Ct))return{circles:[],offscreen:!1,collisionDetected:tr}}}}return{circles:!Ct&&tr||!kn?[]:he,offscreen:pr,collisionDetected:tr}},cs.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],w=1/0,B=1/0,D=-1/0,G=-1/0,$=0,st=j;$<st.length;$+=1){var Ct=st[$],wt=new t.Point(Ct.x+100,Ct.y+100);w=Math.min(w,wt.x),B=Math.min(B,wt.y),D=Math.max(D,wt.x),G=Math.max(G,wt.y),I.push(wt)}for(var Ut={},Yt={},qt=0,he=this.grid.query(w,B,D,G).concat(this.ignoredGrid.query(w,B,D,G));qt<he.length;qt+=1){var ye=he[qt],je=ye.key;if(Ut[je.bucketInstanceId]===void 0&&(Ut[je.bucketInstanceId]={}),!Ut[je.bucketInstanceId][je.featureIndex]){var Ie=[new t.Point(ye.x1,ye.y1),new t.Point(ye.x2,ye.y1),new t.Point(ye.x2,ye.y2),new t.Point(ye.x1,ye.y2)];t.polygonIntersectsPolygon(I,Ie)&&(Ut[je.bucketInstanceId][je.featureIndex]=!0,Yt[je.bucketInstanceId]===void 0&&(Yt[je.bucketInstanceId]=[]),Yt[je.bucketInstanceId].push(je.featureIndex))}}return Yt},cs.prototype.insertCollisionBox=function(j,I,w,B,D){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:B,collisionGroupID:D},j[0],j[1],j[2],j[3])},cs.prototype.insertCollisionCircles=function(j,I,w,B,D){for(var G=I?this.ignoredGrid:this.grid,$={bucketInstanceId:w,featureIndex:B,collisionGroupID:D},st=0;st<j.length;st+=4)G.insertCircle($,j[st],j[st+1],j[st+2])},cs.prototype.projectAndGetPerspectiveRatio=function(j,I,w){var B=[I,w,0,1];return So(B,B,j),{point:new t.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}},cs.prototype.isOffscreen=function(j,I,w,B){return w<100||j>=this.screenRightBoundary||B<100||I>this.screenBottomBoundary},cs.prototype.isInsideGrid=function(j,I,w,B){return w>=0&&j<this.gridRightBoundary&&B>=0&&I<this.gridBottomBoundary},cs.prototype.getViewportMatrix=function(){var j=t.identity([]);return t.translate(j,j,[-100,-100,0]),j};var zo=function(I,w,B,D){this.opacity=I?Math.max(0,Math.min(1,I.opacity+(I.placed?w:-w))):D&&B?1:0,this.placed=B};zo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ro=function(I,w,B,D,G){this.text=new zo(I?I.text:null,w,B,G),this.icon=new zo(I?I.icon:null,w,D,G)};Ro.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fu=function(I,w,B){this.text=I,this.icon=w,this.skipFade=B},Xo=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},au=function(I,w,B,D,G){this.bucketInstanceId=I,this.featureIndex=w,this.sourceLayerIndex=B,this.bucketIndex=D,this.tileID=G},$s=function(I){this.crossSourceCollisions=I,this.maxGroupID=0,this.collisionGroups={}};function Ne(j,I,w,B,D){var G=t.getAnchorAlignment(j),$=-(G.horizontalAlign-.5)*I,st=-(G.verticalAlign-.5)*w,Ct=t.evaluateVariableOffset(j,B);return new t.Point($+Ct[0]*D,st+Ct[1]*D)}function oe(j,I,w,B,D,G){var $=j.x1,st=j.x2,Ct=j.y1,wt=j.y2,Ut=j.anchorPointX,Yt=j.anchorPointY,qt=new t.Point(I,w);return B&&qt._rotate(D?G:-G),{x1:$+qt.x,y1:Ct+qt.y,x2:st+qt.x,y2:wt+qt.y,anchorPointX:Ut,anchorPointY:Yt}}$s.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var I=++this.maxGroupID;this.collisionGroups[j]={ID:I,predicate:function(B){return B.collisionGroupID===I}}}return this.collisionGroups[j]};var Ht=function(I,w,B,D){this.transform=I.clone(),this.collisionIndex=new cs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new $s(B),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function Ee(j,I,w,B,D){j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0)}Ht.prototype.getBucketParts=function(j,I,w,B){var D=w.getBucket(I),G=w.latestFeatureIndex;if(D&&G&&I.id===D.layerIds[0]){var $=w.collisionBoxArray,st=D.layers[0].layout,Ct=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),wt=w.tileSize/t.EXTENT,Ut=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Yt=st.get("text-pitch-alignment")==="map",qt=st.get("text-rotation-alignment")==="map",he=wa(w,1,this.transform.zoom),ye=_n(Ut,Yt,qt,this.transform,he),je=null;if(Yt){var Ie=Dr(Ut,Yt,qt,this.transform,he);je=t.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[D.bucketInstanceId]=new au(D.bucketInstanceId,G,D.sourceLayerIndex,D.index,w.tileID);var Ve={bucket:D,layout:st,posMatrix:Ut,textLabelPlaneMatrix:ye,labelToScreenMatrix:je,scale:Ct,textPixelRatio:wt,holdingForFade:w.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(B)for(var qe=0,sn=D.sortKeyRanges;qe<sn.length;qe+=1){var tr=sn[qe];j.push({sortKey:tr.sortKey,symbolInstanceStart:tr.symbolInstanceStart,symbolInstanceEnd:tr.symbolInstanceEnd,parameters:Ve})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:Ve})}},Ht.prototype.attemptAnchorPlacement=function(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt,qt,he,ye){var je,Ie=[Yt.textOffset0,Yt.textOffset1],Ve=Ne(j,w,B,Ie,D),qe=this.collisionIndex.placeCollisionBox(oe(I,Ve.x,Ve.y,G,$,this.transform.angle),Ut,st,Ct,wt.predicate);if(!ye||this.collisionIndex.placeCollisionBox(oe(ye,Ve.x,Ve.y,G,$,this.transform.angle),Ut,st,Ct,wt.predicate).box.length!==0)return qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID].text&&(je=this.prevPlacement.variableOffsets[Yt.crossTileID].anchor),this.variableOffsets[Yt.crossTileID]={textOffset:Ie,width:w,height:B,anchor:j,textBoxScale:D,prevAnchor:je},this.markUsedJustification(qt,j,Yt,he),qt.allowVerticalPlacement&&(this.markUsedOrientation(qt,he,Yt),this.placedOrientations[Yt.crossTileID]=he),{shift:Ve,placedGlyphBoxes:qe}):void 0},Ht.prototype.placeLayerBucketPart=function(j,I,w){var B=this,D=j.parameters,G=D.bucket,$=D.layout,st=D.posMatrix,Ct=D.textLabelPlaneMatrix,wt=D.labelToScreenMatrix,Ut=D.textPixelRatio,Yt=D.holdingForFade,qt=D.collisionBoxArray,he=D.partiallyEvaluatedTextSize,ye=D.collisionGroup,je=$.get("text-optional"),Ie=$.get("icon-optional"),Ve=$.get("text-allow-overlap"),qe=$.get("icon-allow-overlap"),sn=$.get("text-rotation-alignment")==="map",tr=$.get("text-pitch-alignment")==="map",kn=$.get("icon-text-fit")!=="none",pr=$.get("symbol-z-order")==="viewport-y",Mr=Ve&&(qe||!G.hasIconData()||Ie),$r=qe&&(Ve||!G.hasTextData()||je);!G.collisionArrays&&qt&&G.deserializeCollisionBoxes(qt);var Yr=function(ji,Sa){if(!I[ji.crossTileID])if(Yt)B.placements[ji.crossTileID]=new fu(!1,!1,!1);else{var xa,Yi=!1,_a=!1,sa=!0,Ia=null,Fa={box:null,offscreen:null},_s={box:null,offscreen:null},us=null,Os=null,es=0,js=0,ml=0;Sa.textFeatureIndex?es=Sa.textFeatureIndex:ji.useRuntimeCollisionCircles&&(es=ji.featureIndex),Sa.verticalTextFeatureIndex&&(js=Sa.verticalTextFeatureIndex);var yu=Sa.textBox;if(yu){var Fl=function(ws){var cu=t.WritingMode.horizontal;if(G.allowVerticalPlacement&&!ws&&B.prevPlacement){var Is=B.prevPlacement.placedOrientations[ji.crossTileID];Is&&(B.placedOrientations[ji.crossTileID]=Is,B.markUsedOrientation(G,cu=Is,ji))}return cu},xc=function(ws,cu){if(G.allowVerticalPlacement&&ji.numVerticalGlyphVertices>0&&Sa.verticalTextBox)for(var Is=0,Yl=G.writingModes;Is<Yl.length&&(Yl[Is]===t.WritingMode.vertical?(Fa=cu(),_s=Fa):Fa=ws(),!(Fa&&Fa.box&&Fa.box.length));Is+=1);else Fa=ws()};if($.get("text-variable-anchor")){var zl=$.get("text-variable-anchor");if(B.prevPlacement&&B.prevPlacement.variableOffsets[ji.crossTileID]){var Al=B.prevPlacement.variableOffsets[ji.crossTileID];zl.indexOf(Al.anchor)>0&&(zl=zl.filter(function(Cl){return Cl!==Al.anchor})).unshift(Al.anchor)}var Nc=function(ws,cu,Is){for(var Yl=ws.x2-ws.x1,Rc=ws.y2-ws.y1,Dc=ji.textBoxScale,of=kn&&!qe?cu:null,Ac={box:[],offscreen:!1},tf=Ve?2*zl.length:zl.length,jc=0;jc<tf;++jc){var Ul=B.attemptAnchorPlacement(zl[jc%zl.length],ws,Yl,Rc,Dc,sn,tr,Ut,st,ye,jc>=zl.length,ji,G,Is,of);if(Ul&&(Ac=Ul.placedGlyphBoxes)&&Ac.box&&Ac.box.length){Yi=!0,Ia=Ul.shift;break}}return Ac};xc(function(){return Nc(yu,Sa.iconBox,t.WritingMode.horizontal)},function(){var Cl=Sa.verticalTextBox;return G.allowVerticalPlacement&&!(Fa&&Fa.box&&Fa.box.length)&&ji.numVerticalGlyphVertices>0&&Cl?Nc(Cl,Sa.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Fa&&(Yi=Fa.box,sa=Fa.offscreen);var Hc=Fl(Fa&&Fa.box);if(!Yi&&B.prevPlacement){var Tc=B.prevPlacement.variableOffsets[ji.crossTileID];Tc&&(B.variableOffsets[ji.crossTileID]=Tc,B.markUsedJustification(G,Tc.anchor,ji,Hc))}}else{var kc=function(ws,cu){var Is=B.collisionIndex.placeCollisionBox(ws,Ve,Ut,st,ye.predicate);return Is&&Is.box&&Is.box.length&&(B.markUsedOrientation(G,cu,ji),B.placedOrientations[ji.crossTileID]=cu),Is};xc(function(){return kc(yu,t.WritingMode.horizontal)},function(){var Cl=Sa.verticalTextBox;return G.allowVerticalPlacement&&ji.numVerticalGlyphVertices>0&&Cl?kc(Cl,t.WritingMode.vertical):{box:null,offscreen:null}}),Fl(Fa&&Fa.box&&Fa.box.length)}}if(Yi=(xa=Fa)&&xa.box&&xa.box.length>0,sa=xa&&xa.offscreen,ji.useRuntimeCollisionCircles){var Yc=G.text.placedSymbolArray.get(ji.centerJustifiedTextSymbolIndex),Lc=t.evaluateSizeForFeature(G.textSizeData,he,Yc),Zc=$.get("text-padding");us=B.collisionIndex.placeCollisionCircles(Ve,Yc,G.lineVertexArray,G.glyphOffsetArray,Lc,st,Ct,wt,w,tr,ye.predicate,ji.collisionCircleDiameter,Zc),Yi=Ve||us.circles.length>0&&!us.collisionDetected,sa=sa&&us.offscreen}if(Sa.iconFeatureIndex&&(ml=Sa.iconFeatureIndex),Sa.iconBox){var bc=function(ws){var cu=kn&&Ia?oe(ws,Ia.x,Ia.y,sn,tr,B.transform.angle):ws;return B.collisionIndex.placeCollisionBox(cu,qe,Ut,st,ye.predicate)};_a=_s&&_s.box&&_s.box.length&&Sa.verticalIconBox?(Os=bc(Sa.verticalIconBox)).box.length>0:(Os=bc(Sa.iconBox)).box.length>0,sa=sa&&Os.offscreen}var Au=je||ji.numHorizontalGlyphVertices===0&&ji.numVerticalGlyphVertices===0,Ec=Ie||ji.numIconVertices===0;if(Au||Ec?Ec?Au||(_a=_a&&Yi):Yi=_a&&Yi:_a=Yi=_a&&Yi,Yi&&xa&&xa.box&&B.collisionIndex.insertCollisionBox(xa.box,$.get("text-ignore-placement"),G.bucketInstanceId,_s&&_s.box&&js?js:es,ye.ID),_a&&Os&&B.collisionIndex.insertCollisionBox(Os.box,$.get("icon-ignore-placement"),G.bucketInstanceId,ml,ye.ID),us&&(Yi&&B.collisionIndex.insertCollisionCircles(us.circles,$.get("text-ignore-placement"),G.bucketInstanceId,es,ye.ID),w)){var Kc=G.bucketInstanceId,Hl=B.collisionCircleArrays[Kc];Hl===void 0&&(Hl=B.collisionCircleArrays[Kc]=new Xo);for(var al=0;al<us.circles.length;al+=4)Hl.circles.push(us.circles[al+0]),Hl.circles.push(us.circles[al+1]),Hl.circles.push(us.circles[al+2]),Hl.circles.push(us.collisionDetected?1:0)}B.placements[ji.crossTileID]=new fu(Yi||Mr,_a||$r,sa||G.justReloaded),I[ji.crossTileID]=!0}};if(pr)for(var Ti=G.getSortedSymbolIndexes(this.transform.angle),Li=Ti.length-1;Li>=0;--Li){var Ki=Ti[Li];Yr(G.symbolInstances.get(Ki),G.collisionArrays[Ki])}else for(var Xi=j.symbolInstanceStart;Xi<j.symbolInstanceEnd;Xi++)Yr(G.symbolInstances.get(Xi),G.collisionArrays[Xi]);if(w&&G.bucketInstanceId in this.collisionCircleArrays){var Oa=this.collisionCircleArrays[G.bucketInstanceId];t.invert(Oa.invProjMatrix,st),Oa.viewportMatrix=this.collisionIndex.getViewportMatrix()}G.justReloaded=!1},Ht.prototype.markUsedJustification=function(j,I,w,B){var D;D=B===t.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(I)];for(var G=0,$=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];G<$.length;G+=1){var st=$[G];st>=0&&(j.text.placedSymbolArray.get(st).crossTileID=D>=0&&st!==D?0:w.crossTileID)}},Ht.prototype.markUsedOrientation=function(j,I,w){for(var B=I===t.WritingMode.horizontal||I===t.WritingMode.horizontalOnly?I:0,D=I===t.WritingMode.vertical?I:0,G=0,$=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];G<$.length;G+=1)j.text.placedSymbolArray.get($[G]).placedOrientation=B;w.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=D)},Ht.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,w=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var B=I?I.symbolFadeChange(j):1,D=I?I.opacities:{},G=I?I.variableOffsets:{},$=I?I.placedOrientations:{};for(var st in this.placements){var Ct=this.placements[st],wt=D[st];wt?(this.opacities[st]=new Ro(wt,B,Ct.text,Ct.icon),w=w||Ct.text!==wt.text.placed||Ct.icon!==wt.icon.placed):(this.opacities[st]=new Ro(null,B,Ct.text,Ct.icon,Ct.skipFade),w=w||Ct.text||Ct.icon)}for(var Ut in D){var Yt=D[Ut];if(!this.opacities[Ut]){var qt=new Ro(Yt,B,!1,!1);qt.isHidden()||(this.opacities[Ut]=qt,w=w||Yt.text.placed||Yt.icon.placed)}}for(var he in G)this.variableOffsets[he]||!this.opacities[he]||this.opacities[he].isHidden()||(this.variableOffsets[he]=G[he]);for(var ye in $)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=$[ye]);w?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:j)},Ht.prototype.updateLayerOpacities=function(j,I){for(var w={},B=0,D=I;B<D.length;B+=1){var G=D[B],$=G.getBucket(j);$&&G.latestFeatureIndex&&j.id===$.layerIds[0]&&this.updateBucketOpacities($,w,G.collisionBoxArray)}},Ht.prototype.updateBucketOpacities=function(j,I,w){var B=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var D=j.layers[0].layout,G=new Ro(null,0,!1,!1,!0),$=D.get("text-allow-overlap"),st=D.get("icon-allow-overlap"),Ct=D.get("text-variable-anchor"),wt=D.get("text-rotation-alignment")==="map",Ut=D.get("text-pitch-alignment")==="map",Yt=D.get("icon-text-fit")!=="none",qt=new Ro(null,0,$&&(st||!j.hasIconData()||D.get("icon-optional")),st&&($||!j.hasTextData()||D.get("text-optional")),!0);!j.collisionArrays&&w&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(w);for(var he=function(qe,sn,tr){for(var kn=0;kn<sn/4;kn++)qe.opacityVertexArray.emplaceBack(tr)},ye=function(qe){var sn=j.symbolInstances.get(qe),tr=sn.numHorizontalGlyphVertices,kn=sn.numVerticalGlyphVertices,pr=sn.crossTileID,Mr=B.opacities[pr];I[pr]?Mr=G:Mr||(B.opacities[pr]=Mr=qt),I[pr]=!0;var $r=sn.numIconVertices>0,Yr=B.placedOrientations[sn.crossTileID],Ti=Yr===t.WritingMode.vertical,Li=Yr===t.WritingMode.horizontal||Yr===t.WritingMode.horizontalOnly;if(tr>0||kn>0){var Ki=ki(Mr.text);he(j.text,tr,Ti?oa:Ki),he(j.text,kn,Li?oa:Ki);var Xi=Mr.text.isHidden();[sn.rightJustifiedTextSymbolIndex,sn.centerJustifiedTextSymbolIndex,sn.leftJustifiedTextSymbolIndex].forEach(function(Fa){Fa>=0&&(j.text.placedSymbolArray.get(Fa).hidden=Xi||Ti?1:0)}),sn.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(sn.verticalPlacedTextSymbolIndex).hidden=Xi||Li?1:0);var Oa=B.variableOffsets[sn.crossTileID];Oa&&B.markUsedJustification(j,Oa.anchor,sn,Yr);var Na=B.placedOrientations[sn.crossTileID];Na&&(B.markUsedJustification(j,"left",sn,Na),B.markUsedOrientation(j,Na,sn))}if($r){var ji=ki(Mr.icon),Sa=!(Yt&&sn.verticalPlacedIconSymbolIndex&&Ti);sn.placedIconSymbolIndex>=0&&(he(j.icon,sn.numIconVertices,Sa?ji:oa),j.icon.placedSymbolArray.get(sn.placedIconSymbolIndex).hidden=Mr.icon.isHidden()),sn.verticalPlacedIconSymbolIndex>=0&&(he(j.icon,sn.numVerticalIconVertices,Sa?oa:ji),j.icon.placedSymbolArray.get(sn.verticalPlacedIconSymbolIndex).hidden=Mr.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var xa=j.collisionArrays[qe];if(xa){var Yi=new t.Point(0,0);if(xa.textBox||xa.verticalTextBox){var _a=!0;if(Ct){var sa=B.variableOffsets[pr];sa?(Yi=Ne(sa.anchor,sa.width,sa.height,sa.textOffset,sa.textBoxScale),wt&&Yi._rotate(Ut?B.transform.angle:-B.transform.angle)):_a=!1}xa.textBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!_a||Ti,Yi.x,Yi.y),xa.verticalTextBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!_a||Li,Yi.x,Yi.y)}var Ia=Boolean(!Li&&xa.verticalIconBox);xa.iconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,Ia,Yt?Yi.x:0,Yt?Yi.y:0),xa.verticalIconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,!Ia,Yt?Yi.x:0,Yt?Yi.y:0)}}},je=0;je<j.symbolInstances.length;je++)ye(je);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Ie=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Ie.invProjMatrix,j.placementViewportMatrix=Ie.viewportMatrix,j.collisionCircleArray=Ie.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},Ht.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ht.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},Ht.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},Ht.prototype.stillRecent=function(j,I){var w=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*w>j},Ht.prototype.setStale=function(){this.stale=!0};var an=Math.pow(2,25),zn=Math.pow(2,24),qn=Math.pow(2,17),Un=Math.pow(2,16),Jr=Math.pow(2,9),Si=Math.pow(2,8),Ci=Math.pow(2,1);function ki(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var I=j.placed?1:0,w=Math.floor(127*j.opacity);return w*an+I*zn+w*qn+I*Un+w*Jr+I*Si+w*Ci+I}var oa=0,Xa=function(I){this._sortAcrossTiles=I.layout.get("symbol-z-order")!=="viewport-y"&&I.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Xa.prototype.continuePlacement=function(j,I,w,B,D){for(var G=this._bucketParts;this._currentTileIndex<j.length;)if(I.getBucketParts(G,B,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,G.sort(function($,st){return $.sortKey-st.sortKey}));this._currentPartIndex<G.length;)if(I.placeLayerBucketPart(G[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,D())return!0;return!1};var ma=function(I,w,B,D,G,$,st){this.placement=new Ht(I,G,$,st),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=D,this._done=!1};ma.prototype.isDone=function(){return this._done},ma.prototype.continuePlacement=function(j,I,w){for(var B=this,D=t.browser.now(),G=function(){var wt=t.browser.now()-D;return!B._forceFullPlacement&&wt>2};this._currentPlacementIndex>=0;){var $=I[j[this._currentPlacementIndex]],st=this.placement.collisionIndex.transform.zoom;if($.type==="symbol"&&(!$.minzoom||$.minzoom<=st)&&(!$.maxzoom||$.maxzoom>st)){if(this._inProgressLayer||(this._inProgressLayer=new Xa($)),this._inProgressLayer.continuePlacement(w[$.source],this.placement,this._showCollisionBoxes,$,G))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ma.prototype.commit=function(j){return this.placement.commit(j),this.placement};var mo=512/t.EXTENT/2,Ba=function(I,w,B){this.tileID=I,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var D=0;D<w.length;D++){var G=w.get(D),$=G.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:G.crossTileID,coord:this.getScaledCoordinates(G,I)})}};Ba.prototype.getScaledCoordinates=function(j,I){var w=mo/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*t.EXTENT+j.anchorX)*w),y:Math.floor((I.canonical.y*t.EXTENT+j.anchorY)*w)}},Ba.prototype.findMatches=function(j,I,w){for(var B=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),D=0;D<j.length;D++){var G=j.get(D);if(!G.crossTileID){var $=this.indexedSymbolInstances[G.key];if($)for(var st=this.getScaledCoordinates(G,I),Ct=0,wt=$;Ct<wt.length;Ct+=1){var Ut=wt[Ct];if(Math.abs(Ut.coord.x-st.x)<=B&&Math.abs(Ut.coord.y-st.y)<=B&&!w[Ut.crossTileID]){w[Ut.crossTileID]=!0,G.crossTileID=Ut.crossTileID;break}}}}};var ao=function(){this.maxCrossTileID=0};ao.prototype.generate=function(){return++this.maxCrossTileID};var yo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};yo.prototype.handleWrapJump=function(j){var I=Math.round((j-this.lng)/360);if(I!==0)for(var w in this.indexes){var B=this.indexes[w],D={};for(var G in B){var $=B[G];$.tileID=$.tileID.unwrapTo($.tileID.wrap+I),D[$.tileID.key]=$}this.indexes[w]=D}this.lng=j},yo.prototype.addBucket=function(j,I,w){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var B=0;B<I.symbolInstances.length;B++)I.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var D=this.usedCrossTileIDs[j.overscaledZ];for(var G in this.indexes){var $=this.indexes[G];if(Number(G)>j.overscaledZ)for(var st in $){var Ct=$[st];Ct.tileID.isChildOf(j)&&Ct.findMatches(I.symbolInstances,j,D)}else{var wt=$[j.scaledTo(Number(G)).key];wt&&wt.findMatches(I.symbolInstances,j,D)}}for(var Ut=0;Ut<I.symbolInstances.length;Ut++){var Yt=I.symbolInstances.get(Ut);Yt.crossTileID||(Yt.crossTileID=w.generate(),D[Yt.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new Ba(j,I.symbolInstances,I.bucketInstanceId),!0},yo.prototype.removeBucketCrossTileIDs=function(j,I){for(var w in I.indexedSymbolInstances)for(var B=0,D=I.indexedSymbolInstances[w];B<D.length;B+=1)delete this.usedCrossTileIDs[j][D[B].crossTileID]},yo.prototype.removeStaleBuckets=function(j){var I=!1;for(var w in this.indexes){var B=this.indexes[w];for(var D in B)j[B[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,B[D]),delete B[D],I=!0)}return I};var Ja=function(){this.layerIndexes={},this.crossTileIDs=new ao,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ja.prototype.addLayer=function(j,I,w){var B=this.layerIndexes[j.id];B===void 0&&(B=this.layerIndexes[j.id]=new yo);var D=!1,G={};B.handleWrapJump(w);for(var $=0,st=I;$<st.length;$+=1){var Ct=st[$],wt=Ct.getBucket(j);wt&&j.id===wt.layerIds[0]&&(wt.bucketInstanceId||(wt.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(Ct.tileID,wt,this.crossTileIDs)&&(D=!0),G[wt.bucketInstanceId]=!0)}return B.removeStaleBuckets(G)&&(D=!0),D},Ja.prototype.pruneUnusedLayers=function(j){var I={};for(var w in j.forEach(function(B){I[B]=!0}),this.layerIndexes)I[w]||delete this.layerIndexes[w]};var _o=function(I,w){return t.emitValidationErrors(I,w&&w.filter(function(B){return B.identifier!=="source.canvas"}))},ts=t.pick(Be,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Do=t.pick(Be,["setCenter","setZoom","setBearing","setPitch"]),xs=function(){var j={},I=t.styleSpec.$version;for(var w in t.styleSpec.$root){var B,D=t.styleSpec.$root[w];D.required&&(B=w==="version"?I:D.type==="array"?[]:{})!=null&&(j[w]=B)}return j}(),Mo=function(j){function I(w,B){var D=this;B===void 0&&(B={}),j.call(this),this.map=w,this.dispatcher=new L(ln(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new m(w._requestManager,B.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Ja,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var G=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function($){G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:$.pluginStatus,pluginURL:$.pluginURL},function(st,Ct){if(t.triggerPluginCompletionEvent(st),Ct&&Ct.every(function(Ut){return Ut}))for(var wt in G.sourceCaches)G.sourceCaches[wt].reload()})}),this.on("data",function($){if($.dataType==="source"&&$.sourceDataType==="metadata"){var st=D.sourceCaches[$.sourceId];if(st){var Ct=st.getSource();if(Ct&&Ct.vectorLayerIds)for(var wt in D._layers){var Ut=D._layers[wt];Ut.source===Ct.id&&D._validateLayer(Ut)}}}})}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.loadURL=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var G=typeof B.validate=="boolean"?B.validate:!t.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,B.accessToken);var $=this.map._requestManager.transformRequest(w,t.ResourceType.Style);this._request=t.getJSON($,function(st,Ct){D._request=null,st?D.fire(new t.ErrorEvent(st)):Ct&&D._load(Ct,G)})},I.prototype.loadJSON=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){D._request=null,D._load(w,B.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(xs,!1)},I.prototype._load=function(w,B){if(!B||!_o(this,t.validateStyle(w))){for(var D in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var G=Ar(this.stylesheet.layers);this._order=G.map(function(wt){return wt.id}),this._layers={},this._serializedLayers={};for(var $=0,st=G;$<st.length;$+=1){var Ct=st[$];(Ct=t.createStyleLayer(Ct)).setEventedParent(this,{layer:{id:Ct.id}}),this._layers[Ct.id]=Ct,this._serializedLayers[Ct.id]=Ct.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},I.prototype._loadSprite=function(w){var B=this;this._spriteRequest=function(D,G,$){var st,Ct,wt,Ut=t.browser.devicePixelRatio>1?"@2x":"",Yt=t.getJSON(G.transformRequest(G.normalizeSpriteURL(D,Ut,".json"),t.ResourceType.SpriteJSON),function(ye,je){Yt=null,wt||(wt=ye,st=je,he())}),qt=t.getImage(G.transformRequest(G.normalizeSpriteURL(D,Ut,".png"),t.ResourceType.SpriteImage),function(ye,je){qt=null,wt||(wt=ye,Ct=je,he())});function he(){if(wt)$(wt);else if(st&&Ct){var ye=t.browser.getImageData(Ct),je={};for(var Ie in st){var Ve=st[Ie],qe=Ve.width,sn=Ve.height,tr=Ve.x,kn=Ve.y,pr=Ve.sdf,Mr=Ve.pixelRatio,$r=Ve.stretchX,Yr=Ve.stretchY,Ti=Ve.content,Li=new t.RGBAImage({width:qe,height:sn});t.RGBAImage.copy(ye,Li,{x:tr,y:kn},{x:0,y:0},{width:qe,height:sn}),je[Ie]={data:Li,pixelRatio:Mr,sdf:pr,stretchX:$r,stretchY:Yr,content:Ti}}$(null,je)}}return{cancel:function(){Yt&&(Yt.cancel(),Yt=null),qt&&(qt.cancel(),qt=null)}}}(w,this.map._requestManager,function(D,G){if(B._spriteRequest=null,D)B.fire(new t.ErrorEvent(D));else if(G)for(var $ in G)B.imageManager.addImage($,G[$]);B.imageManager.setLoaded(!0),B._availableImages=B.imageManager.listImages(),B.dispatcher.broadcast("setImages",B._availableImages),B.fire(new t.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(w){var B=this.sourceCaches[w.source];if(B){var D=w.sourceLayer;if(D){var G=B.getSource();(G.type==="geojson"||G.vectorLayerIds&&G.vectorLayerIds.indexOf(D)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+G.id+'" as specified by style layer "'+w.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(w){for(var B=[],D=0,G=w;D<G.length;D+=1){var $=this._layers[G[D]];$.type!=="custom"&&B.push($.serialize())}return B},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var B in this._layers)if(this._layers[B].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(w){if(this._loaded){var B=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),G=Object.keys(this._removedLayers);for(var $ in(D.length||G.length)&&this._updateWorkerLayers(D,G),this._updatedSources){var st=this._updatedSources[$];st==="reload"?this._reloadSource($):st==="clear"&&this._clearSource($)}for(var Ct in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ct].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var wt={};for(var Ut in this.sourceCaches){var Yt=this.sourceCaches[Ut];wt[Ut]=Yt.used,Yt.used=!1}for(var qt=0,he=this._order;qt<he.length;qt+=1){var ye=this._layers[he[qt]];ye.recalculate(w,this._availableImages),!ye.isHidden(w.zoom)&&ye.source&&(this.sourceCaches[ye.source].used=!0)}for(var je in wt){var Ie=this.sourceCaches[je];wt[je]!==Ie.used&&Ie.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:je}))}this.light.recalculate(w),this.z=w.zoom,B&&this.fire(new t.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var B in this.sourceCaches)this.sourceCaches[B].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},I.prototype._updateWorkerLayers=function(w,B){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:B})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(w){var B=this;if(this._checkLoaded(),_o(this,t.validateStyle(w)))return!1;(w=t.clone$1(w)).layers=Ar(w.layers);var D=function($,st){if(!$)return[{command:Be.setStyle,args:[st]}];var Ct=[];try{if(!t.deepEqual($.version,st.version))return[{command:Be.setStyle,args:[st]}];t.deepEqual($.center,st.center)||Ct.push({command:Be.setCenter,args:[st.center]}),t.deepEqual($.zoom,st.zoom)||Ct.push({command:Be.setZoom,args:[st.zoom]}),t.deepEqual($.bearing,st.bearing)||Ct.push({command:Be.setBearing,args:[st.bearing]}),t.deepEqual($.pitch,st.pitch)||Ct.push({command:Be.setPitch,args:[st.pitch]}),t.deepEqual($.sprite,st.sprite)||Ct.push({command:Be.setSprite,args:[st.sprite]}),t.deepEqual($.glyphs,st.glyphs)||Ct.push({command:Be.setGlyphs,args:[st.glyphs]}),t.deepEqual($.transition,st.transition)||Ct.push({command:Be.setTransition,args:[st.transition]}),t.deepEqual($.light,st.light)||Ct.push({command:Be.setLight,args:[st.light]});var wt={},Ut=[];(function(qt,he,ye,je){var Ie;for(Ie in he=he||{},qt=qt||{})qt.hasOwnProperty(Ie)&&(he.hasOwnProperty(Ie)||Ye(Ie,ye,je));for(Ie in he)he.hasOwnProperty(Ie)&&(qt.hasOwnProperty(Ie)?t.deepEqual(qt[Ie],he[Ie])||(qt[Ie].type==="geojson"&&he[Ie].type==="geojson"&&gn(qt,he,Ie)?ye.push({command:Be.setGeoJSONSourceData,args:[Ie,he[Ie].data]}):fn(Ie,he,ye,je)):We(Ie,he,ye))})($.sources,st.sources,Ut,wt);var Yt=[];$.layers&&$.layers.forEach(function(qt){wt[qt.source]?Ct.push({command:Be.removeLayer,args:[qt.id]}):Yt.push(qt)}),Ct=Ct.concat(Ut),function(qt,he,ye){he=he||[];var je,Ie,Ve,qe,sn,tr,kn,pr=(qt=qt||[]).map(bn),Mr=he.map(bn),$r=qt.reduce(Ln,{}),Yr=he.reduce(Ln,{}),Ti=pr.slice(),Li=Object.create(null);for(je=0,Ie=0;je<pr.length;je++)Yr.hasOwnProperty(Ve=pr[je])?Ie++:(ye.push({command:Be.removeLayer,args:[Ve]}),Ti.splice(Ti.indexOf(Ve,Ie),1));for(je=0,Ie=0;je<Mr.length;je++)Ti[Ti.length-1-je]!==(Ve=Mr[Mr.length-1-je])&&($r.hasOwnProperty(Ve)?(ye.push({command:Be.removeLayer,args:[Ve]}),Ti.splice(Ti.lastIndexOf(Ve,Ti.length-Ie),1)):Ie++,ye.push({command:Be.addLayer,args:[Yr[Ve],tr=Ti[Ti.length-je]]}),Ti.splice(Ti.length-je,0,Ve),Li[Ve]=!0);for(je=0;je<Mr.length;je++)if(qe=$r[Ve=Mr[je]],sn=Yr[Ve],!Li[Ve]&&!t.deepEqual(qe,sn))if(t.deepEqual(qe.source,sn.source)&&t.deepEqual(qe["source-layer"],sn["source-layer"])&&t.deepEqual(qe.type,sn.type)){for(kn in Bn(qe.layout,sn.layout,ye,Ve,null,Be.setLayoutProperty),Bn(qe.paint,sn.paint,ye,Ve,null,Be.setPaintProperty),t.deepEqual(qe.filter,sn.filter)||ye.push({command:Be.setFilter,args:[Ve,sn.filter]}),t.deepEqual(qe.minzoom,sn.minzoom)&&t.deepEqual(qe.maxzoom,sn.maxzoom)||ye.push({command:Be.setLayerZoomRange,args:[Ve,sn.minzoom,sn.maxzoom]}),qe)qe.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Bn(qe[kn],sn[kn],ye,Ve,kn.slice(6),Be.setPaintProperty):t.deepEqual(qe[kn],sn[kn])||ye.push({command:Be.setLayerProperty,args:[Ve,kn,sn[kn]]}));for(kn in sn)sn.hasOwnProperty(kn)&&!qe.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Bn(qe[kn],sn[kn],ye,Ve,kn.slice(6),Be.setPaintProperty):t.deepEqual(qe[kn],sn[kn])||ye.push({command:Be.setLayerProperty,args:[Ve,kn,sn[kn]]}))}else ye.push({command:Be.removeLayer,args:[Ve]}),tr=Ti[Ti.lastIndexOf(Ve)+1],ye.push({command:Be.addLayer,args:[sn,tr]})}(Yt,st.layers,Ct)}catch(qt){console.warn("Unable to compute style diff:",qt),Ct=[{command:Be.setStyle,args:[st]}]}return Ct}(this.serialize(),w).filter(function($){return!($.command in Do)});if(D.length===0)return!1;var G=D.filter(function($){return!($.command in ts)});if(G.length>0)throw new Error("Unimplemented: "+G.map(function($){return $.command}).join(", ")+".");return D.forEach(function($){$.command!=="setTransition"&&B[$.command].apply(B,$.args)}),this.stylesheet=w,!0},I.prototype.addImage=function(w,B){if(this.getImage(w))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,B),this._afterImageUpdated(w)},I.prototype.updateImage=function(w,B){this.imageManager.updateImage(w,B)},I.prototype.getImage=function(w){return this.imageManager.getImage(w)},I.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},I.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(w,B,D){var G=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!B.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(B).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(B.type)>=0&&this._validate(t.validateStyle.source,"sources."+w,B,null,D))){this.map&&this.map._collectResourceTiming&&(B.collectResourceTiming=!0);var $=this.sourceCaches[w]=new xe(w,B,this.dispatcher);$.style=this,$.setEventedParent(this,function(){return{isSourceLoaded:G.loaded(),source:$.serialize(),sourceId:w}}),$.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var B in this._layers)if(this._layers[B].source===w)return this.fire(new t.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+B+'" is using it.')));var D=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],D.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(w,B){this._checkLoaded(),this.sourceCaches[w].getSource().setData(B),this._changed=!0},I.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},I.prototype.addLayer=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=w.id;if(this.getLayer(G))this.fire(new t.ErrorEvent(new Error('Layer with id "'+G+'" already exists on this map')));else{var $;if(w.type==="custom"){if(_o(this,t.validateCustomStyleLayer(w)))return;$=t.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(G,w.source),w=t.clone$1(w),w=t.extend(w,{source:G})),this._validate(t.validateStyle.layer,"layers."+G,w,{arrayIndex:-1},D))return;$=t.createStyleLayer(w),this._validateLayer($),$.setEventedParent(this,{layer:{id:G}}),this._serializedLayers[$.id]=$.serialize()}var st=B?this._order.indexOf(B):this._order.length;if(B&&st===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.')));else{if(this._order.splice(st,0,G),this._layerOrderChanged=!0,this._layers[G]=$,this._removedLayers[G]&&$.source&&$.type!=="custom"){var Ct=this._removedLayers[G];delete this._removedLayers[G],Ct.type!==$.type?this._updatedSources[$.source]="clear":(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause())}this._updateLayer($),$.onAdd&&$.onAdd(this.map)}}},I.prototype.moveLayer=function(w,B){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==B){var D=this._order.indexOf(w);this._order.splice(D,1);var G=B?this._order.indexOf(B):this._order.length;B&&G===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.'))):(this._order.splice(G,0,w),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(w){this._checkLoaded();var B=this._layers[w];if(B){B.setEventedParent(null);var D=this._order.indexOf(w);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=B,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],B.onRemove&&B.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(w){return this._layers[w]},I.prototype.hasLayer=function(w){return w in this._layers},I.prototype.setLayerZoomRange=function(w,B,D){this._checkLoaded();var G=this.getLayer(w);G?G.minzoom===B&&G.maxzoom===D||(B!=null&&(G.minzoom=B),D!=null&&(G.maxzoom=D),this._updateLayer(G)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=this.getLayer(w);if(G){if(!t.deepEqual(G.filter,B))return B==null?(G.filter=void 0,void this._updateLayer(G)):void(this._validate(t.validateStyle.filter,"layers."+G.id+".filter",B,null,D)||(G.filter=t.clone$1(B),this._updateLayer(G)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(w){return t.clone$1(this.getLayer(w).filter)},I.prototype.setLayoutProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var $=this.getLayer(w);$?t.deepEqual($.getLayoutProperty(B),D)||($.setLayoutProperty(B,D,G),this._updateLayer($)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(w,B){var D=this.getLayer(w);if(D)return D.getLayoutProperty(B);this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var $=this.getLayer(w);$?t.deepEqual($.getPaintProperty(B),D)||($.setPaintProperty(B,D,G)&&this._updateLayer($),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(w,B){return this.getLayer(w).getPaintProperty(B)},I.prototype.setFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=w.sourceLayer,$=this.sourceCaches[D];if($!==void 0){var st=$.getSource().type;st==="geojson"&&G?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):st!=="vector"||G?(w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),$.setFeatureState(G,w.id,B)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=this.sourceCaches[D];if(G!==void 0){var $=G.getSource().type,st=$==="vector"?w.sourceLayer:void 0;$!=="vector"||st?B&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):G.removeFeatureState(st,w.id,B):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(w){this._checkLoaded();var B=w.source,D=w.sourceLayer,G=this.sourceCaches[B];if(G!==void 0){if(G.getSource().type!=="vector"||D)return w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),G.getFeatureState(D,w.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+B+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},I.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(w){for(var B=this,D=function(Yr){return B._layers[Yr].type==="fill-extrusion"},G={},$=[],st=this._order.length-1;st>=0;st--){var Ct=this._order[st];if(D(Ct)){G[Ct]=st;for(var wt=0,Ut=w;wt<Ut.length;wt+=1){var Yt=Ut[wt][Ct];if(Yt)for(var qt=0,he=Yt;qt<he.length;qt+=1)$.push(he[qt])}}}$.sort(function($r,Yr){return Yr.intersectionZ-$r.intersectionZ});for(var ye=[],je=this._order.length-1;je>=0;je--){var Ie=this._order[je];if(D(Ie))for(var Ve=$.length-1;Ve>=0;Ve--){var qe=$[Ve].feature;if(G[qe.layer.id]<je)break;ye.push(qe),$.pop()}else for(var sn=0,tr=w;sn<tr.length;sn+=1){var kn=tr[sn][Ie];if(kn)for(var pr=0,Mr=kn;pr<Mr.length;pr+=1)ye.push(Mr[pr].feature)}}return ye},I.prototype.queryRenderedFeatures=function(w,B,D){B&&B.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",B.filter,null,B);var G={};if(B&&B.layers){if(!Array.isArray(B.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var $=0,st=B.layers;$<st.length;$+=1){var Ct=st[$],wt=this._layers[Ct];if(!wt)return this.fire(new t.ErrorEvent(new Error("The layer '"+Ct+"' does not exist in the map's style and cannot be queried for features."))),[];G[wt.source]=!0}}var Ut=[];for(var Yt in B.availableImages=this._availableImages,this.sourceCaches)B.layers&&!G[Yt]||Ut.push(Nt(this.sourceCaches[Yt],this._layers,this._serializedLayers,w,B,D));return this.placement&&Ut.push(function(qt,he,ye,je,Ie,Ve,qe){for(var sn={},tr=Ve.queryRenderedSymbols(je),kn=[],pr=0,Mr=Object.keys(tr).map(Number);pr<Mr.length;pr+=1)kn.push(qe[Mr[pr]]);kn.sort(Rt);for(var $r=function(){var Oa=Ti[Yr],Na=Oa.featureIndex.lookupSymbolFeatures(tr[Oa.bucketInstanceId],he,Oa.bucketIndex,Oa.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,qt);for(var ji in Na){var Sa=sn[ji]=sn[ji]||[],xa=Na[ji];xa.sort(function(sa,Ia){var Fa=Oa.featureSortOrder;if(Fa){var _s=Fa.indexOf(sa.featureIndex);return Fa.indexOf(Ia.featureIndex)-_s}return Ia.featureIndex-sa.featureIndex});for(var Yi=0,_a=xa;Yi<_a.length;Yi+=1)Sa.push(_a[Yi])}},Yr=0,Ti=kn;Yr<Ti.length;Yr+=1)$r();var Li=function(Oa){sn[Oa].forEach(function(Na){var ji=Na.feature,Sa=ye[qt[Oa].source].getFeatureState(ji.layer["source-layer"],ji.id);ji.source=ji.layer.source,ji.layer["source-layer"]&&(ji.sourceLayer=ji.layer["source-layer"]),ji.state=Sa})};for(var Ki in sn)Li(Ki);return sn}(this._layers,this._serializedLayers,this.sourceCaches,w,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},I.prototype.querySourceFeatures=function(w,B){B&&B.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",B.filter,null,B);var D=this.sourceCaches[w];return D?function(G,$){for(var st=G.getRenderableIds().map(function(he){return G.getTileByID(he)}),Ct=[],wt={},Ut=0;Ut<st.length;Ut++){var Yt=st[Ut],qt=Yt.tileID.canonical.key;wt[qt]||(wt[qt]=!0,Yt.querySourceFeatures(Ct,$))}return Ct}(D,B):[]},I.prototype.addSourceType=function(w,B,D){return I.getSourceType(w)?D(new Error('A source type called "'+w+'" already exists.')):(I.setSourceType(w,B),B.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:B.workerSourceURL},D):D(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(w,B){B===void 0&&(B={}),this._checkLoaded();var D=this.light.getLight(),G=!1;for(var $ in w)if(!t.deepEqual(w[$],D[$])){G=!0;break}if(G){var st={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,B),this.light.updateTransitions(st)}},I.prototype._validate=function(w,B,D,G,$){return $===void 0&&($={}),(!$||$.validate!==!1)&&_o(this,w.call(t.validateStyle,t.extend({key:B,style:this.serialize(),value:D,styleSpec:t.styleSpec},G)))},I.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var B in this.sourceCaches)this.sourceCaches[B].clearTiles(),this.sourceCaches[B].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},I.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},I.prototype._updateSources=function(w){for(var B in this.sourceCaches)this.sourceCaches[B].update(w)},I.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},I.prototype._updatePlacement=function(w,B,D,G,$){$===void 0&&($=!1);for(var st=!1,Ct=!1,wt={},Ut=0,Yt=this._order;Ut<Yt.length;Ut+=1){var qt=this._layers[Yt[Ut]];if(qt.type==="symbol"){if(!wt[qt.source]){var he=this.sourceCaches[qt.source];wt[qt.source]=he.getRenderableIds(!0).map(function(qe){return he.getTileByID(qe)}).sort(function(qe,sn){return sn.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(sn.tileID)?-1:1)})}var ye=this.crossTileSymbolIndex.addLayer(qt,wt[qt.source],w.center.lng);st=st||ye}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),(($=$||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),w.zoom))&&(this.pauseablePlacement=new ma(w,this._order,$,B,D,G,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,wt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Ct=!0),st&&this.pauseablePlacement.placement.setStale()),Ct||st)for(var je=0,Ie=this._order;je<Ie.length;je+=1){var Ve=this._layers[Ie[je]];Ve.type==="symbol"&&this.placement.updateLayerOpacities(Ve,wt[Ve.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},I.prototype.getImages=function(w,B,D){this.imageManager.getImages(B.icons,D),this._updateTilesForChangedImages();var G=this.sourceCaches[B.source];G&&G.setDependencies(B.tileID.key,B.type,B.icons)},I.prototype.getGlyphs=function(w,B,D){this.glyphManager.getGlyphs(B.stacks,D)},I.prototype.getResource=function(w,B,D){return t.makeRequest(B,D)},I}(t.Evented);Mo.getSourceType=function(j){return ut[j]},Mo.setSourceType=function(j,I){ut[j]=I},Mo.registerForPluginStateChange=t.registerForPluginStateChange;var $a=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ms=uo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),as=uo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ca=uo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),mn=uo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),hr=uo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gr=uo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ui=uo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ka=uo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),xo=uo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),vo=uo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),qi=uo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Qa=uo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),bs=uo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Es=uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ga=uo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Pu=uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Uo=uo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ps=uo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Qs=uo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fs=uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),hs=uo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),os=uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ds=uo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ts=uo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ou=uo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Uu=uo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function uo(j,I){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,B=I.match(/attribute ([\w]+) ([\w]+)/g),D=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),G=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=G?G.concat(D):D,st={};return{fragmentSource:j=j.replace(w,function(Ct,wt,Ut,Yt,qt){return st[qt]=!0,wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
varying `+Ut+" "+Yt+" "+qt+`;
#else
uniform `+Ut+" "+Yt+" u_"+qt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`}),vertexSource:I=I.replace(w,function(Ct,wt,Ut,Yt,qt){var he=Yt==="float"?"vec2":"vec4",ye=qt.match(/color/)?"color":he;return st[qt]?wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+he+" a_"+qt+`;
varying `+Ut+" "+Yt+" "+qt+`;
#else
uniform `+Ut+" "+Yt+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+he+" a_"+qt+`;
#else
uniform `+Ut+" "+Yt+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Yt+" "+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Yt+" "+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`}),staticAttributes:B,staticUniforms:$}}var Fs=Object.freeze({__proto__:null,prelude:Ms,background:as,backgroundPattern:Ca,circle:mn,clippingMask:hr,heatmap:Gr,heatmapTexture:Ui,collisionBox:Ka,collisionCircle:xo,debug:vo,fill:qi,fillOutline:Qa,fillOutlinePattern:bs,fillPattern:Es,fillExtrusion:Ga,fillExtrusionPattern:Pu,hillshadePrepare:Uo,hillshade:Ps,line:Qs,lineGradient:fs,linePattern:hs,lineSDF:os,raster:ds,symbolIcon:Ts,symbolSDF:Ou,symbolTextAndIcon:Uu}),ku=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ul(j){for(var I=[],w=0;w<j.length;w++)if(j[w]!==null){var B=j[w].split(" ");I.push(B.pop())}return I}ku.prototype.bind=function(j,I,w,B,D,G,$,st){this.context=j;for(var Ct=this.boundPaintVertexBuffers.length!==B.length,wt=0;!Ct&&wt<B.length;wt++)this.boundPaintVertexBuffers[wt]!==B[wt]&&(Ct=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===w&&!Ct&&this.boundIndexBuffer===D&&this.boundVertexOffset===G&&this.boundDynamicVertexBuffer===$&&this.boundDynamicVertexBuffer2===st?(j.bindVertexArrayOES.set(this.vao),$&&$.bind(),D&&D.dynamicDraw&&D.bind(),st&&st.bind()):this.freshBind(I,w,B,D,G,$,st)},ku.prototype.freshBind=function(j,I,w,B,D,G,$){var st,Ct=j.numAttributes,wt=this.context,Ut=wt.gl;if(wt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=wt.extVertexArrayObject.createVertexArrayOES(),wt.bindVertexArrayOES.set(this.vao),st=0,this.boundProgram=j,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=B,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=G,this.boundDynamicVertexBuffer2=$;else{st=wt.currentNumAttributes||0;for(var Yt=Ct;Yt<st;Yt++)Ut.disableVertexAttribArray(Yt)}I.enableAttributes(Ut,j);for(var qt=0,he=w;qt<he.length;qt+=1)he[qt].enableAttributes(Ut,j);G&&G.enableAttributes(Ut,j),$&&$.enableAttributes(Ut,j),I.bind(),I.setVertexAttribPointers(Ut,j,D);for(var ye=0,je=w;ye<je.length;ye+=1){var Ie=je[ye];Ie.bind(),Ie.setVertexAttribPointers(Ut,j,D)}G&&(G.bind(),G.setVertexAttribPointers(Ut,j,D)),B&&B.bind(),$&&($.bind(),$.setVertexAttribPointers(Ut,j,D)),wt.currentNumAttributes=Ct},ku.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ll=function(I,w,B,D,G,$){var st=I.gl;this.program=st.createProgram();for(var Ct=ul(B.staticAttributes),wt=D?D.getBinderAttributes():[],Ut=Ct.concat(wt),Yt=B.staticUniforms?ul(B.staticUniforms):[],qt=D?D.getBinderUniforms():[],he=[],ye=0,je=Yt.concat(qt);ye<je.length;ye+=1){var Ie=je[ye];he.indexOf(Ie)<0&&he.push(Ie)}var Ve=D?D.defines():[];$&&Ve.push("#define OVERDRAW_INSPECTOR;");var qe=Ve.concat(Ms.fragmentSource,B.fragmentSource).join(`
`),sn=Ve.concat(Ms.vertexSource,B.vertexSource).join(`
`),tr=st.createShader(st.FRAGMENT_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(tr,qe),st.compileShader(tr),st.attachShader(this.program,tr);var kn=st.createShader(st.VERTEX_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(kn,sn),st.compileShader(kn),st.attachShader(this.program,kn),this.attributes={};var pr={};this.numAttributes=Ut.length;for(var Mr=0;Mr<this.numAttributes;Mr++)Ut[Mr]&&(st.bindAttribLocation(this.program,Mr,Ut[Mr]),this.attributes[Ut[Mr]]=Mr);st.linkProgram(this.program),st.deleteShader(kn),st.deleteShader(tr);for(var $r=0;$r<he.length;$r++){var Yr=he[$r];if(Yr&&!pr[Yr]){var Ti=st.getUniformLocation(this.program,Yr);Ti&&(pr[Yr]=Ti)}}this.fixedUniforms=G(I,pr),this.binderUniforms=D?D.getUniforms(I,pr):[]}}};function Qu(j,I,w){var B=1/wa(w,1,I.transform.tileZoom),D=Math.pow(2,w.tileID.overscaledZ),G=w.tileSize*Math.pow(2,I.transform.tileZoom)/D,$=G*(w.tileID.canonical.x+w.tileID.wrap*D),st=G*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[B,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[$>>16,st>>16],u_pixel_coord_lower:[65535&$,65535&st]}}ll.prototype.draw=function(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt,qt,he,ye,je){var Ie,Ve=j.gl;if(!this.failedToCreate){for(var qe in j.program.set(this.program),j.setDepthMode(w),j.setStencilMode(B),j.setColorMode(D),j.setCullFace(G),this.fixedUniforms)this.fixedUniforms[qe].set($[qe]);he&&he.setUniforms(j,this.binderUniforms,Yt,{zoom:qt});for(var sn=(Ie={},Ie[Ve.LINES]=2,Ie[Ve.TRIANGLES]=3,Ie[Ve.LINE_STRIP]=1,Ie)[I],tr=0,kn=Ut.get();tr<kn.length;tr+=1){var pr=kn[tr],Mr=pr.vaos||(pr.vaos={});(Mr[st]||(Mr[st]=new ku)).bind(j,this,Ct,he?he.getPaintVertexBuffers():[],wt,pr.vertexOffset,ye,je),Ve.drawElements(I,pr.primitiveLength*sn,Ve.UNSIGNED_SHORT,pr.primitiveOffset*sn*2)}}};var To=function(I,w,B,D){var G=w.style.light,$=G.properties.get("position"),st=[$.x,$.y,$.z],Ct=t.create$1();G.properties.get("anchor")==="viewport"&&t.fromRotation(Ct,-w.transform.angle),t.transformMat3(st,st,Ct);var wt=G.properties.get("color");return{u_matrix:I,u_lightpos:st,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[wt.r,wt.g,wt.b],u_vertical_gradient:+B,u_opacity:D}},La=function(I,w,B,D,G,$,st){return t.extend(To(I,w,B,D),Qu($,w,st),{u_height_factor:-Math.pow(2,G.overscaledZ)/st.tileSize/8})},ya=function(I){return{u_matrix:I}},wo=function(I,w,B,D){return t.extend(ya(I),Qu(B,w,D))},pu=function(I,w){return{u_matrix:I,u_world:w}},El=function(I,w,B,D,G){return t.extend(wo(I,w,B,D),{u_world:G})},zs=function(I,w,B,D){var G,$,st=I.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var Ct=wa(B,1,st.zoom);G=!0,$=[Ct,Ct]}else G=!1,$=st.pixelsToGLUnits;return{u_camera_to_center_distance:st.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(w.posMatrix,B,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+G,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:$}},Ss=function(I,w,B){var D=wa(B,1,w.zoom),G=Math.pow(2,w.zoom-B.tileID.overscaledZ),$=B.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:w.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[w.pixelsToGLUnits[0]/(D*G),w.pixelsToGLUnits[1]/(D*G)],u_overscale_factor:$}},ou=function(I,w,B){return{u_matrix:I,u_inv_matrix:w,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},qs=function(I,w,B){return B===void 0&&(B=1),{u_matrix:I,u_color:w,u_overlay:0,u_overlay_scale:B}},Ls=function(I){return{u_matrix:I}},qu=function(I,w,B,D){return{u_matrix:I,u_extrude_scale:wa(w,1,B),u_intensity:D}},su=function(I,w,B){var D=I.transform;return{u_matrix:ql(I,w,B),u_ratio:1/wa(w,1,D.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Wa=function(I,w,B,D){return t.extend(su(I,w,B),{u_image:0,u_image_height:D})},Sl=function(I,w,B,D){var G=I.transform,$=_l(w,G);return{u_matrix:ql(I,w,B),u_texsize:w.imageAtlasTexture.size,u_ratio:1/wa(w,1,G.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[$,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},Ql=function(I,w,B,D,G){var $=I.lineAtlas,st=_l(w,I.transform),Ct=B.layout.get("line-cap")==="round",wt=$.getDash(D.from,Ct),Ut=$.getDash(D.to,Ct),Yt=wt.width*G.fromScale,qt=Ut.width*G.toScale;return t.extend(su(I,w,B),{u_patternscale_a:[st/Yt,-wt.height/2],u_patternscale_b:[st/qt,-Ut.height/2],u_sdfgamma:$.width/(256*Math.min(Yt,qt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:wt.y,u_tex_y_b:Ut.y,u_mix:G.t})};function _l(j,I){return 1/wa(j,1,I.tileZoom)}function ql(j,I,w){return j.translatePosMatrix(I.tileID.posMatrix,I,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var Gu=function(I,w,B,D,G){return{u_matrix:I,u_tl_parent:w,u_scale_parent:B,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(st=G.paint.get("raster-saturation"),st>0?1-1/(1.001-st):-st),u_contrast_factor:($=G.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:Ha(G.paint.get("raster-hue-rotate"))};var $,st};function Ha(j){j*=Math.PI/180;var I=Math.sin(j),w=Math.cos(j);return[(2*w+1)/3,(-Math.sqrt(3)*I-w+1)/3,(Math.sqrt(3)*I-w+1)/3]}var uu,Ml=function(I,w,B,D,G,$,st,Ct,wt,Ut){var Yt=G.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:w?w.uSizeT:0,u_size:w?w.uSize:0,u_camera_to_center_distance:Yt.cameraToCenterDistance,u_pitch:Yt.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Yt.width/Yt.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:$,u_label_plane_matrix:st,u_coord_matrix:Ct,u_is_text:+wt,u_pitch_with_map:+D,u_texsize:Ut,u_texture:0}},vs=function(I,w,B,D,G,$,st,Ct,wt,Ut,Yt){var qt=G.transform;return t.extend(Ml(I,w,B,D,G,$,st,Ct,wt,Ut),{u_gamma_scale:D?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Yt})},wu=function(I,w,B,D,G,$,st,Ct,wt,Ut){return t.extend(vs(I,w,B,D,G,$,st,Ct,!0,wt,!0),{u_texsize_icon:Ut,u_texture_icon:1})},gu=function(I,w,B){return{u_matrix:I,u_opacity:w,u_color:B}},Vu=function(I,w,B,D,G,$){return t.extend(function(st,Ct,wt,Ut){var Yt=wt.imageManager.getPattern(st.from.toString()),qt=wt.imageManager.getPattern(st.to.toString()),he=wt.imageManager.getPixelSize(),ye=he.width,je=he.height,Ie=Math.pow(2,Ut.tileID.overscaledZ),Ve=Ut.tileSize*Math.pow(2,wt.transform.tileZoom)/Ie,qe=Ve*(Ut.tileID.canonical.x+Ut.tileID.wrap*Ie),sn=Ve*Ut.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Yt.tl,u_pattern_br_a:Yt.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[ye,je],u_mix:Ct.t,u_pattern_size_a:Yt.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:Ct.fromScale,u_scale_b:Ct.toScale,u_tile_units_to_pixels:1/wa(Ut,1,wt.transform.tileZoom),u_pixel_coord_upper:[qe>>16,sn>>16],u_pixel_coord_lower:[65535&qe,65535&sn]}}(D,$,B,G),{u_matrix:I,u_opacity:w})},Ws={fillExtrusion:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fillExtrusionPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_height_factor:new t.Uniform1f(I,w.u_height_factor),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fill:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},fillPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},fillOutline:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world)}},fillOutlinePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},circle:function(I,w){return{u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(I,w.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},collisionBox:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(I,w.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_overscale_factor:new t.Uniform1f(I,w.u_overscale_factor)}},collisionCircle:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_inv_matrix:new t.UniformMatrix4f(I,w.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(I,w.u_viewport_size)}},debug:function(I,w){return{u_color:new t.UniformColor(I,w.u_color),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_overlay:new t.Uniform1i(I,w.u_overlay),u_overlay_scale:new t.Uniform1f(I,w.u_overlay_scale)}},clippingMask:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmap:function(I,w){return{u_extrude_scale:new t.Uniform1f(I,w.u_extrude_scale),u_intensity:new t.Uniform1f(I,w.u_intensity),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmapTexture:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_color_ramp:new t.Uniform1i(I,w.u_color_ramp),u_opacity:new t.Uniform1f(I,w.u_opacity)}},hillshade:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_latrange:new t.Uniform2f(I,w.u_latrange),u_light:new t.Uniform2f(I,w.u_light),u_shadow:new t.UniformColor(I,w.u_shadow),u_highlight:new t.UniformColor(I,w.u_highlight),u_accent:new t.UniformColor(I,w.u_accent)}},hillshadePrepare:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_dimension:new t.Uniform2f(I,w.u_dimension),u_zoom:new t.Uniform1f(I,w.u_zoom),u_unpack:new t.Uniform4f(I,w.u_unpack)}},line:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels)}},lineGradient:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_image:new t.Uniform1i(I,w.u_image),u_image_height:new t.Uniform1f(I,w.u_image_height)}},linePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_texsize:new t.Uniform2f(I,w.u_texsize),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_image:new t.Uniform1i(I,w.u_image),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},lineSDF:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(I,w.u_patternscale_a),u_patternscale_b:new t.Uniform2f(I,w.u_patternscale_b),u_sdfgamma:new t.Uniform1f(I,w.u_sdfgamma),u_image:new t.Uniform1i(I,w.u_image),u_tex_y_a:new t.Uniform1f(I,w.u_tex_y_a),u_tex_y_b:new t.Uniform1f(I,w.u_tex_y_b),u_mix:new t.Uniform1f(I,w.u_mix)}},raster:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_tl_parent:new t.Uniform2f(I,w.u_tl_parent),u_scale_parent:new t.Uniform1f(I,w.u_scale_parent),u_buffer_scale:new t.Uniform1f(I,w.u_buffer_scale),u_fade_t:new t.Uniform1f(I,w.u_fade_t),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image0:new t.Uniform1i(I,w.u_image0),u_image1:new t.Uniform1i(I,w.u_image1),u_brightness_low:new t.Uniform1f(I,w.u_brightness_low),u_brightness_high:new t.Uniform1f(I,w.u_brightness_high),u_saturation_factor:new t.Uniform1f(I,w.u_saturation_factor),u_contrast_factor:new t.Uniform1f(I,w.u_contrast_factor),u_spin_weights:new t.Uniform3f(I,w.u_spin_weights)}},symbolIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture)}},symbolSDF:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},symbolTextAndIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texsize_icon:new t.Uniform2f(I,w.u_texsize_icon),u_texture:new t.Uniform1i(I,w.u_texture),u_texture_icon:new t.Uniform1i(I,w.u_texture_icon),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},background:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_color:new t.UniformColor(I,w.u_color)}},backgroundPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image:new t.Uniform1i(I,w.u_image),u_pattern_tl_a:new t.Uniform2f(I,w.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(I,w.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(I,w.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(I,w.u_pattern_br_b),u_texsize:new t.Uniform2f(I,w.u_texsize),u_mix:new t.Uniform1f(I,w.u_mix),u_pattern_size_a:new t.Uniform2f(I,w.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(I,w.u_pattern_size_b),u_scale_a:new t.Uniform1f(I,w.u_scale_a),u_scale_b:new t.Uniform1f(I,w.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(I,w.u_tile_units_to_pixels)}}};function Jo(j,I,w,B,D,G,$){for(var st=j.context,Ct=st.gl,wt=j.useProgram("collisionBox"),Ut=[],Yt=0,qt=0,he=0;he<B.length;he++){var ye=B[he],je=I.getTile(ye),Ie=je.getBucket(w);if(Ie){var Ve=ye.posMatrix;D[0]===0&&D[1]===0||(Ve=j.translatePosMatrix(ye.posMatrix,je,D,G));var qe=$?Ie.textCollisionBox:Ie.iconCollisionBox,sn=Ie.collisionCircleArray;if(sn.length>0){var tr=t.create(),kn=Ve;t.mul(tr,Ie.placementInvProjMatrix,j.transform.glCoordMatrix),t.mul(tr,tr,Ie.placementViewportMatrix),Ut.push({circleArray:sn,circleOffset:qt,transform:kn,invTransform:tr}),qt=Yt+=sn.length/4}qe&&wt.draw(st,Ct.LINES,pe.disabled,Wt.disabled,j.colorModeForRenderPass(),Ae.disabled,Ss(Ve,j.transform,je),w.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,j.transform.zoom,null,null,qe.collisionVertexBuffer)}}if($&&Ut.length){var pr=j.useProgram("collisionCircle"),Mr=new t.StructArrayLayout2f1f2i16;Mr.resize(4*Yt),Mr._trim();for(var $r=0,Yr=0,Ti=Ut;Yr<Ti.length;Yr+=1)for(var Li=Ti[Yr],Ki=0;Ki<Li.circleArray.length/4;Ki++){var Xi=4*Ki,Oa=Li.circleArray[Xi+0],Na=Li.circleArray[Xi+1],ji=Li.circleArray[Xi+2],Sa=Li.circleArray[Xi+3];Mr.emplace($r++,Oa,Na,ji,Sa,0),Mr.emplace($r++,Oa,Na,ji,Sa,1),Mr.emplace($r++,Oa,Na,ji,Sa,2),Mr.emplace($r++,Oa,Na,ji,Sa,3)}(!uu||uu.length<2*Yt)&&(uu=function(_s){var us=2*_s,Os=new t.StructArrayLayout3ui6;Os.resize(us),Os._trim();for(var es=0;es<us;es++){var js=6*es;Os.uint16[js+0]=4*es+0,Os.uint16[js+1]=4*es+1,Os.uint16[js+2]=4*es+2,Os.uint16[js+3]=4*es+2,Os.uint16[js+4]=4*es+3,Os.uint16[js+5]=4*es+0}return Os}(Yt));for(var xa=st.createIndexBuffer(uu,!0),Yi=st.createVertexBuffer(Mr,t.collisionCircleLayout.members,!0),_a=0,sa=Ut;_a<sa.length;_a+=1){var Ia=sa[_a],Fa=ou(Ia.transform,Ia.invTransform,j.transform);pr.draw(st,Ct.TRIANGLES,pe.disabled,Wt.disabled,j.colorModeForRenderPass(),Ae.disabled,Fa,w.id,Yi,xa,t.SegmentVector.simpleSegment(0,2*Ia.circleOffset,Ia.circleArray.length,Ia.circleArray.length/2),null,j.transform.zoom,null,null,null)}Yi.destroy(),xa.destroy()}}var ss=t.identity(new Float32Array(16));function cl(j,I,w,B,D,G){var $=t.getAnchorAlignment(j),st=-($.horizontalAlign-.5)*I,Ct=-($.verticalAlign-.5)*w,wt=t.evaluateVariableOffset(j,B);return new t.Point((st/D+wt[0])*G,(Ct/D+wt[1])*G)}function Rl(j,I,w,B,D,G,$,st,Ct,wt,Ut){var Yt=j.text.placedSymbolArray,qt=j.text.dynamicLayoutVertexArray,he=j.icon.dynamicLayoutVertexArray,ye={};qt.clear();for(var je=0;je<Yt.length;je++){var Ie=Yt.get(je),Ve=Ie.hidden||!Ie.crossTileID||j.allowVerticalPlacement&&!Ie.placedOrientation?null:B[Ie.crossTileID];if(Ve){var qe=new t.Point(Ie.anchorX,Ie.anchorY),sn=vr(qe,w?st:$),tr=zr(G.cameraToCenterDistance,sn.signedDistanceFromCamera),kn=D.evaluateSizeForFeature(j.textSizeData,wt,Ie)*tr/t.ONE_EM;w&&(kn*=j.tilePixelRatio/Ct);for(var pr=cl(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textBoxScale,kn),Mr=w?vr(qe.add(pr),$).point:sn.point.add(I?pr.rotate(-G.angle):pr),$r=j.allowVerticalPlacement&&Ie.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Yr=0;Yr<Ie.numGlyphs;Yr++)t.addDynamicAttributes(qt,Mr,$r);Ut&&Ie.associatedIconIndex>=0&&(ye[Ie.associatedIconIndex]={shiftedAnchor:Mr,angle:$r})}else no(Ie.numGlyphs,qt)}if(Ut){he.clear();for(var Ti=j.icon.placedSymbolArray,Li=0;Li<Ti.length;Li++){var Ki=Ti.get(Li);if(Ki.hidden)no(Ki.numGlyphs,he);else{var Xi=ye[Li];if(Xi)for(var Oa=0;Oa<Ki.numGlyphs;Oa++)t.addDynamicAttributes(he,Xi.shiftedAnchor,Xi.angle);else no(Ki.numGlyphs,he)}}j.icon.dynamicLayoutVertexBuffer.updateData(he)}j.text.dynamicLayoutVertexBuffer.updateData(qt)}function tc(j,I,w){return w.iconsInText&&I?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function Wu(j,I,w,B,D,G,$,st,Ct,wt,Ut,Yt){for(var qt=j.context,he=qt.gl,ye=j.transform,je=st==="map",Ie=Ct==="map",Ve=je&&w.layout.get("symbol-placement")!=="point",qe=je&&!Ie&&!Ve,sn=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,tr=!1,kn=j.depthModeForSublayer(0,pe.ReadOnly),pr=w.layout.get("text-variable-anchor"),Mr=[],$r=0,Yr=B;$r<Yr.length;$r+=1){var Ti=Yr[$r],Li=I.getTile(Ti),Ki=Li.getBucket(w);if(Ki){var Xi=D?Ki.text:Ki.icon;if(Xi&&Xi.segments.get().length){var Oa=Xi.programConfigurations.get(w.id),Na=D||Ki.sdfIcons,ji=D?Ki.textSizeData:Ki.iconSizeData,Sa=Ie||ye.pitch!==0,xa=j.useProgram(tc(Na,D,Ki),Oa),Yi=t.evaluateSizeForZoom(ji,ye.zoom),_a=void 0,sa=[0,0],Ia=void 0,Fa=void 0,_s=null,us=void 0;if(D)Ia=Li.glyphAtlasTexture,Fa=he.LINEAR,_a=Li.glyphAtlasTexture.size,Ki.iconsInText&&(sa=Li.imageAtlasTexture.size,_s=Li.imageAtlasTexture,us=Sa||j.options.rotating||j.options.zooming||ji.kind==="composite"||ji.kind==="camera"?he.LINEAR:he.NEAREST);else{var Os=w.layout.get("icon-size").constantOr(0)!==1||Ki.iconsNeedLinear;Ia=Li.imageAtlasTexture,Fa=Na||j.options.rotating||j.options.zooming||Os||Sa?he.LINEAR:he.NEAREST,_a=Li.imageAtlasTexture.size}var es=wa(Li,1,j.transform.zoom),js=_n(Ti.posMatrix,Ie,je,j.transform,es),ml=Dr(Ti.posMatrix,Ie,je,j.transform,es),yu=pr&&Ki.hasTextData(),Fl=w.layout.get("icon-text-fit")!=="none"&&yu&&Ki.hasIconData();Ve&&Aa(Ki,Ti.posMatrix,j,D,js,ml,Ie,wt);var xc=j.translatePosMatrix(Ti.posMatrix,Li,G,$),zl=Ve||D&&pr||Fl?ss:js,Al=j.translatePosMatrix(ml,Li,G,$,!0),Nc=Na&&w.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Hc={program:xa,buffers:Xi,uniformValues:Na?Ki.iconsInText?wu(ji.kind,Yi,qe,Ie,j,xc,zl,Al,_a,sa):vs(ji.kind,Yi,qe,Ie,j,xc,zl,Al,D,_a,!0):Ml(ji.kind,Yi,qe,Ie,j,xc,zl,Al,D,_a),atlasTexture:Ia,atlasTextureIcon:_s,atlasInterpolation:Fa,atlasInterpolationIcon:us,isSDF:Na,hasHalo:Nc};if(sn&&Ki.canOverlap){tr=!0;for(var Tc=0,kc=Xi.segments.get();Tc<kc.length;Tc+=1){var Yc=kc[Tc];Mr.push({segments:new t.SegmentVector([Yc]),sortKey:Yc.sortKey,state:Hc})}}else Mr.push({segments:Xi.segments,sortKey:0,state:Hc})}}}tr&&Mr.sort(function(Kc,Hl){return Kc.sortKey-Hl.sortKey});for(var Lc=0,Zc=Mr;Lc<Zc.length;Lc+=1){var bc=Zc[Lc],Au=bc.state;if(qt.activeTexture.set(he.TEXTURE0),Au.atlasTexture.bind(Au.atlasInterpolation,he.CLAMP_TO_EDGE),Au.atlasTextureIcon&&(qt.activeTexture.set(he.TEXTURE1),Au.atlasTextureIcon&&Au.atlasTextureIcon.bind(Au.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Au.isSDF){var Ec=Au.uniformValues;Au.hasHalo&&(Ec.u_is_halo=1,tl(Au.buffers,bc.segments,w,j,Au.program,kn,Ut,Yt,Ec)),Ec.u_is_halo=0}tl(Au.buffers,bc.segments,w,j,Au.program,kn,Ut,Yt,Au.uniformValues)}}function tl(j,I,w,B,D,G,$,st,Ct){var wt=B.context;D.draw(wt,wt.gl.TRIANGLES,G,$,st,Ae.disabled,Ct,w.id,j.layoutVertexBuffer,j.indexBuffer,I,w.paint,B.transform.zoom,j.programConfigurations.get(w.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function Iu(j,I,w,B,D,G,$){var st,Ct,wt,Ut,Yt,qt=j.context.gl,he=w.paint.get("fill-pattern"),ye=he&&he.constantOr(1),je=w.getCrossfadeParameters();$?(Ct=ye&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=qt.LINES):(Ct=ye?"fillPattern":"fill",st=qt.TRIANGLES);for(var Ie=0,Ve=B;Ie<Ve.length;Ie+=1){var qe=Ve[Ie],sn=I.getTile(qe);if(!ye||sn.patternsLoaded()){var tr=sn.getBucket(w);if(tr){var kn=tr.programConfigurations.get(w.id),pr=j.useProgram(Ct,kn);ye&&(j.context.activeTexture.set(qt.TEXTURE0),sn.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),kn.updatePaintBuffers(je));var Mr=he.constantOr(null);if(Mr&&sn.imageAtlas){var $r=sn.imageAtlas,Yr=$r.patternPositions[Mr.to.toString()],Ti=$r.patternPositions[Mr.from.toString()];Yr&&Ti&&kn.setConstantPatternPositions(Yr,Ti)}var Li=j.translatePosMatrix(qe.posMatrix,sn,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if($){Ut=tr.indexBuffer2,Yt=tr.segments2;var Ki=[qt.drawingBufferWidth,qt.drawingBufferHeight];wt=Ct==="fillOutlinePattern"&&ye?El(Li,j,je,sn,Ki):pu(Li,Ki)}else Ut=tr.indexBuffer,Yt=tr.segments,wt=ye?wo(Li,j,je,sn):ya(Li);pr.draw(j.context,st,D,j.stencilModeForClipping(qe),G,Ae.disabled,wt,w.id,tr.layoutVertexBuffer,Ut,Yt,w.paint,j.transform.zoom,kn)}}}}function Lu(j,I,w,B,D,G,$){for(var st=j.context,Ct=st.gl,wt=w.paint.get("fill-extrusion-pattern"),Ut=wt.constantOr(1),Yt=w.getCrossfadeParameters(),qt=w.paint.get("fill-extrusion-opacity"),he=0,ye=B;he<ye.length;he+=1){var je=ye[he],Ie=I.getTile(je),Ve=Ie.getBucket(w);if(Ve){var qe=Ve.programConfigurations.get(w.id),sn=j.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",qe);Ut&&(j.context.activeTexture.set(Ct.TEXTURE0),Ie.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),qe.updatePaintBuffers(Yt));var tr=wt.constantOr(null);if(tr&&Ie.imageAtlas){var kn=Ie.imageAtlas,pr=kn.patternPositions[tr.to.toString()],Mr=kn.patternPositions[tr.from.toString()];pr&&Mr&&qe.setConstantPatternPositions(pr,Mr)}var $r=j.translatePosMatrix(je.posMatrix,Ie,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Yr=w.paint.get("fill-extrusion-vertical-gradient"),Ti=Ut?La($r,j,Yr,qt,je,Yt,Ie):To($r,j,Yr,qt);sn.draw(st,st.gl.TRIANGLES,D,G,$,Ae.backCCW,Ti,w.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,w.paint,j.transform.zoom,qe)}}}function mu(j,I,w,B,D,G){var $=j.context,st=$.gl,Ct=I.fbo;if(Ct){var wt=j.useProgram("hillshade");$.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,Ct.colorAttachment.get());var Ut=function(Yt,qt,he){var ye=he.paint.get("hillshade-shadow-color"),je=he.paint.get("hillshade-highlight-color"),Ie=he.paint.get("hillshade-accent-color"),Ve=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=Yt.transform.angle);var qe,sn,tr,kn=!Yt.options.moving;return{u_matrix:Yt.transform.calculatePosMatrix(qt.tileID.toUnwrapped(),kn),u_image:0,u_latrange:(qe=qt.tileID,sn=Math.pow(2,qe.canonical.z),tr=qe.canonical.y,[new t.MercatorCoordinate(0,tr/sn).toLngLat().lat,new t.MercatorCoordinate(0,(tr+1)/sn).toLngLat().lat]),u_light:[he.paint.get("hillshade-exaggeration"),Ve],u_shadow:ye,u_highlight:je,u_accent:Ie}}(j,I,w);wt.draw($,st.TRIANGLES,B,D,G,Ae.disabled,Ut,w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function Hu(j,I,w,B,D,G){var $=j.context,st=$.gl,Ct=I.dem;if(Ct&&Ct.data){var wt=Ct.dim,Ut=Ct.stride,Yt=Ct.getPixels();if($.activeTexture.set(st.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||j.getTileTexture(Ut),I.demTexture){var qt=I.demTexture;qt.update(Yt,{premultiply:!1}),qt.bind(st.NEAREST,st.CLAMP_TO_EDGE)}else I.demTexture=new t.Texture($,Yt,st.RGBA,{premultiply:!1}),I.demTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE);$.activeTexture.set(st.TEXTURE0);var he=I.fbo;if(!he){var ye=new t.Texture($,{width:wt,height:wt,data:null},st.RGBA);ye.bind(st.LINEAR,st.CLAMP_TO_EDGE),(he=I.fbo=$.createFramebuffer(wt,wt,!0)).colorAttachment.set(ye.texture)}$.bindFramebuffer.set(he.framebuffer),$.viewport.set([0,0,wt,wt]),j.useProgram("hillshadePrepare").draw($,st.TRIANGLES,B,D,G,Ae.disabled,function(je,Ie){var Ve=Ie.stride,qe=t.create();return t.ortho(qe,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(qe,qe,[0,-t.EXTENT,0]),{u_matrix:qe,u_image:1,u_dimension:[Ve,Ve],u_zoom:je.overscaledZ,u_unpack:Ie.getUnpackVector()}}(I.tileID,Ct),w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function Us(j,I,w,B,D){var G=B.paint.get("raster-fade-duration");if(G>0){var $=t.browser.now(),st=($-j.timeAdded)/G,Ct=I?($-I.timeAdded)/G:-1,wt=w.getSource(),Ut=D.coveringZoomLevel({tileSize:wt.tileSize,roundZoom:wt.roundZoom}),Yt=!I||Math.abs(I.tileID.overscaledZ-Ut)>Math.abs(j.tileID.overscaledZ-Ut),qt=Yt&&j.refreshedUponExpiration?1:t.clamp(Yt?st:1-Ct,0,1);return j.refreshedUponExpiration&&st>=1&&(j.refreshedUponExpiration=!1),I?{opacity:1,mix:1-qt}:{opacity:qt,mix:0}}return{opacity:1,mix:0}}var Dl=new t.Color(1,0,0,1),hc=new t.Color(0,1,0,1),Pl=new t.Color(0,0,1,1),jl=new t.Color(1,0,1,1),Bl=new t.Color(0,1,1,1);function sc(j,I,w,B){Tl(j,0,I+w/2,j.transform.width,w,B)}function el(j,I,w,B){Tl(j,I-w/2,0,w,j.transform.height,B)}function Tl(j,I,w,B,D,G){var $=j.context,st=$.gl;st.enable(st.SCISSOR_TEST),st.scissor(I*t.browser.devicePixelRatio,w*t.browser.devicePixelRatio,B*t.browser.devicePixelRatio,D*t.browser.devicePixelRatio),$.clear({color:G}),st.disable(st.SCISSOR_TEST)}function Nl(j,I,w){var B=j.context,D=B.gl,G=w.posMatrix,$=j.useProgram("debug"),st=pe.disabled,Ct=Wt.disabled,wt=j.colorModeForRenderPass();B.activeTexture.set(D.TEXTURE0),j.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),$.draw(B,D.LINE_STRIP,st,Ct,wt,Ae.disabled,qs(G,t.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var Ut=I.getTileByID(w.key).latestRawTileData,Yt=Math.floor((Ut&&Ut.byteLength||0)/1024),qt=I.getTile(w).tileSize,he=512/Math.min(qt,512)*(w.overscaledZ/j.transform.zoom)*.5,ye=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(ye+=" => "+w.overscaledZ),function(je,Ie){je.initDebugOverlayCanvas();var Ve=je.debugOverlayCanvas,qe=je.context.gl,sn=je.debugOverlayCanvas.getContext("2d");sn.clearRect(0,0,Ve.width,Ve.height),sn.shadowColor="white",sn.shadowBlur=2,sn.lineWidth=1.5,sn.strokeStyle="white",sn.textBaseline="top",sn.font="bold 36px Open Sans, sans-serif",sn.fillText(Ie,5,5),sn.strokeText(Ie,5,5),je.debugOverlayTexture.update(Ve),je.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(j,ye+" "+Yt+"kb"),$.draw(B,D.TRIANGLES,st,Ct,ie.alphaBlended,Ae.disabled,qs(G,t.Color.transparent,he),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var tu={symbol:function(I,w,B,D,G){if(I.renderPass==="translucent"){var $=Wt.disabled,st=I.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(Ct,wt,Ut,Yt,qt,he,ye){for(var je=wt.transform,Ie=qt==="map",Ve=he==="map",qe=0,sn=Ct;qe<sn.length;qe+=1){var tr=sn[qe],kn=Yt.getTile(tr),pr=kn.getBucket(Ut);if(pr&&pr.text&&pr.text.segments.get().length){var Mr=t.evaluateSizeForZoom(pr.textSizeData,je.zoom),$r=wa(kn,1,wt.transform.zoom),Yr=_n(tr.posMatrix,Ve,Ie,wt.transform,$r),Ti=Ut.layout.get("icon-text-fit")!=="none"&&pr.hasIconData();if(Mr){var Li=Math.pow(2,je.zoom-kn.tileID.overscaledZ);Rl(pr,Ie,Ve,ye,t.symbolSize,je,Yr,tr.posMatrix,Li,Mr,Ti)}}}}(D,I,B,w,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),G),B.paint.get("icon-opacity").constantOr(1)!==0&&Wu(I,w,B,D,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),$,st),B.paint.get("text-opacity").constantOr(1)!==0&&Wu(I,w,B,D,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),$,st),w.map.showCollisionBoxes&&(Jo(I,w,B,D,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),Jo(I,w,B,D,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("circle-opacity"),$=B.paint.get("circle-stroke-width"),st=B.paint.get("circle-stroke-opacity"),Ct=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(G.constantOr(1)!==0||$.constantOr(1)!==0&&st.constantOr(1)!==0){for(var wt=I.context,Ut=wt.gl,Yt=I.depthModeForSublayer(0,pe.ReadOnly),qt=Wt.disabled,he=I.colorModeForRenderPass(),ye=[],je=0;je<D.length;je++){var Ie=D[je],Ve=w.getTile(Ie),qe=Ve.getBucket(B);if(qe){var sn=qe.programConfigurations.get(B.id),tr={programConfiguration:sn,program:I.useProgram("circle",sn),layoutVertexBuffer:qe.layoutVertexBuffer,indexBuffer:qe.indexBuffer,uniformValues:zs(I,Ie,Ve,B)};if(Ct)for(var kn=0,pr=qe.segments.get();kn<pr.length;kn+=1){var Mr=pr[kn];ye.push({segments:new t.SegmentVector([Mr]),sortKey:Mr.sortKey,state:tr})}else ye.push({segments:qe.segments,sortKey:0,state:tr})}}Ct&&ye.sort(function(Ki,Xi){return Ki.sortKey-Xi.sortKey});for(var $r=0,Yr=ye;$r<Yr.length;$r+=1){var Ti=Yr[$r],Li=Ti.state;Li.program.draw(wt,Ut.TRIANGLES,Yt,qt,he,Ae.disabled,Li.uniformValues,B.id,Li.layoutVertexBuffer,Li.indexBuffer,Ti.segments,B.paint,I.transform.zoom,Li.programConfiguration)}}}},heatmap:function(I,w,B,D){if(B.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){var G=I.context,$=G.gl,st=Wt.disabled,Ct=new ie([$.ONE,$.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(ye,je,Ie){var Ve=ye.gl;ye.activeTexture.set(Ve.TEXTURE1),ye.viewport.set([0,0,je.width/4,je.height/4]);var qe=Ie.heatmapFbo;if(qe)Ve.bindTexture(Ve.TEXTURE_2D,qe.colorAttachment.get()),ye.bindFramebuffer.set(qe.framebuffer);else{var sn=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,sn),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),qe=Ie.heatmapFbo=ye.createFramebuffer(je.width/4,je.height/4,!1),function(tr,kn,pr,Mr){var $r=tr.gl;$r.texImage2D($r.TEXTURE_2D,0,$r.RGBA,kn.width/4,kn.height/4,0,$r.RGBA,tr.extRenderToTextureHalfFloat?tr.extTextureHalfFloat.HALF_FLOAT_OES:$r.UNSIGNED_BYTE,null),Mr.colorAttachment.set(pr)}(ye,je,sn,qe)}})(G,I,B),G.clear({color:t.Color.transparent});for(var wt=0;wt<D.length;wt++){var Ut=D[wt];if(!w.hasRenderableParent(Ut)){var Yt=w.getTile(Ut),qt=Yt.getBucket(B);if(qt){var he=qt.programConfigurations.get(B.id);I.useProgram("heatmap",he).draw(G,$.TRIANGLES,pe.disabled,st,Ct,Ae.disabled,qu(Ut.posMatrix,Yt,I.transform.zoom,B.paint.get("heatmap-intensity")),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,B.paint,I.transform.zoom,he)}}}G.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(ye,je){var Ie=ye.context,Ve=Ie.gl,qe=je.heatmapFbo;if(qe){Ie.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,qe.colorAttachment.get()),Ie.activeTexture.set(Ve.TEXTURE1);var sn=je.colorRampTexture;sn||(sn=je.colorRampTexture=new t.Texture(Ie,je.colorRamp,Ve.RGBA)),sn.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ie,Ve.TRIANGLES,pe.disabled,Wt.disabled,ye.colorModeForRenderPass(),Ae.disabled,function(tr,kn,pr,Mr){var $r=t.create();t.ortho($r,0,tr.width,tr.height,0,0,1);var Yr=tr.context.gl;return{u_matrix:$r,u_world:[Yr.drawingBufferWidth,Yr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:kn.paint.get("heatmap-opacity")}}(ye,je),je.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,je.paint,ye.transform.zoom)}}(I,B))},line:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("line-opacity"),$=B.paint.get("line-width");if(G.constantOr(1)!==0&&$.constantOr(1)!==0)for(var st=I.depthModeForSublayer(0,pe.ReadOnly),Ct=I.colorModeForRenderPass(),wt=B.paint.get("line-dasharray"),Ut=B.paint.get("line-pattern"),Yt=Ut.constantOr(1),qt=B.paint.get("line-gradient"),he=B.getCrossfadeParameters(),ye=Yt?"linePattern":wt?"lineSDF":qt?"lineGradient":"line",je=I.context,Ie=je.gl,Ve=!0,qe=0,sn=D;qe<sn.length;qe+=1){var tr=sn[qe],kn=w.getTile(tr);if(!Yt||kn.patternsLoaded()){var pr=kn.getBucket(B);if(pr){var Mr=pr.programConfigurations.get(B.id),$r=I.context.program.get(),Yr=I.useProgram(ye,Mr),Ti=Ve||Yr.program!==$r,Li=Ut.constantOr(null);if(Li&&kn.imageAtlas){var Ki=kn.imageAtlas,Xi=Ki.patternPositions[Li.to.toString()],Oa=Ki.patternPositions[Li.from.toString()];Xi&&Oa&&Mr.setConstantPatternPositions(Xi,Oa)}var Na=Yt?Sl(I,kn,B,he):wt?Ql(I,kn,B,wt,he):qt?Wa(I,kn,B,pr.lineClipsArray.length):su(I,kn,B);if(Yt)je.activeTexture.set(Ie.TEXTURE0),kn.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Mr.updatePaintBuffers(he);else if(wt&&(Ti||I.lineAtlas.dirty))je.activeTexture.set(Ie.TEXTURE0),I.lineAtlas.bind(je);else if(qt){var ji=pr.gradients[B.id],Sa=ji.texture;if(B.gradientVersion!==ji.version){var xa=256;if(B.stepInterpolant){var Yi=w.getSource().maxzoom,_a=tr.canonical.z===Yi?Math.ceil(1<<I.transform.maxZoom-tr.canonical.z):1;xa=t.clamp(t.nextPowerOfTwo(pr.maxLineLength/t.EXTENT*1024*_a),256,je.maxTextureSize)}ji.gradient=t.renderColorRamp({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:xa,image:ji.gradient||void 0,clips:pr.lineClipsArray}),ji.texture?ji.texture.update(ji.gradient):ji.texture=new t.Texture(je,ji.gradient,Ie.RGBA),ji.version=B.gradientVersion,Sa=ji.texture}je.activeTexture.set(Ie.TEXTURE0),Sa.bind(B.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}Yr.draw(je,Ie.TRIANGLES,st,I.stencilModeForClipping(tr),Ct,Ae.disabled,Na,B.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,B.paint,I.transform.zoom,Mr,pr.layoutVertexBuffer2),Ve=!1}}}}},fill:function(I,w,B,D){var G=B.paint.get("fill-color"),$=B.paint.get("fill-opacity");if($.constantOr(1)!==0){var st=I.colorModeForRenderPass(),Ct=B.paint.get("fill-pattern"),wt=I.opaquePassEnabledForLayer()&&!Ct.constantOr(1)&&G.constantOr(t.Color.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===wt){var Ut=I.depthModeForSublayer(1,I.renderPass==="opaque"?pe.ReadWrite:pe.ReadOnly);Iu(I,w,B,D,Ut,st,!1)}if(I.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Yt=I.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,pe.ReadOnly);Iu(I,w,B,D,Yt,st,!0)}}},"fill-extrusion":function(I,w,B,D){var G=B.paint.get("fill-extrusion-opacity");if(G!==0&&I.renderPass==="translucent"){var $=new pe(I.context.gl.LEQUAL,pe.ReadWrite,I.depthRangeFor3D);if(G!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Lu(I,w,B,D,$,Wt.disabled,ie.disabled),Lu(I,w,B,D,$,I.stencilModeFor3D(),I.colorModeForRenderPass());else{var st=I.colorModeForRenderPass();Lu(I,w,B,D,$,Wt.disabled,st)}}},hillshade:function(I,w,B,D){if(I.renderPass==="offscreen"||I.renderPass==="translucent"){for(var G=I.context,$=I.depthModeForSublayer(0,pe.ReadOnly),st=I.colorModeForRenderPass(),Ct=I.renderPass==="translucent"?I.stencilConfigForOverlap(D):[{},D],wt=Ct[0],Ut=0,Yt=Ct[1];Ut<Yt.length;Ut+=1){var qt=Yt[Ut],he=w.getTile(qt);he.needsHillshadePrepare&&I.renderPass==="offscreen"?Hu(I,he,B,$,Wt.disabled,st):I.renderPass==="translucent"&&mu(I,he,B,$,wt[qt.overscaledZ],st)}G.viewport.set([0,0,I.width,I.height])}},raster:function(I,w,B,D){if(I.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&D.length)for(var G=I.context,$=G.gl,st=w.getSource(),Ct=I.useProgram("raster"),wt=I.colorModeForRenderPass(),Ut=st instanceof it?[{},D]:I.stencilConfigForOverlap(D),Yt=Ut[0],qt=Ut[1],he=qt[qt.length-1].overscaledZ,ye=!I.options.moving,je=0,Ie=qt;je<Ie.length;je+=1){var Ve=Ie[je],qe=I.depthModeForSublayer(Ve.overscaledZ-he,B.paint.get("raster-opacity")===1?pe.ReadWrite:pe.ReadOnly,$.LESS),sn=w.getTile(Ve),tr=I.transform.calculatePosMatrix(Ve.toUnwrapped(),ye);sn.registerFadeDuration(B.paint.get("raster-fade-duration"));var kn=w.findLoadedParent(Ve,0),pr=Us(sn,kn,w,B,I.transform),Mr=void 0,$r=void 0,Yr=B.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;G.activeTexture.set($.TEXTURE0),sn.texture.bind(Yr,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),G.activeTexture.set($.TEXTURE1),kn?(kn.texture.bind(Yr,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Mr=Math.pow(2,kn.tileID.overscaledZ-sn.tileID.overscaledZ),$r=[sn.tileID.canonical.x*Mr%1,sn.tileID.canonical.y*Mr%1]):sn.texture.bind(Yr,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);var Ti=Gu(tr,$r||[0,0],Mr||1,pr,B);st instanceof it?Ct.draw(G,$.TRIANGLES,qe,Wt.disabled,wt,Ae.disabled,Ti,B.id,st.boundsBuffer,I.quadTriangleIndexBuffer,st.boundsSegments):Ct.draw(G,$.TRIANGLES,qe,Yt[Ve.overscaledZ],wt,Ae.disabled,Ti,B.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,w,B){var D=B.paint.get("background-color"),G=B.paint.get("background-opacity");if(G!==0){var $=I.context,st=$.gl,Ct=I.transform,wt=Ct.tileSize,Ut=B.paint.get("background-pattern");if(!I.isPatternMissing(Ut)){var Yt=!Ut&&D.a===1&&G===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass===Yt){var qt=Wt.disabled,he=I.depthModeForSublayer(0,Yt==="opaque"?pe.ReadWrite:pe.ReadOnly),ye=I.colorModeForRenderPass(),je=I.useProgram(Ut?"backgroundPattern":"background"),Ie=Ct.coveringTiles({tileSize:wt});Ut&&($.activeTexture.set(st.TEXTURE0),I.imageManager.bind(I.context));for(var Ve=B.getCrossfadeParameters(),qe=0,sn=Ie;qe<sn.length;qe+=1){var tr=sn[qe],kn=I.transform.calculatePosMatrix(tr.toUnwrapped()),pr=Ut?Vu(kn,G,I,Ut,{tileID:tr,tileSize:wt},Ve):gu(kn,G,D);je.draw($,st.TRIANGLES,he,qt,ye,Ae.disabled,pr,B.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}}}},debug:function(I,w,B){for(var D=0;D<B.length;D++)Nl(I,w,B[D])},custom:function(I,w,B){var D=I.context,G=B.implementation;if(I.renderPass==="offscreen"){var $=G.prerender;$&&(I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),$.call(G,D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),D.setStencilMode(Wt.disabled);var st=G.renderingMode==="3d"?new pe(I.context.gl.LEQUAL,pe.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,pe.ReadOnly);D.setDepthMode(st),G.render(D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState(),D.bindFramebuffer.set(null)}}},po=function(I,w){this.context=new ue(I),this.transform=w,this._tileTextures={},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ja,this.gpuTimers={}};po.prototype.resize=function(j,I){if(this.width=j*t.browser.devicePixelRatio,this.height=I*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,B=this.style._order;w<B.length;w+=1)this.style._layers[B[w]].resize()},po.prototype.setup=function(){var j=this.context,I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(I,$a.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var w=new t.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(t.EXTENT,0),w.emplaceBack(0,t.EXTENT),w.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=j.createVertexBuffer(w,$a.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(B,X.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var D=new t.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(D,$a.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var G=new t.StructArrayLayout1ui2;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(G);var $=new t.StructArrayLayout3ui6;$.emplaceBack(0,1,2),$.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer($),this.emptyTexture=new t.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var st=this.context.gl;this.stencilClearMode=new Wt({func:st.ALWAYS,mask:0},0,255,st.ZERO,st.ZERO,st.ZERO)},po.prototype.clearStencil=function(){var j=this.context,I=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=t.create();t.ortho(w,0,this.width,this.height,0,0,1),t.scale(w,w,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,I.TRIANGLES,pe.disabled,this.stencilClearMode,ie.disabled,Ae.disabled,Ls(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},po.prototype._renderTileClippingMasks=function(j,I){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&I&&I.length){this.currentStencilSource=j.source;var w=this.context,B=w.gl;this.nextStencilID+I.length>256&&this.clearStencil(),w.setColorMode(ie.disabled),w.setDepthMode(pe.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var G=0,$=I;G<$.length;G+=1){var st=$[G],Ct=this._tileClippingMaskIDs[st.key]=this.nextStencilID++;D.draw(w,B.TRIANGLES,pe.disabled,new Wt({func:B.ALWAYS,mask:0},Ct,255,B.KEEP,B.KEEP,B.REPLACE),ie.disabled,Ae.disabled,Ls(st.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},po.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,I=this.context.gl;return new Wt({func:I.NOTEQUAL,mask:255},j,255,I.KEEP,I.KEEP,I.REPLACE)},po.prototype.stencilModeForClipping=function(j){var I=this.context.gl;return new Wt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,I.KEEP,I.KEEP,I.REPLACE)},po.prototype.stencilConfigForOverlap=function(j){var I,w=this.context.gl,B=j.sort(function(Ct,wt){return wt.overscaledZ-Ct.overscaledZ}),D=B[B.length-1].overscaledZ,G=B[0].overscaledZ-D+1;if(G>1){this.currentStencilSource=void 0,this.nextStencilID+G>256&&this.clearStencil();for(var $={},st=0;st<G;st++)$[st+D]=new Wt({func:w.GEQUAL,mask:255},st+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=G,[$,B]}return[(I={},I[D]=Wt.disabled,I),B]},po.prototype.colorModeForRenderPass=function(){var j=this.context.gl;return this._showOverdrawInspector?new ie([j.CONSTANT_COLOR,j.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ie.unblended:ie.alphaBlended},po.prototype.depthModeForSublayer=function(j,I,w){if(!this.opaquePassEnabledForLayer())return pe.disabled;var B=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new pe(w||this.context.gl.LEQUAL,I,[B,B])},po.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},po.prototype.render=function(j,I){var w=this;this.style=j,this.options=I,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var B=this.style._order,D=this.style.sourceCaches;for(var G in D){var $=D[G];$.used&&$.prepare(this.context)}var st,Ct,wt={},Ut={},Yt={};for(var qt in D){var he=D[qt];wt[qt]=he.getVisibleCoordinates(),Ut[qt]=wt[qt].slice().reverse(),Yt[qt]=he.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ye=0;ye<B.length;ye++)if(this.style._layers[B[ye]].is3D()){this.opaquePassCutoff=ye;break}this.renderPass="offscreen";for(var je=0,Ie=B;je<Ie.length;je+=1){var Ve=this.style._layers[Ie[je]];if(Ve.hasOffscreenPass()&&!Ve.isHidden(this.transform.zoom)){var qe=Ut[Ve.source];(Ve.type==="custom"||qe.length)&&this.renderLayer(this,D[Ve.source],Ve,qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){var sn=this.style._layers[B[this.currentLayer]],tr=D[sn.source],kn=wt[sn.source];this._renderTileClippingMasks(sn,kn),this.renderLayer(this,tr,sn,kn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){var pr=this.style._layers[B[this.currentLayer]],Mr=D[pr.source],$r=(pr.type==="symbol"?Yt:Ut)[pr.source];this._renderTileClippingMasks(pr,wt[pr.source]),this.renderLayer(this,Mr,pr,$r)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Yr){Yr.source&&!Yr.isHidden(w.transform.zoom)&&(Yr.source!==(Ct&&Ct.id)&&(Ct=w.style.sourceCaches[Yr.source]),(!st||st.getSource().maxzoom<Ct.getSource().maxzoom)&&(st=Ct))}),st&&tu.debug(this,st,st.getVisibleCoordinates())),this.options.showPadding&&function(Yr){var Ti=Yr.transform.padding;sc(Yr,Yr.transform.height-(Ti.top||0),3,Dl),sc(Yr,Ti.bottom||0,3,hc),el(Yr,Ti.left||0,3,Pl),el(Yr,Yr.transform.width-(Ti.right||0),3,jl);var Li=Yr.transform.centerPoint;(function(Ki,Xi,Oa,Na){Tl(Ki,Xi-1,Oa-10,2,20,Na),Tl(Ki,Xi-10,Oa-1,20,2,Na)})(Yr,Li.x,Yr.transform.height-Li.y,Bl)}(this),this.context.setDefault()},po.prototype.renderLayer=function(j,I,w,B){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||B.length)&&(this.id=w.id,this.gpuTimingStart(w),tu[w.type](j,I,w,B,this.style.placement.variableOffsets),this.gpuTimingEnd())},po.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var I=this.context.extTimerQuery,w=this.gpuTimers[j.id];w||(w=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),w.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,w.query)}},po.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},po.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},po.prototype.queryGpuTimers=function(j){var I={};for(var w in j){var B=j[w],D=this.context.extTimerQuery,G=D.getQueryObjectEXT(B.query,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(B.query),I[w]=G}return I},po.prototype.translatePosMatrix=function(j,I,w,B,D){if(!w[0]&&!w[1])return j;var G=D?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(G){var $=Math.sin(G),st=Math.cos(G);w=[w[0]*st-w[1]*$,w[0]*$+w[1]*st]}var Ct=[D?w[0]:wa(I,w[0],this.transform.zoom),D?w[1]:wa(I,w[1],this.transform.zoom),0],wt=new Float32Array(16);return t.translate(wt,j,Ct),wt},po.prototype.saveTileTexture=function(j){var I=this._tileTextures[j.size[0]];I?I.push(j):this._tileTextures[j.size[0]]=[j]},po.prototype.getTileTexture=function(j){var I=this._tileTextures[j];return I&&I.length>0?I.pop():null},po.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var I=this.imageManager.getPattern(j.from.toString()),w=this.imageManager.getPattern(j.to.toString());return!I||!w},po.prototype.useProgram=function(j,I){this.cache=this.cache||{};var w=""+j+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new ll(this.context,j,Fs[j],I,Ws[j],this._showOverdrawInspector)),this.cache[w]},po.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},po.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},po.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},po.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var pl=function(I,w){this.points=I,this.planes=w};pl.fromInvProjectionMatrix=function(j,I,w){var B=Math.pow(2,w),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function($){return t.transformMat4([],$,j)}).map(function($){return t.scale$1([],$,1/$[3]/I*B)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function($){var st=t.sub([],D[$[0]],D[$[1]]),Ct=t.sub([],D[$[2]],D[$[1]]),wt=t.normalize([],t.cross([],st,Ct)),Ut=-t.dot(wt,D[$[1]]);return wt.concat(Ut)});return new pl(D,G)};var fl=function(I,w){this.min=I,this.max=w,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};fl.prototype.quadrant=function(j){for(var I=[j%2==0,j<2],w=t.clone$2(this.min),B=t.clone$2(this.max),D=0;D<I.length;D++)w[D]=I[D]?this.min[D]:this.center[D],B[D]=I[D]?this.center[D]:this.max[D];return B[2]=this.max[2],new fl(w,B)},fl.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},fl.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},fl.prototype.intersects=function(j){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,B=0;B<j.planes.length;B++){for(var D=j.planes[B],G=0,$=0;$<I.length;$++)G+=t.dot$1(D,I[$])>=0;if(G===0)return 0;G!==I.length&&(w=!1)}if(w)return 2;for(var st=0;st<3;st++){for(var Ct=Number.MAX_VALUE,wt=-Number.MAX_VALUE,Ut=0;Ut<j.points.length;Ut++){var Yt=j.points[Ut][st]-this.min[st];Ct=Math.min(Ct,Yt),wt=Math.max(wt,Yt)}if(wt<0||Ct>this.max[st]-this.min[st])return 0}return 1};var Hs=function(I,w,B,D){if(I===void 0&&(I=0),w===void 0&&(w=0),B===void 0&&(B=0),D===void 0&&(D=0),isNaN(I)||I<0||isNaN(w)||w<0||isNaN(B)||B<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=I,this.bottom=w,this.left=B,this.right=D};Hs.prototype.interpolate=function(j,I,w){return I.top!=null&&j.top!=null&&(this.top=t.number(j.top,I.top,w)),I.bottom!=null&&j.bottom!=null&&(this.bottom=t.number(j.bottom,I.bottom,w)),I.left!=null&&j.left!=null&&(this.left=t.number(j.left,I.left,w)),I.right!=null&&j.right!=null&&(this.right=t.number(j.right,I.right,w)),this},Hs.prototype.getCenter=function(j,I){var w=t.clamp((this.left+j-this.right)/2,0,j),B=t.clamp((this.top+I-this.bottom)/2,0,I);return new t.Point(w,B)},Hs.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},Hs.prototype.clone=function(){return new Hs(this.top,this.bottom,this.left,this.right)},Hs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Da=function(I,w,B,D,G){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=G===void 0||G,this._minZoom=I||0,this._maxZoom=w||22,this._minPitch=B==null?0:B,this._maxPitch=D==null?60:D,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hs,this._posMatrixCache={},this._alignedPosMatrixCache={}},bo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Da.prototype.clone=function(){var j=new Da(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},bo.minZoom.get=function(){return this._minZoom},bo.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},bo.maxZoom.get=function(){return this._maxZoom},bo.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},bo.minPitch.get=function(){return this._minPitch},bo.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},bo.maxPitch.get=function(){return this._maxPitch},bo.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},bo.renderWorldCopies.get=function(){return this._renderWorldCopies},bo.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},bo.worldSize.get=function(){return this.tileSize*this.scale},bo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bo.size.get=function(){return new t.Point(this.width,this.height)},bo.bearing.get=function(){return-this.angle/Math.PI*180},bo.bearing.set=function(j){var I=-t.wrap(j,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bo.pitch.get=function(){return this._pitch/Math.PI*180},bo.pitch.set=function(j){var I=t.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},bo.fov.get=function(){return this._fov/Math.PI*180},bo.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},bo.zoom.get=function(){return this._zoom},bo.zoom.set=function(j){var I=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},bo.center.get=function(){return this._center},bo.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},bo.padding.get=function(){return this._edgeInsets.toJSON()},bo.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},bo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Da.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Da.prototype.interpolatePadding=function(j,I,w){this._unmodified=!1,this._edgeInsets.interpolate(j,I,w),this._constrain(),this._calcMatrices()},Da.prototype.coveringZoomLevel=function(j){var I=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,I)},Da.prototype.getVisibleUnwrappedCoordinates=function(j){var I=[new t.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new t.Point(0,0)),B=this.pointCoordinate(new t.Point(this.width,0)),D=this.pointCoordinate(new t.Point(this.width,this.height)),G=this.pointCoordinate(new t.Point(0,this.height)),$=Math.floor(Math.min(w.x,B.x,D.x,G.x)),st=Math.floor(Math.max(w.x,B.x,D.x,G.x)),Ct=$-1;Ct<=st+1;Ct++)Ct!==0&&I.push(new t.UnwrappedTileID(Ct,j));return I},Da.prototype.coveringTiles=function(j){var I=this.coveringZoomLevel(j),w=I;if(j.minzoom!==void 0&&I<j.minzoom)return[];j.maxzoom!==void 0&&I>j.maxzoom&&(I=j.maxzoom);var B=t.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,I),G=[D*B.x,D*B.y,0],$=pl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),st=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(st=I);var Ct=function(Ti){return{aabb:new fl([Ti*D,0,0],[(Ti+1)*D,D,0]),zoom:0,x:0,y:0,wrap:Ti,fullyVisible:!1}},wt=[],Ut=[],Yt=I,qt=j.reparseOverscaled?w:I;if(this._renderWorldCopies)for(var he=1;he<=3;he++)wt.push(Ct(-he)),wt.push(Ct(he));for(wt.push(Ct(0));wt.length>0;){var ye=wt.pop(),je=ye.x,Ie=ye.y,Ve=ye.fullyVisible;if(!Ve){var qe=ye.aabb.intersects($);if(qe===0)continue;Ve=qe===2}var sn=ye.aabb.distanceX(G),tr=ye.aabb.distanceY(G),kn=Math.max(Math.abs(sn),Math.abs(tr));if(ye.zoom===Yt||kn>3+(1<<Yt-ye.zoom)-2&&ye.zoom>=st)Ut.push({tileID:new t.OverscaledTileID(ye.zoom===Yt?qt:ye.zoom,ye.wrap,ye.zoom,je,Ie),distanceSq:t.sqrLen([G[0]-.5-je,G[1]-.5-Ie])});else for(var pr=0;pr<4;pr++){var Mr=(je<<1)+pr%2,$r=(Ie<<1)+(pr>>1);wt.push({aabb:ye.aabb.quadrant(pr),zoom:ye.zoom+1,x:Mr,y:$r,wrap:ye.wrap,fullyVisible:Ve})}}return Ut.sort(function(Yr,Ti){return Yr.distanceSq-Ti.distanceSq}).map(function(Yr){return Yr.tileID})},Da.prototype.resize=function(j,I){this.width=j,this.height=I,this.pixelsToGLUnits=[2/j,-2/I],this._constrain(),this._calcMatrices()},bo.unmodified.get=function(){return this._unmodified},Da.prototype.zoomScale=function(j){return Math.pow(2,j)},Da.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Da.prototype.project=function(j){var I=t.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(j.lng)*this.worldSize,t.mercatorYfromLat(I)*this.worldSize)},Da.prototype.unproject=function(j){return new t.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},bo.point.get=function(){return this.project(this.center)},Da.prototype.setLocationAtPoint=function(j,I){var w=this.pointCoordinate(I),B=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(j),G=new t.MercatorCoordinate(D.x-(w.x-B.x),D.y-(w.y-B.y));this.center=this.coordinateLocation(G),this._renderWorldCopies&&(this.center=this.center.wrap())},Da.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Da.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Da.prototype.locationCoordinate=function(j){return t.MercatorCoordinate.fromLngLat(j)},Da.prototype.coordinateLocation=function(j){return j.toLngLat()},Da.prototype.pointCoordinate=function(j){var I=[j.x,j.y,0,1],w=[j.x,j.y,1,1];t.transformMat4(I,I,this.pixelMatrixInverse),t.transformMat4(w,w,this.pixelMatrixInverse);var B=I[3],D=w[3],G=I[1]/B,$=w[1]/D,st=I[2]/B,Ct=w[2]/D,wt=st===Ct?0:(0-st)/(Ct-st);return new t.MercatorCoordinate(t.number(I[0]/B,w[0]/D,wt)/this.worldSize,t.number(G,$,wt)/this.worldSize)},Da.prototype.coordinatePoint=function(j){var I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix),new t.Point(I[0]/I[3],I[1]/I[3])},Da.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Da.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Da.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Da.prototype.calculatePosMatrix=function(j,I){I===void 0&&(I=!1);var w=j.key,B=I?this._alignedPosMatrixCache:this._posMatrixCache;if(B[w])return B[w];var D=j.canonical,G=this.worldSize/this.zoomScale(D.z),$=D.x+Math.pow(2,D.z)*j.wrap,st=t.identity(new Float64Array(16));return t.translate(st,st,[$*G,D.y*G,0]),t.scale(st,st,[G/t.EXTENT,G/t.EXTENT,1]),t.multiply(st,I?this.alignedProjMatrix:this.projMatrix,st),B[w]=new Float32Array(st),B[w]},Da.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Da.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,I,w,B,D=-90,G=90,$=-180,st=180,Ct=this.size,wt=this._unmodified;if(this.latRange){var Ut=this.latRange;D=t.mercatorYfromLat(Ut[1])*this.worldSize,j=(G=t.mercatorYfromLat(Ut[0])*this.worldSize)-D<Ct.y?Ct.y/(G-D):0}if(this.lngRange){var Yt=this.lngRange;$=t.mercatorXfromLng(Yt[0])*this.worldSize,I=(st=t.mercatorXfromLng(Yt[1])*this.worldSize)-$<Ct.x?Ct.x/(st-$):0}var qt=this.point,he=Math.max(I||0,j||0);if(he)return this.center=this.unproject(new t.Point(I?(st+$)/2:qt.x,j?(G+D)/2:qt.y)),this.zoom+=this.scaleZoom(he),this._unmodified=wt,void(this._constraining=!1);if(this.latRange){var ye=qt.y,je=Ct.y/2;ye-je<D&&(B=D+je),ye+je>G&&(B=G-je)}if(this.lngRange){var Ie=qt.x,Ve=Ct.x/2;Ie-Ve<$&&(w=$+Ve),Ie+Ve>st&&(w=st-Ve)}w===void 0&&B===void 0||(this.center=this.unproject(new t.Point(w!==void 0?w:qt.x,B!==void 0?B:qt.y))),this._unmodified=wt,this._constraining=!1}},Da.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,w=this._fov*(.5+j.y/this.height),B=Math.sin(w)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-I-w,.01,Math.PI-.01)),D=this.point,G=D.x,$=D.y,st=1.01*(Math.cos(Math.PI/2-this._pitch)*B+this.cameraToCenterDistance),Ct=this.height/50,wt=new Float64Array(16);t.perspective(wt,this._fov,this.width/this.height,Ct,st),wt[8]=2*-j.x/this.width,wt[9]=2*j.y/this.height,t.scale(wt,wt,[1,-1,1]),t.translate(wt,wt,[0,0,-this.cameraToCenterDistance]),t.rotateX(wt,wt,this._pitch),t.rotateZ(wt,wt,this.angle),t.translate(wt,wt,[-G,-$,0]),this.mercatorMatrix=t.scale([],wt,[this.worldSize,this.worldSize,this.worldSize]),t.scale(wt,wt,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=wt,this.invProjMatrix=t.invert([],this.projMatrix);var Ut=this.width%2/2,Yt=this.height%2/2,qt=Math.cos(this.angle),he=Math.sin(this.angle),ye=G-Math.round(G)+qt*Ut+he*Yt,je=$-Math.round($)+qt*Yt+he*Ut,Ie=new Float64Array(wt);if(t.translate(Ie,Ie,[ye>.5?ye-1:ye,je>.5?je-1:je,0]),this.alignedProjMatrix=Ie,wt=t.create(),t.scale(wt,wt,[this.width/2,-this.height/2,1]),t.translate(wt,wt,[1,-1,0]),this.labelPlaneMatrix=wt,wt=t.create(),t.scale(wt,wt,[1,-1,1]),t.translate(wt,wt,[-1,-1,0]),t.scale(wt,wt,[2/this.width,2/this.height,1]),this.glCoordMatrix=wt,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(wt=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=wt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Da.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new t.Point(0,0)),I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},Da.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,j))},Da.prototype.getCameraQueryGeometry=function(j){var I=this.getCameraPoint();if(j.length===1)return[j[0],I];for(var w=I.x,B=I.y,D=I.x,G=I.y,$=0,st=j;$<st.length;$+=1){var Ct=st[$];w=Math.min(w,Ct.x),B=Math.min(B,Ct.y),D=Math.max(D,Ct.x),G=Math.max(G,Ct.y)}return[new t.Point(w,B),new t.Point(D,B),new t.Point(D,G),new t.Point(w,G),new t.Point(w,B)]},Object.defineProperties(Da.prototype,bo);var ks=function(I){var w,B,D,G;this._hashName=I&&encodeURIComponent(I),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(w=this._updateHashUnthrottled.bind(this),B=!1,D=null,G=function(){D=null,B&&(w(),D=setTimeout(G,300),B=!1)},function(){return B=!0,D||G(),D})};ks.prototype.addTo=function(j){return this._map=j,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ks.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ks.prototype.getHashString=function(j){var I=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,B=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,B),G=Math.round(I.lng*D)/D,$=Math.round(I.lat*D)/D,st=this._map.getBearing(),Ct=this._map.getPitch(),wt="";if(wt+=j?"/"+G+"/"+$+"/"+w:w+"/"+$+"/"+G,(st||Ct)&&(wt+="/"+Math.round(10*st)/10),Ct&&(wt+="/"+Math.round(Ct)),this._hashName){var Ut=this._hashName,Yt=!1,qt=t.window.location.hash.slice(1).split("&").map(function(he){var ye=he.split("=")[0];return ye===Ut?(Yt=!0,ye+"="+wt):he}).filter(function(he){return he});return Yt||qt.push(Ut+"="+wt),"#"+qt.join("&")}return"#"+wt},ks.prototype._getCurrentHash=function(){var j,I=this,w=t.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(B){return B.split("=")}).forEach(function(B){B[0]===I._hashName&&(j=B)}),(j&&j[1]||"").split("/")):w.split("/")},ks.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(w){return isNaN(w)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:I,pitch:+(j[4]||0)}),!0}return!1},ks.prototype._updateHashUnthrottled=function(){var j=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,j)}catch(I){}};var gl={linearity:.3,easing:t.bezier(0,0,.3,1)},nl=t.extend({deceleration:2500,maxSpeed:1400},gl),Yu=t.extend({deceleration:20,maxSpeed:1400},gl),dc=t.extend({deceleration:1e3,maxSpeed:360},gl),As=t.extend({deceleration:1e3,maxSpeed:90},gl),rl=function(I){this._map=I,this.clear()};function lu(j,I){(!j.duration||j.duration<I.duration)&&(j.duration=I.duration,j.easing=I.easing)}function Ys(j,I,w){var B=w.maxSpeed,D=w.linearity,G=w.deceleration,$=t.clamp(j*D/(I/1e3),-B,B),st=Math.abs($)/(G*D);return{easing:w.easing,duration:1e3*st,amount:$*(st/2)}}rl.prototype.clear=function(){this._inertiaBuffer=[]},rl.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:j})},rl.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,I=t.browser.now();j.length>0&&I-j[0].time>160;)j.shift()},rl.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},w=0,B=this._inertiaBuffer;w<B.length;w+=1){var D=B[w].settings;I.zoom+=D.zoomDelta||0,I.bearing+=D.bearingDelta||0,I.pitch+=D.pitchDelta||0,D.panDelta&&I.pan._add(D.panDelta),D.around&&(I.around=D.around),D.pinchAround&&(I.pinchAround=D.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,$={};if(I.pan.mag()){var st=Ys(I.pan.mag(),G,t.extend({},nl,j||{}));$.offset=I.pan.mult(st.amount/I.pan.mag()),$.center=this._map.transform.center,lu($,st)}if(I.zoom){var Ct=Ys(I.zoom,G,Yu);$.zoom=this._map.transform.zoom+Ct.amount,lu($,Ct)}if(I.bearing){var wt=Ys(I.bearing,G,dc);$.bearing=this._map.transform.bearing+t.clamp(wt.amount,-179,179),lu($,wt)}if(I.pitch){var Ut=Ys(I.pitch,G,As);$.pitch=this._map.transform.pitch+Ut.amount,lu($,Ut)}if($.zoom||$.bearing){var Yt=I.pinchAround===void 0?I.around:I.pinchAround;$.around=Yt?this._map.unproject(Yt):this._map.getCenter()}return this.clear(),t.extend($,{noMoveStart:!0})}};var $o=function(j){function I(B,D,G,$){$===void 0&&($={});var st=s.mousePos(D.getCanvasContainer(),G),Ct=D.unproject(st);j.call(this,B,t.extend({point:st,lngLat:Ct,originalEvent:G},$)),this._defaultPrevented=!1,this.target=D}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),eu=function(j){function I(B,D,G){var $=B==="touchend"?G.changedTouches:G.touches,st=s.touchPos(D.getCanvasContainer(),$),Ct=st.map(function(Yt){return D.unproject(Yt)}),wt=st.reduce(function(Yt,qt,he,ye){return Yt.add(qt.div(ye.length))},new t.Point(0,0)),Ut=D.unproject(wt);j.call(this,B,{points:st,point:wt,lngLats:Ct,lngLat:Ut,originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),Ru=function(j){function I(B,D,G){j.call(this,B,{originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),Qo=function(I,w){this._map=I,this._clickTolerance=w.clickTolerance};Qo.prototype.reset=function(){delete this._mousedownPos},Qo.prototype.wheel=function(j){return this._firePreventable(new Ru(j.type,this._map,j))},Qo.prototype.mousedown=function(j,I){return this._mousedownPos=I,this._firePreventable(new $o(j.type,this._map,j))},Qo.prototype.mouseup=function(j){this._map.fire(new $o(j.type,this._map,j))},Qo.prototype.click=function(j,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new $o(j.type,this._map,j))},Qo.prototype.dblclick=function(j){return this._firePreventable(new $o(j.type,this._map,j))},Qo.prototype.mouseover=function(j){this._map.fire(new $o(j.type,this._map,j))},Qo.prototype.mouseout=function(j){this._map.fire(new $o(j.type,this._map,j))},Qo.prototype.touchstart=function(j){return this._firePreventable(new eu(j.type,this._map,j))},Qo.prototype.touchmove=function(j){this._map.fire(new eu(j.type,this._map,j))},Qo.prototype.touchend=function(j){this._map.fire(new eu(j.type,this._map,j))},Qo.prototype.touchcancel=function(j){this._map.fire(new eu(j.type,this._map,j))},Qo.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},Qo.prototype.isEnabled=function(){return!0},Qo.prototype.isActive=function(){return!1},Qo.prototype.enable=function(){},Qo.prototype.disable=function(){};var Wi=function(I){this._map=I};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(j){this._map.fire(new $o(j.type,this._map,j))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $o("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new $o(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var Cs=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._container=I.getContainer(),this._clickTolerance=w.clickTolerance||1};function Zu(j,I){for(var w={},B=0;B<j.length;B++)w[j[B].identifier]=I[B];return w}Cs.prototype.isEnabled=function(){return!!this._enabled},Cs.prototype.isActive=function(){return!!this._active},Cs.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Cs.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Cs.prototype.mousedown=function(j,I){this.isEnabled()&&j.shiftKey&&j.button===0&&(s.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},Cs.prototype.mousemoveWindow=function(j,I){if(this._active){var w=I;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var B=this._startPos;this._lastPos=w,this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var D=Math.min(B.x,w.x),G=Math.max(B.x,w.x),$=Math.min(B.y,w.y),st=Math.max(B.y,w.y);s.setTransform(this._box,"translate("+D+"px,"+$+"px)"),this._box.style.width=G-D+"px",this._box.style.height=st-$+"px"}}},Cs.prototype.mouseupWindow=function(j,I){var w=this;if(this._active&&j.button===0){var B=this._startPos,D=I;if(this.reset(),s.suppressClick(),B.x!==D.x||B.y!==D.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function($){return $.fitScreenCoordinates(B,D,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},Cs.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},Cs.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos},Cs.prototype._fireEvent=function(j,I){return this._map.fire(new t.Event(j,{originalEvent:I}))};var Du=function(I){this.reset(),this.numTouches=I.numTouches};Du.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Du.prototype.touchstart=function(j,I,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),w.length===this.numTouches&&(this.centroid=function(B){for(var D=new t.Point(0,0),G=0,$=B;G<$.length;G+=1)D._add($[G]);return D.div(B.length)}(I),this.touches=Zu(w,I)))},Du.prototype.touchmove=function(j,I,w){if(!this.aborted&&this.centroid){var B=Zu(w,I);for(var D in this.touches){var G=B[D];(!G||G.dist(this.touches[D])>30)&&(this.aborted=!0)}}},Du.prototype.touchend=function(j,I,w){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var B=!this.aborted&&this.centroid;if(this.reset(),B)return B}};var jo=function(I){this.singleTap=new Du(I),this.numTaps=I.numTaps,this.reset()};jo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},jo.prototype.touchstart=function(j,I,w){this.singleTap.touchstart(j,I,w)},jo.prototype.touchmove=function(j,I,w){this.singleTap.touchmove(j,I,w)},jo.prototype.touchend=function(j,I,w){var B=this.singleTap.touchend(j,I,w);if(B){var D=j.timeStamp-this.lastTime<500,G=!this.lastTap||this.lastTap.dist(B)<30;if(D&&G||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}};var Bo=function(){this._zoomIn=new jo({numTouches:1,numTaps:2}),this._zoomOut=new jo({numTouches:2,numTaps:1}),this.reset()};Bo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Bo.prototype.touchstart=function(j,I,w){this._zoomIn.touchstart(j,I,w),this._zoomOut.touchstart(j,I,w)},Bo.prototype.touchmove=function(j,I,w){this._zoomIn.touchmove(j,I,w),this._zoomOut.touchmove(j,I,w)},Bo.prototype.touchend=function(j,I,w){var B=this,D=this._zoomIn.touchend(j,I,w),G=this._zoomOut.touchend(j,I,w);return D?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()+1,around:st.unproject(D)},{originalEvent:j})}}):G?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()-1,around:st.unproject(G)},{originalEvent:j})}}):void 0},Bo.prototype.touchcancel=function(){this.reset()},Bo.prototype.enable=function(){this._enabled=!0},Bo.prototype.disable=function(){this._enabled=!1,this.reset()},Bo.prototype.isEnabled=function(){return this._enabled},Bo.prototype.isActive=function(){return this._active};var Tu={0:1,2:2},Mi=function(I){this.reset(),this._clickTolerance=I.clickTolerance||1};Mi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Mi.prototype._correctButton=function(j,I){return!1},Mi.prototype._move=function(j,I){return{}},Mi.prototype.mousedown=function(j,I){if(!this._lastPoint){var w=s.mouseButton(j);this._correctButton(j,w)&&(this._lastPoint=I,this._eventButton=w)}},Mi.prototype.mousemoveWindow=function(j,I){var w=this._lastPoint;if(w){if(j.preventDefault(),function(B,D){var G=Tu[D];return B.buttons===void 0||(B.buttons&G)!==G}(j,this._eventButton))this.reset();else if(this._moved||!(I.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(w,I)}},Mi.prototype.mouseupWindow=function(j){this._lastPoint&&s.mouseButton(j)===this._eventButton&&(this._moved&&s.suppressClick(),this.reset())},Mi.prototype.enable=function(){this._enabled=!0},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};var il=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.mousedown=function(w,B){j.prototype.mousedown.call(this,w,B),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(w,B){return B===0&&!w.ctrlKey},I.prototype._move=function(w,B){return{around:B,panDelta:B.sub(w)}},I}(Mi),ju=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=.8*(B.x-w.x);if(D)return this._active=!0,{bearingDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),Bu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=-.5*(B.y-w.y);if(D)return this._active=!0,{pitchDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),nu=function(I){this._minTouches=1,this._clickTolerance=I.clickTolerance||1,this.reset()};nu.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},nu.prototype.touchstart=function(j,I,w){return this._calculateTransform(j,I,w)},nu.prototype.touchmove=function(j,I,w){if(this._active&&!(w.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,I,w)},nu.prototype.touchend=function(j,I,w){this._calculateTransform(j,I,w),this._active&&w.length<this._minTouches&&this.reset()},nu.prototype.touchcancel=function(){this.reset()},nu.prototype._calculateTransform=function(j,I,w){w.length>0&&(this._active=!0);var B=Zu(w,I),D=new t.Point(0,0),G=new t.Point(0,0),$=0;for(var st in B){var Ct=B[st],wt=this._touches[st];wt&&(D._add(Ct),G._add(Ct.sub(wt)),$++,B[st]=Ct)}if(this._touches=B,!($<this._minTouches)&&G.mag()){var Ut=G.div($);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:D.div($),panDelta:Ut}}},nu.prototype.enable=function(){this._enabled=!0},nu.prototype.disable=function(){this._enabled=!1,this.reset()},nu.prototype.isEnabled=function(){return this._enabled},nu.prototype.isActive=function(){return this._active};var we=function(){this.reset()};function Pe(j,I,w){for(var B=0;B<j.length;B++)if(j[B].identifier===w)return I[B]}function dn(j,I){return Math.log(j/I)/Math.LN2}we.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},we.prototype._start=function(j){},we.prototype._move=function(j,I,w){return{}},we.prototype.touchstart=function(j,I,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([I[0],I[1]]))},we.prototype.touchmove=function(j,I,w){if(this._firstTwoTouches){j.preventDefault();var B=this._firstTwoTouches,D=B[1],G=Pe(w,I,B[0]),$=Pe(w,I,D);if(G&&$){var st=this._aroundCenter?null:G.add($).div(2);return this._move([G,$],st,j)}}},we.prototype.touchend=function(j,I,w){if(this._firstTwoTouches){var B=this._firstTwoTouches,D=B[1],G=Pe(w,I,B[0]),$=Pe(w,I,D);G&&$||(this._active&&s.suppressClick(),this.reset())}},we.prototype.touchcancel=function(){this.reset()},we.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},we.prototype.disable=function(){this._enabled=!1,this.reset()},we.prototype.isEnabled=function(){return this._enabled},we.prototype.isActive=function(){return this._active};var tn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(dn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:dn(this._distance,D),pinchAround:B}},I}(we);function wn(j,I){return 180*j.angleWith(I)/Math.PI}var dr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wn(this._vector,D),pinchAround:B}},I.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var B=25/(Math.PI*this._minDiameter)*360,D=wn(w,this._startVector);return Math.abs(D)<B},I}(we);function Rr(j){return Math.abs(j.y)>Math.abs(j.x)}var Xr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(w){this._lastPoints=w,Rr(w[0].sub(w[1]))&&(this._valid=!1)},I.prototype._move=function(w,B,D){var G=w[0].sub(this._lastPoints[0]),$=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(G,$,D.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(G.y+$.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(w,B,D){if(this._valid!==void 0)return this._valid;var G=w.mag()>=2,$=B.mag()>=2;if(G||$){if(!G||!$)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;var st=w.y>0==B.y>0;return Rr(w)&&Rr(B)&&st}},I}(we),ti={panStep:100,bearingStep:15,pitchStep:10},Fr=function(){var I=ti;this._panStep=I.panStep,this._bearingStep=I.bearingStep,this._pitchStep=I.pitchStep,this._rotationDisabled=!1};function li(j){return j*(2-j)}Fr.prototype.reset=function(){this._active=!1},Fr.prototype.keydown=function(j){var I=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var w=0,B=0,D=0,G=0,$=0;switch(j.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:j.shiftKey?B=-1:(j.preventDefault(),G=-1);break;case 39:j.shiftKey?B=1:(j.preventDefault(),G=1);break;case 38:j.shiftKey?D=1:(j.preventDefault(),$=-1);break;case 40:j.shiftKey?D=-1:(j.preventDefault(),$=1);break;default:return}return this._rotationDisabled&&(B=0,D=0),{cameraAnimation:function(Ct){var wt=Ct.getZoom();Ct.easeTo({duration:300,easeId:"keyboardHandler",easing:li,zoom:w?Math.round(wt)+w*(j.shiftKey?2:1):wt,bearing:Ct.getBearing()+B*I._bearingStep,pitch:Ct.getPitch()+D*I._pitchStep,offset:[-G*I._panStep,-$*I._panStep],center:Ct.getCenter()},{originalEvent:j})}}}},Fr.prototype.enable=function(){this._enabled=!0},Fr.prototype.disable=function(){this._enabled=!1,this.reset()},Fr.prototype.isEnabled=function(){return this._enabled},Fr.prototype.isActive=function(){return this._active},Fr.prototype.disableRotation=function(){this._rotationDisabled=!0},Fr.prototype.enableRotation=function(){this._rotationDisabled=!1};var yr=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};yr.prototype.setZoomRate=function(j){this._defaultZoomRate=j},yr.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},yr.prototype.isEnabled=function(){return!!this._enabled},yr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},yr.prototype.isZooming=function(){return!!this._zooming},yr.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},yr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yr.prototype.wheel=function(j){if(this.isEnabled()){var I=j.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,w=t.browser.now(),B=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(B*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),j.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=j,this._delta-=I,this._active||this._start(j)),j.preventDefault()}},yr.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},yr.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=s.mousePos(this._el,j);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},yr.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&B!==0&&(B=1/B);var D=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(D*B))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var G,$=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,st=this._startZoom,Ct=this._easing,wt=!1;if(this._type==="wheel"&&st&&Ct){var Ut=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Yt=Ct(Ut);G=t.number(st,$,Yt),Ut<1?this._frameId||(this._frameId=!0):wt=!0}else G=$,wt=!0;return this._active=!0,wt&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!wt,zoomDelta:G-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},yr.prototype._smoothOutEasing=function(j){var I=t.ease;if(this._prevEase){var w=this._prevEase,B=(t.browser.now()-w.start)/w.duration,D=w.easing(B+.01)-w.easing(B),G=.27/Math.sqrt(D*D+1e-4)*.01,$=Math.sqrt(.0729-G*G);I=t.bezier(G,$,.25,1)}return this._prevEase={start:t.browser.now(),duration:j,easing:I},I},yr.prototype.reset=function(){this._active=!1};var Zt=function(I,w){this._clickZoom=I,this._tapZoom=w};Zt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Zt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Zt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Zt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var te=function(){this.reset()};te.prototype.reset=function(){this._active=!1},te.prototype.dblclick=function(j,I){return j.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(j.shiftKey?-1:1),around:B.unproject(I)},{originalEvent:j})}}},te.prototype.enable=function(){this._enabled=!0},te.prototype.disable=function(){this._enabled=!1,this.reset()},te.prototype.isEnabled=function(){return this._enabled},te.prototype.isActive=function(){return this._active};var Le=function(){this._tap=new jo({numTouches:1,numTaps:1}),this.reset()};Le.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Le.prototype.touchstart=function(j,I,w){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=I[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(j,I,w))},Le.prototype.touchmove=function(j,I,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var B=I[0],D=B.y-this._swipePoint.y;return this._swipePoint=B,j.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(j,I,w)},Le.prototype.touchend=function(j,I,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(j,I,w)&&(this._tapTime=j.timeStamp)},Le.prototype.touchcancel=function(){this.reset()},Le.prototype.enable=function(){this._enabled=!0},Le.prototype.disable=function(){this._enabled=!1,this.reset()},Le.prototype.isEnabled=function(){return this._enabled},Le.prototype.isActive=function(){return this._active};var Se=function(I,w,B){this._el=I,this._mousePan=w,this._touchPan=B};Se.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Se.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Se.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Se.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Dt=function(I,w,B){this._pitchWithRotate=I.pitchWithRotate,this._mouseRotate=w,this._mousePitch=B};Dt.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Dt.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Dt.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Dt.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zt=function(I,w,B,D){this._el=I,this._touchZoom=w,this._touchRotate=B,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};zt.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zt.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zt.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zt.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zt.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zt.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var se=function(I){return I.zoom||I.drag||I.pitch||I.rotate},re=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I}(t.Event);function fe(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Fe=function(I,w){this._map=I,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rl(I),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),t.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!0}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[t.window,"blur",void 0]];for(var D=0,G=this._listeners;D<G.length;D+=1){var $=G[D],st=$[0];s.addEventListener(st,$[1],st===t.window.document?this.handleWindowEvent:this.handleEvent,$[2])}};Fe.prototype.destroy=function(){for(var j=0,I=this._listeners;j<I.length;j+=1){var w=I[j],B=w[0];s.removeEventListener(B,w[1],B===t.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},Fe.prototype._addDefaultHandlers=function(j){var I=this._map,w=I.getCanvasContainer();this._add("mapEvent",new Qo(I,j));var B=I.boxZoom=new Cs(I,j);this._add("boxZoom",B);var D=new Bo,G=new te;I.doubleClickZoom=new Zt(G,D),this._add("tapZoom",D),this._add("clickZoom",G);var $=new Le;this._add("tapDragZoom",$);var st=I.touchPitch=new Xr;this._add("touchPitch",st);var Ct=new ju(j),wt=new Bu(j);I.dragRotate=new Dt(j,Ct,wt),this._add("mouseRotate",Ct,["mousePitch"]),this._add("mousePitch",wt,["mouseRotate"]);var Ut=new il(j),Yt=new nu(j);I.dragPan=new Se(w,Ut,Yt),this._add("mousePan",Ut),this._add("touchPan",Yt,["touchZoom","touchRotate"]);var qt=new dr,he=new tn;I.touchZoomRotate=new zt(w,he,qt,$),this._add("touchRotate",qt,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]);var ye=I.scrollZoom=new yr(I,this);this._add("scrollZoom",ye,["mousePan"]);var je=I.keyboard=new Fr;this._add("keyboard",je),this._add("blockableMapEvent",new Wi(I));for(var Ie=0,Ve=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ie<Ve.length;Ie+=1){var qe=Ve[Ie];j.interactive&&j[qe]&&I[qe].enable(j[qe])}},Fe.prototype._add=function(j,I,w){this._handlers.push({handlerName:j,handler:I,allowed:w}),this._handlersById[j]=I},Fe.prototype.stop=function(j){if(!this._updatingCamera){for(var I=0,w=this._handlers;I<w.length;I+=1)w[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Fe.prototype.isActive=function(){for(var j=0,I=this._handlers;j<I.length;j+=1)if(I[j].handler.isActive())return!0;return!1},Fe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fe.prototype.isMoving=function(){return Boolean(se(this._eventsInProgress))||this.isZooming()},Fe.prototype._blockedByActive=function(j,I,w){for(var B in j)if(B!==w&&(!I||I.indexOf(B)<0))return!0;return!1},Fe.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Fe.prototype._getMapTouches=function(j){for(var I=[],w=0,B=j;w<B.length;w+=1){var D=B[w];this._el.contains(D.target)&&I.push(D)}return I},Fe.prototype.handleEvent=function(j,I){if(j.type!=="blur"){this._updatingCamera=!0;for(var w=j.type==="renderFrame"?void 0:j,B={needsRenderFrame:!1},D={},G={},$=j.touches?this._getMapTouches(j.touches):void 0,st=$?s.touchPos(this._el,$):s.mousePos(this._el,j),Ct=0,wt=this._handlers;Ct<wt.length;Ct+=1){var Ut=wt[Ct],Yt=Ut.handlerName,qt=Ut.handler,he=Ut.allowed;if(qt.isEnabled()){var ye=void 0;this._blockedByActive(G,he,Yt)?qt.reset():qt[I||j.type]&&(ye=qt[I||j.type](j,st,$),this.mergeHandlerResult(B,D,ye,Yt,w),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||qt.isActive())&&(G[Yt]=qt)}}var je={};for(var Ie in this._previousActiveHandlers)G[Ie]||(je[Ie]=w);this._previousActiveHandlers=G,(Object.keys(je).length||fe(B))&&(this._changes.push([B,D,je]),this._triggerRenderFrame()),(Object.keys(G).length||fe(B))&&this._map._stop(!0),this._updatingCamera=!1;var Ve=B.cameraAnimation;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))}else this.stop(!0)},Fe.prototype.mergeHandlerResult=function(j,I,w,B,D){if(w){t.extend(j,w);var G={handlerName:B,originalEvent:w.originalEvent||D};w.zoomDelta!==void 0&&(I.zoom=G),w.panDelta!==void 0&&(I.drag=G),w.pitchDelta!==void 0&&(I.pitch=G),w.bearingDelta!==void 0&&(I.rotate=G)}},Fe.prototype._applyChanges=function(){for(var j={},I={},w={},B=0,D=this._changes;B<D.length;B+=1){var G=D[B],$=G[0],st=G[1],Ct=G[2];$.panDelta&&(j.panDelta=(j.panDelta||new t.Point(0,0))._add($.panDelta)),$.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+$.zoomDelta),$.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+$.bearingDelta),$.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+$.pitchDelta),$.around!==void 0&&(j.around=$.around),$.pinchAround!==void 0&&(j.pinchAround=$.pinchAround),$.noInertia&&(j.noInertia=$.noInertia),t.extend(I,st),t.extend(w,Ct)}this._updateMapTransform(j,I,w),this._changes=[]},Fe.prototype._updateMapTransform=function(j,I,w){var B=this._map,D=B.transform;if(!fe(j))return this._fireEvents(I,w,!0);var G=j.panDelta,$=j.zoomDelta,st=j.bearingDelta,Ct=j.pitchDelta,wt=j.around,Ut=j.pinchAround;Ut!==void 0&&(wt=Ut),B._stop(!0),wt=wt||B.transform.centerPoint;var Yt=D.pointLocation(G?wt.sub(G):wt);st&&(D.bearing+=st),Ct&&(D.pitch+=Ct),$&&(D.zoom+=$),D.setLocationAtPoint(Yt,wt),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(I,w,!0)},Fe.prototype._fireEvents=function(j,I,w){var B=this,D=se(this._eventsInProgress),G=se(j),$={};for(var st in j)this._eventsInProgress[st]||($[st+"start"]=j[st].originalEvent),this._eventsInProgress[st]=j[st];for(var Ct in!D&&G&&this._fireEvent("movestart",G.originalEvent),$)this._fireEvent(Ct,$[Ct]);for(var wt in G&&this._fireEvent("move",G.originalEvent),j)this._fireEvent(wt,j[wt].originalEvent);var Ut,Yt={};for(var qt in this._eventsInProgress){var he=this._eventsInProgress[qt],ye=he.handlerName,je=he.originalEvent;this._handlersById[ye].isActive()||(delete this._eventsInProgress[qt],Yt[qt+"end"]=Ut=I[ye]||je)}for(var Ie in Yt)this._fireEvent(Ie,Yt[Ie]);var Ve=se(this._eventsInProgress);if(w&&(D||G)&&!Ve){this._updatingCamera=!0;var qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),sn=function(kn){return kn!==0&&-B._bearingSnap<kn&&kn<B._bearingSnap};qe?(sn(qe.bearing||this._map.getBearing())&&(qe.bearing=0),this._map.easeTo(qe,{originalEvent:Ut})):(this._map.fire(new t.Event("moveend",{originalEvent:Ut})),sn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Fe.prototype._fireEvent=function(j,I){this._map.fire(new t.Event(j,I?{originalEvent:I}:{}))},Fe.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete j._frameId,j.handleEvent(new re("renderFrame",{timeStamp:I})),j._applyChanges()})},Fe.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ke=function(j){function I(w,B){j.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=B.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(w,B){return this.jumpTo({center:w},B)},I.prototype.panBy=function(w,B,D){return w=t.Point.convert(w).mult(-1),this.panTo(this.transform.center,t.extend({offset:w},B),D)},I.prototype.panTo=function(w,B,D){return this.easeTo(t.extend({center:w},B),D)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(w,B){return this.jumpTo({zoom:w},B),this},I.prototype.zoomTo=function(w,B,D){return this.easeTo(t.extend({zoom:w},B),D)},I.prototype.zoomIn=function(w,B){return this.zoomTo(this.getZoom()+1,w,B),this},I.prototype.zoomOut=function(w,B){return this.zoomTo(this.getZoom()-1,w,B),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(w,B){return this.jumpTo({bearing:w},B),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(w,B){return this.jumpTo({padding:w},B),this},I.prototype.rotateTo=function(w,B,D){return this.easeTo(t.extend({bearing:w},B),D)},I.prototype.resetNorth=function(w,B){return this.rotateTo(0,t.extend({duration:1e3},w),B),this},I.prototype.resetNorthPitch=function(w,B){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},w),B),this},I.prototype.snapToNorth=function(w,B){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,B):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(w,B){return this.jumpTo({pitch:w},B),this},I.prototype.cameraForBounds=function(w,B){w=t.LngLatBounds.convert(w);var D=B&&B.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),D,B)},I.prototype._cameraForBoxAndBearing=function(w,B,D,G){var $={top:0,bottom:0,right:0,left:0};if(typeof(G=t.extend({padding:$,offset:[0,0],maxZoom:this.transform.maxZoom},G)).padding=="number"){var st=G.padding;G.padding={top:st,bottom:st,right:st,left:st}}G.padding=t.extend($,G.padding);var Ct=this.transform,wt=Ct.padding,Ut=Ct.project(t.LngLat.convert(w)),Yt=Ct.project(t.LngLat.convert(B)),qt=Ut.rotate(-D*Math.PI/180),he=Yt.rotate(-D*Math.PI/180),ye=new t.Point(Math.max(qt.x,he.x),Math.max(qt.y,he.y)),je=new t.Point(Math.min(qt.x,he.x),Math.min(qt.y,he.y)),Ie=ye.sub(je),Ve=(Ct.width-(wt.left+wt.right+G.padding.left+G.padding.right))/Ie.x,qe=(Ct.height-(wt.top+wt.bottom+G.padding.top+G.padding.bottom))/Ie.y;if(!(qe<0||Ve<0)){var sn=Math.min(Ct.scaleZoom(Ct.scale*Math.min(Ve,qe)),G.maxZoom),tr=typeof G.offset.x=="number"?new t.Point(G.offset.x,G.offset.y):t.Point.convert(G.offset),kn=new t.Point((G.padding.left-G.padding.right)/2,(G.padding.top-G.padding.bottom)/2).rotate(D*Math.PI/180),pr=tr.add(kn).mult(Ct.scale/Ct.zoomScale(sn));return{center:Ct.unproject(Ut.add(Yt).div(2).sub(pr)),zoom:sn,bearing:D}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(w,B,D){return this._fitInternal(this.cameraForBounds(w,B),B,D)},I.prototype.fitScreenCoordinates=function(w,B,D,G,$){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(w)),this.transform.pointLocation(t.Point.convert(B)),D,G),G,$)},I.prototype._fitInternal=function(w,B,D){return w?(delete(B=t.extend(w,B)).padding,B.linear?this.easeTo(B,D):this.flyTo(B,D)):this},I.prototype.jumpTo=function(w,B){this.stop();var D=this.transform,G=!1,$=!1,st=!1;return"zoom"in w&&D.zoom!==+w.zoom&&(G=!0,D.zoom=+w.zoom),w.center!==void 0&&(D.center=t.LngLat.convert(w.center)),"bearing"in w&&D.bearing!==+w.bearing&&($=!0,D.bearing=+w.bearing),"pitch"in w&&D.pitch!==+w.pitch&&(st=!0,D.pitch=+w.pitch),w.padding==null||D.isPaddingEqual(w.padding)||(D.padding=w.padding),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B)),G&&this.fire(new t.Event("zoomstart",B)).fire(new t.Event("zoom",B)).fire(new t.Event("zoomend",B)),$&&this.fire(new t.Event("rotatestart",B)).fire(new t.Event("rotate",B)).fire(new t.Event("rotateend",B)),st&&this.fire(new t.Event("pitchstart",B)).fire(new t.Event("pitch",B)).fire(new t.Event("pitchend",B)),this.fire(new t.Event("moveend",B))},I.prototype.easeTo=function(w,B){var D=this;this._stop(!1,w.easeId),((w=t.extend({offset:[0,0],duration:500,easing:t.ease},w)).animate===!1||!w.essential&&t.browser.prefersReducedMotion)&&(w.duration=0);var G=this.transform,$=this.getZoom(),st=this.getBearing(),Ct=this.getPitch(),wt=this.getPadding(),Ut="zoom"in w?+w.zoom:$,Yt="bearing"in w?this._normalizeBearing(w.bearing,st):st,qt="pitch"in w?+w.pitch:Ct,he="padding"in w?w.padding:G.padding,ye=t.Point.convert(w.offset),je=G.centerPoint.add(ye),Ie=G.pointLocation(je),Ve=t.LngLat.convert(w.center||Ie);this._normalizeCenter(Ve);var qe,sn,tr=G.project(Ie),kn=G.project(Ve).sub(tr),pr=G.zoomScale(Ut-$);w.around&&(qe=t.LngLat.convert(w.around),sn=G.locationPoint(qe));var Mr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==$,this._rotating=this._rotating||st!==Yt,this._pitching=this._pitching||qt!==Ct,this._padding=!G.isPaddingEqual(he),this._easeId=w.easeId,this._prepareEase(B,w.noMoveStart,Mr),this._ease(function($r){if(D._zooming&&(G.zoom=t.number($,Ut,$r)),D._rotating&&(G.bearing=t.number(st,Yt,$r)),D._pitching&&(G.pitch=t.number(Ct,qt,$r)),D._padding&&(G.interpolatePadding(wt,he,$r),je=G.centerPoint.add(ye)),qe)G.setLocationAtPoint(qe,sn);else{var Yr=G.zoomScale(G.zoom-$),Ti=Ut>$?Math.min(2,pr):Math.max(.5,pr),Li=Math.pow(Ti,1-$r),Ki=G.unproject(tr.add(kn.mult($r*Li)).mult(Yr));G.setLocationAtPoint(G.renderWorldCopies?Ki.wrap():Ki,je)}D._fireMoveEvents(B)},function($r){D._afterEase(B,$r)},w),this},I.prototype._prepareEase=function(w,B,D){D===void 0&&(D={}),this._moving=!0,B||D.moving||this.fire(new t.Event("movestart",w)),this._zooming&&!D.zooming&&this.fire(new t.Event("zoomstart",w)),this._rotating&&!D.rotating&&this.fire(new t.Event("rotatestart",w)),this._pitching&&!D.pitching&&this.fire(new t.Event("pitchstart",w))},I.prototype._fireMoveEvents=function(w){this.fire(new t.Event("move",w)),this._zooming&&this.fire(new t.Event("zoom",w)),this._rotating&&this.fire(new t.Event("rotate",w)),this._pitching&&this.fire(new t.Event("pitch",w))},I.prototype._afterEase=function(w,B){if(!this._easeId||!B||this._easeId!==B){delete this._easeId;var D=this._zooming,G=this._rotating,$=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new t.Event("zoomend",w)),G&&this.fire(new t.Event("rotateend",w)),$&&this.fire(new t.Event("pitchend",w)),this.fire(new t.Event("moveend",w))}},I.prototype.flyTo=function(w,B){var D=this;if(!w.essential&&t.browser.prefersReducedMotion){var G=t.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(G,B)}this.stop(),w=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},w);var $=this.transform,st=this.getZoom(),Ct=this.getBearing(),wt=this.getPitch(),Ut=this.getPadding(),Yt="zoom"in w?t.clamp(+w.zoom,$.minZoom,$.maxZoom):st,qt="bearing"in w?this._normalizeBearing(w.bearing,Ct):Ct,he="pitch"in w?+w.pitch:wt,ye="padding"in w?w.padding:$.padding,je=$.zoomScale(Yt-st),Ie=t.Point.convert(w.offset),Ve=$.centerPoint.add(Ie),qe=$.pointLocation(Ve),sn=t.LngLat.convert(w.center||qe);this._normalizeCenter(sn);var tr=$.project(qe),kn=$.project(sn).sub(tr),pr=w.curve,Mr=Math.max($.width,$.height),$r=Mr/je,Yr=kn.mag();if("minZoom"in w){var Ti=t.clamp(Math.min(w.minZoom,st,Yt),$.minZoom,$.maxZoom),Li=Mr/$.zoomScale(Ti-st);pr=Math.sqrt(Li/Yr*2)}var Ki=pr*pr;function Xi(sa){var Ia=($r*$r-Mr*Mr+(sa?-1:1)*Ki*Ki*Yr*Yr)/(2*(sa?$r:Mr)*Ki*Yr);return Math.log(Math.sqrt(Ia*Ia+1)-Ia)}function Oa(sa){return(Math.exp(sa)-Math.exp(-sa))/2}function Na(sa){return(Math.exp(sa)+Math.exp(-sa))/2}var ji=Xi(0),Sa=function(Ia){return Na(ji)/Na(ji+pr*Ia)},xa=function(Ia){return Mr*((Na(ji)*(Oa(Fa=ji+pr*Ia)/Na(Fa))-Oa(ji))/Ki)/Yr;var Fa},Yi=(Xi(1)-ji)/pr;if(Math.abs(Yr)<1e-6||!isFinite(Yi)){if(Math.abs(Mr-$r)<1e-6)return this.easeTo(w,B);var _a=$r<Mr?-1:1;Yi=Math.abs(Math.log($r/Mr))/pr,xa=function(){return 0},Sa=function(Ia){return Math.exp(_a*pr*Ia)}}return w.duration="duration"in w?+w.duration:1e3*Yi/("screenSpeed"in w?+w.screenSpeed/pr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=Ct!==qt,this._pitching=he!==wt,this._padding=!$.isPaddingEqual(ye),this._prepareEase(B,!1),this._ease(function(sa){var Ia=sa*Yi,Fa=1/Sa(Ia);$.zoom=sa===1?Yt:st+$.scaleZoom(Fa),D._rotating&&($.bearing=t.number(Ct,qt,sa)),D._pitching&&($.pitch=t.number(wt,he,sa)),D._padding&&($.interpolatePadding(Ut,ye,sa),Ve=$.centerPoint.add(Ie));var _s=sa===1?sn:$.unproject(tr.add(kn.mult(xa(Ia))).mult(Fa));$.setLocationAtPoint($.renderWorldCopies?_s.wrap():_s,Ve),D._fireMoveEvents(B)},function(){return D._afterEase(B)},w),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(w,B){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,B)}if(!w){var G=this.handlers;G&&G.stop(!1)}return this},I.prototype._ease=function(w,B,D){D.animate===!1||D.duration===0?(w(1),B()):(this._easeStart=t.browser.now(),this._easeOptions=D,this._onEaseFrame=w,this._onEaseEnd=B,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var w=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(w,B){w=t.wrap(w,-180,180);var D=Math.abs(w-B);return Math.abs(w-360-B)<D&&(w-=360),Math.abs(w+360-B)<D&&(w+=360),w},I.prototype._normalizeCenter=function(w){var B=this.transform;if(B.renderWorldCopies&&!B.lngRange){var D=w.lng-B.center.lng;w.lng+=D>180?-360:D<-180?360:0}},I}(t.Evented),rn=function(I){I===void 0&&(I={}),this.options=I,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rn.prototype.getDefaultPosition=function(){return"bottom-right"},rn.prototype.onAdd=function(j){var I=this.options&&this.options.compact;return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rn.prototype.onRemove=function(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rn.prototype._setElementTitle=function(j,I){var w=this._map._getUIString("AttributionControl."+I);j.title=w,j.setAttribute("aria-label",w)},rn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rn.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(j){var w=I.reduce(function(B,D,G){return D.value&&(B+=D.key+"="+D.value+(G<I.length-1?"&":"")),B},"?");j.href=t.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},rn.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},rn.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(st){return typeof st!="string"?"":st})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var w=this._map.style.sourceCaches;for(var B in w){var D=w[B];if(D.used){var G=D.getSource();G.attribution&&j.indexOf(G.attribution)<0&&j.push(G.attribution)}}j.sort(function(st,Ct){return st.length-Ct.length});var $=(j=j.filter(function(st,Ct){for(var wt=Ct+1;wt<j.length;wt++)if(j[wt].indexOf(st)>=0)return!1;return!0})).join(" | ");$!==this._attribHTML&&(this._attribHTML=$,j.length?(this._innerContainer.innerHTML=$,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Je=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Je.prototype.onAdd=function(j){this._map=j,this._container=s.create("div","mapboxgl-ctrl");var I=s.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Je.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Je.prototype.getDefaultPosition=function(){return"bottom-left"},Je.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Je.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var I in j)if(j[I].getSource().mapbox_logo)return!0;return!1}},Je.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var I=j[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var pn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pn.prototype.add=function(j){var I=++this._id;return this._queue.push({callback:j,id:I,cancelled:!1}),I},pn.prototype.remove=function(j){for(var I=this._currentlyRunning,w=0,B=I?this._queue.concat(I):this._queue;w<B.length;w+=1){var D=B[w];if(D.id===j)return void(D.cancelled=!0)}},pn.prototype.run=function(j){j===void 0&&(j=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,B=I;w<B.length;w+=1){var D=B[w];if(!D.cancelled&&(D.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Jn=t.window.HTMLImageElement,Vn=t.window.HTMLElement,Zn=t.window.ImageBitmap,Wn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},cr=function(j){function I(B){var D=this;if((B=t.extend({},Wn,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var G=new Da(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies);if(j.call(this,G,B),this._interactive=B.interactive,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new pn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},hn,B.locale),this._clickTolerance=B.clickTolerance,this._requestManager=new t.RequestManager(B.transformRequest,B.accessToken),typeof B.container=="string"){if(this._container=t.window.document.getElementById(B.container),!this._container)throw new Error("Container '"+B.container+"' not found.")}else{if(!(B.container instanceof Vn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return D._update(!1)}),this.on("moveend",function(){return D._update(!1)}),this.on("zoom",function(){return D._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Fe(this,B),this._hash=B.hash&&new ks(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,t.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new rn({customAttribution:B.customAttribution})),this.addControl(new Je,B.logoPosition),this.on("style.load",function(){D.transform.unmodified&&D.jumpTo(D.style.stylesheet)}),this.on("data",function($){D._update($.dataType==="style"),D.fire(new t.Event($.dataType+"data",$))}),this.on("dataloading",function($){D.fire(new t.Event($.dataType+"dataloading",$))})}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(B,D){if(D===void 0&&(D=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var G=B.onAdd(this);this._controls.push(B);var $=this._controlPositions[D];return D.indexOf("bottom")!==-1?$.insertBefore(G,$.firstChild):$.appendChild(G),this},I.prototype.removeControl=function(B){if(!B||!B.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(B);return D>-1&&this._controls.splice(D,1),B.onRemove(this),this},I.prototype.hasControl=function(B){return this._controls.indexOf(B)>-1},I.prototype.resize=function(B){var D=this._containerDimensions(),G=D[0],$=D[1];this._resizeCanvas(G,$),this.transform.resize(G,$),this.painter.resize(G,$);var st=!this._moving;return st&&(this.stop(),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B))),this.fire(new t.Event("resize",B)),st&&this.fire(new t.Event("moveend",B)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(B){return this.transform.setMaxBounds(t.LngLatBounds.convert(B)),this._update()},I.prototype.setMinZoom=function(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(B){if((B=B==null?60:B)>60)throw new Error("maxPitch must be less than or equal to 60");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(B){return this.transform.renderWorldCopies=B,this._update()},I.prototype.project=function(B){return this.transform.locationPoint(t.LngLat.convert(B))},I.prototype.unproject=function(B){return this.transform.pointLocation(t.Point.convert(B))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(B,D,G){var $,st=this;if(B==="mouseenter"||B==="mouseover"){var Ct=!1;return{layer:D,listener:G,delegates:{mousemove:function(Yt){var qt=st.getLayer(D)?st.queryRenderedFeatures(Yt.point,{layers:[D]}):[];qt.length?Ct||(Ct=!0,G.call(st,new $o(B,st,Yt.originalEvent,{features:qt}))):Ct=!1},mouseout:function(){Ct=!1}}}}if(B==="mouseleave"||B==="mouseout"){var wt=!1;return{layer:D,listener:G,delegates:{mousemove:function(Yt){(st.getLayer(D)?st.queryRenderedFeatures(Yt.point,{layers:[D]}):[]).length?wt=!0:wt&&(wt=!1,G.call(st,new $o(B,st,Yt.originalEvent)))},mouseout:function(Yt){wt&&(wt=!1,G.call(st,new $o(B,st,Yt.originalEvent)))}}}}return{layer:D,listener:G,delegates:($={},$[B]=function(Ut){var Yt=st.getLayer(D)?st.queryRenderedFeatures(Ut.point,{layers:[D]}):[];Yt.length&&(Ut.features=Yt,G.call(st,Ut),delete Ut.features)},$)}},I.prototype.on=function(B,D,G){if(G===void 0)return j.prototype.on.call(this,B,D);var $=this._createDelegatedListener(B,D,G);for(var st in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push($),$.delegates)this.on(st,$.delegates[st]);return this},I.prototype.once=function(B,D,G){if(G===void 0)return j.prototype.once.call(this,B,D);var $=this._createDelegatedListener(B,D,G);for(var st in $.delegates)this.once(st,$.delegates[st]);return this},I.prototype.off=function(B,D,G){var $=this;return G===void 0?j.prototype.off.call(this,B,D):(this._delegatedListeners&&this._delegatedListeners[B]&&function(st){for(var Ct=st[B],wt=0;wt<Ct.length;wt++){var Ut=Ct[wt];if(Ut.layer===D&&Ut.listener===G){for(var Yt in Ut.delegates)$.off(Yt,Ut.delegates[Yt]);return Ct.splice(wt,1),$}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(B,D){if(!this.style)return[];var G;if(D!==void 0||B===void 0||B instanceof t.Point||Array.isArray(B)||(D=B,B=void 0),D=D||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof B[0]=="number")G=[t.Point.convert(B)];else{var $=t.Point.convert(B[0]),st=t.Point.convert(B[1]);G=[$,new t.Point(st.x,$.y),st,new t.Point($.x,st.y),$]}return this.style.queryRenderedFeatures(G,D,this.transform)},I.prototype.querySourceFeatures=function(B,D){return this.style.querySourceFeatures(B,D)},I.prototype.setStyle=function(B,D){return(D=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D)).diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(B,D))},I.prototype._getUIString=function(B){var D=this._locale[B];if(D==null)throw new Error("Missing UI string '"+B+"'");return D},I.prototype._updateStyle=function(B,D){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Mo(this,D||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Mo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(B,D){var G=this;if(typeof B=="string"){var $=this._requestManager.normalizeStyleURL(B),st=this._requestManager.transformRequest($,t.ResourceType.Style);t.getJSON(st,function(Ct,wt){Ct?G.fire(new t.ErrorEvent(Ct)):wt&&G._updateDiff(wt,D)})}else typeof B=="object"&&this._updateDiff(B,D)},I.prototype._updateDiff=function(B,D){try{this.style.setState(B)&&this._update(!0)}catch(G){t.warnOnce("Unable to perform style diff: "+(G.message||G.error||G)+".  Rebuilding the style from scratch."),this._updateStyle(B,D)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(B,D){return this._lazyInitEmptyStyle(),this.style.addSource(B,D),this._update(!0)},I.prototype.isSourceLoaded=function(B){var D=this.style&&this.style.sourceCaches[B];if(D!==void 0)return D.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+B+"'")))},I.prototype.areTilesLoaded=function(){var B=this.style&&this.style.sourceCaches;for(var D in B){var G=B[D]._tiles;for(var $ in G){var st=G[$];if(st.state!=="loaded"&&st.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(B,D,G){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,D,G)},I.prototype.removeSource=function(B){return this.style.removeSource(B),this._update(!0)},I.prototype.getSource=function(B){return this.style.getSource(B)},I.prototype.addImage=function(B,D,G){G===void 0&&(G={});var $=G.pixelRatio;$===void 0&&($=1);var st=G.sdf;st===void 0&&(st=!1);var Ct=G.stretchX,wt=G.stretchY,Ut=G.content;if(this._lazyInitEmptyStyle(),D instanceof Jn||Zn&&D instanceof Zn){var Yt=t.browser.getImageData(D);this.style.addImage(B,{data:new t.RGBAImage({width:Yt.width,height:Yt.height},Yt.data),pixelRatio:$,stretchX:Ct,stretchY:wt,content:Ut,sdf:st,version:0})}else{if(D.width===void 0||D.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=D;this.style.addImage(B,{data:new t.RGBAImage({width:D.width,height:D.height},new Uint8Array(D.data)),pixelRatio:$,stretchX:Ct,stretchY:wt,content:Ut,sdf:st,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,B)}},I.prototype.updateImage=function(B,D){var G=this.style.getImage(B);if(!G)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var $=D instanceof Jn||Zn&&D instanceof Zn?t.browser.getImageData(D):D,st=$.width,Ct=$.height,wt=$.data;return st===void 0||Ct===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):st!==G.data.width||Ct!==G.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(G.data.replace(wt,!(D instanceof Jn||Zn&&D instanceof Zn)),void this.style.updateImage(B,G))},I.prototype.hasImage=function(B){return B?!!this.style.getImage(B):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(B){this.style.removeImage(B)},I.prototype.loadImage=function(B,D){t.getImage(this._requestManager.transformRequest(B,t.ResourceType.Image),D)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(B,D){return this._lazyInitEmptyStyle(),this.style.addLayer(B,D),this._update(!0)},I.prototype.moveLayer=function(B,D){return this.style.moveLayer(B,D),this._update(!0)},I.prototype.removeLayer=function(B){return this.style.removeLayer(B),this._update(!0)},I.prototype.getLayer=function(B){return this.style.getLayer(B)},I.prototype.setLayerZoomRange=function(B,D,G){return this.style.setLayerZoomRange(B,D,G),this._update(!0)},I.prototype.setFilter=function(B,D,G){return G===void 0&&(G={}),this.style.setFilter(B,D,G),this._update(!0)},I.prototype.getFilter=function(B){return this.style.getFilter(B)},I.prototype.setPaintProperty=function(B,D,G,$){return $===void 0&&($={}),this.style.setPaintProperty(B,D,G,$),this._update(!0)},I.prototype.getPaintProperty=function(B,D){return this.style.getPaintProperty(B,D)},I.prototype.setLayoutProperty=function(B,D,G,$){return $===void 0&&($={}),this.style.setLayoutProperty(B,D,G,$),this._update(!0)},I.prototype.getLayoutProperty=function(B,D){return this.style.getLayoutProperty(B,D)},I.prototype.setLight=function(B,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(B,D),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(B,D){return this.style.setFeatureState(B,D),this._update()},I.prototype.removeFeatureState=function(B,D){return this.style.removeFeatureState(B,D),this._update()},I.prototype.getFeatureState=function(B){return this.style.getFeatureState(B)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var B=0,D=0;return this._container&&(B=this._container.clientWidth||400,D=this._container.clientHeight||300),[B,D]},I.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var B=this._container;B.classList.add("mapboxgl-map"),(this._missingCSSCanary=s.create("div","mapboxgl-canary",B)).style.visibility="hidden",this._detectMissingCSS();var D=this._canvasContainer=s.create("div","mapboxgl-canvas-container",B);this._interactive&&D.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",D),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var $=this._controlContainer=s.create("div","mapboxgl-control-container",B),st=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ct){st[Ct]=s.create("div","mapboxgl-ctrl-"+Ct,$)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(B,D){var G=t.browser.devicePixelRatio||1;this._canvas.width=G*B,this._canvas.height=G*D,this._canvas.style.width=B+"px",this._canvas.style.height=D+"px"},I.prototype._setupPainter=function(){var B=t.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);D?(this.painter=new po(D,this.transform),t.webpSupported.testSupport(D)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:B}))},I.prototype._contextRestored=function(B){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:B}))},I.prototype._onMapScroll=function(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(B){return this._update(),this._renderTaskQueue.add(B)},I.prototype._cancelRenderFrame=function(B){this._renderTaskQueue.remove(B)},I.prototype._render=function(B){var D,G=this,$=0,st=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(D=st.createQueryEXT(),st.beginQueryEXT(st.TIME_ELAPSED_EXT,D),$=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),!this._removed){var Ct=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var wt=this.transform.zoom,Ut=t.browser.now();this.style.zoomHistory.update(wt,Ut);var Yt=new t.EvaluationParameters(wt,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qt=Yt.crossFadingFactor();qt===1&&qt===this._crossFadingFactor||(Ct=!0,this._crossFadingFactor=qt),this.style.update(Yt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Ct)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var he=t.browser.now()-$;st.endQueryEXT(st.TIME_ELAPSED_EXT,D),setTimeout(function(){var Ie=st.getQueryObjectEXT(D,st.QUERY_RESULT_EXT)/1e6;st.deleteQueryEXT(D),G.fire(new t.Event("gpu-timing-frame",{cpuTime:he,gpuTime:Ie}))},50)}if(this.listens("gpu-timing-layer")){var ye=this.painter.collectGpuTimers();setTimeout(function(){var Ie=G.painter.queryGpuTimers(ye);G.fire(new t.Event("gpu-timing-layer",{layerTimes:Ie}))},50)}var je=this._sourcesDirty||this._styleDirty||this._placementDirty;return je||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||je||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var B=0,D=this._controls;B<D.length;B+=1)D[B].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext(),xr(this._canvasContainer),xr(this._controlContainer),xr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},I.prototype.triggerRepaint=function(){var B=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(D){B._frame=null,B._render(D)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(B){this._trackResize&&this.resize({originalEvent:B})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(B){this._showPadding!==B&&(this._showPadding=B,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(B){this._vertices=B,this._update()},I.prototype._setCacheLimits=function(B,D){t.setCacheLimits(B,D)},w.version.get=function(){return t.version},Object.defineProperties(I.prototype,w),I}(Ke);function xr(j){j.parentNode&&j.parentNode.removeChild(j)}var Hr={showCompass:!0,showZoom:!0,visualizePitch:!1},mi=function(I){var w=this;this.options=t.extend({},Hr,I),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return w._map.zoomIn({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return w._map.zoomOut({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){w.options.visualizePitch?w._map.resetNorthPitch({},{originalEvent:B}):w._map.resetNorth({},{originalEvent:B})}),this._compassIcon=s.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};mi.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),I=j===this._map.getMaxZoom(),w=j===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},mi.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},mi.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Br(this._map,this._compass,this.options.visualizePitch)),this._container},mi.prototype.onRemove=function(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},mi.prototype._createButton=function(j,I){var w=s.create("button",j,this._container);return w.type="button",w.addEventListener("click",I),w},mi.prototype._setButtonTitle=function(j,I){var w=this._map._getUIString("NavigationControl."+I);j.title=w,j.setAttribute("aria-label",w)};var Br=function(I,w,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=w,this.mouseRotate=new ju({clickTolerance:I.dragRotate._mouseRotate._clickTolerance}),this.map=I,B&&(this.mousePitch=new Bu({clickTolerance:I.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),s.addEventListener(w,"mousedown",this.mousedown),s.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(w,"touchmove",this.touchmove),s.addEventListener(w,"touchend",this.touchend),s.addEventListener(w,"touchcancel",this.reset)};function ui(j,I,w){if(j=new t.LngLat(j.lng,j.lat),I){var B=new t.LngLat(j.lng-360,j.lat),D=new t.LngLat(j.lng+360,j.lat),G=w.locationPoint(j).distSqr(I);w.locationPoint(B).distSqr(I)<G?j=B:w.locationPoint(D).distSqr(I)<G&&(j=D)}for(;Math.abs(j.lng-w.center.lng)>180;){var $=w.locationPoint(j);if($.x>=0&&$.y>=0&&$.x<=w.width&&$.y<=w.height)break;j.lng>w.center.lng?j.lng-=360:j.lng+=360}return j}Br.prototype.down=function(j,I){this.mouseRotate.mousedown(j,I),this.mousePitch&&this.mousePitch.mousedown(j,I),s.disableDrag()},Br.prototype.move=function(j,I){var w=this.map,B=this.mouseRotate.mousemoveWindow(j,I);if(B&&B.bearingDelta&&w.setBearing(w.getBearing()+B.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(j,I);D&&D.pitchDelta&&w.setPitch(w.getPitch()+D.pitchDelta)}},Br.prototype.off=function(){var j=this.element;s.removeEventListener(j,"mousedown",this.mousedown),s.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(j,"touchmove",this.touchmove),s.removeEventListener(j,"touchend",this.touchend),s.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},Br.prototype.offTemp=function(){s.enableDrag(),s.removeEventListener(t.window,"mousemove",this.mousemove),s.removeEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousedown=function(j){this.down(t.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),s.mousePos(this.element,j)),s.addEventListener(t.window,"mousemove",this.mousemove),s.addEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousemove=function(j){this.move(j,s.mousePos(this.element,j))},Br.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},Br.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},Br.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},Br.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Br.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var _i={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Zi(j,I,w){var B=j.classList;for(var D in _i)B.remove("mapboxgl-"+w+"-anchor-"+D);B.add("mapboxgl-"+w+"-anchor-"+I)}var Ri,Ma=function(j){function I(w,B){if(j.call(this),(w instanceof t.window.HTMLElement||B)&&(w=t.extend({element:w},B)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=t.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div"),this._element.setAttribute("aria-label","Map marker");var D=s.createNS("http://www.w3.org/2000/svg","svg");D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height","41px"),D.setAttributeNS(null,"width","27px"),D.setAttributeNS(null,"viewBox","0 0 27 41");var G=s.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var $=s.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill-rule","nonzero");var st=s.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(3.0, 29.0)"),st.setAttributeNS(null,"fill","#000000");for(var Ct=0,wt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ct<wt.length;Ct+=1){var Ut=wt[Ct],Yt=s.createNS("http://www.w3.org/2000/svg","ellipse");Yt.setAttributeNS(null,"opacity","0.04"),Yt.setAttributeNS(null,"cx","10.5"),Yt.setAttributeNS(null,"cy","5.80029008"),Yt.setAttributeNS(null,"rx",Ut.rx),Yt.setAttributeNS(null,"ry",Ut.ry),st.appendChild(Yt)}var qt=s.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"fill",this._color);var he=s.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qt.appendChild(he);var ye=s.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");var je=s.createNS("http://www.w3.org/2000/svg","path");je.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(je);var Ie=s.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");var Ve=s.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");var qe=s.createNS("http://www.w3.org/2000/svg","circle");qe.setAttributeNS(null,"fill","#000000"),qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"cx","5.5"),qe.setAttributeNS(null,"cy","5.5"),qe.setAttributeNS(null,"r","5.4999962");var sn=s.createNS("http://www.w3.org/2000/svg","circle");sn.setAttributeNS(null,"fill","#FFFFFF"),sn.setAttributeNS(null,"cx","5.5"),sn.setAttributeNS(null,"cy","5.5"),sn.setAttributeNS(null,"r","5.4999962"),Ve.appendChild(qe),Ve.appendChild(sn),$.appendChild(st),$.appendChild(qt),$.appendChild(ye),$.appendChild(Ie),$.appendChild(Ve),D.appendChild($),D.setAttributeNS(null,"height",41*this._scale+"px"),D.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(D),this._offset=t.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(tr){tr.preventDefault()}),this._element.addEventListener("mousedown",function(tr){tr.preventDefault()}),Zi(this._element,this._anchor,"marker"),this._popup=null}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var B=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(24.6+B)],"bottom-right":[-B,-1*(24.6+B)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(w){var B=w.code,D=w.charCode||w.keyCode;B!=="Space"&&B!=="Enter"&&D!==32&&D!==13||this.togglePopup()},I.prototype._onMapClick=function(w){var B=w.originalEvent.target,D=this._element;this._popup&&(B===D||D.contains(B))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},I.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ui(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var B="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?B="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(B="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),s.setTransform(this._element,_i[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+B)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(w){return this._offset=t.Point.convert(w),this._update(),this},I.prototype._onMove=function(w){if(!this._isDragging){var B=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=B}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(t.Evented),ga={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},la=0,ii=!1,Pa=function(j){function I(w){j.call(this),this.options=t.extend({},ga,w),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){var B;return this._map=w,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),B=this._setupUI,Ri!==void 0?B(Ri):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(D){B(Ri=D.state!=="denied")}):B(Ri=!!t.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,la=0,ii=!1},I.prototype._isOutOfMapMaxBounds=function(w){var B=this._map.getMaxBounds(),D=w.coords;return B&&(D.longitude<B.getWest()||D.longitude>B.getEast()||D.latitude<B.getSouth()||D.latitude>B.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",w)),this._finish()}},I.prototype._updateCamera=function(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude),D=w.coords.accuracy,G=this._map.getBearing(),$=t.extend({bearing:G},this.options.fitBoundsOptions);this._map.fitBounds(B.toBounds(D),$,{geolocateSource:!0})},I.prototype._updateMarker=function(w){if(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(B).addTo(this._map),this._userLocationDotMarker.setLngLat(B).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,B=this._map.unproject([0,w]),D=this._map.unproject([1,w]),G=B.distanceTo(D),$=Math.ceil(2*this._accuracy/G);this._circleElement.style.width=$+"px",this._circleElement.style.height=$+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var B=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&ii)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",w)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(w){var B=this;if(this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-geolocate",this._container),s.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var G=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ma(this._dotElement),this._circleElement=s.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function($){$.geolocateSource||B._watchState!=="ACTIVE_LOCK"||$.originalEvent&&$.originalEvent.type==="resize"||(B._watchState="BACKGROUND",B._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),B._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),B.fire(new t.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":la--,ii=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++la>1?(w={maximumAge:6e5,timeout:0},ii=!0):(w=this.options.positionOptions,ii=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(t.Evented),Va={maxWidth:100,unit:"metric"},Ya=function(I){this.options=t.extend({},Va,I),t.bindAll(["_onMove","setUnit"],this)};function Ii(j,I,w){var B=w&&w.maxWidth||100,D=j._container.clientHeight/2,G=j.unproject([0,D]),$=j.unproject([B,D]),st=G.distanceTo($);if(w&&w.unit==="imperial"){var Ct=3.2808*st;Ct>5280?Ra(I,B,Ct/5280,j._getUIString("ScaleControl.Miles")):Ra(I,B,Ct,j._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Ra(I,B,st/1852,j._getUIString("ScaleControl.NauticalMiles")):st>=1e3?Ra(I,B,st/1e3,j._getUIString("ScaleControl.Kilometers")):Ra(I,B,st,j._getUIString("ScaleControl.Meters"))}function Ra(j,I,w,B){var D,G,$,st=(D=w,(G=Math.pow(10,(""+Math.floor(D)).length-1))*($=($=D/G)>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:function(Ct){var wt=Math.pow(10,Math.ceil(-Math.log(Ct)/Math.LN10));return Math.round(Ct*wt)/wt}($)));j.style.width=I*(st/w)+"px",j.innerHTML=st+"&nbsp;"+B}Ya.prototype.getDefaultPosition=function(){return"bottom-left"},Ya.prototype._onMove=function(){Ii(this._map,this._container,this.options)},Ya.prototype.onAdd=function(j){return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ya.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ya.prototype.setUnit=function(j){this.options.unit=j,Ii(this._map,this._container,this.options)};var lo=function(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof t.window.HTMLElement?this._container=I.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};lo.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},lo.prototype.onRemove=function(){s.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},lo.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},lo.prototype._setupUI=function(){var j=this._fullscreenButton=s.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},lo.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},lo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},lo.prototype._isFullscreen=function(){return this._fullscreen},lo.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},lo.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Rs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ds=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ku=function(j){function I(w){j.call(this),this.options=t.extend(Object.create(Rs),w),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(w){return this.setDOMContent(t.window.document.createTextNode(w))},I.prototype.setHTML=function(w){var B,D=t.window.document.createDocumentFragment(),G=t.window.document.createElement("body");for(G.innerHTML=w;B=G.firstChild;)D.appendChild(B);return this.setDOMContent(D)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},I.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},I.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},I.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},I.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(w){this._update(w.point)},I.prototype._onMouseMove=function(w){this._update(w.point)},I.prototype._onDrag=function(w){this._update(w.point)},I.prototype._update=function(w){var B=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Yt){return B._container.classList.add(Yt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ui(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var D=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),G=this.options.anchor,$=function Yt(qt){if(qt){if(typeof qt=="number"){var he=Math.round(Math.sqrt(.5*Math.pow(qt,2)));return{center:new t.Point(0,0),top:new t.Point(0,qt),"top-left":new t.Point(he,he),"top-right":new t.Point(-he,he),bottom:new t.Point(0,-qt),"bottom-left":new t.Point(he,-he),"bottom-right":new t.Point(-he,-he),left:new t.Point(qt,0),right:new t.Point(-qt,0)}}if(qt instanceof t.Point||Array.isArray(qt)){var ye=t.Point.convert(qt);return{center:ye,top:ye,"top-left":ye,"top-right":ye,bottom:ye,"bottom-left":ye,"bottom-right":ye,left:ye,right:ye}}return{center:t.Point.convert(qt.center||[0,0]),top:t.Point.convert(qt.top||[0,0]),"top-left":t.Point.convert(qt["top-left"]||[0,0]),"top-right":t.Point.convert(qt["top-right"]||[0,0]),bottom:t.Point.convert(qt.bottom||[0,0]),"bottom-left":t.Point.convert(qt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(qt["bottom-right"]||[0,0]),left:t.Point.convert(qt.left||[0,0]),right:t.Point.convert(qt.right||[0,0])}}return Yt(new t.Point(0,0))}(this.options.offset);if(!G){var st,Ct=this._container.offsetWidth,wt=this._container.offsetHeight;st=D.y+$.bottom.y<wt?["top"]:D.y>this._map.transform.height-wt?["bottom"]:[],D.x<Ct/2?st.push("left"):D.x>this._map.transform.width-Ct/2&&st.push("right"),G=st.length===0?"bottom":st.join("-")}var Ut=D.add($[G]).round();s.setTransform(this._container,_i[G]+" translate("+Ut.x+"px,"+Ut.y+"px)"),Zi(this._container,G,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(Ds);w&&w.focus()}},I.prototype._onClose=function(){this.remove()},I}(t.Evented),hu={version:t.version,supported:l,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:cr,NavigationControl:mi,GeolocateControl:Pa,AttributionControl:rn,ScaleControl:Ya,FullscreenControl:lo,Popup:Ku,Marker:Ma,Style:Mo,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){ln().acquire(En)},clearPrewarmedResources:function(){var I=br;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(En),br=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(j){t.config.ACCESS_TOKEN=j},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(j){t.config.API_URL=j},get workerCount(){return Pn.workerCount},set workerCount(j){Pn.workerCount=j},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){t.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(I){t.clearTileCache(I)},workerUrl:""};return hu}),T})},"4cb6":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.METADATA_KEY=void 0;var U=R("xfSm");mt.METADATA_KEY=U;var E=R("9Fde");Object.defineProperty(mt,"Container",{enumerable:!0,get:function(){return E.Container}});var T=R("FV85");Object.defineProperty(mt,"BindingScopeEnum",{enumerable:!0,get:function(){return T.BindingScopeEnum}}),Object.defineProperty(mt,"BindingTypeEnum",{enumerable:!0,get:function(){return T.BindingTypeEnum}}),Object.defineProperty(mt,"TargetTypeEnum",{enumerable:!0,get:function(){return T.TargetTypeEnum}});var e=R("dxzI");Object.defineProperty(mt,"AsyncContainerModule",{enumerable:!0,get:function(){return e.AsyncContainerModule}}),Object.defineProperty(mt,"ContainerModule",{enumerable:!0,get:function(){return e.ContainerModule}});var t=R("cZ5Q");Object.defineProperty(mt,"injectable",{enumerable:!0,get:function(){return t.injectable}});var l=R("0gSV");Object.defineProperty(mt,"tagged",{enumerable:!0,get:function(){return l.tagged}});var s=R("ZzCi");Object.defineProperty(mt,"named",{enumerable:!0,get:function(){return s.named}});var c=R("Yk9n");Object.defineProperty(mt,"inject",{enumerable:!0,get:function(){return c.inject}}),Object.defineProperty(mt,"LazyServiceIdentifer",{enumerable:!0,get:function(){return c.LazyServiceIdentifer}});var r=R("jYx5");Object.defineProperty(mt,"optional",{enumerable:!0,get:function(){return r.optional}});var h=R("n2J3");Object.defineProperty(mt,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var n=R("jIg/");Object.defineProperty(mt,"multiInject",{enumerable:!0,get:function(){return n.multiInject}});var i=R("oaX6");Object.defineProperty(mt,"targetName",{enumerable:!0,get:function(){return i.targetName}});var a=R("Sk89");Object.defineProperty(mt,"postConstruct",{enumerable:!0,get:function(){return a.postConstruct}});var o=R("wnjb");Object.defineProperty(mt,"MetadataReader",{enumerable:!0,get:function(){return o.MetadataReader}});var u=R("d9O0");Object.defineProperty(mt,"id",{enumerable:!0,get:function(){return u.id}});var f=R("Ztfv");Object.defineProperty(mt,"decorate",{enumerable:!0,get:function(){return f.decorate}});var v=R("RR/i");Object.defineProperty(mt,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(mt,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(mt,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(mt,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=R("ujMp");Object.defineProperty(mt,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var y=R("78VC");Object.defineProperty(mt,"multiBindToService",{enumerable:!0,get:function(){return y.multiBindToService}})},"4kj+":function(Oe,mt){},"4qC0":function(Oe,mt,R){var U=R("NykK"),E=R("Z0cm"),T=R("ExA7"),e="[object String]";function t(l){return typeof l=="string"||!E(l)&&T(l)&&U(l)==e}Oe.exports=t},"5Tg0":function(Oe,mt,R){(function(U){var E=R("Kz5y"),T=mt&&!mt.nodeType&&mt,e=T&&typeof U=="object"&&U&&!U.nodeType&&U,t=e&&e.exports===T,l=t?E.Buffer:void 0,s=l?l.allocUnsafe:void 0;function c(r,h){if(h)return r.slice();var n=r.length,i=s?s(n):new r.constructor(n);return r.copy(i),i}U.exports=c}).call(this,R("hOG+")(Oe))},"5gLl":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return V});var U=R("lSNA"),E=R.n(U),T=R("Aib3"),e=R.n(T),t=R("0wsv");function l(k){if(!k)throw new Error("coord is required");if(!Array.isArray(k)){if(k.type==="Feature"&&k.geometry!==null&&k.geometry.type==="Point")return k.geometry.coordinates;if(k.type==="Point")return k.coordinates}if(Array.isArray(k)&&k.length>=2&&!Array.isArray(k[0])&&!Array.isArray(k[1]))return k;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(k){if(Array.isArray(k))return k;if(k.type==="Feature"){if(k.geometry!==null)return k.geometry.coordinates}else if(k.coordinates)return k.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function c(k){if(k.length>1&&Object(t.c)(k[0])&&Object(t.c)(k[1]))return!0;if(Array.isArray(k[0])&&k[0].length)return c(k[0]);throw new Error("coordinates must only contain numbers")}function r(k,Z,X){if(!Z||!X)throw new Error("type and name required");if(!k||k.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+k.type)}function h(k,Z,X){if(!k)throw new Error("No feature passed");if(!X)throw new Error(".featureOf() requires a name");if(!k||k.type!=="Feature"||!k.geometry)throw new Error("Invalid input to "+X+", Feature with geometry required");if(!k.geometry||k.geometry.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+k.geometry.type)}function n(k,Z,X){if(!k)throw new Error("No featureCollection passed");if(!X)throw new Error(".collectionOf() requires a name");if(!k||k.type!=="FeatureCollection")throw new Error("Invalid input to "+X+", FeatureCollection required");for(var it=0,ft=k.features;it<ft.length;it++){var pt=ft[it];if(!pt||pt.type!=="Feature"||!pt.geometry)throw new Error("Invalid input to "+X+", Feature with geometry required");if(!pt.geometry||pt.geometry.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+pt.geometry.type)}}function i(k){return k.type==="Feature"?k.geometry:k}function a(k,Z){return k.type==="FeatureCollection"?"FeatureCollection":k.type==="GeometryCollection"?"GeometryCollection":k.type==="Feature"&&k.geometry!==null?k.geometry.type:k.type}function o(k,Z,X){if(k!==null)for(var it,ft,pt,ut,It,Nt,Rt,Mt=0,bt=0,At,rt=k.type,Pt=rt==="FeatureCollection",z=rt==="Feature",Q=Pt?k.features.length:1,gt=0;gt<Q;gt++){Rt=Pt?k.features[gt].geometry:z?k.geometry:k,At=Rt?Rt.type==="GeometryCollection":!1,It=At?Rt.geometries.length:1;for(var et=0;et<It;et++){var ot=0,xt=0;if(ut=At?Rt.geometries[et]:Rt,ut!==null){Nt=ut.coordinates;var H=ut.type;switch(Mt=X&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(Z(Nt,bt,gt,ot,xt)===!1)return!1;bt++,ot++;break;case"LineString":case"MultiPoint":for(it=0;it<Nt.length;it++){if(Z(Nt[it],bt,gt,ot,xt)===!1)return!1;bt++,H==="MultiPoint"&&ot++}H==="LineString"&&ot++;break;case"Polygon":case"MultiLineString":for(it=0;it<Nt.length;it++){for(ft=0;ft<Nt[it].length-Mt;ft++){if(Z(Nt[it][ft],bt,gt,ot,xt)===!1)return!1;bt++}H==="MultiLineString"&&ot++,H==="Polygon"&&xt++}H==="Polygon"&&ot++;break;case"MultiPolygon":for(it=0;it<Nt.length;it++){for(xt=0,ft=0;ft<Nt[it].length;ft++){for(pt=0;pt<Nt[it][ft].length-Mt;pt++){if(Z(Nt[it][ft][pt],bt,gt,ot,xt)===!1)return!1;bt++}xt++}ot++}break;case"GeometryCollection":for(it=0;it<ut.geometries.length;it++)if(o(ut.geometries[it],Z,X)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(k,Z,X,it){var ft=X;return o(k,function(pt,ut,It,Nt,Rt){ut===0&&X===void 0?ft=pt:ft=Z(ft,pt,ut,It,Nt,Rt)},it),ft}function f(k,Z){var X;switch(k.type){case"FeatureCollection":for(X=0;X<k.features.length&&Z(k.features[X].properties,X)!==!1;X++);break;case"Feature":Z(k.properties,0);break}}function v(k,Z,X){var it=X;return f(k,function(ft,pt){pt===0&&X===void 0?it=ft:it=Z(it,ft,pt)}),it}function b(k,Z){if(k.type==="Feature")Z(k,0);else if(k.type==="FeatureCollection")for(var X=0;X<k.features.length&&Z(k.features[X],X)!==!1;X++);}function y(k,Z,X){var it=X;return b(k,function(ft,pt){pt===0&&X===void 0?it=ft:it=Z(it,ft,pt)}),it}function g(k){var Z=[];return o(k,function(X){Z.push(X)}),Z}function _(k,Z){var X,it,ft,pt,ut,It,Nt,Rt,Mt,bt,At=0,rt=k.type==="FeatureCollection",Pt=k.type==="Feature",z=rt?k.features.length:1;for(X=0;X<z;X++){for(It=rt?k.features[X].geometry:Pt?k.geometry:k,Rt=rt?k.features[X].properties:Pt?k.properties:{},Mt=rt?k.features[X].bbox:Pt?k.bbox:void 0,bt=rt?k.features[X].id:Pt?k.id:void 0,Nt=It?It.type==="GeometryCollection":!1,ut=Nt?It.geometries.length:1,ft=0;ft<ut;ft++){if(pt=Nt?It.geometries[ft]:It,pt===null){if(Z(null,At,Rt,Mt,bt)===!1)return!1;continue}switch(pt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Z(pt,At,Rt,Mt,bt)===!1)return!1;break}case"GeometryCollection":{for(it=0;it<pt.geometries.length;it++)if(Z(pt.geometries[it],At,Rt,Mt,bt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}At++}}function M(k,Z,X){var it=X;return _(k,function(ft,pt,ut,It,Nt){pt===0&&X===void 0?it=ft:it=Z(it,ft,pt,ut,It,Nt)}),it}function x(k,Z){_(k,function(X,it,ft,pt,ut){var It=X===null?null:X.type;switch(It){case null:case"Point":case"LineString":case"Polygon":return Z(Object(t.b)(X,ft,{bbox:pt,id:ut}),it,0)===!1?!1:void 0}var Nt;switch(It){case"MultiPoint":Nt="Point";break;case"MultiLineString":Nt="LineString";break;case"MultiPolygon":Nt="Polygon";break}for(var Rt=0;Rt<X.coordinates.length;Rt++){var Mt=X.coordinates[Rt],bt={type:Nt,coordinates:Mt};if(Z(Object(t.b)(bt,ft),it,Rt)===!1)return!1}})}function m(k,Z,X){var it=X;return x(k,function(ft,pt,ut){pt===0&&ut===0&&X===void 0?it=ft:it=Z(it,ft,pt,ut)}),it}function S(k,Z){x(k,function(X,it,ft){var pt=0;if(!!X.geometry){var ut=X.geometry.type;if(!(ut==="Point"||ut==="MultiPoint")){var It,Nt=0,Rt=0,Mt=0;if(o(X,function(bt,At,rt,Pt,z){if(It===void 0||it>Nt||Pt>Rt||z>Mt){It=bt,Nt=it,Rt=Pt,Mt=z,pt=0;return}var Q=Object(t.e)([It,bt],X.properties);if(Z(Q,it,ft,z,pt)===!1)return!1;pt++,It=bt})===!1)return!1}}})}function P(k,Z,X){var it=X,ft=!1;return S(k,function(pt,ut,It,Nt,Rt){ft===!1&&X===void 0?it=pt:it=Z(it,pt,ut,It,Nt,Rt),ft=!0}),it}function A(k,Z){if(!k)throw new Error("geojson is required");x(k,function(X,it,ft){if(X.geometry!==null){var pt=X.geometry.type,ut=X.geometry.coordinates;switch(pt){case"LineString":if(Z(X,it,ft,0,0)===!1)return!1;break;case"Polygon":for(var It=0;It<ut.length;It++)if(Z(Object(t.e)(ut[It],X.properties),it,ft,It)===!1)return!1;break}}})}function O(k,Z,X){var it=X;return A(k,function(ft,pt,ut,It){pt===0&&X===void 0?it=ft:it=Z(it,ft,pt,ut,It)}),it}function L(k,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var X=Z.featureIndex||0,it=Z.multiFeatureIndex||0,ft=Z.geometryIndex||0,pt=Z.segmentIndex||0,ut=Z.properties,It;switch(k.type){case"FeatureCollection":X<0&&(X=k.features.length+X),ut=ut||k.features[X].properties,It=k.features[X].geometry;break;case"Feature":ut=ut||k.properties,It=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":It=k;break;default:throw new Error("geojson is invalid")}if(It===null)return null;var Nt=It.coordinates;switch(It.type){case"Point":case"MultiPoint":return null;case"LineString":return pt<0&&(pt=Nt.length+pt-1),Object(t.e)([Nt[pt],Nt[pt+1]],ut,Z);case"Polygon":return ft<0&&(ft=Nt.length+ft),pt<0&&(pt=Nt[ft].length+pt-1),Object(t.e)([Nt[ft][pt],Nt[ft][pt+1]],ut,Z);case"MultiLineString":return it<0&&(it=Nt.length+it),pt<0&&(pt=Nt[it].length+pt-1),Object(t.e)([Nt[it][pt],Nt[it][pt+1]],ut,Z);case"MultiPolygon":return it<0&&(it=Nt.length+it),ft<0&&(ft=Nt[it].length+ft),pt<0&&(pt=Nt[it][ft].length-pt-1),Object(t.e)([Nt[it][ft][pt],Nt[it][ft][pt+1]],ut,Z)}throw new Error("geojson is invalid")}function W(k,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var X=Z.featureIndex||0,it=Z.multiFeatureIndex||0,ft=Z.geometryIndex||0,pt=Z.coordIndex||0,ut=Z.properties,It;switch(k.type){case"FeatureCollection":X<0&&(X=k.features.length+X),ut=ut||k.features[X].properties,It=k.features[X].geometry;break;case"Feature":ut=ut||k.properties,It=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":It=k;break;default:throw new Error("geojson is invalid")}if(It===null)return null;var Nt=It.coordinates;switch(It.type){case"Point":return Object(t.f)(Nt,ut,Z);case"MultiPoint":return it<0&&(it=Nt.length+it),Object(t.f)(Nt[it],ut,Z);case"LineString":return pt<0&&(pt=Nt.length+pt),Object(t.f)(Nt[pt],ut,Z);case"Polygon":return ft<0&&(ft=Nt.length+ft),pt<0&&(pt=Nt[ft].length+pt),Object(t.f)(Nt[ft][pt],ut,Z);case"MultiLineString":return it<0&&(it=Nt.length+it),pt<0&&(pt=Nt[it].length+pt),Object(t.f)(Nt[it][pt],ut,Z);case"MultiPolygon":return it<0&&(it=Nt.length+it),ft<0&&(ft=Nt[it].length+ft),pt<0&&(pt=Nt[it][ft].length-pt),Object(t.f)(Nt[it][ft][pt],ut,Z)}throw new Error("geojson is invalid")}function F(k,Z){var X=Object.keys(k);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(k);Z&&(it=it.filter(function(ft){return Object.getOwnPropertyDescriptor(k,ft).enumerable})),X.push.apply(X,it)}return X}function K(k){for(var Z=1;Z<arguments.length;Z++){var X=arguments[Z]!=null?arguments[Z]:{};Z%2?F(Object(X),!0).forEach(function(it){E()(k,it,X[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(X)):F(Object(X)).forEach(function(it){Object.defineProperty(k,it,Object.getOwnPropertyDescriptor(X,it))})}return k}function V(k,Z){var X=[],it={};if(k.features=k.features.filter(function(pt){var ut=pt.geometry;return pt!=null&&ut&&ut.type&&ut.coordinates&&ut.coordinates.length>0}),e()(k,!0),k.features.length===0)return{dataArray:[],featureKeys:it};var ft=0;return x(k,function(pt,ut){var It=s(pt),Nt=ut,Rt=K(K({},pt.properties),{},{coordinates:It,_id:Nt});X.push(Rt)}),{dataArray:X,featureKeys:it}}},"5ku3":function(Oe,mt,R){"use strict";(function(U){R.d(mt,"a",function(){return e});var E=R("U8pU"),T=R("I0ug");function e(){var l=(typeof U=="undefined"?"undefined":Object(E.a)(U))==="object"&&String(U)==="[object process]"&&!U.browser;return!l||Object(T.a)()}function t(){return e()&&typeof document!="undefined"}}).call(this,R("Q2Ig"))},"5zYK":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return r});var U=R("lSNA"),E=R.n(U),T=R("RIqP"),e=R.n(T),t=R("Aib3"),l=R.n(t);function s(h,n){var i=Object.keys(h);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(h);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(h,o).enumerable})),i.push.apply(i,a)}return i}function c(h){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(a){E()(h,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(a){Object.defineProperty(h,a,Object.getOwnPropertyDescriptor(i,a))})}return h}function r(h,n){var i=n.x,a=n.y,o=n.x1,u=n.y1,f=n.coordinates,v=[];return h.forEach(function(b,y){var g=[];if(i&&a&&(g=[parseFloat(b[i]),parseFloat(b[a])]),i&&a&&o&&u){var _=[parseFloat(b[i]),parseFloat(b[a])],M=[parseFloat(b[o]),parseFloat(b[u])];g=[_,M]}if(f){var x="Polygon";Array.isArray(f[0])||(x="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(x="LineString");var m={type:x,coordinates:e()(b[f])};l()(m,!0),g=m.coordinates}var S=c(c({},b),{},{_id:y,coordinates:g});v.push(S)}),{dataArray:v}}},"68d/":function(Oe,mt,R){"use strict";R.d(mt,"b",function(){return Ui}),R.d(mt,"c",function(){return zc}),R.d(mt,"a",function(){return xf});var U=R("q1tI"),E=R.n(U),T=Object(U.createContext)({});function e(){return Object(U.useContext)(T)}var t=R("8ml+"),l=R("lwsE"),s=R.n(l),c=R("W8MJ"),r=R.n(c),h=R("7W2i"),n=R.n(h),i=R("a1gu"),a=R.n(i),o=R("Nsbk"),u=R.n(o),f=R("lSNA"),v=R.n(f),b=R("yG8O"),y=R.n(b),g=R("U+yc"),_=R.n(g),M=R("1ABj"),x=R("h1nZ"),m,S,P,A,O,L;function W(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function F(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?W(Object(tt),!0).forEach(function(St){v()(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):W(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}var K=(m=Object(x.lazyInject)(x.TYPES.ILogService),S=Object(x.lazyInject)(x.TYPES.IGlobalConfigService),P=(L=function(){function jt(Et){s()(this,jt),y()(this,"logger",A,this),y()(this,"configService",O,this),this.config=void 0,this.config=Et}return r()(jt,[{key:"setContainer",value:function(tt,St){tt.bind(x.TYPES.MapConfig).toConstantValue(F(F({},this.config),{},{id:St})),tt.bind(x.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),jt}(),L),A=_()(P.prototype,"logger",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_()(P.prototype,"configService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P),V=R("QILm"),k=R.n(V),Z=R("yXPU"),X=R.n(Z),it=R("o0o1"),ft=R.n(it),pt=R("hi0z"),ut=R.n(pt),It=R("Hel2"),Nt=R("IOcx"),Rt=R("4cb6"),Mt={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},bt=R("J4zp"),At=R.n(bt),rt=Math.PI/180,Pt=function(){function jt(){s()(this,jt),this.projectionMatrix=Nt.b.create(),this.viewMatrix=Nt.b.create(),this.viewProjectionMatrix=Nt.b.create(),this.ViewProjectionMatrixUncentered=Nt.b.create(),this.viewUncenteredMatrix=Nt.b.create(),this.zoom=void 0,this.center=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(tt){var St=tt.zoom,Lt=St===void 0?1:St,ae=tt.pitch,ke=ae===void 0?0:ae,yn=tt.bearing,vn=yn===void 0?0:yn,Cn=tt.center,ne=Cn===void 0?[0,0]:Cn,_e=tt.offsetOrigin,Ze=_e===void 0?[0,0]:_e,In=tt.cameraHeight,ar=In===void 0?1:In,ur=tt.aspect,sr=ur===void 0?1:ur,Or=tt.near,ri=Or===void 0?.1:Or,Vr=tt.far,ni=Vr===void 0?1e3:Vr,fi=tt.fov,Oi=fi===void 0?0:fi;this.zoom=Lt,this.center=ne;var vi=ke*rt,si=(360-vn)*rt;Nt.b.perspective(this.projectionMatrix,Oi,sr,ri,ni);var Lr=Nt.d.fromValues(ar*Math.sin(vi)*Math.sin(si),-ar*Math.sin(vi)*Math.cos(si),ar*Math.cos(vi)),_r=Nt.d.fromValues(-Math.cos(vi)*Math.sin(si),Math.cos(vi)*Math.cos(si),Math.sin(vi));Nt.b.lookAt(this.viewMatrix,Lr,Nt.d.fromValues(0,0,0),_r),this.viewUncenteredMatrix=Nt.b.clone(this.viewMatrix),Nt.b.translate(this.viewMatrix,this.viewMatrix,Nt.d.fromValues(-Ze[0],Ze[1],0)),Nt.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Nt.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var tt=At()(this.center,2),St=tt[0],Lt=tt[1];return[St,Lt]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(tt,St){var Lt=85.0511287798,ae=Math.max(Math.min(Lt,tt[1]),-Lt),ke=256<<20,yn=Math.PI/180,vn=tt[0]*yn,Cn=ae*yn;Cn=Math.log(Math.tan(Math.PI/4+Cn/2));var ne=.5/Math.PI,_e=.5,Ze=-.5/Math.PI;return yn=.5,vn=ke*(ne*vn+_e)-215440491,Cn=-(ke*(Ze*Cn+yn)-106744817),[vn,Cn]}}]),jt}(),z,Q,gt,et,ot,xt,H,nt,at,q,_t,yt,Ft,Qt;function ee(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function Vt(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?ee(Object(tt),!0).forEach(function(St){v()(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):ee(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.amap-logo{
 display: none !important;
}
`);var $t=0;window.forceWebGL=!0;var Me="15cd8a57710d40c9b7c0e3cc120f1200",me="1.4.15",le="amap-script",be=!1,ze=[],Xe=12,Sn=(z=Object(Rt.injectable)(),Q=Object(Rt.inject)(x.TYPES.IGlobalConfigService),gt=Object(Rt.inject)(x.TYPES.ILogService),et=Object(Rt.inject)(x.TYPES.MapConfig),ot=Object(Rt.inject)(x.TYPES.ICoordinateSystemService),xt=Object(Rt.inject)(x.TYPES.IEventEmitter),z(H=(nt=(Qt=function(){function jt(){var Et=this;s()(this,jt),this.map=void 0,y()(this,"configService",at,this),y()(this,"logger",q,this),y()(this,"config",_t,this),y()(this,"coordinateSystemService",yt,this),y()(this,"eventEmitter",Ft,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(tt){var St=tt.camera,Lt=St.fov,ae=St.near,ke=St.far,yn=St.height,vn=St.pitch,Cn=St.rotation,ne=St.aspect,_e=St.position,Ze=Et.getCenter(),In=Ze.lng,ar=Ze.lat;if(Et.cameraChangedCallback){Et.viewport.syncWithMapCamera({aspect:ne,bearing:360-Cn,far:ke,fov:Lt,cameraHeight:yn,near:ae,pitch:vn,zoom:Et.map.getZoom()-1,center:[In,ar],offsetOrigin:[_e.x,_e.y]});var ur=Et.config.offsetZoom,sr=ur===void 0?Xe:ur;Et.viewport.getZoom()>sr?Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20_OFFSET):Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20),Et.cameraChangedCallback(Et.viewport)}}}return r()(jt,[{key:"addMarkerContainer",value:function(){var tt=this.map.getContainer();if(tt!==null){var St=tt.getElementsByClassName("amap-maps")[0];this.markerContainer=It.a.create("div","l7-marker-container",St)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(tt,St){x.MapServiceEvent.indexOf(tt)!==-1?this.eventEmitter.on(tt,St):this.map.on(tt,St)}},{key:"off",value:function(tt,St){x.MapServiceEvent.indexOf(tt)!==-1?this.eventEmitter.off(tt,St):this.map.off(tt,St)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var tt;return(tt=this.map.getContainer())===null||tt===void 0?void 0:tt.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var tt=this.map.getSize();return[tt.getWidth(),tt.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(tt){return this.map.setZoom(tt)}},{key:"getCenter",value:function(){var tt=this.map.getCenter();return{lng:tt.getLng(),lat:tt.getLat()}}},{key:"setCenter",value:function(tt){this.map.setCenter(tt)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var tt=this.map.getBounds().toBounds(),St=tt.getNorthEast(),Lt=tt.getSouthWest(),ae=this.getCenter(),ke=ae.lng>St.getLng()||ae.lng<Lt.getLng()?180-St.getLng():St.getLng(),yn=ae.lng<Lt.getLng()?Lt.getLng()-180:Lt.getLng();return[[yn,Lt.getLat()],[ke,St.getLat()]]}},{key:"getMinZoom",value:function(){var tt=this.map.get("zooms");return tt[0]-1}},{key:"getMaxZoom",value:function(){var tt=this.map.get("zooms");return tt[1]-1}},{key:"setRotation",value:function(tt){return this.map.setRotation(tt)}},{key:"setPitch",value:function(tt){return this.map.setPitch(tt)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(tt){this.map.panTo(tt)}},{key:"panBy",value:function(tt){this.map.panTo(tt)}},{key:"fitBounds",value:function(tt){this.map.setBounds(new AMap.Bounds([tt[0][0],tt[0][1],tt[1][0],tt[1][1]]))}},{key:"setZoomAndCenter",value:function(tt,St){this.map.setZoomAndCenter(tt,St)}},{key:"setMapStyle",value:function(tt){this.map.setMapStyle(this.getMapStyle(tt))}},{key:"setMapStatus",value:function(tt){this.map.setStatus(tt)}},{key:"pixelToLngLat",value:function(tt){var St=this.map.pixelToLngLat(new AMap.Pixel(tt[0],tt[1]));return{lng:St.getLng(),lat:St.getLat()}}},{key:"lngLatToPixel",value:function(tt){var St=this.map.lnglatToPixel(new AMap.LngLat(tt[0],tt[1]));return{x:St.getX(),y:St.getY()}}},{key:"containerToLngLat",value:function(tt){var St=new AMap.Pixel(tt[0],tt[1]),Lt=this.map.containerToLngLat(St);return{lng:Lt==null?void 0:Lt.getLng(),lat:Lt==null?void 0:Lt.getLat()}}},{key:"lngLatToContainer",value:function(tt){var St=new AMap.LngLat(tt[0],tt[1]),Lt=this.map.lngLatToContainer(St);return{x:Lt.getX(),y:Lt.getY()}}},{key:"lngLatToMercator",value:function(tt,St){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(tt,St,Lt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=this.viewport.projectFlat(tt),vn=Nt.b.create();return Nt.b.translate(vn,vn,Nt.d.fromValues(yn[0],yn[1],St)),Nt.b.scale(vn,vn,Nt.d.fromValues(ae[0],ae[1],ae[2])),Nt.b.rotateX(vn,vn,Lt[0]),Nt.b.rotateY(vn,vn,Lt[1]),Nt.b.rotateZ(vn,vn,Lt[2]),vn}},{key:"init",value:function(){var Et=X()(ft.a.mark(function St(){var Lt=this,ae,ke,yn,vn,Cn,ne,_e,Ze,In,ar,ur,sr,Or,ri;return ft.a.wrap(function(ni){for(;;)switch(ni.prev=ni.next){case 0:return ae=this.config,ke=ae.id,yn=ae.style,vn=yn===void 0?"light":yn,Cn=ae.minZoom,ne=Cn===void 0?0:Cn,_e=ae.maxZoom,Ze=_e===void 0?18:_e,In=ae.token,ar=In===void 0?Me:In,ur=ae.mapInstance,sr=ae.plugin,Or=sr===void 0?[]:sr,ri=k()(ae,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),ni.next=3,new Promise(function(fi){var Oi=function(){if(ur)Lt.map=ur,Lt.$mapContainer=Lt.map.getContainer(),setTimeout(function(){Lt.map.on("camerachange",Lt.handleCameraChanged),fi()},30);else{Lt.$mapContainer=Lt.creatAmapContainer(ke);var si=new AMap.Map(Lt.$mapContainer,Vt({mapStyle:Lt.getMapStyle(vn),zooms:[ne,Ze],viewMode:"3D"},ri));si.on("camerachange",Lt.handleCameraChanged),Lt.map=si,setTimeout(function(){fi()},10)}};!be&&!ur?(ar===Me&&Lt.logger.warn(Lt.configService.getSceneWarninfo("MapToken")),be=!0,Or.push("Map3D"),ut.a.load({key:ar,version:me,plugins:Or}).then(function(vi){Oi(),ze.length&&(ze.forEach(function(si){return si()}),ze=[])}).catch(function(vi){throw new Error(vi)})):be&&window.AMap||ur?Oi():ze.push(Oi)});case 3:this.viewport=new Pt;case 4:case"end":return ni.stop()}},St,this)}));function tt(){return Et.apply(this,arguments)}return tt}()},{key:"exportMap",value:function(tt){var St,Lt=(St=this.getContainer())===null||St===void 0?void 0:St.getElementsByClassName("amap-layer")[0],ae=tt==="jpg"?Lt==null?void 0:Lt.toDataURL("image/jpeg"):Lt==null?void 0:Lt.toDataURL("image/png");return ae}},{key:"emit",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).emit.apply(St,[tt].concat(ae))}},{key:"once",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).once.apply(St,[tt].concat(ae))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var tt=document.getElementById(le);tt&&document.head.removeChild(tt)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(tt){this.cameraChangedCallback=tt}},{key:"getMapStyle",value:function(tt){return Mt[tt]?Mt[tt]:tt}},{key:"creatAmapContainer",value:function(tt){var St=tt;typeof tt=="string"&&(St=document.getElementById(tt));var Lt=document.createElement("div");return Lt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Lt.id="l7_amap_div"+$t++,St.appendChild(Lt),Lt}}]),jt}(),Qt),at=_()(nt.prototype,"configService",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=_()(nt.prototype,"logger",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=_()(nt.prototype,"config",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=_()(nt.prototype,"coordinateSystemService",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=_()(nt.prototype,"eventEmitter",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt))||H);function Xn(jt){var Et=Hn();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function Hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var nn=function(jt){n()(tt,jt);var Et=Xn(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"getServiceConstructor",value:function(){return Sn}}]),tt}(K);function en(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function An(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?en(Object(tt),!0).forEach(function(St){Nn(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):en(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}function Nn(jt,Et,tt){return Et in jt?Object.defineProperty(jt,Et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):jt[Et]=tt,jt}function fr(jt,Et){return pe(jt)||Jt(jt,Et)||Ce(jt,Et)||hi()}function hi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(jt,Et){if(!!jt){if(typeof jt=="string")return Te(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Te(jt,Et)}}function Te(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function Jt(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function pe(jt){if(Array.isArray(jt))return jt}var Wt=E.a.memo(function(jt){var Et=jt.style,tt=jt.className,St=jt.map,Lt=jt.option,ae=jt.onSceneLoaded,ke=jt.children,yn=Object(U.useRef)(null),vn=Object(U.useState)(),Cn=fr(vn,2),ne=Cn[0],_e=Cn[1];return Object(U.useEffect)(function(){var Ze=new t.Scene(An(An({id:yn.current},Lt),{},{map:new nn(St)}));return Ze.on("loaded",function(){_e(Ze),ae&&ae(Ze)}),function(){Ze.destroy()}},[]),Object(U.useEffect)(function(){ne&&St.style&&ne.setMapStyle(St.style)},[JSON.stringify(St.style)]),Object(U.useEffect)(function(){ne&&St.zoom&&ne.setZoom(St.zoom)},[St.zoom]),Object(U.useEffect)(function(){ne&&St.center&&ne.setCenter(St.center)},[JSON.stringify(St.center)]),Object(U.useEffect)(function(){ne&&St.pitch&&ne.setPitch(St.pitch)},[St.pitch]),Object(U.useEffect)(function(){ne&&St.rotation&&ne.setRotation(St.rotation)},[St.rotation]),E.a.createElement(T.Provider,{value:ne},E.a.createElement("div",{ref:yn,className:tt,style:Et},ne&&ke))}),ie=Wt,Ae=R("4ZJM"),ue=R.n(Ae),xe=R("1OyB"),$e=R("vuIU"),Fn=R("md7G"),or=R("foSv"),En=R("Ji7U"),Pn=R("JX7q"),br=R("ODXe"),Pr=R("bl9R");function ln(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Cr(jt,Et){var tt=Pr.transformMat4([],Et,jt);return Pr.scale(tt,tt,1/tt[3]),tt}function Ar(jt,Et){var tt=jt%Et;return tt<0?Et+tt:tt}function Be(jt,Et,tt){return tt*Et+(1-tt)*jt}var We=R("ZaHm"),Ye=R("ZxFD"),fn=R("n+fv");function gn(jt,Et){if(!jt)throw new Error(Et||"viewport-mercator-project: assertion failed.")}var Bn=Math.PI,bn=Bn/4,Ln=Bn/180,ir=180/Bn,Yn=512,_n=4003e4,Dr=1.5;function vr(jt){return Math.pow(2,jt)}function zr(jt){return Math.log2(jt)}function Ai(jt,Et){var tt=Object(br.a)(jt,2),St=tt[0],Lt=tt[1];gn(Number.isFinite(St)&&Number.isFinite(Et)),gn(Number.isFinite(Lt)&&Lt>=-90&&Lt<=90,"invalid latitude"),Et*=Yn;var ae=St*Ln,ke=Lt*Ln,yn=Et*(ae+Bn)/(2*Bn),vn=Et*(Bn-Math.log(Math.tan(bn+ke*.5)))/(2*Bn);return[yn,vn]}function Aa(jt,Et){var tt=Object(br.a)(jt,2),St=tt[0],Lt=tt[1];Et*=Yn;var ae=St/Et*(2*Bn)-Bn,ke=2*(Math.atan(Math.exp(Bn-Lt/Et*(2*Bn)))-bn);return[ae*ir,ke*ir]}function ka(jt){var Et=jt.latitude;gn(Number.isFinite(Et));var tt=Math.cos(Et*Ln);return zr(_n*tt)-9}function eo(jt){var Et=jt.latitude,tt=jt.longitude,St=jt.zoom,Lt=jt.scale,ae=jt.highPrecision,ke=ae===void 0?!1:ae;Lt=Lt!==void 0?Lt:vr(St),gn(Number.isFinite(Et)&&Number.isFinite(tt)&&Number.isFinite(Lt));var yn={},vn=Yn*Lt,Cn=Math.cos(Et*Ln),ne=vn/360,_e=ne/Cn,Ze=vn/_n/Cn;if(yn.pixelsPerMeter=[Ze,-Ze,Ze],yn.metersPerPixel=[1/Ze,-1/Ze,1/Ze],yn.pixelsPerDegree=[ne,-_e,Ze],yn.degreesPerPixel=[1/ne,-1/_e,1/Ze],ke){var In=Ln*Math.tan(Et*Ln)/Cn,ar=ne*In/2,ur=vn/_n*In,sr=ur/_e*Ze;yn.pixelsPerDegree2=[0,-ar,ur],yn.pixelsPerMeter2=[sr,0,sr]}return yn}function Zo(jt,Et){var tt=Object(br.a)(jt,3),St=tt[0],Lt=tt[1],ae=tt[2],ke=Object(br.a)(Et,3),yn=ke[0],vn=ke[1],Cn=ke[2],ne=1,_e=eo({longitude:St,latitude:Lt,scale:ne,highPrecision:!0}),Ze=_e.pixelsPerMeter,In=_e.pixelsPerMeter2,ar=Ai(jt,ne);ar[0]+=yn*(Ze[0]+In[0]*vn),ar[1]+=vn*(Ze[1]+In[1]*vn);var ur=Aa(ar,ne),sr=(ae||0)+(Cn||0);return Number.isFinite(ae)||Number.isFinite(Cn)?[ur[0],ur[1],sr]:ur}function Ea(jt){var Et=jt.height,tt=jt.pitch,St=jt.bearing,Lt=jt.altitude,ae=jt.center,ke=ae===void 0?null:ae,yn=jt.flipY,vn=yn===void 0?!1:yn,Cn=ln();return We.translate(Cn,Cn,[0,0,-Lt]),We.scale(Cn,Cn,[1,1,1/Et]),We.rotateX(Cn,Cn,-tt*Ln),We.rotateZ(Cn,Cn,St*Ln),vn&&We.scale(Cn,Cn,[1,-1,1]),ke&&We.translate(Cn,Cn,fn.negate([],ke)),Cn}function so(jt){var Et=jt.width,tt=jt.height,St=jt.altitude,Lt=St===void 0?Dr:St,ae=jt.pitch,ke=ae===void 0?0:ae,yn=jt.nearZMultiplier,vn=yn===void 0?1:yn,Cn=jt.farZMultiplier,ne=Cn===void 0?1:Cn,_e=ke*Ln,Ze=Math.atan(.5/Lt),In=Math.sin(Ze)*Lt/Math.sin(Math.PI/2-_e-Ze),ar=Math.cos(Math.PI/2-_e)*In+Lt;return{fov:2*Math.atan(tt/2/Lt),aspect:Et/tt,focalDistance:Lt,near:vn,far:ar*ne}}function Ko(jt){var Et=jt.width,tt=jt.height,St=jt.pitch,Lt=jt.altitude,ae=jt.nearZMultiplier,ke=jt.farZMultiplier,yn=so({width:Et,height:tt,altitude:Lt,pitch:St,nearZMultiplier:ae,farZMultiplier:ke}),vn=yn.fov,Cn=yn.aspect,ne=yn.near,_e=yn.far,Ze=We.perspective([],vn,Cn,ne,_e);return Ze}function no(jt,Et){var tt=Object(br.a)(jt,3),St=tt[0],Lt=tt[1],ae=tt[2],ke=ae===void 0?0:ae;return gn(Number.isFinite(St)&&Number.isFinite(Lt)&&Number.isFinite(ke)),Cr(Et,[St,Lt,ke,1])}function So(jt,Et){var tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,St=Object(br.a)(jt,3),Lt=St[0],ae=St[1],ke=St[2];if(gn(Number.isFinite(Lt)&&Number.isFinite(ae),"invalid pixel coordinate"),Number.isFinite(ke)){var yn=Cr(Et,[Lt,ae,ke,1]);return yn}var vn=Cr(Et,[Lt,ae,0,1]),Cn=Cr(Et,[Lt,ae,1,1]),ne=vn[2],_e=Cn[2],Ze=ne===_e?0:((tt||0)-ne)/(_e-ne);return Ye.lerp([],vn,Cn,Ze)}var cs=ln(),wa=function(){function jt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=Et.width,St=Et.height,Lt=Et.viewMatrix,ae=Lt===void 0?cs:Lt,ke=Et.projectionMatrix,yn=ke===void 0?cs:ke;Object(xe.a)(this,jt),this.width=tt||1,this.height=St||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=ae,this.projectionMatrix=yn;var vn=ln();We.multiply(vn,vn,this.projectionMatrix),We.multiply(vn,vn,this.viewMatrix),this.viewProjectionMatrix=vn;var Cn=ln();We.scale(Cn,Cn,[this.width/2,-this.height/2,1]),We.translate(Cn,Cn,[1,-1,0]),We.multiply(Cn,Cn,this.viewProjectionMatrix);var ne=We.invert(ln(),Cn);if(!ne)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Cn,this.pixelUnprojectionMatrix=ne,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object($e.a)(jt,[{key:"equals",value:function(tt){return tt instanceof jt?tt.width===this.width&&tt.height===this.height&&We.equals(tt.projectionMatrix,this.projectionMatrix)&&We.equals(tt.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=St.topLeft,ae=Lt===void 0?!0:Lt,ke=this.projectPosition(tt),yn=no(ke,this.pixelProjectionMatrix),vn=Object(br.a)(yn,2),Cn=vn[0],ne=vn[1],_e=ae?ne:this.height-ne;return tt.length===2?[Cn,_e]:[Cn,_e,yn[2]]}},{key:"unproject",value:function(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=St.topLeft,ae=Lt===void 0?!0:Lt,ke=St.targetZ,yn=Object(br.a)(tt,3),vn=yn[0],Cn=yn[1],ne=yn[2],_e=ae?Cn:this.height-Cn,Ze=ke&&ke*this.pixelsPerMeter,In=So([vn,_e,ne],this.pixelUnprojectionMatrix,Ze),ar=this.unprojectPosition(In),ur=Object(br.a)(ar,3),sr=ur[0],Or=ur[1],ri=ur[2];return Number.isFinite(ne)?[sr,Or,ri]:Number.isFinite(ke)?[sr,Or,ke]:[sr,Or]}},{key:"projectPosition",value:function(tt){var St=this.projectFlat(tt),Lt=Object(br.a)(St,2),ae=Lt[0],ke=Lt[1],yn=(tt[2]||0)*this.pixelsPerMeter;return[ae,ke,yn]}},{key:"unprojectPosition",value:function(tt){var St=this.unprojectFlat(tt),Lt=Object(br.a)(St,2),ae=Lt[0],ke=Lt[1],yn=(tt[2]||0)/this.pixelsPerMeter;return[ae,ke,yn]}},{key:"projectFlat",value:function(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return tt}},{key:"unprojectFlat",value:function(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return tt}}]),jt}();function zo(jt){var Et=jt.width,tt=jt.height,St=jt.bounds,Lt=jt.minExtent,ae=Lt===void 0?0:Lt,ke=jt.maxZoom,yn=ke===void 0?24:ke,vn=jt.padding,Cn=vn===void 0?0:vn,ne=jt.offset,_e=ne===void 0?[0,0]:ne,Ze=Object(br.a)(St,2),In=Object(br.a)(Ze[0],2),ar=In[0],ur=In[1],sr=Object(br.a)(Ze[1],2),Or=sr[0],ri=sr[1];if(Number.isFinite(Cn)){var Vr=Cn;Cn={top:Vr,bottom:Vr,left:Vr,right:Vr}}else gn(Number.isFinite(Cn.top)&&Number.isFinite(Cn.bottom)&&Number.isFinite(Cn.left)&&Number.isFinite(Cn.right));var ni=new Ro({width:Et,height:tt,longitude:0,latitude:0,zoom:0}),fi=ni.project([ar,ri]),Oi=ni.project([Or,ur]),vi=[Math.max(Math.abs(Oi[0]-fi[0]),ae),Math.max(Math.abs(Oi[1]-fi[1]),ae)],si=[Et-Cn.left-Cn.right-Math.abs(_e[0])*2,tt-Cn.top-Cn.bottom-Math.abs(_e[1])*2];gn(si[0]>0&&si[1]>0);var Lr=si[0]/vi[0],_r=si[1]/vi[1],di=(Cn.right-Cn.left)/2/Lr,Vi=(Cn.bottom-Cn.top)/2/_r,qr=[(Oi[0]+fi[0])/2+di,(Oi[1]+fi[1])/2+Vi],na=ni.unproject(qr),wi=ni.zoom+Math.log2(Math.abs(Math.min(Lr,_r)));return{longitude:na[0],latitude:na[1],zoom:Math.min(wi,yn)}}var Ro=function(jt){Object(En.a)(Et,jt);function Et(){var tt,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=St.width,ae=St.height,ke=St.latitude,yn=ke===void 0?0:ke,vn=St.longitude,Cn=vn===void 0?0:vn,ne=St.zoom,_e=ne===void 0?0:ne,Ze=St.pitch,In=Ze===void 0?0:Ze,ar=St.bearing,ur=ar===void 0?0:ar,sr=St.altitude,Or=sr===void 0?1.5:sr,ri=St.nearZMultiplier,Vr=St.farZMultiplier;Object(xe.a)(this,Et),Lt=Lt||1,ae=ae||1;var ni=vr(_e);Or=Math.max(.75,Or);var fi=Ai([Cn,yn],ni);fi[2]=0;var Oi=Ko({width:Lt,height:ae,pitch:In,bearing:ur,altitude:Or,nearZMultiplier:ri||1/ae,farZMultiplier:Vr||1.01}),vi=Ea({height:ae,center:fi,pitch:In,bearing:ur,altitude:Or,flipY:!0});return tt=Object(Fn.a)(this,Object(or.a)(Et).call(this,{width:Lt,height:ae,viewMatrix:vi,projectionMatrix:Oi})),tt.latitude=yn,tt.longitude=Cn,tt.zoom=_e,tt.pitch=In,tt.bearing=ur,tt.altitude=Or,tt.scale=ni,tt.center=fi,tt.pixelsPerMeter=eo(Object(Pn.a)(Object(Pn.a)(tt))).pixelsPerMeter[2],Object.freeze(Object(Pn.a)(Object(Pn.a)(tt))),tt}return Object($e.a)(Et,[{key:"projectFlat",value:function(St){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ai(St,Lt)}},{key:"unprojectFlat",value:function(St){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Aa(St,Lt)}},{key:"getMapCenterByLngLatPosition",value:function(St){var Lt=St.lngLat,ae=St.pos,ke=So(ae,this.pixelUnprojectionMatrix),yn=Ai(Lt,this.scale),vn=Ye.add([],yn,Ye.negate([],ke)),Cn=Ye.add([],this.center,vn);return Aa(Cn,this.scale)}},{key:"getLocationAtPoint",value:function(St){var Lt=St.lngLat,ae=St.pos;return this.getMapCenterByLngLatPosition({lngLat:Lt,pos:ae})}},{key:"fitBounds",value:function(St){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=this.width,ke=this.height,yn=zo(Object.assign({width:ae,height:ke,bounds:St},Lt)),vn=yn.longitude,Cn=yn.latitude,ne=yn.zoom;return new Et({width:ae,height:ke,longitude:vn,latitude:Cn,zoom:ne})}}]),Et}(wa),fu=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(tt){var St=tt.center,Lt=tt.zoom,ae=tt.pitch,ke=tt.bearing,yn=tt.viewportHeight,vn=tt.viewportWidth;this.viewport=new Ro({width:vn,height:yn,longitude:St&&St[0],latitude:St&&St[1],zoom:Lt,pitch:ae,bearing:ke})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(tt,St){return this.viewport.projectFlat(tt,St)}}]),jt}(),Xo={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},au,$s,Ne,oe,Ht,Ee,an,zn,qn,Un,Jr,Si,Ci,ki;function oa(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function Xa(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?oa(Object(tt),!0).forEach(function(St){v()(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):oa(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ue.a;var ma={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},mo=0,Ba=12,ao="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",yo=(au=Object(Rt.injectable)(),$s=Object(Rt.inject)(x.TYPES.MapConfig),Ne=Object(Rt.inject)(x.TYPES.IGlobalConfigService),oe=Object(Rt.inject)(x.TYPES.ILogService),Ht=Object(Rt.inject)(x.TYPES.ICoordinateSystemService),Ee=Object(Rt.inject)(x.TYPES.IEventEmitter),au(an=(zn=(ki=function(){function jt(){var Et=this;s()(this,jt),this.map=void 0,y()(this,"config",qn,this),y()(this,"configService",Un,this),y()(this,"logger",Jr,this),y()(this,"coordinateSystemService",Si,this),y()(this,"eventEmitter",Ci,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var tt=Et.map.getCenter().wrap(),St=tt.lat,Lt=tt.lng;Et.viewport.syncWithMapCamera({bearing:Et.map.getBearing(),center:[Lt,St],viewportHeight:Et.map.transform.height,pitch:Et.map.getPitch(),viewportWidth:Et.map.transform.width,zoom:Et.map.getZoom(),cameraHeight:0});var ae=Et.config.offsetZoom,ke=ae===void 0?Ba:ae;Et.viewport.getZoom()>ke?Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),Et.cameraChangedCallback(Et.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var tt=this.map.getCanvasContainer();this.markerContainer=It.a.create("div","l7-marker-container",tt),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(tt,St){x.MapServiceEvent.indexOf(tt)!==-1?this.eventEmitter.on(tt,St):this.map.on(ma[tt]||tt,St)}},{key:"off",value:function(tt,St){this.map.off(ma[tt]||tt,St)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var tt=this.map.transform;return[tt.width,tt.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(tt){return this.map.setZoom(tt)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(tt){this.map.setCenter(tt)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(tt){this.map.setBearing(tt)}},{key:"zoomIn",value:function(tt,St){this.map.zoomIn(tt,St)}},{key:"zoomOut",value:function(tt,St){this.map.zoomOut(tt,St)}},{key:"setPitch",value:function(tt){return this.map.setPitch(tt)}},{key:"panTo",value:function(tt){this.map.panTo(tt)}},{key:"panBy",value:function(tt){this.panTo(tt)}},{key:"fitBounds",value:function(tt,St){this.map.fitBounds(tt,St)}},{key:"setMaxZoom",value:function(tt){this.map.setMaxZoom(tt)}},{key:"setMinZoom",value:function(tt){this.map.setMinZoom(tt)}},{key:"setMapStatus",value:function(tt){tt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),tt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),tt.dragEnable===!1&&this.map.dragPan.disable(),tt.dragEnable===!0&&this.map.dragPan.enable(),tt.rotateEnable===!1&&this.map.dragRotate.disable(),tt.rotateEnable===!0&&this.map.dragRotate.enable(),tt.keyboardEnable===!1&&this.map.keyboard.disable(),tt.keyboardEnable===!0&&this.map.keyboard.enable(),tt.zoomEnable===!1&&this.map.scrollZoom.disable(),tt.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(tt,St){this.map.flyTo({zoom:tt,center:St})}},{key:"setMapStyle",value:function(tt){this.map.setStyle(this.getMapStyle(tt))}},{key:"pixelToLngLat",value:function(tt){return this.map.unproject(tt)}},{key:"lngLatToPixel",value:function(tt){return this.map.project(tt)}},{key:"containerToLngLat",value:function(tt){return this.map.unproject(tt)}},{key:"lngLatToContainer",value:function(tt){return this.map.project(tt)}},{key:"lngLatToMercator",value:function(tt,St){var Lt=window.mapboxgl.MercatorCoordinate.fromLngLat(tt,St),ae=Lt.x,ke=ae===void 0?0:ae,yn=Lt.y,vn=yn===void 0?0:yn,Cn=Lt.z,ne=Cn===void 0?0:Cn;return{x:ke,y:vn,z:ne}}},{key:"getModelMatrix",value:function(tt,St,Lt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=window.mapboxgl.MercatorCoordinate.fromLngLat(tt,St),vn=yn.meterInMercatorCoordinateUnits(),Cn=Nt.b.create();return Nt.b.translate(Cn,Cn,Nt.d.fromValues(yn.x-ke.x,yn.y-ke.y,yn.z||0-ke.z)),Nt.b.scale(Cn,Cn,Nt.d.fromValues(vn*ae[0],-vn*ae[1],vn*ae[2])),Nt.b.rotateX(Cn,Cn,Lt[0]),Nt.b.rotateY(Cn,Cn,Lt[1]),Nt.b.rotateZ(Cn,Cn,Lt[2]),Cn}},{key:"init",value:function(){var Et=X()(ft.a.mark(function St(){var Lt,ae,ke,yn,vn,Cn,ne,_e,Ze,In,ar,ur,sr;return ft.a.wrap(function(ri){for(;;)switch(ri.prev=ri.next){case 0:Lt=this.config,ae=Lt.id,ke=ae===void 0?"map":ae,yn=Lt.attributionControl,vn=yn===void 0?!1:yn,Cn=Lt.style,ne=Cn===void 0?"light":Cn,_e=Lt.token,Ze=_e===void 0?ao:_e,In=Lt.rotation,ar=In===void 0?0:In,ur=Lt.mapInstance,sr=k()(Lt,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new fu,!ur&&!window.mapboxgl&&this.logger.error(this.configService.getSceneWarninfo("SDK")),Ze===ao&&ne!=="blank"&&!window.mapboxgl.accessToken&&!ur&&this.logger.warn(this.configService.getSceneWarninfo("MapToken")),!ur&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=Ze),ur?(this.map=ur,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ke),this.map=new window.mapboxgl.Map(Xa({container:this.$mapContainer,style:this.getMapStyle(ne),attributionControl:vn,bearing:ar},sr))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return ri.stop()}},St,this)}));function tt(){return Et.apply(this,arguments)}return tt}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).emit.apply(St,[tt].concat(ae))}},{key:"once",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).once.apply(St,[tt].concat(ae))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(tt){var St=this.map.getCanvas(),Lt=tt==="jpg"?St==null?void 0:St.toDataURL("image/jpeg"):St==null?void 0:St.toDataURL("image/png");return Lt}},{key:"onCameraChanged",value:function(tt){this.cameraChangedCallback=tt}},{key:"creatAmapContainer",value:function(tt){var St=tt;typeof tt=="string"&&(St=document.getElementById(tt));var Lt=document.createElement("div");return Lt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Lt.id="l7_mapbox_div"+mo++,St.appendChild(Lt),Lt}},{key:"getMapStyle",value:function(tt){return typeof tt!="string"?tt:Xo[tt]?Xo[tt]:tt}}]),jt}(),ki),qn=_()(zn.prototype,"config",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un=_()(zn.prototype,"configService",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=_()(zn.prototype,"logger",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=_()(zn.prototype,"coordinateSystemService",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ci=_()(zn.prototype,"eventEmitter",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zn))||an);function Ja(jt){var Et=_o();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function _o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var ts=function(jt){n()(tt,jt);var Et=Ja(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"getServiceConstructor",value:function(){return yo}}]),tt}(K);function Do(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function xs(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?Do(Object(tt),!0).forEach(function(St){Mo(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):Do(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}function Mo(jt,Et,tt){return Et in jt?Object.defineProperty(jt,Et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):jt[Et]=tt,jt}function $a(jt,Et){return hr(jt)||mn(jt,Et)||as(jt,Et)||Ms()}function Ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function as(jt,Et){if(!!jt){if(typeof jt=="string")return Ca(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Ca(jt,Et)}}function Ca(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function mn(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function hr(jt){if(Array.isArray(jt))return jt}var Gr=E.a.memo(function(jt){var Et=jt.style,tt=jt.className,St=jt.map,Lt=jt.option,ae=jt.onSceneLoaded,ke=Object(U.createRef)(),yn=Object(U.useState)(),vn=$a(yn,2),Cn=vn[0],ne=vn[1];return Object(U.useEffect)(function(){var _e=new t.Scene(xs(xs({id:ke.current},Lt),{},{map:new ts(St)}));return _e.on("loaded",function(){ne(_e),ae&&ae(_e)}),function(){_e.destroy()}},[]),Object(U.useEffect)(function(){Cn&&St.style&&Cn.setMapStyle(St.style)},[JSON.stringify(St.style)]),Object(U.useEffect)(function(){Cn&&St.zoom&&Cn.setZoom(St.zoom)},[St.zoom]),Object(U.useEffect)(function(){Cn&&St.center&&Cn.setCenter(St.center)},[JSON.stringify(St.center)]),Object(U.useEffect)(function(){Cn&&St.pitch!==void 0&&Cn.setPitch(St.pitch||0)},[St.pitch]),Object(U.useEffect)(function(){Cn&&St.rotation&&Cn.setRotation(St.rotation)},[St.rotation]),E.a.createElement(T.Provider,{value:Cn},Object(U.createElement)("div",{ref:ke,style:Et,className:tt},Cn&&jt.children))}),Ui=Gr,Ka=R("PJYZ"),xo=R.n(Ka),vo=R("QkVN"),qi=R.n(vo),Qa=R("uhBA"),bs=R("cDf5"),Es=R.n(bs),Ga=R("zvhG"),Pu=R.n(Ga);function Uo(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=Ps(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function Ps(jt,Et){if(!!jt){if(typeof jt=="string")return Qs(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Qs(jt,Et)}}function Qs(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var fs;function hs(jt,Et,tt){var St=tt-Et,Lt=((jt-Et)%St+St)%St+Et;return Lt===Et?tt:Lt}function os(jt,Et,tt){return Math.min(tt,Math.max(Et,jt))}function ds(jt,Et,tt){return jt*(1-tt)+Et*tt}function Ts(jt,Et,tt,St){var Lt=new Pu.a(jt,Et,tt,St);return function(ae){return Lt.solve(ae)}}var Ou=Ts(.25,.1,.25,1);function Uu(){return window.matchMedia?(fs==null&&(fs=window.matchMedia("(prefers-reduced-motion: reduce)")),fs.matches):!1}function uo(jt,Et){var tt={},St=Uo(Et),Lt;try{for(St.s();!(Lt=St.n()).done;){var ae=Lt.value;ae in jt&&(tt[ae]=jt[ae])}}catch(ke){St.e(ke)}finally{St.f()}return tt}var Fs=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),ku=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ul=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function ll(jt){var Et=ku(jt);return{cancel:function(){return ul(Et)}}}var Qu=function(){function jt(Et,tt){s()(this,jt),this.ne=void 0,this.sw=void 0,Et&&(tt?this.setSouthWest(Et).setNorthEast(tt):Et.length===4?this.setSouthWest([Et[0],Et[1]]).setNorthEast([Et[2],Et[3]]):this.setSouthWest(Et[0]).setNorthEast(Et[1]))}return r()(jt,[{key:"setNorthEast",value:function(tt){return this.ne=tt instanceof La?new La(tt.lng,tt.lat):La.convert(tt),this}},{key:"setSouthWest",value:function(tt){return this.sw=tt instanceof La?new La(tt.lng,tt.lat):La.convert(tt),this}},{key:"extend",value:function(tt){var St=this.sw,Lt=this.ne,ae,ke;if(tt instanceof La)ae=tt,ke=tt;else if(tt instanceof jt){if(ae=tt.sw,ke=tt.ne,!ae||!ke)return this}else{if(Array.isArray(tt))if(tt.length===4||tt.every(Array.isArray)){var yn=tt;return this.extend(jt.convert(yn))}else{var vn=tt;return this.extend(La.convert(vn))}return this}return!St&&!Lt?(this.sw=new La(ae.lng,ae.lat),this.ne=new La(ke.lng,ke.lat)):(St.lng=Math.min(ae.lng,St.lng),St.lat=Math.min(ae.lat,St.lat),Lt.lng=Math.max(ke.lng,Lt.lng),Lt.lat=Math.max(ke.lat,Lt.lat)),this}},{key:"getCenter",value:function(){return new La((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new La(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new La(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(tt){var St=La.convert(tt),Lt=St.lng,ae=St.lat,ke=this.sw.lat<=ae&&ae<=this.ne.lat,yn=this.sw.lng<=Lt&&Lt<=this.ne.lng;return this.sw.lng>this.ne.lng&&(yn=this.sw.lng>=Lt&&Lt>=this.ne.lng),ke&&yn}}],[{key:"convert",value:function(tt){return tt instanceof jt?tt:new jt(tt)}}]),jt}(),To=63710088e-1,La=function(){function jt(Et,tt){if(s()(this,jt),this.lng=void 0,this.lat=void 0,isNaN(Et)||isNaN(tt))throw new Error("Invalid LngLat object: (".concat(Et,", ").concat(tt,")"));if(this.lng=+Et,this.lat=+tt,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return r()(jt,[{key:"wrap",value:function(){return new jt(hs(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toBounds",value:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,St=40075017,Lt=360*tt/St,ae=Lt/Math.cos(Math.PI/180*this.lat);return new Qu(new jt(this.lng-ae,this.lat-Lt),new jt(this.lng+ae,this.lat+Lt))}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(tt){var St=Math.PI/180,Lt=this.lat*St,ae=tt.lat*St,ke=Math.sin(Lt)*Math.sin(ae)+Math.cos(Lt)*Math.cos(ae)*Math.cos((tt.lng-this.lng)*St),yn=To*Math.acos(Math.min(ke,1));return yn}}],[{key:"convert",value:function(tt){if(tt instanceof jt)return tt;if(Array.isArray(tt)&&(tt.length===2||tt.length===3))return new jt(Number(tt[0]),Number(tt[1]));if(!Array.isArray(tt)&&Es()(tt)==="object"&&tt!==null){var St="lng"in tt?tt.lng:tt.lon;return new jt(Number(St),Number(tt.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),jt}(),ya=function(){function jt(Et,tt){s()(this,jt),this.x=void 0,this.y=void 0,this.x=Et,this.y=tt}return r()(jt,[{key:"clone",value:function(){return new jt(this.x,this.y)}},{key:"_add",value:function(tt){return this.x+=tt.x,this.y+=tt.y,this}},{key:"add",value:function(tt){return this.clone()._add(tt)}},{key:"_sub",value:function(tt){return this.x-=tt.x,this.y-=tt.y,this}},{key:"sub",value:function(tt){return this.clone()._sub(tt)}},{key:"_multByPoint",value:function(tt){return this.x*=tt.x,this.y*=tt.y,this}},{key:"multByPoint",value:function(tt){return this.clone()._multByPoint(tt)}},{key:"_divByPoint",value:function(tt){return this.x/=tt.x,this.y/=tt.y,this}},{key:"divByPoint",value:function(tt){return this.clone()._divByPoint(tt)}},{key:"_mult",value:function(tt){return this.x*=tt,this.y*=tt,this}},{key:"mult",value:function(tt){return this.clone()._mult(tt)}},{key:"_div",value:function(tt){return this.x/=tt,this.y/=tt,this}},{key:"div",value:function(tt){return this.clone()._div(tt)}},{key:"_rotate",value:function(tt){var St=Math.cos(tt),Lt=Math.sin(tt),ae=St*this.x-Lt*this.y,ke=Lt*this.x+St*this.y;return this.x=ae,this.y=ke,this}},{key:"rotate",value:function(tt){return this.clone()._rotate(tt)}},{key:"_rotateAround",value:function(tt,St){var Lt=Math.cos(tt),ae=Math.sin(tt),ke=St.x+Lt*(this.x-St.x)-ae*(this.y-St.y),yn=St.y+ae*(this.x-St.x)+Lt*(this.y-St.y);return this.x=ke,this.y=yn,this}},{key:"roateAround",value:function(tt,St){return this.clone()._rotateAround(tt,St)}},{key:"_matMult",value:function(tt){var St=tt[0]*this.x+tt[1]*this.y,Lt=tt[2]*this.x+tt[3]*this.y;return this.x=St,this.y=Lt,this}},{key:"matMult",value:function(tt){return this.clone()._matMult(tt)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var tt=this.y;return this.y=this.x,this.x=-tt,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(tt){return this.x===tt.x&&this.y===tt.y}},{key:"dist",value:function(tt){return Math.sqrt(this.distSqr(tt))}},{key:"distSqr",value:function(tt){var St=tt.x-this.x,Lt=tt.y-this.y;return St*St+Lt*Lt}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(tt){return Math.atan2(this.y-tt.y,this.x-tt.x)}},{key:"angleWith",value:function(tt){return this.angleWithSep(tt.x,tt.y)}},{key:"angleWithSep",value:function(tt,St){return Math.atan2(this.x*St-this.y*tt,this.x*tt+this.y*St)}}],[{key:"convert",value:function(tt){return tt instanceof jt?tt:Array.isArray(tt)?new jt(tt[0],tt[1]):tt}}]),jt}(),wo=function(){function jt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(s()(this,jt),this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,isNaN(Et)||Et<0||isNaN(tt)||tt<0||isNaN(St)||St<0||isNaN(Lt)||Lt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Et,this.bottom=tt,this.left=St,this.right=Lt}return r()(jt,[{key:"interpolate",value:function(tt,St,Lt){return St.top!=null&&tt.top!=null&&(this.top=ds(tt.top,St.top,Lt)),St.bottom!=null&&tt.bottom!=null&&(this.bottom=ds(tt.bottom,St.bottom,Lt)),St.left!=null&&tt.left!=null&&(this.left=ds(tt.left,St.left,Lt)),St.right!=null&&tt.right!=null&&(this.right=ds(tt.right,St.right,Lt)),this}},{key:"getCenter",value:function(tt,St){var Lt=os((this.left+tt-this.right)/2,0,tt),ae=os((this.top+St-this.bottom)/2,0,St);return new ya(Lt,ae)}},{key:"equals",value:function(tt){return this.top===tt.top&&this.bottom===tt.bottom&&this.left===tt.left&&this.right===tt.right}},{key:"clone",value:function(){return new jt(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),jt}(),pu=2*Math.PI*To;function El(jt){return pu*Math.cos(jt*Math.PI/180)}function zs(jt){return(180+jt)/360}function Ss(jt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+jt*Math.PI/360)))/360}function ou(jt,Et){return jt/El(Et)}function qs(jt){return jt*360-180}function Ls(jt){var Et=180-jt*360;return 360/Math.PI*Math.atan(Math.exp(Et*Math.PI/180))-90}function qu(jt,Et){return jt*El(Ls(Et))}function su(jt){return 1/Math.cos(jt*Math.PI/180)}var Wa=function(){function jt(Et,tt){var St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;s()(this,jt),this.x=void 0,this.y=void 0,this.z=void 0,this.x=+Et,this.y=+tt,this.z=+St}return r()(jt,[{key:"toLngLat",value:function(){return new La(qs(this.x),Ls(this.y))}},{key:"toAltitude",value:function(){return qu(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/pu*su(Ls(this.y))}}],[{key:"fromLngLat",value:function(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Lt=La.convert(tt);return new jt(zs(Lt.lng),Ss(Lt.lat),ou(St,Lt.lat))}}]),jt}();function Sl(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=Ql(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function Ql(jt,Et){if(!!jt){if(typeof jt=="string")return _l(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _l(jt,Et)}}function _l(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var ql=8192,Gu=function(){function jt(Et,tt,St,Lt,ae){s()(this,jt),this.tileSize=void 0,this.tileZoom=void 0,this.lngRange=void 0,this.latRange=void 0,this.maxValidLatitude=void 0,this.scale=void 0,this.width=void 0,this.height=void 0,this.angle=void 0,this.rotationMatrix=void 0,this.pixelsToGLUnits=void 0,this.cameraToCenterDistance=void 0,this.mercatorMatrix=void 0,this.projMatrix=void 0,this.invProjMatrix=void 0,this.alignedProjMatrix=void 0,this.pixelMatrix=void 0,this.pixelMatrixInverse=void 0,this.glCoordMatrix=void 0,this.labelPlaneMatrix=void 0,this._fov=void 0,this._pitch=void 0,this._zoom=void 0,this._renderWorldCopies=void 0,this._minZoom=void 0,this._maxZoom=void 0,this._minPitch=void 0,this._maxPitch=void 0,this._center=void 0,this.zoomFraction=void 0,this.unmodified=void 0,this.edgeInsets=void 0,this.constraining=void 0,this.posMatrixCache=void 0,this.alignedPosMatrixCache=void 0,this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ae===void 0?!0:ae,this._minZoom=Et||0,this._maxZoom=tt||22,this._minPitch=St==null?0:St,this._maxPitch=Lt==null?60:Lt,this.setMaxBounds(),this.width=0,this.height=0,this._center=new La(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new wo,this.posMatrixCache={},this.alignedPosMatrixCache={}}return r()(jt,[{key:"minZoom",get:function(){return this._minZoom},set:function(tt){this._minZoom!==tt&&(this._minZoom=tt,this.zoom=Math.max(this.zoom,tt))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(tt){this._maxZoom!==tt&&(this._maxZoom=tt,this.zoom=Math.min(this.zoom,tt))}},{key:"minPitch",get:function(){return this._minPitch},set:function(tt){this._minPitch!==tt&&(this._minPitch=tt,this._pitch=Math.max(this._pitch,tt))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(tt){this._maxPitch!==tt&&(this._maxPitch=tt,this._pitch=Math.min(this._pitch,tt))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(tt){tt===void 0?tt=!0:tt===null&&(tt=!1),this._renderWorldCopies=tt}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new ya(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(tt){var St=-hs(tt,-180,180)*Math.PI/180;this.angle!==St&&(this.unmodified=!1,this.angle=St,this.calcMatrices(),this.rotationMatrix=Nt.a.create(),Nt.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(tt){var St=os(tt,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==St&&(this.unmodified=!1,this._pitch=St,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(tt){tt=Math.max(.01,Math.min(60,tt)),this._fov!==tt&&(this.unmodified=!1,this._fov=tt/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(tt){var St=Math.min(Math.max(tt,this._minZoom),this._maxZoom);this._zoom!==St&&(this.unmodified=!1,this._zoom=St,this.scale=this.zoomScale(St),this.tileZoom=Math.floor(St),this.zoomFraction=St-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(tt){tt.lat===this._center.lat&&tt.lng===this._center.lng||(this.unmodified=!1,this._center=tt,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(tt){this.edgeInsets.equals(tt)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,tt,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var tt=new jt(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return tt.tileSize=this.tileSize,tt.latRange=this.latRange,tt.width=this.width,tt.height=this.height,tt.center=this._center,tt.zoom=this.zoom,tt.angle=this.angle,tt.fov=this._fov,tt.pitch=this._pitch,tt.unmodified=this.unmodified,tt.edgeInsets=this.edgeInsets.clone(),tt.calcMatrices(),tt}},{key:"isPaddingEqual",value:function(tt){return this.edgeInsets.equals(tt)}},{key:"interpolatePadding",value:function(tt,St,Lt){this.unmodified=!1,this.edgeInsets.interpolate(tt,St,Lt),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(tt){var St=(tt.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/tt.tileSize));return Math.max(0,St)}},{key:"resize",value:function(tt,St){this.width=tt,this.height=St,this.pixelsToGLUnits=[2/tt,-2/St],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(tt){return Math.pow(2,tt)}},{key:"scaleZoom",value:function(tt){return Math.log(tt)/Math.LN2}},{key:"project",value:function(tt){var St=os(tt.lat,-this.maxValidLatitude,this.maxValidLatitude);return new ya(zs(tt.lng)*this.worldSize,Ss(St)*this.worldSize)}},{key:"unproject",value:function(tt){return new Wa(tt.x/this.worldSize,tt.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(tt,St){var Lt=this.pointCoordinate(St),ae=this.pointCoordinate(this.centerPoint),ke=this.locationCoordinate(tt),yn=new Wa(ke.x-(Lt.x-ae.x),ke.y-(Lt.y-ae.y));this.center=this.coordinateLocation(yn),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(tt){var St=0,Lt=new Float32Array([tt.x,tt.y,0,1]),ae=new Float32Array([tt.x,tt.y,1,1]);Nt.e.transformMat4(Lt,Lt,this.pixelMatrixInverse),Nt.e.transformMat4(ae,ae,this.pixelMatrixInverse);var ke=Lt[3],yn=ae[3],vn=Lt[0]/ke,Cn=ae[0]/yn,ne=Lt[1]/ke,_e=ae[1]/yn,Ze=Lt[2]/ke,In=ae[2]/yn,ar=Ze===In?0:(St-Ze)/(In-Ze);return new Wa(ds(vn,Cn,ar)/this.worldSize,ds(ne,_e,ar)/this.worldSize)}},{key:"getBounds",value:function(){return new Qu().extend(this.pointLocation(new ya(0,0))).extend(this.pointLocation(new ya(this.width,0))).extend(this.pointLocation(new ya(this.width,this.height))).extend(this.pointLocation(new ya(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Qu([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(tt){tt?(this.lngRange=[tt.getWest(),tt.getEast()],this.latRange=[tt.getSouth(),tt.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var tt=this.pointCoordinate(new ya(0,0)),St=new Float32Array([tt.x*this.worldSize,tt.y*this.worldSize,0,1]),Lt=Nt.e.transformMat4(St,St,this.pixelMatrix);return Lt[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var tt=this._pitch,St=Math.tan(tt)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new ya(0,St))}},{key:"getCameraQueryGeometry",value:function(tt){var St=this.getCameraPoint();if(tt.length===1)return[tt[0],St];var Lt=St.x,ae=St.y,ke=St.x,yn=St.y,vn=Sl(tt),Cn;try{for(vn.s();!(Cn=vn.n()).done;){var ne=Cn.value;Lt=Math.min(Lt,ne.x),ae=Math.min(ae,ne.y),ke=Math.max(ke,ne.x),yn=Math.max(yn,ne.y)}}catch(_e){vn.e(_e)}finally{vn.f()}return[new ya(Lt,ae),new ya(ke,ae),new ya(ke,yn),new ya(Lt,yn),new ya(Lt,ae)]}},{key:"coordinatePoint",value:function(tt){var St=Nt.e.fromValues(tt.x*this.worldSize,tt.y*this.worldSize,0,1);return Nt.e.transformMat4(St,St,this.pixelMatrix),new ya(St[0]/St[3],St[1]/St[3])}},{key:"locationPoint",value:function(tt){return this.coordinatePoint(this.locationCoordinate(tt))}},{key:"pointLocation",value:function(tt){return this.coordinateLocation(this.pointCoordinate(tt))}},{key:"locationCoordinate",value:function(tt){return Wa.fromLngLat(tt)}},{key:"coordinateLocation",value:function(tt){return tt.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var tt=-90,St=90,Lt=-180,ae=180,ke,yn,vn,Cn,ne=this.size,_e=this.unmodified;if(this.latRange){var Ze=this.latRange;tt=Ss(Ze[1])*this.worldSize,St=Ss(Ze[0])*this.worldSize,ke=St-tt<ne.y?ne.y/(St-tt):0}if(this.lngRange){var In=this.lngRange;Lt=zs(In[0])*this.worldSize,ae=zs(In[1])*this.worldSize,yn=ae-Lt<ne.x?ne.x/(ae-Lt):0}var ar=this.point,ur=Math.max(yn||0,ke||0);if(ur){this.center=this.unproject(new ya(yn?(ae+Lt)/2:ar.x,ke?(St+tt)/2:ar.y)),this.zoom+=this.scaleZoom(ur),this.unmodified=_e,this.constraining=!1;return}if(this.latRange){var sr=ar.y,Or=ne.y/2;sr-Or<tt&&(Cn=tt+Or),sr+Or>St&&(Cn=St-Or)}if(this.lngRange){var ri=ar.x,Vr=ne.x/2;ri-Vr<Lt&&(vn=Lt+Vr),ri+Vr>ae&&(vn=ae-Vr)}(vn!==void 0||Cn!==void 0)&&(this.center=this.unproject(new ya(vn!==void 0?vn:ar.x,Cn!==void 0?Cn:ar.y))),this.unmodified=_e,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(!!this.height){var tt=this._fov/2,St=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(tt)*this.height;var Lt=Math.PI/2+this._pitch,ae=this._fov*(.5+St.y/this.height),ke=Math.sin(ae)*this.cameraToCenterDistance/Math.sin(os(Math.PI-Lt-ae,.01,Math.PI-.01)),yn=this.point,vn=yn.x,Cn=yn.y,ne=Math.cos(Math.PI/2-this._pitch)*ke+this.cameraToCenterDistance,_e=ne*1.01,Ze=this.height/50,In=Nt.b.create();Nt.b.perspective(In,this._fov,this.width/this.height,Ze,_e),In[8]=-St.x*2/this.width,In[9]=St.y*2/this.height,Nt.b.scale(In,In,[1,-1,1]),Nt.b.translate(In,In,[0,0,-this.cameraToCenterDistance]),Nt.b.rotateX(In,In,this._pitch),Nt.b.rotateZ(In,In,this.angle),Nt.b.translate(In,In,[-vn,-Cn,0]),this.mercatorMatrix=Nt.b.scale(Nt.b.create(),In,[this.worldSize,this.worldSize,this.worldSize]),Nt.b.scale(In,In,Nt.d.fromValues(1,1,ou(1,this.center.lat)*this.worldSize)),this.projMatrix=In,this.invProjMatrix=Nt.b.invert(Nt.b.create(),this.projMatrix);var ar=this.width%2/2,ur=this.height%2/2,sr=Math.cos(this.angle),Or=Math.sin(this.angle),ri=vn-Math.round(vn)+sr*ar+Or*ur,Vr=Cn-Math.round(Cn)+sr*ur+Or*ar,ni=Nt.b.clone(In);if(Nt.b.translate(ni,ni,[ri>.5?ri-1:ri,Vr>.5?Vr-1:Vr,0]),this.alignedProjMatrix=ni,In=Nt.b.create(),Nt.b.scale(In,In,[this.width/2,-this.height/2,1]),Nt.b.translate(In,In,[1,-1,0]),this.labelPlaneMatrix=In,In=Nt.b.create(),Nt.b.scale(In,In,[1,-1,1]),Nt.b.translate(In,In,[-1,-1,0]),Nt.b.scale(In,In,[2/this.width,2/this.height,1]),this.glCoordMatrix=In,this.pixelMatrix=Nt.b.multiply(Nt.b.create(),this.labelPlaneMatrix,this.projMatrix),In=Nt.b.invert(Nt.b.create(),this.pixelMatrix),!In)throw new Error("failed to invert matrix");this.pixelMatrixInverse=In,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),jt}(),Ha=function jt(Et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s()(this,jt),this.type=void 0,qi()(this,tt),this.type=Et};function uu(jt){var Et=Ml();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function Ml(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var vs=function(jt){n()(tt,jt);var Et=uu(tt);function tt(St){var Lt;s()(this,tt),Lt=Et.call(this),Lt.transform=void 0,Lt.options=void 0,Lt.moving=void 0,Lt.zooming=void 0,Lt.rotating=void 0,Lt.pitching=void 0,Lt.padding=void 0,Lt.bearingSnap=void 0,Lt.easeEndTimeoutID=void 0,Lt.easeStart=void 0,Lt.easeOptions=void 0,Lt.easeId=void 0,Lt.onEaseFrame=void 0,Lt.onEaseEnd=void 0,Lt.easeFrameId=void 0,Lt.renderFrameCallback=function(){var ne=Math.min((Fs()-Lt.easeStart)/Lt.easeOptions.duration,1);Lt.onEaseFrame(Lt.easeOptions.easing(ne)),ne<1?Lt.easeFrameId=Lt.requestRenderFrame(Lt.renderFrameCallback):Lt.stop()},Lt.options=St;var ae=St.minZoom,ke=St.maxZoom,yn=St.minPitch,vn=St.maxPitch,Cn=St.renderWorldCopies;return Lt.moving=!1,Lt.zooming=!1,Lt.bearingSnap=St.bearingSnap,Lt.transform=new Gu(ae,ke,yn,vn,Cn),Lt}return r()(tt,[{key:"requestRenderFrame",value:function(Lt){return 0}},{key:"cancelRenderFrame",value:function(Lt){}},{key:"getCenter",value:function(){var Lt=this.transform.center,ae=Lt.lng,ke=Lt.lat;return new La(ae,ke)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(Lt,ae){return this.jumpTo({center:Lt},ae)}},{key:"setPitch",value:function(Lt,ae){return this.jumpTo({pitch:Lt},ae),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(Lt,ae,ke){return this.easeTo(qi()({center:Lt},ae),ke)}},{key:"zoomOut",value:function(Lt,ae){return this.zoomTo(this.getZoom()-1,Lt,ae),this}},{key:"setBearing",value:function(Lt,ae){return this.jumpTo({bearing:Lt},ae),this}},{key:"setZoom",value:function(Lt,ae){return this.jumpTo({zoom:Lt},ae),this}},{key:"zoomIn",value:function(Lt,ae){return this.zoomTo(this.getZoom()+1,Lt,ae),this}},{key:"zoomTo",value:function(Lt,ae,ke){return this.easeTo(qi()({zoom:Lt},ae),ke)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(Lt,ae){return this.jumpTo({padding:Lt},ae),this}},{key:"rotateTo",value:function(Lt,ae,ke){return this.easeTo(qi()({bearing:Lt},ae),ke)}},{key:"resetNorth",value:function(Lt,ae){return this.rotateTo(0,qi()({duration:1e3},Lt),ae),this}},{key:"resetNorthPitch",value:function(Lt,ae){return this.easeTo(qi()({bearing:0,pitch:0,duration:1e3},Lt),ae),this}},{key:"fitBounds",value:function(Lt,ae,ke){return this.fitInternal(this.cameraForBounds(Lt,ae),ae,ke)}},{key:"cameraForBounds",value:function(Lt,ae){return Lt=Qu.convert(Lt),this.cameraForBoxAndBearing(Lt.getNorthWest(),Lt.getSouthEast(),0,ae)}},{key:"snapToNorth",value:function(Lt,ae){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(Lt,ae):this}},{key:"jumpTo",value:function(){var Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=arguments.length>1?arguments[1]:void 0;this.stop();var ke=this.transform,yn=!1,vn=!1,Cn=!1;return Lt.zoom&&ke.zoom!==+Lt.zoom&&(yn=!0,ke.zoom=+Lt.zoom),Lt.center!==void 0&&(ke.center=La.convert(Lt.center)),Lt.bearing&&ke.bearing!==+Lt.bearing&&(vn=!0,ke.bearing=+Lt.bearing),Lt.pitch&&ke.pitch!==+Lt.pitch&&(Cn=!0,ke.pitch=+Lt.pitch),Lt.padding!=null&&!ke.isPaddingEqual(Lt.padding)&&(ke.padding=Lt.padding),this.emit("movestart",new Ha("movestart",ae)),this.emit("move",new Ha("move",ae)),yn&&(this.emit("zoomstart",new Ha("zoomstart",ae)),this.emit("zoom",new Ha("zoom",ae)),this.emit("zoomend",new Ha("zoomend",ae))),vn&&(this.emit("rotatestart",new Ha("rotatestart",ae)),this.emit("rotate",new Ha("rotate",ae)),this.emit("rotateend",new Ha("rotateend",ae))),Cn&&(this.emit("pitchstart",new Ha("pitchstart",ae)),this.emit("pitch",new Ha("pitch",ae)),this.emit("pitchend",new Ha("pitchend",ae))),this.emit("moveend",new Ha("moveend",ae))}},{key:"easeTo",value:function(){var Lt=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=arguments.length>1?arguments[1]:void 0;ae=qi()({offset:[0,0],duration:500,easing:Ou},ae),(ae.animate===!1||!ae.essential&&Uu())&&(ae.duration=0);var yn=this.transform,vn=this.getZoom(),Cn=this.getBearing(),ne=this.getPitch(),_e=this.getPadding(),Ze=ae.zoom?+ae.zoom:vn,In=ae.bearing?this.normalizeBearing(ae.bearing,Cn):Cn,ar=ae.pitch?+ae.pitch:ne,ur=ae.padding?ae.padding:yn.padding,sr=ya.convert(ae.offset),Or=yn.centerPoint.add(sr),ri=yn.pointLocation(Or),Vr=La.convert(ae.center||ri);this.normalizeCenter(Vr);var ni=yn.project(ri),fi=yn.project(Vr).sub(ni),Oi=yn.zoomScale(Ze-vn),vi,si;ae.around&&(vi=La.convert(ae.around),si=yn.locationPoint(vi));var Lr={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||Ze!==vn,this.rotating=this.rotating||Cn!==In,this.pitching=this.pitching||ar!==ne,this.padding=!yn.isPaddingEqual(ur),this.easeId=ae.easeId,this.prepareEase(ke,ae.noMoveStart,Lr),clearTimeout(this.easeEndTimeoutID),this.ease(function(_r){if(Lt.zooming&&(yn.zoom=ds(vn,Ze,_r)),Lt.rotating&&(yn.bearing=ds(Cn,In,_r)),Lt.pitching&&(yn.pitch=ds(ne,ar,_r)),Lt.padding&&(yn.interpolatePadding(_e,ur,_r),Or=yn.centerPoint.add(sr)),vi)yn.setLocationAtPoint(vi,si);else{var di=yn.zoomScale(yn.zoom-vn),Vi=Ze>vn?Math.min(2,Oi):Math.max(.5,Oi),qr=Math.pow(Vi,1-_r),na=yn.unproject(ni.add(fi.mult(_r*qr)).mult(di));yn.setLocationAtPoint(yn.renderWorldCopies?na.wrap():na,Or)}Lt.fireMoveEvents(ke)},function(_r){Lt.afterEase(ke,_r)},ae),this}},{key:"flyTo",value:function(){var Lt=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=arguments.length>1?arguments[1]:void 0;if(!ae.essential&&Uu()){var yn=uo(ae,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yn,ke)}this.stop(),ae=qi()({offset:[0,0],speed:1.2,curve:1.42,easing:Ou},ae);var vn=this.transform,Cn=this.getZoom(),ne=this.getBearing(),_e=this.getPitch(),Ze=this.getPadding(),In=ae.zoom?os(+ae.zoom,vn.minZoom,vn.maxZoom):Cn,ar=ae.bearing?this.normalizeBearing(ae.bearing,ne):ne,ur=ae.pitch?+ae.pitch:_e,sr="padding"in ae?ae.padding:vn.padding,Or=vn.zoomScale(In-Cn),ri=ya.convert(ae.offset),Vr=vn.centerPoint.add(ri),ni=vn.pointLocation(Vr),fi=La.convert(ae.center||ni);this.normalizeCenter(fi);var Oi=vn.project(ni),vi=vn.project(fi).sub(Oi),si=ae.curve,Lr=Math.max(vn.width,vn.height),_r=Lr/Or,di=vi.mag();if("minZoom"in ae){var Vi=os(Math.min(ae.minZoom,Cn,In),vn.minZoom,vn.maxZoom),qr=Lr/vn.zoomScale(Vi-Cn);si=Math.sqrt(qr/di*2)}var na=si*si;function wi($i){var Gi=(_r*_r-Lr*Lr+($i?-1:1)*na*na*di*di)/(2*($i?_r:Lr)*na*di);return Math.log(Math.sqrt(Gi*Gi+1)-Gi)}function Pi($i){return(Math.exp($i)-Math.exp(-$i))/2}function yi($i){return(Math.exp($i)+Math.exp(-$i))/2}function bi($i){return Pi($i)/yi($i)}var ra=wi(0),ha=function(Gi){return yi(ra)/yi(ra+si*Gi)},Ni=function(Gi){return Lr*((yi(ra)*bi(ra+si*Gi)-Pi(ra))/na)/di},Ei=(wi(1)-ra)/si;if(Math.abs(di)<1e-6||!isFinite(Ei)){if(Math.abs(Lr-_r)<1e-6)return this.easeTo(ae,ke);var gi=_r<Lr?-1:1;Ei=Math.abs(Math.log(_r/Lr))/si,Ni=function(){return 0},ha=function(Gi){return Math.exp(gi*si*Gi)}}if("duration"in ae)ae.duration=+ae.duration;else{var za="screenSpeed"in ae?+ae.screenSpeed/si:+ae.speed;ae.duration=1e3*Ei/za}return ae.maxDuration&&ae.duration>ae.maxDuration&&(ae.duration=0),this.zooming=!0,this.rotating=ne!==ar,this.pitching=ur!==_e,this.padding=!vn.isPaddingEqual(sr),this.prepareEase(ke,!1),this.ease(function($i){var Gi=$i*Ei,co=1/ha(Gi);vn.zoom=$i===1?In:Cn+vn.scaleZoom(co),Lt.rotating&&(vn.bearing=ds(ne,ar,$i)),Lt.pitching&&(vn.pitch=ds(_e,ur,$i)),Lt.padding&&(vn.interpolatePadding(Ze,sr,$i),Vr=vn.centerPoint.add(ri));var qa=$i===1?fi:vn.unproject(Oi.add(vi.mult(Ni(Gi))).mult(co));vn.setLocationAtPoint(vn.renderWorldCopies?qa.wrap():qa,Vr),Lt.fireMoveEvents(ke)},function(){return Lt.afterEase(ke)},ae),this}},{key:"fitScreenCoordinates",value:function(Lt,ae,ke,yn,vn){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(ya.convert(Lt)),this.transform.pointLocation(ya.convert(ae)),ke,yn),yn,vn)}},{key:"stop",value:function(Lt,ae){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var ke=this.onEaseEnd;delete this.onEaseEnd,ke.call(this,ae)}return this}},{key:"normalizeBearing",value:function(Lt,ae){Lt=hs(Lt,-180,180);var ke=Math.abs(Lt-ae);return Math.abs(Lt-360-ae)<ke&&(Lt-=360),Math.abs(Lt+360-ae)<ke&&(Lt+=360),Lt}},{key:"normalizeCenter",value:function(Lt){var ae=this.transform;if(!(!ae.renderWorldCopies||ae.lngRange)){var ke=Lt.lng-ae.center.lng;Lt.lng+=ke>180?-360:ke<-180?360:0}}},{key:"fireMoveEvents",value:function(Lt){this.emit("move",new Ha("move",Lt)),this.zooming&&this.emit("zoom",new Ha("zoom",Lt)),this.rotating&&this.emit("rotate",new Ha("rotate",Lt)),this.pitching&&this.emit("rotate",new Ha("pitch",Lt))}},{key:"prepareEase",value:function(Lt){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!ae&&!ke.moving&&this.emit("movestart",new Ha("movestart",Lt)),this.zooming&&!ke.zooming&&this.emit("zoomstart",new Ha("zoomstart",Lt)),this.rotating&&!ke.rotating&&this.emit("rotatestart",new Ha("rotatestart",Lt)),this.pitching&&!ke.pitching&&this.emit("pitchstart",new Ha("pitchstart",Lt))}},{key:"afterEase",value:function(Lt,ae){if(!(this.easeId&&ae&&this.easeId===ae)){delete this.easeId;var ke=this.zooming,yn=this.rotating,vn=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,ke&&this.emit("zoomend",new Ha("zoomend",Lt)),yn&&this.emit("rotateend",new Ha("rotateend",Lt)),vn&&this.emit("pitchend",new Ha("pitchend",Lt)),this.emit("moveend",new Ha("moveend",Lt))}}},{key:"ease",value:function(Lt,ae,ke){ke.animate===!1||ke.duration===0?(Lt(1),ae()):(this.easeStart=Fs(),this.easeOptions=ke,this.onEaseFrame=Lt,this.onEaseEnd=ae,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(Lt,ae,ke,yn){var vn={top:0,bottom:0,right:0,left:0};if(yn=qi()({padding:vn,offset:[0,0],maxZoom:this.transform.maxZoom},yn),typeof yn.padding=="number"){var Cn=yn.padding;yn.padding={top:Cn,bottom:Cn,right:Cn,left:Cn}}yn.padding=qi()(vn,yn.padding);var ne=this.transform,_e=ne.padding,Ze=ne.project(La.convert(Lt)),In=ne.project(La.convert(ae)),ar=Ze.rotate(-ke*Math.PI/180),ur=In.rotate(-ke*Math.PI/180),sr=new ya(Math.max(ar.x,ur.x),Math.max(ar.y,ur.y)),Or=new ya(Math.min(ar.x,ur.x),Math.min(ar.y,ur.y)),ri=sr.sub(Or),Vr=(ne.width-(_e.left+_e.right+yn.padding.left+yn.padding.right))/ri.x,ni=(ne.height-(_e.top+_e.bottom+yn.padding.top+yn.padding.bottom))/ri.y;if(!(ni<0||Vr<0)){var fi=Math.min(ne.scaleZoom(ne.scale*Math.min(Vr,ni)),yn.maxZoom),Oi=ya.convert(yn.offset),vi=(yn.padding.left-yn.padding.right)/2,si=(yn.padding.top-yn.padding.bottom)/2,Lr=new ya(Oi.x+vi,Oi.y+si),_r=Lr.mult(ne.scale/ne.zoomScale(fi)),di=ne.unproject(Ze.add(In).div(2).sub(_r));return{center:di,zoom:fi,bearing:ke}}}},{key:"fitInternal",value:function(Lt,ae,ke){return Lt?(ae=qi()(Lt,ae),delete ae.padding,ae.linear?this.easeTo(ae,ke):this.flyTo(ae,ke)):this}}]),tt}(Qa.EventEmitter);function wu(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=gu(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function gu(jt,Et){if(!!jt){if(typeof jt=="string")return Vu(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Vu(jt,Et)}}function Vu(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var Ws={},Jo=Ws;Ws.create=function(jt,Et,tt){var St=window.document.createElement(jt);return Et!==void 0&&(St.className=Et),tt&&tt.appendChild(St),St},Ws.createNS=function(jt,Et){var tt=window.document.createElementNS(jt,Et);return tt};var ss=window.document&&window.document.documentElement.style;function cl(jt){if(!ss)return jt[0];var Et=wu(jt),tt;try{for(Et.s();!(tt=Et.n()).done;){var St=tt.value;if(St in ss)return St}}catch(Lt){Et.e(Lt)}finally{Et.f()}return jt[0]}var Rl=cl(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),tc;Ws.disableDrag=function(){ss&&Rl&&(tc=ss[Rl],ss[Rl]="none")},Ws.enableDrag=function(){ss&&Rl&&(ss[Rl]=tc)};var Wu=cl(["transform","WebkitTransform"]);Ws.setTransform=function(jt,Et){jt.style[Wu]=Et};var tl=!1;try{var Iu=Object.defineProperty({},"passive",{get:function(){tl=!0}});window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch(jt){tl=!1}Ws.addEventListener=function(jt,Et,tt){var St=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in St&&tl?jt.addEventListener(Et,tt,St):jt.addEventListener(Et,tt,St.capture)},Ws.removeEventListener=function(jt,Et,tt){var St=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in St&&tl?jt.removeEventListener(Et,tt,St):jt.removeEventListener(Et,tt,St.capture)};var Lu=function jt(Et){Et.preventDefault(),Et.stopPropagation(),window.removeEventListener("click",jt,!0)};Ws.suppressClick=function(){window.addEventListener("click",Lu,!0),window.setTimeout(function(){window.removeEventListener("click",Lu,!0)},0)},Ws.mousePos=function(jt,Et){var tt=jt.getBoundingClientRect();return new ya(Et.clientX-tt.left-jt.clientLeft,Et.clientY-tt.top-jt.clientTop)},Ws.touchPos=function(jt,Et){var tt=jt.getBoundingClientRect(),St=[],Lt=wu(Et),ae;try{for(Lt.s();!(ae=Lt.n()).done;){var ke=ae.value;St.push(new ya(ke.clientX-tt.left-jt.clientLeft,ke.clientY-tt.top-jt.clientTop))}}catch(yn){Lt.e(yn)}finally{Lt.f()}return St},Ws.mouseButton=function(jt){return typeof window.InstallTrigger!="undefined"&&jt.button===2&&jt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:jt.button},Ws.remove=function(jt){jt.parentNode&&jt.parentNode.removeChild(jt)};function mu(jt){var Et=Hu();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function Hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Us=function(jt){n()(tt,jt);var Et=mu(tt);function tt(St,Lt,ae){var ke,yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s()(this,tt);var vn=Jo.mousePos(Lt.getCanvasContainer(),ae),Cn=Lt.unproject(vn);return ke=Et.call(this,St,qi()({point:vn,lngLat:Cn,originalEvent:ae},yn)),ke.type=void 0,ke.target=void 0,ke.originalEvent=void 0,ke.point=void 0,ke.lngLat=void 0,ke.defaultPrevented=void 0,ke.defaultPrevented=!1,ke.target=Lt,ke}return r()(tt,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),tt}(Ha);function Dl(jt){var Et=hc();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function hc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Pl=function(jt){n()(tt,jt);var Et=Dl(tt);function tt(St,Lt,ae){var ke;s()(this,tt);var yn=St==="touchend"?ae.changedTouches:ae.touches,vn=Jo.touchPos(Lt.getCanvasContainer(),yn),Cn=vn.map(function(Ze){return Lt.unproject(Ze)}),ne=vn.reduce(function(Ze,In,ar,ur){return Ze.add(In.div(ur.length))},new ya(0,0)),_e=Lt.unproject(ne);return ke=Et.call(this,St,{points:vn,point:ne,lngLats:Cn,lngLat:_e,originalEvent:ae}),ke.type=void 0,ke.target=void 0,ke.originalEvent=void 0,ke.lngLat=void 0,ke.point=void 0,ke.points=void 0,ke.lngLats=void 0,ke.defaultPrevented=void 0,ke.defaultPrevented=!1,ke}return r()(tt,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),tt}(Ha);function jl(jt){var Et=Bl();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function Bl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var sc=function(jt){n()(tt,jt);var Et=jl(tt);function tt(St,Lt,ae){var ke;return s()(this,tt),ke=Et.call(this,St,{originalEvent:ae}),ke.type=void 0,ke.originalEvent=void 0,ke.defaultPrevented=void 0,ke.target=void 0,ke.defaultPrevented=!1,ke}return r()(tt,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),tt}(Ha),el=function(){function jt(Et){s()(this,jt),this.map=void 0,this.delayContextMenu=void 0,this.contextMenuEvent=void 0,this.map=Et}return r()(jt,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(tt){this.map.emit(tt.type,new Us(tt.type,this.map,tt))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Us("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(tt){this.delayContextMenu?this.contextMenuEvent=tt:this.map.emit(tt.type,new Us(tt.type,this.map,tt)),this.map.listeners("contextmenu")&&tt.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),jt}(),Tl=function(){function jt(Et,tt){s()(this,jt),this.map=void 0,this.el=void 0,this.container=void 0,this.enabled=void 0,this.active=void 0,this.startPos=void 0,this.lastPos=void 0,this.box=void 0,this.clickTolerance=void 0,this.map=Et,this.el=Et.getCanvasContainer(),this.container=Et.getContainer(),this.clickTolerance=tt.clickTolerance||1}return r()(jt,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"mousedown",value:function(tt,St){!this.isEnabled()||!(tt.shiftKey&&tt.button===0)||(Jo.disableDrag(),this.startPos=this.lastPos=St,this.active=!0)}},{key:"mousemoveWindow",value:function(tt,St){if(!!this.active){var Lt=St;if(!(this.lastPos.equals(Lt)||!this.box&&Lt.dist(this.startPos)<this.clickTolerance)){var ae=this.startPos;this.lastPos=Lt,this.box||(this.box=Jo.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",tt));var ke=Math.min(ae.x,Lt.x),yn=Math.max(ae.x,Lt.x),vn=Math.min(ae.y,Lt.y),Cn=Math.max(ae.y,Lt.y);Jo.setTransform(this.box,"translate(".concat(ke,"px,").concat(vn,"px)")),this.box&&(this.box.style.width="".concat(yn-ke,"px"),this.box.style.height="".concat(Cn-vn,"px"))}}}},{key:"mouseupWindow",value:function(tt,St){var Lt=this;if(!!this.active&&tt.button===0){var ae=this.startPos,ke=St;if(this.reset(),Jo.suppressClick(),ae.x===ke.x&&ae.y===ke.y)this.fireEvent("boxzoomcancel",tt);else return this.map.emit("boxzoomend",new Ha("boxzoomend",{originalEvent:tt})),{cameraAnimation:function(vn){return vn.fitScreenCoordinates(ae,ke,Lt.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(tt){!this.active||tt.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",tt))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(Jo.remove(this.box),this.box=null),Jo.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(tt,St){return this.map.emit(tt,new Ha(tt,{originalEvent:St}))}}]),jt}(),Nl=Tl,tu=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(tt,St){return tt.preventDefault(),{cameraAnimation:function(ae){ae.easeTo({duration:300,zoom:ae.getZoom()+(tt.shiftKey?-1:1),around:ae.unproject(St)},{originalEvent:tt})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function po(jt){var Et=pl();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function pl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var fl=function(jt){n()(tt,jt);var Et=po(tt);function tt(){var St;s()(this,tt);for(var Lt=arguments.length,ae=new Array(Lt),ke=0;ke<Lt;ke++)ae[ke]=arguments[ke];return St=Et.call.apply(Et,[this].concat(ae)),St.type="renderFrame",St.timeStamp=void 0,St}return tt}(Ha);function Hs(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=Da(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function Da(jt,Et){if(!!jt){if(typeof jt=="string")return bo(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return bo(jt,Et)}}function bo(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var ks={linearity:.3,easing:Ts(0,0,.3,1)},gl=qi()({deceleration:2500,maxSpeed:1400},ks),nl=qi()({deceleration:20,maxSpeed:1400},ks),Yu=qi()({deceleration:1e3,maxSpeed:360},ks),dc=qi()({deceleration:1e3,maxSpeed:90},ks),As=function(){function jt(Et){s()(this,jt),this.map=void 0,this.inertiaBuffer=void 0,this.map=Et,this.clear()}return r()(jt,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(tt){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Fs(),settings:tt})}},{key:"drainInertiaBuffer",value:function(){for(var tt=this.inertiaBuffer,St=Fs(),Lt=160;tt.length>0&&St-tt[0].time>Lt;)tt.shift()}},{key:"onMoveEnd",value:function(tt){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var St={zoom:0,bearing:0,pitch:0,pan:new ya(0,0),pinchAround:void 0,around:void 0},Lt=Hs(this.inertiaBuffer),ae;try{for(Lt.s();!(ae=Lt.n()).done;){var ke=ae.value.settings;St.zoom+=ke.zoomDelta||0,St.bearing+=ke.bearingDelta||0,St.pitch+=ke.pitchDelta||0,ke.panDelta&&St.pan._add(ke.panDelta),ke.around&&(St.around=ke.around),ke.pinchAround&&(St.pinchAround=ke.pinchAround)}}catch(ur){Lt.e(ur)}finally{Lt.f()}var yn=this.inertiaBuffer[this.inertiaBuffer.length-1],vn=yn.time-this.inertiaBuffer[0].time,Cn={};if(St.pan.mag()){var ne=lu(St.pan.mag(),vn,qi()({},gl,tt||{}));Cn.offset=St.pan.mult(ne.amount/St.pan.mag()),Cn.center=this.map.transform.center,rl(Cn,ne)}if(St.zoom){var _e=lu(St.zoom,vn,nl);Cn.zoom=this.map.transform.zoom+_e.amount,rl(Cn,_e)}if(St.bearing){var Ze=lu(St.bearing,vn,Yu);Cn.bearing=this.map.transform.bearing+os(Ze.amount,-179,179),rl(Cn,Ze)}if(St.pitch){var In=lu(St.pitch,vn,dc);Cn.pitch=this.map.transform.pitch+In.amount,rl(Cn,In)}if(Cn.zoom||Cn.bearing){var ar=St.pinchAround===void 0?St.around:St.pinchAround;Cn.around=ar?this.map.unproject(ar):this.map.getCenter()}return this.clear(),qi()(Cn,{noMoveStart:!0})}}}]),jt}();function rl(jt,Et){(!jt.duration||jt.duration<Et.duration)&&(jt.duration=Et.duration,jt.easing=Et.easing)}function lu(jt,Et,tt){var St=tt.maxSpeed,Lt=tt.linearity,ae=tt.deceleration,ke=os(jt*Lt/(Et/1e3),-St,St),yn=Math.abs(ke)/(ae*Lt);return{easing:tt.easing,duration:yn*1e3,amount:ke*(yn/2)}}var Ys={panStep:100,bearingStep:15,pitchStep:10},$o=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.panStep=void 0,this.bearingStep=void 0,this.pitchStep=void 0;var Et=Ys;this.panStep=Et.panStep,this.bearingStep=Et.bearingStep,this.pitchStep=Et.pitchStep}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(tt){var St=this;if(!(tt.altKey||tt.ctrlKey||tt.metaKey)){var Lt=0,ae=0,ke=0,yn=0,vn=0;switch(tt.keyCode){case 61:case 107:case 171:case 187:Lt=1;break;case 189:case 109:case 173:Lt=-1;break;case 37:tt.shiftKey?ae=-1:(tt.preventDefault(),yn=-1);break;case 39:tt.shiftKey?ae=1:(tt.preventDefault(),yn=1);break;case 38:tt.shiftKey?ke=1:(tt.preventDefault(),vn=-1);break;case 40:tt.shiftKey?ke=-1:(tt.preventDefault(),vn=1);break;default:return}return{cameraAnimation:function(ne){var _e=ne.getZoom();ne.easeTo({duration:300,easeId:"keyboardHandler",easing:eu,zoom:Lt?Math.round(_e)+Lt*(tt.shiftKey?2:1):_e,bearing:ne.getBearing()+ae*St.bearingStep,pitch:ne.getPitch()+ke*St.pitchStep,offset:[-yn*St.panStep,-vn*St.panStep],center:ne.getCenter()},{originalEvent:tt})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function eu(jt){return jt*(2-jt)}var Ru=$o,Qo=function(){function jt(Et,tt){s()(this,jt),this.mousedownPos=void 0,this.clickTolerance=void 0,this.map=void 0,this.map=Et,this.clickTolerance=tt.clickTolerance}return r()(jt,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(tt){return this.firePreventable(new sc(tt.type,this.map,tt))}},{key:"mousedown",value:function(tt,St){return this.mousedownPos=St,this.firePreventable(new Us(tt.type,this.map,tt))}},{key:"mouseup",value:function(tt){this.map.emit(tt.type,new Us(tt.type,this.map,tt))}},{key:"click",value:function(tt,St){this.mousedownPos&&this.mousedownPos.dist(St)>=this.clickTolerance||this.map.emit(tt.type,new Us(tt.type,this.map,tt))}},{key:"dblclick",value:function(tt){return this.firePreventable(new Us(tt.type,this.map,tt))}},{key:"mouseover",value:function(tt){this.map.emit(tt.type,new Us(tt.type,this.map,tt))}},{key:"mouseout",value:function(tt){this.map.emit(tt.type,new Us(tt.type,this.map,tt))}},{key:"touchstart",value:function(tt){return this.firePreventable(new Pl(tt.type,this.map,tt))}},{key:"touchmove",value:function(tt){this.map.emit(tt.type,new Pl(tt.type,this.map,tt))}},{key:"touchend",value:function(tt){this.map.emit(tt.type,new Pl(tt.type,this.map,tt))}},{key:"touchcancel",value:function(tt){this.map.emit(tt.type,new Pl(tt.type,this.map,tt))}},{key:"firePreventable",value:function(tt){if(this.map.emit(tt.type,tt),tt.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),jt}(),Wi=R("iWIM"),Cs=R.n(Wi),Zu,Du=0,jo=2,Bo=(Zu={},v()(Zu,Du,1),v()(Zu,jo,2),Zu);function Tu(jt,Et){var tt=Bo[Et];return jt.buttons===void 0||(jt.buttons&tt)!==tt}var Mi=function(){function jt(Et){s()(this,jt),this.enabled=void 0,this.active=void 0,this.lastPoint=void 0,this.eventButton=void 0,this.moved=void 0,this.clickTolerance=void 0,this.reset(),this.clickTolerance=Et.clickTolerance||1}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(tt,St){if(!this.lastPoint){var Lt=Jo.mouseButton(tt);!this.correctButton(tt,Lt)||(this.lastPoint=St,this.eventButton=Lt)}}},{key:"mousemoveWindow",value:function(tt,St){var Lt=this.lastPoint;if(!!Lt){if(tt.preventDefault(),Tu(tt,this.eventButton)){this.reset();return}if(!(!this.moved&&St.dist(Lt)<this.clickTolerance))return this.moved=!0,this.lastPoint=St,this.move(Lt,St)}}},{key:"mouseupWindow",value:function(tt){if(!!this.lastPoint){var St=Jo.mouseButton(tt);St===this.eventButton&&(this.moved&&Jo.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(tt,St){return!1}},{key:"move",value:function(tt,St){}}]),jt}();function il(jt){var Et=ju();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function ju(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Bu=function(jt){n()(tt,jt);var Et=il(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"mousedown",value:function(Lt,ae){Cs()(u()(tt.prototype),"mousedown",this).call(this,Lt,ae),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(Lt,ae){return{around:ae,panDelta:ae.sub(Lt)}}},{key:"correctButton",value:function(Lt,ae){return ae===Du&&!Lt.ctrlKey}}]),tt}(Mi);function nu(jt){var Et=we();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Pe=function(jt){n()(tt,jt);var Et=nu(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"correctButton",value:function(Lt,ae){return ae===Du&&Lt.ctrlKey||ae===jo}},{key:"move",value:function(Lt,ae){var ke=-.5,yn=(ae.y-Lt.y)*ke;if(yn)return this.active=!0,{pitchDelta:yn}}},{key:"contextmenu",value:function(Lt){Lt.preventDefault()}}]),tt}(Mi);function dn(jt){var Et=tn();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var wn=function(jt){n()(tt,jt);var Et=dn(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"contextmenu",value:function(Lt){Lt.preventDefault()}},{key:"correctButton",value:function(Lt,ae){return ae===Du&&Lt.ctrlKey||ae===jo}},{key:"move",value:function(Lt,ae){var ke=.8,yn=(ae.x-Lt.x)*ke;if(yn)return this.active=!0,{bearingDelta:yn}}}]),tt}(Mi),dr=4.000244140625,Rr=1/100,Xr=1/450,ti=2,Fr=function(){function jt(Et,tt){var St=this;s()(this,jt),this.map=void 0,this.el=void 0,this.enabled=void 0,this.active=void 0,this.zooming=void 0,this.aroundCenter=void 0,this.around=void 0,this.aroundPoint=void 0,this.type=void 0,this.lastValue=void 0,this.timeout=void 0,this.finishTimeout=void 0,this.lastWheelEvent=void 0,this.lastWheelEventTime=void 0,this.startZoom=void 0,this.targetZoom=void 0,this.delta=void 0,this.easing=void 0,this.prevEase=void 0,this.frameId=void 0,this.handler=void 0,this.defaultZoomRate=void 0,this.wheelZoomRate=void 0,this.onScrollFrame=function(){if(!!St.frameId&&(St.frameId=null,!!St.isActive())){var Lt=St.map.transform;if(St.delta!==0){var ae=St.type==="wheel"&&Math.abs(St.delta)>dr?St.wheelZoomRate:St.defaultZoomRate,ke=ti/(1+Math.exp(-Math.abs(St.delta*ae)));St.delta<0&&ke!==0&&(ke=1/ke);var yn=typeof St.targetZoom=="number"?Lt.zoomScale(St.targetZoom):Lt.scale;St.targetZoom=Math.min(Lt.maxZoom,Math.max(Lt.minZoom,Lt.scaleZoom(yn*ke))),St.type==="wheel"&&(St.startZoom=Lt.zoom,St.easing=St.smoothOutEasing(200)),St.delta=0}var vn=typeof St.targetZoom=="number"?St.targetZoom:Lt.zoom,Cn=St.startZoom,ne=St.easing,_e=!1,Ze;if(St.type==="wheel"&&Cn&&ne){var In=Math.min((Fs()-St.lastWheelEventTime)/200,1),ar=ne(In);Ze=ds(Cn,vn,ar),In<1?St.frameId||(St.frameId=!0):_e=!0}else Ze=vn,_e=!0;return St.active=!0,_e&&(St.active=!1,St.finishTimeout=setTimeout(function(){St.zooming=!1,St.handler.triggerRenderFrame(),delete St.targetZoom,delete St.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!_e,zoomDelta:Ze-Lt.zoom,around:St.aroundPoint,originalEvent:St.lastWheelEvent}}},this.map=Et,this.el=Et.getCanvasContainer(),this.handler=tt,this.delta=0,this.defaultZoomRate=Rr,this.wheelZoomRate=Xr}return r()(jt,[{key:"setZoomRate",value:function(tt){this.defaultZoomRate=tt}},{key:"setWheelZoomRate",value:function(tt){this.wheelZoomRate=tt}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(tt){this.isEnabled()||(this.enabled=!0,this.aroundCenter=tt&&tt.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"wheel",value:function(tt){if(!!this.isEnabled()){var St=tt.deltaMode===window.WheelEvent.DOM_DELTA_LINE?tt.deltaY*40:tt.deltaY,Lt=Fs(),ae=Lt-(this.lastWheelEventTime||0);this.lastWheelEventTime=Lt,St!==0&&St%dr==0?this.type="wheel":St!==0&&Math.abs(St)<4?this.type="trackpad":ae>400?(this.type=null,this.lastValue=St,this.timeout=setTimeout(this.onTimeout,40,tt)):this.type||(this.type=Math.abs(ae*St)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,St+=this.lastValue)),tt.shiftKey&&St&&(St=St/4),this.type&&(this.lastWheelEvent=tt,this.delta-=St,this.active||this.start(tt)),tt.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(tt){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(tt)}},{key:"start",value:function(tt){if(!!this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var St=Jo.mousePos(this.el,tt);this.around=La.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(St)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(tt){var St=Ou;if(this.prevEase){var Lt=this.prevEase,ae=(Fs()-Lt.start)/Lt.duration,ke=Lt.easing(ae+.01)-Lt.easing(ae),yn=.27/Math.sqrt(ke*ke+1e-4)*.01,vn=Math.sqrt(.27*.27-yn*yn);St=Ts(yn,vn,.25,1)}return this.prevEase={start:Fs(),duration:tt,easing:St},St}}]),jt}(),li=Fr,yr=function(){function jt(Et,tt){s()(this,jt),this.clickZoom=void 0,this.tapZoom=void 0,this.clickZoom=Et,this.tapZoom=tt}return r()(jt,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),jt}(),Zt=function(){function jt(Et,tt,St){s()(this,jt),this.inertiaOptions=void 0,this.el=void 0,this.mousePan=void 0,this.touchPan=void 0,this.el=Et,this.mousePan=tt,this.touchPan=St}return r()(jt,[{key:"enable",value:function(tt){this.inertiaOptions=tt||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),jt}(),te=function(){function jt(Et,tt,St){s()(this,jt),this.mouseRotate=void 0,this.mousePitch=void 0,this.pitchWithRotate=void 0,this.pitchWithRotate=Et.pitchWithRotate,this.mouseRotate=tt,this.mousePitch=St}return r()(jt,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),jt}(),Le=function(){function jt(Et,tt,St,Lt){s()(this,jt),this.el=void 0,this.touchZoom=void 0,this.touchRotate=void 0,this.tapDragZoom=void 0,this.rotationDisabled=void 0,this.enabled=void 0,this.el=Et,this.touchZoom=tt,this.touchRotate=St,this.tapDragZoom=Lt,this.rotationDisabled=!1,this.enabled=!0}return r()(jt,[{key:"enable",value:function(tt){this.touchZoom.enable(tt),this.rotationDisabled||this.touchRotate.enable(tt),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),jt}();function Se(jt,Et){for(var tt={},St=0;St<jt.length;St++)tt[jt[St].identifier]=Et[St];return tt}function Dt(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=zt(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function zt(jt,Et){if(!!jt){if(typeof jt=="string")return se(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return se(jt,Et)}}function se(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function re(jt){var Et=new ya(0,0),tt=Dt(jt),St;try{for(tt.s();!(St=tt.n()).done;){var Lt=St.value;Et._add(Lt)}}catch(ae){tt.e(ae)}finally{tt.f()}return Et.div(jt.length)}var fe=500,Fe=500,Ke=30,rn=function(){function jt(Et){s()(this,jt),this.numTouches=void 0,this.centroid=void 0,this.startTime=void 0,this.aborted=void 0,this.touches=void 0,this.reset(),this.numTouches=Et.numTouches}return r()(jt,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(tt,St,Lt){(this.centroid||Lt.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=tt.timeStamp),Lt.length===this.numTouches&&(this.centroid=re(St),this.touches=Se(Lt,St)))}},{key:"touchmove",value:function(tt,St,Lt){if(!(this.aborted||!this.centroid)){var ae=Se(Lt,St);for(var ke in this.touches)if(this.touches[ke]){var yn=this.touches[ke],vn=ae[ke];(!vn||vn.dist(yn)>Ke)&&(this.aborted=!0)}}}},{key:"touchend",value:function(tt,St,Lt){if((!this.centroid||tt.timeStamp-this.startTime>Fe)&&(this.aborted=!0),Lt.length===0){var ae=!this.aborted&&this.centroid;if(this.reset(),ae)return ae}}}]),jt}(),Je=function(){function jt(Et){s()(this,jt),this.singleTap=void 0,this.numTaps=void 0,this.lastTime=void 0,this.lastTap=void 0,this.count=void 0,this.singleTap=new rn(Et),this.numTaps=Et.numTaps,this.reset()}return r()(jt,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(tt,St,Lt){this.singleTap.touchstart(tt,St,Lt)}},{key:"touchmove",value:function(tt,St,Lt){this.singleTap.touchmove(tt,St,Lt)}},{key:"touchend",value:function(tt,St,Lt){var ae=this.singleTap.touchend(tt,St,Lt);if(ae){var ke=tt.timeStamp-this.lastTime<fe,yn=!this.lastTap||this.lastTap.dist(ae)<Ke;if((!ke||!yn)&&this.reset(),this.count++,this.lastTime=tt.timeStamp,this.lastTap=ae,this.count===this.numTaps)return this.reset(),ae}}}]),jt}(),pn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.swipePoint=void 0,this.swipeTouch=void 0,this.tapTime=void 0,this.tap=void 0,this.tap=new Je({numTouches:1,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(tt,St,Lt){this.swipePoint||(this.tapTime&&tt.timeStamp-this.tapTime>fe&&this.reset(),this.tapTime?Lt.length>0&&(this.swipePoint=St[0],this.swipeTouch=Lt[0].identifier):this.tap.touchstart(tt,St,Lt))}},{key:"touchmove",value:function(tt,St,Lt){if(!this.tapTime)this.tap.touchmove(tt,St,Lt);else if(this.swipePoint){if(Lt[0].identifier!==this.swipeTouch)return;var ae=St[0],ke=ae.y-this.swipePoint.y;return this.swipePoint=ae,tt.preventDefault(),this.active=!0,{zoomDelta:ke/128}}}},{key:"touchend",value:function(tt,St,Lt){if(this.tapTime)this.swipePoint&&Lt.length===0&&this.reset();else{var ae=this.tap.touchend(tt,St,Lt);ae&&(this.tapTime=tt.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),hn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomIn=new Je({numTouches:1,numTaps:2}),this.zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(tt,St,Lt){this.zoomIn.touchstart(tt,St,Lt),this.zoomOut.touchstart(tt,St,Lt)}},{key:"touchmove",value:function(tt,St,Lt){this.zoomIn.touchmove(tt,St,Lt),this.zoomOut.touchmove(tt,St,Lt)}},{key:"touchend",value:function(tt,St,Lt){var ae=this,ke=this.zoomIn.touchend(tt,St,Lt),yn=this.zoomOut.touchend(tt,St,Lt);if(ke)return this.active=!0,tt.preventDefault(),setTimeout(function(){return ae.reset()},0),{cameraAnimation:function(Cn){return Cn.easeTo({duration:300,zoom:Cn.getZoom()+1,around:Cn.unproject(ke)},{originalEvent:tt})}};if(yn)return this.active=!0,tt.preventDefault(),setTimeout(function(){return ae.reset()},0),{cameraAnimation:function(Cn){return Cn.easeTo({duration:300,zoom:Cn.getZoom()-1,around:Cn.unproject(yn)},{originalEvent:tt})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),Jn=function(){function jt(Et){s()(this,jt),this.enabled=void 0,this.active=void 0,this.touches=void 0,this.minTouches=void 0,this.clickTolerance=void 0,this.sum=void 0,this.minTouches=1,this.clickTolerance=Et.clickTolerance||1,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new ya(0,0)}},{key:"touchstart",value:function(tt,St,Lt){return this.calculateTransform(tt,St,Lt)}},{key:"touchmove",value:function(tt,St,Lt){if(!!this.active)return tt.preventDefault(),this.calculateTransform(tt,St,Lt)}},{key:"touchend",value:function(tt,St,Lt){this.calculateTransform(tt,St,Lt),this.active&&Lt.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(tt,St,Lt){Lt.length>0&&(this.active=!0);var ae=Se(Lt,St),ke=new ya(0,0),yn=new ya(0,0),vn=0;for(var Cn in ae)if(ae[Cn]){var ne=ae[Cn],_e=this.touches[Cn];_e&&(ke._add(ne),yn._add(ne.sub(_e)),vn++,ae[Cn]=ne)}if(this.touches=ae,!(vn<this.minTouches||!yn.mag())){var Ze=yn.div(vn);if(this.sum._add(Ze),!(this.sum.mag()<this.clickTolerance)){var In=ke.div(vn);return{around:In,panDelta:Ze}}}}}]),jt}(),Vn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.firstTwoTouches=void 0,this.vector=void 0,this.startVector=void 0,this.aroundCenter=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(tt){}},{key:"move",value:function(tt,St,Lt){}},{key:"touchstart",value:function(tt,St,Lt){this.firstTwoTouches||Lt.length<2||(this.firstTwoTouches=[Lt[0].identifier,Lt[1].identifier],this.start([St[0],St[1]]))}},{key:"touchmove",value:function(tt,St,Lt){if(!!this.firstTwoTouches){tt.preventDefault();var ae=At()(this.firstTwoTouches,2),ke=ae[0],yn=ae[1],vn=Zn(Lt,St,ke),Cn=Zn(Lt,St,yn);if(!(!vn||!Cn)){var ne=this.aroundCenter?null:vn.add(Cn).div(2);return this.move([vn,Cn],ne,tt)}}}},{key:"touchend",value:function(tt,St,Lt){if(!!this.firstTwoTouches){var ae=At()(this.firstTwoTouches,2),ke=ae[0],yn=ae[1],vn=Zn(Lt,St,ke),Cn=Zn(Lt,St,yn);vn&&Cn||(this.active&&Jo.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(tt){this.enabled=!0,this.aroundCenter=!!tt&&tt.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function Zn(jt,Et,tt){for(var St=0;St<jt.length;St++)if(jt[St].identifier===tt)return Et[St]}function Wn(jt){var Et=cr();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function cr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}function xr(jt){return Math.abs(jt.y)>Math.abs(jt.x)}var Hr=100,mi=function(jt){n()(tt,jt);var Et=Wn(tt);function tt(){var St;s()(this,tt);for(var Lt=arguments.length,ae=new Array(Lt),ke=0;ke<Lt;ke++)ae[ke]=arguments[ke];return St=Et.call.apply(Et,[this].concat(ae)),St.valid=void 0,St.firstMove=void 0,St.lastPoints=void 0,St}return r()(tt,[{key:"reset",value:function(){Cs()(u()(tt.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(Lt){this.lastPoints=Lt,xr(Lt[0].sub(Lt[1]))&&(this.valid=!1)}},{key:"move",value:function(Lt,ae,ke){var yn=Lt[0].sub(this.lastPoints[0]),vn=Lt[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(yn,vn,ke.timeStamp),!!this.valid){this.lastPoints=Lt,this.active=!0;var Cn=(yn.y+vn.y)/2,ne=-.5;return{pitchDelta:Cn*ne}}}},{key:"gestureBeginsVertically",value:function(Lt,ae,ke){if(this.valid!==void 0)return this.valid;var yn=2,vn=Lt.mag()>=yn,Cn=ae.mag()>=yn;if(!(!vn&&!Cn)){if(!vn||!Cn)return this.firstMove===void 0&&(this.firstMove=ke),ke-this.firstMove<Hr?void 0:!1;var ne=Lt.y>0==ae.y>0;return xr(Lt)&&xr(ae)&&ne}}}]),tt}(Vn);function Br(jt){var Et=ui();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function ui(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var _i=25;function Zi(jt,Et){return jt.angleWith(Et)*180/Math.PI}var Ri=function(jt){n()(tt,jt);var Et=Br(tt);function tt(){var St;s()(this,tt);for(var Lt=arguments.length,ae=new Array(Lt),ke=0;ke<Lt;ke++)ae[ke]=arguments[ke];return St=Et.call.apply(Et,[this].concat(ae)),St.minDiameter=void 0,St}return r()(tt,[{key:"reset",value:function(){Cs()(u()(tt.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(Lt){this.startVector=this.vector=Lt[0].sub(Lt[1]),this.minDiameter=Lt[0].dist(Lt[1])}},{key:"move",value:function(Lt,ae){var ke=this.vector;if(this.vector=Lt[0].sub(Lt[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Zi(this.vector,ke),pinchAround:ae}}},{key:"isBelowThreshold",value:function(Lt){this.minDiameter=Math.min(this.minDiameter,Lt.mag());var ae=Math.PI*this.minDiameter,ke=_i/ae*360,yn=Zi(Lt,this.startVector);return Math.abs(yn)<ke}}]),tt}(Vn);function Ma(jt){var Et=ga();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function ga(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var la=.1;function ii(jt,Et){return Math.log(jt/Et)/Math.LN2}var Pa=function(jt){n()(tt,jt);var Et=Ma(tt);function tt(){var St;s()(this,tt);for(var Lt=arguments.length,ae=new Array(Lt),ke=0;ke<Lt;ke++)ae[ke]=arguments[ke];return St=Et.call.apply(Et,[this].concat(ae)),St.distance=void 0,St.startDistance=void 0,St}return r()(tt,[{key:"reset",value:function(){Cs()(u()(tt.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(Lt){this.startDistance=this.distance=Lt[0].dist(Lt[1])}},{key:"move",value:function(Lt,ae){var ke=this.distance;if(this.distance=Lt[0].dist(Lt[1]),!(!this.active&&Math.abs(ii(this.distance,this.startDistance))<la))return this.active=!0,{zoomDelta:ii(this.distance,ke),pinchAround:ae}}}]),tt}(Vn);function Va(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=Ya(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function Ya(jt,Et){if(!!jt){if(typeof jt=="string")return Ii(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Ii(jt,Et)}}function Ii(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var Ra=function(Et){return Et.zoom||Et.drag||Et.pitch||Et.rotate};function lo(jt){return jt.panDelta&&jt.panDelta.mag()||jt.zoomDelta||jt.bearingDelta||jt.pitchDelta}var Rs=function(){function jt(Et,tt){var St=this;s()(this,jt),this.map=void 0,this.el=void 0,this.handlers=void 0,this.eventsInProgress=void 0,this.frameId=void 0,this.inertia=void 0,this.bearingSnap=void 0,this.handlersById=void 0,this.updatingCamera=void 0,this.changes=void 0,this.previousActiveHandlers=void 0,this.bearingChanged=void 0,this.listeners=void 0,this.handleWindowEvent=function(_e){St.handleEvent(_e,"".concat(_e.type,"Window"))},this.handleEvent=function(_e,Ze){if(_e.type==="blur"){St.stop();return}St.updatingCamera=!0;var In=_e.type==="renderFrame"?void 0:_e,ar={needsRenderFrame:!1},ur={},sr={},Or=_e.touches?St.getMapTouches(_e.touches):void 0,ri=Or?Jo.touchPos(St.el,Or):Jo.mousePos(St.el,_e),Vr=Va(St.handlers),ni;try{for(Vr.s();!(ni=Vr.n()).done;){var fi=ni.value,Oi=fi.handlerName,vi=fi.handler,si=fi.allowed;if(!!vi.isEnabled()){var Lr=void 0;if(St.blockedByActive(sr,si,Oi))vi.reset();else{var _r=Ze||_e.type;vi&&vi[_r]&&(Lr=vi[_r](_e,ri,Or),St.mergeIHandlerResult(ar,ur,Lr,Oi,In),Lr&&Lr.needsRenderFrame&&St.triggerRenderFrame())}(Lr||vi.isActive())&&(sr[Oi]=vi)}}}catch(na){Vr.e(na)}finally{Vr.f()}var di={};for(var Vi in St.previousActiveHandlers)sr[Vi]||(di[Vi]=In);St.previousActiveHandlers=sr,(Object.keys(di).length||lo(ar))&&(St.changes.push([ar,ur,di]),St.triggerRenderFrame()),(Object.keys(sr).length||lo(ar))&&St.map.stop(!0),St.updatingCamera=!1;var qr=ar.cameraAnimation;qr&&(St.inertia.clear(),St.fireEvents({},{}),St.changes=[],qr(St.map))},this.map=Et,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new As(Et),this.bearingSnap=tt.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(tt);var Lt=this.el;this.listeners=[[Lt,"touchstart",{passive:!1}],[Lt,"touchmove",{passive:!1}],[Lt,"touchend",void 0],[Lt,"touchcancel",void 0],[Lt,"mousedown",void 0],[Lt,"mousemove",void 0],[Lt,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[Lt,"mouseover",void 0],[Lt,"mouseout",void 0],[Lt,"dblclick",void 0],[Lt,"click",void 0],[Lt,"keydown",{capture:!1}],[Lt,"keyup",void 0],[Lt,"wheel",{passive:!1}],[Lt,"contextmenu",void 0],[window,"blur",void 0]];var ae=Va(this.listeners),ke;try{for(ae.s();!(ke=ae.n()).done;){var yn=At()(ke.value,3),vn=yn[0],Cn=yn[1],ne=yn[2];Jo.addEventListener(vn,Cn,vn===window.document?this.handleWindowEvent:this.handleEvent,ne)}}catch(_e){ae.e(_e)}finally{ae.f()}}return r()(jt,[{key:"destroy",value:function(){var tt=Va(this.listeners),St;try{for(tt.s();!(St=tt.n()).done;){var Lt=At()(St.value,3),ae=Lt[0],ke=Lt[1],yn=Lt[2];Jo.removeEventListener(ae,ke,ae===window.document?this.handleWindowEvent:this.handleEvent,yn)}}catch(vn){tt.e(vn)}finally{tt.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var tt=Va(this.handlers),St;try{for(tt.s();!(St=tt.n()).done;){var Lt=St.value.handler;Lt.reset()}}catch(ae){tt.e(ae)}finally{tt.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var tt=Va(this.handlers),St;try{for(tt.s();!(St=tt.n()).done;){var Lt=St.value.handler;if(Lt.isActive())return!0}}catch(ae){tt.e(ae)}finally{tt.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Ra(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(tt,St,Lt,ae,ke){if(!!Lt){qi()(tt,Lt);var yn={handlerName:ae,originalEvent:Lt.originalEvent||ke};Lt.zoomDelta!==void 0&&(St.zoom=yn),Lt.panDelta!==void 0&&(St.drag=yn),Lt.pitchDelta!==void 0&&(St.pitch=yn),Lt.bearingDelta!==void 0&&(St.rotate=yn)}}},{key:"triggerRenderFrame",value:function(){var tt=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(St){delete tt.frameId,tt.handleEvent(new fl("renderFrame",{timeStamp:St})),tt.applyChanges()}))}},{key:"addDefaultHandlers",value:function(tt){var St=this.map,Lt=St.getCanvasContainer();this.add("mapEvent",new Qo(St,tt));var ae=St.boxZoom=new Nl(St,tt);this.add("boxZoom",ae);var ke=new hn,yn=new tu;St.doubleClickZoom=new yr(yn,ke),this.add("tapZoom",ke),this.add("clickZoom",yn);var vn=new pn;this.add("tapDragZoom",vn);var Cn=St.touchPitch=new mi;this.add("touchPitch",Cn);var ne=new Pe(tt),_e=new wn(tt);St.dragRotate=new te(tt,ne,_e),this.add("mouseRotate",ne,["mousePitch"]),this.add("mousePitch",_e,["mouseRotate"]);var Ze=new Bu(tt),In=new Jn(tt);St.dragPan=new Zt(Lt,Ze,In),this.add("mousePan",Ze),this.add("touchPan",In,["touchZoom","touchRotate"]);var ar=new Ri,ur=new Pa;St.touchZoomRotate=new Le(Lt,ur,ar,vn),this.add("touchRotate",ar,["touchPan","touchZoom"]),this.add("touchZoom",ur,["touchPan","touchRotate"]);var sr=St.scrollZoom=new li(St,this);this.add("scrollZoom",sr,["mousePan"]);var Or=St.keyboard=new Ru;this.add("keyboard",Or),this.add("blockableMapEvent",new el(St));for(var ri=0,Vr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ri<Vr.length;ri++){var ni=Vr[ri];tt.interactive&&tt[ni]&&St[ni].enable(tt[ni])}}},{key:"add",value:function(tt,St,Lt){this.handlers.push({handlerName:tt,handler:St,allowed:Lt}),this.handlersById[tt]=St}},{key:"blockedByActive",value:function(tt,St,Lt){for(var ae in tt)if(ae!==Lt&&(!St||St.indexOf(ae)<0))return!0;return!1}},{key:"getMapTouches",value:function(tt){var St=[],Lt=Va(tt),ae;try{for(Lt.s();!(ae=Lt.n()).done;){var ke=ae.value,yn=ke.target;this.el.contains(yn)&&St.push(ke)}}catch(vn){Lt.e(vn)}finally{Lt.f()}return St}},{key:"applyChanges",value:function(){var tt={},St={},Lt={},ae=Va(this.changes),ke;try{for(ae.s();!(ke=ae.n()).done;){var yn=At()(ke.value,3),vn=yn[0],Cn=yn[1],ne=yn[2];vn.panDelta&&(tt.panDelta=(tt.panDelta||new ya(0,0))._add(vn.panDelta)),vn.zoomDelta&&(tt.zoomDelta=(tt.zoomDelta||0)+vn.zoomDelta),vn.bearingDelta&&(tt.bearingDelta=(tt.bearingDelta||0)+vn.bearingDelta),vn.pitchDelta&&(tt.pitchDelta=(tt.pitchDelta||0)+vn.pitchDelta),vn.around!==void 0&&(tt.around=vn.around),vn.pinchAround!==void 0&&(tt.pinchAround=vn.pinchAround),vn.noInertia&&(tt.noInertia=vn.noInertia),qi()(St,Cn),qi()(Lt,ne)}}catch(_e){ae.e(_e)}finally{ae.f()}this.updateMapTransform(tt,St,Lt),this.changes=[]}},{key:"updateMapTransform",value:function(tt,St,Lt){var ae=this.map,ke=ae.transform;if(!lo(tt))return this.fireEvents(St,Lt);var yn=tt.panDelta,vn=tt.zoomDelta,Cn=tt.bearingDelta,ne=tt.pitchDelta,_e=tt.pinchAround,Ze=tt.around;_e!==void 0&&(Ze=_e),ae.stop(!0),Ze=Ze||ae.transform.centerPoint;var In=ke.pointLocation(yn?Ze.sub(yn):Ze);Cn&&(ke.bearing+=Cn),ne&&(ke.pitch+=ne),vn&&(ke.zoom+=vn),ke.setLocationAtPoint(In,Ze),this.map.update(),tt.noInertia||this.inertia.record(tt),this.fireEvents(St,Lt)}},{key:"fireEvents",value:function(tt,St){var Lt=this,ae=Ra(this.eventsInProgress),ke=Ra(tt),yn={};for(var vn in tt)if(tt[vn]){var Cn=tt[vn].originalEvent;this.eventsInProgress[vn]||(yn["".concat(vn,"start")]=Cn),this.eventsInProgress[vn]=tt[vn]}!ae&&ke&&this.fireEvent("movestart",ke.originalEvent);for(var ne in yn)yn[ne]&&this.fireEvent(ne,yn[ne]);tt.rotate&&(this.bearingChanged=!0),ke&&this.fireEvent("move",ke.originalEvent);for(var _e in tt)if(tt[_e]){var Ze=tt[_e].originalEvent;this.fireEvent(_e,Ze)}var In={},ar;for(var ur in this.eventsInProgress)if(this.eventsInProgress[ur]){var sr=this.eventsInProgress[ur],Or=sr.handlerName,ri=sr.originalEvent;this.handlersById[Or].isActive()||(delete this.eventsInProgress[ur],ar=St[Or]||ri,In["".concat(ur,"end")]=ar)}for(var Vr in In)In[Vr]&&this.fireEvent(Vr,In[Vr]);var ni=Ra(this.eventsInProgress);if((ae||ke)&&!ni){this.updatingCamera=!0;var fi=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Oi=function(si){return si!==0&&-Lt.bearingSnap<si&&si<Lt.bearingSnap};fi?(Oi(fi.bearing||this.map.getBearing())&&(fi.bearing=0),this.map.easeTo(fi,{originalEvent:ar})):(this.map.emit("moveend",new Ha("moveend",{originalEvent:ar})),Oi(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(tt,St){this.map.emit(tt,new Ha(tt,St?{originalEvent:St}:{}))}}]),jt}(),Ds=Rs,Ku=R("DzJC"),hu=R.n(Ku),j=function(){function jt(Et){var tt=this;s()(this,jt),this.map=void 0,this.updateHash=void 0,this.hashName=void 0,this.onHashChange=function(){var St=tt.getCurrentHash();if(St.length>=3&&!St.some(function(ae){return isNaN(+ae)})){var Lt=tt.map.dragRotate.isEnabled()&&tt.map.touchZoomRotate.isEnabled()?+(St[3]||0):tt.map.getBearing();return tt.map.jumpTo({center:[+St[2],+St[1]],zoom:+St[0],bearing:Lt,pitch:+(St[4]||0)}),!0}return!1},this.getCurrentHash=function(){var St=window.location.hash.replace("#","");if(tt.hashName){var Lt;return St.split("&").map(function(ae){return ae.split("=")}).forEach(function(ae){ae[0]===tt.hashName&&(Lt=ae)}),(Lt&&Lt[1]||"").split("/")}return St.split("/")},this.updateHashUnthrottled=function(){var St=tt.getHashString();try{window.history.replaceState(window.history.state,"",St)}catch(Lt){}},this.hashName=Et&&encodeURIComponent(Et),this.updateHash=hu()(this.updateHashUnthrottled,30*1e3/100)}return r()(jt,[{key:"addTo",value:function(tt){return this.map=tt,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(tt){var St=this.map.getCenter(),Lt=Math.round(this.map.getZoom()*100)/100,ae=Math.ceil((Lt*Math.LN2+Math.log(512/360/.5))/Math.LN10),ke=Math.pow(10,ae),yn=Math.round(St.lng*ke)/ke,vn=Math.round(St.lat*ke)/ke,Cn=this.map.getBearing(),ne=this.map.getPitch(),_e="";if(tt?_e+="/".concat(yn,"/").concat(vn,"/").concat(Lt):_e+="".concat(Lt,"/").concat(vn,"/").concat(yn),(Cn||ne)&&(_e+="/".concat(Math.round(Cn*10)/10)),ne&&(_e+="/".concat(Math.round(ne))),this.hashName){var Ze=this.hashName,In=!1,ar=window.location.hash.slice(1).split("&").map(function(ur){var sr=ur.split("=")[0];return sr===Ze?(In=!0,"".concat(sr,"=").concat(_e)):ur}).filter(function(ur){return ur});return In||ar.push("".concat(Ze,"=").concat(_e)),"#".concat(ar.join("&"))}return"#".concat(_e)}}]),jt}(),I=j,w=null,B=[],D=30,G=1e3/D,$=window.performance,st={create:"create",load:"load",fullLoad:"fullLoad"},Ct={mark:function(Et){$.mark(Et)},frame:function(Et){var tt=Et;if(w!=null){var St=tt-w;B.push(St)}w=tt},clearMetrics:function(){w=null,B=[],$.clearMeasures("loadTime"),$.clearMeasures("fullLoadTime");for(var Et in st)$.clearMarks(st[Et])},getPerformanceMetrics:function(){var Et=$.measure("loadTime",st.create,st.load).duration,tt=$.measure("fullLoadTime",st.create,st.fullLoad).duration,St=B.length,Lt=B.reduce(function(vn,Cn){return vn+Cn},0)/St/1e3,ae=1/Lt,ke=B.filter(function(vn){return vn>G}).reduce(function(vn,Cn){return vn+(Cn-G)/G},0),yn=ke/(St+ke)*100;return{loadTime:Et,fullLoadTime:tt,fps:ae,percentDroppedFrames:yn}}};function wt(jt,Et){var tt;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(tt=Ut(jt))||Et&&jt&&typeof jt.length=="number"){tt&&(jt=tt);var St=0,Lt=function(){};return{s:Lt,n:function(){return St>=jt.length?{done:!0}:{done:!1,value:jt[St++]}},e:function(Cn){throw Cn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,yn;return{s:function(){tt=jt[Symbol.iterator]()},n:function(){var Cn=tt.next();return ae=Cn.done,Cn},e:function(Cn){ke=!0,yn=Cn},f:function(){try{!ae&&tt.return!=null&&tt.return()}finally{if(ke)throw yn}}}}function Ut(jt,Et){if(!!jt){if(typeof jt=="string")return Yt(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Yt(jt,Et)}}function Yt(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}var qt=function(){function jt(){s()(this,jt),this.queue=void 0,this.id=void 0,this.cleared=void 0,this.currentlyRunning=void 0,this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return r()(jt,[{key:"add",value:function(tt){var St=++this.id,Lt=this.queue;return Lt.push({callback:tt,id:St,cancelled:!1}),St}},{key:"remove",value:function(tt){var St=this.currentlyRunning,Lt=St?this.queue.concat(St):this.queue,ae=wt(Lt),ke;try{for(ae.s();!(ke=ae.n()).done;){var yn=ke.value;if(yn.id===tt){yn.cancelled=!0;return}}}catch(vn){ae.e(vn)}finally{ae.f()}}},{key:"run",value:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,St=this.currentlyRunning=this.queue;this.queue=[];var Lt=wt(St),ae;try{for(Lt.s();!(ae=Lt.n()).done;){var ke=ae.value;if(!ke.cancelled&&(ke.callback(tt),this.cleared))break}}catch(yn){Lt.e(yn)}finally{Lt.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),jt}(),he=qt;function ye(jt){var Et=je();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function je(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-map */
.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Ie=-2,Ve=22,qe=0,sn=60,tr={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Ie,maxZoom:Ve,minPitch:qe,maxPitch:sn,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},kn=function(jt){n()(tt,jt);var Et=ye(tt);function tt(St){var Lt;s()(this,tt),Lt=Et.call(this,qi()({},tr,St)),Lt.doubleClickZoom=void 0,Lt.dragRotate=void 0,Lt.dragPan=void 0,Lt.touchZoomRotate=void 0,Lt.scrollZoom=void 0,Lt.keyboard=void 0,Lt.touchPitch=void 0,Lt.boxZoom=void 0,Lt.handlers=void 0,Lt.container=void 0,Lt.canvas=void 0,Lt.canvasContainer=void 0,Lt.renderTaskQueue=new he,Lt.frame=void 0,Lt.trackResize=!0,Lt.hash=void 0,Lt.onWindowOnline=function(){Lt.update()},Lt.onWindowResize=function(ke){Lt.trackResize&&Lt.resize({originalEvent:ke}).update()},Lt.initContainer(),Lt.resize(),Lt.handlers=new Ds(xo()(Lt),Lt.options),typeof window!="undefined"&&(window.addEventListener("online",Lt.onWindowOnline,!1),window.addEventListener("resize",Lt.onWindowResize,!1),window.addEventListener("orientationchange",Lt.onWindowResize,!1));var ae=typeof St.hash=="string"&&St.hash||void 0;return St.hash&&(Lt.hash=new I(ae).addTo(xo()(Lt))),(!Lt.hash||!Lt.hash.onHashChange())&&(Lt.jumpTo({center:St.center,zoom:St.zoom,bearing:St.bearing,pitch:St.pitch}),St.bounds&&(Lt.resize(),Lt.fitBounds(St.bounds,qi()({},St.fitBoundsOptions,{duration:0})))),Lt}return r()(tt,[{key:"resize",value:function(Lt){var ae=this.containerDimensions(),ke=ae[0],yn=ae[1];this.transform.resize(ke,yn);var vn=!this.moving;return vn&&(this.stop(),this.emit("movestart",new Event("movestart",Lt)),this.emit("move",new Event("move",Lt))),this.emit("resize",new Event("resize",Lt)),vn&&this.emit("moveend",new Event("moveend",Lt)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(Lt){return this.transform.locationPoint(La.convert(Lt))}},{key:"unproject",value:function(Lt){return this.transform.pointLocation(ya.convert(Lt))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(Lt){this.transform.setMaxBounds(Qu.convert(Lt))}},{key:"setStyle",value:function(Lt){}},{key:"setMinZoom",value:function(Lt){if(Lt=Lt==null?Ie:Lt,Lt>=Ie&&Lt<=this.transform.maxZoom)return this.transform.minZoom=Lt,this.getZoom()<Lt&&this.setZoom(Lt),this;throw new Error("minZoom must be between ".concat(Ie," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(Lt){if(Lt=Lt==null?Ve:Lt,Lt>=this.transform.minZoom)return this.transform.maxZoom=Lt,this.getZoom()>Lt&&this.setZoom(Lt),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(Lt){if(Lt=Lt==null?qe:Lt,Lt<qe)throw new Error("minPitch must be greater than or equal to ".concat(qe));if(Lt>=qe&&Lt<=this.transform.maxPitch)return this.transform.minPitch=Lt,this.getPitch()<Lt&&this.setPitch(Lt),this;throw new Error("minPitch must be between ".concat(qe," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(Lt){if(Lt=Lt==null?sn:Lt,Lt>sn)throw new Error("maxPitch must be less than or equal to ".concat(sn));if(Lt>=this.transform.minPitch)return this.transform.maxPitch=Lt,this.getPitch()>Lt&&this.setPitch(Lt),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(Lt){this.transform.renderWorldCopies=!!Lt}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(Lt){return this.update(),this.renderTaskQueue.add(Lt)}},{key:"cancelRenderFrame",value:function(Lt){return this.renderTaskQueue.remove(Lt)}},{key:"triggerRepaint",value:function(){var Lt=this;this.frame||(this.frame=ll(function(ae){Ct.frame(ae),Lt.frame=null,Lt.update(ae)}))}},{key:"update",value:function(Lt){var ae=this;this.frame||(this.frame=ll(function(ke){Ct.frame(ke),ae.frame=null,ae.renderTaskQueue.run(Lt)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var Lt=this.container;Lt.classList.add("l7-map");var ae=this.canvasContainer=It.a.create("div","l7-canvas-container",Lt);this.options.interactive&&ae.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var Lt=0,ae=0;return this.container&&(Lt=this.container.clientWidth||400,ae=this.container.clientHeight||300),[Lt,ae]}},{key:"resizeCanvas",value:function(Lt,ae){var ke=It.a.DPR||1;this.canvas.width=ke*Lt,this.canvas.height=ke*ae,this.canvas.style.width="".concat(Lt,"px"),this.canvas.style.height="".concat(ae,"px")}}]),tt}(vs),pr=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(tt){var St=tt.center,Lt=tt.zoom,ae=tt.pitch,ke=tt.bearing,yn=tt.viewportHeight,vn=tt.viewportWidth;this.viewport=new Ro({width:vn,height:yn,longitude:St&&St[0],latitude:St&&St[1],zoom:Lt,pitch:ae,bearing:ke})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(tt,St){return this.viewport.projectFlat(tt,St)}}]),jt}(),Mr={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},$r,Yr,Ti,Li,Ki,Xi,Oa,Na,ji,Sa,xa,Yi,_a,sa;function Ia(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function Fa(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?Ia(Object(tt),!0).forEach(function(St){v()(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):Ia(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}var _s={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},us=12,Os=($r=Object(Rt.injectable)(),Yr=Object(Rt.inject)(x.TYPES.MapConfig),Ti=Object(Rt.inject)(x.TYPES.IGlobalConfigService),Li=Object(Rt.inject)(x.TYPES.ILogService),Ki=Object(Rt.inject)(x.TYPES.ICoordinateSystemService),Xi=Object(Rt.inject)(x.TYPES.IEventEmitter),$r(Oa=(Na=(sa=function(){function jt(){var Et=this;s()(this,jt),this.map=void 0,y()(this,"config",ji,this),y()(this,"configService",Sa,this),y()(this,"logger",xa,this),y()(this,"coordinateSystemService",Yi,this),y()(this,"eventEmitter",_a,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var tt=Et.map.getCenter(),St=tt.lat,Lt=tt.lng,ae=Et.config.offsetCoordinate,ke=ae===void 0?!0:ae;Et.viewport.syncWithMapCamera({bearing:Et.map.getBearing(),center:[Lt,St],viewportHeight:Et.map.transform.height,pitch:Et.map.getPitch(),viewportWidth:Et.map.transform.width,zoom:Et.map.getZoom(),cameraHeight:0}),Et.viewport.getZoom()>us&&ke?Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):Et.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),Et.cameraChangedCallback(Et.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var tt=this.map.getCanvasContainer();this.markerContainer=It.a.create("div","l7-marker-container",tt),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(tt,St){x.MapServiceEvent.indexOf(tt)!==-1?this.eventEmitter.on(tt,St):this.map.on(_s[tt]||tt,St)}},{key:"off",value:function(tt,St){this.map.off(_s[tt]||tt,St)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var tt=this.map.transform;return[tt.width,tt.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(tt){return this.map.setZoom(tt)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(tt){this.map.setCenter(tt)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(tt){this.map.setBearing(tt)}},{key:"zoomIn",value:function(tt,St){this.map.zoomIn(tt,St)}},{key:"zoomOut",value:function(tt,St){this.map.zoomOut(tt,St)}},{key:"setPitch",value:function(tt){return this.map.setPitch(tt)}},{key:"panTo",value:function(tt){this.map.panTo(tt)}},{key:"panBy",value:function(tt){this.panTo(tt)}},{key:"fitBounds",value:function(tt,St){this.map.fitBounds(tt,St)}},{key:"setMaxZoom",value:function(tt){this.map.setMaxZoom(tt)}},{key:"setMinZoom",value:function(tt){this.map.setMinZoom(tt)}},{key:"setMapStatus",value:function(tt){tt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),tt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),tt.dragEnable===!1&&this.map.dragPan.disable(),tt.dragEnable===!0&&this.map.dragPan.enable(),tt.rotateEnable===!1&&this.map.dragRotate.disable(),tt.dragEnable===!0&&this.map.dragRotate.enable(),tt.keyboardEnable===!1&&this.map.keyboard.disable(),tt.keyboardEnable===!0&&this.map.keyboard.enable(),tt.zoomEnable===!1&&this.map.scrollZoom.disable(),tt.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(tt,St){this.map.flyTo({zoom:tt,center:St})}},{key:"setMapStyle",value:function(tt){this.map.setStyle(this.getMapStyle(tt))}},{key:"pixelToLngLat",value:function(tt){return this.map.unproject(tt)}},{key:"lngLatToPixel",value:function(tt){return this.map.project(tt)}},{key:"containerToLngLat",value:function(tt){return this.map.unproject(tt)}},{key:"lngLatToContainer",value:function(tt){return this.map.project(tt)}},{key:"lngLatToMercator",value:function(tt,St){throw new Error("not implement")}},{key:"getModelMatrix",value:function(tt,St,Lt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0};throw new Error("not implement")}},{key:"init",value:function(){var Et=X()(ft.a.mark(function St(){var Lt,ae,ke,yn,vn,Cn,ne,_e,Ze,In,ar;return ft.a.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:Lt=this.config,ae=Lt.id,ke=ae===void 0?"map":ae,yn=Lt.attributionControl,vn=yn===void 0?!1:yn,Cn=Lt.style,ne=Cn===void 0?"light":Cn,_e=Lt.rotation,Ze=_e===void 0?0:_e,In=Lt.mapInstance,ar=k()(Lt,["id","attributionControl","style","rotation","mapInstance"]),this.viewport=new pr,In?(this.map=In,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ke),this.map=new kn(Fa({container:this.$mapContainer,style:this.getMapStyle(ne),bearing:Ze},ar))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return sr.stop()}},St,this)}));function tt(){return Et.apply(this,arguments)}return tt}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).emit.apply(St,[tt].concat(ae))}},{key:"once",value:function(tt){for(var St,Lt=arguments.length,ae=new Array(Lt>1?Lt-1:0),ke=1;ke<Lt;ke++)ae[ke-1]=arguments[ke];(St=this.eventEmitter).once.apply(St,[tt].concat(ae))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(tt){var St=this.map.getCanvas(),Lt=tt==="jpg"?St==null?void 0:St.toDataURL("image/jpeg"):St==null?void 0:St.toDataURL("image/png");return Lt}},{key:"onCameraChanged",value:function(tt){this.cameraChangedCallback=tt}},{key:"creatAmapContainer",value:function(tt){var St=tt;return typeof tt=="string"&&(St=document.getElementById(tt)),St}},{key:"getMapStyle",value:function(tt){return typeof tt!="string"?tt:Mr[tt]?Mr[tt]:tt}}]),jt}(),sa),ji=_()(Na.prototype,"config",[Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=_()(Na.prototype,"configService",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=_()(Na.prototype,"logger",[Li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yi=_()(Na.prototype,"coordinateSystemService",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_a=_()(Na.prototype,"eventEmitter",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na))||Oa);function es(jt){var Et=js();return function(){var St=u()(jt),Lt;if(Et){var ae=u()(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return a()(this,Lt)}}function js(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var ml=function(jt){n()(tt,jt);var Et=es(tt);function tt(){return s()(this,tt),Et.apply(this,arguments)}return r()(tt,[{key:"getServiceConstructor",value:function(){return Os}}]),tt}(K);function yu(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function Fl(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?yu(Object(tt),!0).forEach(function(St){xc(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):yu(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}function xc(jt,Et,tt){return Et in jt?Object.defineProperty(jt,Et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):jt[Et]=tt,jt}function zl(jt,Et){return kc(jt)||Tc(jt,Et)||Nc(jt,Et)||Al()}function Al(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nc(jt,Et){if(!!jt){if(typeof jt=="string")return Hc(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Hc(jt,Et)}}function Hc(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function Tc(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function kc(jt){if(Array.isArray(jt))return jt}var Yc=E.a.memo(function(jt){var Et=jt.style,tt=jt.className,St=jt.map,Lt=jt.option,ae=jt.onSceneLoaded,ke=jt.children,yn=Object(U.useRef)(null),vn=Object(U.useState)(),Cn=zl(vn,2),ne=Cn[0],_e=Cn[1];return Object(U.useEffect)(function(){var Ze=new t.Scene(Fl(Fl({id:yn.current},Lt),{},{map:new ml(St)}));return Ze.on("loaded",function(){_e(Ze),ae&&ae(Ze)}),function(){Ze.destroy()}},[]),Object(U.useEffect)(function(){ne&&St.style&&ne.setMapStyle(St.style)},[JSON.stringify(St.style)]),Object(U.useEffect)(function(){ne&&St.zoom&&ne.setZoom(St.zoom)},[St.zoom]),Object(U.useEffect)(function(){ne&&St.center&&ne.setCenter(St.center)},[JSON.stringify(St.center)]),Object(U.useEffect)(function(){ne&&St.pitch&&ne.setPitch(St.pitch)},[St.pitch]),Object(U.useEffect)(function(){ne&&St.rotation&&ne.setRotation(St.rotation)},[St.rotation]),E.a.createElement(T.Provider,{value:ne},E.a.createElement("div",{ref:yn,className:tt,style:Et},ne&&ke))}),Lc=Yc;function Zc(jt,Et){return Hl(jt)||Kc(jt,Et)||Au(jt,Et)||bc()}function bc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Au(jt,Et){if(!!jt){if(typeof jt=="string")return Ec(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Ec(jt,Et)}}function Ec(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function Kc(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function Hl(jt){if(Array.isArray(jt))return jt}var al=E.a.memo(function(jt){var Et=jt.style,tt=jt.className,St=jt.map,Lt=jt.children,ae=Object(U.useRef)(null),ke=Object(U.useState)(),yn=Zc(ke,2),vn=yn[0],Cn=yn[1];return Object(U.useEffect)(function(){var ne=new t.Scene({id:ae.current,map:St});return ne.on("loaded",function(){Cn(ne)}),function(){ne.destroy()}},[]),E.a.createElement(T.Provider,{value:vn},E.a.createElement("div",{ref:ae,className:tt,style:Et},vn&&Lt))}),Cl=E.a.memo(function(Et){var tt=e(),St=Object(U.useRef)(),Lt=Et.type,ae=Et.position;return Object(U.useEffect)(function(){var ke;switch(Lt){case"scale":ke=new t.Scale({position:ae||"bottomright"});break;case"zoom":ke=new t.Zoom({position:ae||"topright"});break;case"logo":ke=new t.Logo({position:ae||"bottomleft"})}return St.current=ke,tt.addControl(ke),function(){St.current=void 0,tt.removeControl(ke)}},[Lt]),Object(U.useEffect)(function(){St.current&&St.current.setPosition(ae)},[ae]),null}),ws=R("i8i4");function cu(jt,Et){return of(jt)||Dc(jt,Et)||Yl(jt,Et)||Is()}function Is(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yl(jt,Et){if(!!jt){if(typeof jt=="string")return Rc(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return Rc(jt,Et)}}function Rc(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function Dc(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function of(jt){if(Array.isArray(jt))return jt}var Ac=U.useEffect,tf=U.useState;function jc(jt){var Et=jt.className,tt=jt.style,St=jt.children,Lt=jt.position,ae=e(),ke=tf(function(){return document.createElement("div")}),yn=cu(ke,1),vn=yn[0];return Ac(function(){var Cn=new t.Control({position:Lt});return Cn.onAdd=function(){if(Et&&(vn.className=Et),tt){var ne=Object.keys(tt).map(function(_e){return"".concat(_e,":").concat(tt[_e])}).join(";");vn.style.cssText=ne}return vn},ae.addControl(Cn),function(){ae.removeControl(Cn)}},[]),Object(ws.createPortal)(St,vn)}var Ul=Object(U.createContext)({});function Nu(){return Object(U.useContext)(Ul)}var Cc=U.useEffect,Tf=U.memo(function(Et){var tt=Et.layer,St=Et.active;return Cc(function(){tt.active(St.option)},[JSON.stringify(St)]),null}),Zf=U.useEffect,oh=U.memo(function(Et){var tt=Et.layer,St=Et.animate;return Zf(function(){tt.animate(St)},[JSON.stringify(St)]),null}),Kf=U.useEffect,sh=U.memo(function(Et){var tt=Et.layer,St=Et.color;return Kf(function(){St.field?tt.color(St.field,St.values):tt.color(St.values)},[St.field,St.scale,JSON.stringify(St.values),JSON.stringify(St.options)]),null}),Gc=U.useEffect,Af=U.memo(function(Et){var tt=Et.layer,St=Et.filter;return Gc(function(){St.field&&tt.filter(St.field,St.values)},[St.field,St.values,JSON.stringify(St.values),JSON.stringify(St.options)]),null}),Fc=U.useEffect,Cf=U.memo(function(Et){var tt=Et.layer,St=Et.scale;return Fc(function(){tt.scale(St.values)},[St.values]),null}),vc=U.useEffect,ef=U.memo(function(Et){var tt=Et.layer,St=Et.select;return vc(function(){tt.select(St.option)},[JSON.stringify(St)]),null}),Df=U.useEffect,jf=U.memo(function(Et){var tt=Et.layer,St=Et.shape;return Df(function(){St.field?tt.shape(St.field,St.values):tt.shape(St.values)},[St.field,JSON.stringify(St.values),JSON.stringify(St.options)]),null}),sf=U.useEffect,Bf=U.memo(function(Et){var tt=Et.layer,St=Et.size;return sf(function(){St.field?tt.size(St.field,St.values):tt.size(St.values)},[St.field,St.scale,JSON.stringify(St.values),JSON.stringify(St.options)]),null});function Xf(jt,Et){if(jt==null)return{};var tt=Jf(jt,Et),St,Lt;if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(jt);for(Lt=0;Lt<ae.length;Lt++)St=ae[Lt],!(Et.indexOf(St)>=0)&&(!Object.prototype.propertyIsEnumerable.call(jt,St)||(tt[St]=jt[St]))}return tt}function Jf(jt,Et){if(jt==null)return{};var tt={},St=Object.keys(jt),Lt,ae;for(ae=0;ae<St.length;ae++)Lt=St[ae],!(Et.indexOf(Lt)>=0)&&(tt[Lt]=jt[Lt]);return tt}var pf=U.useEffect,Of=U.memo(function(Et){var tt=Et.layer,St=Et.source,Lt=St.data,ae=Xf(St,["data"]);return pf(function(){tt.inited?tt.setData(Lt,ae):tt.source(Lt,ae),ae.autoFit&&tt.fitBounds(ae&&ae.fitBoundsOptions)},[Lt,JSON.stringify(ae)]),null}),uh=U.useEffect,nf=U.memo(function(Et){var tt=Et.layer,St=Et.style;return uh(function(){tt.style(St)},Object.keys(St).map(function(Lt){return St[Lt]})),null});function gf(jt,Et){return Oc(jt)||lf(jt,Et)||Vc(jt,Et)||xu()}function xu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vc(jt,Et){if(!!jt){if(typeof jt=="string")return uf(jt,Et);var tt=Object.prototype.toString.call(jt).slice(8,-1);if(tt==="Object"&&jt.constructor&&(tt=jt.constructor.name),tt==="Map"||tt==="Set")return Array.from(jt);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return uf(jt,Et)}}function uf(jt,Et){(Et==null||Et>jt.length)&&(Et=jt.length);for(var tt=0,St=new Array(Et);tt<Et;tt++)St[tt]=jt[tt];return St}function lf(jt,Et){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var tt=[],St=!0,Lt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),yn;!(St=(yn=ke.next()).done)&&(tt.push(yn.value),!(Et&&tt.length===Et));St=!0);}catch(vn){Lt=!0,ae=vn}finally{try{!St&&ke.return!=null&&ke.return()}finally{if(Lt)throw ae}}return tt}}function Oc(jt){if(Array.isArray(jt))return jt}var pc=U.useEffect,mf=U.useState;function Wc(jt,Et){var tt=Et.source,St=Et.color,Lt=Et.shape,ae=Et.style,ke=Et.size,yn=Et.scale,vn=Et.active,Cn=Et.select,ne=Et.filter,_e=Et.animate,Ze=Et.options,In=Et.onLayerLoaded,ar=e(),ur=mf(),sr=gf(ur,2),Or=sr[0],ri=sr[1];if(!Or){var Vr;switch(jt){case"polygonLayer":Vr=new t.PolygonLayer(Ze);break;case"lineLayer":Vr=new t.LineLayer(Ze);break;case"pointLayer":Vr=new t.PointLayer(Ze);break;case"heatmapLayer":Vr=new t.HeatmapLayer(Ze);break;case"rasterLayer":Vr=new t.RasterLayer(Ze);break;case"imageLayer":Vr=new t.ImageLayer(Ze);break;case"citybuildingLayer":Vr=new t.CityBuildingLayer(Ze);break;default:Vr=new t.PolygonLayer(Ze)}Vr.on("inited",function(){In&&In(Vr,ar)}),ri(Vr)}return pc(function(){if(Or!==void 0)return ar.addLayer(Or),function(){ar.removeLayer(Or)}},[]),pc(function(){Or&&Or.inited&&Ze&&(Or.updateLayerConfig(Ze),ar.render())},[Ze==null?void 0:Ze.minZoom,Ze==null?void 0:Ze.maxZoom,Ze==null?void 0:Ze.visible]),pc(function(){Or&&Or.inited&&Ze&&Ze.zIndex&&Or.setIndex(Ze.zIndex)},[Ze==null?void 0:Ze.zIndex]),pc(function(){Or&&Or.inited&&Ze&&Ze.blend&&Or.setBlend(Ze.blend)},[Ze==null?void 0:Ze.blend]),pc(function(){Or&&ar.render()},[]),Or!=null?U.createElement(Ul.Provider,{value:Or},U.createElement(Of,{layer:Or,source:tt}),yn&&U.createElement(Cf,{layer:Or,scale:yn}),St&&U.createElement(sh,{layer:Or,color:St}),ke&&U.createElement(Bf,{layer:Or,size:ke}),Lt&&U.createElement(jf,{layer:Or,shape:Lt}),ae&&U.createElement(nf,{layer:Or,style:ae}),vn&&U.createElement(Tf,{layer:Or,active:vn}),Cn&&U.createElement(ef,{layer:Or,select:Cn}),ne&&U.createElement(Af,{layer:Or,filter:ne}),_e&&U.createElement(oh,{layer:Or,animate:_e}),Et.children):null}var rf=U.memo(function(Et){return Wc("polygonLayer",Et)}),yf=U.memo(function(Et){return Wc("lineLayer",Et)}),zc=U.memo(function(Et){return Wc("pointLayer",Et)}),xf=U.memo(function(Et){return Wc("heatmapLayer",Et)}),ve=U.memo(function(Et){return Wc("rasterLayer",Et)}),ge=U.memo(function(Et){return Wc("imageLayer",Et)}),Gt=U.memo(function(Et){return Wc("citybuildingLayer",Et)}),Kt=U.useEffect,Ue=U.memo(function(jt){var Et=jt.type,tt=jt.handler,St=Nu();return Kt(function(){return St.off(Et,tt),St.on(Et,tt),function(){St.off(Et,tt)}},[Et,tt]),null}),un=U.memo(function(jt){var Et=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],tt=jt.items,St=tt===void 0?Et:tt;return U.createElement("div",null,U.createElement("div",null,St.map(function(Lt,ae){return U.createElement("div",{key:ae,style:{background:Lt.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-St.length)/St.length+"%",marginRight:"1%",padding:5}})})),U.createElement("div",null,St.map(function(Lt,ae){return U.createElement("div",{key:ae,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-St.length)/St.length+"%",marginRight:"1%"}},Lt.title)})))});function Gn(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gn=function(tt){return typeof tt}:Gn=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},Gn(jt)}function mr(jt,Et){var tt=Object.keys(jt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(jt);Et&&(St=St.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),tt.push.apply(tt,St)}return tt}function gr(jt){for(var Et=1;Et<arguments.length;Et++){var tt=arguments[Et]!=null?arguments[Et]:{};Et%2?mr(Object(tt),!0).forEach(function(St){Qr(jt,St,tt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(tt)):mr(Object(tt)).forEach(function(St){Object.defineProperty(jt,St,Object.getOwnPropertyDescriptor(tt,St))})}return jt}function Qr(jt,Et,tt){return Et in jt?Object.defineProperty(jt,Et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):jt[Et]=tt,jt}function xi(jt,Et){if(!(jt instanceof Et))throw new TypeError("Cannot call a class as a function")}function Ji(jt,Et){for(var tt=0;tt<Et.length;tt++){var St=Et[tt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(jt,St.key,St)}}function fa(jt,Et,tt){return Et&&Ji(jt.prototype,Et),tt&&Ji(jt,tt),jt}function ba(jt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),Et&&oo(jt,Et)}function oo(jt,Et){return oo=Object.setPrototypeOf||function(St,Lt){return St.__proto__=Lt,St},oo(jt,Et)}function ro(jt){var Et=Gs();return function(){var St=Bs(jt),Lt;if(Et){var ae=Bs(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return No(this,Lt)}}function No(jt,Et){return Et&&(Gn(Et)==="object"||typeof Et=="function")?Et:ko(jt)}function ko(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function Bs(jt){return Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},Bs(jt)}var bu=function(jt){ba(tt,jt);var Et=ro(tt);function tt(St){var Lt;return xi(this,tt),Lt=Et.call(this,St),Lt.el=document.createElement("div"),Lt}return fa(tt,[{key:"componentDidMount",value:function(){var Lt,ae=this.props,ke=ae.lnglat,yn=ae.children,vn=ae.option,Cn=ae.lngLat,ne=new t.Popup(gr(gr({},vn),{},{stopPropagation:(Lt=this.props.option)===null||Lt===void 0?void 0:Lt.stopPropagation}));ke&&ne.setLnglat(ke),Cn&&ne.setLnglat(Cn),yn&&ne.setDOMContent(this.el),this.popup=ne,this.scene.addPopup(ne)}},{key:"componentDidUpdate",value:function(Lt){var ae,ke,yn,vn,Cn,ne,_e=Array.isArray(Lt.lnglat)?Lt.lnglat:[Lt==null||(ae=Lt.lnglat)===null||ae===void 0?void 0:ae.lng,Lt==null||(ke=Lt.lnglat)===null||ke===void 0?void 0:ke.lat],Ze=Array.isArray(this.props.lnglat)?this.props.lnglat:[(yn=this.props)===null||yn===void 0||(vn=yn.lnglat)===null||vn===void 0?void 0:vn.lng,(Cn=this.props)===null||Cn===void 0||(ne=Cn.lnglat)===null||ne===void 0?void 0:ne.lat],In=_e.toString()!==Ze.toString();if(In){var ar;this.popup.remove(),this.popup=new t.Popup(gr(gr({},this.props.option),{},{stopPropagation:(ar=this.props.option)===null||ar===void 0?void 0:ar.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var Lt=this;return U.createElement(T.Consumer,{},function(ae){return ae&&(Lt.scene=ae),Object(ws.createPortal)(Lt.props.children,Lt.el)})}}]),tt}(U.PureComponent);function Ns(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ns=function(tt){return typeof tt}:Ns=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},Ns(jt)}function ru(jt,Et){if(!(jt instanceof Et))throw new TypeError("Cannot call a class as a function")}function io(jt,Et){for(var tt=0;tt<Et.length;tt++){var St=Et[tt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(jt,St.key,St)}}function Eu(jt,Et,tt){return Et&&io(jt.prototype,Et),tt&&io(jt,tt),jt}function Ol(jt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),Et&&ps(jt,Et)}function ps(jt,Et){return ps=Object.setPrototypeOf||function(St,Lt){return St.__proto__=Lt,St},ps(jt,Et)}function Vs(jt){var Et=bf();return function(){var St=Xc(jt),Lt;if(Et){var ae=Xc(this).constructor;Lt=Reflect.construct(St,arguments,ae)}else Lt=St.apply(this,arguments);return Go(this,Lt)}}function Go(jt,Et){return Et&&(Ns(Et)==="object"||typeof Et=="function")?Et:hl(jt)}function hl(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function bf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function Xc(jt){return Xc=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},Xc(jt)}var mh=function(jt){Ol(tt,jt);var Et=Vs(tt);function tt(St){var Lt;return ru(this,tt),Lt=Et.call(this,St),Lt.el=document.createElement("div"),Lt}return Eu(tt,[{key:"componentDidMount",value:function(){var Lt=this.props,ae=Lt.lnglat,ke=Lt.children,yn=Lt.option,vn=Lt.onMarkerLoaded,Cn=new t.Marker(yn);ae&&Cn.setLnglat(ae),ke&&Cn.setElement(this.el),this.marker=Cn,vn&&vn(Cn),this.scene.addMarker(Cn)}},{key:"componentDidUpdate",value:function(Lt){var ae,ke=(Lt==null?void 0:Lt.lnglat.toString())!==((ae=this.props)===null||ae===void 0?void 0:ae.lnglat.toString());ke&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var Lt=this;return U.createElement(T.Consumer,{},function(ae){return ae&&(Lt.scene=ae),Object(ws.createPortal)(Lt.props.children,Lt.el)})}}]),tt}(U.PureComponent),wf=U.useEffect,ic=U.memo(function(jt){var Et=jt.type,tt=jt.handler,St=e();return wf(function(){return St.on(Et,tt),function(){St.off(Et,tt)}},[Et]),null}),Dh=ic,Nf=U.useEffect,lh=U.memo(function(Et){var tt=Et.name,St=Et.url,Lt=e();return Nf(function(){Lt.addImage(tt,St)},[tt,St]),null})},"6AGu":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingInSyntax=void 0;var U=R("FV85"),E=R("LKzl"),T=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=U.BindingScopeEnum.Request,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=U.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=U.BindingScopeEnum.Transient,new E.BindingWhenOnSyntax(this._binding)},e}();mt.BindingInSyntax=T},"6D9b":function(Oe,mt,R){},"6NqC":function(Oe,mt){},"6acW":function(Oe,mt,R){var U=R("dt0z"),E=R("gQMU");function T(e){return E(U(e).toLowerCase())}Oe.exports=T},"6nK8":function(Oe,mt,R){var U=R("dVn5"),E=R("fo6e"),T=R("dt0z"),e=R("9NmV");function t(l,s,c){return l=T(l),s=c?void 0:s,s===void 0?E(l)?e(l):U(l):l.match(s)||[]}Oe.exports=t},"711d":function(Oe,mt){function R(U){return function(E){return E==null?void 0:E[U]}}Oe.exports=R},"78VC":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.multiBindToService=void 0,mt.multiBindToService=function(U){return function(E){return function(){for(var T=[],e=0;e<arguments.length;e++)T[e]=arguments[e];return T.forEach(function(t){return U.bind(t).toService(E)})}}}},"7Ix3":function(Oe,mt){function R(U){var E=[];if(U!=null)for(var T in Object(U))E.push(T);return E}Oe.exports=R},"7W2i":function(Oe,mt,R){var U=R("SksO");function E(T,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(e&&e.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),e&&U(T,e)}Oe.exports=E,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},"7tbW":function(Oe,mt,R){var U=R("LGYb");function E(T){return T&&T.length?U(T):[]}Oe.exports=E},"8/Fi":function(Oe,mt,R){"use strict";var U=R("J4zp"),E=R.n(U),T=R("9nhX"),e=R.n(T),t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function l(L){return t.indexOf(L)}var s=2,c=4,r=64,h=128,n=256,i=512,a=8192,o=16384,u=32768,f=32768*2,v=131072,b=262144,y=524288,g=1048576,_=2097152,M=4194304,x=8388608,m=16777216,S=16777216*2;function P(L,W){return L=e()(Math.floor(L),0,255),W=e()(Math.floor(W),0,255),256*L+W}function A(L){var W=L.color,F=L.radius,K=L.tileX,V=L.tileY,k=L.shape,Z=L.opacity,X=L.stroke,it=L.strokeWidth,ft=L.strokeOpacity,pt=[],ut=[],It=[],Nt=[P(W[0],W[1]),P(W[2],W[3])],Rt=[P(X[0],X[1]),P(X[2],X[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Mt){var bt=E()(Mt,2),At=bt[0],rt=bt[1];pt.push([].concat(Nt,[(At+1)*x+(rt+1)*_+l(k)*v+F,(K+512)*y+(V+512)*r])),ut.push([].concat(Rt,[it,ft])),It.push([Z,0,0,0])}),{packedBuffer:pt,packedBuffer2:ut,packedBuffer3:It}}function O(L,W){if(L===0&&!W)return 0;if(L===1&&W)return 4294967295;var F=W?1:0,K=Math.floor(L*127);return K*S+F*m+K*v+F*f+K*i+F*n+K*s+F}},"88Gu":function(Oe,mt){var R=800,U=16,E=Date.now;function T(e){var t=0,l=0;return function(){var s=E(),c=U-(s-l);if(l=s,c>0){if(++t>=R)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Oe.exports=T},"8ml+":function(Oe,mt,R){"use strict";var U=R("h1nZ");R.o(U,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return U.CityBuildingLayer}),R.o(U,"Control")&&R.d(mt,"Control",function(){return U.Control}),R.o(U,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return U.HeatmapLayer}),R.o(U,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return U.ImageLayer}),R.o(U,"LineLayer")&&R.d(mt,"LineLayer",function(){return U.LineLayer}),R.o(U,"Logo")&&R.d(mt,"Logo",function(){return U.Logo}),R.o(U,"Marker")&&R.d(mt,"Marker",function(){return U.Marker}),R.o(U,"PointLayer")&&R.d(mt,"PointLayer",function(){return U.PointLayer}),R.o(U,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return U.PolygonLayer}),R.o(U,"Popup")&&R.d(mt,"Popup",function(){return U.Popup}),R.o(U,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return U.RasterLayer}),R.o(U,"Scale")&&R.d(mt,"Scale",function(){return U.Scale}),R.o(U,"Scene")&&R.d(mt,"Scene",function(){return U.Scene}),R.o(U,"Zoom")&&R.d(mt,"Zoom",function(){return U.Zoom});var E=R("kQ+U");R.d(mt,"Scene",function(){return E.a});var T=R("sxDa");R.d(mt,"CityBuildingLayer",function(){return T.a}),R.d(mt,"HeatmapLayer",function(){return T.b}),R.d(mt,"ImageLayer",function(){return T.c}),R.d(mt,"LineLayer",function(){return T.d}),R.d(mt,"PointLayer",function(){return T.e}),R.d(mt,"PolygonLayer",function(){return T.f}),R.d(mt,"RasterLayer",function(){return T.g});var e=R("k5/I");R.d(mt,"Control",function(){return e.a}),R.d(mt,"Logo",function(){return e.b}),R.d(mt,"Marker",function(){return e.c}),R.d(mt,"Popup",function(){return e.d}),R.d(mt,"Scale",function(){return e.e}),R.d(mt,"Zoom",function(){return e.f});var t=R("Hel2"),l=R("RL2/")},"8uyu":function(Oe,mt){},"9Fde":function(Oe,mt,R){"use strict";var U=this&&this.__awaiter||function(f,v,b,y){function g(_){return _ instanceof b?_:new b(function(M){M(_)})}return new(b||(b=Promise))(function(_,M){function x(P){try{S(y.next(P))}catch(A){M(A)}}function m(P){try{S(y.throw(P))}catch(A){M(A)}}function S(P){P.done?_(P.value):g(P.value).then(x,m)}S((y=y.apply(f,v||[])).next())})},E=this&&this.__generator||function(f,v){var b={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},y,g,_,M;return M={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function x(S){return function(P){return m([S,P])}}function m(S){if(y)throw new TypeError("Generator is already executing.");for(;b;)try{if(y=1,g&&(_=S[0]&2?g.return:S[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,S[1])).done)return _;switch(g=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return b.label++,{value:S[1],done:!1};case 5:b.label++,g=S[1],S=[0];continue;case 7:S=b.ops.pop(),b.trys.pop();continue;default:if(_=b.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){b=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){b.label=S[1];break}if(S[0]===6&&b.label<_[1]){b.label=_[1],_=S;break}if(_&&b.label<_[2]){b.label=_[2],b.ops.push(S);break}_[2]&&b.ops.pop(),b.trys.pop();continue}S=v.call(f,b)}catch(P){S=[6,P],g=0}finally{y=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(mt,"__esModule",{value:!0}),mt.Container=void 0;var T=R("LgvC"),e=R("MON2"),t=R("FV85"),l=R("xfSm"),s=R("wnjb"),c=R("h7MG"),r=R("aPG5"),h=R("gzZq"),n=R("d9O0"),i=R("ujMp"),a=R("HpQ9"),o=R("AwBQ"),u=function(){function f(v){var b=v||{};if(typeof b!="object")throw new Error(""+e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(b.defaultScope===void 0)b.defaultScope=t.BindingScopeEnum.Transient;else if(b.defaultScope!==t.BindingScopeEnum.Singleton&&b.defaultScope!==t.BindingScopeEnum.Transient&&b.defaultScope!==t.BindingScopeEnum.Request)throw new Error(""+e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(b.autoBindInjectable===void 0)b.autoBindInjectable=!1;else if(typeof b.autoBindInjectable!="boolean")throw new Error(""+e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(b.skipBaseClassChecks===void 0)b.skipBaseClassChecks=!1;else if(typeof b.skipBaseClassChecks!="boolean")throw new Error(""+e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:b.autoBindInjectable,defaultScope:b.defaultScope,skipBaseClassChecks:b.skipBaseClassChecks},this.id=n.id(),this._bindingDictionary=new o.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new s.MetadataReader}return f.merge=function(v,b){var y=new f,g=c.getBindingDictionary(y),_=c.getBindingDictionary(v),M=c.getBindingDictionary(b);function x(m,S){m.traverse(function(P,A){A.forEach(function(O){S.add(O.serviceIdentifier,O.clone())})})}return x(_,g),x(M,g),y},f.prototype.load=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];for(var y=this._getContainerModuleHelpersFactory(),g=0,_=v;g<_.length;g++){var M=_[g],x=y(M.id);M.registry(x.bindFunction,x.unbindFunction,x.isboundFunction,x.rebindFunction)}},f.prototype.loadAsync=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];return U(this,void 0,void 0,function(){var y,g,_,M,x;return E(this,function(m){switch(m.label){case 0:y=this._getContainerModuleHelpersFactory(),g=0,_=v,m.label=1;case 1:return g<_.length?(M=_[g],x=y(M.id),[4,M.registry(x.bindFunction,x.unbindFunction,x.isboundFunction,x.rebindFunction)]):[3,4];case 2:m.sent(),m.label=3;case 3:return g++,[3,1];case 4:return[2]}})})},f.prototype.unload=function(){for(var v=this,b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];var g=function(M){return function(x){return x.moduleId===M}};b.forEach(function(_){var M=g(_.id);v._bindingDictionary.removeByCondition(M)})},f.prototype.bind=function(v){var b=this.options.defaultScope||t.BindingScopeEnum.Transient,y=new T.Binding(v,b);return this._bindingDictionary.add(v,y),new h.BindingToSyntax(y)},f.prototype.rebind=function(v){return this.unbind(v),this.bind(v)},f.prototype.unbind=function(v){try{this._bindingDictionary.remove(v)}catch(b){throw new Error(e.CANNOT_UNBIND+" "+i.getServiceIdentifierAsString(v))}},f.prototype.unbindAll=function(){this._bindingDictionary=new o.Lookup},f.prototype.isBound=function(v){var b=this._bindingDictionary.hasKey(v);return!b&&this.parent&&(b=this.parent.isBound(v)),b},f.prototype.isBoundNamed=function(v,b){return this.isBoundTagged(v,l.NAMED_TAG,b)},f.prototype.isBoundTagged=function(v,b,y){var g=!1;if(this._bindingDictionary.hasKey(v)){var _=this._bindingDictionary.get(v),M=c.createMockRequest(this,v,b,y);g=_.some(function(x){return x.constraint(M)})}return!g&&this.parent&&(g=this.parent.isBoundTagged(v,b,y)),g},f.prototype.snapshot=function(){this._snapshots.push(a.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},f.prototype.restore=function(){var v=this._snapshots.pop();if(v===void 0)throw new Error(e.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=v.bindings,this._middleware=v.middleware},f.prototype.createChild=function(v){var b=new f(v||this.options);return b.parent=this,b},f.prototype.applyMiddleware=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];var y=this._middleware?this._middleware:this._planAndResolve();this._middleware=v.reduce(function(g,_){return _(g)},y)},f.prototype.applyCustomMetadataReader=function(v){this._metadataReader=v},f.prototype.get=function(v){return this._get(!1,!1,t.TargetTypeEnum.Variable,v)},f.prototype.getTagged=function(v,b,y){return this._get(!1,!1,t.TargetTypeEnum.Variable,v,b,y)},f.prototype.getNamed=function(v,b){return this.getTagged(v,l.NAMED_TAG,b)},f.prototype.getAll=function(v){return this._get(!0,!0,t.TargetTypeEnum.Variable,v)},f.prototype.getAllTagged=function(v,b,y){return this._get(!1,!0,t.TargetTypeEnum.Variable,v,b,y)},f.prototype.getAllNamed=function(v,b){return this.getAllTagged(v,l.NAMED_TAG,b)},f.prototype.resolve=function(v){var b=this.createChild();return b.bind(v).toSelf(),b.get(v)},f.prototype._getContainerModuleHelpersFactory=function(){var v=this,b=function(m,S){m._binding.moduleId=S},y=function(m){return function(S){var P=v.bind.bind(v),A=P(S);return b(A,m),A}},g=function(m){return function(S){var P=v.unbind.bind(v);P(S)}},_=function(m){return function(S){var P=v.isBound.bind(v);return P(S)}},M=function(m){return function(S){var P=v.rebind.bind(v),A=P(S);return b(A,m),A}};return function(x){return{bindFunction:y(x),isboundFunction:_(x),rebindFunction:M(x),unbindFunction:g(x)}}},f.prototype._get=function(v,b,y,g,_,M){var x=null,m={avoidConstraints:v,contextInterceptor:function(P){return P},isMultiInject:b,key:_,serviceIdentifier:g,targetType:y,value:M};if(this._middleware){if(x=this._middleware(m),x==null)throw new Error(e.INVALID_MIDDLEWARE_RETURN)}else x=this._planAndResolve()(m);return x},f.prototype._planAndResolve=function(){var v=this;return function(b){var y=c.plan(v._metadataReader,v,b.isMultiInject,b.targetType,b.serviceIdentifier,b.key,b.value,b.avoidConstraints);y=b.contextInterceptor(y);var g=r.resolve(y);return g}},f}();mt.Container=u},"9NmV":function(Oe,mt){var R="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\u2700-\\u27bf",l="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a=s+c+r+h,o="['\u2019]",u="["+a+"]",f="["+e+"]",v="\\d+",b="["+t+"]",y="["+l+"]",g="[^"+R+a+v+t+l+n+"]",_="\\ud83c[\\udffb-\\udfff]",M="(?:"+f+"|"+_+")",x="[^"+R+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+n+"]",A="\\u200d",O="(?:"+y+"|"+g+")",L="(?:"+P+"|"+g+")",W="(?:"+o+"(?:d|ll|m|re|s|t|ve))?",F="(?:"+o+"(?:D|LL|M|RE|S|T|VE))?",K=M+"?",V="["+i+"]?",k="(?:"+A+"(?:"+[x,m,S].join("|")+")"+V+K+")*",Z="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",X="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",it=V+K+k,ft="(?:"+[b,m,S].join("|")+")"+it,pt=RegExp([P+"?"+y+"+"+W+"(?="+[u,P,"$"].join("|")+")",L+"+"+F+"(?="+[u,P+O,"$"].join("|")+")",P+"?"+O+"+"+W,P+"+"+F,X,Z,v,ft].join("|"),"g");function ut(It){return It.match(pt)||[]}Oe.exports=ut},"9lTW":function(Oe,mt,R){"use strict";(function(U){var E=R("MgzW");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function T(O,L){if(O===L)return 0;for(var W=O.length,F=L.length,K=0,V=Math.min(W,F);K<V;++K)if(O[K]!==L[K]){W=O[K],F=L[K];break}return W<F?-1:F<W?1:0}function e(O){return U.Buffer&&typeof U.Buffer.isBuffer=="function"?U.Buffer.isBuffer(O):!!(O!=null&&O._isBuffer)}var t=R("MCLT"),l=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c=function(){return function(){}.name==="foo"}();function r(O){return Object.prototype.toString.call(O)}function h(O){return e(O)||typeof U.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O?!!(O instanceof DataView||O.buffer&&O.buffer instanceof ArrayBuffer):!1}var n=Oe.exports=b,i=/\s*function\s+([^\(\s]*)\s*/;function a(O){if(!!t.isFunction(O)){if(c)return O.name;var L=O.toString(),W=L.match(i);return W&&W[1]}}n.AssertionError=function(L){this.name="AssertionError",this.actual=L.actual,this.expected=L.expected,this.operator=L.operator,L.message?(this.message=L.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var W=L.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,W);else{var F=new Error;if(F.stack){var K=F.stack,V=a(W),k=K.indexOf(`
`+V);if(k>=0){var Z=K.indexOf(`
`,k+1);K=K.substring(Z+1)}this.stack=K}}},t.inherits(n.AssertionError,Error);function o(O,L){return typeof O=="string"?O.length<L?O:O.slice(0,L):O}function u(O){if(c||!t.isFunction(O))return t.inspect(O);var L=a(O),W=L?": "+L:"";return"[Function"+W+"]"}function f(O){return o(u(O.actual),128)+" "+O.operator+" "+o(u(O.expected),128)}function v(O,L,W,F,K){throw new n.AssertionError({message:W,actual:O,expected:L,operator:F,stackStartFunction:K})}n.fail=v;function b(O,L){O||v(O,!0,L,"==",n.ok)}n.ok=b,n.equal=function(L,W,F){L!=W&&v(L,W,F,"==",n.equal)},n.notEqual=function(L,W,F){L==W&&v(L,W,F,"!=",n.notEqual)},n.deepEqual=function(L,W,F){y(L,W,!1)||v(L,W,F,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(L,W,F){y(L,W,!0)||v(L,W,F,"deepStrictEqual",n.deepStrictEqual)};function y(O,L,W,F){if(O===L)return!0;if(e(O)&&e(L))return T(O,L)===0;if(t.isDate(O)&&t.isDate(L))return O.getTime()===L.getTime();if(t.isRegExp(O)&&t.isRegExp(L))return O.source===L.source&&O.global===L.global&&O.multiline===L.multiline&&O.lastIndex===L.lastIndex&&O.ignoreCase===L.ignoreCase;if((O===null||typeof O!="object")&&(L===null||typeof L!="object"))return W?O===L:O==L;if(h(O)&&h(L)&&r(O)===r(L)&&!(O instanceof Float32Array||O instanceof Float64Array))return T(new Uint8Array(O.buffer),new Uint8Array(L.buffer))===0;if(e(O)!==e(L))return!1;F=F||{actual:[],expected:[]};var K=F.actual.indexOf(O);return K!==-1&&K===F.expected.indexOf(L)?!0:(F.actual.push(O),F.expected.push(L),_(O,L,W,F))}function g(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function _(O,L,W,F){if(O==null||L===null||L===void 0)return!1;if(t.isPrimitive(O)||t.isPrimitive(L))return O===L;if(W&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(L))return!1;var K=g(O),V=g(L);if(K&&!V||!K&&V)return!1;if(K)return O=s.call(O),L=s.call(L),y(O,L,W);var k=A(O),Z=A(L),X,it;if(k.length!==Z.length)return!1;for(k.sort(),Z.sort(),it=k.length-1;it>=0;it--)if(k[it]!==Z[it])return!1;for(it=k.length-1;it>=0;it--)if(X=k[it],!y(O[X],L[X],W,F))return!1;return!0}n.notDeepEqual=function(L,W,F){y(L,W,!1)&&v(L,W,F,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=M;function M(O,L,W){y(O,L,!0)&&v(O,L,W,"notDeepStrictEqual",M)}n.strictEqual=function(L,W,F){L!==W&&v(L,W,F,"===",n.strictEqual)},n.notStrictEqual=function(L,W,F){L===W&&v(L,W,F,"!==",n.notStrictEqual)};function x(O,L){if(!O||!L)return!1;if(Object.prototype.toString.call(L)=="[object RegExp]")return L.test(O);try{if(O instanceof L)return!0}catch(W){}return Error.isPrototypeOf(L)?!1:L.call({},O)===!0}function m(O){var L;try{O()}catch(W){L=W}return L}function S(O,L,W,F){var K;if(typeof L!="function")throw new TypeError('"block" argument must be a function');typeof W=="string"&&(F=W,W=null),K=m(L),F=(W&&W.name?" ("+W.name+").":".")+(F?" "+F:"."),O&&!K&&v(K,W,"Missing expected exception"+F);var V=typeof F=="string",k=!O&&t.isError(K),Z=!O&&K&&!W;if((k&&V&&x(K,W)||Z)&&v(K,W,"Got unwanted exception"+F),O&&K&&W&&!x(K,W)||!O&&K)throw K}n.throws=function(O,L,W){S(!0,O,L,W)},n.doesNotThrow=function(O,L,W){S(!1,O,L,W)},n.ifError=function(O){if(O)throw O};function P(O,L){O||v(O,!0,L,"==",P)}n.strict=E(P,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;var A=Object.keys||function(O){var L=[];for(var W in O)l.call(O,W)&&L.push(W);return L}}).call(this,R("IyRk"))},"9nhX":function(Oe,mt,R){var U=R("g4R6"),E=R("tLB3");function T(e,t,l){return l===void 0&&(l=t,t=void 0),l!==void 0&&(l=E(l),l=l===l?l:0),t!==void 0&&(t=E(t),t=t===t?t:0),U(E(e),t,l)}Oe.exports=T},AFH1:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U;(function(E){E.TOPRIGHT="topright",E.TOPLEFT="topleft",E.BOTTOMRIGHT="bottomright",E.BOTTOMLEFT="bottomleft"})(U||(U={}))},APxj:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0});var U=R("Ucsi");function E(T,e){e===void 0&&(e=!0);var t=U.makePropertyInjectDecorator(T,e),l=U.makePropertyInjectNamedDecorator(T,e),s=U.makePropertyInjectTaggedDecorator(T,e),c=U.makePropertyMultiInjectDecorator(T,e);return{lazyInject:t,lazyInjectNamed:l,lazyInjectTagged:s,lazyMultiInject:c}}mt.default=E},Aib3:function(Oe,mt,R){var U=R("mhV4");Oe.exports=E;function E(c,r){switch(c&&c.type||null){case"FeatureCollection":return c.features=c.features.map(T(E,r)),c;case"GeometryCollection":return c.geometries=c.geometries.map(T(E,r)),c;case"Feature":return c.geometry=E(c.geometry,r),c;case"Polygon":case"MultiPolygon":return e(c,r);default:return c}}function T(c,r){return function(h){return c(h,r)}}function e(c,r){return c.type==="Polygon"?c.coordinates=t(c.coordinates,r):c.type==="MultiPolygon"&&(c.coordinates=c.coordinates.map(T(t,r))),c}function t(c,r){r=!!r,c[0]=l(c[0],r);for(var h=1;h<c.length;h++)c[h]=l(c[h],!r);return c}function l(c,r){return s(c)===r?c:c.reverse()}function s(c){return U.ring(c)>=0}},AwBQ:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Lookup=void 0;var U=R("MON2"),E=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(e,t){if(e==null)throw new Error(U.NULL_ARGUMENT);if(t==null)throw new Error(U.NULL_ARGUMENT);var l=this._map.get(e);l!==void 0?(l.push(t),this._map.set(e,l)):this._map.set(e,[t])},T.prototype.get=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(U.KEY_NOT_FOUND)},T.prototype.remove=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(U.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(l,s){var c=l.filter(function(r){return!e(r)});c.length>0?t._map.set(s,c):t._map.delete(s)})},T.prototype.hasKey=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);return this._map.has(e)},T.prototype.clone=function(){var e=new T;return this._map.forEach(function(t,l){t.forEach(function(s){return e.add(l,s.clone())})}),e},T.prototype.traverse=function(e){this._map.forEach(function(t,l){e(l,t)})},T}();mt.Lookup=E},"B6l+":function(Oe,mt,R){var U=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(l,s,c){l=e(l),s=T(s);var r=s?E(l):0;return s&&r<s?l+U(s-r,c):l}Oe.exports=t},BGjm:function(Oe,mt){Oe.exports=R;function R(U,E){E||(E=document);var T=E.head||E.getElementsByTagName("head")[0];if(!T){T=E.createElement("head");var e=E.body||E.getElementsByTagName("body")[0];e?e.parentNode.insertBefore(T,e):E.documentElement.appendChild(T)}var t=E.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=U:t.appendChild(E.createTextNode(U)),T.appendChild(t),t}},BMrR:function(Oe,mt,R){"use strict";var U=R("qrJ5");mt.a=U.a},BkRI:function(Oe,mt,R){var U=R("OBhP"),E=1,T=4;function e(t){return U(t,E|T)}Oe.exports=e},BpBL:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return E});var U=R("Hel2");function E(e,t){var l=t.extent,s=new Promise(function(r){T(e,function(h){r(h)})}),c={images:s,_id:1,dataArray:[{_id:0,coordinates:[[l[0],l[1]],[l[2],l[3]]]}]};return c}function T(e,t){var l=e,s=[];if(typeof l=="string")Object(U.o)({url:l},function(h,n){s.push(n),t(s)});else{var c=l.length,r=0;l.forEach(function(h){Object(U.o)({url:h},function(n,i){r++,s.push(i),r===c&&t(s)})})}return E}},CZoQ:function(Oe,mt){function R(U,E,T){for(var e=T-1,t=U.length;++e<t;)if(U[e]===E)return e;return-1}Oe.exports=R},"D+ow":function(Oe,mt){},D9lx:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingInWhenOnSyntax=void 0;var U=R("6AGu"),E=R("406g"),T=R("z4Hk"),e=function(){function t(l){this._binding=l,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding),this._bindingInSyntax=new U.BindingInSyntax(l)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(l){return this._bindingWhenSyntax.when(l)},t.prototype.whenTargetNamed=function(l){return this._bindingWhenSyntax.whenTargetNamed(l)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(l,s){return this._bindingWhenSyntax.whenTargetTagged(l,s)},t.prototype.whenInjectedInto=function(l){return this._bindingWhenSyntax.whenInjectedInto(l)},t.prototype.whenParentNamed=function(l){return this._bindingWhenSyntax.whenParentNamed(l)},t.prototype.whenParentTagged=function(l,s){return this._bindingWhenSyntax.whenParentTagged(l,s)},t.prototype.whenAnyAncestorIs=function(l){return this._bindingWhenSyntax.whenAnyAncestorIs(l)},t.prototype.whenNoAncestorIs=function(l){return this._bindingWhenSyntax.whenNoAncestorIs(l)},t.prototype.whenAnyAncestorNamed=function(l){return this._bindingWhenSyntax.whenAnyAncestorNamed(l)},t.prototype.whenAnyAncestorTagged=function(l,s){return this._bindingWhenSyntax.whenAnyAncestorTagged(l,s)},t.prototype.whenNoAncestorNamed=function(l){return this._bindingWhenSyntax.whenNoAncestorNamed(l)},t.prototype.whenNoAncestorTagged=function(l,s){return this._bindingWhenSyntax.whenNoAncestorTagged(l,s)},t.prototype.whenAnyAncestorMatches=function(l){return this._bindingWhenSyntax.whenAnyAncestorMatches(l)},t.prototype.whenNoAncestorMatches=function(l){return this._bindingWhenSyntax.whenNoAncestorMatches(l)},t.prototype.onActivation=function(l){return this._bindingOnSyntax.onActivation(l)},t}();mt.BindingInWhenOnSyntax=e},DnfT:function(Oe,mt,R){},"Dw+G":function(Oe,mt,R){var U=R("juv8"),E=R("mTTR");function T(e,t){return e&&U(t,E(t),e)}Oe.exports=T},DzJC:function(Oe,mt,R){var U=R("sEfC"),E=R("GoyQ"),T="Expected a function";function e(t,l,s){var c=!0,r=!0;if(typeof t!="function")throw new TypeError(T);return E(s)&&(c="leading"in s?!!s.leading:c,r="trailing"in s?!!s.trailing:r),U(t,l,{leading:c,maxWait:l,trailing:r})}Oe.exports=e},EA7m:function(Oe,mt,R){var U=R("zZ0H"),E=R("Ioao"),T=R("wclG");function e(t,l){return T(E(t,l,U),t+"")}Oe.exports=e},EEGq:function(Oe,mt,R){var U=R("juv8"),E=R("oCl/");function T(e,t){return U(e,E(e),t)}Oe.exports=T},EfZ0:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},Em2t:function(Oe,mt,R){var U=R("bahg"),E=R("quyA"),T=R("0JQy");function e(t){return E(t)?T(t):U(t)}Oe.exports=e},FI6e:function(Oe,mt){},FRQA:function(Oe,mt,R){"use strict";var U=R("GNNt"),E=R("wEI+"),T=R("DnfT"),e=R.n(T),t=R("q1tI"),l=R.n(t),s=R("TSYQ"),c=R.n(s),r=R("jYQm"),h=function(i){var a=Object(t.useContext)(r.a),o=i.children,u=i.contentWidth,f=i.className,v=i.style,b=Object(t.useContext)(E.b.ConfigContext),y=b.getPrefixCls,g=i.prefixCls||y("pro"),_=u||a.contentWidth,M="".concat(g,"-grid-content");return l.a.createElement("div",{className:c()(M,f,{wide:_==="Fixed"}),style:v},l.a.createElement("div",{className:"".concat(g,"-grid-content-children")},o))};mt.a=h},FV85:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.TargetTypeEnum=mt.BindingTypeEnum=mt.BindingScopeEnum=void 0;var U={Request:"Request",Singleton:"Singleton",Transient:"Transient"};mt.BindingScopeEnum=U;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};mt.BindingTypeEnum=E;var T={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};mt.TargetTypeEnum=T},FmoU:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return g}),R.d(mt,"b",function(){return m});var U=function(k,Z,X){k.prototype=Z.prototype=X,X.constructor=k};function E(k,Z){var X=Object.create(k.prototype);for(var it in Z)X[it]=Z[it];return X}function T(){}var e=.7,t=1/e,l="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),n=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),i=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),a=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),o=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),u=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U(T,g,{copy:function(Z){return Object.assign(new this.constructor,this,Z)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:b,formatRgb:y,toString:y});function v(){return this.rgb().formatHex()}function b(){return W(this).formatHsl()}function y(){return this.rgb().formatRgb()}function g(k){var Z,X;return k=(k+"").trim().toLowerCase(),(Z=r.exec(k))?(X=Z[1].length,Z=parseInt(Z[1],16),X===6?_(Z):X===3?new S(Z>>8&15|Z>>4&240,Z>>4&15|Z&240,(Z&15)<<4|Z&15,1):X===8?M(Z>>24&255,Z>>16&255,Z>>8&255,(Z&255)/255):X===4?M(Z>>12&15|Z>>8&240,Z>>8&15|Z>>4&240,Z>>4&15|Z&240,((Z&15)<<4|Z&15)/255):null):(Z=h.exec(k))?new S(Z[1],Z[2],Z[3],1):(Z=n.exec(k))?new S(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,1):(Z=i.exec(k))?M(Z[1],Z[2],Z[3],Z[4]):(Z=a.exec(k))?M(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,Z[4]):(Z=o.exec(k))?L(Z[1],Z[2]/100,Z[3]/100,1):(Z=u.exec(k))?L(Z[1],Z[2]/100,Z[3]/100,Z[4]):f.hasOwnProperty(k)?_(f[k]):k==="transparent"?new S(NaN,NaN,NaN,0):null}function _(k){return new S(k>>16&255,k>>8&255,k&255,1)}function M(k,Z,X,it){return it<=0&&(k=Z=X=NaN),new S(k,Z,X,it)}function x(k){return k instanceof T||(k=g(k)),k?(k=k.rgb(),new S(k.r,k.g,k.b,k.opacity)):new S}function m(k,Z,X,it){return arguments.length===1?x(k):new S(k,Z,X,it==null?1:it)}function S(k,Z,X,it){this.r=+k,this.g=+Z,this.b=+X,this.opacity=+it}U(S,m,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatRgb:A,toString:A}));function P(){return"#"+O(this.r)+O(this.g)+O(this.b)}function A(){var k=this.opacity;return k=isNaN(k)?1:Math.max(0,Math.min(1,k)),(k===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(k===1?")":", "+k+")")}function O(k){return k=Math.max(0,Math.min(255,Math.round(k)||0)),(k<16?"0":"")+k.toString(16)}function L(k,Z,X,it){return it<=0?k=Z=X=NaN:X<=0||X>=1?k=Z=NaN:Z<=0&&(k=NaN),new K(k,Z,X,it)}function W(k){if(k instanceof K)return new K(k.h,k.s,k.l,k.opacity);if(k instanceof T||(k=g(k)),!k)return new K;if(k instanceof K)return k;k=k.rgb();var Z=k.r/255,X=k.g/255,it=k.b/255,ft=Math.min(Z,X,it),pt=Math.max(Z,X,it),ut=NaN,It=pt-ft,Nt=(pt+ft)/2;return It?(Z===pt?ut=(X-it)/It+(X<it)*6:X===pt?ut=(it-Z)/It+2:ut=(Z-X)/It+4,It/=Nt<.5?pt+ft:2-pt-ft,ut*=60):It=Nt>0&&Nt<1?0:ut,new K(ut,It,Nt,k.opacity)}function F(k,Z,X,it){return arguments.length===1?W(k):new K(k,Z,X,it==null?1:it)}function K(k,Z,X,it){this.h=+k,this.s=+Z,this.l=+X,this.opacity=+it}U(K,F,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new K(this.h,this.s,this.l*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new K(this.h,this.s,this.l*Z,this.opacity)},rgb:function(){var Z=this.h%360+(this.h<0)*360,X=isNaN(Z)||isNaN(this.s)?0:this.s,it=this.l,ft=it+(it<.5?it:1-it)*X,pt=2*it-ft;return new S(V(Z>=240?Z-240:Z+120,pt,ft),V(Z,pt,ft),V(Z<120?Z+240:Z-120,pt,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Z=this.opacity;return Z=isNaN(Z)?1:Math.max(0,Math.min(1,Z)),(Z===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Z===1?")":", "+Z+")")}}));function V(k,Z,X){return(k<60?Z+(X-Z)*k/60:k<180?X:k<240?Z+(X-Z)*(240-k)/60:Z)*255}},G6z8:function(Oe,mt,R){var U=R("fR/l"),E=R("oCl/"),T=R("mTTR");function e(t){return U(t,T,E)}Oe.exports=e},GXnB:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Metadata=void 0;var U=R("xfSm"),E=function(){function T(e,t){this.key=e,this.value=t}return T.prototype.toString=function(){return this.key===U.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();mt.Metadata=E},Gi0A:function(Oe,mt,R){var U=R("QqLw"),E=R("ExA7"),T="[object Map]";function e(t){return E(t)&&U(t)==T}Oe.exports=e},Hel2:function(Oe,mt,R){"use strict";R.d(mt,"o",function(){return At}),R.d(mt,"m",function(){return z}),R.d(mt,"p",function(){return ot}),R.d(mt,"d",function(){return q}),R.d(mt,"q",function(){return yt}),R.d(mt,"r",function(){return Qt}),R.d(mt,"j",function(){return ee}),R.d(mt,"h",function(){return Vt}),R.d(mt,"b",function(){return $t}),R.d(mt,"i",function(){return Me}),R.d(mt,"s",function(){return le}),R.d(mt,"k",function(){return be}),R.d(mt,"l",function(){return ze}),R.d(mt,"n",function(){return Xe}),R.d(mt,"f",function(){return Sn}),R.d(mt,"e",function(){return Xn}),R.d(mt,"g",function(){return Hn}),R.d(mt,"a",function(){return U}),R.d(mt,"c",function(){return E});var U={};R.r(U),R.d(U,"getContainer",function(){return c}),R.d(U,"trim",function(){return r}),R.d(U,"splitWords",function(){return h}),R.d(U,"create",function(){return i}),R.d(U,"remove",function(){return a}),R.d(U,"addClass",function(){return o}),R.d(U,"removeClass",function(){return u}),R.d(U,"hasClass",function(){return f}),R.d(U,"setClass",function(){return v}),R.d(U,"getClass",function(){return b}),R.d(U,"empty",function(){return y}),R.d(U,"setTransform",function(){return _}),R.d(U,"triggerResize",function(){return M}),R.d(U,"printCanvas",function(){return x}),R.d(U,"getViewPortScale",function(){return m}),R.d(U,"DPR",function(){return S});var E={};R.r(E),R.d(E,"sum",function(){return An}),R.d(E,"max",function(){return nn}),R.d(E,"min",function(){return en}),R.d(E,"mean",function(){return Nn}),R.d(E,"mode",function(){return fr}),R.d(E,"statMap",function(){return hi}),R.d(E,"getColumn",function(){return Ce}),R.d(E,"getSatByColumn",function(){return Te});function T(Jt){var pe=131,Wt=137,ie=0;Jt+="x";for(var Ae=Math.floor(9007199254740991/Wt),ue=0;ue<Jt.length;ue++)ie>Ae&&(ie=Math.floor(ie/Wt)),ie=ie*pe+Jt.charCodeAt(ue);return ie}function e(Jt){Jt=Jt.toString();for(var pe=5381,Wt=Jt.length;Wt;)pe=pe*33^Jt.charCodeAt(--Wt);return pe>>>0}var t=R("J4zp"),l=R.n(t),s=window.document.documentElement.style;function c(Jt){var pe=Jt;return typeof Jt=="string"&&(pe=document.getElementById(Jt)),pe}function r(Jt){return Jt.trim?Jt.trim():Jt.replace(/^\s+|\s+$/g,"")}function h(Jt){return r(Jt).split(/\s+/)}function n(Jt){if(!s)return Jt[0];for(var pe in Jt)if(Jt[pe]&&Jt[pe]in s)return Jt[pe];return Jt[0]}function i(Jt,pe,Wt){var ie=document.createElement(Jt);return ie.className=pe||"",Wt&&Wt.appendChild(ie),ie}function a(Jt){var pe=Jt.parentNode;pe&&pe.removeChild(Jt)}function o(Jt,pe){if(Jt.classList!==void 0)for(var Wt=h(pe),ie=0,Ae=Wt.length;ie<Ae;ie++)Jt.classList.add(Wt[ie]);else if(!f(Jt,pe)){var ue=b(Jt);v(Jt,(ue?ue+" ":"")+pe)}}function u(Jt,pe){Jt.classList!==void 0?Jt.classList.remove(pe):v(Jt,r((" "+b(Jt)+" ").replace(" "+pe+" "," ")))}function f(Jt,pe){if(Jt.classList!==void 0)return Jt.classList.contains(pe);var Wt=b(Jt);return Wt.length>0&&new RegExp("(^|\\s)"+pe+"(\\s|$)").test(Wt)}function v(Jt,pe){Jt instanceof HTMLElement?Jt.className=pe:Jt.className.baseVal=pe}function b(Jt){return Jt instanceof SVGElement&&(Jt=Jt.correspondingElement),Jt.className.baseVal===void 0?Jt.className:Jt.className.baseVal}function y(Jt){for(;Jt&&Jt.firstChild;)Jt.removeChild(Jt.firstChild)}var g=n(["transform","WebkitTransform"]);function _(Jt,pe){Jt.style[g]=pe}function M(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var Jt=window.document.createEvent("UIEvents");Jt.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(Jt)}}function x(Jt){var pe=["padding: "+(Jt.height/2-8)+"px "+Jt.width/2+"px;","line-height: "+Jt.height+"px;","background-image: url("+Jt.toDataURL()+");"];console.log(`%c
`,pe.join(""))}function m(){var Jt,pe=document.querySelector('meta[name="viewport"]');if(!pe)return 1;var Wt=(Jt=pe.content)===null||Jt===void 0?void 0:Jt.split(","),ie=Wt.find(function(Ae){var ue=Ae.split("="),xe=l()(ue,2),$e=xe[0],Fn=xe[1];return $e==="initial-scale"});return ie?ie.split("=")[1]*1:1}var S=m()<1?1:window.devicePixelRatio,P=R("lwsE"),A=R.n(P),O=R("W8MJ"),L=R.n(O),W=R("7W2i"),F=R.n(W),K=R("a1gu"),V=R.n(K),k=R("Nsbk"),Z=R.n(k),X=R("oShl"),it=R.n(X);function ft(Jt){var pe=pt();return function(){var ie=Z()(Jt),Ae;if(pe){var ue=Z()(this).constructor;Ae=Reflect.construct(ie,arguments,ue)}else Ae=ie.apply(this,arguments);return V()(this,Ae)}}function pt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Jt){return!1}}var ut=function(Jt){F()(Wt,Jt);var pe=ft(Wt);function Wt(ie,Ae,ue){var xe;return A()(this,Wt),xe=pe.call(this,ie),xe.status=void 0,xe.url=void 0,xe.status=Ae,xe.url=ue,xe.name=xe.constructor.name,xe.message=ie,xe}return L()(Wt,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Wt}(it()(Error));function It(Jt){var pe=new XMLHttpRequest;pe.open("GET",Jt.url,!0);for(var Wt in Jt.headers)Jt.headers.hasOwnProperty(Wt)&&pe.setRequestHeader(Wt,Jt.headers[Wt]);return pe.withCredentials=Jt.credentials==="include",pe}var Nt=function(pe,Wt){var ie=It(pe);return ie.setRequestHeader("Accept","application/json"),ie.onerror=function(){Wt(new Error(ie.statusText))},ie.onload=function(){if(ie.status>=200&&ie.status<300&&ie.response){var Ae;try{Ae=JSON.parse(ie.response)}catch(ue){return Wt(ue)}Wt(null,Ae)}else ie.status===401?Wt(new ut("".concat(ie.statusText),ie.status,pe.url)):Wt(new ut(ie.statusText,ie.status,pe.url))},ie.send(),ie},Rt=function(pe,Wt){var ie=It(pe);return ie.responseType="arraybuffer",ie.onerror=function(){Wt(new Error(ie.statusText))},ie.onload=function(){var Ae=ie.response;if(Ae.byteLength===0&&ie.status===200)return Wt(new Error("http status 200 returned without content."));ie.status>=200&&ie.status<300&&ie.response?Wt(null,{data:Ae,cacheControl:ie.getResponseHeader("Cache-Control"),expires:ie.getResponseHeader("Expires")}):Wt(new ut(ie.statusText,ie.status,pe.url))},ie.send(),ie};function Mt(Jt){var pe=window.document.createElement("a");return pe.href=Jt,pe.protocol===window.document.location.protocol&&pe.host===window.document.location.host}var bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",At=function(pe,Wt){return Rt(pe,function(ie,Ae){if(ie)Wt(ie);else if(Ae){var ue=new window.Image;ue.crossOrigin="anonymous";var xe=window.URL||window.webkitURL;ue.onload=function(){Wt(null,ue),xe.revokeObjectURL(ue.src)};var $e=new window.Blob([new Uint8Array(Ae.data)],{type:"image/png"});ue.src=Ae.data.byteLength?xe.createObjectURL($e):bt}})},rt=R("0wsv"),Pt=2*Math.PI*6378137/2;function z(Jt){var pe=[Infinity,Infinity,-Infinity,-Infinity];return Jt.forEach(function(Wt){var ie=Wt.coordinates;Q(pe,ie)}),pe}function Q(Jt,pe){return Array.isArray(pe[0])?pe.forEach(function(Wt){Q(Jt,Wt)}):(Jt[0]>pe[0]&&(Jt[0]=pe[0]),Jt[1]>pe[1]&&(Jt[1]=pe[1]),Jt[2]<pe[0]&&(Jt[2]=pe[0]),Jt[3]<pe[1]&&(Jt[3]=pe[1])),Jt}function gt(Jt,pe){return et(Jt,pe)}function et(Jt,pe){return Array.isArray(Jt[0])?Jt.map(function(Wt){return et(Wt,pe)}):pe(Jt)}function ot(Jt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};Jt=at(Jt,pe);var ie=Jt[0],Ae=Jt[1],ue=ie*Pt/180,xe=Math.log(Math.tan((90+Ae)*Math.PI/360))/(Math.PI/180);return xe=xe*Pt/180,Wt.enable&&(ue=Number(ue.toFixed(Wt.decimal)),xe=Number(xe.toFixed(Wt.decimal))),Jt.length===3?[ue,xe,Jt[2]]:[ue,xe]}function xt(Jt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Wt=Jt[0],ie=Jt[1],Ae=Wt/Pt*180,ue=ie/Pt*180;return ue=180/Math.PI*(2*Math.atan(Math.exp(ue*Math.PI/180))-Math.PI/2),pe!=null&&(Ae=Number(Ae.toFixed(pe)),ue=Number(ue.toFixed(pe))),Jt.length===3?[Ae,ue,Jt[2]]:[Ae,ue]}function H(Jt){if(Jt==null)throw new Error("lng is required");return(Jt>180||Jt<-180)&&(Jt=Jt%360,Jt>180&&(Jt=-360+Jt),Jt<-180&&(Jt=360+Jt),Jt===0&&(Jt=0)),Jt}function nt(Jt){if(Jt==null)throw new Error("lat is required");return(Jt>90||Jt<-90)&&(Jt=Jt%180,Jt>90&&(Jt=-180+Jt),Jt<-90&&(Jt=180+Jt),Jt===0&&(Jt=0)),Jt}function at(Jt,pe){if(pe===!1)return Jt;var Wt=H(Jt[0]),ie=nt(Jt[1]);return ie>85&&(ie=85),ie<-85&&(ie=-85),Jt.length===3?[Wt,ie,Jt[2]]:[Wt,ie]}function q(Jt){var pe=85.0511287798,Wt=Math.max(Math.min(pe,Jt[1]),-pe),ie=256<<20,Ae=Math.PI/180,ue=Jt[0]*Ae,xe=Wt*Ae;xe=Math.log(Math.tan(Math.PI/4+xe/2));var $e=.5/Math.PI,Fn=.5,or=-.5/Math.PI;return Ae=.5,ue=ie*($e*ue+Fn),xe=ie*(or*xe+Ae),[Math.floor(ue),Math.floor(xe)]}function _t(Jt){var pe=.5/Math.PI,Wt=.5,ie=-.5/Math.PI,Ae=.5,ue=256<<20,xe=l()(Jt,2),$e=xe[0],Fn=xe[1];$e=($e/ue-Wt)/pe,Fn=(Fn/ue-Ae)/ie,Fn=(Math.atan(Math.pow(Math.E,Fn))-Math.PI/4)*2,Ae=Math.PI/180;var or=Fn/Ae,En=$e/Ae;return[En,or]}function yt(Jt,pe,Wt){var ie=Object(rt.a)(pe[1]-Jt[1]),Ae=Object(rt.a)(pe[0]-Jt[0]),ue=Object(rt.a)(Jt[1]),xe=Object(rt.a)(pe[1]),$e=Math.pow(Math.sin(ie/2),2)+Math.pow(Math.sin(Ae/2),2)*Math.cos(ue)*Math.cos(xe);return Object(rt.g)(2*Math.atan2(Math.sqrt($e),Math.sqrt(1-$e)),Wt="meters")}function Ft(Jt){var pe=Math.PI/180,Wt=85.0511287798,ie=6378137,Ae=Math.max(Math.min(Wt,Jt[1]),-Wt),ue=Math.sin(Ae*pe),xe=ie*Jt[0]*pe,$e=ie*Math.log((1+ue)/(1-ue))/2;return[xe,$e]}function Qt(Jt,pe){var Wt=Math.abs(Jt[1][1]-Jt[0][1])*pe,ie=Math.abs(Jt[1][0]-Jt[0][0])*pe;return[[Jt[0][0]-ie,Jt[0][1]-Wt],[Jt[1][0]+ie,Jt[1][1]+Wt]]}function ee(Jt,pe){return Jt[0][0]<=pe[0][0]&&Jt[0][1]<=pe[0][1]&&Jt[1][0]>=pe[1][0]&&Jt[1][1]>=pe[1][1]}function Vt(Jt){return[[Jt[0],Jt[1]],[Jt[2],Jt[3]]]}var $t=function(){function Jt(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Wt=arguments.length>1?arguments[1]:void 0;A()(this,Jt),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=pe,this.destroy=Wt||this.defaultDestroy,this.order=[],this.clear()}return L()(Jt,[{key:"clear",value:function(){var Wt=this;this.order.forEach(function(ie){Wt.delete(ie)}),this.cache={},this.order=[]}},{key:"get",value:function(Wt){var ie=this.cache[Wt];return ie&&(this.deleteOrder(Wt),this.appendOrder(Wt)),ie}},{key:"set",value:function(Wt,ie){this.cache[Wt]?(this.delete(Wt),this.cache[Wt]=ie,this.appendOrder(Wt)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Wt]=ie,this.appendOrder(Wt))}},{key:"delete",value:function(Wt){var ie=this.cache[Wt];ie&&(this.deleteCache(Wt),this.deleteOrder(Wt),this.destroy(ie,Wt))}},{key:"deleteCache",value:function(Wt){delete this.cache[Wt]}},{key:"deleteOrder",value:function(Wt){var ie=this.order.findIndex(function(Ae){return Ae===Wt});ie>=0&&this.order.splice(ie,1)}},{key:"appendOrder",value:function(Wt){this.order.push(Wt)}},{key:"defaultDestroy",value:function(Wt,ie){return null}}]),Jt}();function Me(Jt,pe){Jt.forEach(function(Wt){!pe[Wt]||(pe[Wt]=pe[Wt].bind(pe))})}var me=R("FmoU");function le(Jt){var pe=me.a(Jt),Wt=[0,0,0,0];return pe!=null&&(Wt[0]=pe.r/255,Wt[1]=pe.g/255,Wt[2]=pe.b/255,Wt[3]=pe.opacity),Wt}function be(Jt){var pe=Jt&&Jt[0],Wt=Jt&&Jt[1],ie=Jt&&Jt[2],Ae=pe+Wt*256+ie*65536-1;return Ae}function ze(Jt){return[Jt+1&255,Jt+1>>8&255,Jt+1>>8>>8&255]}function Xe(Jt){var pe=document.createElement("canvas"),Wt=pe.getContext("2d");pe.width=256,pe.height=1;for(var ie=Wt.createLinearGradient(0,0,256,1),Ae=null,ue=Jt.positions[0],xe=Jt.positions[Jt.positions.length-1],$e=0;$e<Jt.colors.length;++$e){var Fn=(Jt.positions[$e]-ue)/(xe-ue);ie.addColorStop(Fn,Jt.colors[$e])}return Wt.fillStyle=ie,Wt.fillRect(0,0,256,1),Ae=new Uint8ClampedArray(Wt.getImageData(0,0,256,1).data),new ImageData(Ae,256,1)}var Sn;(function(Jt){Jt.CENTER="center",Jt.TOP="top",Jt["TOP-LEFT"]="top-left",Jt["TOP-RIGHT"]="top-right",Jt.BOTTOM="bottom",Jt["BOTTOM-LEFT"]="bottom-left",Jt.LEFT="left",Jt.RIGHT="right"})(Sn||(Sn={}));var Xn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hn(Jt,pe,Wt){var ie=Jt.classList;for(var Ae in Xn)Xn.hasOwnProperty(Ae)&&ie.remove("l7-".concat(Wt,"-anchor-").concat(Ae));ie.add("l7-".concat(Wt,"-anchor-").concat(pe))}function nn(Jt){if(Jt.length===0)throw new Error("max requires at least one data point");for(var pe=Jt[0],Wt=1;Wt<Jt.length;Wt++)Jt[Wt]>pe&&(pe=Jt[Wt]);return pe*1}function en(Jt){if(Jt.length===0)throw new Error("min requires at least one data point");for(var pe=Jt[0],Wt=1;Wt<Jt.length;Wt++)Jt[Wt]<pe&&(pe=Jt[Wt]);return pe*1}function An(Jt){if(Jt.length===0)return 0;for(var pe=Jt[0]*1,Wt=1;Wt<Jt.length;Wt++)pe+=Jt[Wt]*1;return pe}function Nn(Jt){if(Jt.length===0)throw new Error("mean requires at least one data point");return An(Jt)/Jt.length}function fr(Jt){if(Jt.length===0)throw new Error("mean requires at least one data point");if(Jt.length<3)return Jt[0];Jt.sort();for(var pe=Jt[0],Wt=NaN,ie=0,Ae=1,ue=1;ue<Jt.length+1;ue++)Jt[ue]!==pe?(Ae>ie&&(ie=Ae,Wt=pe),Ae=1,pe=Jt[ue]):Ae++;return Wt*1}var hi={min:en,max:nn,mean:Nn,sum:An,mode:fr};function Ce(Jt,pe){return Jt.map(function(Wt){return Wt[pe]})}function Te(Jt,pe){return hi[Jt](pe)}},HpQ9:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.ContainerSnapshot=void 0;var U=function(){function E(){}return E.of=function(T,e){var t=new E;return t.bindings=T,t.middleware=e,t},E}();mt.ContainerSnapshot=U},HthE:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U}),R.d(mt,"b",function(){return E});var U;(function(T){T[T.LNGLAT=1]="LNGLAT",T[T.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",T[T.VECTOR_TILE=3]="VECTOR_TILE",T[T.IDENTITY=4]="IDENTITY",T[T.P20=5]="P20",T[T.P20_OFFSET=6]="P20_OFFSET",T[T.METER_OFFSET=7]="METER_OFFSET"})(U||(U={}));var E={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},I0ug:function(Oe,mt,R){"use strict";(function(U){R.d(mt,"a",function(){return T});var E=R("U8pU");function T(e){if(typeof window!="undefined"&&Object(E.a)(window.process)==="object"&&window.process.type==="renderer"||typeof U!="undefined"&&Object(E.a)(U.versions)==="object"&&Boolean(U.versions.electron))return!0;var t=(typeof navigator=="undefined"?"undefined":Object(E.a)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,l=e||t;return!!(l&&l.indexOf("Electron")>=0)}}).call(this,R("Q2Ig"))},IOcx:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U}),R.d(mt,"b",function(){return L}),R.d(mt,"c",function(){return W}),R.d(mt,"d",function(){return F}),R.d(mt,"e",function(){return K});var U={};R.r(U),R.d(U,"create",function(){return T}),R.d(U,"clone",function(){return e}),R.d(U,"copy",function(){return t}),R.d(U,"identity",function(){return l}),R.d(U,"fromValues",function(){return s}),R.d(U,"set",function(){return c}),R.d(U,"transpose",function(){return r}),R.d(U,"invert",function(){return h}),R.d(U,"adjoint",function(){return n}),R.d(U,"determinant",function(){return i}),R.d(U,"multiply",function(){return a}),R.d(U,"rotate",function(){return o}),R.d(U,"scale",function(){return u}),R.d(U,"fromRotation",function(){return f}),R.d(U,"fromScaling",function(){return v}),R.d(U,"str",function(){return b}),R.d(U,"frob",function(){return y}),R.d(U,"LDU",function(){return g}),R.d(U,"add",function(){return _}),R.d(U,"subtract",function(){return M}),R.d(U,"exactEquals",function(){return x}),R.d(U,"equals",function(){return m}),R.d(U,"multiplyScalar",function(){return S}),R.d(U,"multiplyScalarAndAdd",function(){return P}),R.d(U,"mul",function(){return A}),R.d(U,"sub",function(){return O});var E=R("yU0y");function T(){var V=new E.a(4);return E.a!=Float32Array&&(V[1]=0,V[2]=0),V[0]=1,V[3]=1,V}function e(V){var k=new E.a(4);return k[0]=V[0],k[1]=V[1],k[2]=V[2],k[3]=V[3],k}function t(V,k){return V[0]=k[0],V[1]=k[1],V[2]=k[2],V[3]=k[3],V}function l(V){return V[0]=1,V[1]=0,V[2]=0,V[3]=1,V}function s(V,k,Z,X){var it=new E.a(4);return it[0]=V,it[1]=k,it[2]=Z,it[3]=X,it}function c(V,k,Z,X,it){return V[0]=k,V[1]=Z,V[2]=X,V[3]=it,V}function r(V,k){if(V===k){var Z=k[1];V[1]=k[2],V[2]=Z}else V[0]=k[0],V[1]=k[2],V[2]=k[1],V[3]=k[3];return V}function h(V,k){var Z=k[0],X=k[1],it=k[2],ft=k[3],pt=Z*ft-it*X;return pt?(pt=1/pt,V[0]=ft*pt,V[1]=-X*pt,V[2]=-it*pt,V[3]=Z*pt,V):null}function n(V,k){var Z=k[0];return V[0]=k[3],V[1]=-k[1],V[2]=-k[2],V[3]=Z,V}function i(V){return V[0]*V[3]-V[2]*V[1]}function a(V,k,Z){var X=k[0],it=k[1],ft=k[2],pt=k[3],ut=Z[0],It=Z[1],Nt=Z[2],Rt=Z[3];return V[0]=X*ut+ft*It,V[1]=it*ut+pt*It,V[2]=X*Nt+ft*Rt,V[3]=it*Nt+pt*Rt,V}function o(V,k,Z){var X=k[0],it=k[1],ft=k[2],pt=k[3],ut=Math.sin(Z),It=Math.cos(Z);return V[0]=X*It+ft*ut,V[1]=it*It+pt*ut,V[2]=X*-ut+ft*It,V[3]=it*-ut+pt*It,V}function u(V,k,Z){var X=k[0],it=k[1],ft=k[2],pt=k[3],ut=Z[0],It=Z[1];return V[0]=X*ut,V[1]=it*ut,V[2]=ft*It,V[3]=pt*It,V}function f(V,k){var Z=Math.sin(k),X=Math.cos(k);return V[0]=X,V[1]=Z,V[2]=-Z,V[3]=X,V}function v(V,k){return V[0]=k[0],V[1]=0,V[2]=0,V[3]=k[1],V}function b(V){return"mat2("+V[0]+", "+V[1]+", "+V[2]+", "+V[3]+")"}function y(V){return Math.hypot(V[0],V[1],V[2],V[3])}function g(V,k,Z,X){return V[2]=X[2]/X[0],Z[0]=X[0],Z[1]=X[1],Z[3]=X[3]-V[2]*Z[1],[V,k,Z]}function _(V,k,Z){return V[0]=k[0]+Z[0],V[1]=k[1]+Z[1],V[2]=k[2]+Z[2],V[3]=k[3]+Z[3],V}function M(V,k,Z){return V[0]=k[0]-Z[0],V[1]=k[1]-Z[1],V[2]=k[2]-Z[2],V[3]=k[3]-Z[3],V}function x(V,k){return V[0]===k[0]&&V[1]===k[1]&&V[2]===k[2]&&V[3]===k[3]}function m(V,k){var Z=V[0],X=V[1],it=V[2],ft=V[3],pt=k[0],ut=k[1],It=k[2],Nt=k[3];return Math.abs(Z-pt)<=E.b*Math.max(1,Math.abs(Z),Math.abs(pt))&&Math.abs(X-ut)<=E.b*Math.max(1,Math.abs(X),Math.abs(ut))&&Math.abs(it-It)<=E.b*Math.max(1,Math.abs(it),Math.abs(It))&&Math.abs(ft-Nt)<=E.b*Math.max(1,Math.abs(ft),Math.abs(Nt))}function S(V,k,Z){return V[0]=k[0]*Z,V[1]=k[1]*Z,V[2]=k[2]*Z,V[3]=k[3]*Z,V}function P(V,k,Z,X){return V[0]=k[0]+Z[0]*X,V[1]=k[1]+Z[1]*X,V[2]=k[2]+Z[2]*X,V[3]=k[3]+Z[3]*X,V}var A=a,O=M,L=R("ZaHm"),W=R("ZxFD"),F=R("n+fv"),K=R("bl9R")},ISu3:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return T}),R.d(mt,"c",function(){return e}),R.d(mt,"b",function(){return t}),R.d(mt,"d",function(){return l});var U={},E={},T=function(c){return E[c]},e=function(c,r){E[c]=r},t=function(c){return U[c]},l=function(c,r){U[c]=r}},Ioao:function(Oe,mt,R){var U=R("heNW"),E=Math.max;function T(e,t,l){return t=E(t===void 0?e.length-1:t,0),function(){for(var s=arguments,c=-1,r=E(s.length-t,0),h=Array(r);++c<r;)h[c]=s[t+c];c=-1;for(var n=Array(t+1);++c<t;)n[c]=s[c];return n[t]=l(h),U(e,this,n)}}Oe.exports=T},IzEo:function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("lnY3"),e=R.n(T),t=R("Znn+"),l=R("14J3"),s=R("jCWc")},J2iB:function(Oe,mt){function R(U){return U==null}Oe.exports=R},J7lC:function(Oe,mt){},JBE3:function(Oe,mt,R){var U=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,l,s){U(e,t,l,s)});Oe.exports=T},Jssm:function(Oe,mt,R){"use strict";var U=R("q1tI"),E=R("i8i4"),T=R("17x9"),e=R("fhzG");Oe.exports=e({displayName:"ReactFitText",propTypes:{children:T.element.isRequired,compressor:T.number,minFontSize:T.number,maxFontSize:T.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var l=E.findDOMNode(this),s=l.offsetWidth;l.style.fontSize=Math.max(Math.min(s/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var l=this;return U.Children.map(this.props.children,function(s){return U.cloneElement(s,{ref:function(r){return l._childRef=r}})})},render:function(){return this._renderChildren()[0]}})},K9nA:function(Oe,mt,R){"use strict";(function(U,E){R.d(mt,"b",function(){return l}),R.d(mt,"a",function(){return r});var T=R("U8pU"),e={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof U!="undefined"&&U,document:typeof document!="undefined"&&document,process:(typeof E=="undefined"?"undefined":Object(T.a)(E))==="object"&&E},t=e.self||e.window||e.global,l=e.window||e.self||e.global,s=e.global||e.self||e.window,c=e.document||{},r=e.process||{},h=console}).call(this,R("IyRk"),R("Q2Ig"))},KKCa:function(Oe,mt){typeof Object.create=="function"?Oe.exports=function(U,E){U.super_=E,U.prototype=Object.create(E.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}})}:Oe.exports=function(U,E){U.super_=E;var T=function(){};T.prototype=E.prototype,U.prototype=new T,U.prototype.constructor=U}},KwMD:function(Oe,mt){function R(U,E,T,e){for(var t=U.length,l=T+(e?1:-1);e?l--:++l<t;)if(E(U[l],l,U))return l;return-1}Oe.exports=R},KxBF:function(Oe,mt){function R(U,E,T){var e=-1,t=U.length;E<0&&(E=-E>t?0:t+E),T=T>t?t:T,T<0&&(T+=t),t=E>T?0:T-E>>>0,E>>>=0;for(var l=Array(t);++e<t;)l[e]=U[e+E];return l}Oe.exports=R},L56e:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U=["mapload"]},LGYb:function(Oe,mt,R){var U=R("1hJj"),E=R("jbM+"),T=R("Xt/L"),e=R("xYSL"),t=R("dQpi"),l=R("rEGp"),s=200;function c(r,h,n){var i=-1,a=E,o=r.length,u=!0,f=[],v=f;if(n)u=!1,a=T;else if(o>=s){var b=h?null:t(r);if(b)return l(b);u=!1,a=e,v=new U}else v=h?[]:f;t:for(;++i<o;){var y=r[i],g=h?h(y):y;if(y=n||y!==0?y:0,u&&g===g){for(var _=v.length;_--;)if(v[_]===g)continue t;h&&v.push(g),f.push(y)}else a(v,g,n)||(v!==f&&v.push(g),f.push(y))}return f}Oe.exports=c},LKzl:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingWhenOnSyntax=void 0;var U=R("406g"),E=R("z4Hk"),T=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new U.BindingOnSyntax(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,l){return this._bindingWhenSyntax.whenTargetTagged(t,l)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,l){return this._bindingWhenSyntax.whenParentTagged(t,l)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,l){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,l)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,l){return this._bindingWhenSyntax.whenNoAncestorTagged(t,l)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}();mt.BindingWhenOnSyntax=T},LcsW:function(Oe,mt,R){var U=R("kekF"),E=U(Object.getPrototypeOf,Object);Oe.exports=E},LgvC:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Binding=void 0;var U=R("FV85"),E=R("d9O0"),T=function(){function e(t,l){this.id=E.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=l,this.type=U.BindingTypeEnum.Invalid,this.constraint=function(s){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();mt.Binding=T},LsHQ:function(Oe,mt,R){var U=R("EA7m"),E=R("mv/X");function T(e){return U(function(t,l){var s=-1,c=l.length,r=c>1?l[c-1]:void 0,h=c>2?l[2]:void 0;for(r=e.length>3&&typeof r=="function"?(c--,r):void 0,h&&E(l[0],l[1],h)&&(r=c<3?void 0:r,c=1),t=Object(t);++s<c;){var n=l[s];n&&e(t,n,s,r)}return t})}Oe.exports=T},MCLT:function(Oe,mt,R){(function(U){var E=Object.getOwnPropertyDescriptors||function(pt){for(var ut=Object.keys(pt),It={},Nt=0;Nt<ut.length;Nt++)It[ut[Nt]]=Object.getOwnPropertyDescriptor(pt,ut[Nt]);return It},T=/%[sdj%]/g;mt.format=function(ft){if(!_(ft)){for(var pt=[],ut=0;ut<arguments.length;ut++)pt.push(l(arguments[ut]));return pt.join(" ")}for(var ut=1,It=arguments,Nt=It.length,Rt=String(ft).replace(T,function(bt){if(bt==="%%")return"%";if(ut>=Nt)return bt;switch(bt){case"%s":return String(It[ut++]);case"%d":return Number(It[ut++]);case"%j":try{return JSON.stringify(It[ut++])}catch(At){return"[Circular]"}default:return bt}}),Mt=It[ut];ut<Nt;Mt=It[++ut])b(Mt)||!S(Mt)?Rt+=" "+Mt:Rt+=" "+l(Mt);return Rt},mt.deprecate=function(ft,pt){if(typeof U!="undefined"&&U.noDeprecation===!0)return ft;if(typeof U=="undefined")return function(){return mt.deprecate(ft,pt).apply(this,arguments)};var ut=!1;function It(){if(!ut){if(U.throwDeprecation)throw new Error(pt);U.traceDeprecation?console.trace(pt):console.error(pt),ut=!0}return ft.apply(this,arguments)}return It};var e={},t;mt.debuglog=function(ft){if(x(t)&&(t=Object({NODE_ENV:"production"}).NODE_DEBUG||""),ft=ft.toUpperCase(),!e[ft])if(new RegExp("\\b"+ft+"\\b","i").test(t)){var pt=U.pid;e[ft]=function(){var ut=mt.format.apply(mt,arguments);console.error("%s %d: %s",ft,pt,ut)}}else e[ft]=function(){};return e[ft]};function l(ft,pt){var ut={seen:[],stylize:c};return arguments.length>=3&&(ut.depth=arguments[2]),arguments.length>=4&&(ut.colors=arguments[3]),v(pt)?ut.showHidden=pt:pt&&mt._extend(ut,pt),x(ut.showHidden)&&(ut.showHidden=!1),x(ut.depth)&&(ut.depth=2),x(ut.colors)&&(ut.colors=!1),x(ut.customInspect)&&(ut.customInspect=!0),ut.colors&&(ut.stylize=s),h(ut,ft,ut.depth)}mt.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(ft,pt){var ut=l.styles[pt];return ut?"["+l.colors[ut][0]+"m"+ft+"["+l.colors[ut][1]+"m":ft}function c(ft,pt){return ft}function r(ft){var pt={};return ft.forEach(function(ut,It){pt[ut]=!0}),pt}function h(ft,pt,ut){if(ft.customInspect&&pt&&O(pt.inspect)&&pt.inspect!==mt.inspect&&!(pt.constructor&&pt.constructor.prototype===pt)){var It=pt.inspect(ut,ft);return _(It)||(It=h(ft,It,ut)),It}var Nt=n(ft,pt);if(Nt)return Nt;var Rt=Object.keys(pt),Mt=r(Rt);if(ft.showHidden&&(Rt=Object.getOwnPropertyNames(pt)),A(pt)&&(Rt.indexOf("message")>=0||Rt.indexOf("description")>=0))return i(pt);if(Rt.length===0){if(O(pt)){var bt=pt.name?": "+pt.name:"";return ft.stylize("[Function"+bt+"]","special")}if(m(pt))return ft.stylize(RegExp.prototype.toString.call(pt),"regexp");if(P(pt))return ft.stylize(Date.prototype.toString.call(pt),"date");if(A(pt))return i(pt)}var At="",rt=!1,Pt=["{","}"];if(f(pt)&&(rt=!0,Pt=["[","]"]),O(pt)){var z=pt.name?": "+pt.name:"";At=" [Function"+z+"]"}if(m(pt)&&(At=" "+RegExp.prototype.toString.call(pt)),P(pt)&&(At=" "+Date.prototype.toUTCString.call(pt)),A(pt)&&(At=" "+i(pt)),Rt.length===0&&(!rt||pt.length==0))return Pt[0]+At+Pt[1];if(ut<0)return m(pt)?ft.stylize(RegExp.prototype.toString.call(pt),"regexp"):ft.stylize("[Object]","special");ft.seen.push(pt);var Q;return rt?Q=a(ft,pt,ut,Mt,Rt):Q=Rt.map(function(gt){return o(ft,pt,ut,Mt,gt,rt)}),ft.seen.pop(),u(Q,At,Pt)}function n(ft,pt){if(x(pt))return ft.stylize("undefined","undefined");if(_(pt)){var ut="'"+JSON.stringify(pt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ft.stylize(ut,"string")}if(g(pt))return ft.stylize(""+pt,"number");if(v(pt))return ft.stylize(""+pt,"boolean");if(b(pt))return ft.stylize("null","null")}function i(ft){return"["+Error.prototype.toString.call(ft)+"]"}function a(ft,pt,ut,It,Nt){for(var Rt=[],Mt=0,bt=pt.length;Mt<bt;++Mt)k(pt,String(Mt))?Rt.push(o(ft,pt,ut,It,String(Mt),!0)):Rt.push("");return Nt.forEach(function(At){At.match(/^\d+$/)||Rt.push(o(ft,pt,ut,It,At,!0))}),Rt}function o(ft,pt,ut,It,Nt,Rt){var Mt,bt,At;if(At=Object.getOwnPropertyDescriptor(pt,Nt)||{value:pt[Nt]},At.get?At.set?bt=ft.stylize("[Getter/Setter]","special"):bt=ft.stylize("[Getter]","special"):At.set&&(bt=ft.stylize("[Setter]","special")),k(It,Nt)||(Mt="["+Nt+"]"),bt||(ft.seen.indexOf(At.value)<0?(b(ut)?bt=h(ft,At.value,null):bt=h(ft,At.value,ut-1),bt.indexOf(`
`)>-1&&(Rt?bt=bt.split(`
`).map(function(rt){return"  "+rt}).join(`
`).substr(2):bt=`
`+bt.split(`
`).map(function(rt){return"   "+rt}).join(`
`))):bt=ft.stylize("[Circular]","special")),x(Mt)){if(Rt&&Nt.match(/^\d+$/))return bt;Mt=JSON.stringify(""+Nt),Mt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Mt=Mt.substr(1,Mt.length-2),Mt=ft.stylize(Mt,"name")):(Mt=Mt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Mt=ft.stylize(Mt,"string"))}return Mt+": "+bt}function u(ft,pt,ut){var It=0,Nt=ft.reduce(function(Rt,Mt){return It++,Mt.indexOf(`
`)>=0&&It++,Rt+Mt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Nt>60?ut[0]+(pt===""?"":pt+`
 `)+" "+ft.join(`,
  `)+" "+ut[1]:ut[0]+pt+" "+ft.join(", ")+" "+ut[1]}function f(ft){return Array.isArray(ft)}mt.isArray=f;function v(ft){return typeof ft=="boolean"}mt.isBoolean=v;function b(ft){return ft===null}mt.isNull=b;function y(ft){return ft==null}mt.isNullOrUndefined=y;function g(ft){return typeof ft=="number"}mt.isNumber=g;function _(ft){return typeof ft=="string"}mt.isString=_;function M(ft){return typeof ft=="symbol"}mt.isSymbol=M;function x(ft){return ft===void 0}mt.isUndefined=x;function m(ft){return S(ft)&&W(ft)==="[object RegExp]"}mt.isRegExp=m;function S(ft){return typeof ft=="object"&&ft!==null}mt.isObject=S;function P(ft){return S(ft)&&W(ft)==="[object Date]"}mt.isDate=P;function A(ft){return S(ft)&&(W(ft)==="[object Error]"||ft instanceof Error)}mt.isError=A;function O(ft){return typeof ft=="function"}mt.isFunction=O;function L(ft){return ft===null||typeof ft=="boolean"||typeof ft=="number"||typeof ft=="string"||typeof ft=="symbol"||typeof ft=="undefined"}mt.isPrimitive=L,mt.isBuffer=R("1gqn");function W(ft){return Object.prototype.toString.call(ft)}function F(ft){return ft<10?"0"+ft.toString(10):ft.toString(10)}var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function V(){var ft=new Date,pt=[F(ft.getHours()),F(ft.getMinutes()),F(ft.getSeconds())].join(":");return[ft.getDate(),K[ft.getMonth()],pt].join(" ")}mt.log=function(){console.log("%s - %s",V(),mt.format.apply(mt,arguments))},mt.inherits=R("KKCa"),mt._extend=function(ft,pt){if(!pt||!S(pt))return ft;for(var ut=Object.keys(pt),It=ut.length;It--;)ft[ut[It]]=pt[ut[It]];return ft};function k(ft,pt){return Object.prototype.hasOwnProperty.call(ft,pt)}var Z=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;mt.promisify=function(pt){if(typeof pt!="function")throw new TypeError('The "original" argument must be of type Function');if(Z&&pt[Z]){var ut=pt[Z];if(typeof ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ut,Z,{value:ut,enumerable:!1,writable:!1,configurable:!0}),ut}function ut(){for(var It,Nt,Rt=new Promise(function(At,rt){It=At,Nt=rt}),Mt=[],bt=0;bt<arguments.length;bt++)Mt.push(arguments[bt]);Mt.push(function(At,rt){At?Nt(At):It(rt)});try{pt.apply(this,Mt)}catch(At){Nt(At)}return Rt}return Object.setPrototypeOf(ut,Object.getPrototypeOf(pt)),Z&&Object.defineProperty(ut,Z,{value:ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ut,E(pt))},mt.promisify.custom=Z;function X(ft,pt){if(!ft){var ut=new Error("Promise was rejected with a falsy value");ut.reason=ft,ft=ut}return pt(ft)}function it(ft){if(typeof ft!="function")throw new TypeError('The "original" argument must be of type Function');function pt(){for(var ut=[],It=0;It<arguments.length;It++)ut.push(arguments[It]);var Nt=ut.pop();if(typeof Nt!="function")throw new TypeError("The last argument must be of type Function");var Rt=this,Mt=function(){return Nt.apply(Rt,arguments)};ft.apply(this,ut).then(function(bt){U.nextTick(Mt,null,bt)},function(bt){U.nextTick(X,bt,Mt)})}return Object.setPrototypeOf(pt,Object.getPrototypeOf(ft)),Object.defineProperties(pt,E(ft)),pt}mt.callbackify=it}).call(this,R("Q2Ig"))},MON2:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.STACK_OVERFLOW=mt.CIRCULAR_DEPENDENCY_IN_FACTORY=mt.POST_CONSTRUCT_ERROR=mt.MULTIPLE_POST_CONSTRUCT_METHODS=mt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=mt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=mt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=mt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=mt.ARGUMENTS_LENGTH_MISMATCH=mt.INVALID_DECORATOR_OPERATION=mt.INVALID_TO_SELF_VALUE=mt.INVALID_FUNCTION_BINDING=mt.INVALID_MIDDLEWARE_RETURN=mt.NO_MORE_SNAPSHOTS_AVAILABLE=mt.INVALID_BINDING_TYPE=mt.NOT_IMPLEMENTED=mt.CIRCULAR_DEPENDENCY=mt.UNDEFINED_INJECT_ANNOTATION=mt.MISSING_INJECT_ANNOTATION=mt.MISSING_INJECTABLE_ANNOTATION=mt.NOT_REGISTERED=mt.CANNOT_UNBIND=mt.AMBIGUOUS_MATCH=mt.KEY_NOT_FOUND=mt.NULL_ARGUMENT=mt.DUPLICATED_METADATA=mt.DUPLICATED_INJECTABLE_DECORATOR=void 0,mt.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",mt.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",mt.NULL_ARGUMENT="NULL argument",mt.KEY_NOT_FOUND="Key Not Found",mt.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",mt.CANNOT_UNBIND="Could not unbind serviceIdentifier:",mt.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",mt.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",mt.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",mt.UNDEFINED_INJECT_ANNOTATION=function(U){return"@inject called with undefined this could mean that the class "+U+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},mt.CIRCULAR_DEPENDENCY="Circular dependency found:",mt.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",mt.INVALID_BINDING_TYPE="Invalid binding type:",mt.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",mt.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",mt.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",mt.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",mt.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",mt.ARGUMENTS_LENGTH_MISMATCH=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"The number of constructor arguments in the derived class "+(U[0]+" must be >= than the number of constructor arguments of its base class.")},mt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",mt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",mt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",mt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",mt.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",mt.POST_CONSTRUCT_ERROR=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"@postConstruct error in class "+U[0]+": "+U[1]},mt.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"It looks like there is a circular dependency "+("in one of the '"+U[0]+"' bindings. Please investigate bindings with")+("service identifier '"+U[1]+"'.")},mt.STACK_OVERFLOW="Maximum call stack size exceeded"},MrPd:function(Oe,mt,R){var U=R("hypo"),E=R("ljhN"),T=Object.prototype,e=T.hasOwnProperty;function t(l,s,c){var r=l[s];(!(e.call(l,s)&&E(r,c))||c===void 0&&!(s in l))&&U(l,s,c)}Oe.exports=t},Nsbk:function(Oe,mt){function R(U){return Oe.exports=R=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0,R(U)}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},O0oS:function(Oe,mt,R){var U=R("Cwc5"),E=function(){try{var T=U(Object,"defineProperty");return T({},"",{}),T}catch(e){}}();Oe.exports=E},O1je:function(Oe,mt){},OBhP:function(Oe,mt,R){var U=R("fmRc"),E=R("gFfm"),T=R("MrPd"),e=R("WwFo"),t=R("Dw+G"),l=R("5Tg0"),s=R("Q1l4"),c=R("VOtZ"),r=R("EEGq"),h=R("qZTm"),n=R("G6z8"),i=R("QqLw"),a=R("yHx3"),o=R("wrZu"),u=R("+iFO"),f=R("Z0cm"),v=R("DSRE"),b=R("zEVN"),y=R("GoyQ"),g=R("1+5i"),_=R("7GkX"),M=R("mTTR"),x=1,m=2,S=4,P="[object Arguments]",A="[object Array]",O="[object Boolean]",L="[object Date]",W="[object Error]",F="[object Function]",K="[object GeneratorFunction]",V="[object Map]",k="[object Number]",Z="[object Object]",X="[object RegExp]",it="[object Set]",ft="[object String]",pt="[object Symbol]",ut="[object WeakMap]",It="[object ArrayBuffer]",Nt="[object DataView]",Rt="[object Float32Array]",Mt="[object Float64Array]",bt="[object Int8Array]",At="[object Int16Array]",rt="[object Int32Array]",Pt="[object Uint8Array]",z="[object Uint8ClampedArray]",Q="[object Uint16Array]",gt="[object Uint32Array]",et={};et[P]=et[A]=et[It]=et[Nt]=et[O]=et[L]=et[Rt]=et[Mt]=et[bt]=et[At]=et[rt]=et[V]=et[k]=et[Z]=et[X]=et[it]=et[ft]=et[pt]=et[Pt]=et[z]=et[Q]=et[gt]=!0,et[W]=et[F]=et[ut]=!1;function ot(xt,H,nt,at,q,_t){var yt,Ft=H&x,Qt=H&m,ee=H&S;if(nt&&(yt=q?nt(xt,at,q,_t):nt(xt)),yt!==void 0)return yt;if(!y(xt))return xt;var Vt=f(xt);if(Vt){if(yt=a(xt),!Ft)return s(xt,yt)}else{var $t=i(xt),Me=$t==F||$t==K;if(v(xt))return l(xt,Ft);if($t==Z||$t==P||Me&&!q){if(yt=Qt||Me?{}:u(xt),!Ft)return Qt?r(xt,t(yt,xt)):c(xt,e(yt,xt))}else{if(!et[$t])return q?xt:{};yt=o(xt,$t,Ft)}}_t||(_t=new U);var me=_t.get(xt);if(me)return me;_t.set(xt,yt),g(xt)?xt.forEach(function(ze){yt.add(ot(ze,H,nt,ze,xt,_t))}):b(xt)&&xt.forEach(function(ze,Xe){yt.set(Xe,ot(ze,H,nt,Xe,xt,_t))});var le=ee?Qt?n:h:Qt?M:_,be=Vt?void 0:le(xt);return E(be||xt,function(ze,Xe){be&&(Xe=ze,ze=xt[Xe]),T(yt,Xe,ot(ze,H,nt,Xe,xt,_t))}),yt}Oe.exports=ot},PArb:function(Oe,mt,R){"use strict";var U=R("wx14"),E=R("rePB"),T=R("q1tI"),e=R.n(T),t=R("TSYQ"),l=R.n(t),s=R("H84U"),c=function(h,n){var i={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&n.indexOf(a)<0&&(i[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(h);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(h,a[o])&&(i[a[o]]=h[a[o]]);return i},r=function(n){return T.createElement(s.a,null,function(i){var a,o=i.getPrefixCls,u=i.direction,f=n.prefixCls,v=n.type,b=v===void 0?"horizontal":v,y=n.orientation,g=y===void 0?"center":y,_=n.className,M=n.children,x=n.dashed,m=n.plain,S=c(n,["prefixCls","type","orientation","className","children","dashed","plain"]),P=o("divider",f),A=g.length>0?"-".concat(g):g,O=!!M,L=l()(P,"".concat(P,"-").concat(b),(a={},Object(E.a)(a,"".concat(P,"-with-text"),O),Object(E.a)(a,"".concat(P,"-with-text").concat(A),O),Object(E.a)(a,"".concat(P,"-dashed"),!!x),Object(E.a)(a,"".concat(P,"-plain"),!!m),Object(E.a)(a,"".concat(P,"-rtl"),u==="rtl"),a),_);return T.createElement("div",Object(U.a)({className:L},S,{role:"separator"}),M&&T.createElement("span",{className:"".concat(P,"-inner-text")},M))})};mt.a=r},PJYZ:function(Oe,mt){function R(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},PSsN:function(Oe,mt){},PUg6:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U;(function(E){E.normal="normal",E.additive="additive",E.subtractive="subtractive",E.min="min",E.max="max",E.none="none"})(U||(U={}))},Q1l4:function(Oe,mt){function R(U,E){var T=-1,e=U.length;for(E||(E=Array(e));++T<e;)E[T]=U[T];return E}Oe.exports=R},QGbF:function(Oe,mt){},"QQZ/":function(Oe,mt,R){var U=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(l,s,c){l=e(l),s=T(s);var r=s?E(l):0;return s&&r<s?U(s-r,c)+l:l}Oe.exports=t},QcOe:function(Oe,mt,R){var U=R("GoyQ"),E=R("6sVZ"),T=R("7Ix3"),e=Object.prototype,t=e.hasOwnProperty;function l(s){if(!U(s))return T(s);var c=E(s),r=[];for(var h in s)h=="constructor"&&(c||!t.call(s,h))||r.push(h);return r}Oe.exports=l},QkVN:function(Oe,mt,R){var U=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,l){U(e,t,l)});Oe.exports=T},"R/W3":function(Oe,mt,R){var U=R("KwMD"),E=R("2ajD"),T=R("CZoQ");function e(t,l,s){return l===l?T(t,l,s):U(t,E,s)}Oe.exports=e},"RL2/":function(Oe,mt,R){"use strict";var U="2.3.9"},RMtq:function(Oe,mt){},"RR/i":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.typeConstraint=mt.namedConstraint=mt.taggedConstraint=mt.traverseAncerstors=void 0;var U=R("xfSm"),E=R("GXnB"),T=function s(c,r){var h=c.parentRequest;return h!==null?r(h)?!0:s(h,r):!1};mt.traverseAncerstors=T;var e=function(c){return function(r){var h=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(c)(r)};return h.metaData=new E.Metadata(c,r),h}};mt.taggedConstraint=e;var t=e(U.NAMED_TAG);mt.namedConstraint=t;var l=function(c){return function(r){var h=null;if(r!==null)if(h=r.bindings[0],typeof c=="string"){var n=h.serviceIdentifier;return n===c}else{var i=r.bindings[0].implementationType;return c===i}return!1}};mt.typeConstraint=l},Sk89:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.postConstruct=void 0;var U=R("MON2"),E=R("xfSm"),T=R("GXnB");function e(){return function(t,l,s){var c=new T.Metadata(E.POST_CONSTRUCT,l);if(Reflect.hasOwnMetadata(E.POST_CONSTRUCT,t.constructor))throw new Error(U.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(E.POST_CONSTRUCT,c,t.constructor)}}mt.postConstruct=e},SksO:function(Oe,mt){function R(U,E){return Oe.exports=R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0,R(U,E)}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},Sq3C:function(Oe,mt,R){var U=R("sKgW"),E=R("zoYe"),T=R("wy8a"),e=R("quyA"),t=R("Z1HP"),l=R("Em2t"),s=Math.ceil;function c(r,h){h=h===void 0?" ":E(h);var n=h.length;if(n<2)return n?U(h,r):h;var i=U(h,s(r/t(h)));return e(h)?T(l(i),0,r).join(""):i.slice(0,r)}Oe.exports=c},Sxd8:function(Oe,mt,R){var U=R("ZCgT");function E(T){var e=U(T),t=e%1;return e===e?t?e-t:e:0}Oe.exports=E},T1AV:function(Oe,mt,R){var U=R("t2Dn"),E=R("5Tg0"),T=R("yP5f"),e=R("Q1l4"),t=R("+iFO"),l=R("03A+"),s=R("Z0cm"),c=R("3L66"),r=R("DSRE"),h=R("lSCD"),n=R("GoyQ"),i=R("YO3V"),a=R("c6wG"),o=R("itsj"),u=R("jeLo");function f(v,b,y,g,_,M,x){var m=o(v,y),S=o(b,y),P=x.get(S);if(P){U(v,y,P);return}var A=M?M(m,S,y+"",v,b,x):void 0,O=A===void 0;if(O){var L=s(S),W=!L&&r(S),F=!L&&!W&&a(S);A=S,L||W||F?s(m)?A=m:c(m)?A=e(m):W?(O=!1,A=E(S,!0)):F?(O=!1,A=T(S,!0)):A=[]:i(S)||l(S)?(A=m,l(m)?A=u(m):(!n(m)||h(m))&&(A=t(S))):O=!1}O&&(x.set(S,A),_(A,S,g,M,x),x.delete(S)),U(v,y,A)}Oe.exports=f},TKrE:function(Oe,mt,R){var U=R("qRkn"),E=R("dt0z"),T=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",l="\\u20d0-\\u20ff",s=e+t+l,c="["+s+"]",r=RegExp(c,"g");function h(n){return n=E(n),n&&n.replace(T,U).replace(r,"")}Oe.exports=h},"U+yc":function(Oe,mt){function R(U,E,T,e,t){var l={};return Object.keys(e).forEach(function(s){l[s]=e[s]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=T.slice().reverse().reduce(function(s,c){return c(U,E,s)||s},l),t&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(t):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(U,E,l),l=null),l}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},U1ZX:function(Oe,mt){},UB5X:function(Oe,mt,R){var U=R("NykK"),E=R("ExA7"),T="[object Number]";function e(t){return typeof t=="number"||E(t)&&U(t)==T}Oe.exports=e},Ucsi:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0});var U=Symbol.for("INJECTION");function E(s,c,r,h){function n(){return h&&!Reflect.hasMetadata(U,this,c)&&Reflect.defineMetadata(U,r(),this,c),Reflect.hasMetadata(U,this,c)?Reflect.getMetadata(U,this,c):r()}function i(a){Reflect.defineMetadata(U,a,this,c)}Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:n,set:i})}function T(s,c){return function(r){return function(h,n){var i=function(){return s.get(r)};E(h,n,i,c)}}}mt.makePropertyInjectDecorator=T;function e(s,c){return function(r,h){return function(n,i){var a=function(){return s.getNamed(r,h)};E(n,i,a,c)}}}mt.makePropertyInjectNamedDecorator=e;function t(s,c){return function(r,h,n){return function(i,a){var o=function(){return s.getTagged(r,h,n)};E(i,a,o,c)}}}mt.makePropertyInjectTaggedDecorator=t;function l(s,c){return function(r){return function(h,n){var i=function(){return s.getAll(r)};E(h,n,i,c)}}}mt.makePropertyMultiInjectDecorator=l},V1cb:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U;(function(E){E.Hover="hover",E.Click="click",E.Select="select",E.Active="active",E.Drag="drag"})(U||(U={}))},VIsB:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return l});var U=R("Hel2");function E(i,a){var o;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(o=T(i))||a&&i&&typeof i.length=="number"){o&&(i=o);var u=0,f=function(){};return{s:f,n:function(){return u>=i.length?{done:!0}:{done:!1,value:i[u++]}},e:function(_){throw _},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,b=!1,y;return{s:function(){o=i[Symbol.iterator]()},n:function(){var _=o.next();return v=_.done,_},e:function(_){b=!0,y=_},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(b)throw y}}}}function T(i,a){if(!!i){if(typeof i=="string")return e(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,a)}}function e(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,u=new Array(a);o<a;o++)u[o]=i[o];return u}var t=6378e3;function l(i,a){var o=i.dataArray,u=a.size,f=u===void 0?10:u,v=f/(2*Math.PI*t)*(256<<20)/2,b=s(o,f),y=b.gridHash,g=b.gridOffset,_=n(y,g,a);return{yOffset:v,xOffset:v,radius:v,type:"grid",dataArray:_}}function s(i,a){var o=Infinity,u=-Infinity,f,v=E(i),b;try{for(v.s();!(b=v.n()).done;){var y=b.value;f=y.coordinates[1],Number.isFinite(f)&&(o=f<o?f:o,u=f>u?f:u)}}catch(F){v.e(F)}finally{v.f()}var g=(o+u)/2,_=c(a,g);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var M={},x=E(i),m;try{for(x.s();!(m=x.n()).done;){var S=m.value,P=S.coordinates[1],A=S.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(A)){var O=Math.floor((P+90)/_.yOffset),L=Math.floor((A+180)/_.xOffset),W="".concat(O,"-").concat(L);M[W]=M[W]||{count:0,points:[]},M[W].count+=1,M[W].points.push(S)}}}catch(F){x.e(F)}finally{x.f()}return{gridHash:M,gridOffset:_}}function c(i,a){var o=r(i),u=h(a,i);return{yOffset:o,xOffset:u}}function r(i){return i/t*(180/Math.PI)}function h(i,a){return a/t*(180/Math.PI)/Math.cos(i*Math.PI/180)}function n(i,a,o){return Object.keys(i).reduce(function(u,f,v){var b=f.split("-"),y=parseInt(b[0],10),g=parseInt(b[1],10),_={};if(o.field&&o.method){var M=U.c.getColumn(i[f].points,o.field);_[o.method]=U.c.statMap[o.method](M)}return Object.assign(_,{_id:v,coordinates:Object(U.d)([-180+a.xOffset*(g+.5),-90+a.yOffset*(y+.5)]),rawData:i[f].points,count:i[f].count}),u.push(_),u},[])}},VOtZ:function(Oe,mt,R){var U=R("juv8"),E=R("MvSz");function T(e,t){return U(e,E(e),t)}Oe.exports=T},VmRL:function(Oe,mt,R){"use strict";Oe.exports=U,Oe.exports.default=U;function U(V,k,Z){Z=Z||2;var X=k&&k.length,it=X?k[0]*Z:V.length,ft=E(V,0,it,Z,!0),pt=[];if(!ft||ft.next===ft.prev)return pt;var ut,It,Nt,Rt,Mt,bt,At;if(X&&(ft=r(V,k,ft,Z)),V.length>80*Z){ut=Nt=V[0],It=Rt=V[1];for(var rt=Z;rt<it;rt+=Z)Mt=V[rt],bt=V[rt+1],Mt<ut&&(ut=Mt),bt<It&&(It=bt),Mt>Nt&&(Nt=Mt),bt>Rt&&(Rt=bt);At=Math.max(Nt-ut,Rt-It),At=At!==0?1/At:0}return e(ft,pt,Z,ut,It,At),pt}function E(V,k,Z,X,it){var ft,pt;if(it===K(V,k,Z,X)>0)for(ft=k;ft<Z;ft+=X)pt=L(ft,V[ft],V[ft+1],pt);else for(ft=Z-X;ft>=k;ft-=X)pt=L(ft,V[ft],V[ft+1],pt);return pt&&_(pt,pt.next)&&(W(pt),pt=pt.next),pt}function T(V,k){if(!V)return V;k||(k=V);var Z=V,X;do if(X=!1,!Z.steiner&&(_(Z,Z.next)||g(Z.prev,Z,Z.next)===0)){if(W(Z),Z=k=Z.prev,Z===Z.next)break;X=!0}else Z=Z.next;while(X||Z!==k);return k}function e(V,k,Z,X,it,ft,pt){if(!!V){!pt&&ft&&o(V,X,it,ft);for(var ut=V,It,Nt;V.prev!==V.next;){if(It=V.prev,Nt=V.next,ft?l(V,X,it,ft):t(V)){k.push(It.i/Z),k.push(V.i/Z),k.push(Nt.i/Z),W(V),V=Nt.next,ut=Nt.next;continue}if(V=Nt,V===ut){pt?pt===1?(V=s(T(V),k,Z),e(V,k,Z,X,it,ft,2)):pt===2&&c(V,k,Z,X,it,ft):e(T(V),k,Z,X,it,ft,1);break}}}}function t(V){var k=V.prev,Z=V,X=V.next;if(g(k,Z,X)>=0)return!1;for(var it=V.next.next;it!==V.prev;){if(b(k.x,k.y,Z.x,Z.y,X.x,X.y,it.x,it.y)&&g(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function l(V,k,Z,X){var it=V.prev,ft=V,pt=V.next;if(g(it,ft,pt)>=0)return!1;for(var ut=it.x<ft.x?it.x<pt.x?it.x:pt.x:ft.x<pt.x?ft.x:pt.x,It=it.y<ft.y?it.y<pt.y?it.y:pt.y:ft.y<pt.y?ft.y:pt.y,Nt=it.x>ft.x?it.x>pt.x?it.x:pt.x:ft.x>pt.x?ft.x:pt.x,Rt=it.y>ft.y?it.y>pt.y?it.y:pt.y:ft.y>pt.y?ft.y:pt.y,Mt=f(ut,It,k,Z,X),bt=f(Nt,Rt,k,Z,X),At=V.prevZ,rt=V.nextZ;At&&At.z>=Mt&&rt&&rt.z<=bt;){if(At!==V.prev&&At!==V.next&&b(it.x,it.y,ft.x,ft.y,pt.x,pt.y,At.x,At.y)&&g(At.prev,At,At.next)>=0||(At=At.prevZ,rt!==V.prev&&rt!==V.next&&b(it.x,it.y,ft.x,ft.y,pt.x,pt.y,rt.x,rt.y)&&g(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;At&&At.z>=Mt;){if(At!==V.prev&&At!==V.next&&b(it.x,it.y,ft.x,ft.y,pt.x,pt.y,At.x,At.y)&&g(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;rt&&rt.z<=bt;){if(rt!==V.prev&&rt!==V.next&&b(it.x,it.y,ft.x,ft.y,pt.x,pt.y,rt.x,rt.y)&&g(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function s(V,k,Z){var X=V;do{var it=X.prev,ft=X.next.next;!_(it,ft)&&M(it,X,X.next,ft)&&P(it,ft)&&P(ft,it)&&(k.push(it.i/Z),k.push(X.i/Z),k.push(ft.i/Z),W(X),W(X.next),X=V=ft),X=X.next}while(X!==V);return T(X)}function c(V,k,Z,X,it,ft){var pt=V;do{for(var ut=pt.next.next;ut!==pt.prev;){if(pt.i!==ut.i&&y(pt,ut)){var It=O(pt,ut);pt=T(pt,pt.next),It=T(It,It.next),e(pt,k,Z,X,it,ft),e(It,k,Z,X,it,ft);return}ut=ut.next}pt=pt.next}while(pt!==V)}function r(V,k,Z,X){var it=[],ft,pt,ut,It,Nt;for(ft=0,pt=k.length;ft<pt;ft++)ut=k[ft]*X,It=ft<pt-1?k[ft+1]*X:V.length,Nt=E(V,ut,It,X,!1),Nt===Nt.next&&(Nt.steiner=!0),it.push(v(Nt));for(it.sort(h),ft=0;ft<it.length;ft++)n(it[ft],Z),Z=T(Z,Z.next);return Z}function h(V,k){return V.x-k.x}function n(V,k){if(k=i(V,k),k){var Z=O(k,V);T(k,k.next),T(Z,Z.next)}}function i(V,k){var Z=k,X=V.x,it=V.y,ft=-Infinity,pt;do{if(it<=Z.y&&it>=Z.next.y&&Z.next.y!==Z.y){var ut=Z.x+(it-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(ut<=X&&ut>ft){if(ft=ut,ut===X){if(it===Z.y)return Z;if(it===Z.next.y)return Z.next}pt=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==k);if(!pt)return null;if(X===ft)return pt;var It=pt,Nt=pt.x,Rt=pt.y,Mt=Infinity,bt;Z=pt;do X>=Z.x&&Z.x>=Nt&&X!==Z.x&&b(it<Rt?X:ft,it,Nt,Rt,it<Rt?ft:X,it,Z.x,Z.y)&&(bt=Math.abs(it-Z.y)/(X-Z.x),P(Z,V)&&(bt<Mt||bt===Mt&&(Z.x>pt.x||Z.x===pt.x&&a(pt,Z)))&&(pt=Z,Mt=bt)),Z=Z.next;while(Z!==It);return pt}function a(V,k){return g(V.prev,V,k.prev)<0&&g(k.next,V,V.next)<0}function o(V,k,Z,X){var it=V;do it.z===null&&(it.z=f(it.x,it.y,k,Z,X)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next;while(it!==V);it.prevZ.nextZ=null,it.prevZ=null,u(it)}function u(V){var k,Z,X,it,ft,pt,ut,It,Nt=1;do{for(Z=V,V=null,ft=null,pt=0;Z;){for(pt++,X=Z,ut=0,k=0;k<Nt&&(ut++,X=X.nextZ,!!X);k++);for(It=Nt;ut>0||It>0&&X;)ut!==0&&(It===0||!X||Z.z<=X.z)?(it=Z,Z=Z.nextZ,ut--):(it=X,X=X.nextZ,It--),ft?ft.nextZ=it:V=it,it.prevZ=ft,ft=it;Z=X}ft.nextZ=null,Nt*=2}while(pt>1);return V}function f(V,k,Z,X,it){return V=32767*(V-Z)*it,k=32767*(k-X)*it,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,V|k<<1}function v(V){var k=V,Z=V;do(k.x<Z.x||k.x===Z.x&&k.y<Z.y)&&(Z=k),k=k.next;while(k!==V);return Z}function b(V,k,Z,X,it,ft,pt,ut){return(it-pt)*(k-ut)-(V-pt)*(ft-ut)>=0&&(V-pt)*(X-ut)-(Z-pt)*(k-ut)>=0&&(Z-pt)*(ft-ut)-(it-pt)*(X-ut)>=0}function y(V,k){return V.next.i!==k.i&&V.prev.i!==k.i&&!S(V,k)&&(P(V,k)&&P(k,V)&&A(V,k)&&(g(V.prev,V,k.prev)||g(V,k.prev,k))||_(V,k)&&g(V.prev,V,V.next)>0&&g(k.prev,k,k.next)>0)}function g(V,k,Z){return(k.y-V.y)*(Z.x-k.x)-(k.x-V.x)*(Z.y-k.y)}function _(V,k){return V.x===k.x&&V.y===k.y}function M(V,k,Z,X){var it=m(g(V,k,Z)),ft=m(g(V,k,X)),pt=m(g(Z,X,V)),ut=m(g(Z,X,k));return!!(it!==ft&&pt!==ut||it===0&&x(V,Z,k)||ft===0&&x(V,X,k)||pt===0&&x(Z,V,X)||ut===0&&x(Z,k,X))}function x(V,k,Z){return k.x<=Math.max(V.x,Z.x)&&k.x>=Math.min(V.x,Z.x)&&k.y<=Math.max(V.y,Z.y)&&k.y>=Math.min(V.y,Z.y)}function m(V){return V>0?1:V<0?-1:0}function S(V,k){var Z=V;do{if(Z.i!==V.i&&Z.next.i!==V.i&&Z.i!==k.i&&Z.next.i!==k.i&&M(Z,Z.next,V,k))return!0;Z=Z.next}while(Z!==V);return!1}function P(V,k){return g(V.prev,V,V.next)<0?g(V,k,V.next)>=0&&g(V,V.prev,k)>=0:g(V,k,V.prev)<0||g(V,V.next,k)<0}function A(V,k){var Z=V,X=!1,it=(V.x+k.x)/2,ft=(V.y+k.y)/2;do Z.y>ft!=Z.next.y>ft&&Z.next.y!==Z.y&&it<(Z.next.x-Z.x)*(ft-Z.y)/(Z.next.y-Z.y)+Z.x&&(X=!X),Z=Z.next;while(Z!==V);return X}function O(V,k){var Z=new F(V.i,V.x,V.y),X=new F(k.i,k.x,k.y),it=V.next,ft=k.prev;return V.next=k,k.prev=V,Z.next=it,it.prev=Z,X.next=Z,Z.prev=X,ft.next=X,X.prev=ft,X}function L(V,k,Z,X){var it=new F(V,k,Z);return X?(it.next=X.next,it.prev=X,X.next.prev=it,X.next=it):(it.prev=it,it.next=it),it}function W(V){V.next.prev=V.prev,V.prev.next=V.next,V.prevZ&&(V.prevZ.nextZ=V.nextZ),V.nextZ&&(V.nextZ.prevZ=V.prevZ)}function F(V,k,Z){this.i=V,this.x=k,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U.deviation=function(V,k,Z,X){var it=k&&k.length,ft=it?k[0]*Z:V.length,pt=Math.abs(K(V,0,ft,Z));if(it)for(var ut=0,It=k.length;ut<It;ut++){var Nt=k[ut]*Z,Rt=ut<It-1?k[ut+1]*Z:V.length;pt-=Math.abs(K(V,Nt,Rt,Z))}var Mt=0;for(ut=0;ut<X.length;ut+=3){var bt=X[ut]*Z,At=X[ut+1]*Z,rt=X[ut+2]*Z;Mt+=Math.abs((V[bt]-V[rt])*(V[At+1]-V[bt+1])-(V[bt]-V[At])*(V[rt+1]-V[bt+1]))}return pt===0&&Mt===0?0:Math.abs((Mt-pt)/pt)};function K(V,k,Z,X){for(var it=0,ft=k,pt=Z-X;ft<Z;ft+=X)it+=(V[pt]-V[ft])*(V[ft+1]+V[pt+1]),pt=ft;return it}U.flatten=function(V){for(var k=V[0][0].length,Z={vertices:[],holes:[],dimensions:k},X=0,it=0;it<V.length;it++){for(var ft=0;ft<V[it].length;ft++)for(var pt=0;pt<k;pt++)Z.vertices.push(V[it][ft][pt]);it>0&&(X+=V[it-1].length,Z.holes.push(X))}return Z}},W8MJ:function(Oe,mt){function R(E,T){for(var e=0;e<T.length;e++){var t=T[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(E,t.key,t)}}function U(E,T,e){return T&&R(E.prototype,T),e&&R(E,e),E}Oe.exports=U,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},WFAs:function(Oe,mt){var R=Array.isArray;Oe.exports=R},WwFo:function(Oe,mt,R){var U=R("juv8"),E=R("7GkX");function T(e,t){return e&&U(t,E(t),e)}Oe.exports=T},XYm9:function(Oe,mt,R){var U=R("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.byteLength)}Oe.exports=E},"Xt/L":function(Oe,mt){function R(U,E,T){for(var e=-1,t=U==null?0:U.length;++e<t;)if(T(E,U[e]))return!0;return!1}Oe.exports=R},Y8BV:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.filter(e)),E}},YO3V:function(Oe,mt,R){var U=R("NykK"),E=R("LcsW"),T=R("ExA7"),e="[object Object]",t=Function.prototype,l=Object.prototype,s=t.toString,c=l.hasOwnProperty,r=s.call(Object);function h(n){if(!T(n)||U(n)!=e)return!1;var i=E(n);if(i===null)return!0;var a=c.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&s.call(a)==r}Oe.exports=h},Yk9n:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.inject=mt.LazyServiceIdentifer=void 0;var U=R("MON2"),E=R("xfSm"),T=R("GXnB"),e=R("Ztfv"),t=function(){function s(c){this._cb=c}return s.prototype.unwrap=function(){return this._cb()},s}();mt.LazyServiceIdentifer=t;function l(s){return function(c,r,h){if(s===void 0)throw new Error(U.UNDEFINED_INJECT_ANNOTATION(c.name));var n=new T.Metadata(E.INJECT_TAG,s);typeof h=="number"?e.tagParameter(c,r,h,n):e.tagProperty(c,r,n)}}mt.inject=l},Z1HP:function(Oe,mt,R){var U=R("ycre"),E=R("quyA"),T=R("q4HE");function e(t){return E(t)?T(t):U(t)}Oe.exports=e},ZCgT:function(Oe,mt,R){var U=R("tLB3"),E=1/0,T=17976931348623157e292;function e(t){if(!t)return t===0?t:0;if(t=U(t),t===E||t===-E){var l=t<0?-1:1;return l*T}return t===t?t:0}Oe.exports=e},ZK94:function(Oe,mt){Oe.exports.RADIUS=6378137,Oe.exports.FLATTENING=1/298.257223563,Oe.exports.POLAR_RADIUS=63567523142e-4},ZaHm:function(Oe,mt,R){"use strict";R.r(mt),R.d(mt,"create",function(){return E}),R.d(mt,"clone",function(){return T}),R.d(mt,"copy",function(){return e}),R.d(mt,"fromValues",function(){return t}),R.d(mt,"set",function(){return l}),R.d(mt,"identity",function(){return s}),R.d(mt,"transpose",function(){return c}),R.d(mt,"invert",function(){return r}),R.d(mt,"adjoint",function(){return h}),R.d(mt,"determinant",function(){return n}),R.d(mt,"multiply",function(){return i}),R.d(mt,"translate",function(){return a}),R.d(mt,"scale",function(){return o}),R.d(mt,"rotate",function(){return u}),R.d(mt,"rotateX",function(){return f}),R.d(mt,"rotateY",function(){return v}),R.d(mt,"rotateZ",function(){return b}),R.d(mt,"fromTranslation",function(){return y}),R.d(mt,"fromScaling",function(){return g}),R.d(mt,"fromRotation",function(){return _}),R.d(mt,"fromXRotation",function(){return M}),R.d(mt,"fromYRotation",function(){return x}),R.d(mt,"fromZRotation",function(){return m}),R.d(mt,"fromRotationTranslation",function(){return S}),R.d(mt,"fromQuat2",function(){return P}),R.d(mt,"getTranslation",function(){return A}),R.d(mt,"getScaling",function(){return O}),R.d(mt,"getRotation",function(){return L}),R.d(mt,"fromRotationTranslationScale",function(){return W}),R.d(mt,"fromRotationTranslationScaleOrigin",function(){return F}),R.d(mt,"fromQuat",function(){return K}),R.d(mt,"frustum",function(){return V}),R.d(mt,"perspective",function(){return k}),R.d(mt,"perspectiveFromFieldOfView",function(){return Z}),R.d(mt,"ortho",function(){return X}),R.d(mt,"lookAt",function(){return it}),R.d(mt,"targetTo",function(){return ft}),R.d(mt,"str",function(){return pt}),R.d(mt,"frob",function(){return ut}),R.d(mt,"add",function(){return It}),R.d(mt,"subtract",function(){return Nt}),R.d(mt,"multiplyScalar",function(){return Rt}),R.d(mt,"multiplyScalarAndAdd",function(){return Mt}),R.d(mt,"exactEquals",function(){return bt}),R.d(mt,"equals",function(){return At}),R.d(mt,"mul",function(){return rt}),R.d(mt,"sub",function(){return Pt});var U=R("yU0y");function E(){var z=new U.a(16);return U.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function T(z){var Q=new U.a(16);return Q[0]=z[0],Q[1]=z[1],Q[2]=z[2],Q[3]=z[3],Q[4]=z[4],Q[5]=z[5],Q[6]=z[6],Q[7]=z[7],Q[8]=z[8],Q[9]=z[9],Q[10]=z[10],Q[11]=z[11],Q[12]=z[12],Q[13]=z[13],Q[14]=z[14],Q[15]=z[15],Q}function e(z,Q){return z[0]=Q[0],z[1]=Q[1],z[2]=Q[2],z[3]=Q[3],z[4]=Q[4],z[5]=Q[5],z[6]=Q[6],z[7]=Q[7],z[8]=Q[8],z[9]=Q[9],z[10]=Q[10],z[11]=Q[11],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15],z}function t(z,Q,gt,et,ot,xt,H,nt,at,q,_t,yt,Ft,Qt,ee,Vt){var $t=new U.a(16);return $t[0]=z,$t[1]=Q,$t[2]=gt,$t[3]=et,$t[4]=ot,$t[5]=xt,$t[6]=H,$t[7]=nt,$t[8]=at,$t[9]=q,$t[10]=_t,$t[11]=yt,$t[12]=Ft,$t[13]=Qt,$t[14]=ee,$t[15]=Vt,$t}function l(z,Q,gt,et,ot,xt,H,nt,at,q,_t,yt,Ft,Qt,ee,Vt,$t){return z[0]=Q,z[1]=gt,z[2]=et,z[3]=ot,z[4]=xt,z[5]=H,z[6]=nt,z[7]=at,z[8]=q,z[9]=_t,z[10]=yt,z[11]=Ft,z[12]=Qt,z[13]=ee,z[14]=Vt,z[15]=$t,z}function s(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function c(z,Q){if(z===Q){var gt=Q[1],et=Q[2],ot=Q[3],xt=Q[6],H=Q[7],nt=Q[11];z[1]=Q[4],z[2]=Q[8],z[3]=Q[12],z[4]=gt,z[6]=Q[9],z[7]=Q[13],z[8]=et,z[9]=xt,z[11]=Q[14],z[12]=ot,z[13]=H,z[14]=nt}else z[0]=Q[0],z[1]=Q[4],z[2]=Q[8],z[3]=Q[12],z[4]=Q[1],z[5]=Q[5],z[6]=Q[9],z[7]=Q[13],z[8]=Q[2],z[9]=Q[6],z[10]=Q[10],z[11]=Q[14],z[12]=Q[3],z[13]=Q[7],z[14]=Q[11],z[15]=Q[15];return z}function r(z,Q){var gt=Q[0],et=Q[1],ot=Q[2],xt=Q[3],H=Q[4],nt=Q[5],at=Q[6],q=Q[7],_t=Q[8],yt=Q[9],Ft=Q[10],Qt=Q[11],ee=Q[12],Vt=Q[13],$t=Q[14],Me=Q[15],me=gt*nt-et*H,le=gt*at-ot*H,be=gt*q-xt*H,ze=et*at-ot*nt,Xe=et*q-xt*nt,Sn=ot*q-xt*at,Xn=_t*Vt-yt*ee,Hn=_t*$t-Ft*ee,nn=_t*Me-Qt*ee,en=yt*$t-Ft*Vt,An=yt*Me-Qt*Vt,Nn=Ft*Me-Qt*$t,fr=me*Nn-le*An+be*en+ze*nn-Xe*Hn+Sn*Xn;return fr?(fr=1/fr,z[0]=(nt*Nn-at*An+q*en)*fr,z[1]=(ot*An-et*Nn-xt*en)*fr,z[2]=(Vt*Sn-$t*Xe+Me*ze)*fr,z[3]=(Ft*Xe-yt*Sn-Qt*ze)*fr,z[4]=(at*nn-H*Nn-q*Hn)*fr,z[5]=(gt*Nn-ot*nn+xt*Hn)*fr,z[6]=($t*be-ee*Sn-Me*le)*fr,z[7]=(_t*Sn-Ft*be+Qt*le)*fr,z[8]=(H*An-nt*nn+q*Xn)*fr,z[9]=(et*nn-gt*An-xt*Xn)*fr,z[10]=(ee*Xe-Vt*be+Me*me)*fr,z[11]=(yt*be-_t*Xe-Qt*me)*fr,z[12]=(nt*Hn-H*en-at*Xn)*fr,z[13]=(gt*en-et*Hn+ot*Xn)*fr,z[14]=(Vt*le-ee*ze-$t*me)*fr,z[15]=(_t*ze-yt*le+Ft*me)*fr,z):null}function h(z,Q){var gt=Q[0],et=Q[1],ot=Q[2],xt=Q[3],H=Q[4],nt=Q[5],at=Q[6],q=Q[7],_t=Q[8],yt=Q[9],Ft=Q[10],Qt=Q[11],ee=Q[12],Vt=Q[13],$t=Q[14],Me=Q[15];return z[0]=nt*(Ft*Me-Qt*$t)-yt*(at*Me-q*$t)+Vt*(at*Qt-q*Ft),z[1]=-(et*(Ft*Me-Qt*$t)-yt*(ot*Me-xt*$t)+Vt*(ot*Qt-xt*Ft)),z[2]=et*(at*Me-q*$t)-nt*(ot*Me-xt*$t)+Vt*(ot*q-xt*at),z[3]=-(et*(at*Qt-q*Ft)-nt*(ot*Qt-xt*Ft)+yt*(ot*q-xt*at)),z[4]=-(H*(Ft*Me-Qt*$t)-_t*(at*Me-q*$t)+ee*(at*Qt-q*Ft)),z[5]=gt*(Ft*Me-Qt*$t)-_t*(ot*Me-xt*$t)+ee*(ot*Qt-xt*Ft),z[6]=-(gt*(at*Me-q*$t)-H*(ot*Me-xt*$t)+ee*(ot*q-xt*at)),z[7]=gt*(at*Qt-q*Ft)-H*(ot*Qt-xt*Ft)+_t*(ot*q-xt*at),z[8]=H*(yt*Me-Qt*Vt)-_t*(nt*Me-q*Vt)+ee*(nt*Qt-q*yt),z[9]=-(gt*(yt*Me-Qt*Vt)-_t*(et*Me-xt*Vt)+ee*(et*Qt-xt*yt)),z[10]=gt*(nt*Me-q*Vt)-H*(et*Me-xt*Vt)+ee*(et*q-xt*nt),z[11]=-(gt*(nt*Qt-q*yt)-H*(et*Qt-xt*yt)+_t*(et*q-xt*nt)),z[12]=-(H*(yt*$t-Ft*Vt)-_t*(nt*$t-at*Vt)+ee*(nt*Ft-at*yt)),z[13]=gt*(yt*$t-Ft*Vt)-_t*(et*$t-ot*Vt)+ee*(et*Ft-ot*yt),z[14]=-(gt*(nt*$t-at*Vt)-H*(et*$t-ot*Vt)+ee*(et*at-ot*nt)),z[15]=gt*(nt*Ft-at*yt)-H*(et*Ft-ot*yt)+_t*(et*at-ot*nt),z}function n(z){var Q=z[0],gt=z[1],et=z[2],ot=z[3],xt=z[4],H=z[5],nt=z[6],at=z[7],q=z[8],_t=z[9],yt=z[10],Ft=z[11],Qt=z[12],ee=z[13],Vt=z[14],$t=z[15],Me=Q*H-gt*xt,me=Q*nt-et*xt,le=Q*at-ot*xt,be=gt*nt-et*H,ze=gt*at-ot*H,Xe=et*at-ot*nt,Sn=q*ee-_t*Qt,Xn=q*Vt-yt*Qt,Hn=q*$t-Ft*Qt,nn=_t*Vt-yt*ee,en=_t*$t-Ft*ee,An=yt*$t-Ft*Vt;return Me*An-me*en+le*nn+be*Hn-ze*Xn+Xe*Sn}function i(z,Q,gt){var et=Q[0],ot=Q[1],xt=Q[2],H=Q[3],nt=Q[4],at=Q[5],q=Q[6],_t=Q[7],yt=Q[8],Ft=Q[9],Qt=Q[10],ee=Q[11],Vt=Q[12],$t=Q[13],Me=Q[14],me=Q[15],le=gt[0],be=gt[1],ze=gt[2],Xe=gt[3];return z[0]=le*et+be*nt+ze*yt+Xe*Vt,z[1]=le*ot+be*at+ze*Ft+Xe*$t,z[2]=le*xt+be*q+ze*Qt+Xe*Me,z[3]=le*H+be*_t+ze*ee+Xe*me,le=gt[4],be=gt[5],ze=gt[6],Xe=gt[7],z[4]=le*et+be*nt+ze*yt+Xe*Vt,z[5]=le*ot+be*at+ze*Ft+Xe*$t,z[6]=le*xt+be*q+ze*Qt+Xe*Me,z[7]=le*H+be*_t+ze*ee+Xe*me,le=gt[8],be=gt[9],ze=gt[10],Xe=gt[11],z[8]=le*et+be*nt+ze*yt+Xe*Vt,z[9]=le*ot+be*at+ze*Ft+Xe*$t,z[10]=le*xt+be*q+ze*Qt+Xe*Me,z[11]=le*H+be*_t+ze*ee+Xe*me,le=gt[12],be=gt[13],ze=gt[14],Xe=gt[15],z[12]=le*et+be*nt+ze*yt+Xe*Vt,z[13]=le*ot+be*at+ze*Ft+Xe*$t,z[14]=le*xt+be*q+ze*Qt+Xe*Me,z[15]=le*H+be*_t+ze*ee+Xe*me,z}function a(z,Q,gt){var et=gt[0],ot=gt[1],xt=gt[2],H,nt,at,q,_t,yt,Ft,Qt,ee,Vt,$t,Me;return Q===z?(z[12]=Q[0]*et+Q[4]*ot+Q[8]*xt+Q[12],z[13]=Q[1]*et+Q[5]*ot+Q[9]*xt+Q[13],z[14]=Q[2]*et+Q[6]*ot+Q[10]*xt+Q[14],z[15]=Q[3]*et+Q[7]*ot+Q[11]*xt+Q[15]):(H=Q[0],nt=Q[1],at=Q[2],q=Q[3],_t=Q[4],yt=Q[5],Ft=Q[6],Qt=Q[7],ee=Q[8],Vt=Q[9],$t=Q[10],Me=Q[11],z[0]=H,z[1]=nt,z[2]=at,z[3]=q,z[4]=_t,z[5]=yt,z[6]=Ft,z[7]=Qt,z[8]=ee,z[9]=Vt,z[10]=$t,z[11]=Me,z[12]=H*et+_t*ot+ee*xt+Q[12],z[13]=nt*et+yt*ot+Vt*xt+Q[13],z[14]=at*et+Ft*ot+$t*xt+Q[14],z[15]=q*et+Qt*ot+Me*xt+Q[15]),z}function o(z,Q,gt){var et=gt[0],ot=gt[1],xt=gt[2];return z[0]=Q[0]*et,z[1]=Q[1]*et,z[2]=Q[2]*et,z[3]=Q[3]*et,z[4]=Q[4]*ot,z[5]=Q[5]*ot,z[6]=Q[6]*ot,z[7]=Q[7]*ot,z[8]=Q[8]*xt,z[9]=Q[9]*xt,z[10]=Q[10]*xt,z[11]=Q[11]*xt,z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15],z}function u(z,Q,gt,et){var ot=et[0],xt=et[1],H=et[2],nt=Math.hypot(ot,xt,H),at,q,_t,yt,Ft,Qt,ee,Vt,$t,Me,me,le,be,ze,Xe,Sn,Xn,Hn,nn,en,An,Nn,fr,hi;return nt<U.b?null:(nt=1/nt,ot*=nt,xt*=nt,H*=nt,at=Math.sin(gt),q=Math.cos(gt),_t=1-q,yt=Q[0],Ft=Q[1],Qt=Q[2],ee=Q[3],Vt=Q[4],$t=Q[5],Me=Q[6],me=Q[7],le=Q[8],be=Q[9],ze=Q[10],Xe=Q[11],Sn=ot*ot*_t+q,Xn=xt*ot*_t+H*at,Hn=H*ot*_t-xt*at,nn=ot*xt*_t-H*at,en=xt*xt*_t+q,An=H*xt*_t+ot*at,Nn=ot*H*_t+xt*at,fr=xt*H*_t-ot*at,hi=H*H*_t+q,z[0]=yt*Sn+Vt*Xn+le*Hn,z[1]=Ft*Sn+$t*Xn+be*Hn,z[2]=Qt*Sn+Me*Xn+ze*Hn,z[3]=ee*Sn+me*Xn+Xe*Hn,z[4]=yt*nn+Vt*en+le*An,z[5]=Ft*nn+$t*en+be*An,z[6]=Qt*nn+Me*en+ze*An,z[7]=ee*nn+me*en+Xe*An,z[8]=yt*Nn+Vt*fr+le*hi,z[9]=Ft*Nn+$t*fr+be*hi,z[10]=Qt*Nn+Me*fr+ze*hi,z[11]=ee*Nn+me*fr+Xe*hi,Q!==z&&(z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z)}function f(z,Q,gt){var et=Math.sin(gt),ot=Math.cos(gt),xt=Q[4],H=Q[5],nt=Q[6],at=Q[7],q=Q[8],_t=Q[9],yt=Q[10],Ft=Q[11];return Q!==z&&(z[0]=Q[0],z[1]=Q[1],z[2]=Q[2],z[3]=Q[3],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[4]=xt*ot+q*et,z[5]=H*ot+_t*et,z[6]=nt*ot+yt*et,z[7]=at*ot+Ft*et,z[8]=q*ot-xt*et,z[9]=_t*ot-H*et,z[10]=yt*ot-nt*et,z[11]=Ft*ot-at*et,z}function v(z,Q,gt){var et=Math.sin(gt),ot=Math.cos(gt),xt=Q[0],H=Q[1],nt=Q[2],at=Q[3],q=Q[8],_t=Q[9],yt=Q[10],Ft=Q[11];return Q!==z&&(z[4]=Q[4],z[5]=Q[5],z[6]=Q[6],z[7]=Q[7],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[0]=xt*ot-q*et,z[1]=H*ot-_t*et,z[2]=nt*ot-yt*et,z[3]=at*ot-Ft*et,z[8]=xt*et+q*ot,z[9]=H*et+_t*ot,z[10]=nt*et+yt*ot,z[11]=at*et+Ft*ot,z}function b(z,Q,gt){var et=Math.sin(gt),ot=Math.cos(gt),xt=Q[0],H=Q[1],nt=Q[2],at=Q[3],q=Q[4],_t=Q[5],yt=Q[6],Ft=Q[7];return Q!==z&&(z[8]=Q[8],z[9]=Q[9],z[10]=Q[10],z[11]=Q[11],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[0]=xt*ot+q*et,z[1]=H*ot+_t*et,z[2]=nt*ot+yt*et,z[3]=at*ot+Ft*et,z[4]=q*ot-xt*et,z[5]=_t*ot-H*et,z[6]=yt*ot-nt*et,z[7]=Ft*ot-at*et,z}function y(z,Q){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=Q[0],z[13]=Q[1],z[14]=Q[2],z[15]=1,z}function g(z,Q){return z[0]=Q[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=Q[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=Q[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function _(z,Q,gt){var et=gt[0],ot=gt[1],xt=gt[2],H=Math.hypot(et,ot,xt),nt,at,q;return H<U.b?null:(H=1/H,et*=H,ot*=H,xt*=H,nt=Math.sin(Q),at=Math.cos(Q),q=1-at,z[0]=et*et*q+at,z[1]=ot*et*q+xt*nt,z[2]=xt*et*q-ot*nt,z[3]=0,z[4]=et*ot*q-xt*nt,z[5]=ot*ot*q+at,z[6]=xt*ot*q+et*nt,z[7]=0,z[8]=et*xt*q+ot*nt,z[9]=ot*xt*q-et*nt,z[10]=xt*xt*q+at,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function M(z,Q){var gt=Math.sin(Q),et=Math.cos(Q);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=et,z[6]=gt,z[7]=0,z[8]=0,z[9]=-gt,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function x(z,Q){var gt=Math.sin(Q),et=Math.cos(Q);return z[0]=et,z[1]=0,z[2]=-gt,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=gt,z[9]=0,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function m(z,Q){var gt=Math.sin(Q),et=Math.cos(Q);return z[0]=et,z[1]=gt,z[2]=0,z[3]=0,z[4]=-gt,z[5]=et,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function S(z,Q,gt){var et=Q[0],ot=Q[1],xt=Q[2],H=Q[3],nt=et+et,at=ot+ot,q=xt+xt,_t=et*nt,yt=et*at,Ft=et*q,Qt=ot*at,ee=ot*q,Vt=xt*q,$t=H*nt,Me=H*at,me=H*q;return z[0]=1-(Qt+Vt),z[1]=yt+me,z[2]=Ft-Me,z[3]=0,z[4]=yt-me,z[5]=1-(_t+Vt),z[6]=ee+$t,z[7]=0,z[8]=Ft+Me,z[9]=ee-$t,z[10]=1-(_t+Qt),z[11]=0,z[12]=gt[0],z[13]=gt[1],z[14]=gt[2],z[15]=1,z}function P(z,Q){var gt=new U.a(3),et=-Q[0],ot=-Q[1],xt=-Q[2],H=Q[3],nt=Q[4],at=Q[5],q=Q[6],_t=Q[7],yt=et*et+ot*ot+xt*xt+H*H;return yt>0?(gt[0]=(nt*H+_t*et+at*xt-q*ot)*2/yt,gt[1]=(at*H+_t*ot+q*et-nt*xt)*2/yt,gt[2]=(q*H+_t*xt+nt*ot-at*et)*2/yt):(gt[0]=(nt*H+_t*et+at*xt-q*ot)*2,gt[1]=(at*H+_t*ot+q*et-nt*xt)*2,gt[2]=(q*H+_t*xt+nt*ot-at*et)*2),S(z,Q,gt),z}function A(z,Q){return z[0]=Q[12],z[1]=Q[13],z[2]=Q[14],z}function O(z,Q){var gt=Q[0],et=Q[1],ot=Q[2],xt=Q[4],H=Q[5],nt=Q[6],at=Q[8],q=Q[9],_t=Q[10];return z[0]=Math.hypot(gt,et,ot),z[1]=Math.hypot(xt,H,nt),z[2]=Math.hypot(at,q,_t),z}function L(z,Q){var gt=new U.a(3);O(gt,Q);var et=1/gt[0],ot=1/gt[1],xt=1/gt[2],H=Q[0]*et,nt=Q[1]*ot,at=Q[2]*xt,q=Q[4]*et,_t=Q[5]*ot,yt=Q[6]*xt,Ft=Q[8]*et,Qt=Q[9]*ot,ee=Q[10]*xt,Vt=H+_t+ee,$t=0;return Vt>0?($t=Math.sqrt(Vt+1)*2,z[3]=.25*$t,z[0]=(yt-Qt)/$t,z[1]=(Ft-at)/$t,z[2]=(nt-q)/$t):H>_t&&H>ee?($t=Math.sqrt(1+H-_t-ee)*2,z[3]=(yt-Qt)/$t,z[0]=.25*$t,z[1]=(nt+q)/$t,z[2]=(Ft+at)/$t):_t>ee?($t=Math.sqrt(1+_t-H-ee)*2,z[3]=(Ft-at)/$t,z[0]=(nt+q)/$t,z[1]=.25*$t,z[2]=(yt+Qt)/$t):($t=Math.sqrt(1+ee-H-_t)*2,z[3]=(nt-q)/$t,z[0]=(Ft+at)/$t,z[1]=(yt+Qt)/$t,z[2]=.25*$t),z}function W(z,Q,gt,et){var ot=Q[0],xt=Q[1],H=Q[2],nt=Q[3],at=ot+ot,q=xt+xt,_t=H+H,yt=ot*at,Ft=ot*q,Qt=ot*_t,ee=xt*q,Vt=xt*_t,$t=H*_t,Me=nt*at,me=nt*q,le=nt*_t,be=et[0],ze=et[1],Xe=et[2];return z[0]=(1-(ee+$t))*be,z[1]=(Ft+le)*be,z[2]=(Qt-me)*be,z[3]=0,z[4]=(Ft-le)*ze,z[5]=(1-(yt+$t))*ze,z[6]=(Vt+Me)*ze,z[7]=0,z[8]=(Qt+me)*Xe,z[9]=(Vt-Me)*Xe,z[10]=(1-(yt+ee))*Xe,z[11]=0,z[12]=gt[0],z[13]=gt[1],z[14]=gt[2],z[15]=1,z}function F(z,Q,gt,et,ot){var xt=Q[0],H=Q[1],nt=Q[2],at=Q[3],q=xt+xt,_t=H+H,yt=nt+nt,Ft=xt*q,Qt=xt*_t,ee=xt*yt,Vt=H*_t,$t=H*yt,Me=nt*yt,me=at*q,le=at*_t,be=at*yt,ze=et[0],Xe=et[1],Sn=et[2],Xn=ot[0],Hn=ot[1],nn=ot[2],en=(1-(Vt+Me))*ze,An=(Qt+be)*ze,Nn=(ee-le)*ze,fr=(Qt-be)*Xe,hi=(1-(Ft+Me))*Xe,Ce=($t+me)*Xe,Te=(ee+le)*Sn,Jt=($t-me)*Sn,pe=(1-(Ft+Vt))*Sn;return z[0]=en,z[1]=An,z[2]=Nn,z[3]=0,z[4]=fr,z[5]=hi,z[6]=Ce,z[7]=0,z[8]=Te,z[9]=Jt,z[10]=pe,z[11]=0,z[12]=gt[0]+Xn-(en*Xn+fr*Hn+Te*nn),z[13]=gt[1]+Hn-(An*Xn+hi*Hn+Jt*nn),z[14]=gt[2]+nn-(Nn*Xn+Ce*Hn+pe*nn),z[15]=1,z}function K(z,Q){var gt=Q[0],et=Q[1],ot=Q[2],xt=Q[3],H=gt+gt,nt=et+et,at=ot+ot,q=gt*H,_t=et*H,yt=et*nt,Ft=ot*H,Qt=ot*nt,ee=ot*at,Vt=xt*H,$t=xt*nt,Me=xt*at;return z[0]=1-yt-ee,z[1]=_t+Me,z[2]=Ft-$t,z[3]=0,z[4]=_t-Me,z[5]=1-q-ee,z[6]=Qt+Vt,z[7]=0,z[8]=Ft+$t,z[9]=Qt-Vt,z[10]=1-q-yt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function V(z,Q,gt,et,ot,xt,H){var nt=1/(gt-Q),at=1/(ot-et),q=1/(xt-H);return z[0]=xt*2*nt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=xt*2*at,z[6]=0,z[7]=0,z[8]=(gt+Q)*nt,z[9]=(ot+et)*at,z[10]=(H+xt)*q,z[11]=-1,z[12]=0,z[13]=0,z[14]=H*xt*2*q,z[15]=0,z}function k(z,Q,gt,et,ot){var xt=1/Math.tan(Q/2),H;return z[0]=xt/gt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=xt,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,ot!=null&&ot!==Infinity?(H=1/(et-ot),z[10]=(ot+et)*H,z[14]=2*ot*et*H):(z[10]=-1,z[14]=-2*et),z}function Z(z,Q,gt,et){var ot=Math.tan(Q.upDegrees*Math.PI/180),xt=Math.tan(Q.downDegrees*Math.PI/180),H=Math.tan(Q.leftDegrees*Math.PI/180),nt=Math.tan(Q.rightDegrees*Math.PI/180),at=2/(H+nt),q=2/(ot+xt);return z[0]=at,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q,z[6]=0,z[7]=0,z[8]=-((H-nt)*at*.5),z[9]=(ot-xt)*q*.5,z[10]=et/(gt-et),z[11]=-1,z[12]=0,z[13]=0,z[14]=et*gt/(gt-et),z[15]=0,z}function X(z,Q,gt,et,ot,xt,H){var nt=1/(Q-gt),at=1/(et-ot),q=1/(xt-H);return z[0]=-2*nt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*at,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*q,z[11]=0,z[12]=(Q+gt)*nt,z[13]=(ot+et)*at,z[14]=(H+xt)*q,z[15]=1,z}function it(z,Q,gt,et){var ot,xt,H,nt,at,q,_t,yt,Ft,Qt,ee=Q[0],Vt=Q[1],$t=Q[2],Me=et[0],me=et[1],le=et[2],be=gt[0],ze=gt[1],Xe=gt[2];return Math.abs(ee-be)<U.b&&Math.abs(Vt-ze)<U.b&&Math.abs($t-Xe)<U.b?s(z):(_t=ee-be,yt=Vt-ze,Ft=$t-Xe,Qt=1/Math.hypot(_t,yt,Ft),_t*=Qt,yt*=Qt,Ft*=Qt,ot=me*Ft-le*yt,xt=le*_t-Me*Ft,H=Me*yt-me*_t,Qt=Math.hypot(ot,xt,H),Qt?(Qt=1/Qt,ot*=Qt,xt*=Qt,H*=Qt):(ot=0,xt=0,H=0),nt=yt*H-Ft*xt,at=Ft*ot-_t*H,q=_t*xt-yt*ot,Qt=Math.hypot(nt,at,q),Qt?(Qt=1/Qt,nt*=Qt,at*=Qt,q*=Qt):(nt=0,at=0,q=0),z[0]=ot,z[1]=nt,z[2]=_t,z[3]=0,z[4]=xt,z[5]=at,z[6]=yt,z[7]=0,z[8]=H,z[9]=q,z[10]=Ft,z[11]=0,z[12]=-(ot*ee+xt*Vt+H*$t),z[13]=-(nt*ee+at*Vt+q*$t),z[14]=-(_t*ee+yt*Vt+Ft*$t),z[15]=1,z)}function ft(z,Q,gt,et){var ot=Q[0],xt=Q[1],H=Q[2],nt=et[0],at=et[1],q=et[2],_t=ot-gt[0],yt=xt-gt[1],Ft=H-gt[2],Qt=_t*_t+yt*yt+Ft*Ft;Qt>0&&(Qt=1/Math.sqrt(Qt),_t*=Qt,yt*=Qt,Ft*=Qt);var ee=at*Ft-q*yt,Vt=q*_t-nt*Ft,$t=nt*yt-at*_t;return Qt=ee*ee+Vt*Vt+$t*$t,Qt>0&&(Qt=1/Math.sqrt(Qt),ee*=Qt,Vt*=Qt,$t*=Qt),z[0]=ee,z[1]=Vt,z[2]=$t,z[3]=0,z[4]=yt*$t-Ft*Vt,z[5]=Ft*ee-_t*$t,z[6]=_t*Vt-yt*ee,z[7]=0,z[8]=_t,z[9]=yt,z[10]=Ft,z[11]=0,z[12]=ot,z[13]=xt,z[14]=H,z[15]=1,z}function pt(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function ut(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function It(z,Q,gt){return z[0]=Q[0]+gt[0],z[1]=Q[1]+gt[1],z[2]=Q[2]+gt[2],z[3]=Q[3]+gt[3],z[4]=Q[4]+gt[4],z[5]=Q[5]+gt[5],z[6]=Q[6]+gt[6],z[7]=Q[7]+gt[7],z[8]=Q[8]+gt[8],z[9]=Q[9]+gt[9],z[10]=Q[10]+gt[10],z[11]=Q[11]+gt[11],z[12]=Q[12]+gt[12],z[13]=Q[13]+gt[13],z[14]=Q[14]+gt[14],z[15]=Q[15]+gt[15],z}function Nt(z,Q,gt){return z[0]=Q[0]-gt[0],z[1]=Q[1]-gt[1],z[2]=Q[2]-gt[2],z[3]=Q[3]-gt[3],z[4]=Q[4]-gt[4],z[5]=Q[5]-gt[5],z[6]=Q[6]-gt[6],z[7]=Q[7]-gt[7],z[8]=Q[8]-gt[8],z[9]=Q[9]-gt[9],z[10]=Q[10]-gt[10],z[11]=Q[11]-gt[11],z[12]=Q[12]-gt[12],z[13]=Q[13]-gt[13],z[14]=Q[14]-gt[14],z[15]=Q[15]-gt[15],z}function Rt(z,Q,gt){return z[0]=Q[0]*gt,z[1]=Q[1]*gt,z[2]=Q[2]*gt,z[3]=Q[3]*gt,z[4]=Q[4]*gt,z[5]=Q[5]*gt,z[6]=Q[6]*gt,z[7]=Q[7]*gt,z[8]=Q[8]*gt,z[9]=Q[9]*gt,z[10]=Q[10]*gt,z[11]=Q[11]*gt,z[12]=Q[12]*gt,z[13]=Q[13]*gt,z[14]=Q[14]*gt,z[15]=Q[15]*gt,z}function Mt(z,Q,gt,et){return z[0]=Q[0]+gt[0]*et,z[1]=Q[1]+gt[1]*et,z[2]=Q[2]+gt[2]*et,z[3]=Q[3]+gt[3]*et,z[4]=Q[4]+gt[4]*et,z[5]=Q[5]+gt[5]*et,z[6]=Q[6]+gt[6]*et,z[7]=Q[7]+gt[7]*et,z[8]=Q[8]+gt[8]*et,z[9]=Q[9]+gt[9]*et,z[10]=Q[10]+gt[10]*et,z[11]=Q[11]+gt[11]*et,z[12]=Q[12]+gt[12]*et,z[13]=Q[13]+gt[13]*et,z[14]=Q[14]+gt[14]*et,z[15]=Q[15]+gt[15]*et,z}function bt(z,Q){return z[0]===Q[0]&&z[1]===Q[1]&&z[2]===Q[2]&&z[3]===Q[3]&&z[4]===Q[4]&&z[5]===Q[5]&&z[6]===Q[6]&&z[7]===Q[7]&&z[8]===Q[8]&&z[9]===Q[9]&&z[10]===Q[10]&&z[11]===Q[11]&&z[12]===Q[12]&&z[13]===Q[13]&&z[14]===Q[14]&&z[15]===Q[15]}function At(z,Q){var gt=z[0],et=z[1],ot=z[2],xt=z[3],H=z[4],nt=z[5],at=z[6],q=z[7],_t=z[8],yt=z[9],Ft=z[10],Qt=z[11],ee=z[12],Vt=z[13],$t=z[14],Me=z[15],me=Q[0],le=Q[1],be=Q[2],ze=Q[3],Xe=Q[4],Sn=Q[5],Xn=Q[6],Hn=Q[7],nn=Q[8],en=Q[9],An=Q[10],Nn=Q[11],fr=Q[12],hi=Q[13],Ce=Q[14],Te=Q[15];return Math.abs(gt-me)<=U.b*Math.max(1,Math.abs(gt),Math.abs(me))&&Math.abs(et-le)<=U.b*Math.max(1,Math.abs(et),Math.abs(le))&&Math.abs(ot-be)<=U.b*Math.max(1,Math.abs(ot),Math.abs(be))&&Math.abs(xt-ze)<=U.b*Math.max(1,Math.abs(xt),Math.abs(ze))&&Math.abs(H-Xe)<=U.b*Math.max(1,Math.abs(H),Math.abs(Xe))&&Math.abs(nt-Sn)<=U.b*Math.max(1,Math.abs(nt),Math.abs(Sn))&&Math.abs(at-Xn)<=U.b*Math.max(1,Math.abs(at),Math.abs(Xn))&&Math.abs(q-Hn)<=U.b*Math.max(1,Math.abs(q),Math.abs(Hn))&&Math.abs(_t-nn)<=U.b*Math.max(1,Math.abs(_t),Math.abs(nn))&&Math.abs(yt-en)<=U.b*Math.max(1,Math.abs(yt),Math.abs(en))&&Math.abs(Ft-An)<=U.b*Math.max(1,Math.abs(Ft),Math.abs(An))&&Math.abs(Qt-Nn)<=U.b*Math.max(1,Math.abs(Qt),Math.abs(Nn))&&Math.abs(ee-fr)<=U.b*Math.max(1,Math.abs(ee),Math.abs(fr))&&Math.abs(Vt-hi)<=U.b*Math.max(1,Math.abs(Vt),Math.abs(hi))&&Math.abs($t-Ce)<=U.b*Math.max(1,Math.abs($t),Math.abs(Ce))&&Math.abs(Me-Te)<=U.b*Math.max(1,Math.abs(Me),Math.abs(Te))}var rt=i,Pt=Nt},ZhIB:function(Oe,mt,R){var U,E;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(T,e){U=e,E=typeof U=="function"?U.call(mt,R,mt,Oe):U,E!==void 0&&(Oe.exports=E)})(this,function(){var T,e,t="2.0.6",l={},s={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},r={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function h(n,i){this._input=n,this._value=i}return T=function(i){var a,o,u,f;if(T.isNumeral(i))a=i.value();else if(i===0||typeof i=="undefined")a=0;else if(i===null||e.isNaN(i))a=null;else if(typeof i=="string")if(r.zeroFormat&&i===r.zeroFormat)a=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)a=null;else{for(o in l)if(f=typeof l[o].regexps.unformat=="function"?l[o].regexps.unformat():l[o].regexps.unformat,f&&i.match(f)){u=l[o].unformat;break}u=u||T._.stringToNumber,a=u(i)}else a=Number(i)||null;return new h(i,a)},T.version=t,T.isNumeral=function(n){return n instanceof h},T._=e={numberToFormat:function(i,a,o){var u=s[T.options.currentLocale],f=!1,v=!1,b=0,y="",g=1e12,_=1e9,M=1e6,x=1e3,m="",S=!1,P,A,O,L,W,F,K,V,k,Z;if(i=i||0,A=Math.abs(i),T._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(T._.includes(a,"+")||T._.includes(a,"-"))&&(V=T._.includes(a,"+")?a.indexOf("+"):i<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),T._.includes(a,"a")&&(P=a.match(/a(k|m|b|t)?/),P=P?P[1]:!1,T._.includes(a," a")&&(y=" "),a=a.replace(new RegExp(y+"a[kmbt]?"),""),A>=g&&!P||P==="t"?(y+=u.abbreviations.trillion,i=i/g):A<g&&A>=_&&!P||P==="b"?(y+=u.abbreviations.billion,i=i/_):A<_&&A>=M&&!P||P==="m"?(y+=u.abbreviations.million,i=i/M):(A<M&&A>=x&&!P||P==="k")&&(y+=u.abbreviations.thousand,i=i/x)),T._.includes(a,"[.]")&&(v=!0,a=a.replace("[.]",".")),F=i.toString().split(".")[0],K=a.split(".")[1],k=a.indexOf(","),b=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,K?(T._.includes(K,"[")?(K=K.replace("]",""),K=K.split("["),m=T._.toFixed(i,K[0].length+K[1].length,o,K[1].length)):m=T._.toFixed(i,K.length,o),F=m.split(".")[0],T._.includes(m,".")?m=u.delimiters.decimal+m.split(".")[1]:m="",v&&Number(m.slice(1))===0&&(m="")):F=T._.toFixed(i,0,o),y&&!P&&Number(F)>=1e3&&y!==u.abbreviations.trillion)switch(F=String(Number(F)/1e3),y){case u.abbreviations.thousand:y=u.abbreviations.million;break;case u.abbreviations.million:y=u.abbreviations.billion;break;case u.abbreviations.billion:y=u.abbreviations.trillion;break}if(T._.includes(F,"-")&&(F=F.slice(1),S=!0),F.length<b)for(var X=b-F.length;X>0;X--)F="0"+F;return k>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+u.delimiters.thousands)),a.indexOf(".")===0&&(F=""),Z=F+m+(y||""),f?Z=(f&&S?"(":"")+Z+(f&&S?")":""):V>=0?Z=V===0?(S?"-":"+")+Z:Z+(S?"-":"+"):S&&(Z="-"+Z),Z},stringToNumber:function(i){var a=s[r.currentLocale],o=i,u={thousand:3,million:6,billion:9,trillion:12},f,v,b,y;if(r.zeroFormat&&i===r.zeroFormat)v=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)v=null;else{v=1,a.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(f in u)if(y=new RegExp("[^a-zA-Z]"+a.abbreviations[f]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),o.match(y)){v*=Math.pow(10,u[f]);break}v*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),v*=Number(i)}return v},isNaN:function(n){function i(a){return n.apply(this,arguments)}return i.toString=function(){return n.toString()},i}(function(n){return typeof n=="number"&&isNaN(n)}),includes:function(i,a){return i.indexOf(a)!==-1},insert:function(i,a,o){return i.slice(0,o)+a+i.slice(o)},reduce:function(i,a){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof a!="function")throw new TypeError(a+" is not a function");var o=Object(i),u=o.length>>>0,f=0,v;if(arguments.length===3)v=arguments[2];else{for(;f<u&&!(f in o);)f++;if(f>=u)throw new TypeError("Reduce of empty array with no initial value");v=o[f++]}for(;f<u;f++)f in o&&(v=a(v,o[f],f,o));return v},multiplier:function(i){var a=i.toString().split(".");return a.length<2?1:Math.pow(10,a[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(a,o){var u=e.multiplier(o);return a>u?a:u},1)},toFixed:function(i,a,o,u){var f=i.toString().split("."),v=a-(u||0),b,y,g,_;return f.length===2?b=Math.min(Math.max(f[1].length,v),a):b=v,g=Math.pow(10,b),_=(o(i+"e+"+b)/g).toFixed(b),u>a-b&&(y=new RegExp("\\.?0{1,"+(u-(a-b))+"}$"),_=_.replace(y,"")),_}},T.options=r,T.formats=l,T.locales=s,T.locale=function(n){return n&&(r.currentLocale=n.toLowerCase()),r.currentLocale},T.localeData=function(n){if(!n)return s[r.currentLocale];if(n=n.toLowerCase(),!s[n])throw new Error("Unknown locale : "+n);return s[n]},T.reset=function(){for(var n in c)r[n]=c[n]},T.zeroFormat=function(n){r.zeroFormat=typeof n=="string"?n:null},T.nullFormat=function(n){r.nullFormat=typeof n=="string"?n:null},T.defaultFormat=function(n){r.defaultFormat=typeof n=="string"?n:"0.0"},T.register=function(n,i,a){if(i=i.toLowerCase(),this[n+"s"][i])throw new TypeError(i+" "+n+" already registered.");return this[n+"s"][i]=a,a},T.validate=function(n,i){var a,o,u,f,v,b,y,g;if(typeof n!="string"&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),n=n.trim(),n.match(/^\d+$/))return!0;if(n==="")return!1;try{y=T.localeData(i)}catch(_){y=T.localeData(T.locale())}return u=y.currency.symbol,v=y.abbreviations,a=y.delimiters.decimal,y.delimiters.thousands==="."?o="\\.":o=y.delimiters.thousands,g=n.match(/^[^\d]+/),g!==null&&(n=n.substr(1),g[0]!==u)||(g=n.match(/[^\d]+$/),g!==null&&(n=n.slice(0,-1),g[0]!==v.thousand&&g[0]!==v.million&&g[0]!==v.billion&&g[0]!==v.trillion))?!1:(b=new RegExp(o+"{2}"),n.match(/[^\d.,]/g)?!1:(f=n.split(a),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b):f[0].length===1?!!f[0].match(/^\d+$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/)))},T.fn=h.prototype={clone:function(){return T(this)},format:function(i,a){var o=this._value,u=i||r.defaultFormat,f,v,b;if(a=a||Math.round,o===0&&r.zeroFormat!==null)v=r.zeroFormat;else if(o===null&&r.nullFormat!==null)v=r.nullFormat;else{for(f in l)if(u.match(l[f].regexps.format)){b=l[f].format;break}b=b||T._.numberToFormat,v=b(o,u,a)}return v},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(u,f,v,b){return u+Math.round(a*f)}return this._value=e.reduce([this._value,i],o,0)/a,this},subtract:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(u,f,v,b){return u-Math.round(a*f)}return this._value=e.reduce([i],o,Math.round(this._value*a))/a,this},multiply:function(i){function a(o,u,f,v){var b=e.correctionFactor(o,u);return Math.round(o*b)*Math.round(u*b)/Math.round(b*b)}return this._value=e.reduce([this._value,i],a,1),this},divide:function(i){function a(o,u,f,v){var b=e.correctionFactor(o,u);return Math.round(o*b)/Math.round(u*b)}return this._value=e.reduce([this._value,i],a),this},difference:function(i){return Math.abs(T(this._value).subtract(i).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var a=i%10;return~~(i%100/10)==1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,a,o){var u=T._.includes(a," BPS")?" ":"",f;return i=i*1e4,a=a.replace(/\s?BPS/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,u+"BPS"),f=f.join("")):f=f+u+"BPS",f},unformat:function(i){return+(T._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a=n.suffixes.concat(i.suffixes.filter(function(u){return n.suffixes.indexOf(u)<0})),o=a.join("|");o="("+o.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(f,v,b){var y,g=T._.includes(v,"ib")?i:n,_=T._.includes(v," b")||T._.includes(v," ib")?" ":"",M,x,m;for(v=v.replace(/\s?i?b/,""),M=0;M<=g.suffixes.length;M++)if(x=Math.pow(g.base,M),m=Math.pow(g.base,M+1),f===null||f===0||f>=x&&f<m){_+=g.suffixes[M],x>0&&(f=f/x);break}return y=T._.numberToFormat(f,v,b),y+_},unformat:function(f){var v=T._.stringToNumber(f),b,y;if(v){for(b=n.suffixes.length-1;b>=0;b--){if(T._.includes(f,n.suffixes[b])){y=Math.pow(n.base,b);break}if(T._.includes(f,i.suffixes[b])){y=Math.pow(i.base,b);break}}v*=y||1}return v}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(i,a,o){var u=T.locales[T.options.currentLocale],f={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,b,y;for(a=a.replace(/\s?\$\s?/,""),v=T._.numberToFormat(i,a,o),i>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):i<0&&!T._.includes(f.before,"-")&&!T._.includes(f.before,"(")&&(f.before="-"+f.before),y=0;y<f.before.length;y++)switch(b=f.before[y],b){case"$":v=T._.insert(v,u.currency.symbol,y);break;case" ":v=T._.insert(v," ",y+u.currency.symbol.length-1);break}for(y=f.after.length-1;y>=0;y--)switch(b=f.after[y],b){case"$":v=y===f.after.length-1?v+u.currency.symbol:T._.insert(v,u.currency.symbol,-(f.after.length-(1+y)));break;case" ":v=y===f.after.length-1?v+" ":T._.insert(v," ",-(f.after.length-(1+y)+u.currency.symbol.length-1));break}return v}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,a,o){var u,f=typeof i=="number"&&!T._.isNaN(i)?i.toExponential():"0e+0",v=f.split("e");return a=a.replace(/e[\+|\-]{1}0/,""),u=T._.numberToFormat(Number(v[0]),a,o),u+"e"+v[1]},unformat:function(i){var a=T._.includes(i,"e+")?i.split("e+"):i.split("e-"),o=Number(a[0]),u=Number(a[1]);u=T._.includes(i,"e-")?u*=-1:u;function f(v,b,y,g){var _=T._.correctionFactor(v,b),M=v*_*(b*_)/(_*_);return M}return T._.reduce([o,Math.pow(10,u)],f,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,a,o){var u=T.locales[T.options.currentLocale],f,v=T._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),v+=u.ordinal(i),f=T._.numberToFormat(i,a,o),f+v}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,a,o){var u=T._.includes(a," %")?" ":"",f;return T.options.scalePercentBy100&&(i=i*100),a=a.replace(/\s?\%/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,u+"%"),f=f.join("")):f=f+u+"%",f},unformat:function(i){var a=T._.stringToNumber(i);return T.options.scalePercentBy100?a*.01:a}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,a,o){var u=Math.floor(i/60/60),f=Math.floor((i-u*60*60)/60),v=Math.round(i-u*60*60-f*60);return u+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},unformat:function(i){var a=i.split(":"),o=0;return a.length===3?(o=o+Number(a[0])*60*60,o=o+Number(a[1])*60,o=o+Number(a[2])):a.length===2&&(o=o+Number(a[0])*60,o=o+Number(a[1])),Number(o)}})}(),T})},Ztfv:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.tagProperty=mt.tagParameter=mt.decorate=void 0;var U=R("MON2"),E=R("xfSm");function T(r,h,n,i){var a=E.TAGGED;t(a,r,h,i,n)}mt.tagParameter=T;function e(r,h,n){var i=E.TAGGED_PROP;t(i,r.constructor,h,n)}mt.tagProperty=e;function t(r,h,n,i,a){var o={},u=typeof a=="number",f=a!==void 0&&u?a.toString():n;if(u&&n!==void 0)throw new Error(U.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,h)&&(o=Reflect.getMetadata(r,h));var v=o[f];if(!Array.isArray(v))v=[];else for(var b=0,y=v;b<y.length;b++){var g=y[b];if(g.key===i.key)throw new Error(U.DUPLICATED_METADATA+" "+g.key.toString())}v.push(i),o[f]=v,Reflect.defineMetadata(r,o,h)}function l(r,h){Reflect.decorate(r,h)}function s(r,h){return function(n,i){h(n,i,r)}}function c(r,h,n){typeof n=="number"?l([s(n,r)],h):typeof n=="string"?Reflect.decorate([r],h,n):l([r],h)}mt.decorate=c},ZxFD:function(Oe,mt,R){"use strict";R.r(mt),R.d(mt,"create",function(){return E}),R.d(mt,"clone",function(){return T}),R.d(mt,"fromValues",function(){return e}),R.d(mt,"copy",function(){return t}),R.d(mt,"set",function(){return l}),R.d(mt,"add",function(){return s}),R.d(mt,"subtract",function(){return c}),R.d(mt,"multiply",function(){return r}),R.d(mt,"divide",function(){return h}),R.d(mt,"ceil",function(){return n}),R.d(mt,"floor",function(){return i}),R.d(mt,"min",function(){return a}),R.d(mt,"max",function(){return o}),R.d(mt,"round",function(){return u}),R.d(mt,"scale",function(){return f}),R.d(mt,"scaleAndAdd",function(){return v}),R.d(mt,"distance",function(){return b}),R.d(mt,"squaredDistance",function(){return y}),R.d(mt,"length",function(){return g}),R.d(mt,"squaredLength",function(){return _}),R.d(mt,"negate",function(){return M}),R.d(mt,"inverse",function(){return x}),R.d(mt,"normalize",function(){return m}),R.d(mt,"dot",function(){return S}),R.d(mt,"cross",function(){return P}),R.d(mt,"lerp",function(){return A}),R.d(mt,"random",function(){return O}),R.d(mt,"transformMat2",function(){return L}),R.d(mt,"transformMat2d",function(){return W}),R.d(mt,"transformMat3",function(){return F}),R.d(mt,"transformMat4",function(){return K}),R.d(mt,"rotate",function(){return V}),R.d(mt,"angle",function(){return k}),R.d(mt,"zero",function(){return Z}),R.d(mt,"str",function(){return X}),R.d(mt,"exactEquals",function(){return it}),R.d(mt,"equals",function(){return ft}),R.d(mt,"len",function(){return pt}),R.d(mt,"sub",function(){return ut}),R.d(mt,"mul",function(){return It}),R.d(mt,"div",function(){return Nt}),R.d(mt,"dist",function(){return Rt}),R.d(mt,"sqrDist",function(){return Mt}),R.d(mt,"sqrLen",function(){return bt}),R.d(mt,"forEach",function(){return At});var U=R("yU0y");function E(){var rt=new U.a(2);return U.a!=Float32Array&&(rt[0]=0,rt[1]=0),rt}function T(rt){var Pt=new U.a(2);return Pt[0]=rt[0],Pt[1]=rt[1],Pt}function e(rt,Pt){var z=new U.a(2);return z[0]=rt,z[1]=Pt,z}function t(rt,Pt){return rt[0]=Pt[0],rt[1]=Pt[1],rt}function l(rt,Pt,z){return rt[0]=Pt,rt[1]=z,rt}function s(rt,Pt,z){return rt[0]=Pt[0]+z[0],rt[1]=Pt[1]+z[1],rt}function c(rt,Pt,z){return rt[0]=Pt[0]-z[0],rt[1]=Pt[1]-z[1],rt}function r(rt,Pt,z){return rt[0]=Pt[0]*z[0],rt[1]=Pt[1]*z[1],rt}function h(rt,Pt,z){return rt[0]=Pt[0]/z[0],rt[1]=Pt[1]/z[1],rt}function n(rt,Pt){return rt[0]=Math.ceil(Pt[0]),rt[1]=Math.ceil(Pt[1]),rt}function i(rt,Pt){return rt[0]=Math.floor(Pt[0]),rt[1]=Math.floor(Pt[1]),rt}function a(rt,Pt,z){return rt[0]=Math.min(Pt[0],z[0]),rt[1]=Math.min(Pt[1],z[1]),rt}function o(rt,Pt,z){return rt[0]=Math.max(Pt[0],z[0]),rt[1]=Math.max(Pt[1],z[1]),rt}function u(rt,Pt){return rt[0]=Math.round(Pt[0]),rt[1]=Math.round(Pt[1]),rt}function f(rt,Pt,z){return rt[0]=Pt[0]*z,rt[1]=Pt[1]*z,rt}function v(rt,Pt,z,Q){return rt[0]=Pt[0]+z[0]*Q,rt[1]=Pt[1]+z[1]*Q,rt}function b(rt,Pt){var z=Pt[0]-rt[0],Q=Pt[1]-rt[1];return Math.hypot(z,Q)}function y(rt,Pt){var z=Pt[0]-rt[0],Q=Pt[1]-rt[1];return z*z+Q*Q}function g(rt){var Pt=rt[0],z=rt[1];return Math.hypot(Pt,z)}function _(rt){var Pt=rt[0],z=rt[1];return Pt*Pt+z*z}function M(rt,Pt){return rt[0]=-Pt[0],rt[1]=-Pt[1],rt}function x(rt,Pt){return rt[0]=1/Pt[0],rt[1]=1/Pt[1],rt}function m(rt,Pt){var z=Pt[0],Q=Pt[1],gt=z*z+Q*Q;return gt>0&&(gt=1/Math.sqrt(gt)),rt[0]=Pt[0]*gt,rt[1]=Pt[1]*gt,rt}function S(rt,Pt){return rt[0]*Pt[0]+rt[1]*Pt[1]}function P(rt,Pt,z){var Q=Pt[0]*z[1]-Pt[1]*z[0];return rt[0]=rt[1]=0,rt[2]=Q,rt}function A(rt,Pt,z,Q){var gt=Pt[0],et=Pt[1];return rt[0]=gt+Q*(z[0]-gt),rt[1]=et+Q*(z[1]-et),rt}function O(rt,Pt){Pt=Pt||1;var z=U.c()*2*Math.PI;return rt[0]=Math.cos(z)*Pt,rt[1]=Math.sin(z)*Pt,rt}function L(rt,Pt,z){var Q=Pt[0],gt=Pt[1];return rt[0]=z[0]*Q+z[2]*gt,rt[1]=z[1]*Q+z[3]*gt,rt}function W(rt,Pt,z){var Q=Pt[0],gt=Pt[1];return rt[0]=z[0]*Q+z[2]*gt+z[4],rt[1]=z[1]*Q+z[3]*gt+z[5],rt}function F(rt,Pt,z){var Q=Pt[0],gt=Pt[1];return rt[0]=z[0]*Q+z[3]*gt+z[6],rt[1]=z[1]*Q+z[4]*gt+z[7],rt}function K(rt,Pt,z){var Q=Pt[0],gt=Pt[1];return rt[0]=z[0]*Q+z[4]*gt+z[12],rt[1]=z[1]*Q+z[5]*gt+z[13],rt}function V(rt,Pt,z,Q){var gt=Pt[0]-z[0],et=Pt[1]-z[1],ot=Math.sin(Q),xt=Math.cos(Q);return rt[0]=gt*xt-et*ot+z[0],rt[1]=gt*ot+et*xt+z[1],rt}function k(rt,Pt){var z=rt[0],Q=rt[1],gt=Pt[0],et=Pt[1],ot=Math.sqrt(z*z+Q*Q)*Math.sqrt(gt*gt+et*et),xt=ot&&(z*gt+Q*et)/ot;return Math.acos(Math.min(Math.max(xt,-1),1))}function Z(rt){return rt[0]=0,rt[1]=0,rt}function X(rt){return"vec2("+rt[0]+", "+rt[1]+")"}function it(rt,Pt){return rt[0]===Pt[0]&&rt[1]===Pt[1]}function ft(rt,Pt){var z=rt[0],Q=rt[1],gt=Pt[0],et=Pt[1];return Math.abs(z-gt)<=U.b*Math.max(1,Math.abs(z),Math.abs(gt))&&Math.abs(Q-et)<=U.b*Math.max(1,Math.abs(Q),Math.abs(et))}var pt=g,ut=c,It=r,Nt=h,Rt=b,Mt=y,bt=_,At=function(){var rt=E();return function(Pt,z,Q,gt,et,ot){var xt,H;for(z||(z=2),Q||(Q=0),gt?H=Math.min(gt*z+Q,Pt.length):H=Pt.length,xt=Q;xt<H;xt+=z)rt[0]=Pt[xt],rt[1]=Pt[xt+1],et(rt,rt,ot),Pt[xt]=rt[0],Pt[xt+1]=rt[1];return Pt}}()},ZzCi:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.named=void 0;var U=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.NAMED_TAG,t);typeof c=="number"?T.tagParameter(l,s,c,r):T.tagProperty(l,s,r)}}mt.named=e},a1gu:function(Oe,mt,R){var U=R("cDf5").default,E=R("PJYZ");function T(e,t){return t&&(U(t)==="object"||typeof t=="function")?t:E(e)}Oe.exports=T,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},aF1E:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return t});var U=R("lSNA"),E=R.n(U);function T(l,s){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);s&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(l,h).enumerable})),c.push.apply(c,r)}return c}function e(l){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?T(Object(c),!0).forEach(function(r){E()(l,r,c[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach(function(r){Object.defineProperty(l,r,Object.getOwnPropertyDescriptor(c,r))})}return l}function t(l,s){var c=s.sourceField,r=s.targetField,h=s.data,n={};return h.forEach(function(i){n[i[c]]=i}),l.dataArray=l.dataArray.map(function(i){var a=i[r];return e(e({},i),n[a])}),l}},aHsQ:function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("6D9b"),e=R.n(T),t=R("cWXX")},aPG5:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.resolve=void 0;var U=R("MON2"),E=R("FV85"),T=R("qK8v"),e=R("ujMp"),t=R("cSJO"),l=function(h,n,i){try{return i()}catch(a){throw T.isStackOverflowExeption(a)?new Error(U.CIRCULAR_DEPENDENCY_IN_FACTORY(h,n.toString())):a}},s=function r(h){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,a=n.childRequests,o=n.target&&n.target.isArray(),u=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(o&&u)return a.map(function(_){var M=r(h);return M(_)});var f=null;if(n.target.isOptional()&&i.length===0)return;var v=i[0],b=v.scope===E.BindingScopeEnum.Singleton,y=v.scope===E.BindingScopeEnum.Request;if(b&&v.activated)return v.cache;if(y&&h!==null&&h.has(v.id))return h.get(v.id);if(v.type===E.BindingTypeEnum.ConstantValue)f=v.cache;else if(v.type===E.BindingTypeEnum.Function)f=v.cache;else if(v.type===E.BindingTypeEnum.Constructor)f=v.implementationType;else if(v.type===E.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)f=l("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(n.parentContext)});else if(v.type===E.BindingTypeEnum.Factory&&v.factory!==null)f=l("toFactory",v.serviceIdentifier,function(){return v.factory(n.parentContext)});else if(v.type===E.BindingTypeEnum.Provider&&v.provider!==null)f=l("toProvider",v.serviceIdentifier,function(){return v.provider(n.parentContext)});else if(v.type===E.BindingTypeEnum.Instance&&v.implementationType!==null)f=t.resolveInstance(v.implementationType,a,r(h));else{var g=e.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(U.INVALID_BINDING_TYPE+" "+g)}return typeof v.onActivation=="function"&&(f=v.onActivation(n.parentContext,f)),b&&(v.cache=f,v.activated=!0),y&&h!==null&&!h.has(v.id)&&h.set(v.id,f),f}};function c(r){var h=s(r.plan.rootRequest.requestScope);return h(r.plan.rootRequest)}mt.resolve=c},asDA:function(Oe,mt){function R(U,E,T,e){var t=-1,l=U==null?0:U.length;for(e&&l&&(T=U[++t]);++t<l;)T=E(T,U[t],t,U);return T}Oe.exports=R},b2z7:function(Oe,mt){var R=/\w*$/;function U(E){var T=new E.constructor(E.source,R.exec(E));return T.lastIndex=E.lastIndex,T}Oe.exports=U},b48C:function(Oe,mt){function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},bB6j:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},bE4E:function(Oe,mt,R){},bPkA:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U;(function(E){E.Normal="normal",E.PostProcessing="post-processing"})(U||(U={}))},bTtR:function(Oe,mt){},bYl4:function(Oe,mt){},bahg:function(Oe,mt){function R(U){return U.split("")}Oe.exports=R},bl9R:function(Oe,mt,R){"use strict";R.r(mt),R.d(mt,"create",function(){return E}),R.d(mt,"clone",function(){return T}),R.d(mt,"fromValues",function(){return e}),R.d(mt,"copy",function(){return t}),R.d(mt,"set",function(){return l}),R.d(mt,"add",function(){return s}),R.d(mt,"subtract",function(){return c}),R.d(mt,"multiply",function(){return r}),R.d(mt,"divide",function(){return h}),R.d(mt,"ceil",function(){return n}),R.d(mt,"floor",function(){return i}),R.d(mt,"min",function(){return a}),R.d(mt,"max",function(){return o}),R.d(mt,"round",function(){return u}),R.d(mt,"scale",function(){return f}),R.d(mt,"scaleAndAdd",function(){return v}),R.d(mt,"distance",function(){return b}),R.d(mt,"squaredDistance",function(){return y}),R.d(mt,"length",function(){return g}),R.d(mt,"squaredLength",function(){return _}),R.d(mt,"negate",function(){return M}),R.d(mt,"inverse",function(){return x}),R.d(mt,"normalize",function(){return m}),R.d(mt,"dot",function(){return S}),R.d(mt,"cross",function(){return P}),R.d(mt,"lerp",function(){return A}),R.d(mt,"random",function(){return O}),R.d(mt,"transformMat4",function(){return L}),R.d(mt,"transformQuat",function(){return W}),R.d(mt,"zero",function(){return F}),R.d(mt,"str",function(){return K}),R.d(mt,"exactEquals",function(){return V}),R.d(mt,"equals",function(){return k}),R.d(mt,"sub",function(){return Z}),R.d(mt,"mul",function(){return X}),R.d(mt,"div",function(){return it}),R.d(mt,"dist",function(){return ft}),R.d(mt,"sqrDist",function(){return pt}),R.d(mt,"len",function(){return ut}),R.d(mt,"sqrLen",function(){return It}),R.d(mt,"forEach",function(){return Nt});var U=R("yU0y");function E(){var Rt=new U.a(4);return U.a!=Float32Array&&(Rt[0]=0,Rt[1]=0,Rt[2]=0,Rt[3]=0),Rt}function T(Rt){var Mt=new U.a(4);return Mt[0]=Rt[0],Mt[1]=Rt[1],Mt[2]=Rt[2],Mt[3]=Rt[3],Mt}function e(Rt,Mt,bt,At){var rt=new U.a(4);return rt[0]=Rt,rt[1]=Mt,rt[2]=bt,rt[3]=At,rt}function t(Rt,Mt){return Rt[0]=Mt[0],Rt[1]=Mt[1],Rt[2]=Mt[2],Rt[3]=Mt[3],Rt}function l(Rt,Mt,bt,At,rt){return Rt[0]=Mt,Rt[1]=bt,Rt[2]=At,Rt[3]=rt,Rt}function s(Rt,Mt,bt){return Rt[0]=Mt[0]+bt[0],Rt[1]=Mt[1]+bt[1],Rt[2]=Mt[2]+bt[2],Rt[3]=Mt[3]+bt[3],Rt}function c(Rt,Mt,bt){return Rt[0]=Mt[0]-bt[0],Rt[1]=Mt[1]-bt[1],Rt[2]=Mt[2]-bt[2],Rt[3]=Mt[3]-bt[3],Rt}function r(Rt,Mt,bt){return Rt[0]=Mt[0]*bt[0],Rt[1]=Mt[1]*bt[1],Rt[2]=Mt[2]*bt[2],Rt[3]=Mt[3]*bt[3],Rt}function h(Rt,Mt,bt){return Rt[0]=Mt[0]/bt[0],Rt[1]=Mt[1]/bt[1],Rt[2]=Mt[2]/bt[2],Rt[3]=Mt[3]/bt[3],Rt}function n(Rt,Mt){return Rt[0]=Math.ceil(Mt[0]),Rt[1]=Math.ceil(Mt[1]),Rt[2]=Math.ceil(Mt[2]),Rt[3]=Math.ceil(Mt[3]),Rt}function i(Rt,Mt){return Rt[0]=Math.floor(Mt[0]),Rt[1]=Math.floor(Mt[1]),Rt[2]=Math.floor(Mt[2]),Rt[3]=Math.floor(Mt[3]),Rt}function a(Rt,Mt,bt){return Rt[0]=Math.min(Mt[0],bt[0]),Rt[1]=Math.min(Mt[1],bt[1]),Rt[2]=Math.min(Mt[2],bt[2]),Rt[3]=Math.min(Mt[3],bt[3]),Rt}function o(Rt,Mt,bt){return Rt[0]=Math.max(Mt[0],bt[0]),Rt[1]=Math.max(Mt[1],bt[1]),Rt[2]=Math.max(Mt[2],bt[2]),Rt[3]=Math.max(Mt[3],bt[3]),Rt}function u(Rt,Mt){return Rt[0]=Math.round(Mt[0]),Rt[1]=Math.round(Mt[1]),Rt[2]=Math.round(Mt[2]),Rt[3]=Math.round(Mt[3]),Rt}function f(Rt,Mt,bt){return Rt[0]=Mt[0]*bt,Rt[1]=Mt[1]*bt,Rt[2]=Mt[2]*bt,Rt[3]=Mt[3]*bt,Rt}function v(Rt,Mt,bt,At){return Rt[0]=Mt[0]+bt[0]*At,Rt[1]=Mt[1]+bt[1]*At,Rt[2]=Mt[2]+bt[2]*At,Rt[3]=Mt[3]+bt[3]*At,Rt}function b(Rt,Mt){var bt=Mt[0]-Rt[0],At=Mt[1]-Rt[1],rt=Mt[2]-Rt[2],Pt=Mt[3]-Rt[3];return Math.hypot(bt,At,rt,Pt)}function y(Rt,Mt){var bt=Mt[0]-Rt[0],At=Mt[1]-Rt[1],rt=Mt[2]-Rt[2],Pt=Mt[3]-Rt[3];return bt*bt+At*At+rt*rt+Pt*Pt}function g(Rt){var Mt=Rt[0],bt=Rt[1],At=Rt[2],rt=Rt[3];return Math.hypot(Mt,bt,At,rt)}function _(Rt){var Mt=Rt[0],bt=Rt[1],At=Rt[2],rt=Rt[3];return Mt*Mt+bt*bt+At*At+rt*rt}function M(Rt,Mt){return Rt[0]=-Mt[0],Rt[1]=-Mt[1],Rt[2]=-Mt[2],Rt[3]=-Mt[3],Rt}function x(Rt,Mt){return Rt[0]=1/Mt[0],Rt[1]=1/Mt[1],Rt[2]=1/Mt[2],Rt[3]=1/Mt[3],Rt}function m(Rt,Mt){var bt=Mt[0],At=Mt[1],rt=Mt[2],Pt=Mt[3],z=bt*bt+At*At+rt*rt+Pt*Pt;return z>0&&(z=1/Math.sqrt(z)),Rt[0]=bt*z,Rt[1]=At*z,Rt[2]=rt*z,Rt[3]=Pt*z,Rt}function S(Rt,Mt){return Rt[0]*Mt[0]+Rt[1]*Mt[1]+Rt[2]*Mt[2]+Rt[3]*Mt[3]}function P(Rt,Mt,bt,At){var rt=bt[0]*At[1]-bt[1]*At[0],Pt=bt[0]*At[2]-bt[2]*At[0],z=bt[0]*At[3]-bt[3]*At[0],Q=bt[1]*At[2]-bt[2]*At[1],gt=bt[1]*At[3]-bt[3]*At[1],et=bt[2]*At[3]-bt[3]*At[2],ot=Mt[0],xt=Mt[1],H=Mt[2],nt=Mt[3];return Rt[0]=xt*et-H*gt+nt*Q,Rt[1]=-(ot*et)+H*z-nt*Pt,Rt[2]=ot*gt-xt*z+nt*rt,Rt[3]=-(ot*Q)+xt*Pt-H*rt,Rt}function A(Rt,Mt,bt,At){var rt=Mt[0],Pt=Mt[1],z=Mt[2],Q=Mt[3];return Rt[0]=rt+At*(bt[0]-rt),Rt[1]=Pt+At*(bt[1]-Pt),Rt[2]=z+At*(bt[2]-z),Rt[3]=Q+At*(bt[3]-Q),Rt}function O(Rt,Mt){Mt=Mt||1;var bt,At,rt,Pt,z,Q;do bt=U.c()*2-1,At=U.c()*2-1,z=bt*bt+At*At;while(z>=1);do rt=U.c()*2-1,Pt=U.c()*2-1,Q=rt*rt+Pt*Pt;while(Q>=1);var gt=Math.sqrt((1-z)/Q);return Rt[0]=Mt*bt,Rt[1]=Mt*At,Rt[2]=Mt*rt*gt,Rt[3]=Mt*Pt*gt,Rt}function L(Rt,Mt,bt){var At=Mt[0],rt=Mt[1],Pt=Mt[2],z=Mt[3];return Rt[0]=bt[0]*At+bt[4]*rt+bt[8]*Pt+bt[12]*z,Rt[1]=bt[1]*At+bt[5]*rt+bt[9]*Pt+bt[13]*z,Rt[2]=bt[2]*At+bt[6]*rt+bt[10]*Pt+bt[14]*z,Rt[3]=bt[3]*At+bt[7]*rt+bt[11]*Pt+bt[15]*z,Rt}function W(Rt,Mt,bt){var At=Mt[0],rt=Mt[1],Pt=Mt[2],z=bt[0],Q=bt[1],gt=bt[2],et=bt[3],ot=et*At+Q*Pt-gt*rt,xt=et*rt+gt*At-z*Pt,H=et*Pt+z*rt-Q*At,nt=-z*At-Q*rt-gt*Pt;return Rt[0]=ot*et+nt*-z+xt*-gt-H*-Q,Rt[1]=xt*et+nt*-Q+H*-z-ot*-gt,Rt[2]=H*et+nt*-gt+ot*-Q-xt*-z,Rt[3]=Mt[3],Rt}function F(Rt){return Rt[0]=0,Rt[1]=0,Rt[2]=0,Rt[3]=0,Rt}function K(Rt){return"vec4("+Rt[0]+", "+Rt[1]+", "+Rt[2]+", "+Rt[3]+")"}function V(Rt,Mt){return Rt[0]===Mt[0]&&Rt[1]===Mt[1]&&Rt[2]===Mt[2]&&Rt[3]===Mt[3]}function k(Rt,Mt){var bt=Rt[0],At=Rt[1],rt=Rt[2],Pt=Rt[3],z=Mt[0],Q=Mt[1],gt=Mt[2],et=Mt[3];return Math.abs(bt-z)<=U.b*Math.max(1,Math.abs(bt),Math.abs(z))&&Math.abs(At-Q)<=U.b*Math.max(1,Math.abs(At),Math.abs(Q))&&Math.abs(rt-gt)<=U.b*Math.max(1,Math.abs(rt),Math.abs(gt))&&Math.abs(Pt-et)<=U.b*Math.max(1,Math.abs(Pt),Math.abs(et))}var Z=c,X=r,it=h,ft=b,pt=y,ut=g,It=_,Nt=function(){var Rt=E();return function(Mt,bt,At,rt,Pt,z){var Q,gt;for(bt||(bt=4),At||(At=0),rt?gt=Math.min(rt*bt+At,Mt.length):gt=Mt.length,Q=At;Q<gt;Q+=bt)Rt[0]=Mt[Q],Rt[1]=Mt[Q+1],Rt[2]=Mt[Q+2],Rt[3]=Mt[Q+3],Pt(Rt,Rt,z),Mt[Q]=Rt[0],Mt[Q+1]=Rt[1],Mt[Q+2]=Rt[2],Mt[Q+3]=Rt[3];return Mt}}()},bx4M:function(Oe,mt,R){"use strict";var U=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),l=R("bT9E"),s=R("H84U"),c=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},r=function(x){var m=x.prefixCls,S=x.className,P=x.hoverable,A=P===void 0?!0:P,O=c(x,["prefixCls","className","hoverable"]);return T.createElement(s.a,null,function(L){var W=L.getPrefixCls,F=W("card",m),K=t()("".concat(F,"-grid"),S,Object(U.a)({},"".concat(F,"-grid-hoverable"),A));return T.createElement("div",Object(E.a)({},O,{className:K}))})},h=r,n=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},i=function(x){return T.createElement(s.a,null,function(m){var S=m.getPrefixCls,P=x.prefixCls,A=x.className,O=x.avatar,L=x.title,W=x.description,F=n(x,["prefixCls","className","avatar","title","description"]),K=S("card",P),V=t()("".concat(K,"-meta"),A),k=O?T.createElement("div",{className:"".concat(K,"-meta-avatar")},O):null,Z=L?T.createElement("div",{className:"".concat(K,"-meta-title")},L):null,X=W?T.createElement("div",{className:"".concat(K,"-meta-description")},W):null,it=Z||X?T.createElement("div",{className:"".concat(K,"-meta-detail")},Z,X):null;return T.createElement("div",Object(E.a)({},F,{className:V}),k,it)})},a=i,o=R("ZTPi"),u=R("BMrR"),f=R("kPKH"),v=R("3Nzz"),b=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m};function y(M){var x=M.map(function(m,S){return T.createElement("li",{style:{width:"".concat(100/M.length,"%")},key:"action-".concat(S)},T.createElement("span",null,m))});return x}var g=function(x){var m,S,P=T.useContext(s.b),A=P.getPrefixCls,O=P.direction,L=T.useContext(v.b),W=function(Xe){var Sn;(Sn=x.onTabChange)===null||Sn===void 0||Sn.call(x,Xe)},F=function(){var Xe;return T.Children.forEach(x.children,function(Sn){Sn&&Sn.type&&Sn.type===h&&(Xe=!0)}),Xe},K=x.prefixCls,V=x.className,k=x.extra,Z=x.headStyle,X=Z===void 0?{}:Z,it=x.bodyStyle,ft=it===void 0?{}:it,pt=x.title,ut=x.loading,It=x.bordered,Nt=It===void 0?!0:It,Rt=x.size,Mt=x.type,bt=x.cover,At=x.actions,rt=x.tabList,Pt=x.children,z=x.activeTabKey,Q=x.defaultActiveTabKey,gt=x.tabBarExtraContent,et=x.hoverable,ot=x.tabProps,xt=ot===void 0?{}:ot,H=b(x,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),nt=A("card",K),at=ft.padding===0||ft.padding==="0px"?{padding:24}:void 0,q=T.createElement("div",{className:"".concat(nt,"-loading-block")}),_t=T.createElement("div",{className:"".concat(nt,"-loading-content"),style:at},T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:22},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:8},q),T.createElement(f.a,{span:15},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:6},q),T.createElement(f.a,{span:18},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:13},q),T.createElement(f.a,{span:9},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:4},q),T.createElement(f.a,{span:3},q),T.createElement(f.a,{span:16},q))),yt=z!==void 0,Ft=Object(E.a)(Object(E.a)({},xt),(m={},Object(U.a)(m,yt?"activeKey":"defaultActiveKey",yt?z:Q),Object(U.a)(m,"tabBarExtraContent",gt),m)),Qt,ee=rt&&rt.length?T.createElement(o.a,Object(E.a)({size:"large"},Ft,{className:"".concat(nt,"-head-tabs"),onChange:W}),rt.map(function(ze){return T.createElement(o.a.TabPane,{tab:ze.tab,disabled:ze.disabled,key:ze.key})})):null;(pt||k||ee)&&(Qt=T.createElement("div",{className:"".concat(nt,"-head"),style:X},T.createElement("div",{className:"".concat(nt,"-head-wrapper")},pt&&T.createElement("div",{className:"".concat(nt,"-head-title")},pt),k&&T.createElement("div",{className:"".concat(nt,"-extra")},k)),ee));var Vt=bt?T.createElement("div",{className:"".concat(nt,"-cover")},bt):null,$t=T.createElement("div",{className:"".concat(nt,"-body"),style:ft},ut?_t:Pt),Me=At&&At.length?T.createElement("ul",{className:"".concat(nt,"-actions")},y(At)):null,me=Object(l.a)(H,["onTabChange"]),le=Rt||L,be=t()(nt,(S={},Object(U.a)(S,"".concat(nt,"-loading"),ut),Object(U.a)(S,"".concat(nt,"-bordered"),Nt),Object(U.a)(S,"".concat(nt,"-hoverable"),et),Object(U.a)(S,"".concat(nt,"-contain-grid"),F()),Object(U.a)(S,"".concat(nt,"-contain-tabs"),rt&&rt.length),Object(U.a)(S,"".concat(nt,"-").concat(le),le),Object(U.a)(S,"".concat(nt,"-type-").concat(Mt),!!Mt),Object(U.a)(S,"".concat(nt,"-rtl"),O==="rtl"),S),V);return T.createElement("div",Object(E.a)({},me,{className:be}),Qt,Vt,$t,Me)};g.Grid=h,g.Meta=a;var _=mt.a=g},bzyH:function(Oe,mt){},cQSq:function(Oe,mt,R){(function(E,T){Oe.exports=T()})(window,function(){return function(U){var E={};function T(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return U[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}return T.m=U,T.c=E,T.d=function(e,t,l){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},T.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(t&1&&(e=T(e)),t&8||t&4&&typeof e=="object"&&e&&e.__esModule)return e;var l=Object.create(null);if(T.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),t&2&&typeof e!="string")for(var s in e)T.d(l,s,function(c){return e[c]}.bind(null,s));return l},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(E,T,e){(function(l,s){E.exports=s()})(typeof self!="undefined"?self:this,function(){return function(t){var l={};function s(c){if(l[c])return l[c].exports;var r=l[c]={i:c,l:!1,exports:{}};return t[c].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=l,s.d=function(c,r,h){s.o(c,r)||Object.defineProperty(c,r,{configurable:!1,enumerable:!0,get:h})},s.n=function(c){var r=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(r,"a",r),r},s.o=function(c,r){return Object.prototype.hasOwnProperty.call(c,r)},s.p="",s(s.s=31)}([function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Array.isArray?Array.isArray(r):Object(c.a)(r,"Array")}},function(t,l,s){"use strict";var c=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)};l.a=c},function(t,l,s){"use strict";var c=s(0),r=s(13);function h(n,i){if(!!n){var a;if(Object(c.a)(n))for(var o=0,u=n.length;o<u&&(a=i(n[o],o),a!==!1);o++);else if(Object(r.a)(n)){for(var f in n)if(n.hasOwnProperty(f)&&(a=i(n[f],f),a===!1))break}}}l.a=h},function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Object(c.a)(r,"Function")}},function(t,l,s){"use strict";var c={}.toString,r=function(n,i){return c.call(n)==="[object "+i+"]"};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Number")};l.a=r},function(t,l,s){"use strict";var c=function(h){return h==null};l.a=c},function(t,l,s){var c=s(33),r=c.mix;t.exports={assign:r}},function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Object(c.a)(r,"String")}},function(t,l,s){"use strict";var c=s(15),r=s(4),h=function(i){if(!Object(c.a)(i)||!Object(r.a)(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var a=i;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a};l.a=h},function(t,l,s){"use strict";var c=s(6);l.a=function(r){return Object(c.a)(r)?"":r.toString()}},function(t,l,s){var c=s(18),r=function(){function h(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=c(i,a)}var n=h.prototype;return n.execute=function(){throw new Error("please override this method")},h}();t.exports=r},function(t,l,s){"use strict";var c=s(1),r=function(n,i){return Object(c.a)(n)?n.indexOf(i)>-1:!1};l.a=r},function(t,l,s){"use strict";l.a=function(c){var r=typeof c;return c!==null&&r==="object"||r==="function"}},function(t,l,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(u,f){a(u,f)&&o.push(u)}),o};l.a=h},function(t,l,s){"use strict";var c=function(h){return typeof h=="object"&&h!==null};l.a=c},function(t,l,s){"use strict";l.a=r;function c(h,n){for(var i in n)n.hasOwnProperty(i)&&i!=="constructor"&&n[i]!==void 0&&(h[i]=n[i])}function r(h,n,i,a){return n&&c(h,n),i&&c(h,i),a&&c(h,a),h}},function(t,l,s){var c=s(30),r=["LR","RL","TB","BT","H","V"],h=["LR","RL","H"],n=function(o){return h.indexOf(o)>-1},i=r[0];t.exports=function(a,o,u){var f=o.direction||i;if(o.isHorizontal=n(f),f&&r.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===r[0])u(a,o);else if(f===r[1])u(a,o),a.right2left();else if(f===r[2])u(a,o);else if(f===r[3])u(a,o),a.bottom2top();else if(f===r[4]||f===r[5]){var v=c(a,o),b=v.left,y=v.right;u(b,o),u(y,o),o.isHorizontal?b.right2left():b.bottom2top(),y.translate(b.x-y.x,b.y-y.y),a.x=b.x,a.y=y.y;var g=a.getBoundingBox();o.isHorizontal?g.top<0&&a.translate(0,-g.top):g.left<0&&a.translate(-g.left,0)}var _=o.fixedRoot;return _===void 0&&(_=!0),_&&a.translate(-(a.x+a.width/2+a.hgap),-(a.y+a.height/2+a.vgap)),a}},function(t,l,s){var c=s(7),r=18,h=r*2,n=r,i={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||n},getVGap:function(f){return f.vgap||n},getChildren:function(f){return f.children},getHeight:function(f){return f.height||h},getWidth:function(f){var v=f.label||" ";return f.width||v.split("").length*r}};function a(u,f){var v=this;if(v.vgap=v.hgap=0,u instanceof a)return u;v.data=u;var b=f.getHGap(u),y=f.getVGap(u);return v.width=f.getWidth(u),v.height=f.getHeight(u),v.id=f.getId(u),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(b,y),v}c.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,v){var b=this;b.hgap+=f,b.vgap+=v,b.width+=2*f,b.height+=2*v},eachNode:function(f){for(var v=this,b=[v],y;y=b.shift();)f(y),b=y.children.concat(b)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var v=this,b=[v],y;y=b.shift();)f(y),b=b.concat(y.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){f.left=Math.min(f.left,v.x),f.top=Math.min(f.top,v.y),f.width=Math.max(f.width,v.x+v.width),f.height=Math.max(f.height,v.y+v.height)}),f},translate:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.eachNode(function(b){b.x+=f,b.y+=v})},right2left:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.x=b.x-(b.x-v.left)*2-b.width}),f.translate(v.width,0)},bottom2top:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.y=b.y-(b.y-v.top)*2-b.height}),f.translate(0,v.height)}});function o(u,f,v){f===void 0&&(f={}),f=c.assign({},i,f);var b=new a(u,f),y=[b],g;if(!v&&!u.collapsed){for(;g=y.shift();)if(!g.data.collapsed){var _=f.getChildren(g.data),M=_?_.length:0;if(g.children=new Array(M),_&&M)for(var x=0;x<M;x++){var m=new a(_[x],f);g.children[x]=m,y.push(m),m.parent=g,m.depth=g.depth+1}}}return b}t.exports=o},function(t,l,s){"use strict";var c=s(6),r=s(20);function h(n,i){var a=Object(r.a)(i),o=a.length;if(Object(c.a)(n))return!o;for(var u=0;u<o;u+=1){var f=a[u];if(i[f]!==n[f]||!(f in n))return!1}return!0}l.a=h},function(t,l,s){"use strict";var c=s(2),r=s(3),h=Object.keys?function(n){return Object.keys(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(o)}),i};l.a=h},function(t,l,s){"use strict";var c=s(1),r=Array.prototype.splice,h=function(i,a){if(!Object(c.a)(i))return[];for(var o=i?a.length:0,u=o-1;o--;){var f=void 0,v=a[o];(o===u||v!==f)&&(f=v,r.call(i,v,1))}return i};l.a=h},function(t,l,s){"use strict";var c=s(12),r=s(2),h=function(i){var a=[];return Object(r.a)(i,function(o){Object(c.a)(a,o)||a.push(o)}),a};l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(3),h=s(24),n=function(a,o){if(!o)return{0:a};if(!Object(r.a)(o)){var u=Object(c.a)(o)?o:o.replace(/\s+/g,"").split("*");o=function(b){for(var y="_",g=0,_=u.length;g<_;g++)y+=b[u[g]]&&b[u[g]].toString();return y}}var f=Object(h.a)(a,o);return f};l.a=n},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3),n=Object.prototype.hasOwnProperty;function i(a,o){if(!o||!Object(r.a)(a))return{};var u={},f=Object(h.a)(o)?o:function(b){return b[o]},v;return Object(c.a)(a,function(b){v=f(b),n.call(u,v)?u[v].push(b):u[v]=[b]}),u}l.a=i},function(t,l,s){"use strict";l.a=function(c,r){return c.hasOwnProperty(r)}},function(t,l,s){"use strict";var c=s(2),r=s(3),h=Object.values?function(n){return Object.values(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(a)}),i};l.a=h},function(t,l,s){"use strict";var c={}.toString,r=function(n){return c.call(n).replace(/^\[object /,"").replace(/]$/,"")};l.a=r},function(t,l,s){"use strict";var c=Object.prototype,r=function(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||c;return n===a};l.a=r},function(t,l,s){"use strict";var c=s(15),r=s(1),h=s(8),n=function i(a,o){if(a===o)return!0;if(!a||!o||Object(h.a)(a)||Object(h.a)(o))return!1;if(Object(r.a)(a)||Object(r.a)(o)){if(a.length!==o.length)return!1;for(var u=!0,f=0;f<a.length&&(u=i(a[f],o[f]),!!u);f++);return u}if(Object(c.a)(a)||Object(c.a)(o)){var v=Object.keys(a),b=Object.keys(o);if(v.length!==b.length)return!1;for(var u=!0,f=0;f<v.length&&(u=i(a[v[f]],o[v[f]]),!!u);f++);return u}return!1};l.a=n},function(t,l,s){var c=s(18);t.exports=function(r,h){for(var n=c(r.data,h,!0),i=c(r.data,h,!0),a=r.children.length,o=Math.round(a/2),u=h.getSide||function(y,g){return g<o?"right":"left"},f=0;f<a;f++){var v=r.children[f],b=u(v,f);b==="right"?i.children.push(v):n.children.push(v)}return n.eachNode(function(y){y.isRoot()||(y.side="left")}),i.eachNode(function(y){y.isRoot()||(y.side="right")}),{left:n,right:i}}},function(t,l,s){var c={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};t.exports=c},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(113),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c=s(12);s.d(l,"contains",function(){return c.a}),s.d(l,"includes",function(){return c.a});var r=s(34);s.d(l,"difference",function(){return r.a});var h=s(35);s.d(l,"find",function(){return h.a});var n=s(36);s.d(l,"findIndex",function(){return n.a});var i=s(37);s.d(l,"firstValue",function(){return i.a});var a=s(38);s.d(l,"flatten",function(){return a.a});var o=s(39);s.d(l,"flattenDeep",function(){return o.a});var u=s(40);s.d(l,"getRange",function(){return u.a});var f=s(41);s.d(l,"pull",function(){return f.a});var v=s(21);s.d(l,"pullAt",function(){return v.a});var b=s(42);s.d(l,"reduce",function(){return b.a});var y=s(43);s.d(l,"remove",function(){return y.a});var g=s(44);s.d(l,"sortBy",function(){return g.a});var _=s(45);s.d(l,"union",function(){return _.a});var M=s(22);s.d(l,"uniq",function(){return M.a});var x=s(46);s.d(l,"valuesOfKey",function(){return x.a});var m=s(47);s.d(l,"head",function(){return m.a});var S=s(48);s.d(l,"last",function(){return S.a});var P=s(49);s.d(l,"startsWith",function(){return P.a});var A=s(50);s.d(l,"endsWith",function(){return A.a});var O=s(14);s.d(l,"filter",function(){return O.a});var L=s(51);s.d(l,"every",function(){return L.a});var W=s(52);s.d(l,"some",function(){return W.a});var F=s(53);s.d(l,"group",function(){return F.a});var K=s(24);s.d(l,"groupBy",function(){return K.a});var V=s(23);s.d(l,"groupToMap",function(){return V.a});var k=s(54);s.d(l,"getWrapBehavior",function(){return k.a});var Z=s(55);s.d(l,"wrapBehavior",function(){return Z.a});var X=s(56);s.d(l,"number2color",function(){return X.a});var it=s(57);s.d(l,"parseRadius",function(){return it.a});var ft=s(58);s.d(l,"clamp",function(){return ft.a});var pt=s(59);s.d(l,"fixedBase",function(){return pt.a});var ut=s(60);s.d(l,"isDecimal",function(){return ut.a});var It=s(61);s.d(l,"isEven",function(){return It.a});var Nt=s(62);s.d(l,"isInteger",function(){return Nt.a});var Rt=s(63);s.d(l,"isNegative",function(){return Rt.a});var Mt=s(64);s.d(l,"isNumberEqual",function(){return Mt.a});var bt=s(65);s.d(l,"isOdd",function(){return bt.a});var At=s(66);s.d(l,"isPositive",function(){return At.a});var rt=s(67);s.d(l,"maxBy",function(){return rt.a});var Pt=s(68);s.d(l,"minBy",function(){return Pt.a});var z=s(69);s.d(l,"mod",function(){return z.a});var Q=s(70);s.d(l,"toDegree",function(){return Q.a});var gt=s(71);s.d(l,"toInteger",function(){return gt.a});var et=s(72);s.d(l,"toRadian",function(){return et.a});var ot=s(73);s.d(l,"forIn",function(){return ot.a});var xt=s(25);s.d(l,"has",function(){return xt.a});var H=s(74);s.d(l,"hasKey",function(){return H.a});var nt=s(75);s.d(l,"hasValue",function(){return nt.a});var at=s(20);s.d(l,"keys",function(){return at.a});var q=s(19);s.d(l,"isMatch",function(){return q.a});var _t=s(26);s.d(l,"values",function(){return _t.a});var yt=s(76);s.d(l,"lowerCase",function(){return yt.a});var Ft=s(77);s.d(l,"lowerFirst",function(){return Ft.a});var Qt=s(78);s.d(l,"substitute",function(){return Qt.a});var ee=s(79);s.d(l,"upperCase",function(){return ee.a});var Vt=s(80);s.d(l,"upperFirst",function(){return Vt.a});var $t=s(27);s.d(l,"getType",function(){return $t.a});var Me=s(81);s.d(l,"isArguments",function(){return Me.a});var me=s(0);s.d(l,"isArray",function(){return me.a});var le=s(1);s.d(l,"isArrayLike",function(){return le.a});var be=s(82);s.d(l,"isBoolean",function(){return be.a});var ze=s(83);s.d(l,"isDate",function(){return ze.a});var Xe=s(84);s.d(l,"isError",function(){return Xe.a});var Sn=s(3);s.d(l,"isFunction",function(){return Sn.a});var Xn=s(85);s.d(l,"isFinite",function(){return Xn.a});var Hn=s(6);s.d(l,"isNil",function(){return Hn.a});var nn=s(86);s.d(l,"isNull",function(){return nn.a});var en=s(5);s.d(l,"isNumber",function(){return en.a});var An=s(13);s.d(l,"isObject",function(){return An.a});var Nn=s(15);s.d(l,"isObjectLike",function(){return Nn.a});var fr=s(9);s.d(l,"isPlainObject",function(){return fr.a});var hi=s(28);s.d(l,"isPrototype",function(){return hi.a});var Ce=s(87);s.d(l,"isRegExp",function(){return Ce.a});var Te=s(8);s.d(l,"isString",function(){return Te.a});var Jt=s(4);s.d(l,"isType",function(){return Jt.a});var pe=s(88);s.d(l,"isUndefined",function(){return pe.a});var Wt=s(89);s.d(l,"isElement",function(){return Wt.a});var ie=s(90);s.d(l,"requestAnimationFrame",function(){return ie.a});var Ae=s(91);s.d(l,"clearAnimationFrame",function(){return Ae.a});var ue=s(92);s.d(l,"augment",function(){return ue.a});var xe=s(93);s.d(l,"clone",function(){return xe.a});var $e=s(94);s.d(l,"debounce",function(){return $e.a});var Fn=s(95);s.d(l,"memoize",function(){return Fn.a});var or=s(96);s.d(l,"deepMix",function(){return or.a});var En=s(2);s.d(l,"each",function(){return En.a});var Pn=s(97);s.d(l,"extend",function(){return Pn.a});var br=s(98);s.d(l,"indexOf",function(){return br.a});var Pr=s(99);s.d(l,"isEmpty",function(){return Pr.a});var ln=s(29);s.d(l,"isEqual",function(){return ln.a});var Cr=s(100);s.d(l,"isEqualWith",function(){return Cr.a});var Ar=s(101);s.d(l,"map",function(){return Ar.a});var Be=s(102);s.d(l,"mapValues",function(){return Be.a});var We=s(16);s.d(l,"mix",function(){return We.a}),s.d(l,"assign",function(){return We.a});var Ye=s(103);s.d(l,"get",function(){return Ye.a});var fn=s(104);s.d(l,"set",function(){return fn.a});var gn=s(105);s.d(l,"pick",function(){return gn.a});var Bn=s(106);s.d(l,"throttle",function(){return Bn.a});var bn=s(107);s.d(l,"toArray",function(){return bn.a});var Ln=s(10);s.d(l,"toString",function(){return Ln.a});var ir=s(108);s.d(l,"uniqueId",function(){return ir.a});var Yn=s(109);s.d(l,"noop",function(){return Yn.a});var _n=s(110);s.d(l,"identity",function(){return _n.a});var Dr=s(111);s.d(l,"size",function(){return Dr.a});var vr=s(112);s.d(l,"Cache",function(){return vr.a})},function(t,l,s){"use strict";var c=s(14),r=s(12),h=function(i,a){return a===void 0&&(a=[]),Object(c.a)(i,function(o){return!Object(r.a)(a,o)})};l.a=h},function(t,l,s){"use strict";var c=s(3),r=s(19),h=s(0),n=s(9);function i(a,o){if(!Object(h.a)(a))return null;var u;if(Object(c.a)(o)&&(u=o),Object(n.a)(o)&&(u=function(b){return Object(r.a)(b,o)}),u){for(var f=0;f<a.length;f+=1)if(u(a[f]))return a[f]}return null}l.a=i},function(t,l,s){"use strict";function c(r,h,n){n===void 0&&(n=0);for(var i=n;i<r.length;i++)if(h(r[i],i))return i;return-1}l.a=c},function(t,l,s){"use strict";var c=s(6),r=s(0),h=function(i,a){for(var o=null,u=0;u<i.length;u++){var f=i[u],v=f[a];if(!Object(c.a)(v)){Object(r.a)(v)?o=v[0]:o=v;break}}return o};l.a=h},function(t,l,s){"use strict";var c=s(0),r=function(n){if(!Object(c.a)(n))return[];for(var i=[],a=0;a<n.length;a++)i=i.concat(n[a]);return i};l.a=r},function(t,l,s){"use strict";var c=s(0),r=function h(n,i){if(i===void 0&&(i=[]),!Object(c.a)(n))i.push(n);else for(var a=0;a<n.length;a+=1)h(n[a],i);return i};l.a=r},function(t,l,s){"use strict";var c=s(0),r=s(14),h=function(i){if(i=Object(r.a)(i,function(v){return!isNaN(v)}),!i.length)return{min:0,max:0};if(Object(c.a)(i[0])){for(var a=[],o=0;o<i.length;o++)a=a.concat(i[o]);i=a}var u=Math.max.apply(null,i),f=Math.min.apply(null,i);return{min:f,max:u}};l.a=h},function(t,l,s){"use strict";var c=Array.prototype,r=c.splice,h=c.indexOf,n=function(a){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];for(var f=0;f<o.length;f++)for(var v=o[f],b=-1;(b=h.call(a,v))>-1;)r.call(a,b,1);return a};l.a=n},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(9),n=function(a,o,u){if(!Object(r.a)(a)&&!Object(h.a)(a))return a;var f=u;return Object(c.a)(a,function(v,b){f=o(f,v,b)}),f};l.a=n},function(t,l,s){"use strict";var c=s(1),r=s(21),h=function(i,a){var o=[];if(!Object(c.a)(i))return o;for(var u=-1,f=[],v=i.length;++u<v;){var b=i[u];a(b,u,i)&&(o.push(b),f.push(u))}return Object(r.a)(i,f),o};l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(8),h=s(3);function n(i,a){var o;if(Object(h.a)(a))o=function(v,b){return a(v)-a(b)};else{var u=[];Object(r.a)(a)?u.push(a):Object(c.a)(a)&&(u=a),o=function(v,b){for(var y=0;y<u.length;y+=1){var g=u[y];if(v[g]>b[g])return 1;if(v[g]<b[g])return-1}return 0}}return i.sort(o),i}l.a=n},function(t,l,s){"use strict";var c=s(22),r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Object(c.a)([].concat.apply([],n))};l.a=r},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(6);l.a=function(n,i){var a=[],o={};return n.forEach(function(u){var f=u[i];Object(h.a)(f)||(Object(r.a)(f)||(f=[f]),Object(c.a)(f,function(v){o[v]||(a.push(v),o[v]=!0)}))}),a}},function(t,l,s){"use strict";l.a=r;var c=s(1);function r(h){if(Object(c.a)(h))return h[0]}},function(t,l,s){"use strict";l.a=r;var c=s(1);function r(h){if(Object(c.a)(h)){var n=h;return n[n.length-1]}}},function(t,l,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[0]===i:!1}l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[n.length-1]===i:!1}l.a=h},function(t,l,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(!n(h[i],i))return!1;return!0};l.a=c},function(t,l,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(n(h[i],i))return!0;return!1};l.a=c},function(t,l,s){"use strict";var c=s(23);l.a=function(r,h){if(!h)return[r];var n=Object(c.a)(r,h),i=[];for(var a in n)i.push(n[a]);return i}},function(t,l,s){"use strict";function c(r,h){return r["_wrap_"+h]}l.a=c},function(t,l,s){"use strict";function c(r,h){if(r["_wrap_"+h])return r["_wrap_"+h];var n=function(a){r[h](a)};return r["_wrap_"+h]=n,n}l.a=c},function(t,l,s){"use strict";var c={};function r(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}l.a=r},function(t,l,s){"use strict";var c=s(0);function r(h){var n=0,i=0,a=0,o=0;return Object(c.a)(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}}l.a=r},function(t,l,s){"use strict";var c=function(h,n,i){return h<n?n:h>i?i:h};l.a=c},function(t,l,s){"use strict";var c=function(h,n){var i=n.toString(),a=i.indexOf(".");if(a===-1)return Math.round(h);var o=i.substr(a+1).length;return o>20&&(o=20),parseFloat(h.toFixed(o))};l.a=c},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%1!=0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2==0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=Number.isInteger?Number.isInteger:function(h){return Object(c.a)(h)&&h%1==0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n<0};l.a=r},function(t,l,s){"use strict";l.a=r;var c=1e-5;function r(h,n,i){return i===void 0&&(i=c),Math.abs(h-n)<i}},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2!=0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n>0};l.a=r},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3);l.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var u;return Object(c.a)(n,function(f){Object(h.a)(i)?u=i(f):u=f[i],u>o&&(a=f,o=u)}),a}}},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3);l.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var u;return Object(c.a)(n,function(f){Object(h.a)(i)?u=i(f):u=f[i],u<o&&(a=f,o=u)}),a}}},function(t,l,s){"use strict";var c=function(h,n){return(h%n+n)%n};l.a=c},function(t,l,s){"use strict";var c=180/Math.PI,r=function(n){return c*n};l.a=r},function(t,l,s){"use strict";l.a=parseInt},function(t,l,s){"use strict";var c=Math.PI/180,r=function(n){return c*n};l.a=r},function(t,l,s){"use strict";var c=s(2);l.a=c.a},function(t,l,s){"use strict";var c=s(25);l.a=c.a},function(t,l,s){"use strict";var c=s(12),r=s(26);l.a=function(h,n){return Object(c.a)(Object(r.a)(h),n)}},function(t,l,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toLowerCase()};l.a=r},function(t,l,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toLowerCase()+i.substring(1)};l.a=r},function(t,l,s){"use strict";function c(r,h){return!r||!h?r:r.replace(/\\?\{([^{}]+)\}/g,function(n,i){return n.charAt(0)==="\\"?n.slice(1):h[i]===void 0?"":h[i]})}l.a=c},function(t,l,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toUpperCase()};l.a=r},function(t,l,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toUpperCase()+i.substring(1)};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Arguments")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Boolean")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Date")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Error")};l.a=r},function(t,l,s){"use strict";var c=s(5);l.a=function(r){return Object(c.a)(r)&&isFinite(r)}},function(t,l,s){"use strict";var c=function(h){return h===null};l.a=c},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"RegExp")};l.a=r},function(t,l,s){"use strict";var c=function(h){return h===void 0};l.a=c},function(t,l,s){"use strict";var c=function(h){return h instanceof Element||h instanceof HTMLDocument};l.a=c},function(t,l,s){"use strict";l.a=c;function c(r){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)};return h(r)}},function(t,l,s){"use strict";l.a=c;function c(r){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;h(r)}},function(t,l,s){"use strict";var c=s(16),r=s(3),h=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o=i[0],u=1;u<i.length;u++){var f=i[u];Object(r.a)(f)&&(f=f.prototype),Object(c.a)(o.prototype,f)}};l.a=h},function(t,l,s){"use strict";var c=s(0),r=function h(n){if(typeof n!="object"||n===null)return n;var i;if(Object(c.a)(n)){i=[];for(var a=0,o=n.length;a<o;a++)typeof n[a]=="object"&&n[a]!=null?i[a]=h(n[a]):i[a]=n[a]}else{i={};for(var u in n)typeof n[u]=="object"&&n[u]!=null?i[u]=h(n[u]):i[u]=n[u]}return i};l.a=r},function(t,l,s){"use strict";function c(r,h,n){var i;return function(){var a=this,o=arguments,u=function(){i=null,n||r.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(u,h),f&&r.apply(a,o)}}l.a=c},function(t,l,s){"use strict";var c=s(3);l.a=function(r,h){if(!Object(c.a)(r))throw new TypeError("Expected a function");var n=function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var u=h?h.apply(this,a):a[0],f=i.cache;if(f.has(u))return f.get(u);var v=r.apply(this,a);return f.set(u,v),v};return n.cache=new Map,n}},function(t,l,s){"use strict";var c=s(0),r=s(9),h=5;function n(a,o,u,f){u=u||0,f=f||h;for(var v in o)if(o.hasOwnProperty(v)){var b=o[v];b!==null&&Object(r.a)(b)?(Object(r.a)(a[v])||(a[v]={}),u<f?n(a[v],b,u+1,f):a[v]=o[v]):Object(c.a)(b)?(a[v]=[],a[v]=a[v].concat(b)):b!==void 0&&(a[v]=b)}}var i=function(o){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];for(var v=0;v<u.length;v+=1)n(o,u[v]);return o};l.a=i},function(t,l,s){"use strict";var c=s(16),r=s(3),h=function(i,a,o,u){Object(r.a)(a)||(o=a,a=i,i=function(){});var f=Object.create?function(b,y){return Object.create(b,{constructor:{value:y}})}:function(b,y){function g(){}g.prototype=b;var _=new g;return _.constructor=y,_},v=f(a.prototype,i);return i.prototype=Object(c.a)(v,i.prototype),i.superclass=f(a.prototype,a),Object(c.a)(v,o),Object(c.a)(i,u),i};l.a=h},function(t,l,s){"use strict";var c=s(1),r=function(n,i){if(!Object(c.a)(n))return-1;var a=Array.prototype.indexOf;if(a)return a.call(n,i);for(var o=-1,u=0;u<n.length;u++)if(n[u]===i){o=u;break}return o};l.a=r},function(t,l,s){"use strict";var c=s(6),r=s(1),h=s(27),n=s(28),i=Object.prototype.hasOwnProperty;function a(o){if(Object(c.a)(o))return!0;if(Object(r.a)(o))return!o.length;var u=Object(h.a)(o);if(u==="Map"||u==="Set")return!o.size;if(Object(n.a)(o))return!Object.keys(o).length;for(var f in o)if(i.call(o,f))return!1;return!0}l.a=a},function(t,l,s){"use strict";var c=s(3),r=s(29);l.a=function(h,n,i){return Object(c.a)(i)?!!i(h,n):Object(r.a)(h,n)}},function(t,l,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(u,f){o.push(a(u,f))}),o};l.a=h},function(t,l,s){"use strict";var c=s(6),r=s(13),h=function(i){return i};l.a=function(n,i){i===void 0&&(i=h);var a={};return Object(r.a)(n)&&!Object(c.a)(n)&&Object.keys(n).forEach(function(o){a[o]=i(n[o],o)}),a}},function(t,l,s){"use strict";var c=s(8);l.a=function(r,h,n){for(var i=0,a=Object(c.a)(h)?h.split("."):h;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?n:r}},function(t,l,s){"use strict";var c=s(13),r=s(8),h=s(5);l.a=function(n,i,a){var o=n,u=Object(r.a)(i)?i.split("."):i;return u.forEach(function(f,v){v<u.length-1?(Object(c.a)(o[f])||(o[f]=Object(h.a)(u[v+1])?[]:{}),o=o[f]):o[f]=a}),n}},function(t,l,s){"use strict";var c=s(2),r=s(9),h=Object.prototype.hasOwnProperty;l.a=function(n,i){if(n===null||!Object(r.a)(n))return{};var a={};return Object(c.a)(i,function(o){h.call(n,o)&&(a[o]=n[o])}),a}},function(t,l,s){"use strict";l.a=function(c,r,h){var n,i,a,o,u=0;h||(h={});var f=function(){u=h.leading===!1?0:Date.now(),n=null,o=c.apply(i,a),n||(i=a=null)},v=function(){var y=Date.now();!u&&h.leading===!1&&(u=y);var g=r-(y-u);return i=this,a=arguments,g<=0||g>r?(n&&(clearTimeout(n),n=null),u=y,o=c.apply(i,a),n||(i=a=null)):!n&&h.trailing!==!1&&(n=setTimeout(f,g)),o};return v.cancel=function(){clearTimeout(n),u=0,n=i=a=null},v}},function(t,l,s){"use strict";var c=s(1);l.a=function(r){return Object(c.a)(r)?Array.prototype.slice.call(r):[]}},function(t,l,s){"use strict";var c={};l.a=function(r){return r=r||"g",c[r]?c[r]+=1:c[r]=1,r+c[r]}},function(t,l,s){"use strict";l.a=function(){}},function(t,l,s){"use strict";l.a=function(c){return c}},function(t,l,s){"use strict";l.a=h;var c=s(6),r=s(1);function h(n){return Object(c.a)(n)?0:Object(r.a)(n)?n.length:Object.keys(n).length}},function(t,l,s){"use strict";var c=function(){function r(){this.map={}}return r.prototype.has=function(h){return this.map[h]!==void 0},r.prototype.get=function(h,n){var i=this.map[h];return i===void 0?n:i},r.prototype.set=function(h,n){this.map[h]=n},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(h){delete this.map[h]},r.prototype.size=function(){return Object.keys(this.map).length},r}();l.a=c},function(t,l){function s(a,o,u,f){f===void 0&&(f=[]);var v=this;v.w=a||0,v.h=o||0,v.y=u||0,v.x=0,v.c=f||[],v.cs=f.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}s.fromNode=function(a,o){if(!a)return null;var u=[];return a.children.forEach(function(f){u.push(s.fromNode(f,o))}),o?new s(a.height,a.width,a.x,u):new s(a.width,a.height,a.y,u)};function c(a,o,u){u?a.y+=o:a.x+=o,a.children.forEach(function(f){c(f,o,u)})}function r(a,o){var u=o?a.y:a.x;return a.children.forEach(function(f){u=Math.min(r(f,o),u)}),u}function h(a,o){var u=r(a,o);c(a,-u,o)}function n(a,o,u){u?o.y=a.x:o.x=a.x,a.c.forEach(function(f,v){n(f,o.children[v],u)})}function i(a,o,u){u===void 0&&(u=0),o?(a.x=u,u+=a.width):(a.y=u,u+=a.height),a.children.forEach(function(f){i(f,o,u)})}t.exports=function(a,o){o===void 0&&(o={});var u=o.isHorizontal;function f(F){if(F.cs===0){v(F);return}f(F.c[0]);for(var K=L(M(F.c[0].el),0,null),V=1;V<F.cs;++V){f(F.c[V]);var k=M(F.c[V].er);b(F,V,K),K=L(k,V,K)}S(F),v(F)}function v(F){F.cs===0?(F.el=F,F.er=F,F.msel=F.mser=0):(F.el=F.c[0].el,F.msel=F.c[0].msel,F.er=F.c[F.cs-1].er,F.mser=F.c[F.cs-1].mser)}function b(F,K,V){for(var k=F.c[K-1],Z=k.mod,X=F.c[K],it=X.mod;k!==null&&X!==null;){M(k)>V.low&&(V=V.nxt);var ft=Z+k.prelim+k.w-(it+X.prelim);ft>0&&(it+=ft,y(F,K,V.index,ft));var pt=M(k),ut=M(X);pt<=ut&&(k=_(k),k!==null&&(Z+=k.mod)),pt>=ut&&(X=g(X),X!==null&&(it+=X.mod))}!k&&!!X?x(F,K,X,it):!!k&&!X&&m(F,K,k,Z)}function y(F,K,V,k){F.c[K].mod+=k,F.c[K].msel+=k,F.c[K].mser+=k,A(F,K,V,k)}function g(F){return F.cs===0?F.tl:F.c[0]}function _(F){return F.cs===0?F.tr:F.c[F.cs-1]}function M(F){return F.y+F.h}function x(F,K,V,k){var Z=F.c[0].el;Z.tl=V;var X=k-V.mod-F.c[0].msel;Z.mod+=X,Z.prelim-=X,F.c[0].el=F.c[K].el,F.c[0].msel=F.c[K].msel}function m(F,K,V,k){var Z=F.c[K].er;Z.tr=V;var X=k-V.mod-F.c[K].mser;Z.mod+=X,Z.prelim-=X,F.c[K].er=F.c[K-1].er,F.c[K].mser=F.c[K-1].mser}function S(F){F.prelim=(F.c[0].prelim+F.c[0].mod+F.c[F.cs-1].mod+F.c[F.cs-1].prelim+F.c[F.cs-1].w)/2-F.w/2}function P(F,K){K+=F.mod,F.x=F.prelim+K,O(F);for(var V=0;V<F.cs;V++)P(F.c[V],K)}function A(F,K,V,k){if(V!==K-1){var Z=K-V;F.c[V+1].shift+=k/Z,F.c[K].shift-=k/Z,F.c[K].change-=k-k/Z}}function O(F){for(var K=0,V=0,k=0;k<F.cs;k++)K+=F.c[k].shift,V+=K+F.c[k].change,F.c[k].mod+=V}function L(F,K,V){for(;V!==null&&F>=V.low;)V=V.nxt;return{low:F,index:K,nxt:V}}i(a,u);var W=s.fromNode(a,u);return f(W),P(W,0),n(W,a,u),h(a,u),a}},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(115),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return g.rootNode.width=0,n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){var c=s(7);function r(i,a){i===void 0&&(i=0),a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var h={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function n(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(u,f){n(u,a.children[f],o)})}t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},h,a);var o=0;function u(g){if(!g)return null;g.width=0,g.depth&&g.depth>o&&(o=g.depth);var _=g.children,M=_.length,x=new r(g.height,[]);return _.forEach(function(m,S){var P=u(m);x.children.push(P),S===0&&(x.leftChild=P),S===M-1&&(x.rightChild=P)}),x.originNode=g,x.isLeaf=g.isLeaf(),x}function f(g){if(g.isLeaf||g.children.length===0)g.drawingDepth=o;else{var _=g.children.map(function(x){return f(x)}),M=Math.min.apply(null,_);g.drawingDepth=M-1}return g.drawingDepth}var v;function b(g){g.x=g.drawingDepth*a.rankSep,g.isLeaf?(g.y=0,v&&(g.y=v.y+v.height+a.nodeSep,g.originNode.parent!==v.originNode.parent&&(g.y+=a.subTreeSep)),v=g):(g.children.forEach(function(_){b(_)}),g.y=(g.leftChild.y+g.rightChild.y)/2)}var y=u(i);return f(y),b(y),n(y,i,a.isHorizontal),i}},function(t,l,s){function c(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var r=s(11),h=s(117),n=s(30),i=s(7),a=["LR","RL","H"],o=a[0],u=function(b){c(y,b);function y(){return b.apply(this,arguments)||this}var g=y.prototype;return g.execute=function(){var M=this,x=M.options,m=M.rootNode;x.isHorizontal=!0;var S=x.indent,P=S===void 0?20:S,A=x.dropCap,O=A===void 0?!0:A,L=x.direction||o;if(L&&a.indexOf(L)===-1)throw new TypeError("Invalid direction: "+L);if(L===a[0])h(m,P,O);else if(L===a[1])h(m,P,O),m.right2left();else if(L===a[2]){var W=n(m,x),F=W.left,K=W.right;h(F,P,O),F.right2left(),h(K,P,O);var V=F.getBoundingBox();K.translate(V.width,0),m.x=K.x-m.width/2}return m},y}(r),f={};function v(b,y){return y=i.assign({},f,y),new u(b,y).execute()}t.exports=v},function(t,l){function s(c,r,h,n){if(!n)try{if(c.id===c.parent.children[0].id){c.x+=h*c.depth,c.y=r?r.y:0;return}}catch(i){}c.x+=h*c.depth,c.y=r?r.y+r.height:0}t.exports=function(c,r,h){var n=null;c.eachNode(function(i){s(i,n,r,h),n=i})}},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(119),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){var c=s(7);function r(i,a){var o=0;return i.children.length?i.children.forEach(function(u){o+=r(u,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function h(i){var a=i.children,o=a.length;if(o){a.forEach(function(g){h(g)});var u=a[0],f=a[o-1],v=f.y-u.y+f.height,b=0;if(a.forEach(function(g){b+=g.totalHeight}),v>i.height)i.y=u.y+v/2-i.height/2;else if(a.length!==1||i.height>b){var y=i.y+(i.height-v)/2-u.y;a.forEach(function(g){g.translate(0,y)})}else i.y=(u.y+u.height/2+f.y+f.height/2)/2-i.height/2}}var n={getSubTreeSep:function(){return 0}};t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},n,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,r(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var u=o.children,f=u.length;if(f){var v=u[0];if(v.startY=o.startY+o._subTreeSep,f===1)v.y=o.y+o.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var b=1;b<f;b++){var y=u[b];y.startY=u[b-1].startY+u[b-1].totalHeight,y.y=y.startY+y.totalHeight/2-y.height/2}}}}),h(i)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];for(var n=r[0],i=1;i<r.length;i++){var a=r[i];l.default(a)&&(a=a.prototype),t.default(n.prototype,a)}};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function l(){this.map={}}return l.prototype.has=function(s){return this.map[s]!==void 0},l.prototype.get=function(s,c){var r=this.map[s];return r===void 0?c:r},l.prototype.set=function(s,c){this.map[s]=c},l.prototype.clear=function(){this.map={}},l.prototype.delete=function(s){delete this.map[s]},l.prototype.size=function(){return Object.keys(this.map).length},l}();T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c,r){return s<c?c:s>r?r:s};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(l)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function s(c){if(typeof c!="object"||c===null)return c;var r;if(t.default(c)){r=[];for(var h=0,n=c.length;h<n;h++)typeof c[h]=="object"&&c[h]!=null?r[h]=s(c[h]):r[h]=c[h]}else{r={};for(var i in c)typeof c[i]=="object"&&c[i]!=null?r[i]=s(c[i]):r[i]=c[i]}return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){return t.default(c)?c.indexOf(r)>-1:!1};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s,c){var r;return function(){var h=this,n=arguments,i=function(){r=null,c||l.apply(h,n)},a=c&&!r;clearTimeout(r),r=setTimeout(i,s),a&&l.apply(h,n)}}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u!==null&&l.default(u)?(l.default(h[o])||(h[o]={}),i<a?c(h[o],u,i+1,a):h[o]=n[o]):t.default(u)?(h[o]=[],h[o]=h[o].concat(u)):u!==void 0&&(h[o]=u)}}var r=function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];for(var o=0;o<i.length;o+=1)c(n,i[o]);return n};T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),s=function(r,h){return h===void 0&&(h=[]),t.default(r,function(n){return!l.default(h,n)})};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function s(c,r){if(!!c){var h;if(t.default(c))for(var n=0,i=c.length;n<i&&(h=r(c[n],n),h!==!1);n++);else if(l.default(c)){for(var a in c)if(c.hasOwnProperty(a)&&(h=r(c[a],a),h===!1))break}}}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||l.default(c)?c[c.length-1]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(!c(s[r],r))return!1;return!0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(r,h,n,i){l.default(h)||(n=h,h=r,r=function(){});var a=Object.create?function(u,f){return Object.create(u,{constructor:{value:f}})}:function(u,f){function v(){}v.prototype=u;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=t.default(o,r.prototype),r.superclass=a(h.prototype,h),t.default(o,n),t.default(r,i),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];r(i,n)&&h.push(i)}return h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s,c){c===void 0&&(c=0);for(var r=c;r<l.length;r++)if(s(l[r],r))return r;return-1}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function r(h,n){if(!s.default(h))return null;var i;if(t.default(n)&&(i=n),c.default(n)&&(i=function(u){return l.default(u,n)}),i){for(var a=0;a<h.length;a+=1)if(i(h[a]))return h[a]}return null}T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t.default(o)){l.default(o)?n=o[0]:n=o;break}}return n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){var r=c.toString(),h=r.indexOf(".");if(h===-1)return Math.round(s);var n=r.substr(h+1).length;return n>20&&(n=20),parseFloat(s.toFixed(n))};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function s(c,r){if(r===void 0&&(r=[]),!t.default(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function(c){if(!t.default(c))return[];for(var r=[],h=0;h<c.length;h++)r=r.concat(c[h]);return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function(c){var r=c.filter(function(o){return!isNaN(o)});if(!r.length)return{min:0,max:0};if(t.default(c[0])){for(var h=[],n=0;n<c.length;n++)h=h.concat(c[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,l=function(c){return t.call(c).replace(/^\[object /,"").replace(/]$/,"")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){return l["_wrap_"+s]}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");T.default=function(l,s,c){for(var r=0,h=t.default(s)?s.split("."):s;l&&r<h.length;)l=l[h[r++]];return l===void 0||r<h.length?c:l}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;function c(r,h){if(!h||!t.default(r))return{};for(var n={},i=l.default(h)?h:function(f){return f[h]},a,o=0;o<r.length;o++){var u=r[o];a=i(u),s.call(n,a)?n[a].push(u):n[a]=[u]}return n}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),c=function(h,n){if(!n)return{0:h};if(!l.default(n)){var i=t.default(n)?n:n.replace(/\s+/g,"").split("*");n=function(u){for(var f="_",v=0,b=i.length;v<b;v++)f+=u[i[v]]&&u[i[v]].toString();return f}}var a=s.default(h,n);return a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");T.default=function(l,s){if(!s)return[l];var c=t.default(l,s),r=[];for(var h in c)r.push(c[h]);return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");T.default=function(s,c){return t.default(l.default(s),c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,l){return t.hasOwnProperty(l)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function l(s){if(t.default(s))return s[0]}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){return t}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(T,"contains",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(T,"includes",{enumerable:!0,get:function(){return t.default}});var l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(T,"difference",{enumerable:!0,get:function(){return l.default}});var s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(T,"find",{enumerable:!0,get:function(){return s.default}});var c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(T,"findIndex",{enumerable:!0,get:function(){return c.default}});var r=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(T,"firstValue",{enumerable:!0,get:function(){return r.default}});var h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(T,"flatten",{enumerable:!0,get:function(){return h.default}});var n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(T,"flattenDeep",{enumerable:!0,get:function(){return n.default}});var i=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(T,"getRange",{enumerable:!0,get:function(){return i.default}});var a=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(T,"pull",{enumerable:!0,get:function(){return a.default}});var o=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(T,"pullAt",{enumerable:!0,get:function(){return o.default}});var u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(T,"reduce",{enumerable:!0,get:function(){return u.default}});var f=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(T,"remove",{enumerable:!0,get:function(){return f.default}});var v=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(T,"sortBy",{enumerable:!0,get:function(){return v.default}});var b=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(T,"union",{enumerable:!0,get:function(){return b.default}});var y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(T,"uniq",{enumerable:!0,get:function(){return y.default}});var g=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(T,"valuesOfKey",{enumerable:!0,get:function(){return g.default}});var _=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(T,"head",{enumerable:!0,get:function(){return _.default}});var M=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(T,"last",{enumerable:!0,get:function(){return M.default}});var x=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(T,"startsWith",{enumerable:!0,get:function(){return x.default}});var m=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(T,"endsWith",{enumerable:!0,get:function(){return m.default}});var S=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(T,"filter",{enumerable:!0,get:function(){return S.default}});var P=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(T,"every",{enumerable:!0,get:function(){return P.default}});var A=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(T,"some",{enumerable:!0,get:function(){return A.default}});var O=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(T,"group",{enumerable:!0,get:function(){return O.default}});var L=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(T,"groupBy",{enumerable:!0,get:function(){return L.default}});var W=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(T,"groupToMap",{enumerable:!0,get:function(){return W.default}});var F=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(T,"getWrapBehavior",{enumerable:!0,get:function(){return F.default}});var K=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(T,"wrapBehavior",{enumerable:!0,get:function(){return K.default}});var V=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(T,"number2color",{enumerable:!0,get:function(){return V.default}});var k=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(T,"parseRadius",{enumerable:!0,get:function(){return k.default}});var Z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(T,"clamp",{enumerable:!0,get:function(){return Z.default}});var X=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(T,"fixedBase",{enumerable:!0,get:function(){return X.default}});var it=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(T,"isDecimal",{enumerable:!0,get:function(){return it.default}});var ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(T,"isEven",{enumerable:!0,get:function(){return ft.default}});var pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return pt.default}});var ut=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(T,"isNegative",{enumerable:!0,get:function(){return ut.default}});var It=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return It.default}});var Nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(T,"isOdd",{enumerable:!0,get:function(){return Nt.default}});var Rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(T,"isPositive",{enumerable:!0,get:function(){return Rt.default}});var Mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(T,"maxBy",{enumerable:!0,get:function(){return Mt.default}});var bt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(T,"minBy",{enumerable:!0,get:function(){return bt.default}});var At=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return At.default}});var rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(T,"toDegree",{enumerable:!0,get:function(){return rt.default}});var Pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(T,"toInteger",{enumerable:!0,get:function(){return Pt.default}});var z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return z.default}});var Q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(T,"forIn",{enumerable:!0,get:function(){return Q.default}});var gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(T,"has",{enumerable:!0,get:function(){return gt.default}});var et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(T,"hasKey",{enumerable:!0,get:function(){return et.default}});var ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(T,"hasValue",{enumerable:!0,get:function(){return ot.default}});var xt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(T,"keys",{enumerable:!0,get:function(){return xt.default}});var H=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(T,"isMatch",{enumerable:!0,get:function(){return H.default}});var nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(T,"values",{enumerable:!0,get:function(){return nt.default}});var at=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(T,"lowerCase",{enumerable:!0,get:function(){return at.default}});var q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(T,"lowerFirst",{enumerable:!0,get:function(){return q.default}});var _t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(T,"substitute",{enumerable:!0,get:function(){return _t.default}});var yt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(T,"upperCase",{enumerable:!0,get:function(){return yt.default}});var Ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(T,"upperFirst",{enumerable:!0,get:function(){return Ft.default}});var Qt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(T,"getType",{enumerable:!0,get:function(){return Qt.default}});var ee=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(T,"isArguments",{enumerable:!0,get:function(){return ee.default}});var Vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return Vt.default}});var $t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(T,"isArrayLike",{enumerable:!0,get:function(){return $t.default}});var Me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(T,"isBoolean",{enumerable:!0,get:function(){return Me.default}});var me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return me.default}});var le=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(T,"isError",{enumerable:!0,get:function(){return le.default}});var be=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return be.default}});var ze=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(T,"isFinite",{enumerable:!0,get:function(){return ze.default}});var Xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return Xe.default}});var Sn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(T,"isNull",{enumerable:!0,get:function(){return Sn.default}});var Xn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return Xn.default}});var Hn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(T,"isObject",{enumerable:!0,get:function(){return Hn.default}});var nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(T,"isObjectLike",{enumerable:!0,get:function(){return nn.default}});var en=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(T,"isPlainObject",{enumerable:!0,get:function(){return en.default}});var An=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(T,"isPrototype",{enumerable:!0,get:function(){return An.default}});var Nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(T,"isRegExp",{enumerable:!0,get:function(){return Nn.default}});var fr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return fr.default}});var hi=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(T,"isType",{enumerable:!0,get:function(){return hi.default}});var Ce=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(T,"isUndefined",{enumerable:!0,get:function(){return Ce.default}});var Te=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(T,"isElement",{enumerable:!0,get:function(){return Te.default}});var Jt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return Jt.default}});var pe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return pe.default}});var Wt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(T,"augment",{enumerable:!0,get:function(){return Wt.default}});var ie=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(T,"clone",{enumerable:!0,get:function(){return ie.default}});var Ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(T,"debounce",{enumerable:!0,get:function(){return Ae.default}});var ue=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(T,"memoize",{enumerable:!0,get:function(){return ue.default}});var xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(T,"deepMix",{enumerable:!0,get:function(){return xe.default}});var $e=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(T,"each",{enumerable:!0,get:function(){return $e.default}});var Fn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(T,"extend",{enumerable:!0,get:function(){return Fn.default}});var or=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(T,"indexOf",{enumerable:!0,get:function(){return or.default}});var En=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(T,"isEmpty",{enumerable:!0,get:function(){return En.default}});var Pn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(T,"isEqual",{enumerable:!0,get:function(){return Pn.default}});var br=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(T,"isEqualWith",{enumerable:!0,get:function(){return br.default}});var Pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(T,"map",{enumerable:!0,get:function(){return Pr.default}});var ln=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(T,"mapValues",{enumerable:!0,get:function(){return ln.default}});var Cr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(T,"mix",{enumerable:!0,get:function(){return Cr.default}}),Object.defineProperty(T,"assign",{enumerable:!0,get:function(){return Cr.default}});var Ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(T,"get",{enumerable:!0,get:function(){return Ar.default}});var Be=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(T,"set",{enumerable:!0,get:function(){return Be.default}});var We=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(T,"pick",{enumerable:!0,get:function(){return We.default}});var Ye=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(T,"throttle",{enumerable:!0,get:function(){return Ye.default}});var fn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(T,"toArray",{enumerable:!0,get:function(){return fn.default}});var gn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(T,"toString",{enumerable:!0,get:function(){return gn.default}});var Bn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(T,"uniqueId",{enumerable:!0,get:function(){return Bn.default}});var bn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(T,"noop",{enumerable:!0,get:function(){return bn.default}});var Ln=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(T,"identity",{enumerable:!0,get:function(){return Ln.default}});var ir=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(T,"size",{enumerable:!0,get:function(){return ir.default}});var Yn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(T,"Cache",{enumerable:!0,get:function(){return Yn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Arguments")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s!==null&&typeof s!="function"&&isFinite(s.length)};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return Array.isArray?Array.isArray(l):t.default(l,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Boolean")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Date")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%1!=0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s instanceof Element||s instanceof HTMLDocument};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),r=Object.prototype.hasOwnProperty;function h(n){if(t.default(n))return!0;if(l.default(n))return!n.length;var i=s.default(n);if(i==="Map"||i==="Set")return!n.size;if(c.default(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");T.default=function(s,c,r){return t.default(r)?!!r(s,c):l.default(s,c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),c=function r(h,n){if(h===n)return!0;if(!h||!n||s.default(h)||s.default(n))return!1;if(l.default(h)||l.default(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t.default(h)||t.default(n)){var o=Object.keys(h),u=Object.keys(n);if(o.length!==u.length)return!1;for(var i=!0,a=0;a<o.length&&(i=r(h[o[a]],n[o[a]]),!!i);a++);return i}return!1};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Error")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%2==0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function l(s){return t.default(s)&&isFinite(s)}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return t.default(l,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=Number.isInteger?Number.isInteger:function(s){return t.default(s)&&s%1==0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function s(c,r){var h=l.default(r),n=h.length;if(t.default(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c<0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=1e-5;function l(s,c,r){return r===void 0&&(r=t),Math.abs(s-c)<r}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Number")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return typeof s=="object"&&s!==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){var l=typeof t;return t!==null&&l==="object"||l==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%2!=0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),s=function(r){if(!t.default(r)||!l.default(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c>0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.prototype,l=function(c){var r=c&&c.constructor,h=typeof r=="function"&&r.prototype||t;return c===h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"RegExp")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return t.default(l,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,l=function(c,r){return t.call(c)==="[object "+r+"]"};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===void 0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t.default(c,function(h,n){l.default(c)&&n==="prototype"||r.push(n)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function l(s){if(t.default(s)){var c=s;return c[c.length-1]}}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){return t.default(c).toLowerCase()};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){var r=t.default(c);return r.charAt(0).toLowerCase()+r.substring(1)};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),s=function(r){return r};T.default=function(c,r){r===void 0&&(r=s);var h={};return l.default(c)&&!t.default(c)&&Object.keys(c).forEach(function(n){h[n]=r(c[n],n)}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];h.push(r(i,n))}return h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!l.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i>n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(l,s){if(!t.default(l))throw new TypeError("Expected a function");var c=function r(){for(var h=[],n=0;n<arguments.length;n++)h[n]=arguments[n];var i=s?s.apply(this,h):h[0],a=r.cache;if(a.has(i))return a.get(i);var o=l.apply(this,h);return a.set(i,o),o};return c.cache=new Map,c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!l.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i<n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s,c){for(var r in c)c.hasOwnProperty(r)&&r!=="constructor"&&c[r]!==void 0&&(s[r]=c[r])}function l(s,c,r,h){return c&&t(s,c),r&&t(s,r),h&&t(s,h),s}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){return(s%c+c)%c};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};function l(s){var c=t[s];if(!c){for(var r=s.toString(16),h=r.length;h<6;h++)r="0"+r;c="#"+r,t[s]=c}return c}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function l(s){var c=0,r=0,h=0,n=0;return t.default(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=Object.prototype.hasOwnProperty;T.default=function(c,r){if(c===null||!l.default(c))return{};var h={};return t.default(r,function(n){s.call(c,n)&&(h[n]=c[n])}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=Array.prototype.splice,s=function(r,h){if(!t.default(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,l.call(r,o,1))}return r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Array.prototype,l=t.splice,s=t.indexOf,c=function(h){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++)for(var o=n[a],u=-1;(u=s.call(h,o))>-1;)l.call(h,u,1);return h};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),c=function(h,n,i){if(!l.default(h)&&!s.default(h))return h;var a=i;return t.default(h,function(o,u){a=n(a,o,u)}),a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),s=function(r,h){var n=[];if(!t.default(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var u=r[i];h(u,i,r)&&(n.push(u),a.push(i))}return l.default(r,a),n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return setTimeout(c,16)};return s(l)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");T.default=function(c,r,h){var n=c,i=l.default(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(t.default(n[a])||(n[a]=s.default(i[o+1])?[]:{}),n=n[a]):n[a]=h}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function s(c){return t.default(c)?0:l.default(c)?c.length:Object.keys(c).length}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(c(s[r],r))return!0;return!1};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function c(r,h){var n;if(s.default(h))n=function(o,u){return h(o)-h(u)};else{var i=[];l.default(h)?i.push(h):t.default(h)&&(i=h),n=function(o,u){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>u[v])return 1;if(o[v]<u[v])return-1}return 0}}return r.sort(n),r}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||l.default(c)?c[0]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){return!l||!s?l:l.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,l,s){var c,r,h,n,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=l-(f-i);return r=this,h=arguments,v<=0||v>l?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");T.default=function(l){return t.default(l)?Array.prototype.slice.call(l):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=180/Math.PI,l=function(c){return t*c};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Math.PI/180,l=function(c){return t*c};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(l){return t.default(l)?"":l.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),l=function(){for(var c=[],r=0;r<arguments.length;r++)c[r]=arguments[r];return t.default([].concat.apply([],c))};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),s=function(r){var h=[];return l.default(r,function(n){t.default(h,n)||h.push(n)}),h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};T.default=function(l){return l=l||"g",t[l]?t[l]+=1:t[l]=1,l+t[l]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){return t.default(c).toUpperCase()};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){var r=t.default(c);return r.charAt(0).toUpperCase()+r.substring(1)};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(s,c){for(var r=[],h={},n=0;n<s.length;n++){var i=s[n],a=i[c];if(!l.default(a)){t.default(a)||(a=[a]);for(var o=0;o<a.length;o++){var u=a[o];h[u]||(r.push(u),h[u]=!0)}}}return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t.default(c,function(h,n){l.default(c)&&n==="prototype"||r.push(h)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){if(l["_wrap_"+s])return l["_wrap_"+s];var c=function(h){l[s](h)};return l["_wrap_"+s]=c,c}T.default=t},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(E,T){E.exports=e;function e(t){var l=0,s=0,c=0,r=0;return t.map(function(h){h=h.slice();var n=h[0],i=n.toUpperCase();if(n!=i)switch(h[0]=i,n){case"a":h[6]+=c,h[7]+=r;break;case"v":h[1]+=r;break;case"h":h[1]+=c;break;default:for(var a=1;a<h.length;)h[a++]+=c,h[a++]+=r}switch(i){case"Z":c=l,r=s;break;case"H":c=h[1];break;case"V":r=h[1];break;case"M":c=l=h[1],r=s=h[2];break;default:c=h[h.length-2],r=h[h.length-1]}return h})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(z,Q){return z<Q?-1:z>Q?1:z>=Q?0:NaN}function s(z){return z.length===1&&(z=c(z)),{left:function(gt,et,ot,xt){for(ot==null&&(ot=0),xt==null&&(xt=gt.length);ot<xt;){var H=ot+xt>>>1;z(gt[H],et)<0?ot=H+1:xt=H}return ot},right:function(gt,et,ot,xt){for(ot==null&&(ot=0),xt==null&&(xt=gt.length);ot<xt;){var H=ot+xt>>>1;z(gt[H],et)>0?xt=H:ot=H+1}return ot}}}function c(z){return function(Q,gt){return l(z(Q),gt)}}var r=s(l),h=r.right,n=r.left;function i(z,Q){Q==null&&(Q=a);for(var gt=0,et=z.length-1,ot=z[0],xt=new Array(et<0?0:et);gt<et;)xt[gt]=Q(ot,ot=z[++gt]);return xt}function a(z,Q){return[z,Q]}function o(z,Q,gt){var et=z.length,ot=Q.length,xt=new Array(et*ot),H,nt,at,q;for(gt==null&&(gt=a),H=at=0;H<et;++H)for(q=z[H],nt=0;nt<ot;++nt,++at)xt[at]=gt(q,Q[nt]);return xt}function u(z,Q){return Q<z?-1:Q>z?1:Q>=z?0:NaN}function f(z){return z===null?NaN:+z}function v(z,Q){var gt=z.length,et=0,ot=-1,xt=0,H,nt,at=0;if(Q==null)for(;++ot<gt;)isNaN(H=f(z[ot]))||(nt=H-xt,xt+=nt/++et,at+=nt*(H-xt));else for(;++ot<gt;)isNaN(H=f(Q(z[ot],ot,z)))||(nt=H-xt,xt+=nt/++et,at+=nt*(H-xt));if(et>1)return at/(et-1)}function b(z,Q){var gt=v(z,Q);return gt&&Math.sqrt(gt)}function y(z,Q){var gt=z.length,et=-1,ot,xt,H;if(Q==null){for(;++et<gt;)if((ot=z[et])!=null&&ot>=ot)for(xt=H=ot;++et<gt;)(ot=z[et])!=null&&(xt>ot&&(xt=ot),H<ot&&(H=ot))}else for(;++et<gt;)if((ot=Q(z[et],et,z))!=null&&ot>=ot)for(xt=H=ot;++et<gt;)(ot=Q(z[et],et,z))!=null&&(xt>ot&&(xt=ot),H<ot&&(H=ot));return[xt,H]}var g=Array.prototype,_=g.slice,M=g.map;function x(z){return function(){return z}}function m(z){return z}function S(z,Q,gt){z=+z,Q=+Q,gt=(ot=arguments.length)<2?(Q=z,z=0,1):ot<3?1:+gt;for(var et=-1,ot=Math.max(0,Math.ceil((Q-z)/gt))|0,xt=new Array(ot);++et<ot;)xt[et]=z+et*gt;return xt}var P=Math.sqrt(50),A=Math.sqrt(10),O=Math.sqrt(2);function L(z,Q,gt){var et,ot=-1,xt,H,nt;if(Q=+Q,z=+z,gt=+gt,z===Q&&gt>0)return[z];if((et=Q<z)&&(xt=z,z=Q,Q=xt),(nt=W(z,Q,gt))===0||!isFinite(nt))return[];if(nt>0)for(z=Math.ceil(z/nt),Q=Math.floor(Q/nt),H=new Array(xt=Math.ceil(Q-z+1));++ot<xt;)H[ot]=(z+ot)*nt;else for(z=Math.floor(z*nt),Q=Math.ceil(Q*nt),H=new Array(xt=Math.ceil(z-Q+1));++ot<xt;)H[ot]=(z-ot)/nt;return et&&H.reverse(),H}function W(z,Q,gt){var et=(Q-z)/Math.max(0,gt),ot=Math.floor(Math.log(et)/Math.LN10),xt=et/Math.pow(10,ot);return ot>=0?(xt>=P?10:xt>=A?5:xt>=O?2:1)*Math.pow(10,ot):-Math.pow(10,-ot)/(xt>=P?10:xt>=A?5:xt>=O?2:1)}function F(z,Q,gt){var et=Math.abs(Q-z)/Math.max(0,gt),ot=Math.pow(10,Math.floor(Math.log(et)/Math.LN10)),xt=et/ot;return xt>=P?ot*=10:xt>=A?ot*=5:xt>=O&&(ot*=2),Q<z?-ot:ot}function K(z){return Math.ceil(Math.log(z.length)/Math.LN2)+1}function V(){var z=m,Q=y,gt=K;function et(ot){var xt,H=ot.length,nt,at=new Array(H);for(xt=0;xt<H;++xt)at[xt]=z(ot[xt],xt,ot);var q=Q(at),_t=q[0],yt=q[1],Ft=gt(at,_t,yt);Array.isArray(Ft)||(Ft=F(_t,yt,Ft),Ft=S(Math.ceil(_t/Ft)*Ft,yt,Ft));for(var Qt=Ft.length;Ft[0]<=_t;)Ft.shift(),--Qt;for(;Ft[Qt-1]>yt;)Ft.pop(),--Qt;var ee=new Array(Qt+1),Vt;for(xt=0;xt<=Qt;++xt)Vt=ee[xt]=[],Vt.x0=xt>0?Ft[xt-1]:_t,Vt.x1=xt<Qt?Ft[xt]:yt;for(xt=0;xt<H;++xt)nt=at[xt],_t<=nt&&nt<=yt&&ee[h(Ft,nt,0,Qt)].push(ot[xt]);return ee}return et.value=function(ot){return arguments.length?(z=typeof ot=="function"?ot:x(ot),et):z},et.domain=function(ot){return arguments.length?(Q=typeof ot=="function"?ot:x([ot[0],ot[1]]),et):Q},et.thresholds=function(ot){return arguments.length?(gt=typeof ot=="function"?ot:Array.isArray(ot)?x(_.call(ot)):x(ot),et):gt},et}function k(z,Q,gt){if(gt==null&&(gt=f),!!(et=z.length)){if((Q=+Q)<=0||et<2)return+gt(z[0],0,z);if(Q>=1)return+gt(z[et-1],et-1,z);var et,ot=(et-1)*Q,xt=Math.floor(ot),H=+gt(z[xt],xt,z),nt=+gt(z[xt+1],xt+1,z);return H+(nt-H)*(ot-xt)}}function Z(z,Q,gt){return z=M.call(z,f).sort(l),Math.ceil((gt-Q)/(2*(k(z,.75)-k(z,.25))*Math.pow(z.length,-1/3)))}function X(z,Q,gt){return Math.ceil((gt-Q)/(3.5*b(z)*Math.pow(z.length,-1/3)))}function it(z,Q){var gt=z.length,et=-1,ot,xt;if(Q==null){for(;++et<gt;)if((ot=z[et])!=null&&ot>=ot)for(xt=ot;++et<gt;)(ot=z[et])!=null&&ot>xt&&(xt=ot)}else for(;++et<gt;)if((ot=Q(z[et],et,z))!=null&&ot>=ot)for(xt=ot;++et<gt;)(ot=Q(z[et],et,z))!=null&&ot>xt&&(xt=ot);return xt}function ft(z,Q){var gt=z.length,et=gt,ot=-1,xt,H=0;if(Q==null)for(;++ot<gt;)isNaN(xt=f(z[ot]))?--et:H+=xt;else for(;++ot<gt;)isNaN(xt=f(Q(z[ot],ot,z)))?--et:H+=xt;if(et)return H/et}function pt(z,Q){var gt=z.length,et=-1,ot,xt=[];if(Q==null)for(;++et<gt;)isNaN(ot=f(z[et]))||xt.push(ot);else for(;++et<gt;)isNaN(ot=f(Q(z[et],et,z)))||xt.push(ot);return k(xt.sort(l),.5)}function ut(z){for(var Q=z.length,gt,et=-1,ot=0,xt,H;++et<Q;)ot+=z[et].length;for(xt=new Array(ot);--Q>=0;)for(H=z[Q],gt=H.length;--gt>=0;)xt[--ot]=H[gt];return xt}function It(z,Q){var gt=z.length,et=-1,ot,xt;if(Q==null){for(;++et<gt;)if((ot=z[et])!=null&&ot>=ot)for(xt=ot;++et<gt;)(ot=z[et])!=null&&xt>ot&&(xt=ot)}else for(;++et<gt;)if((ot=Q(z[et],et,z))!=null&&ot>=ot)for(xt=ot;++et<gt;)(ot=Q(z[et],et,z))!=null&&xt>ot&&(xt=ot);return xt}function Nt(z,Q){for(var gt=Q.length,et=new Array(gt);gt--;)et[gt]=z[Q[gt]];return et}function Rt(z,Q){if(!!(gt=z.length)){var gt,et=0,ot=0,xt,H=z[ot];for(Q==null&&(Q=l);++et<gt;)(Q(xt=z[et],H)<0||Q(H,H)!==0)&&(H=xt,ot=et);if(Q(H,H)===0)return ot}}function Mt(z,Q,gt){for(var et=(gt==null?z.length:gt)-(Q=Q==null?0:+Q),ot,xt;et;)xt=Math.random()*et--|0,ot=z[et+Q],z[et+Q]=z[xt+Q],z[xt+Q]=ot;return z}function bt(z,Q){var gt=z.length,et=-1,ot,xt=0;if(Q==null)for(;++et<gt;)(ot=+z[et])&&(xt+=ot);else for(;++et<gt;)(ot=+Q(z[et],et,z))&&(xt+=ot);return xt}function At(z){if(!(xt=z.length))return[];for(var Q=-1,gt=It(z,rt),et=new Array(gt);++Q<gt;)for(var ot=-1,xt,H=et[Q]=new Array(xt);++ot<xt;)H[ot]=z[ot][Q];return et}function rt(z){return z.length}function Pt(){return At(arguments)}t.bisect=h,t.bisectRight=h,t.bisectLeft=n,t.ascending=l,t.bisector=s,t.cross=o,t.descending=u,t.deviation=b,t.extent=y,t.histogram=V,t.thresholdFreedmanDiaconis=Z,t.thresholdScott=X,t.thresholdSturges=K,t.max=it,t.mean=ft,t.median=pt,t.merge=ut,t.min=It,t.pairs=i,t.permute=Nt,t.quantile=k,t.range=S,t.scan=Rt,t.shuffle=Mt,t.sum=bt,t.ticks=L,t.tickIncrement=W,t.tickStep=F,t.transpose=At,t.variance=v,t.zip=Pt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T)})(this,function(l){"use strict";function s(Be,We){return Be<We?-1:Be>We?1:Be>=We?0:NaN}function c(Be){var We=Be,Ye=Be;Be.length===1&&(We=function(Ln,ir){return Be(Ln)-ir},Ye=r(Be));function fn(bn,Ln,ir,Yn){for(ir==null&&(ir=0),Yn==null&&(Yn=bn.length);ir<Yn;){var _n=ir+Yn>>>1;Ye(bn[_n],Ln)<0?ir=_n+1:Yn=_n}return ir}function gn(bn,Ln,ir,Yn){for(ir==null&&(ir=0),Yn==null&&(Yn=bn.length);ir<Yn;){var _n=ir+Yn>>>1;Ye(bn[_n],Ln)>0?Yn=_n:ir=_n+1}return ir}function Bn(bn,Ln,ir,Yn){ir==null&&(ir=0),Yn==null&&(Yn=bn.length);var _n=fn(bn,Ln,ir,Yn-1);return _n>ir&&We(bn[_n-1],Ln)>-We(bn[_n],Ln)?_n-1:_n}return{left:fn,center:Bn,right:gn}}function r(Be){return function(We,Ye){return s(Be(We),Ye)}}function h(Be){return Be===null?NaN:+Be}function n(Be,We){var Ye,fn,gn,Bn,bn,Ln,ir,gn,Yn,_n,Dr,vr,zr;return t.__generator(this,function(Ai){switch(Ai.label){case 0:if(We!==void 0)return[3,9];Ai.label=1;case 1:Ai.trys.push([1,6,7,8]),Ye=t.__values(Be),fn=Ye.next(),Ai.label=2;case 2:return fn.done?[3,5]:(gn=fn.value,gn!=null&&(gn=+gn)>=gn?[4,gn]:[3,4]);case 3:Ai.sent(),Ai.label=4;case 4:return fn=Ye.next(),[3,2];case 5:return[3,8];case 6:return Bn=Ai.sent(),_n={error:Bn},[3,8];case 7:try{fn&&!fn.done&&(Dr=Ye.return)&&Dr.call(Ye)}finally{if(_n)throw _n.error}return[7];case 8:return[3,17];case 9:bn=-1,Ai.label=10;case 10:Ai.trys.push([10,15,16,17]),Ln=t.__values(Be),ir=Ln.next(),Ai.label=11;case 11:return ir.done?[3,14]:(gn=ir.value,(gn=We(gn,++bn,Be))!=null&&(gn=+gn)>=gn?[4,gn]:[3,13]);case 12:Ai.sent(),Ai.label=13;case 13:return ir=Ln.next(),[3,11];case 14:return[3,17];case 15:return Yn=Ai.sent(),vr={error:Yn},[3,17];case 16:try{ir&&!ir.done&&(zr=Ln.return)&&zr.call(Ln)}finally{if(vr)throw vr.error}return[7];case 17:return[2]}})}var i=c(s),a=i.right,o=i.left,u=c(h).center;function f(Be,We){var Ye,fn,gn,Bn,bn=0;if(We===void 0)try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;Yn!=null&&(Yn=+Yn)>=Yn&&++bn}}catch(zr){Ye={error:zr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var _n=-1;try{for(var Dr=t.__values(Be),vr=Dr.next();!vr.done;vr=Dr.next()){var Yn=vr.value;(Yn=We(Yn,++_n,Be))!=null&&(Yn=+Yn)>=Yn&&++bn}}catch(zr){gn={error:zr}}finally{try{vr&&!vr.done&&(Bn=Dr.return)&&Bn.call(Dr)}finally{if(gn)throw gn.error}}}return bn}function v(Be){return Be.length|0}function b(Be){return!(Be>0)}function y(Be){return typeof Be!="object"||"length"in Be?Be:Array.from(Be)}function g(Be){return function(We){return Be.apply(void 0,t.__spread(We))}}function _(){for(var Be=[],We=0;We<arguments.length;We++)Be[We]=arguments[We];var Ye=typeof Be[Be.length-1]=="function"&&g(Be.pop());Be=Be.map(y);var fn=Be.map(v),gn=Be.length-1,Bn=new Array(gn+1).fill(0),bn=[];if(gn<0||fn.some(b))return bn;for(;;){bn.push(Bn.map(function(ir,Yn){return Be[Yn][ir]}));for(var Ln=gn;++Bn[Ln]===fn[Ln];){if(Ln===0)return Ye?bn.map(Ye):bn;Bn[Ln--]=0}}}function M(Be,We){var Ye=0,fn=0;return Float64Array.from(Be,We===void 0?function(gn){return Ye+=+gn||0}:function(gn){return Ye+=+We(gn,fn++,Be)||0})}function x(Be,We){return We<Be?-1:We>Be?1:We>=Be?0:NaN}function m(Be,We){var Ye,fn,gn,Bn,bn=0,Ln,ir=0,Yn=0;if(We===void 0)try{for(var _n=t.__values(Be),Dr=_n.next();!Dr.done;Dr=_n.next()){var vr=Dr.value;vr!=null&&(vr=+vr)>=vr&&(Ln=vr-ir,ir+=Ln/++bn,Yn+=Ln*(vr-ir))}}catch(ka){Ye={error:ka}}finally{try{Dr&&!Dr.done&&(fn=_n.return)&&fn.call(_n)}finally{if(Ye)throw Ye.error}}else{var zr=-1;try{for(var Ai=t.__values(Be),Aa=Ai.next();!Aa.done;Aa=Ai.next()){var vr=Aa.value;(vr=We(vr,++zr,Be))!=null&&(vr=+vr)>=vr&&(Ln=vr-ir,ir+=Ln/++bn,Yn+=Ln*(vr-ir))}}catch(ka){gn={error:ka}}finally{try{Aa&&!Aa.done&&(Bn=Ai.return)&&Bn.call(Ai)}finally{if(gn)throw gn.error}}}if(bn>1)return Yn/(bn-1)}function S(Be,We){var Ye=m(Be,We);return Ye&&Math.sqrt(Ye)}function P(Be,We){var Ye,fn,gn,Bn,bn,Ln;if(We===void 0)try{for(var ir=t.__values(Be),Yn=ir.next();!Yn.done;Yn=ir.next()){var _n=Yn.value;_n!=null&&(bn===void 0?_n>=_n&&(bn=Ln=_n):(bn>_n&&(bn=_n),Ln<_n&&(Ln=_n)))}}catch(Ai){Ye={error:Ai}}finally{try{Yn&&!Yn.done&&(fn=ir.return)&&fn.call(ir)}finally{if(Ye)throw Ye.error}}else{var Dr=-1;try{for(var vr=t.__values(Be),zr=vr.next();!zr.done;zr=vr.next()){var _n=zr.value;(_n=We(_n,++Dr,Be))!=null&&(bn===void 0?_n>=_n&&(bn=Ln=_n):(bn>_n&&(bn=_n),Ln<_n&&(Ln=_n)))}}catch(Ai){gn={error:Ai}}finally{try{zr&&!zr.done&&(Bn=vr.return)&&Bn.call(vr)}finally{if(gn)throw gn.error}}}return[bn,Ln]}var A=function(){function Be(){this._partials=new Float64Array(32),this._n=0}return Be.prototype.add=function(We){for(var Ye=this._partials,fn=0,gn=0;gn<this._n&&gn<32;gn++){var Bn=Ye[gn],bn=We+Bn,Ln=Math.abs(We)<Math.abs(Bn)?We-(bn-Bn):Bn-(bn-We);Ln&&(Ye[fn++]=Ln),We=bn}return Ye[fn]=We,this._n=fn+1,this},Be.prototype.valueOf=function(){var We=this._partials,Ye=this._n,fn,gn,Bn,bn=0;if(Ye>0){for(bn=We[--Ye];Ye>0&&(fn=bn,gn=We[--Ye],bn=fn+gn,Bn=gn-(bn-fn),!Bn););Ye>0&&(Bn<0&&We[Ye-1]<0||Bn>0&&We[Ye-1]>0)&&(gn=Bn*2,fn=bn+gn,gn==fn-bn&&(bn=fn))}return bn},Be}();function O(Be,We){var Ye,fn,gn,Bn,bn=new A;if(We===void 0)try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;(Yn=+Yn)&&bn.add(Yn)}}catch(zr){Ye={error:zr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var _n=-1;try{for(var Dr=t.__values(Be),vr=Dr.next();!vr.done;vr=Dr.next()){var Yn=vr.value;(Yn=+We(Yn,++_n,Be))&&bn.add(Yn)}}catch(zr){gn={error:zr}}finally{try{vr&&!vr.done&&(Bn=Dr.return)&&Bn.call(Dr)}finally{if(gn)throw gn.error}}}return+bn}var L=function(Be){t.__extends(We,Be);function We(Ye,fn){var gn,Bn;Ye===void 0&&(Ye=[]),fn===void 0&&(fn=k);var bn=Be.call(this)||this;Object.defineProperties(bn,{_intern:{value:new Map},_key:{value:fn}});try{for(var Ln=t.__values(Ye),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=t.__read(ir.value,2),_n=Yn[0],Dr=Yn[1];bn.set(_n,Dr)}}catch(vr){gn={error:vr}}finally{try{ir&&!ir.done&&(Bn=Ln.return)&&Bn.call(Ln)}finally{if(gn)throw gn.error}}return bn}return We.prototype.get=function(Ye){return Be.prototype.get.call(this,F(this,Ye))},We.prototype.has=function(Ye){return Be.prototype.has.call(this,F(this,Ye))},We.prototype.set=function(Ye,fn){return Be.prototype.set.call(this,K(this,Ye),fn)},We.prototype.delete=function(Ye){return Be.prototype.delete.call(this,V(this,Ye))},We}(Map),W=function(Be){t.__extends(We,Be);function We(Ye,fn){var gn,Bn;Ye===void 0&&(Ye=[]),fn===void 0&&(fn=k);var bn=Be.call(this)||this;Object.defineProperties(bn,{_intern:{value:new Map},_key:{value:fn}});try{for(var Ln=t.__values(Ye),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;bn.add(Yn)}}catch(_n){gn={error:_n}}finally{try{ir&&!ir.done&&(Bn=Ln.return)&&Bn.call(Ln)}finally{if(gn)throw gn.error}}return bn}return We.prototype.has=function(Ye){return Be.prototype.has.call(this,F(this,Ye))},We.prototype.add=function(Ye){return Be.prototype.add.call(this,K(this,Ye))},We.prototype.delete=function(Ye){return Be.prototype.delete.call(this,V(this,Ye))},We}(Set);function F(Be,We){var Ye=Be._intern,fn=Be._key,gn=fn(We);return Ye.has(gn)?Ye.get(gn):We}function K(Be,We){var Ye=Be._intern,fn=Be._key,gn=fn(We);return Ye.has(gn)?Ye.get(gn):(Ye.set(gn,We),We)}function V(Be,We){var Ye=Be._intern,fn=Be._key,gn=fn(We);return Ye.has(gn)&&(We=Ye.get(We),Ye.delete(gn)),We}function k(Be){return Be!==null&&typeof Be=="object"?Be.valueOf():Be}function Z(Be){return Be}function X(Be){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Rt(Be,Z,Z,We)}function it(Be){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Rt(Be,Array.from,Z,We)}function ft(Be,We){for(var Ye=[],fn=2;fn<arguments.length;fn++)Ye[fn-2]=arguments[fn];return Rt(Be,Z,We,Ye)}function pt(Be,We){for(var Ye=[],fn=2;fn<arguments.length;fn++)Ye[fn-2]=arguments[fn];return Rt(Be,Array.from,We,Ye)}function ut(Be){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Rt(Be,Z,Nt,We)}function It(Be){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Rt(Be,Array.from,Nt,We)}function Nt(Be){if(Be.length!==1)throw new Error("duplicate key");return Be[0]}function Rt(Be,We,Ye,fn){return function gn(Bn,bn){var Ln,ir,Yn,_n;if(bn>=fn.length)return Ye(Bn);var Dr=new L,vr=fn[bn++],zr=-1;try{for(var Ai=t.__values(Bn),Aa=Ai.next();!Aa.done;Aa=Ai.next()){var ka=Aa.value,eo=vr(ka,++zr,Bn),Zo=Dr.get(eo);Zo?Zo.push(ka):Dr.set(eo,[ka])}}catch(So){Ln={error:So}}finally{try{Aa&&!Aa.done&&(ir=Ai.return)&&ir.call(Ai)}finally{if(Ln)throw Ln.error}}try{for(var Ea=t.__values(Dr),so=Ea.next();!so.done;so=Ea.next()){var Ko=t.__read(so.value,2),eo=Ko[0],no=Ko[1];Dr.set(eo,gn(no,bn))}}catch(So){Yn={error:So}}finally{try{so&&!so.done&&(_n=Ea.return)&&_n.call(Ea)}finally{if(Yn)throw Yn.error}}return We(Dr)}(Be,0)}function Mt(Be,We){return Array.from(We,function(Ye){return Be[Ye]})}function bt(Be){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];if(typeof Be[Symbol.iterator]!="function")throw new TypeError("values is not iterable");Be=Array.from(Be);var fn=t.__read(We,1),gn=fn[0],Bn=gn===void 0?s:gn;if(Bn.length===1||We.length>1){var bn=Uint32Array.from(Be,function(Ln,ir){return ir});return We.length>1?(We=We.map(function(Ln){return Be.map(Ln)}),bn.sort(function(Ln,ir){var Yn,_n;try{for(var Dr=t.__values(We),vr=Dr.next();!vr.done;vr=Dr.next()){var zr=vr.value,Ai=s(zr[Ln],zr[ir]);if(Ai)return Ai}}catch(Aa){Yn={error:Aa}}finally{try{vr&&!vr.done&&(_n=Dr.return)&&_n.call(Dr)}finally{if(Yn)throw Yn.error}}})):(Bn=Be.map(Bn),bn.sort(function(Ln,ir){return s(Bn[Ln],Bn[ir])})),Mt(Be,bn)}return Be.sort(Bn)}function At(Be,We,Ye){return(We.length===1?bt(ft(Be,We,Ye),function(fn,gn){var Bn=t.__read(fn,2),bn=Bn[0],Ln=Bn[1],ir=t.__read(gn,2),Yn=ir[0],_n=ir[1];return s(Ln,_n)||s(bn,Yn)}):bt(X(Be,Ye),function(fn,gn){var Bn=t.__read(fn,2),bn=Bn[0],Ln=Bn[1],ir=t.__read(gn,2),Yn=ir[0],_n=ir[1];return We(Ln,_n)||s(bn,Yn)})).map(function(fn){var gn=t.__read(fn,1),Bn=gn[0];return Bn})}var rt=Array.prototype,Pt=rt.slice;function z(Be){return function(){return Be}}var Q=Math.sqrt(50),gt=Math.sqrt(10),et=Math.sqrt(2);function ot(Be,We,Ye){var fn,gn=-1,Bn,bn,Ln;if(We=+We,Be=+Be,Ye=+Ye,Be===We&&Ye>0)return[Be];if((fn=We<Be)&&(Bn=Be,Be=We,We=Bn),(Ln=xt(Be,We,Ye))===0||!isFinite(Ln))return[];if(Ln>0)for(Be=Math.ceil(Be/Ln),We=Math.floor(We/Ln),bn=new Array(Bn=Math.ceil(We-Be+1));++gn<Bn;)bn[gn]=(Be+gn)*Ln;else for(Ln=-Ln,Be=Math.ceil(Be*Ln),We=Math.floor(We*Ln),bn=new Array(Bn=Math.ceil(We-Be+1));++gn<Bn;)bn[gn]=(Be+gn)/Ln;return fn&&bn.reverse(),bn}function xt(Be,We,Ye){var fn=(We-Be)/Math.max(0,Ye),gn=Math.floor(Math.log(fn)/Math.LN10),Bn=fn/Math.pow(10,gn);return gn>=0?(Bn>=Q?10:Bn>=gt?5:Bn>=et?2:1)*Math.pow(10,gn):-Math.pow(10,-gn)/(Bn>=Q?10:Bn>=gt?5:Bn>=et?2:1)}function H(Be,We,Ye){var fn=Math.abs(We-Be)/Math.max(0,Ye),gn=Math.pow(10,Math.floor(Math.log(fn)/Math.LN10)),Bn=fn/gn;return Bn>=Q?gn*=10:Bn>=gt?gn*=5:Bn>=et&&(gn*=2),We<Be?-gn:gn}function nt(Be,We,Ye){for(var fn;;){var gn=xt(Be,We,Ye);if(gn===fn||gn===0||!isFinite(gn))return[Be,We];gn>0?(Be=Math.floor(Be/gn)*gn,We=Math.ceil(We/gn)*gn):gn<0&&(Be=Math.ceil(Be*gn)/gn,We=Math.floor(We*gn)/gn),fn=gn}}function at(Be){return Math.ceil(Math.log(f(Be))/Math.LN2)+1}function q(){var Be=Z,We=P,Ye=at;function fn(gn){var Bn;Array.isArray(gn)||(gn=Array.from(gn));var bn,Ln=gn.length,ir,Yn=new Array(Ln);for(bn=0;bn<Ln;++bn)Yn[bn]=Be(gn[bn],bn,gn);var _n=We(Yn),Dr=_n[0],vr=_n[1],zr=Ye(Yn,Dr,vr);if(!Array.isArray(zr)){var Ai=vr,Aa=+zr;if(We===P&&(Bn=t.__read(nt(Dr,vr,Aa),2),Dr=Bn[0],vr=Bn[1]),zr=ot(Dr,vr,Aa),zr[zr.length-1]>=vr)if(Ai>=vr&&We===P){var ka=xt(Dr,vr,Aa);isFinite(ka)&&(ka>0?vr=(Math.floor(vr/ka)+1)*ka:ka<0&&(vr=(Math.ceil(vr*-ka)+1)/-ka))}else zr.pop()}for(var eo=zr.length;zr[0]<=Dr;)zr.shift(),--eo;for(;zr[eo-1]>vr;)zr.pop(),--eo;var Zo=new Array(eo+1),Ea;for(bn=0;bn<=eo;++bn)Ea=Zo[bn]=[],Ea.x0=bn>0?zr[bn-1]:Dr,Ea.x1=bn<eo?zr[bn]:vr;for(bn=0;bn<Ln;++bn)ir=Yn[bn],Dr<=ir&&ir<=vr&&Zo[a(zr,ir,0,eo)].push(gn[bn]);return Zo}return fn.value=function(gn){return arguments.length?(Be=typeof gn=="function"?gn:z(gn),fn):Be},fn.domain=function(gn){return arguments.length?(We=typeof gn=="function"?gn:z([gn[0],gn[1]]),fn):We},fn.thresholds=function(gn){return arguments.length?(Ye=typeof gn=="function"?gn:Array.isArray(gn)?z(Pt.call(gn)):z(gn),fn):Ye},fn}function _t(Be,We){var Ye,fn,gn,Bn,bn;if(We===void 0)try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;Yn!=null&&(bn<Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){Ye={error:zr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var _n=-1;try{for(var Dr=t.__values(Be),vr=Dr.next();!vr.done;vr=Dr.next()){var Yn=vr.value;(Yn=We(Yn,++_n,Be))!=null&&(bn<Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){gn={error:zr}}finally{try{vr&&!vr.done&&(Bn=Dr.return)&&Bn.call(Dr)}finally{if(gn)throw gn.error}}}return bn}function yt(Be,We){var Ye,fn,gn,Bn,bn;if(We===void 0)try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;Yn!=null&&(bn>Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){Ye={error:zr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var _n=-1;try{for(var Dr=t.__values(Be),vr=Dr.next();!vr.done;vr=Dr.next()){var Yn=vr.value;(Yn=We(Yn,++_n,Be))!=null&&(bn>Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){gn={error:zr}}finally{try{vr&&!vr.done&&(Bn=Dr.return)&&Bn.call(Dr)}finally{if(gn)throw gn.error}}}return bn}function Ft(Be,We,Ye,fn,gn){for(Ye===void 0&&(Ye=0),fn===void 0&&(fn=Be.length-1),gn===void 0&&(gn=s);fn>Ye;){if(fn-Ye>600){var Bn=fn-Ye+1,bn=We-Ye+1,Ln=Math.log(Bn),ir=.5*Math.exp(2*Ln/3),Yn=.5*Math.sqrt(Ln*ir*(Bn-ir)/Bn)*(bn-Bn/2<0?-1:1),_n=Math.max(Ye,Math.floor(We-bn*ir/Bn+Yn)),Dr=Math.min(fn,Math.floor(We+(Bn-bn)*ir/Bn+Yn));Ft(Be,We,_n,Dr,gn)}var vr=Be[We],zr=Ye,Ai=fn;for(Qt(Be,Ye,We),gn(Be[fn],vr)>0&&Qt(Be,Ye,fn);zr<Ai;){for(Qt(Be,zr,Ai),++zr,--Ai;gn(Be[zr],vr)<0;)++zr;for(;gn(Be[Ai],vr)>0;)--Ai}gn(Be[Ye],vr)===0?Qt(Be,Ye,Ai):(++Ai,Qt(Be,Ai,fn)),Ai<=We&&(Ye=Ai+1),We<=Ai&&(fn=Ai-1)}return Be}function Qt(Be,We,Ye){var fn=Be[We];Be[We]=Be[Ye],Be[Ye]=fn}function ee(Be,We,Ye){if(Be=Float64Array.from(n(Be,Ye)),!!(fn=Be.length)){if((We=+We)<=0||fn<2)return yt(Be);if(We>=1)return _t(Be);var fn,gn=(fn-1)*We,Bn=Math.floor(gn),bn=_t(Ft(Be,Bn).subarray(0,Bn+1)),Ln=yt(Be.subarray(Bn+1));return bn+(Ln-bn)*(gn-Bn)}}function Vt(Be,We,Ye){if(Ye===void 0&&(Ye=h),!!(fn=Be.length)){if((We=+We)<=0||fn<2)return+Ye(Be[0],0,Be);if(We>=1)return+Ye(Be[fn-1],fn-1,Be);var fn,gn=(fn-1)*We,Bn=Math.floor(gn),bn=+Ye(Be[Bn],Bn,Be),Ln=+Ye(Be[Bn+1],Bn+1,Be);return bn+(Ln-bn)*(gn-Bn)}}function $t(Be,We,Ye){return Math.ceil((Ye-We)/(2*(ee(Be,.75)-ee(Be,.25))*Math.pow(f(Be),-1/3)))}function Me(Be,We,Ye){return Math.ceil((Ye-We)/(3.5*S(Be)*Math.pow(f(Be),-1/3)))}function me(Be,We){var Ye,fn,gn,Bn,bn,Ln=-1,ir=-1;if(We===void 0)try{for(var Yn=t.__values(Be),_n=Yn.next();!_n.done;_n=Yn.next()){var Dr=_n.value;++ir,Dr!=null&&(bn<Dr||bn===void 0&&Dr>=Dr)&&(bn=Dr,Ln=ir)}}catch(Ai){Ye={error:Ai}}finally{try{_n&&!_n.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}else try{for(var vr=t.__values(Be),zr=vr.next();!zr.done;zr=vr.next()){var Dr=zr.value;(Dr=We(Dr,++ir,Be))!=null&&(bn<Dr||bn===void 0&&Dr>=Dr)&&(bn=Dr,Ln=ir)}}catch(Ai){gn={error:Ai}}finally{try{zr&&!zr.done&&(Bn=vr.return)&&Bn.call(vr)}finally{if(gn)throw gn.error}}return Ln}function le(Be,We){var Ye,fn,gn,Bn,bn=0,Ln=0;if(We===void 0)try{for(var ir=t.__values(Be),Yn=ir.next();!Yn.done;Yn=ir.next()){var _n=Yn.value;_n!=null&&(_n=+_n)>=_n&&(++bn,Ln+=_n)}}catch(Ai){Ye={error:Ai}}finally{try{Yn&&!Yn.done&&(fn=ir.return)&&fn.call(ir)}finally{if(Ye)throw Ye.error}}else{var Dr=-1;try{for(var vr=t.__values(Be),zr=vr.next();!zr.done;zr=vr.next()){var _n=zr.value;(_n=We(_n,++Dr,Be))!=null&&(_n=+_n)>=_n&&(++bn,Ln+=_n)}}catch(Ai){gn={error:Ai}}finally{try{zr&&!zr.done&&(Bn=vr.return)&&Bn.call(vr)}finally{if(gn)throw gn.error}}}if(bn)return Ln/bn}function be(Be,We){return ee(Be,.5,We)}function ze(Be){var We,Ye,fn,gn,Bn,bn;return t.__generator(this,function(Ln){switch(Ln.label){case 0:Ln.trys.push([0,5,6,7]),We=t.__values(Be),Ye=We.next(),Ln.label=1;case 1:return Ye.done?[3,4]:(fn=Ye.value,[5,t.__values(fn)]);case 2:Ln.sent(),Ln.label=3;case 3:return Ye=We.next(),[3,1];case 4:return[3,7];case 5:return gn=Ln.sent(),Bn={error:gn},[3,7];case 6:try{Ye&&!Ye.done&&(bn=We.return)&&bn.call(We)}finally{if(Bn)throw Bn.error}return[7];case 7:return[2]}})}function Xe(Be){return Array.from(ze(Be))}function Sn(Be,We){var Ye,fn,gn,Bn,bn,Ln=-1,ir=-1;if(We===void 0)try{for(var Yn=t.__values(Be),_n=Yn.next();!_n.done;_n=Yn.next()){var Dr=_n.value;++ir,Dr!=null&&(bn>Dr||bn===void 0&&Dr>=Dr)&&(bn=Dr,Ln=ir)}}catch(Ai){Ye={error:Ai}}finally{try{_n&&!_n.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}else try{for(var vr=t.__values(Be),zr=vr.next();!zr.done;zr=vr.next()){var Dr=zr.value;(Dr=We(Dr,++ir,Be))!=null&&(bn>Dr||bn===void 0&&Dr>=Dr)&&(bn=Dr,Ln=ir)}}catch(Ai){gn={error:Ai}}finally{try{zr&&!zr.done&&(Bn=vr.return)&&Bn.call(vr)}finally{if(gn)throw gn.error}}return Ln}function Xn(Be,We){var Ye,fn;We===void 0&&(We=Hn);var gn=[],Bn,bn=!1;try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;bn&&gn.push(We(Bn,Yn)),Bn=Yn,bn=!0}}catch(_n){Ye={error:_n}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return gn}function Hn(Be,We){return[Be,We]}function nn(Be,We,Ye){Be=+Be,We=+We,Ye=(gn=arguments.length)<2?(We=Be,Be=0,1):gn<3?1:+Ye;for(var fn=-1,gn=Math.max(0,Math.ceil((We-Be)/Ye))|0,Bn=new Array(gn);++fn<gn;)Bn[fn]=Be+fn*Ye;return Bn}function en(Be,We){var Ye,fn,gn,Bn;We===void 0&&(We=s);var bn,Ln=!1;if(We.length===1){var ir=void 0;try{for(var Yn=t.__values(Be),_n=Yn.next();!_n.done;_n=Yn.next()){var Dr=_n.value,vr=We(Dr);(Ln?s(vr,ir)<0:s(vr,vr)===0)&&(bn=Dr,ir=vr,Ln=!0)}}catch(Aa){Ye={error:Aa}}finally{try{_n&&!_n.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(Be),Ai=zr.next();!Ai.done;Ai=zr.next()){var vr=Ai.value;(Ln?We(vr,bn)<0:We(vr,vr)===0)&&(bn=vr,Ln=!0)}}catch(Aa){gn={error:Aa}}finally{try{Ai&&!Ai.done&&(Bn=zr.return)&&Bn.call(zr)}finally{if(gn)throw gn.error}}return bn}function An(Be,We){var Ye,fn;if(We===void 0&&(We=s),We.length===1)return Sn(Be,We);var gn,Bn=-1,bn=-1;try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;++bn,(Bn<0?We(Yn,Yn)===0:We(Yn,gn)<0)&&(gn=Yn,Bn=bn)}}catch(_n){Ye={error:_n}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return Bn}function Nn(Be,We){var Ye,fn,gn,Bn;We===void 0&&(We=s);var bn,Ln=!1;if(We.length===1){var ir=void 0;try{for(var Yn=t.__values(Be),_n=Yn.next();!_n.done;_n=Yn.next()){var Dr=_n.value,vr=We(Dr);(Ln?s(vr,ir)>0:s(vr,vr)===0)&&(bn=Dr,ir=vr,Ln=!0)}}catch(Aa){Ye={error:Aa}}finally{try{_n&&!_n.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(Be),Ai=zr.next();!Ai.done;Ai=zr.next()){var vr=Ai.value;(Ln?We(vr,bn)>0:We(vr,vr)===0)&&(bn=vr,Ln=!0)}}catch(Aa){gn={error:Aa}}finally{try{Ai&&!Ai.done&&(Bn=zr.return)&&Bn.call(zr)}finally{if(gn)throw gn.error}}return bn}function fr(Be,We){var Ye,fn;if(We===void 0&&(We=s),We.length===1)return me(Be,We);var gn,Bn=-1,bn=-1;try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;++bn,(Bn<0?We(Yn,Yn)===0:We(Yn,gn)>0)&&(gn=Yn,Bn=bn)}}catch(_n){Ye={error:_n}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return Bn}function hi(Be,We){var Ye=An(Be,We);return Ye<0?void 0:Ye}var Ce=Te(Math.random);function Te(Be){return function(Ye,fn,gn){fn===void 0&&(fn=0),gn===void 0&&(gn=Ye.length);for(var Bn=gn-(fn=+fn);Bn;){var bn=Be()*Bn--|0,Ln=Ye[Bn+fn];Ye[Bn+fn]=Ye[bn+fn],Ye[bn+fn]=Ln}return Ye}}function Jt(Be,We){var Ye,fn,gn,Bn,bn=0;if(We===void 0)try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;(Yn=+Yn)&&(bn+=Yn)}}catch(zr){Ye={error:zr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var _n=-1;try{for(var Dr=t.__values(Be),vr=Dr.next();!vr.done;vr=Dr.next()){var Yn=vr.value;(Yn=+We(Yn,++_n,Be))&&(bn+=Yn)}}catch(zr){gn={error:zr}}finally{try{vr&&!vr.done&&(Bn=Dr.return)&&Bn.call(Dr)}finally{if(gn)throw gn.error}}}return bn}function pe(Be){if(!(Bn=Be.length))return[];for(var We=-1,Ye=yt(Be,Wt),fn=new Array(Ye);++We<Ye;)for(var gn=-1,Bn,bn=fn[We]=new Array(Bn);++gn<Bn;)bn[gn]=Be[gn][We];return fn}function Wt(Be){return Be.length}function ie(){return pe(arguments)}function Ae(Be,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var gn=-1;try{for(var Bn=t.__values(Be),bn=Bn.next();!bn.done;bn=Bn.next()){var Ln=bn.value;if(!We(Ln,++gn,Be))return!1}}catch(ir){Ye={error:ir}}finally{try{bn&&!bn.done&&(fn=Bn.return)&&fn.call(Bn)}finally{if(Ye)throw Ye.error}}return!0}function ue(Be,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var gn=-1;try{for(var Bn=t.__values(Be),bn=Bn.next();!bn.done;bn=Bn.next()){var Ln=bn.value;if(We(Ln,++gn,Be))return!0}}catch(ir){Ye={error:ir}}finally{try{bn&&!bn.done&&(fn=Bn.return)&&fn.call(Bn)}finally{if(Ye)throw Ye.error}}return!1}function xe(Be,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var gn=[],Bn=-1;try{for(var bn=t.__values(Be),Ln=bn.next();!Ln.done;Ln=bn.next()){var ir=Ln.value;We(ir,++Bn,Be)&&gn.push(ir)}}catch(Yn){Ye={error:Yn}}finally{try{Ln&&!Ln.done&&(fn=bn.return)&&fn.call(bn)}finally{if(Ye)throw Ye.error}}return gn}function $e(Be,We){if(typeof Be[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof We!="function")throw new TypeError("mapper is not a function");return Array.from(Be,function(Ye,fn){return We(Ye,fn,Be)})}function Fn(Be,We,Ye){var fn,gn;if(typeof We!="function")throw new TypeError("reducer is not a function");var Bn=Be[Symbol.iterator](),bn,Ln,ir=-1;if(arguments.length<3){if(fn=Bn.next(),bn=fn.done,Ye=fn.value,bn)return;++ir}for(;gn=Bn.next(),bn=gn.done,Ln=gn.value,!bn;)Ye=We(Ye,Ln,++ir,Be);return Ye}function or(Be){if(typeof Be[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(Be).reverse()}function En(Be){for(var We,Ye,fn,gn,Bn=[],bn=1;bn<arguments.length;bn++)Bn[bn-1]=arguments[bn];Be=new Set(Be);try{for(var Ln=t.__values(Bn),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;try{for(var _n=(fn=void 0,t.__values(Yn)),Dr=_n.next();!Dr.done;Dr=_n.next()){var vr=Dr.value;Be.delete(vr)}}catch(zr){fn={error:zr}}finally{try{Dr&&!Dr.done&&(gn=_n.return)&&gn.call(_n)}finally{if(fn)throw fn.error}}}}catch(zr){We={error:zr}}finally{try{ir&&!ir.done&&(Ye=Ln.return)&&Ye.call(Ln)}finally{if(We)throw We.error}}return Be}function Pn(Be,We){var Ye,fn,gn,Bn=We[Symbol.iterator](),bn=new Set;try{for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;if(bn.has(Yn))return!1;for(var _n=void 0,Dr=void 0;(gn=Bn.next(),_n=gn.value,Dr=gn.done,gn)&&!Dr;){if(Object.is(Yn,_n))return!1;bn.add(_n)}}}catch(vr){Ye={error:vr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return!0}function br(Be){return Be instanceof Set?Be:new Set(Be)}function Pr(Be){for(var We,Ye,fn,gn,Bn=[],bn=1;bn<arguments.length;bn++)Bn[bn-1]=arguments[bn];Be=new Set(Be),Bn=Bn.map(br);try{t:for(var Ln=t.__values(Be),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;try{for(var _n=(fn=void 0,t.__values(Bn)),Dr=_n.next();!Dr.done;Dr=_n.next()){var vr=Dr.value;if(!vr.has(Yn)){Be.delete(Yn);continue t}}}catch(zr){fn={error:zr}}finally{try{Dr&&!Dr.done&&(gn=_n.return)&&gn.call(_n)}finally{if(fn)throw fn.error}}}}catch(zr){We={error:zr}}finally{try{ir&&!ir.done&&(Ye=Ln.return)&&Ye.call(Ln)}finally{if(We)throw We.error}}return Be}function ln(Be,We){var Ye,fn,gn,Bn=Be[Symbol.iterator](),bn=new Set;try{for(var Ln=t.__values(We),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;if(!bn.has(Yn))for(var _n=void 0,Dr=void 0;gn=Bn.next(),_n=gn.value,Dr=gn.done,gn;){if(Dr)return!1;if(bn.add(_n),Object.is(Yn,_n))break}}}catch(vr){Ye={error:vr}}finally{try{ir&&!ir.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return!0}function Cr(Be,We){return ln(We,Be)}function Ar(){for(var Be,We,Ye,fn,gn=[],Bn=0;Bn<arguments.length;Bn++)gn[Bn]=arguments[Bn];var bn=new Set;try{for(var Ln=t.__values(gn),ir=Ln.next();!ir.done;ir=Ln.next()){var Yn=ir.value;try{for(var _n=(Ye=void 0,t.__values(Yn)),Dr=_n.next();!Dr.done;Dr=_n.next()){var vr=Dr.value;bn.add(vr)}}catch(zr){Ye={error:zr}}finally{try{Dr&&!Dr.done&&(fn=_n.return)&&fn.call(_n)}finally{if(Ye)throw Ye.error}}}}catch(zr){Be={error:zr}}finally{try{ir&&!ir.done&&(We=Ln.return)&&We.call(Ln)}finally{if(Be)throw Be.error}}return bn}l.Adder=A,l.InternMap=L,l.InternSet=W,l.ascending=s,l.bin=q,l.bisect=a,l.bisectCenter=u,l.bisectLeft=o,l.bisectRight=a,l.bisector=c,l.count=f,l.cross=_,l.cumsum=M,l.descending=x,l.deviation=S,l.difference=En,l.disjoint=Pn,l.every=Ae,l.extent=P,l.filter=xe,l.fsum=O,l.greatest=Nn,l.greatestIndex=fr,l.group=X,l.groupSort=At,l.groups=it,l.histogram=q,l.index=ut,l.indexes=It,l.intersection=Pr,l.least=en,l.leastIndex=An,l.map=$e,l.max=_t,l.maxIndex=me,l.mean=le,l.median=be,l.merge=Xe,l.min=yt,l.minIndex=Sn,l.nice=nt,l.pairs=Xn,l.permute=Mt,l.quantile=ee,l.quantileSorted=Vt,l.quickselect=Ft,l.range=nn,l.reduce=Fn,l.reverse=or,l.rollup=ft,l.rollups=pt,l.scan=hi,l.shuffle=Ce,l.shuffler=Te,l.some=ue,l.sort=bt,l.subset=Cr,l.sum=Jt,l.superset=ln,l.thresholdFreedmanDiaconis=$t,l.thresholdScott=Me,l.thresholdSturges=at,l.tickIncrement=xt,l.tickStep=H,l.ticks=ot,l.transpose=pe,l.union=Ar,l.variance=m,l.zip=ie,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l="$";function s(){}s.prototype=c.prototype={constructor:s,has:function(_){return l+_ in this},get:function(_){return this[l+_]},set:function(_,M){return this[l+_]=M,this},remove:function(_){var M=l+_;return M in this&&delete this[M]},clear:function(){for(var _ in this)_[0]===l&&delete this[_]},keys:function(){var _=[];for(var M in this)M[0]===l&&_.push(M.slice(1));return _},values:function(){var _=[];for(var M in this)M[0]===l&&_.push(this[M]);return _},entries:function(){var _=[];for(var M in this)M[0]===l&&_.push({key:M.slice(1),value:this[M]});return _},size:function(){var _=0;for(var M in this)M[0]===l&&++_;return _},empty:function(){for(var _ in this)if(_[0]===l)return!1;return!0},each:function(_){for(var M in this)M[0]===l&&_(this[M],M.slice(1),this)}};function c(g,_){var M=new s;if(g instanceof s)g.each(function(A,O){M.set(O,A)});else if(Array.isArray(g)){var x=-1,m=g.length,S;if(_==null)for(;++x<m;)M.set(x,g[x]);else for(;++x<m;)M.set(_(S=g[x],x,g),S)}else if(g)for(var P in g)M.set(P,g[P]);return M}function r(){var g=[],_=[],M,x,m;function S(A,O,L,W){if(O>=g.length)return M!=null&&A.sort(M),x!=null?x(A):A;for(var F=-1,K=A.length,V=g[O++],k,Z,X=c(),it,ft=L();++F<K;)(it=X.get(k=V(Z=A[F])+""))?it.push(Z):X.set(k,[Z]);return X.each(function(pt,ut){W(ft,ut,S(pt,O,L,W))}),ft}function P(A,O){if(++O>g.length)return A;var L,W=_[O-1];return x!=null&&O>=g.length?L=A.entries():(L=[],A.each(function(F,K){L.push({key:K,values:P(F,O)})})),W!=null?L.sort(function(F,K){return W(F.key,K.key)}):L}return m={object:function(O){return S(O,0,h,n)},map:function(O){return S(O,0,i,a)},entries:function(O){return P(S(O,0,i,a),0)},key:function(O){return g.push(O),m},sortKeys:function(O){return _[g.length-1]=O,m},sortValues:function(O){return M=O,m},rollup:function(O){return x=O,m}}}function h(){return{}}function n(g,_,M){g[_]=M}function i(){return c()}function a(g,_,M){g.set(_,M)}function o(){}var u=c.prototype;o.prototype=f.prototype={constructor:o,has:u.has,add:function(_){return _+="",this[l+_]=_,this},remove:u.remove,clear:u.clear,values:u.keys,size:u.size,empty:u.empty,each:u.each};function f(g,_){var M=new o;if(g instanceof o)g.each(function(S){M.add(S)});else if(g){var x=-1,m=g.length;if(_==null)for(;++x<m;)M.add(g[x]);else for(;++x<m;)M.add(_(g[x],x,g))}return M}function v(g){var _=[];for(var M in g)_.push(M);return _}function b(g){var _=[];for(var M in g)_.push(g[M]);return _}function y(g){var _=[];for(var M in g)_.push({key:M,value:g[M]});return _}t.nest=r,t.set=f,t.map=c,t.keys=v,t.values=b,t.entries=y,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T,e("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(l,s,c){"use strict";var r=1e-6;function h(){}var n=Infinity,i=n,a=-n,o=a,u={point:f,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var At=[[n,i],[a,o]];return a=o=-(i=n=Infinity),At}};function f(bt,At){bt<n&&(n=bt),bt>a&&(a=bt),At<i&&(i=At),At>o&&(o=At)}function v(bt,At,rt){var Pt=At[1][0]-At[0][0],z=At[1][1]-At[0][1],Q=bt.clipExtent&&bt.clipExtent();bt.scale(150).translate([0,0]),Q!=null&&bt.clipExtent(null),s.geoStream(rt,bt.stream(u));var gt=u.result(),et=Math.min(Pt/(gt[1][0]-gt[0][0]),z/(gt[1][1]-gt[0][1])),ot=+At[0][0]+(Pt-et*(gt[1][0]+gt[0][0]))/2,xt=+At[0][1]+(z-et*(gt[1][1]+gt[0][1]))/2;return Q!=null&&bt.clipExtent(Q),bt.scale(et*150).translate([ot,xt])}function b(bt,At,rt){return v(bt,[[0,0],At],rt)}function y(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function g(){var bt,At,rt=s.geoAlbers(),Pt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Q,gt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,ot,xt={point:function(q,_t){ot=[q,_t]}};function H(at){var q=at[0],_t=at[1];return ot=null,Pt.point(q,_t),ot||(Q.point(q,_t),ot)||(et.point(q,_t),ot)}H.invert=function(at){var q=rt.scale(),_t=rt.translate(),yt=(at[0]-_t[0])/q,Ft=(at[1]-_t[1])/q;return(Ft>=.12&&Ft<.234&&yt>=-.425&&yt<-.214?z:Ft>=.166&&Ft<.234&&yt>=-.214&&yt<-.115?gt:rt).invert(at)},H.stream=function(at){return bt&&At===at?bt:bt=y([rt.stream(At=at),z.stream(at),gt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),gt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at*.35),gt.scale(at),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),_t=+at[0],yt=+at[1];return Pt=rt.translate(at).clipExtent([[_t-.455*q,yt-.238*q],[_t+.455*q,yt+.238*q]]).stream(xt),Q=z.translate([_t-.307*q,yt+.201*q]).clipExtent([[_t-.425*q+r,yt+.12*q+r],[_t-.214*q-r,yt+.234*q-r]]).stream(xt),et=gt.translate([_t-.205*q,yt+.212*q]).clipExtent([[_t-.214*q+r,yt+.166*q+r],[_t-.115*q-r,yt+.234*q-r]]).stream(xt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return bt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([-102.91,26.3]),_t=rt([-104,27.5]),yt=rt([-108,29.1]),Ft=rt([-110,29.1]),Qt=rt([-110,26.7]),ee=rt([-112.8,27.6]),Vt=rt([-114.3,30.6]),$t=rt([-119.3,30.1]);at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo($t[0],$t[1])},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(1070)}function _(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function M(){var bt,At,rt=s.geoAlbers(),Pt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Q,gt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,ot=s.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),xt,H=s.geoEquirectangular().rotate([173,14]),nt,at=s.geoEquirectangular().rotate([-145,-16.8]),q,_t,yt={point:function(Vt,$t){_t=[Vt,$t]}};function Ft(ee){var Vt=ee[0],$t=ee[1];return _t=null,Pt.point(Vt,$t),_t||(Q.point(Vt,$t),_t)||(et.point(Vt,$t),_t)||(xt.point(Vt,$t),_t)||(nt.point(Vt,$t),_t)||(q.point(Vt,$t),_t)}Ft.invert=function(ee){var Vt=rt.scale(),$t=rt.translate(),Me=(ee[0]-$t[0])/Vt,me=(ee[1]-$t[1])/Vt;return(me>=.12&&me<.234&&Me>=-.425&&Me<-.214?z:me>=.166&&me<.234&&Me>=-.214&&Me<-.115?gt:me>=.2064&&me<.2413&&Me>=.312&&Me<.385?ot:me>=.09&&me<.1197&&Me>=-.4243&&Me<-.3232?H:me>=-.0518&&me<.0895&&Me>=-.4243&&Me<-.3824?at:rt).invert(ee)},Ft.stream=function(ee){return bt&&At===ee?bt:bt=_([rt.stream(At=ee),z.stream(ee),gt.stream(ee),ot.stream(ee),H.stream(ee),at.stream(ee)])},Ft.precision=function(ee){return arguments.length?(rt.precision(ee),z.precision(ee),gt.precision(ee),ot.precision(ee),H.precision(ee),at.precision(ee),Qt()):rt.precision()},Ft.scale=function(ee){return arguments.length?(rt.scale(ee),z.scale(ee*.35),gt.scale(ee),ot.scale(ee),H.scale(ee*2),at.scale(ee),Ft.translate(rt.translate())):rt.scale()},Ft.translate=function(ee){if(!arguments.length)return rt.translate();var Vt=rt.scale(),$t=+ee[0],Me=+ee[1];return Pt=rt.translate(ee).clipExtent([[$t-.455*Vt,Me-.238*Vt],[$t+.455*Vt,Me+.238*Vt]]).stream(yt),Q=z.translate([$t-.307*Vt,Me+.201*Vt]).clipExtent([[$t-.425*Vt+r,Me+.12*Vt+r],[$t-.214*Vt-r,Me+.233*Vt-r]]).stream(yt),et=gt.translate([$t-.205*Vt,Me+.212*Vt]).clipExtent([[$t-.214*Vt+r,Me+.166*Vt+r],[$t-.115*Vt-r,Me+.233*Vt-r]]).stream(yt),xt=ot.translate([$t+.35*Vt,Me+.224*Vt]).clipExtent([[$t+.312*Vt+r,Me+.2064*Vt+r],[$t+.385*Vt-r,Me+.233*Vt-r]]).stream(yt),nt=H.translate([$t-.492*Vt,Me+.09*Vt]).clipExtent([[$t-.4243*Vt+r,Me+.0903*Vt+r],[$t-.3233*Vt-r,Me+.1197*Vt-r]]).stream(yt),q=at.translate([$t-.408*Vt,Me+.018*Vt]).clipExtent([[$t-.4244*Vt+r,Me-.0519*Vt+r],[$t-.3824*Vt-r,Me+.0895*Vt-r]]).stream(yt),Qt()},Ft.fitExtent=function(ee,Vt){return v(Ft,ee,Vt)},Ft.fitSize=function(ee,Vt){return b(Ft,ee,Vt)};function Qt(){return bt=At=null,Ft}return Ft.drawCompositionBorders=function(ee){var Vt=rt([-110.4641,28.2805]),$t=rt([-104.0597,28.9528]),Me=rt([-103.7049,25.1031]),me=rt([-109.8337,24.4531]),le=rt([-124.4745,28.1407]),be=rt([-110.931,30.8844]),ze=rt([-109.8337,24.4531]),Xe=rt([-122.4628,21.8562]),Sn=rt([-76.8579,25.1544]),Xn=rt([-72.429,24.2097]),Hn=rt([-72.8265,22.7056]),nn=rt([-77.1852,23.6392]),en=rt([-125.0093,29.7791]),An=rt([-118.5193,31.3262]),Nn=rt([-118.064,29.6912]),fr=rt([-124.4369,28.169]),hi=rt([-128.1314,37.4582]),Ce=rt([-125.2132,38.214]),Te=rt([-122.3616,30.5115]),Jt=rt([-125.0315,29.8211]);ee.moveTo(Vt[0],Vt[1]),ee.lineTo($t[0],$t[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(me[0],me[1]),ee.closePath(),ee.moveTo(le[0],le[1]),ee.lineTo(be[0],be[1]),ee.lineTo(ze[0],ze[1]),ee.lineTo(ze[0],ze[1]),ee.lineTo(Xe[0],Xe[1]),ee.closePath(),ee.moveTo(Sn[0],Sn[1]),ee.lineTo(Xn[0],Xn[1]),ee.lineTo(Hn[0],Hn[1]),ee.lineTo(Hn[0],Hn[1]),ee.lineTo(nn[0],nn[1]),ee.closePath(),ee.moveTo(en[0],en[1]),ee.lineTo(An[0],An[1]),ee.lineTo(Nn[0],Nn[1]),ee.lineTo(Nn[0],Nn[1]),ee.lineTo(fr[0],fr[1]),ee.closePath(),ee.moveTo(hi[0],hi[1]),ee.lineTo(Ce[0],Ce[1]),ee.lineTo(Te[0],Te[1]),ee.lineTo(Te[0],Te[1]),ee.lineTo(Jt[0],Jt[1]),ee.closePath()},Ft.getCompositionBorders=function(){var ee=c.path();return this.drawCompositionBorders(ee),ee.toString()},Ft.scale(1070)}function x(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function m(){var bt,At,rt=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Pt,z=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Q,gt,et={point:function(nt,at){gt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return gt=null,Pt.point(nt,at),gt||(Q.point(nt,at),gt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,_t=(H[1]-at[1])/nt;return(_t>=.05346&&_t<.0897&&q>=-.13388&&q<-.0322?z:rt).invert(H)},ot.stream=function(H){return bt&&At===H?bt:bt=x([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),xt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Pt=rt.translate(H).clipExtent([[at-.06857*nt,q-.1288*nt],[at+.13249*nt,q+.06*nt]]).stream(et),Q=z.translate([at+.1*nt,q-.094*nt]).clipExtent([[at-.1331*nt+r,q+.053457*nt+r],[at-.0354*nt-r,q+.08969*nt-r]]).stream(et),xt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function xt(){return bt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([-14.034675,34.965007]),at=rt([-7.4208899,35.536988]),q=rt([-7.3148275,33.54359]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1])},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(2700)}function S(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function P(){var bt,At,rt=s.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),Pt,z=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),Q,gt=s.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),et,ot,xt={point:function(q,_t){ot=[q,_t]}};function H(at){var q=at[0],_t=at[1];return ot=null,Pt.point(q,_t),ot||(Q.point(q,_t),ot)||(et.point(q,_t),ot)}H.invert=function(at){var q=rt.scale(),_t=rt.translate(),yt=(at[0]-_t[0])/q,Ft=(at[1]-_t[1])/q;return(Ft>=.0093&&Ft<.03678&&yt>=-.03875&&yt<-.0116?z:Ft>=-.0412&&Ft<.0091&&yt>=-.07782&&yt<-.01166?gt:rt).invert(at)},H.stream=function(at){return bt&&At===at?bt:bt=S([rt.stream(At=at),z.stream(at),gt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),gt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),gt.scale(at*.6),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),_t=+at[0],yt=+at[1];return Pt=rt.translate(at).clipExtent([[_t-.0115*q,yt-.1138*q],[_t+.2105*q,yt+.0673*q]]).stream(xt),Q=z.translate([_t-.0265*q,yt+.025*q]).clipExtent([[_t-.0388*q+r,yt+.0093*q+r],[_t-.0116*q-r,yt+.0368*q-r]]).stream(xt),et=gt.translate([_t-.045*q,yt+-.02*q]).clipExtent([[_t-.0778*q+r,yt-.0413*q+r],[_t-.0117*q-r,yt+.0091*q-r]]).stream(xt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return bt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([-12.8351,38.7113]),_t=rt([-10.8482,38.7633]),yt=rt([-10.8181,37.2072]),Ft=rt([-12.7345,37.1573]),Qt=rt([-16.0753,41.4436]),ee=rt([-10.9168,41.6861]),Vt=rt([-10.8557,38.7747]),$t=rt([-15.6728,38.5505]);at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo($t[0],$t[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(4200)}function A(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function O(){var bt,At,rt=s.geoMercator().rotate([80,1.5]),Pt,z=s.geoMercator().rotate([90.73,1]),Q,gt,et={point:function(nt,at){gt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return gt=null,Pt.point(nt,at),gt||(Q.point(nt,at),gt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,_t=(H[1]-at[1])/nt;return(_t>=-.0676&&_t<-.026&&q>=-.0857&&q<-.0263?z:rt).invert(H)},ot.stream=function(H){return bt&&At===H?bt:bt=A([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),xt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Pt=rt.translate(H).clipExtent([[at-.0262*nt,q-.0734*nt],[at+.1741*nt,q+.079*nt]]).stream(et),Q=z.translate([at-.06*nt,q-.04*nt]).clipExtent([[at-.0857*nt+r,q-.0676*nt+r],[at-.0263*nt-r,q-.026*nt-r]]).stream(et),xt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function xt(){return bt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([-84.9032,2.3757]),at=rt([-81.5047,2.3708]),q=rt([-81.5063,-.01]),_t=rt([-84.9086,-.005]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(_t[0],_t[1]),H.closePath()},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(3500)}function L(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function W(){var bt,At,rt=s.geoTransverseMercator().rotate([72,37]),Pt,z=s.geoStereographic().rotate([72,0]),Q,gt=s.geoMercator().rotate([80,33.5]),et,ot=s.geoMercator().rotate([110,25]),xt,H,nt={point:function(yt,Ft){H=[yt,Ft]}};function at(_t){var yt=_t[0],Ft=_t[1];return H=null,Pt.point(yt,Ft),H||(Q.point(yt,Ft),H)||(et.point(yt,Ft),H)||(xt.point(yt,Ft),H)}at.invert=function(_t){var yt=rt.scale(),Ft=rt.translate(),Qt=(_t[0]-Ft[0])/yt,ee=(_t[1]-Ft[1])/yt;return(ee>=.2582&&ee<.32&&Qt>=-.1036&&Qt<-.087?z:ee>=-.01298&&ee<.0133&&Qt>=-.11396&&Qt<-.05944?gt:ee>=.01539&&ee<.03911&&Qt>=-.089&&Qt<-.0588?ot:rt).invert(_t)},at.stream=function(_t){return bt&&At===_t?bt:bt=L([rt.stream(At=_t),z.stream(_t),gt.stream(_t),ot.stream(_t)])},at.precision=function(_t){return arguments.length?(rt.precision(_t),z.precision(_t),gt.precision(_t),ot.precision(_t),q()):rt.precision()},at.scale=function(_t){return arguments.length?(rt.scale(_t),z.scale(_t*.15),gt.scale(_t*1.5),ot.scale(_t*1.5),at.translate(rt.translate())):rt.scale()},at.translate=function(_t){if(!arguments.length)return rt.translate();var yt=rt.scale(),Ft=+_t[0],Qt=+_t[1];return Pt=rt.translate(_t).clipExtent([[Ft-.059*yt,Qt-.3835*yt],[Ft+.4498*yt,Qt+.3375*yt]]).stream(nt),Q=z.translate([Ft-.087*yt,Qt+.17*yt]).clipExtent([[Ft-.1166*yt+r,Qt+.2582*yt+r],[Ft-.06*yt-r,Qt+.32*yt-r]]).stream(nt),et=gt.translate([Ft-.092*yt,Qt-0*yt]).clipExtent([[Ft-.114*yt+r,Qt-.013*yt+r],[Ft-.0594*yt-r,Qt+.0133*yt-r]]).stream(nt),xt=ot.translate([Ft-.089*yt,Qt-.0265*yt]).clipExtent([[Ft-.089*yt+r,Qt+.0154*yt+r],[Ft-.0588*yt-r,Qt+.0391*yt-r]]).stream(nt),q()},at.fitExtent=function(_t,yt){return v(at,_t,yt)},at.fitSize=function(_t,yt){return b(at,_t,yt)};function q(){return bt=At=null,at}return at.drawCompositionBorders=function(_t){var yt=rt([-82.6999,-51.3043]),Ft=rt([-77.5442,-51.6631]),Qt=rt([-78.0254,-55.186]),ee=rt([-83.6106,-54.7785]),Vt=rt([-80.0638,-35.984]),$t=rt([-76.2153,-36.1811]),Me=rt([-76.2994,-37.6839]),me=rt([-80.2231,-37.4757]),le=rt([-78.442,-37.706]),be=rt([-76.263,-37.8054]),ze=rt([-76.344,-39.1595]),Xe=rt([-78.5638,-39.0559]);_t.moveTo(yt[0],yt[1]),_t.lineTo(Ft[0],Ft[1]),_t.lineTo(Qt[0],Qt[1]),_t.lineTo(Qt[0],Qt[1]),_t.lineTo(ee[0],ee[1]),_t.closePath(),_t.moveTo(Vt[0],Vt[1]),_t.lineTo($t[0],$t[1]),_t.lineTo(Me[0],Me[1]),_t.lineTo(Me[0],Me[1]),_t.lineTo(me[0],me[1]),_t.closePath(),_t.moveTo(le[0],le[1]),_t.lineTo(be[0],be[1]),_t.lineTo(ze[0],ze[1]),_t.lineTo(ze[0],ze[1]),_t.lineTo(Xe[0],Xe[1]),_t.closePath()},at.getCompositionBorders=function(){var _t=c.path();return this.drawCompositionBorders(_t),_t.toString()},at.scale(700)}function F(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function K(){var bt,At,rt=s.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),Pt,z=s.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),Q,gt=s.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),et,ot,xt={point:function(q,_t){ot=[q,_t]}};function H(at){var q=at[0],_t=at[1];return ot=null,Pt.point(q,_t),ot||(Q.point(q,_t),ot)||(et.point(q,_t),ot)}H.invert=function(at){var q=rt.scale(),_t=rt.translate(),yt=(at[0]-_t[0])/q,Ft=(at[1]-_t[1])/q;return(Ft>=-.10925&&Ft<-.02701&&yt>=-.135&&yt<-.0397?z:Ft>=.04713&&Ft<.11138&&yt>=-.03986&&yt<.051?gt:rt).invert(at)},H.stream=function(at){return bt&&At===at?bt:bt=F([rt.stream(At=at),z.stream(at),gt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),gt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),gt.scale(at*.7),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),_t=+at[0],yt=+at[1];return Pt=rt.translate(at).clipExtent([[_t-.1352*q,yt-.1091*q],[_t+.117*q,yt+.098*q]]).stream(xt),Q=z.translate([_t-.0425*q,yt-.005*q]).clipExtent([[_t-.135*q+r,yt-.1093*q+r],[_t-.0397*q-r,yt-.027*q-r]]).stream(xt),et=gt.translate(at).clipExtent([[_t-.0399*q+r,yt+.0471*q+r],[_t+.051*q-r,yt+.1114*q-r]]).stream(xt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return bt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([126.01320483689143,41.621090310215585]),_t=rt([133.04304387025903,42.15087523707186]),yt=rt([133.3021766080688,37.43975444725098]),Ft=rt([126.87889168628224,36.95488945159779]),Qt=rt([132.9,29.8]),ee=rt([134,33]),Vt=rt([139.3,33.2]),$t=rt([139.16,30.5]);at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo($t[0],$t[1])},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(2200)}function V(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function k(){var bt,At,rt=s.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),Pt,z=s.geoMercator().center([-53.2,3.9]),Q,gt=s.geoMercator().center([-61.03,14.67]),et,ot=s.geoMercator().center([-61.46,16.14]),xt,H=s.geoMercator().center([-62.85,17.92]),nt,at=s.geoMercator().center([-56.23,46.93]),q,_t=s.geoMercator().center([45.16,-12.8]),yt,Ft=s.geoMercator().center([55.52,-21.13]),Qt,ee=s.geoMercator().center([165.8,-21.07]),Vt,$t=s.geoMercator().center([-178.1,-14.3]),Me,me=s.geoMercator().center([-150.55,-17.11]),le,be=s.geoMercator().center([-150.55,-17.11]),ze,Xe,Sn={point:function(en,An){Xe=[en,An]}};function Xn(nn){var en=nn[0],An=nn[1];return Xe=null,Pt.point(en,An),Xe||(Q.point(en,An),Xe)||(et.point(en,An),Xe)||(xt.point(en,An),Xe)||(nt.point(en,An),Xe)||(q.point(en,An),Xe)||(yt.point(en,An),Xe)||(Qt.point(en,An),Xe)||(Vt.point(en,An),Xe)||(Me.point(en,An),Xe)||(le.point(en,An),Xe)||(ze.point(en,An),Xe)}Xn.invert=function(nn){var en=rt.scale(),An=rt.translate(),Nn=(nn[0]-An[0])/en,fr=(nn[1]-An[1])/en;return(fr>=.029&&fr<.0864&&Nn>=-.14&&Nn<-.0996?z:fr>=0&&fr<.029&&Nn>=-.14&&Nn<-.0996?gt:fr>=-.032&&fr<0&&Nn>=-.14&&Nn<-.0996?ot:fr>=-.052&&fr<-.032&&Nn>=-.14&&Nn<-.0996?H:fr>=-.076&&fr<.052&&Nn>=-.14&&Nn<-.0996?at:fr>=-.076&&fr<-.052&&Nn>=.0967&&Nn<.1371?_t:fr>=-.052&&fr<-.02&&Nn>=.0967&&Nn<.1371?Ft:fr>=-.02&&fr<.012&&Nn>=.0967&&Nn<.1371?ee:fr>=.012&&fr<.033&&Nn>=.0967&&Nn<.1371?$t:fr>=.033&&fr<.0864&&Nn>=.0967&&Nn<.1371?me:rt).invert(nn)},Xn.stream=function(nn){return bt&&At===nn?bt:bt=V([rt.stream(At=nn),z.stream(nn),gt.stream(nn),ot.stream(nn),H.stream(nn),at.stream(nn),_t.stream(nn),Ft.stream(nn),ee.stream(nn),$t.stream(nn),me.stream(nn),be.stream(nn)])},Xn.precision=function(nn){return arguments.length?(rt.precision(nn),z.precision(nn),gt.precision(nn),ot.precision(nn),H.precision(nn),at.precision(nn),_t.precision(nn),Ft.precision(nn),ee.precision(nn),$t.precision(nn),me.precision(nn),be.precision(nn),Hn()):rt.precision()},Xn.scale=function(nn){return arguments.length?(rt.scale(nn),z.scale(nn*.6),gt.scale(nn*1.6),ot.scale(nn*1.4),H.scale(nn*5),at.scale(nn*1.3),_t.scale(nn*1.6),Ft.scale(nn*1.2),ee.scale(nn*.3),$t.scale(nn*2.7),me.scale(nn*.5),be.scale(nn*.06),Xn.translate(rt.translate())):rt.scale()},Xn.translate=function(nn){if(!arguments.length)return rt.translate();var en=rt.scale(),An=+nn[0],Nn=+nn[1];return Pt=rt.translate(nn).clipExtent([[An-.0996*en,Nn-.0908*en],[An+.0967*en,Nn+.0864*en]]).stream(Sn),Q=z.translate([An-.12*en,Nn+.0575*en]).clipExtent([[An-.14*en+r,Nn+.029*en+r],[An-.0996*en-r,Nn+.0864*en-r]]).stream(Sn),et=gt.translate([An-.12*en,Nn+.013*en]).clipExtent([[An-.14*en+r,Nn+0*en+r],[An-.0996*en-r,Nn+.029*en-r]]).stream(Sn),xt=ot.translate([An-.12*en,Nn-.014*en]).clipExtent([[An-.14*en+r,Nn-.032*en+r],[An-.0996*en-r,Nn+0*en-r]]).stream(Sn),nt=H.translate([An-.12*en,Nn-.044*en]).clipExtent([[An-.14*en+r,Nn-.052*en+r],[An-.0996*en-r,Nn-.032*en-r]]).stream(Sn),q=at.translate([An-.12*en,Nn-.065*en]).clipExtent([[An-.14*en+r,Nn-.076*en+r],[An-.0996*en-r,Nn-.052*en-r]]).stream(Sn),yt=_t.translate([An+.117*en,Nn-.064*en]).clipExtent([[An+.0967*en+r,Nn-.076*en+r],[An+.1371*en-r,Nn-.052*en-r]]).stream(Sn),Qt=Ft.translate([An+.116*en,Nn-.0355*en]).clipExtent([[An+.0967*en+r,Nn-.052*en+r],[An+.1371*en-r,Nn-.02*en-r]]).stream(Sn),Vt=ee.translate([An+.116*en,Nn-.0048*en]).clipExtent([[An+.0967*en+r,Nn-.02*en+r],[An+.1371*en-r,Nn+.012*en-r]]).stream(Sn),Me=$t.translate([An+.116*en,Nn+.022*en]).clipExtent([[An+.0967*en+r,Nn+.012*en+r],[An+.1371*en-r,Nn+.033*en-r]]).stream(Sn),ze=be.translate([An+.11*en,Nn+.045*en]).clipExtent([[An+.0967*en+r,Nn+.033*en+r],[An+.1371*en-r,Nn+.06*en-r]]).stream(Sn),le=me.translate([An+.115*en,Nn+.075*en]).clipExtent([[An+.0967*en+r,Nn+.06*en+r],[An+.1371*en-r,Nn+.0864*en-r]]).stream(Sn),Hn()},Xn.fitExtent=function(nn,en){return v(Xn,nn,en)},Xn.fitSize=function(nn,en){return b(Xn,nn,en)};function Hn(){return bt=At=null,Xn}return Xn.drawCompositionBorders=function(nn){var en,An,Nn,fr;en=rt([-7.938886725111036,43.7219460918835]),An=rt([-4.832080896458295,44.12930268549372]),Nn=rt([-4.205299743793263,40.98096346967365]),fr=rt([-7.071796453126152,40.610037319181444]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([-8.42751373617692,45.32889452553031]),An=rt([-5.18599305777107,45.7566442062976]),Nn=rt([-4.832080905154431,44.129302726751426]),fr=rt([-7.938886737126192,43.72194613263854]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([-9.012656899657046,47.127733821030176]),An=rt([-5.6105244772793155,47.579777861410626]),Nn=rt([-5.185993067168585,45.756644248170346]),fr=rt([-8.427513749141811,45.32889456686326]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([-9.405747558985553,48.26506375557457]),An=rt([-5.896175018439575,48.733352850851624]),Nn=rt([-5.610524487556043,47.57977790393761]),fr=rt([-9.012656913808351,47.127733862971255]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([-9.908436061346974,49.642448789505856]),An=rt([-6.262026716233124,50.131426841787174]),Nn=rt([-5.896175029331232,48.73335289377258]),fr=rt([-9.40574757396393,48.26506379787767]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([11.996907706504462,50.16039028163579]),An=rt([15.649907879773343,49.68279246765253]),Nn=rt([15.156712840526632,48.30371557625831]),fr=rt([11.64122661754411,48.761078240546816]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([11.641226606955788,48.7610781975889]),An=rt([15.156712825832164,48.30371553390465]),Nn=rt([14.549932166241172,46.4866532486199]),fr=rt([11.204443787952183,46.91899233914248]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([11.204443778297161,46.918992296823646]),An=rt([14.549932152815039,46.486653206856396]),Nn=rt([13.994409796764009,44.695833444323256]),fr=rt([10.805306599253848,45.105133870684924]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([10.805306590412085,45.10513382903308]),An=rt([13.99440978444733,44.695833403183606]),Nn=rt([13.654633799024392,43.53552468558152]),fr=rt([10.561516803980956,43.930671459798624]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([10.561516795617383,43.93067141859757]),An=rt([13.654633787361952,43.5355246448671]),Nn=rt([12.867691604239901,40.640701985019405]),fr=rt([9.997809515987688,41.00288343254471]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([10.8,42.4]),An=rt([12.8,42.13]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1])},Xn.getCompositionBorders=function(){var nn=c.path();return this.drawCompositionBorders(nn),nn.toString()},Xn.scale(2700)}function Z(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function X(){var bt,At,rt=s.geoConicConformal().rotate([-10,-53]).parallels([0,60]),Pt,z=s.geoMercator().center([-61.46,16.14]),Q,gt=s.geoMercator().center([-53.2,3.9]),et,ot=s.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),xt,H=s.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),nt,at=s.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),q,_t=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),yt,Ft=s.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),Qt,ee=s.geoMercator().center([-61.03,14.67]),Vt,$t=s.geoMercator().center([45.16,-12.8]),Me,me=s.geoMercator().center([55.52,-21.13]),le,be=s.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),ze,Xe,Sn={point:function(en,An){Xe=[en,An]}};function Xn(nn){var en=nn[0],An=nn[1];return Xe=null,Pt.point(en,An),Xe||(et.point(en,An),Xe)||(Vt.point(en,An),Xe)||(Q.point(en,An),Xe)||(Qt.point(en,An),Xe)||(yt.point(en,An),Xe)||(Me.point(en,An),Xe)||(le.point(en,An),Xe)||(ze.point(en,An),Xe)||(xt.point(en,An),Xe)||(nt.point(en,An),Xe)||(q.point(en,An),Xe)}Xn.invert=function(nn){var en=rt.scale(),An=rt.translate(),Nn=(nn[0]-(An[0]+.08*en))/en,fr=(nn[1]-An[1])/en;return(fr>=-.31&&fr<-.24&&Nn>=.14&&Nn<.24?z:fr>=-.24&&fr<-.17&&Nn>=.14&&Nn<.24?gt:fr>=-.17&&fr<-.12&&Nn>=.21&&Nn<.24?H:fr>=-.17&&fr<-.14&&Nn>=.14&&Nn<.165?at:fr>=-.17&&fr<-.1&&Nn>=.14&&Nn<.24?ot:fr>=-.1&&fr<-.03&&Nn>=.14&&Nn<.24?_t:fr>=-.03&&fr<.04&&Nn>=.14&&Nn<.24?Ft:fr>=-.31&&fr<-.24&&Nn>=.24&&Nn<.34?ee:fr>=-.24&&fr<-.17&&Nn>=.24&&Nn<.34?$t:fr>=-.17&&fr<-.1&&Nn>=.24&&Nn<.34?me:fr>=-.1&&fr<-.03&&Nn>=.24&&Nn<.34?be:rt).invert(nn)},Xn.stream=function(nn){return bt&&At===nn?bt:bt=Z([rt.stream(At=nn),gt.stream(nn),ee.stream(nn),z.stream(nn),Ft.stream(nn),_t.stream(nn),$t.stream(nn),me.stream(nn),be.stream(nn),ot.stream(nn),H.stream(nn),at.stream(nn)])},Xn.precision=function(nn){return arguments.length?(rt.precision(nn),gt.precision(nn),ee.precision(nn),z.precision(nn),Ft.precision(nn),_t.precision(nn),$t.precision(nn),me.precision(nn),be.precision(nn),ot.precision(nn),H.precision(nn),at.precision(nn),Hn()):rt.precision()},Xn.scale=function(nn){return arguments.length?(rt.scale(nn),z.scale(nn*3),gt.scale(nn*.8),ee.scale(nn*3.5),me.scale(nn*2.7),ot.scale(nn*2),H.scale(nn*2),at.scale(nn*2),_t.scale(nn*3),Ft.scale(nn),$t.scale(nn*5.5),be.scale(nn*6),Xn.translate(rt.translate())):rt.scale()},Xn.translate=function(nn){if(!arguments.length)return rt.translate();var en=rt.scale(),An=+nn[0],Nn=+nn[1];return Pt=rt.translate([An-.08*en,Nn]).clipExtent([[An-.51*en,Nn-.33*en],[An+.5*en,Nn+.33*en]]).stream(Sn),Q=z.translate([An+.19*en,Nn-.275*en]).clipExtent([[An+.14*en+r,Nn-.31*en+r],[An+.24*en-r,Nn-.24*en-r]]).stream(Sn),et=gt.translate([An+.19*en,Nn-.205*en]).clipExtent([[An+.14*en+r,Nn-.24*en+r],[An+.24*en-r,Nn-.17*en-r]]).stream(Sn),xt=ot.translate([An+.19*en,Nn-.135*en]).clipExtent([[An+.14*en+r,Nn-.17*en+r],[An+.24*en-r,Nn-.1*en-r]]).stream(Sn),nt=H.translate([An+.225*en,Nn-.147*en]).clipExtent([[An+.21*en+r,Nn-.17*en+r],[An+.24*en-r,Nn-.12*en-r]]).stream(Sn),q=at.translate([An+.153*en,Nn-.15*en]).clipExtent([[An+.14*en+r,Nn-.17*en+r],[An+.165*en-r,Nn-.14*en-r]]).stream(Sn),yt=_t.translate([An+.19*en,Nn-.065*en]).clipExtent([[An+.14*en+r,Nn-.1*en+r],[An+.24*en-r,Nn-.03*en-r]]).stream(Sn),Qt=Ft.translate([An+.19*en,Nn+.005*en]).clipExtent([[An+.14*en+r,Nn-.03*en+r],[An+.24*en-r,Nn+.04*en-r]]).stream(Sn),Vt=ee.translate([An+.29*en,Nn-.275*en]).clipExtent([[An+.24*en+r,Nn-.31*en+r],[An+.34*en-r,Nn-.24*en-r]]).stream(Sn),Me=$t.translate([An+.29*en,Nn-.205*en]).clipExtent([[An+.24*en+r,Nn-.24*en+r],[An+.34*en-r,Nn-.17*en-r]]).stream(Sn),le=me.translate([An+.29*en,Nn-.135*en]).clipExtent([[An+.24*en+r,Nn-.17*en+r],[An+.34*en-r,Nn-.1*en-r]]).stream(Sn),ze=be.translate([An+.29*en,Nn-.065*en]).clipExtent([[An+.24*en+r,Nn-.1*en+r],[An+.34*en-r,Nn-.03*en-r]]).stream(Sn),Hn()},Xn.fitExtent=function(nn,en){return v(Xn,nn,en)},Xn.fitSize=function(nn,en){return b(Xn,nn,en)};function Hn(){return bt=At=null,Xn}return Xn.drawCompositionBorders=function(nn){var en,An,Nn,fr;en=rt([42.45755610828648,63.343658547914934]),An=rt([52.65837266667029,59.35045080290929]),Nn=rt([47.19754502247785,56.12653496548117]),fr=rt([37.673034273363044,59.61638268506111]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([59.41110754003403,62.35069727399336]),An=rt([66.75050228640794,57.11797303636038]),Nn=rt([60.236065725110436,54.63331433818992]),fr=rt([52.65837313153311,59.350450804599355]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([48.81091130080243,66.93353402634641]),An=rt([59.41110730654679,62.35069740653086]),Nn=rt([52.6583728974441,59.3504509222445]),fr=rt([42.45755631675751,63.34365868805821]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([31.054198418446475,52.1080673766184]),An=rt([39.09869284884117,49.400700047190554]),Nn=rt([36.0580811499175,46.02944174908498]),fr=rt([28.690508588835726,48.433126979386415]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([33.977877745912025,55.849945501331]),An=rt([42.75328432167726,52.78455122462353]),Nn=rt([39.09869297540224,49.400700176148625]),fr=rt([31.05419851807008,52.10806751810923]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([52.658372900759296,59.35045068526415]),An=rt([60.23606549583304,54.63331423800264]),Nn=rt([54.6756370953122,51.892298789399455]),fr=rt([47.19754524788189,56.126534861222794]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([47.19754506082455,56.126534735591456]),An=rt([54.675636900123514,51.892298681337095]),Nn=rt([49.94448648951486,48.98775484983285]),fr=rt([42.75328468716108,52.78455126060818]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([42.75328453416769,52.78455113209101]),An=rt([49.94448632339758,48.98775473706457]),Nn=rt([45.912339990394315,45.99361784987003]),fr=rt([39.09869317356607,49.40070009378711]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([37.673034114296634,59.61638254183119]),An=rt([47.197544835420544,56.126534839849846]),Nn=rt([42.75328447467064,52.78455135314068]),fr=rt([33.977877870363905,55.849945644671145]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([44.56748486446032,57.26489367845818]),Nn=rt([43.9335791193588,53.746540942601726]),fr=rt([43,56]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath(),en=rt([37.673034114296634,59.61638254183119]),An=rt([40.25902691953466,58.83002044222639]),Nn=rt([38.458270492742024,57.26232178028002]),fr=rt([35.97754948030156,58.00266637992386]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(fr[0],fr[1]),nn.closePath()},Xn.getCompositionBorders=function(){var nn=c.path();return this.drawCompositionBorders(nn),nn.toString()},Xn.scale(750)}function it(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function ft(){var bt,At,rt=s.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),Pt,z=s.geoMercator().center([-68.25,12.2]),Q,gt=s.geoMercator().center([-63.1,17.5]),et,ot,xt={point:function(q,_t){ot=[q,_t]}};function H(at){var q=t.__read(at,2),_t=q[0],yt=q[1];return ot=null,Pt.point(_t,yt),ot||(Q.point(_t,yt),ot)||(et.point(_t,yt),ot)}H.invert=function(at){var q=rt.scale(),_t=rt.translate(),yt=(at[0]-_t[0])/q,Ft=(at[1]-_t[1])/q;return(Ft>=-.0067&&Ft<.0015&&yt>=-.0232&&yt<-.0154?z:Ft>=-.022&&Ft<-.014&&yt>=-.023&&yt<-.014?gt:rt).invert(at)},H.stream=function(at){return bt&&At===at?bt:bt=it([rt.stream(At=at),z.stream(at),gt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),gt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),gt.scale(at),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),_t=+at[0],yt=+at[1];return Pt=rt.translate(at).clipExtent([[_t-.0245*q,yt-.026*q],[_t+.023*q,yt+.026*q]]).stream(xt),Q=z.translate([_t-.0186*q,yt-.00325*q]).clipExtent([[_t-.0232*q+r,yt-.0067*q+r],[_t-.0154*q-r,yt+.0015*q-r]]).stream(xt),et=gt.translate([_t-.0185*q,yt-.017*q]).clipExtent([[_t-.023*q+r,yt-.022*q+r],[_t-.014*q-r,yt-.014*q-r]]).stream(xt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return bt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([3.30573,52.5562]),_t=rt([4.043,52.572]),yt=rt([4.0646,52.1017]),Ft=rt([3.3382,52.0861]),Qt=rt([3.262,53.439]),ee=rt([4.1373,53.4571]),Vt=rt([4.1574,52.9946]),$t=rt([3.2951,52.9768]);at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo(Vt[0],Vt[1]),at.lineTo($t[0],$t[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(4200)}function pt(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function ut(){var bt,At,rt=s.geoMercator().center([105.25,4]),Pt,z=s.geoMercator().center([118.65,2.86]),Q,gt,et={point:function(nt,at){gt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return gt=null,Pt.point(nt,at),gt||(Q.point(nt,at),gt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,_t=(H[1]-at[1])/nt;return(_t>=-.0521&&_t<.0229&&q>=-.0111&&q<.1?z:rt).invert(H)},ot.stream=function(H){return bt&&At===H?bt:bt=pt([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),xt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H*.615),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Pt=rt.translate(H).clipExtent([[at-.11*nt,q-.0521*nt],[at-.0111*nt,q+.0521*nt]]).stream(et),Q=z.translate([at+.09*nt,q-0*nt]).clipExtent([[at-.0111*nt+r,q-.0521*nt+r],[at+.1*nt-r,q+.024*nt-r]]).stream(et),xt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function xt(){return bt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([106.3214,2.0228]),at=rt([105.1843,2.3761]),q=rt([104.2151,3.3618]),_t=rt([104.215,4.5651]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(_t[0],_t[1])},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(4800)}function It(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function Nt(){var bt,At,rt=s.geoMercator().rotate([-9.5,-1.5]),Pt,z=s.geoMercator().rotate([-8.6,-3.5]),Q,gt=s.geoMercator().rotate([-5.6,1.45]),et,ot,xt={point:function(q,_t){ot=[q,_t]}};function H(at){var q=at[0],_t=at[1];return ot=null,Pt.point(q,_t),ot||(Q.point(q,_t),ot)||(et.point(q,_t),ot)}H.invert=function(at){var q=rt.scale(),_t=rt.translate(),yt=(at[0]-_t[0])/q,Ft=(at[1]-_t[1])/q;return(Ft>=-.02&&Ft<0&&yt>=-.038&&yt<-.005?z:Ft>=0&&Ft<.02&&yt>=-.038&&yt<-.005?gt:rt).invert(at)},H.stream=function(at){return bt&&At===at?bt:bt=It([rt.stream(At=at),z.stream(at),gt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),gt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at*1.5),gt.scale(at*4),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),_t=+at[0],yt=+at[1];return Pt=rt.translate(at).clipExtent([[_t-.005*q,yt-.02*q],[_t+.038*q,yt+.02*q]]).stream(xt),Q=z.translate([_t-.025*q,yt-.01*q]).clipExtent([[_t-.038*q+r,yt-.02*q+r],[_t-.005*q-r,yt+0*q-r]]).stream(xt),et=gt.translate([_t-.025*q,yt+.01*q]).clipExtent([[_t-.038*q+r,yt-0*q+r],[_t-.005*q-r,yt+.02*q-r]]).stream(xt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return bt=At=null,H}return H.drawCompositionBorders=function(at){var q,_t,yt,Ft;q=rt([9.21327272751682,2.645820439454123]),_t=rt([11.679126293239872,2.644755519268689]),yt=rt([11.676845389029227,.35307824637606433]),Ft=rt([9.213572917774014,.35414205204417754]),at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),q=rt([7.320873711543669,2.64475551449975]),_t=rt([9.213272722738658,2.645820434679803]),yt=rt([9.213422896480349,1.4999812505283054]),Ft=rt([7.322014760520787,1.4989168878985566]),at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),q=rt([7.3220147605302905,1.4989168783492766]),_t=rt([9.213422896481598,1.499981240979021]),yt=rt([9.213572912999604,.354142056817247]),Ft=rt([7.323154615739809,.353078251154504]),at.moveTo(q[0],q[1]),at.lineTo(_t[0],_t[1]),at.lineTo(yt[0],yt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(12e3)}function Rt(bt){var At=bt.length;return{point:function(Pt,z){for(var Q=-1;++Q<At;)bt[Q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)bt[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)bt[Pt].polygonEnd()}}}function Mt(){var bt,At,rt=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Pt,z=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Q,gt,et={point:function(nt,at){gt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return gt=null,Pt.point(nt,at),gt||(Q.point(nt,at),gt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,_t=(H[1]-at[1])/nt;return(_t>=-.089&&_t<.06&&q>=.029&&q<.046?z:rt).invert(H)},ot.stream=function(H){return bt&&At===H?bt:bt=Rt([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),xt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Pt=rt.translate(H).clipExtent([[at-.065*nt,q-.089*nt],[at+.075*nt,q+.089*nt]]).stream(et),Q=z.translate([at+.01*nt,q+.025*nt]).clipExtent([[at+.029*nt+r,q-.089*nt+r],[at+.046*nt-r,q-.06*nt-r]]).stream(et),xt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function xt(){return bt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt,at,q,_t;nt=rt([-1.113205870242365,59.64920050773357]),at=rt([.807899092399606,59.59085836472269]),q=rt([.5778611961420386,57.93467822832577]),_t=rt([-1.25867782078448,57.99029450085142]),H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(_t[0],_t[1]),H.closePath()},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(2800)}l.geoAlbersUk=Mt,l.geoAlbersUsa=g,l.geoAlbersUsaTerritories=M,l.geoConicConformalEurope=X,l.geoConicConformalFrance=k,l.geoConicConformalNetherlands=ft,l.geoConicConformalPortugal=P,l.geoConicConformalSpain=m,l.geoConicEquidistantJapan=K,l.geoMercatorEcuador=O,l.geoMercatorEquatorialGuinea=Nt,l.geoMercatorMalaysia=ut,l.geoTransverseMercatorChile=W,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l={},s={},c=34,r=10,h=13;function n(X){return new Function("d","return {"+X.map(function(it,ft){return JSON.stringify(it)+": d["+ft+'] || ""'}).join(",")+"}")}function i(X,it){var ft=n(X);return function(pt,ut){return it(ft(pt),ut,X)}}function a(X){var it=Object.create(null),ft=[];return X.forEach(function(pt){for(var ut in pt)ut in it||ft.push(it[ut]=ut)}),ft}function o(X,it){var ft=X+"",pt=ft.length;return pt<it?new Array(it-pt+1).join(0)+ft:ft}function u(X){return X<0?"-"+o(-X,6):X>9999?"+"+o(X,6):o(X,4)}function f(X){var it=X.getUTCHours(),ft=X.getUTCMinutes(),pt=X.getUTCSeconds(),ut=X.getUTCMilliseconds();return isNaN(X)?"Invalid Date":u(X.getUTCFullYear())+"-"+o(X.getUTCMonth()+1,2)+"-"+o(X.getUTCDate(),2)+(ut?"T"+o(it,2)+":"+o(ft,2)+":"+o(pt,2)+"."+o(ut,3)+"Z":pt?"T"+o(it,2)+":"+o(ft,2)+":"+o(pt,2)+"Z":ft||it?"T"+o(it,2)+":"+o(ft,2)+"Z":"")}function v(X){var it=new RegExp('["'+X+`
\r]`),ft=X.charCodeAt(0);function pt(rt,Pt){var z,Q,gt=ut(rt,function(et,ot){if(z)return z(et,ot-1);Q=et,z=Pt?i(et,Pt):n(et)});return gt.columns=Q||[],gt}function ut(rt,Pt){var z=[],Q=rt.length,gt=0,et=0,ot,xt=Q<=0,H=!1;rt.charCodeAt(Q-1)===r&&--Q,rt.charCodeAt(Q-1)===h&&--Q;function nt(){if(xt)return s;if(H)return H=!1,l;var q,_t=gt,yt;if(rt.charCodeAt(_t)===c){for(;gt++<Q&&rt.charCodeAt(gt)!==c||rt.charCodeAt(++gt)===c;);return(q=gt)>=Q?xt=!0:(yt=rt.charCodeAt(gt++))===r?H=!0:yt===h&&(H=!0,rt.charCodeAt(gt)===r&&++gt),rt.slice(_t+1,q-1).replace(/""/g,'"')}for(;gt<Q;){if((yt=rt.charCodeAt(q=gt++))===r)H=!0;else if(yt===h)H=!0,rt.charCodeAt(gt)===r&&++gt;else if(yt!==ft)continue;return rt.slice(_t,q)}return xt=!0,rt.slice(_t,Q)}for(;(ot=nt())!==s;){for(var at=[];ot!==l&&ot!==s;)at.push(ot),ot=nt();Pt&&(at=Pt(at,et++))==null||z.push(at)}return z}function It(rt,Pt){return rt.map(function(z){return Pt.map(function(Q){return At(z[Q])}).join(X)})}function Nt(rt,Pt){return Pt==null&&(Pt=a(rt)),[Pt.map(At).join(X)].concat(It(rt,Pt)).join(`
`)}function Rt(rt,Pt){return Pt==null&&(Pt=a(rt)),It(rt,Pt).join(`
`)}function Mt(rt){return rt.map(bt).join(`
`)}function bt(rt){return rt.map(At).join(X)}function At(rt){return rt==null?"":rt instanceof Date?f(rt):it.test(rt+="")?'"'+rt.replace(/"/g,'""')+'"':rt}return{parse:pt,parseRows:ut,format:Nt,formatBody:Rt,formatRows:Mt,formatRow:bt,formatValue:At}}var b=v(","),y=b.parse,g=b.parseRows,_=b.format,M=b.formatBody,x=b.formatRows,m=b.formatRow,S=b.formatValue,P=v("	"),A=P.parse,O=P.parseRows,L=P.format,W=P.formatBody,F=P.formatRows,K=P.formatRow,V=P.formatValue;function k(X){for(var it in X){var ft=X[it].trim(),pt,ut;if(!ft)ft=null;else if(ft==="true")ft=!0;else if(ft==="false")ft=!1;else if(ft==="NaN")ft=NaN;else if(!isNaN(pt=+ft))ft=pt;else if(ut=ft.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Z&&!!ut[4]&&!ut[7]&&(ft=ft.replace(/-/g,"/").replace(/T/," ")),ft=new Date(ft);else continue;X[it]=ft}return X}var Z=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=k,t.csvFormat=_,t.csvFormatBody=M,t.csvFormatRow=m,t.csvFormatRows=x,t.csvFormatValue=S,t.csvParse=y,t.csvParseRows=g,t.dsvFormat=v,t.tsvFormat=L,t.tsvFormatBody=W,t.tsvFormatRow=K,t.tsvFormatRows=F,t.tsvFormatValue=V,t.tsvParse=A,t.tsvParseRows=O,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l,s){"use strict";var c=Math.abs,r=Math.atan,h=Math.atan2,n=Math.cos,i=Math.exp,a=Math.floor,o=Math.log,u=Math.max,f=Math.min,v=Math.pow,b=Math.round,y=Math.sign||function(D){return D>0?1:D<0?-1:0},g=Math.sin,_=Math.tan,M=1e-6,x=1e-12,m=Math.PI,S=m/2,P=m/4,A=Math.SQRT1_2,O=X(2),L=X(m),W=m*2,F=180/m,K=m/180;function V(D){return D?D/Math.sin(D):1}function k(D){return D>1?S:D<-1?-S:Math.asin(D)}function Z(D){return D>1?0:D<-1?m:Math.acos(D)}function X(D){return D>0?Math.sqrt(D):0}function it(D){return D=i(2*D),(D-1)/(D+1)}function ft(D){return(i(D)-i(-D))/2}function pt(D){return(i(D)+i(-D))/2}function ut(D){return o(D+X(D*D+1))}function It(D){return o(D+X(D*D-1))}function Nt(D){var G=_(D/2),$=2*o(n(D/2))/(G*G);function st(Ct,wt){var Ut=n(Ct),Yt=n(wt),qt=g(wt),he=Yt*Ut,ye=-((1-he?o((1+he)/2)/(1-he):-.5)+$/(1+he));return[ye*Yt*g(Ct),ye*qt]}return st.invert=function(Ct,wt){var Ut=X(Ct*Ct+wt*wt),Yt=-D/2,qt=50,he;if(!Ut)return[0,0];do{var ye=Yt/2,je=n(ye),Ie=g(ye),Ve=_(ye),qe=o(1/je);Yt-=he=(2/Ve*qe-$*Ve-Ut)/(-qe/(Ie*Ie)+1-$/(2*je*je))}while(c(he)>M&&--qt>0);var sn=g(Yt);return[h(Ct*sn,Ut*n(Yt)),k(wt*sn/Ut)]},st}var Rt=function(){var G=S,$=l.geoProjectionMutator(Nt),st=$(G);return st.radius=function(Ct){return arguments.length?$(G=Ct*K):G*F},st.scale(179.976).clipAngle(147)};function Mt(D,G){var $=n(G),st=V(Z($*n(D/=2)));return[2*$*g(D)*st,g(G)*st]}Mt.invert=function(D,G){if(!(D*D+4*G*G>m*m+M)){var $=D,st=G,Ct=25;do{var wt=g($),Ut=g($/2),Yt=n($/2),qt=g(st),he=n(st),ye=g(2*st),je=qt*qt,Ie=he*he,Ve=Ut*Ut,qe=1-Ie*Yt*Yt,sn=qe?Z(he*Yt)*X(tr=1/qe):tr=0,tr,kn=2*sn*he*Ut-D,pr=sn*qt-G,Mr=tr*(Ie*Ve+sn*he*Yt*je),$r=tr*(.5*wt*ye-sn*2*qt*Ut),Yr=tr*.25*(ye*Ut-sn*qt*Ie*wt),Ti=tr*(je*Yt+sn*Ve*he),Li=$r*Yr-Ti*Mr;if(!Li)break;var Ki=(pr*$r-kn*Ti)/Li,Xi=(kn*Yr-pr*Mr)/Li;$-=Ki,st-=Xi}while((c(Ki)>M||c(Xi)>M)&&--Ct>0);return[$,st]}};var bt=function(){return l.geoProjection(Mt).scale(152.63)};function At(D){var G=g(D),$=n(D),st=D>=0?1:-1,Ct=_(st*D),wt=(1+G-$)/2;function Ut(Yt,qt){var he=n(qt),ye=n(Yt/=2);return[(1+he)*g(Yt),(st*qt>-h(ye,Ct)-.001?0:-st*10)+wt+g(qt)*$-(1+he)*G*ye]}return Ut.invert=function(Yt,qt){var he=0,ye=0,je=50;do{var Ie=n(he),Ve=g(he),qe=n(ye),sn=g(ye),tr=1+qe,kn=tr*Ve-Yt,pr=wt+sn*$-tr*G*Ie-qt,Mr=tr*Ie/2,$r=-Ve*sn,Yr=G*tr*Ve/2,Ti=$*qe+G*Ie*sn,Li=$r*Yr-Ti*Mr,Ki=(pr*$r-kn*Ti)/Li/2,Xi=(kn*Yr-pr*Mr)/Li;he-=Ki,ye-=Xi}while((c(Ki)>M||c(Xi)>M)&&--je>0);return st*ye>-h(n(he),Ct)-.001?[he*2,ye]:null},Ut}var rt=function(){var G=20*K,$=G>=0?1:-1,st=_($*G),Ct=l.geoProjectionMutator(At),wt=Ct(G),Ut=wt.stream;return wt.parallel=function(Yt){return arguments.length?(st=_(($=(G=Yt*K)>=0?1:-1)*G),Ct(G)):G*F},wt.stream=function(Yt){var qt=wt.rotate(),he=Ut(Yt),ye=(wt.rotate([0,0]),Ut(Yt));return wt.rotate(qt),he.sphere=function(){ye.polygonStart(),ye.lineStart();for(var je=$*-180;$*je<180;je+=$*90)ye.point(je,$*90);for(;$*(je-=G)>=-180;)ye.point(je,$*-h(n(je*K/2),st)*F);ye.lineEnd(),ye.polygonEnd()},he},wt.scale(218.695).center([0,28.0974])};function Pt(D,G){var $=_(G/2),st=X(1-$*$),Ct=1+st*n(D/=2),wt=g(D)*st/Ct,Ut=$/Ct,Yt=wt*wt,qt=Ut*Ut;return[4/3*wt*(3+Yt-3*qt),4/3*Ut*(3+3*Yt-qt)]}Pt.invert=function(D,G){if(D*=3/8,G*=3/8,!D&&c(G)>1)return null;var $=D*D,st=G*G,Ct=1+$+st,wt=X((Ct-X(Ct*Ct-4*G*G))/2),Ut=k(wt)/3,Yt=wt?It(c(G/wt))/3:ut(c(D))/3,qt=n(Ut),he=pt(Yt),ye=he*he-qt*qt;return[y(D)*2*h(ft(Yt)*qt,.25-ye),y(G)*2*h(he*g(Ut),.25+ye)]};var z=function(){return l.geoProjection(Pt).scale(66.1603)},Q=X(8),gt=o(1+O);function et(D,G){var $=c(G);return $<P?[D,o(_(P+G/2))]:[D*n($)*(2*O-1/g($)),y(G)*(2*O*($-P)-o(_($/2)))]}et.invert=function(D,G){if((wt=c(G))<gt)return[D,2*r(i(G))-S];var $=P,st=25,Ct,wt;do{var Ut=n($/2),Yt=_($/2);$-=Ct=(Q*($-P)-o(Yt)-wt)/(Q-Ut*Ut/(2*Yt))}while(c(Ct)>x&&--st>0);return[D/(n($)*(Q-1/g($))),y(G)*$]};var ot=function(){return l.geoProjection(et).scale(112.314)};function xt(D){var G=2*m/D;function $(st,Ct){var wt=l.geoAzimuthalEquidistantRaw(st,Ct);if(c(st)>S){var Ut=h(wt[1],wt[0]),Yt=X(wt[0]*wt[0]+wt[1]*wt[1]),qt=G*b((Ut-S)/G)+S,he=h(g(Ut-=qt),2-n(Ut));Ut=qt+k(m/Yt*g(he))-he,wt[0]=Yt*n(Ut),wt[1]=Yt*g(Ut)}return wt}return $.invert=function(st,Ct){var wt=X(st*st+Ct*Ct);if(wt>S){var Ut=h(Ct,st),Yt=G*b((Ut-S)/G)+S,qt=Ut>Yt?-1:1,he=wt*n(Yt-Ut),ye=1/_(qt*Z((he-m)/X(m*(m-2*he)+wt*wt)));Ut=Yt+2*r((ye+qt*X(ye*ye-3))/3),st=wt*n(Ut),Ct=wt*g(Ut)}return l.geoAzimuthalEquidistantRaw.invert(st,Ct)},$}var H=function(){var G=5,$=l.geoProjectionMutator(xt),st=$(G),Ct=st.stream,wt=.01,Ut=-n(wt*K),Yt=g(wt*K);return st.lobes=function(qt){return arguments.length?$(G=+qt):G},st.stream=function(qt){var he=st.rotate(),ye=Ct(qt),je=(st.rotate([0,0]),Ct(qt));return st.rotate(he),ye.sphere=function(){je.polygonStart(),je.lineStart();for(var Ie=0,Ve=360/G,qe=2*m/G,sn=90-180/G,tr=S;Ie<G;++Ie,sn-=Ve,tr-=qe)je.point(h(Yt*n(tr),Ut)*F,k(Yt*g(tr))*F),sn<-90?(je.point(-90,-180-sn-wt),je.point(-90,-180-sn+wt)):(je.point(90,sn+wt),je.point(90,sn-wt));je.lineEnd(),je.polygonEnd()},ye},st.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function nt(D,G){var $=D*g(G),st=30,Ct;do G-=Ct=(G+g(G)-$)/(1+n(G));while(c(Ct)>M&&--st>0);return G/2}function at(D,G,$){function st(Ct,wt){return[D*Ct*n(wt=nt($,wt)),G*g(wt)]}return st.invert=function(Ct,wt){return wt=k(wt/G),[Ct/(D*n(wt)),k((2*wt+g(2*wt))/$)]},st}var q=at(O/S,O,m),_t=function(){return l.geoProjection(q).scale(169.529)},yt=2.00276,Ft=1.11072;function Qt(D,G){var $=nt(m,G);return[yt*D/(1/n(G)+Ft/n($)),(G+O*g($))/yt]}Qt.invert=function(D,G){var $=yt*G,st=G<0?-P:P,Ct=25,wt,Ut;do Ut=$-O*g(st),st-=wt=(g(2*st)+2*st-m*g(Ut))/(2*n(2*st)+2+m*n(Ut)*O*n(st));while(c(wt)>M&&--Ct>0);return Ut=$-O*g(st),[D*(1/n(Ut)+Ft/n(st))/yt,Ut]};var ee=function(){return l.geoProjection(Qt).scale(160.857)},Vt=function(G){var $=0,st=l.geoProjectionMutator(G),Ct=st($);return Ct.parallel=function(wt){return arguments.length?st($=wt*K):$*F},Ct};function $t(D,G){return[D*n(G),G]}$t.invert=function(D,G){return[D/n(G),G]};var Me=function(){return l.geoProjection($t).scale(152.63)};function me(D){if(!D)return $t;var G=1/_(D);function $(st,Ct){var wt=G+D-Ct,Ut=wt&&st*n(Ct)/wt;return[wt*g(Ut),G-wt*n(Ut)]}return $.invert=function(st,Ct){var wt=X(st*st+(Ct=G-Ct)*Ct),Ut=G+D-wt;return[wt/n(Ut)*h(st,Ct),Ut]},$}var le=function(){return Vt(me).scale(123.082).center([0,26.1441]).parallel(45)};function be(D){function G($,st){var Ct=S-st,wt=Ct&&$*D*g(Ct)/Ct;return[Ct*g(wt)/D,S-Ct*n(wt)]}return G.invert=function($,st){var Ct=$*D,wt=S-st,Ut=X(Ct*Ct+wt*wt),Yt=h(Ct,wt);return[(Ut?Ut/g(Ut):1)*Yt/D,S-Ut]},G}var ze=function(){var G=.5,$=l.geoProjectionMutator(be),st=$(G);return st.fraction=function(Ct){return arguments.length?$(G=+Ct):G},st.scale(158.837)},Xe=at(1,4/m,m),Sn=function(){return l.geoProjection(Xe).scale(152.63)};function Xn(D,G,$,st,Ct,wt){var Ut=n(wt),Yt;if(c(D)>1||c(wt)>1)Yt=Z($*Ct+G*st*Ut);else{var qt=g(D/2),he=g(wt/2);Yt=2*k(X(qt*qt+G*st*he*he))}return c(Yt)>M?[Yt,h(st*g(wt),G*Ct-$*st*Ut)]:[0,0]}function Hn(D,G,$){return Z((D*D+G*G-$*$)/(2*D*G))}function nn(D){return D-2*m*a((D+m)/(2*m))}function en(D,G,$){for(var st=[[D[0],D[1],g(D[1]),n(D[1])],[G[0],G[1],g(G[1]),n(G[1])],[$[0],$[1],g($[1]),n($[1])]],Ct=st[2],wt,Ut=0;Ut<3;++Ut,Ct=wt)wt=st[Ut],Ct.v=Xn(wt[1]-Ct[1],Ct[3],Ct[2],wt[3],wt[2],wt[0]-Ct[0]),Ct.point=[0,0];var Yt=Hn(st[0].v[0],st[2].v[0],st[1].v[0]),qt=Hn(st[0].v[0],st[1].v[0],st[2].v[0]),he=m-Yt;st[2].point[1]=0,st[0].point[0]=-(st[1].point[0]=st[0].v[0]/2);var ye=[st[2].point[0]=st[0].point[0]+st[2].v[0]*n(Yt),2*(st[0].point[1]=st[1].point[1]=st[2].v[0]*g(Yt))];function je(Ie,Ve){var qe=g(Ve),sn=n(Ve),tr=new Array(3),kn;for(kn=0;kn<3;++kn){var pr=st[kn];if(tr[kn]=Xn(Ve-pr[1],pr[3],pr[2],sn,qe,Ie-pr[0]),!tr[kn][0])return pr.point;tr[kn][1]=nn(tr[kn][1]-pr.v[1])}var Mr=ye.slice();for(kn=0;kn<3;++kn){var $r=kn==2?0:kn+1,Yr=Hn(st[kn].v[0],tr[kn][0],tr[$r][0]);tr[kn][1]<0&&(Yr=-Yr),kn?kn==1?(Yr=qt-Yr,Mr[0]-=tr[kn][0]*n(Yr),Mr[1]-=tr[kn][0]*g(Yr)):(Yr=he-Yr,Mr[0]+=tr[kn][0]*n(Yr),Mr[1]+=tr[kn][0]*g(Yr)):(Mr[0]+=tr[kn][0]*n(Yr),Mr[1]-=tr[kn][0]*g(Yr))}return Mr[0]/=3,Mr[1]/=3,Mr}return je}function An(D){return D[0]*=K,D[1]*=K,D}function Nn(){return fr([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function fr(D,G,$){var st=l.geoCentroid({type:"MultiPoint",coordinates:[D,G,$]}),Ct=[-st[0],-st[1]],wt=l.geoRotation(Ct),Ut=l.geoProjection(en(An(wt(D)),An(wt(G)),An(wt($)))).rotate(Ct),Yt=Ut.center;return delete Ut.rotate,Ut.center=function(qt){return arguments.length?Yt(wt(qt)):wt.invert(Yt())},Ut.clipAngle(90)}function hi(D,G){var $=X(1-g(G));return[2/L*D*$,L*(1-$)]}hi.invert=function(D,G){var $=($=G/L-1)*$;return[$>0?D*X(m/$)/2:0,k(1-$)]};var Ce=function(){return l.geoProjection(hi).scale(95.6464).center([0,30])};function Te(D){var G=_(D);function $(st,Ct){return[st,(st?st/g(st):1)*(g(Ct)*n(st)-G*n(Ct))]}return $.invert=G?function(st,Ct){st&&(Ct*=g(st)/st);var wt=n(st);return[st,2*h(X(wt*wt+G*G-Ct*Ct)-wt,G-Ct)]}:function(st,Ct){return[st,k(st?Ct*_(st)/st:Ct)]},$}var Jt=function(){return Vt(Te).scale(249.828).clipAngle(90)},pe=X(3);function Wt(D,G){return[pe*D*(2*n(2*G/3)-1)/L,pe*L*g(G/3)]}Wt.invert=function(D,G){var $=3*k(G/(pe*L));return[L*D/(pe*(2*n(2*$/3)-1)),$]};var ie=function(){return l.geoProjection(Wt).scale(156.19)};function Ae(D){var G=n(D);function $(st,Ct){return[st*G,g(Ct)/G]}return $.invert=function(st,Ct){return[st/G,k(Ct*G)]},$}var ue=function(){return Vt(Ae).parallel(38.58).scale(195.044)};function xe(D){var G=n(D);function $(st,Ct){return[st*G,(1+G)*_(Ct/2)]}return $.invert=function(st,Ct){return[st/G,r(Ct/(1+G))*2]},$}var $e=function(){return Vt(xe).scale(124.75)};function Fn(D,G){var $=X(8/(3*m));return[$*D*(1-c(G)/m),$*G]}Fn.invert=function(D,G){var $=X(8/(3*m)),st=G/$;return[D/($*(1-c(st)/m)),st]};var or=function(){return l.geoProjection(Fn).scale(165.664)};function En(D,G){var $=X(4-3*g(c(G)));return[2/X(6*m)*D*$,y(G)*X(2*m/3)*(2-$)]}En.invert=function(D,G){var $=2-c(G)/X(2*m/3);return[D*X(6*m)/(2*$),y(G)*k((4-$*$)/3)]};var Pn=function(){return l.geoProjection(En).scale(165.664)};function br(D,G){var $=X(m*(4+m));return[2/$*D*(1+X(1-4*G*G/(m*m))),4/$*G]}br.invert=function(D,G){var $=X(m*(4+m))/2;return[D*$/(1+X(1-G*G*(4+m)/(4*m))),G*$/2]};var Pr=function(){return l.geoProjection(br).scale(180.739)};function ln(D,G){var $=(2+S)*g(G);G/=2;for(var st=0,Ct=Infinity;st<10&&c(Ct)>M;st++){var wt=n(G);G-=Ct=(G+g(G)*(wt+2)-$)/(2*wt*(1+wt))}return[2/X(m*(4+m))*D*(1+n(G)),2*X(m/(4+m))*g(G)]}ln.invert=function(D,G){var $=G*X((4+m)/m)/2,st=k($),Ct=n(st);return[D/(2/X(m*(4+m))*(1+Ct)),k((st+$*(Ct+2))/(2+S))]};var Cr=function(){return l.geoProjection(ln).scale(180.739)};function Ar(D,G){return[D*(1+n(G))/X(2+m),2*G/X(2+m)]}Ar.invert=function(D,G){var $=X(2+m),st=G*$/2;return[$*D/(1+n(st)),st]};var Be=function(){return l.geoProjection(Ar).scale(173.044)};function We(D,G){for(var $=(1+S)*g(G),st=0,Ct=Infinity;st<10&&c(Ct)>M;st++)G-=Ct=(G+g(G)-$)/(1+n(G));return $=X(2+m),[D*(1+n(G))/$,2*G/$]}We.invert=function(D,G){var $=1+S,st=X($/2);return[D*2*st/(1+n(G*=st)),k((G+g(G))/$)]};var Ye=function(){return l.geoProjection(We).scale(173.044)},fn=3+2*O;function gn(D,G){var $=g(D/=2),st=n(D),Ct=X(n(G)),wt=n(G/=2),Ut=g(G)/(wt+O*st*Ct),Yt=X(2/(1+Ut*Ut)),qt=X((O*wt+(st+$)*Ct)/(O*wt+(st-$)*Ct));return[fn*(Yt*(qt-1/qt)-2*o(qt)),fn*(Yt*Ut*(qt+1/qt)-2*r(Ut))]}gn.invert=function(D,G){if(!(wt=Pt.invert(D/1.2,G*1.065)))return null;var $=wt[0],st=wt[1],Ct=20,wt;D/=fn,G/=fn;do{var Ut=$/2,Yt=st/2,qt=g(Ut),he=n(Ut),ye=g(Yt),je=n(Yt),Ie=n(st),Ve=X(Ie),qe=ye/(je+O*he*Ve),sn=qe*qe,tr=X(2/(1+sn)),kn=O*je+(he+qt)*Ve,pr=O*je+(he-qt)*Ve,Mr=kn/pr,$r=X(Mr),Yr=$r-1/$r,Ti=$r+1/$r,Li=tr*Yr-2*o($r)-D,Ki=tr*qe*Ti-2*r(qe)-G,Xi=ye&&A*Ve*qt*sn/ye,Oa=(O*he*je+Ve)/(2*(je+O*he*Ve)*(je+O*he*Ve)*Ve),Na=-.5*qe*tr*tr*tr,ji=Na*Xi,Sa=Na*Oa,xa=(xa=2*je+O*Ve*(he-qt))*xa*$r,Yi=(O*he*je*Ve+Ie)/xa,_a=-(O*qt*ye)/(Ve*xa),sa=Yr*ji-2*Yi/$r+tr*(Yi+Yi/Mr),Ia=Yr*Sa-2*_a/$r+tr*(_a+_a/Mr),Fa=qe*Ti*ji-2*Xi/(1+sn)+tr*Ti*Xi+tr*qe*(Yi-Yi/Mr),_s=qe*Ti*Sa-2*Oa/(1+sn)+tr*Ti*Oa+tr*qe*(_a-_a/Mr),us=Ia*Fa-_s*sa;if(!us)break;var Os=(Ki*Ia-Li*_s)/us,es=(Li*Fa-Ki*sa)/us;$-=Os,st=u(-S,f(S,st-es))}while((c(Os)>M||c(es)>M)&&--Ct>0);return c(c(st)-S)<M?[0,st]:Ct&&[$,st]};var Bn=function(){return l.geoProjection(gn).scale(62.5271)},bn=n(35*K);function Ln(D,G){var $=_(G/2);return[D*bn*X(1-$*$),(1+bn)*$]}Ln.invert=function(D,G){var $=G/(1+bn);return[D&&D/(bn*X(1-$*$)),2*r($)]};var ir=function(){return l.geoProjection(Ln).scale(137.152)};function Yn(D,G){var $=G/2,st=n($);return[2*D/L*n(G)*st*st,L*_($)]}Yn.invert=function(D,G){var $=r(G/L),st=n($),Ct=2*$;return[D*L/2/(n(Ct)*st*st),Ct]};var _n=function(){return l.geoProjection(Yn).scale(135.264)};function Dr(D){return[D[0]/2,k(_(D[1]/2*K))*F]}function vr(D){return[D[0]*2,2*r(g(D[1]*K))*F]}var zr=function(G){G==null&&(G=l.geoOrthographic);var $=G(),st=l.geoEquirectangular().scale(F).precision(0).clipAngle(null).translate([0,0]);function Ct(Ut){return $(Dr(Ut))}$.invert&&(Ct.invert=function(Ut){return vr($.invert(Ut))}),Ct.stream=function(Ut){var Yt=$.stream(Ut),qt=st.stream({point:function(ye,je){Yt.point(ye/2,k(_(-je/2*K))*F)},lineStart:function(){Yt.lineStart()},lineEnd:function(){Yt.lineEnd()},polygonStart:function(){Yt.polygonStart()},polygonEnd:function(){Yt.polygonEnd()}});return qt.sphere=Yt.sphere,qt};function wt(Ut){Ct[Ut]=function(Yt){return arguments.length?($[Ut](Yt),Ct):$[Ut]()}}return Ct.rotate=function(Ut){return arguments.length?(st.rotate(Ut),Ct):st.rotate()},Ct.center=function(Ut){return arguments.length?($.center(Dr(Ut)),Ct):vr($.center())},wt("clipAngle"),wt("clipExtent"),wt("scale"),wt("translate"),wt("precision"),Ct.scale(249.5)};function Ai(D,G){var $=2*m/G,st=D*D;function Ct(wt,Ut){var Yt=l.geoAzimuthalEquidistantRaw(wt,Ut),qt=Yt[0],he=Yt[1],ye=qt*qt+he*he;if(ye>st){var je=X(ye),Ie=h(he,qt),Ve=$*b(Ie/$),qe=Ie-Ve,sn=D*n(qe),tr=(D*g(qe)-qe*g(sn))/(S-sn),kn=Aa(qe,tr),pr=(m-D)/ka(kn,sn,m);qt=je;var Mr=50,$r;do qt-=$r=(D+ka(kn,sn,qt)*pr-je)/(kn(qt)*pr);while(c($r)>M&&--Mr>0);he=qe*g(qt),qt<S&&(he-=tr*(qt-S));var Yr=g(Ve),Ti=n(Ve);Yt[0]=qt*Ti-he*Yr,Yt[1]=qt*Yr+he*Ti}return Yt}return Ct.invert=function(wt,Ut){var Yt=wt*wt+Ut*Ut;if(Yt>st){var qt=X(Yt),he=h(Ut,wt),ye=$*b(he/$),je=he-ye;wt=qt*n(je),Ut=qt*g(je);for(var Ie=wt-S,Ve=g(wt),qe=Ut/Ve,sn=wt<S?Infinity:0,tr=10;;){var kn=D*g(qe),pr=D*n(qe),Mr=g(pr),$r=S-pr,Yr=(kn-qe*Mr)/$r,Ti=Aa(qe,Yr);if(c(sn)<x||!--tr)break;qe-=sn=(qe*Ve-Yr*Ie-Ut)/(Ve-Ie*2*($r*(pr+qe*kn*n(pr)-Mr)-kn*(kn-qe*Mr))/($r*$r))}qt=D+ka(Ti,pr,wt)*(m-D)/ka(Ti,pr,m),he=ye+qe,wt=qt*n(he),Ut=qt*g(he)}return l.geoAzimuthalEquidistantRaw.invert(wt,Ut)},Ct}function Aa(D,G){return function($){var st=D*n($);return $<S&&(st-=G),X(1+st*st)}}function ka(D,G,$){for(var st=50,Ct=($-G)/st,wt=D(G)+D($),Ut=1,Yt=G;Ut<st;++Ut)wt+=2*D(Yt+=Ct);return wt*.5*Ct}var eo=function(){var G=6,$=30*K,st=n($),Ct=g($),wt=l.geoProjectionMutator(Ai),Ut=wt($,G),Yt=Ut.stream,qt=.01,he=-n(qt*K),ye=g(qt*K);return Ut.radius=function(je){return arguments.length?(st=n($=je*K),Ct=g($),wt($,G)):$*F},Ut.lobes=function(je){return arguments.length?wt($,G=+je):G},Ut.stream=function(je){var Ie=Ut.rotate(),Ve=Yt(je),qe=(Ut.rotate([0,0]),Yt(je));return Ut.rotate(Ie),Ve.sphere=function(){qe.polygonStart(),qe.lineStart();for(var sn=0,tr=2*m/G,kn=0;sn<G;++sn,kn-=tr)qe.point(h(ye*n(kn),he)*F,k(ye*g(kn))*F),qe.point(h(Ct*n(kn-tr/2),st)*F,k(Ct*g(kn-tr/2))*F);qe.lineEnd(),qe.polygonEnd()},Ve},Ut.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},Zo=function(G,$,st,Ct,wt,Ut,Yt,qt){arguments.length<8&&(qt=0);function he(ye,je){if(!je)return[G*ye/m,0];var Ie=je*je,Ve=G+Ie*($+Ie*(st+Ie*Ct)),qe=je*(wt-1+Ie*(Ut-qt+Ie*Yt)),sn=(Ve*Ve+qe*qe)/(2*qe),tr=ye*k(Ve/sn)/m;return[sn*g(tr),je*(1+Ie*qt)+sn*(1-n(tr))]}return he.invert=function(ye,je){var Ie=m*ye/G,Ve=je,qe,sn,tr=50;do{var kn=Ve*Ve,pr=G+kn*($+kn*(st+kn*Ct)),Mr=Ve*(wt-1+kn*(Ut-qt+kn*Yt)),$r=pr*pr+Mr*Mr,Yr=2*Mr,Ti=$r/Yr,Li=Ti*Ti,Ki=k(pr/Ti)/m,Xi=Ie*Ki,Oa=pr*pr,Na=(2*$+kn*(4*st+kn*6*Ct))*Ve,ji=wt+kn*(3*Ut+kn*5*Yt),Sa=2*(pr*Na+Mr*(ji-1)),xa=2*(ji-1),Yi=(Sa*Yr-$r*xa)/(Yr*Yr),_a=n(Xi),sa=g(Xi),Ia=Ti*_a,Fa=Ti*sa,_s=Ie/m*(1/X(1-Oa/Li))*(Na*Ti-pr*Yi)/Li,us=Fa-ye,Os=Ve*(1+kn*qt)+Ti-Ia-je,es=Yi*sa+Ia*_s,js=Ia*Ki,ml=1+Yi-(Yi*_a-Fa*_s),yu=Fa*Ki,Fl=es*yu-ml*js;if(!Fl)break;Ie-=qe=(Os*es-us*ml)/Fl,Ve-=sn=(us*yu-Os*js)/Fl}while((c(qe)>M||c(sn)>M)&&--tr>0);return[Ie,Ve]},he},Ea=Zo(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),so=function(){return l.geoProjection(Ea).scale(149.995)},Ko=Zo(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),no=function(){return l.geoProjection(Ko).scale(153.93)},So=Zo(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045),cs=function(){return l.geoProjection(So).scale(130.945)};function wa(D,G){var $=D*D,st=G*G;return[D*(1-.162388*st)*(.87-952426e-9*$*$),G*(1+st/12)]}wa.invert=function(D,G){var $=D,st=G,Ct=50,wt;do{var Ut=st*st;st-=wt=(st*(1+Ut/12)-G)/(1+Ut/4)}while(c(wt)>M&&--Ct>0);Ct=50,D/=1-.162388*Ut;do{var Yt=(Yt=$*$)*Yt;$-=wt=($*(.87-952426e-9*Yt)-D)/(.87-.00476213*Yt)}while(c(wt)>M&&--Ct>0);return[$,st]};var zo=function(){return l.geoProjection(wa).scale(131.747)},Ro=Zo(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),fu=function(){return l.geoProjection(Ro).scale(131.087)},Xo=function(G){var $=G(S,0)[0]-G(-S,0)[0];function st(Ct,wt){var Ut=Ct>0?-.5:.5,Yt=G(Ct+Ut*m,wt);return Yt[0]-=Ut*$,Yt}return G.invert&&(st.invert=function(Ct,wt){var Ut=Ct>0?-.5:.5,Yt=G.invert(Ct+Ut*$,wt),qt=Yt[0]-Ut*m;return qt<-m?qt+=2*m:qt>m&&(qt-=2*m),Yt[0]=qt,Yt}),st};function au(D,G){var $=y(D),st=y(G),Ct=n(G),wt=n(D)*Ct,Ut=g(D)*Ct,Yt=g(st*G);D=c(h(Ut,Yt)),G=k(wt),c(D-S)>M&&(D%=S);var qt=$s(D>m/4?S-D:D,G);return D>m/4&&(Yt=qt[0],qt[0]=-qt[1],qt[1]=-Yt),qt[0]*=$,qt[1]*=-st,qt}au.invert=function(D,G){c(D)>1&&(D=y(D)*2-D),c(G)>1&&(G=y(G)*2-G);var $=y(D),st=y(G),Ct=-$*D,wt=-st*G,Ut=wt/Ct<1,Yt=Ne(Ut?wt:Ct,Ut?Ct:wt),qt=Yt[0],he=Yt[1],ye=n(he);return Ut&&(qt=-S-qt),[$*(h(g(qt)*ye,-g(he))+m),st*k(n(qt)*ye)]};function $s(D,G){if(G===S)return[0,0];var $=g(G),st=$*$,Ct=st*st,wt=1+Ct,Ut=1+3*Ct,Yt=1-Ct,qt=k(1/X(wt)),he=Yt+st*wt*qt,ye=(1-$)/he,je=X(ye),Ie=ye*wt,Ve=X(Ie),qe=je*Yt,sn,tr;if(D===0)return[0,-(qe+st*Ve)];var kn=n(G),pr=1/kn,Mr=2*$*kn,$r=(-3*st+qt*Ut)*Mr,Yr=(-he*kn-(1-$)*$r)/(he*he),Ti=.5*Yr/je,Li=Yt*Ti-2*st*je*Mr,Ki=st*wt*Yr+ye*Ut*Mr,Xi=-pr*Mr,Oa=-pr*Ki,Na=-2*pr*Li,ji=4*D/m,Sa;if(D>.222*m||G<m/4&&D>.175*m){if(sn=(qe+st*X(Ie*(1+Ct)-qe*qe))/(1+Ct),D>m/4)return[sn,sn];var xa=sn,Yi=.5*sn;sn=.5*(Yi+xa),tr=50;do{var _a=X(Ie-sn*sn),sa=sn*(Na+Xi*_a)+Oa*k(sn/Ve)-ji;if(!sa)break;sa<0?Yi=sn:xa=sn,sn=.5*(Yi+xa)}while(c(xa-Yi)>M&&--tr>0)}else{sn=M,tr=25;do{var Ia=sn*sn,Fa=X(Ie-Ia),_s=Na+Xi*Fa,us=sn*_s+Oa*k(sn/Ve)-ji,Os=_s+(Oa-Xi*Ia)/Fa;sn-=Sa=Fa?us/Os:0}while(c(Sa)>M&&--tr>0)}return[sn,-qe-st*X(Ie-sn*sn)]}function Ne(D,G){for(var $=0,st=1,Ct=.5,wt=50;;){var Ut=Ct*Ct,Yt=X(Ct),qt=k(1/X(1+Ut)),he=1-Ut+Ct*(1+Ut)*qt,ye=(1-Yt)/he,je=X(ye),Ie=ye*(1+Ut),Ve=je*(1-Ut),qe=Ie-D*D,sn=X(qe),tr=G+Ve+Ct*sn;if(c(st-$)<x||--wt==0||tr===0)break;tr>0?$=Ct:st=Ct,Ct=.5*($+st)}if(!wt)return null;var kn=k(Yt),pr=n(kn),Mr=1/pr,$r=2*Yt*pr,Yr=(-3*Ct+qt*(1+3*Ut))*$r,Ti=(-he*pr-(1-Yt)*Yr)/(he*he),Li=.5*Ti/je,Ki=(1-Ut)*Li-2*Ct*je*$r,Xi=-2*Mr*Ki,Oa=-Mr*$r,Na=-Mr*(Ct*(1+Ut)*Ti+ye*(1+3*Ut)*$r);return[m/4*(D*(Xi+Oa*sn)+Na*k(D/X(Ie))),kn]}var oe=function(){return l.geoProjection(Xo(au)).scale(239.75)};function Ht(D,G,$){var st,Ct,wt;return D?(st=Ee(D,$),G?(Ct=Ee(G,1-$),wt=Ct[1]*Ct[1]+$*st[0]*st[0]*Ct[0]*Ct[0],[[st[0]*Ct[2]/wt,st[1]*st[2]*Ct[0]*Ct[1]/wt],[st[1]*Ct[1]/wt,-st[0]*st[2]*Ct[0]*Ct[2]/wt],[st[2]*Ct[1]*Ct[2]/wt,-$*st[0]*st[1]*Ct[0]/wt]]):[[st[0],0],[st[1],0],[st[2],0]]):(Ct=Ee(G,1-$),[[0,Ct[0]/Ct[1]],[1/Ct[1],0],[Ct[2]/Ct[1],0]])}function Ee(D,G){var $,st,Ct,wt,Ut;if(G<M)return wt=g(D),st=n(D),$=G*(D-wt*st)/4,[wt-$*st,st+$*wt,1-G*wt*wt/2,D-$];if(G>=1-M)return $=(1-G)/4,st=pt(D),wt=it(D),Ct=1/st,Ut=st*ft(D),[wt+$*(Ut-D)/(st*st),Ct-$*wt*Ct*(Ut-D),Ct+$*wt*Ct*(Ut+D),2*r(i(D))-S+$*(Ut-D)/st];var Yt=[1,0,0,0,0,0,0,0,0],qt=[X(G),0,0,0,0,0,0,0,0],he=0;for(st=X(1-G),Ut=1;c(qt[he]/Yt[he])>M&&he<8;)$=Yt[he++],qt[he]=($-st)/2,Yt[he]=($+st)/2,st=X($*st),Ut*=2;Ct=Ut*Yt[he]*D;do wt=qt[he]*g(st=Ct)/Yt[he],Ct=(k(wt)+Ct)/2;while(--he);return[g(Ct),wt=n(Ct),wt/n(Ct-st),Ct]}function an(D,G,$){var st=c(D),Ct=c(G),wt=ft(Ct);if(st){var Ut=1/g(st),Yt=1/(_(st)*_(st)),qt=-(Yt+$*(wt*wt*Ut*Ut)-1+$),he=($-1)*Yt,ye=(-qt+X(qt*qt-4*he))/2;return[zn(r(1/X(ye)),$)*y(D),zn(r(X((ye/Yt-1)/$)),1-$)*y(G)]}return[0,zn(r(wt),1-$)*y(G)]}function zn(D,G){if(!G)return D;if(G===1)return o(_(D/2+P));for(var $=1,st=X(1-G),Ct=X(G),wt=0;c(Ct)>M;wt++){if(D%m){var Ut=r(st*_(D)/$);Ut<0&&(Ut+=m),D+=Ut+~~(D/m)*m}else D+=D;Ct=($+st)/2,st=X($*st),Ct=(($=Ct)-st)/2}return D/(v(2,wt)*$)}function qn(D,G){var $=(O-1)/(O+1),st=X(1-$*$),Ct=zn(S,st*st),wt=-1,Ut=o(_(m/4+c(G)/2)),Yt=i(wt*Ut)/X($),qt=Un(Yt*n(wt*D),Yt*g(wt*D)),he=an(qt[0],qt[1],st*st);return[-he[1],(G>=0?1:-1)*(.5*Ct-he[0])]}function Un(D,G){var $=D*D,st=G+1,Ct=1-$-G*G;return[.5*((D>=0?S:-S)-h(Ct,2*D)),-.25*o(Ct*Ct+4*$)+.5*o(st*st+$)]}function Jr(D,G){var $=G[0]*G[0]+G[1]*G[1];return[(D[0]*G[0]+D[1]*G[1])/$,(D[1]*G[0]-D[0]*G[1])/$]}qn.invert=function(D,G){var $=(O-1)/(O+1),st=X(1-$*$),Ct=zn(S,st*st),wt=-1,Ut=Ht(.5*Ct-G,-D,st*st),Yt=Jr(Ut[0],Ut[1]),qt=h(Yt[1],Yt[0])/wt;return[qt,2*r(i(.5/wt*o($*Yt[0]*Yt[0]+$*Yt[1]*Yt[1])))-S]};var Si=function(){return l.geoProjection(Xo(qn)).scale(151.496)};function Ci(D,G){if(arguments.length<2&&(G=D),G===1)return l.geoAzimuthalEqualAreaRaw;if(G===Infinity)return ki;function $(st,Ct){var wt=l.geoAzimuthalEqualAreaRaw(st/G,Ct);return wt[0]*=D,wt}return $.invert=function(st,Ct){var wt=l.geoAzimuthalEqualAreaRaw.invert(st/D,Ct);return wt[0]*=G,wt},$}function ki(D,G){return[D*n(G)/n(G/=2),2*g(G)]}ki.invert=function(D,G){var $=2*k(G/2);return[D*n($/2)/n($),$]};var oa=function(){var G=2,$=l.geoProjectionMutator(Ci),st=$(G);return st.coefficient=function(Ct){return arguments.length?$(G=+Ct):G},st.scale(169.529)};function Xa(D){var G=g(D),$=n(D),st=ma(D);st.invert=ma(-D);function Ct(wt,Ut){var Yt=st(wt,Ut);wt=Yt[0],Ut=Yt[1];var qt=g(Ut),he=n(Ut),ye=n(wt),je=Z(G*qt+$*he*ye),Ie=g(je),Ve=c(Ie)>M?je/Ie:1;return[Ve*$*g(wt),(c(wt)>S?Ve:-Ve)*(G*he-$*qt*ye)]}return Ct.invert=function(wt,Ut){var Yt=X(wt*wt+Ut*Ut),qt=-g(Yt),he=n(Yt),ye=Yt*he,je=-Ut*qt,Ie=Yt*G,Ve=X(ye*ye+je*je-Ie*Ie),qe=h(ye*Ie+je*Ve,je*Ie-ye*Ve),sn=(Yt>S?-1:1)*h(wt*qt,Yt*n(qe)*he+Ut*g(qe)*qt);return st.invert(sn,qe)},Ct}function ma(D){var G=g(D),$=n(D);return function(st,Ct){var wt=n(Ct),Ut=n(st)*wt,Yt=g(st)*wt,qt=g(Ct);return[h(Yt,Ut*$-qt*G),k(qt*$+Ut*G)]}}var mo=function(){var G=0,$=l.geoProjectionMutator(Xa),st=$(G),Ct=st.rotate,wt=st.stream,Ut=l.geoCircle();return st.parallel=function(Yt){if(!arguments.length)return G*F;var qt=st.rotate();return $(G=Yt*K).rotate(qt)},st.rotate=function(Yt){return arguments.length?(Ct.call(st,[Yt[0],Yt[1]-G*F]),Ut.center([-Yt[0],-Yt[1]]),st):(Yt=Ct.call(st),Yt[1]+=G*F,Yt)},st.stream=function(Yt){return Yt=wt(Yt),Yt.sphere=function(){Yt.polygonStart();var qt=.01,he=Ut.radius(90-qt)().coordinates[0],ye=he.length-1,je=-1,Ie;for(Yt.lineStart();++je<ye;)Yt.point((Ie=he[je])[0],Ie[1]);for(Yt.lineEnd(),he=Ut.radius(90+qt)().coordinates[0],ye=he.length-1,Yt.lineStart();--je>=0;)Yt.point((Ie=he[je])[0],Ie[1]);Yt.lineEnd(),Yt.polygonEnd()},Yt},st.scale(79.4187).parallel(45).clipAngle(180-.001)},Ba=41+48/36+37/3600,ao=Ae(0);function yo(D){var G=Ba*K,$=hi(m,G)[0]-hi(-m,G)[0],st=ao(0,G)[1],Ct=hi(0,G)[1],wt=L-Ct,Ut=W/D,Yt=4/W,qt=st+wt*wt*4/W;function he(ye,je){var Ie,Ve=c(je);if(Ve>G){var qe=f(D-1,u(0,a((ye+m)/Ut)));ye+=m*(D-1)/D-qe*Ut,Ie=hi(ye,Ve),Ie[0]=Ie[0]*W/$-W*(D-1)/(2*D)+qe*W/D,Ie[1]=st+(Ie[1]-Ct)*4*wt/W,je<0&&(Ie[1]=-Ie[1])}else Ie=ao(ye,je);return Ie[0]*=Yt,Ie[1]/=qt,Ie}return he.invert=function(ye,je){ye/=Yt,je*=qt;var Ie=c(je);if(Ie>st){var Ve=f(D-1,u(0,a((ye+m)/Ut)));ye=(ye+m*(D-1)/D-Ve*Ut)*$/W;var qe=hi.invert(ye,.25*(Ie-st)*W/wt+Ct);return qe[0]-=m*(D-1)/D-Ve*Ut,je<0&&(qe[1]=-qe[1]),qe}return ao.invert(ye,je)},he}function Ja(D){return{type:"Polygon",coordinates:[s.range(-180,180+D/2,D).map(function(G,$){return[G,$&1?90-1e-6:Ba]}).concat(s.range(180,-180-D/2,-D).map(function(G,$){return[G,$&1?-90+1e-6:-Ba]}))]}}var _o=function(){var G=4,$=l.geoProjectionMutator(yo),st=$(G),Ct=st.stream;return st.lobes=function(wt){return arguments.length?$(G=+wt):G},st.stream=function(wt){var Ut=st.rotate(),Yt=Ct(wt),qt=(st.rotate([0,0]),Ct(wt));return st.rotate(Ut),Yt.sphere=function(){l.geoStream(Ja(180/G),qt)},Yt},st.scale(239.75)};function ts(D){var G=1+D,$=g(1/G),st=k($),Ct=2*X(m/(wt=m+4*st*G)),wt,Ut=.5*Ct*(G+X(D*(2+D))),Yt=D*D,qt=G*G;function he(ye,je){var Ie=1-g(je),Ve,qe;if(Ie&&Ie<2){var sn=S-je,tr=25,kn;do{var pr=g(sn),Mr=n(sn),$r=st+h(pr,G-Mr),Yr=1+qt-2*G*Mr;sn-=kn=(sn-Yt*st-G*pr+Yr*$r-.5*Ie*wt)/(2*G*pr*$r)}while(c(kn)>x&&--tr>0);Ve=Ct*X(Yr),qe=ye*$r/m}else Ve=Ct*(D+Ie),qe=ye*st/m;return[Ve*g(qe),Ut-Ve*n(qe)]}return he.invert=function(ye,je){var Ie=ye*ye+(je-=Ut)*je,Ve=(1+qt-Ie/(Ct*Ct))/(2*G),qe=Z(Ve),sn=g(qe),tr=st+h(sn,G-Ve);return[k(ye/X(Ie))*m/tr,k(1-2*(qe-Yt*st-G*sn+(1+qt-2*G*Ve)*tr)/wt)]},he}var Do=function(){var G=1,$=l.geoProjectionMutator(ts),st=$(G);return st.ratio=function(Ct){return arguments.length?$(G=+Ct):G},st.scale(167.774).center([0,18.67])},xs=.7109889596207567,Mo=.0528035274542;function $a(D,G){return G>-xs?(D=q(D,G),D[1]+=Mo,D):$t(D,G)}$a.invert=function(D,G){return G>-xs?q.invert(D,G-Mo):$t.invert(D,G)};var Ms=function(){return l.geoProjection($a).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function as(D,G){return c(G)>xs?(D=q(D,G),D[1]-=G>0?Mo:-Mo,D):$t(D,G)}as.invert=function(D,G){return c(G)>xs?q.invert(D,G+(G>0?Mo:-Mo)):$t.invert(D,G)};var Ca=function(){return l.geoProjection(as).scale(152.63)};function mn(D,G){return c(D[0]-G[0])<M&&c(D[1]-G[1])<M}function hr(D,G){for(var $=-1,st=D.length,Ct=D[0],wt,Ut,Yt,qt=[];++$<st;){wt=D[$],Ut=(wt[0]-Ct[0])/G,Yt=(wt[1]-Ct[1])/G;for(var he=0;he<G;++he)qt.push([Ct[0]+he*Ut,Ct[1]+he*Yt]);Ct=wt}return qt.push(wt),qt}function Gr(D){var G=[],$,st,Ct,wt,Ut,Yt,qt,he=D[0].length;for(qt=0;qt<he;++qt)$=D[0][qt],st=$[0][0],Ct=$[0][1],wt=$[1][1],Ut=$[2][0],Yt=$[2][1],G.push(hr([[st+M,Ct+M],[st+M,wt-M],[Ut-M,wt-M],[Ut-M,Yt+M]],30));for(qt=D[1].length-1;qt>=0;--qt)$=D[1][qt],st=$[0][0],Ct=$[0][1],wt=$[1][1],Ut=$[2][0],Yt=$[2][1],G.push(hr([[Ut-M,Yt-M],[Ut-M,wt+M],[st+M,wt+M],[st+M,Ct-M]],30));return{type:"Polygon",coordinates:[s.merge(G)]}}var Ui=function(G,$){var st=Gr($);$=$.map(function(qt){return qt.map(function(he){return[[he[0][0]*K,he[0][1]*K],[he[1][0]*K,he[1][1]*K],[he[2][0]*K,he[2][1]*K]]})});var Ct=$.map(function(qt){return qt.map(function(he){var ye=G(he[0][0],he[0][1])[0],je=G(he[2][0],he[2][1])[0],Ie=G(he[1][0],he[0][1])[1],Ve=G(he[1][0],he[1][1])[1],qe;return Ie>Ve&&(qe=Ie,Ie=Ve,Ve=qe),[[ye,Ie],[je,Ve]]})});function wt(qt,he){for(var ye=he<0?-1:1,je=$[+(he<0)],Ie=0,Ve=je.length-1;Ie<Ve&&qt>je[Ie][2][0];++Ie);var qe=G(qt-je[Ie][1][0],he);return qe[0]+=G(je[Ie][1][0],ye*he>ye*je[Ie][0][1]?je[Ie][0][1]:he)[0],qe}G.invert&&(wt.invert=function(qt,he){for(var ye=Ct[+(he<0)],je=$[+(he<0)],Ie=0,Ve=ye.length;Ie<Ve;++Ie){var qe=ye[Ie];if(qe[0][0]<=qt&&qt<qe[1][0]&&qe[0][1]<=he&&he<qe[1][1]){var sn=G.invert(qt-G(je[Ie][1][0],0)[0],he);return sn[0]+=je[Ie][1][0],mn(wt(sn[0],sn[1]),[qt,he])?sn:null}}});var Ut=l.geoProjection(wt),Yt=Ut.stream;return Ut.stream=function(qt){var he=Ut.rotate(),ye=Yt(qt),je=(Ut.rotate([0,0]),Yt(qt));return Ut.rotate(he),ye.sphere=function(){l.geoStream(st,je)},ye},Ut},Ka=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],xo=function(){return Ui(Qt,Ka).scale(160.857)},vo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],qi=function(){return Ui(as,vo).scale(152.63)},Qa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],bs=function(){return Ui(q,Qa).scale(169.529)},Es=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Ga=function(){return Ui(q,Es).scale(169.529).rotate([20,0])},Pu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Uo=function(){return Ui($a,Pu).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},Ps=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],Qs=function(){return Ui($t,Ps).scale(152.63).rotate([-20,0])};function fs(D,G){return[3/W*D*X(m*m/3-G*G),G]}fs.invert=function(D,G){return[W/3*D/X(m*m/3-G*G),G]};var hs=function(){return l.geoProjection(fs).scale(158.837)};function os(D){function G($,st){if(c(c(st)-S)<M)return[0,st<0?-2:2];var Ct=g(st),wt=v((1+Ct)/(1-Ct),D/2),Ut=.5*(wt+1/wt)+n($*=D);return[2*g($)/Ut,(wt-1/wt)/Ut]}return G.invert=function($,st){var Ct=c(st);if(c(Ct-2)<M)return $?null:[0,y(st)*S];if(Ct>2)return null;$/=2,st/=2;var wt=$*$,Ut=st*st,Yt=2*st/(1+wt+Ut);return Yt=v((1+Yt)/(1-Yt),1/D),[h(2*$,1-wt-Ut)/D,k((Yt-1)/(Yt+1))]},G}var ds=function(){var G=.5,$=l.geoProjectionMutator(os),st=$(G);return st.spacing=function(Ct){return arguments.length?$(G=+Ct):G},st.scale(124.75)},Ts=m/O;function Ou(D,G){return[D*(1+X(n(G)))/2,G/(n(G/2)*n(D/6))]}Ou.invert=function(D,G){var $=c(D),st=c(G),Ct=M,wt=S;st<Ts?wt*=st/Ts:Ct+=6*Z(Ts/st);for(var Ut=0;Ut<25;Ut++){var Yt=g(wt),qt=X(n(wt)),he=g(wt/2),ye=n(wt/2),je=g(Ct/6),Ie=n(Ct/6),Ve=.5*Ct*(1+qt)-$,qe=wt/(ye*Ie)-st,sn=qt?-.25*Ct*Yt/qt:0,tr=.5*(1+qt),kn=(1+.5*wt*he/ye)/(ye*Ie),pr=wt/ye*(je/6)/(Ie*Ie),Mr=sn*pr-kn*tr,$r=(Ve*pr-qe*tr)/Mr,Yr=(qe*sn-Ve*kn)/Mr;if(wt-=$r,Ct-=Yr,c($r)<M&&c(Yr)<M)break}return[D<0?-Ct:Ct,G<0?-wt:wt]};var Uu=function(){return l.geoProjection(Ou).scale(97.2672)};function uo(D,G){var $=D*D,st=G*G;return[D*(.975534+st*(-.119161+$*-.0143059+st*-.0547009)),G*(1.00384+$*(.0802894+st*-.02855+$*199025e-9)+st*(.0998909+st*-.0491032))]}uo.invert=function(D,G){var $=y(D)*m,st=G/2,Ct=50;do{var wt=$*$,Ut=st*st,Yt=$*st,qt=$*(.975534+Ut*(-.119161+wt*-.0143059+Ut*-.0547009))-D,he=st*(1.00384+wt*(.0802894+Ut*-.02855+wt*199025e-9)+Ut*(.0998909+Ut*-.0491032))-G,ye=.975534-Ut*(.119161+3*wt*.0143059+Ut*.0547009),je=-Yt*(2*.119161+4*.0547009*Ut+2*.0143059*wt),Ie=Yt*(2*.0802894+4*199025e-9*wt+2*-.02855*Ut),Ve=1.00384+wt*(.0802894+199025e-9*wt)+Ut*(3*(.0998909-.02855*wt)-5*.0491032*Ut),qe=je*Ie-Ve*ye,sn=(he*je-qt*Ve)/qe,tr=(qt*Ie-he*ye)/qe;$-=sn,st-=tr}while((c(sn)>M||c(tr)>M)&&--Ct>0);return Ct&&[$,st]};var Fs=function(){return l.geoProjection(uo).scale(139.98)};function ku(D,G){return[g(D)/n(G),_(G)*n(D)]}ku.invert=function(D,G){var $=D*D,st=G*G,Ct=st+1,wt=D?A*X((Ct-X($*$+2*$*(st-1)+Ct*Ct))/$+1):1/X(Ct);return[k(D*wt),y(G)*Z(wt)]};var ul=function(){return l.geoProjection(ku).scale(144.049).clipAngle(90-.001)};function ll(D){var G=n(D),$=_(P+D/2);function st(Ct,wt){var Ut=wt-D,Yt=c(Ut)<M?Ct*G:c(Yt=P+wt/2)<M||c(c(Yt)-S)<M?0:Ct*Ut/o(_(Yt)/$);return[Yt,Ut]}return st.invert=function(Ct,wt){var Ut,Yt=wt+D;return[c(wt)<M?Ct/G:c(Ut=P+Yt/2)<M||c(c(Ut)-S)<M?0:Ct*o(_(Ut)/$)/wt,Yt]},st}var Qu=function(){return Vt(ll).parallel(40).scale(158.837)};function To(D,G){return[D,1.25*o(_(P+.4*G))]}To.invert=function(D,G){return[D,2.5*r(i(.8*G))-.625*m]};var La=function(){return l.geoProjection(To).scale(108.318)};function ya(D){var G=D.length-1;function $(st,Ct){for(var wt=n(Ct),Ut=2/(1+wt*n(st)),Yt=Ut*wt*g(st),qt=Ut*g(Ct),he=G,ye=D[he],je=ye[0],Ie=ye[1],Ve;--he>=0;)ye=D[he],je=ye[0]+Yt*(Ve=je)-qt*Ie,Ie=ye[1]+Yt*Ie+qt*Ve;return je=Yt*(Ve=je)-qt*Ie,Ie=Yt*Ie+qt*Ve,[je,Ie]}return $.invert=function(st,Ct){var wt=20,Ut=st,Yt=Ct;do{for(var qt=G,he=D[qt],ye=he[0],je=he[1],Ie=0,Ve=0,qe;--qt>=0;)he=D[qt],Ie=ye+Ut*(qe=Ie)-Yt*Ve,Ve=je+Ut*Ve+Yt*qe,ye=he[0]+Ut*(qe=ye)-Yt*je,je=he[1]+Ut*je+Yt*qe;Ie=ye+Ut*(qe=Ie)-Yt*Ve,Ve=je+Ut*Ve+Yt*qe,ye=Ut*(qe=ye)-Yt*je-st,je=Ut*je+Yt*qe-Ct;var sn=Ie*Ie+Ve*Ve,tr,kn;Ut-=tr=(ye*Ie+je*Ve)/sn,Yt-=kn=(je*Ie-ye*Ve)/sn}while(c(tr)+c(kn)>M*M&&--wt>0);if(wt){var pr=X(Ut*Ut+Yt*Yt),Mr=2*r(pr*.5),$r=g(Mr);return[h(Ut*$r,pr*n(Mr)),pr?k(Yt*$r/pr):0]}},$}var wo=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],pu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],El=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],zs=[[.9245,0],[0,0],[.01943,0]],Ss=[[.721316,0],[0,0],[-.00881625,-.00617325]];function ou(){return Wa(wo,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function qs(){return Wa(pu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ls(){return Wa(El,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function qu(){return Wa(zs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function su(){return Wa(Ss,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Wa(D,G){var $=l.geoProjection(ya(D)).rotate(G).clipAngle(90),st=l.geoRotation(G),Ct=$.center;return delete $.rotate,$.center=function(wt){return arguments.length?Ct(st(wt)):st.invert(Ct())},$}var Sl=X(6),Ql=X(7);function _l(D,G){var $=k(7*g(G)/(3*Sl));return[Sl*D*(2*n(2*$/3)-1)/Ql,9*g($/3)/Ql]}_l.invert=function(D,G){var $=3*k(G*Ql/9);return[D*Ql/(Sl*(2*n(2*$/3)-1)),k(g($)*3*Sl/7)]};var ql=function(){return l.geoProjection(_l).scale(164.859)};function Gu(D,G){for(var $=(1+A)*g(G),st=G,Ct=0,wt;Ct<25&&(st-=wt=(g(st/2)+g(st)-$)/(.5*n(st/2)+n(st)),!(c(wt)<M));Ct++);return[D*(1+2*n(st)/n(st/2))/(3*O),2*X(3)*g(st/2)/X(2+O)]}Gu.invert=function(D,G){var $=G*X(2+O)/(2*X(3)),st=2*k($);return[3*O*D/(1+2*n(st)/n(st/2)),k(($+g(st))/(1+A))]};var Ha=function(){return l.geoProjection(Gu).scale(188.209)};function uu(D,G){for(var $=X(6/(4+m)),st=(1+m/4)*g(G),Ct=G/2,wt=0,Ut;wt<25&&(Ct-=Ut=(Ct/2+g(Ct)-st)/(.5+n(Ct)),!(c(Ut)<M));wt++);return[$*(.5+n(Ct))*D/1.5,$*Ct]}uu.invert=function(D,G){var $=X(6/(4+m)),st=G/$;return c(c(st)-S)<M&&(st=st<0?-S:S),[1.5*D/($*(.5+n(st))),k((st/2+g(st))/(1+m/4))]};var Ml=function(){return l.geoProjection(uu).scale(166.518)};function vs(D,G){var $=G*G,st=$*$;return[D*(.8707-.131979*$+st*(-.013791+st*(.003971*$-.001529*st))),G*(1.007226+$*(.015085+st*(-.044475+.028874*$-.005916*st)))]}vs.invert=function(D,G){var $=G,st=25,Ct;do{var wt=$*$,Ut=wt*wt;$-=Ct=($*(1.007226+wt*(.015085+Ut*(-.044475+.028874*wt-.005916*Ut)))-G)/(1.007226+wt*(.015085*3+Ut*(-.044475*7+.028874*9*wt-.005916*11*Ut)))}while(c(Ct)>M&&--st>0);return[D/(.8707+(wt=$*$)*(-.131979+wt*(-.013791+wt*wt*wt*(.003971-.001529*wt)))),$]};var wu=function(){return l.geoProjection(vs).scale(175.295)};function gu(D,G){var $=G*G,st=$*$,Ct=$*st;return[D*(.84719-.13063*$+Ct*Ct*(-.04515+.05494*$-.02326*st+.00331*Ct)),G*(1.01183+st*st*(-.02625+.01926*$-.00396*st))]}gu.invert=function(D,G){var $=G,st=25,Ct,wt,Ut,Yt;do wt=$*$,Ut=wt*wt,$-=Ct=($*(1.01183+Ut*Ut*(-.02625+.01926*wt-.00396*Ut))-G)/(1.01183+Ut*Ut*(9*-.02625+11*.01926*wt+13*-.00396*Ut));while(c(Ct)>x&&--st>0);return wt=$*$,Ut=wt*wt,Yt=wt*Ut,[D/(.84719-.13063*wt+Yt*Yt*(-.04515+.05494*wt-.02326*Ut+.00331*Yt)),$]};var Vu=function(){return l.geoProjection(gu).scale(175.295)};function Ws(D,G){return[D*(1+n(G))/2,2*(G-_(G/2))]}Ws.invert=function(D,G){for(var $=G/2,st=0,Ct=Infinity;st<10&&c(Ct)>M;++st){var wt=n(G/2);G-=Ct=(G-_(G/2)-$)/(1-.5/(wt*wt))}return[2*D/(1+n(G)),G]};var Jo=function(){return l.geoProjection(Ws).scale(152.63)},ss=1.0148,cl=.23185,Rl=-.14499,tc=.02406,Wu=ss,tl=5*cl,Iu=7*Rl,Lu=9*tc,mu=1.790857183;function Hu(D,G){var $=G*G;return[D,G*(ss+$*$*(cl+$*(Rl+tc*$)))]}Hu.invert=function(D,G){G>mu?G=mu:G<-mu&&(G=-mu);var $=G,st;do{var Ct=$*$;$-=st=($*(ss+Ct*Ct*(cl+Ct*(Rl+tc*Ct)))-G)/(Wu+Ct*Ct*(tl+Ct*(Iu+Lu*Ct)))}while(c(st)>M);return[D,$]};var Us=function(){return l.geoProjection(Hu).scale(139.319)};function Dl(D,G){if(c(G)<M)return[D,0];var $=_(G),st=D*g(G);return[g(st)/$,G+(1-n(st))/$]}Dl.invert=function(D,G){if(c(G)<M)return[D,0];var $=D*D+G*G,st=G*.5,Ct=10,wt;do{var Ut=_(st),Yt=1/n(st),qt=$-2*G*st+st*st;st-=wt=(Ut*qt+2*(st-G))/(2+qt*Yt*Yt+2*(st-G)*Ut)}while(c(wt)>M&&--Ct>0);return Ut=_(st),[(c(G)<c(st+1/Ut)?k(D*Ut):y(D)*(Z(c(D*Ut))+S))/g(st),st]};var hc=function(){return l.geoProjection(Dl).scale(103.74)},Pl=function(G,$){var st=sc(G[1],G[0]),Ct=sc($[1],$[0]),wt=Tl(st,Ct),Ut=el(st)/el(Ct);return Bl([1,0,G[0][0],0,1,G[0][1]],Bl([Ut,0,0,0,Ut,0],Bl([n(wt),g(wt),0,-g(wt),n(wt),0],[1,0,-$[0][0],0,1,-$[0][1]])))};function jl(D){var G=1/(D[0]*D[4]-D[1]*D[3]);return[G*D[4],-G*D[1],G*(D[1]*D[5]-D[2]*D[4]),-G*D[3],G*D[0],G*(D[2]*D[3]-D[0]*D[5])]}function Bl(D,G){return[D[0]*G[0]+D[1]*G[3],D[0]*G[1]+D[1]*G[4],D[0]*G[2]+D[1]*G[5]+D[2],D[3]*G[0]+D[4]*G[3],D[3]*G[1]+D[4]*G[4],D[3]*G[2]+D[4]*G[5]+D[5]]}function sc(D,G){return[D[0]-G[0],D[1]-G[1]]}function el(D){return X(D[0]*D[0]+D[1]*D[1])}function Tl(D,G){return h(D[0]*G[1]-D[1]*G[0],D[0]*G[0]+D[1]*G[1])}var Nl=function(G,$,st){st=st==null?-m/6:st,Ct(G,{transform:[n(st),g(st),0,-g(st),n(st),0]});function Ct(ye,je){if(ye.edges=fl(ye.face),je.face){var Ie=ye.shared=pl(ye.face,je.face),Ve=Pl(Ie.map(je.project),Ie.map(ye.project));ye.transform=je.transform?Bl(je.transform,Ve):Ve;for(var qe=je.edges,sn=0,tr=qe.length;sn<tr;++sn)po(Ie[0],qe[sn][1])&&po(Ie[1],qe[sn][0])&&(qe[sn]=ye),po(Ie[0],qe[sn][0])&&po(Ie[1],qe[sn][1])&&(qe[sn]=ye);for(qe=ye.edges,sn=0,tr=qe.length;sn<tr;++sn)po(Ie[0],qe[sn][0])&&po(Ie[1],qe[sn][1])&&(qe[sn]=je),po(Ie[0],qe[sn][1])&&po(Ie[1],qe[sn][0])&&(qe[sn]=je)}else ye.transform=je.transform;return ye.children&&ye.children.forEach(function(kn){Ct(kn,ye)}),ye}function wt(ye,je){var Ie=$(ye,je),Ve=Ie.project([ye*F,je*F]),qe;return(qe=Ie.transform)?[qe[0]*Ve[0]+qe[1]*Ve[1]+qe[2],-(qe[3]*Ve[0]+qe[4]*Ve[1]+qe[5])]:(Ve[1]=-Ve[1],Ve)}Hs(G)&&(wt.invert=function(ye,je){var Ie=Ut(G,[ye,-je]);return Ie&&(Ie[0]*=K,Ie[1]*=K,Ie)});function Ut(ye,je){var Ie=ye.project.invert,Ve=ye.transform,qe=je;if(Ve&&(Ve=jl(Ve),qe=[Ve[0]*qe[0]+Ve[1]*qe[1]+Ve[2],Ve[3]*qe[0]+Ve[4]*qe[1]+Ve[5]]),Ie&&ye===Yt(sn=Ie(qe)))return sn;for(var sn,tr=ye.children,kn=0,pr=tr&&tr.length;kn<pr;++kn)if(sn=Ut(tr[kn],je))return sn}function Yt(ye){return $(ye[0]*K,ye[1]*K)}var qt=l.geoProjection(wt),he=qt.stream;return qt.stream=function(ye){var je=qt.rotate(),Ie=he(ye),Ve=(qt.rotate([0,0]),he(ye));return qt.rotate(je),Ie.sphere=function(){Ve.polygonStart(),Ve.lineStart(),tu(Ve,G),Ve.lineEnd(),Ve.polygonEnd()},Ie},qt};function tu(D,G,$){var st,Ct=G.edges,wt=Ct.length,Ut,Yt={type:"MultiPoint",coordinates:G.face},qt=G.face.filter(function(sn){return c(sn[1])!==90}),he=l.geoBounds({type:"MultiPoint",coordinates:qt}),ye=!1,je=-1,Ie=he[1][0]-he[0][0],Ve=Ie===180||Ie===360?[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2]:l.geoCentroid(Yt);if($)for(;++je<wt&&Ct[je]!==$;);++je;for(var qe=0;qe<wt;++qe)Ut=Ct[(qe+je)%wt],Array.isArray(Ut)?(ye||(D.point((st=l.geoInterpolate(Ut[0],Ve)(M))[0],st[1]),ye=!0),D.point((st=l.geoInterpolate(Ut[1],Ve)(M))[0],st[1])):(ye=!1,Ut!==$&&tu(D,Ut,G))}function po(D,G){return D&&G&&D[0]===G[0]&&D[1]===G[1]}function pl(D,G){for(var $,st,Ct=D.length,wt=null,Ut=0;Ut<Ct;++Ut){$=D[Ut];for(var Yt=G.length;--Yt>=0;)if(st=G[Yt],$[0]===st[0]&&$[1]===st[1]){if(wt)return[wt,$];wt=$}}}function fl(D){for(var G=D.length,$=[],st=D[G-1],Ct=0;Ct<G;++Ct)$.push([st,st=D[Ct]]);return $}function Hs(D){return D.project.invert||D.children&&D.children.some(Hs)}var Da=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],bo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(D){return D.map(function(G){return Da[G]})}),ks=function(G){G=G||function(st){var Ct=l.geoCentroid({type:"MultiPoint",coordinates:st});return l.geoGnomonic().scale(1).translate([0,0]).rotate([-Ct[0],-Ct[1]])};var $=bo.map(function(st){return{face:st,project:G(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var wt=$[st];wt&&(wt.children||(wt.children=[])).push($[Ct])}),Nl($[0],function(st,Ct){return $[st<-m/2?Ct<0?6:4:st<0?Ct<0?2:0:st<m/2?Ct<0?3:1:Ct<0?7:5]}).scale(101.858).center([0,45])},gl=2/X(3);function nl(D,G){var $=hi(D,G);return[$[0]*gl,$[1]]}nl.invert=function(D,G){return hi.invert(D/gl,G)};var Yu=function(G){G=G||function(st){var Ct=l.geoCentroid({type:"MultiPoint",coordinates:st});return l.geoProjection(nl).translate([0,0]).scale(1).rotate(Ct[1]>0?[-Ct[0],0]:[180-Ct[0],180])};var $=bo.map(function(st){return{face:st,project:G(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var wt=$[st];wt&&(wt.children||(wt.children=[])).push($[Ct])}),Nl($[0],function(st,Ct){return $[st<-m/2?Ct<0?6:4:st<0?Ct<0?2:0:st<m/2?Ct<0?3:1:Ct<0?7:5]}).scale(121.906).center([0,48.5904])},dc=function(G){G=G||function(Yt){var qt=Yt.length===6?l.geoCentroid({type:"MultiPoint",coordinates:Yt}):Yt[0];return l.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var $=bo.map(function(Yt){for(var qt=Yt.map(Ys),he=qt.length,ye=qt[he-1],je,Ie=[],Ve=0;Ve<he;++Ve)je=qt[Ve],Ie.push(lu([ye[0]*.9486832980505138+je[0]*.31622776601683794,ye[1]*.9486832980505138+je[1]*.31622776601683794,ye[2]*.9486832980505138+je[2]*.31622776601683794]),lu([je[0]*.9486832980505138+ye[0]*.31622776601683794,je[1]*.9486832980505138+ye[1]*.31622776601683794,je[2]*.9486832980505138+ye[2]*.31622776601683794])),ye=je;return Ie}),st=[],Ct=[-1,0,0,1,0,1,4,5];$.forEach(function(Yt,qt){for(var he=bo[qt],ye=he.length,je=st[qt]=[],Ie=0;Ie<ye;++Ie)$.push([he[Ie],Yt[(Ie*2+2)%(2*ye)],Yt[(Ie*2+1)%(2*ye)]]),Ct.push(qt),je.push(rl(Ys(Yt[(Ie*2+2)%(2*ye)]),Ys(Yt[(Ie*2+1)%(2*ye)])))});var wt=$.map(function(Yt){return{project:G(Yt),face:Yt}});Ct.forEach(function(Yt,qt){var he=wt[Yt];he&&(he.children||(he.children=[])).push(wt[qt])});function Ut(Yt,qt){var he=n(qt),ye=[he*n(Yt),he*g(Yt),g(qt)],je=Yt<-m/2?qt<0?6:4:Yt<0?qt<0?2:0:Yt<m/2?qt<0?3:1:qt<0?7:5,Ie=st[je];return wt[As(Ie[0],ye)<0?8+3*je:As(Ie[1],ye)<0?8+3*je+1:As(Ie[2],ye)<0?8+3*je+2:je]}return Nl(wt[0],Ut).scale(110.625).center([0,45])};function As(D,G){for(var $=0,st=D.length,Ct=0;$<st;++$)Ct+=D[$]*G[$];return Ct}function rl(D,G){return[D[1]*G[2]-D[2]*G[1],D[2]*G[0]-D[0]*G[2],D[0]*G[1]-D[1]*G[0]]}function lu(D){return[h(D[1],D[0])*F,k(u(-1,f(1,D[2])))*F]}function Ys(D){var G=D[0]*K,$=D[1]*K,st=n($);return[st*n(G),st*g(G),g($)]}var $o=function(){},eu=function(G){if((st=G.length)<4)return!1;for(var $=0,st,Ct=G[st-1][1]*G[0][0]-G[st-1][0]*G[0][1];++$<st;)Ct+=G[$-1][1]*G[$][0]-G[$-1][0]*G[$][1];return Ct<=0},Ru=function(G,$){for(var st=$[0],Ct=$[1],wt=!1,Ut=0,Yt=G.length,qt=Yt-1;Ut<Yt;qt=Ut++){var he=G[Ut],ye=he[0],je=he[1],Ie=G[qt],Ve=Ie[0],qe=Ie[1];je>Ct^qe>Ct&&st<(Ve-ye)*(Ct-je)/(qe-je)+ye&&(wt=!wt)}return wt},Qo=function(G,$){var st=$.stream,Ct;if(!st)throw new Error("invalid projection");switch(G&&G.type){case"Feature":Ct=Cs;break;case"FeatureCollection":Ct=Wi;break;default:Ct=Du;break}return Ct(G,st)};function Wi(D,G){return{type:"FeatureCollection",features:D.features.map(function($){return Cs($,G)})}}function Cs(D,G){return{type:"Feature",id:D.id,properties:D.properties,geometry:Du(D.geometry,G)}}function Zu(D,G){return{type:"GeometryCollection",geometries:D.geometries.map(function($){return Du($,G)})}}function Du(D,G){if(!D)return null;if(D.type==="GeometryCollection")return Zu(D,G);var $;switch(D.type){case"Point":$=Tu;break;case"MultiPoint":$=Tu;break;case"LineString":$=Mi;break;case"MultiLineString":$=Mi;break;case"Polygon":$=il;break;case"MultiPolygon":$=il;break;case"Sphere":$=il;break;default:return null}return l.geoStream(D,G($)),$.result()}var jo=[],Bo=[],Tu={point:function(G,$){jo.push([G,$])},result:function(){var G=jo.length?jo.length<2?{type:"Point",coordinates:jo[0]}:{type:"MultiPoint",coordinates:jo}:null;return jo=[],G}},Mi={lineStart:$o,point:function(G,$){jo.push([G,$])},lineEnd:function(){jo.length&&(Bo.push(jo),jo=[])},result:function(){var G=Bo.length?Bo.length<2?{type:"LineString",coordinates:Bo[0]}:{type:"MultiLineString",coordinates:Bo}:null;return Bo=[],G}},il={polygonStart:$o,lineStart:$o,point:function(G,$){jo.push([G,$])},lineEnd:function(){var G=jo.length;if(G){do jo.push(jo[0].slice());while(++G<4);Bo.push(jo),jo=[]}},polygonEnd:$o,result:function(){if(!Bo.length)return null;var G=[],$=[];return Bo.forEach(function(st){eu(st)?G.push([st]):$.push(st)}),$.forEach(function(st){var Ct=st[0];G.some(function(wt){if(Ru(wt[0],Ct))return wt.push(st),!0})||G.push([st])}),Bo=[],G.length?G.length>1?{type:"MultiPolygon",coordinates:G}:{type:"Polygon",coordinates:G[0]}:null}},ju=function(G){var $=G(S,0)[0]-G(-S,0)[0];function st(Ct,wt){var Ut=c(Ct)<S,Yt=G(Ut?Ct:Ct>0?Ct-m:Ct+m,wt),qt=(Yt[0]-Yt[1])*A,he=(Yt[0]+Yt[1])*A;if(Ut)return[qt,he];var ye=$*A,je=qt>0^he>0?-1:1;return[je*qt-y(he)*ye,je*he-y(qt)*ye]}return G.invert&&(st.invert=function(Ct,wt){var Ut=(Ct+wt)*A,Yt=(wt-Ct)*A,qt=c(Ut)<.5*$&&c(Yt)<.5*$;if(!qt){var he=$*A,ye=Ut>0^Yt>0?-1:1,je=-ye*Ct+(Yt>0?1:-1)*he,Ie=-ye*wt+(Ut>0?1:-1)*he;Ut=(-je-Ie)*A,Yt=(je-Ie)*A}var Ve=G.invert(Ut,Yt);return qt||(Ve[0]+=Ut>0?m:-m),Ve}),l.geoProjection(st).rotate([-90,-90,45]).clipAngle(180-.001)},Bu=function(){return ju(au).scale(176.423)},nu=function(){return ju(qn).scale(111.48)},we=function(G,$){if(!(0<=($=+$)&&$<=20))throw new Error("invalid digits");function st(he){var ye=he.length,je=2,Ie=new Array(ye);for(Ie[0]=+he[0].toFixed($),Ie[1]=+he[1].toFixed($);je<ye;)Ie[je]=he[je],++je;return Ie}function Ct(he){return he.map(st)}function wt(he){return he.map(Ct)}function Ut(he){if(he==null)return he;var ye;switch(he.type){case"GeometryCollection":ye={type:"GeometryCollection",geometries:he.geometries.map(Ut)};break;case"Point":ye={type:"Point",coordinates:st(he.coordinates)};break;case"MultiPoint":case"LineString":ye={type:he.type,coordinates:Ct(he.coordinates)};break;case"MultiLineString":case"Polygon":ye={type:he.type,coordinates:wt(he.coordinates)};break;case"MultiPolygon":ye={type:"MultiPolygon",coordinates:he.coordinates.map(wt)};break;default:return he}return he.bbox!=null&&(ye.bbox=he.bbox),ye}function Yt(he){var ye={type:"Feature",properties:he.properties,geometry:Ut(he.geometry)};return he.id!=null&&(ye.id=he.id),he.bbox!=null&&(ye.bbox=he.bbox),ye}if(G!=null)switch(G.type){case"Feature":return Yt(G);case"FeatureCollection":{var qt={type:"FeatureCollection",features:G.features.map(Yt)};return G.bbox!=null&&(qt.bbox=G.bbox),qt}default:return Ut(G)}return G};function Pe(D){var G=g(D);function $(st,Ct){var wt=G?_(st*G/2)/G:st/2;if(!Ct)return[2*wt,-D];var Ut=2*r(wt*g(Ct)),Yt=1/_(Ct);return[g(Ut)*Yt,Ct+(1-n(Ut))*Yt-D]}return $.invert=function(st,Ct){if(c(Ct+=D)<M)return[G?2*r(G*st/2)/G:st,0];var wt=st*st+Ct*Ct,Ut=0,Yt=10,qt;do{var he=_(Ut),ye=1/n(Ut),je=wt-2*Ct*Ut+Ut*Ut;Ut-=qt=(he*je+2*(Ut-Ct))/(2+je*ye*ye+2*(Ut-Ct)*he)}while(c(qt)>M&&--Yt>0);var Ie=st*(he=_(Ut)),Ve=_(c(Ct)<c(Ut+1/he)?k(Ie)*.5:Z(Ie)*.5+m/4)/g(Ut);return[G?2*r(G*Ve)/G:2*Ve,Ut]},$}var dn=function(){return Vt(Pe).scale(131.215)},tn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];tn.forEach(function(D){D[1]*=1.0144});function wn(D,G){var $=f(18,c(G)*36/m),st=a($),Ct=$-st,wt=(je=tn[st])[0],Ut=je[1],Yt=(je=tn[++st])[0],qt=je[1],he=(je=tn[f(19,++st)])[0],ye=je[1],je;return[D*(Yt+Ct*(he-wt)/2+Ct*Ct*(he-2*Yt+wt)/2),(G>0?S:-S)*(qt+Ct*(ye-Ut)/2+Ct*Ct*(ye-2*qt+Ut)/2)]}wn.invert=function(D,G){var $=G/S,st=$*90,Ct=f(18,c(st/5)),wt=u(0,a(Ct));do{var Ut=tn[wt][1],Yt=tn[wt+1][1],qt=tn[f(19,wt+2)][1],he=qt-Ut,ye=qt-2*Yt+Ut,je=2*(c($)-Yt)/he,Ie=ye/he,Ve=je*(1-Ie*je*(1-2*Ie*je));if(Ve>=0||wt===1){st=(G>=0?5:-5)*(Ve+Ct);var qe=50,sn;do Ct=f(18,c(st)/5),wt=a(Ct),Ve=Ct-wt,Ut=tn[wt][1],Yt=tn[wt+1][1],qt=tn[f(19,wt+2)][1],st-=(sn=(G>=0?S:-S)*(Yt+Ve*(qt-Ut)/2+Ve*Ve*(qt-2*Yt+Ut)/2)-G)*F;while(c(sn)>x&&--qe>0);break}}while(--wt>=0);var tr=tn[wt][0],kn=tn[wt+1][0],pr=tn[f(19,wt+2)][0];return[D/(kn+Ve*(pr-tr)/2+Ve*Ve*(pr-2*kn+tr)/2),st*K]};var dr=function(){return l.geoProjection(wn).scale(152.63)};function Rr(D){function G($,st){var Ct=n(st),wt=(D-1)/(D-Ct*n($));return[wt*Ct*g($),wt*g(st)]}return G.invert=function($,st){var Ct=$*$+st*st,wt=X(Ct),Ut=(D-X(1-Ct*(D+1)/(D-1)))/((D-1)/wt+wt/(D-1));return[h($*Ut,wt*X(1-Ut*Ut)),wt?k(st*Ut/wt):0]},G}function Xr(D,G){var $=Rr(D);if(!G)return $;var st=n(G),Ct=g(G);function wt(Ut,Yt){var qt=$(Ut,Yt),he=qt[1],ye=he*Ct/(D-1)+st;return[qt[0]*st/ye,he/ye]}return wt.invert=function(Ut,Yt){var qt=(D-1)/(D-1-Yt*Ct);return $.invert(qt*Ut,qt*Yt*st)},wt}var ti=function(){var G=2,$=0,st=l.geoProjectionMutator(Xr),Ct=st(G,$);return Ct.distance=function(wt){return arguments.length?st(G=+wt,$):G},Ct.tilt=function(wt){return arguments.length?st(G,$=wt*K):$*F},Ct.scale(432.147).clipAngle(Z(1/G)*F-1e-6)},Fr=1e-4,li=1e4,yr=-180,Zt=yr+Fr,te=180,Le=te-Fr,Se=-90,Dt=Se+Fr,zt=90,se=zt-Fr;function re(D){return D.length>0}function fe(D){return Math.floor(D*li)/li}function Fe(D){return D===Se||D===zt?[0,D]:[yr,fe(D)]}function Ke(D){var G=D[0],$=D[1],st=!1;return G<=Zt?(G=yr,st=!0):G>=Le&&(G=te,st=!0),$<=Dt?($=Se,st=!0):$>=se&&($=zt,st=!0),st?[G,$]:D}function rn(D){return D.map(Ke)}function Je(D,G,$){for(var st=0,Ct=D.length;st<Ct;++st){var wt=D[st].slice();$.push({index:-1,polygon:G,ring:wt});for(var Ut=0,Yt=wt.length;Ut<Yt;++Ut){var qt=wt[Ut],he=qt[0],ye=qt[1];if(he<=Zt||he>=Le||ye<=Dt||ye>=se){wt[Ut]=Ke(qt);for(var je=Ut+1;je<Yt;++je){var Ie=wt[je],Ve=Ie[0],qe=Ie[1];if(Ve>Zt&&Ve<Le&&qe>Dt&&qe<se)break}if(je===Ut+1)continue;if(Ut){var sn={index:-1,polygon:G,ring:wt.slice(0,Ut+1)};sn.ring[sn.ring.length-1]=Fe(ye),$[$.length-1]=sn}else $.pop();if(je>=Yt)break;$.push({index:-1,polygon:G,ring:wt=wt.slice(je-1)}),wt[0]=Fe(wt[0][1]),Ut=-1,Yt=wt.length}}}}function pn(D){var G,$=D.length,st={},Ct={},wt,Ut,Yt,qt,he;for(G=0;G<$;++G){if(wt=D[G],Ut=wt.ring[0],qt=wt.ring[wt.ring.length-1],Ut[0]===qt[0]&&Ut[1]===qt[1]){wt.polygon.push(wt.ring),D[G]=null;continue}wt.index=G,st[Ut]=Ct[qt]=wt}for(G=0;G<$;++G)if(wt=D[G],wt){if(Ut=wt.ring[0],qt=wt.ring[wt.ring.length-1],Yt=Ct[Ut],he=st[qt],delete st[Ut],delete Ct[qt],Ut[0]===qt[0]&&Ut[1]===qt[1]){wt.polygon.push(wt.ring);continue}Yt?(delete Ct[Ut],delete st[Yt.ring[0]],Yt.ring.pop(),D[Yt.index]=null,wt={index:-1,polygon:Yt.polygon,ring:Yt.ring.concat(wt.ring)},Yt===he?wt.polygon.push(wt.ring):(wt.index=$++,D.push(st[wt.ring[0]]=Ct[wt.ring[wt.ring.length-1]]=wt))):he?(delete st[qt],delete Ct[he.ring[he.ring.length-1]],wt.ring.pop(),wt={index:$++,polygon:he.polygon,ring:wt.ring.concat(he.ring)},D[he.index]=null,D.push(st[wt.ring[0]]=Ct[wt.ring[wt.ring.length-1]]=wt)):(wt.ring.push(wt.ring[0]),wt.polygon.push(wt.ring))}}function hn(D){var G={type:"Feature",geometry:Jn(D.geometry)};return D.id!=null&&(G.id=D.id),D.bbox!=null&&(G.bbox=D.bbox),D.properties!=null&&(G.properties=D.properties),G}function Jn(D){if(D==null)return D;var G,$,st,Ct;switch(D.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:D.geometries.map(Jn)};break;case"Point":G={type:"Point",coordinates:Ke(D.coordinates)};break;case"MultiPoint":case"LineString":G={type:D.type,coordinates:rn(D.coordinates)};break;case"MultiLineString":G={type:"MultiLineString",coordinates:D.coordinates.map(rn)};break;case"Polygon":{var wt=[];Je(D.coordinates,wt,$=[]),pn($),G={type:"Polygon",coordinates:wt};break}case"MultiPolygon":{$=[],st=-1,Ct=D.coordinates.length;for(var Ut=new Array(Ct);++st<Ct;)Je(D.coordinates[st],Ut[st]=[],$);pn($),G={type:"MultiPolygon",coordinates:Ut.filter(re)};break}default:return D}return D.bbox!=null&&(G.bbox=D.bbox),G}var Vn=function(G){if(G==null)return G;switch(G.type){case"Feature":return hn(G);case"FeatureCollection":{var $={type:"FeatureCollection",features:G.features.map(hn)};return G.bbox!=null&&($.bbox=G.bbox),$}default:return Jn(G)}};function Zn(D,G){var $=_(G/2),st=g(P*$);return[D*(.74482-.34588*st*st),1.70711*$]}Zn.invert=function(D,G){var $=G/1.70711,st=g(P*$);return[D/(.74482-.34588*st*st),2*r($)]};var Wn=function(){return l.geoProjection(Zn).scale(146.153)},cr=function(G,$,st){var Ct=l.geoInterpolate($,st),wt=Ct(.5),Ut=l.geoRotation([-wt[0],-wt[1]])($),Yt=Ct.distance/2,qt=-k(g(Ut[1]*K)/g(Yt)),he=[-wt[0],-wt[1],-(Ut[0]>0?m-qt:qt)*F],ye=l.geoProjection(G(Yt)).rotate(he),je=l.geoRotation(he),Ie=ye.center;return delete ye.rotate,ye.center=function(Ve){return arguments.length?Ie(je(Ve)):je.invert(Ie())},ye.clipAngle(90)};function xr(D){var G=n(D);function $(st,Ct){var wt=l.geoGnomonicRaw(st,Ct);return wt[0]*=G,wt}return $.invert=function(st,Ct){return l.geoGnomonicRaw.invert(st/G,Ct)},$}function Hr(){return mi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function mi(D,G){return cr(xr,D,G)}function Br(D){if(!(D*=2))return l.geoAzimuthalEquidistantRaw;var G=-D/2,$=-G,st=D*D,Ct=_($),wt=.5/g($);function Ut(Yt,qt){var he=Z(n(qt)*n(Yt-G)),ye=Z(n(qt)*n(Yt-$)),je=qt<0?-1:1;return he*=he,ye*=ye,[(he-ye)/(2*D),je*X(4*st*ye-(st-he+ye)*(st-he+ye))/(2*D)]}return Ut.invert=function(Yt,qt){var he=qt*qt,ye=n(X(he+(Ie=Yt+G)*Ie)),je=n(X(he+(Ie=Yt+$)*Ie)),Ie,Ve;return[h(Ve=ye-je,Ie=(ye+je)*Ct),(qt<0?-1:1)*Z(X(Ie*Ie+Ve*Ve)*wt)]},Ut}function ui(){return _i([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function _i(D,G){return cr(Br,D,G)}function Zi(D,G){if(c(G)<M)return[D,0];var $=c(G/S),st=k($);if(c(D)<M||c(c(G)-S)<M)return[0,y(G)*m*_(st/2)];var Ct=n(st),wt=c(m/D-D/m)/2,Ut=wt*wt,Yt=Ct/($+Ct-1),qt=Yt*(2/$-1),he=qt*qt,ye=he+Ut,je=Yt-he,Ie=Ut+Yt;return[y(D)*m*(wt*je+X(Ut*je*je-ye*(Yt*Yt-he)))/ye,y(G)*m*(qt*Ie-wt*X((Ut+1)*ye-Ie*Ie))/ye]}Zi.invert=function(D,G){if(c(G)<M)return[D,0];if(c(D)<M)return[0,S*g(2*r(G/m))];var $=(D/=m)*D,st=(G/=m)*G,Ct=$+st,wt=Ct*Ct,Ut=-c(G)*(1+Ct),Yt=Ut-2*st+$,qt=-2*Ut+1+2*st+wt,he=st/qt+(2*Yt*Yt*Yt/(qt*qt*qt)-9*Ut*Yt/(qt*qt))/27,ye=(Ut-Yt*Yt/(3*qt))/qt,je=2*X(-ye/3),Ie=Z(3*he/(ye*je))/3;return[m*(Ct-1+X(1+2*($-st)+wt))/(2*D),y(G)*m*(-je*n(Ie+m/3)-Yt/(3*qt))]};var Ri=function(){return l.geoProjection(Zi).scale(79.4183)};function Ma(D,G){if(c(G)<M)return[D,0];var $=c(G/S),st=k($);if(c(D)<M||c(c(G)-S)<M)return[0,y(G)*m*_(st/2)];var Ct=n(st),wt=c(m/D-D/m)/2,Ut=wt*wt,Yt=Ct*(X(1+Ut)-wt*Ct)/(1+Ut*$*$);return[y(D)*m*Yt,y(G)*m*X(1-Yt*(2*wt+Yt))]}Ma.invert=function(D,G){if(!D)return[0,S*g(2*r(G/m))];var $=c(D/m),st=(1-$*$-(G/=m)*G)/(2*$),Ct=st*st,wt=X(Ct+1);return[y(D)*m*(wt-st),y(G)*S*g(2*h(X((1-2*st*$)*(st+wt)-$),X(wt+st+$)))]};var ga=function(){return l.geoProjection(Ma).scale(79.4183)};function la(D,G){if(c(G)<M)return[D,0];var $=G/S,st=k($);if(c(D)<M||c(c(G)-S)<M)return[0,m*_(st/2)];var Ct=(m/D-D/m)/2,wt=$/(1+n(st));return[m*(y(D)*X(Ct*Ct+1-wt*wt)-Ct),m*wt]}la.invert=function(D,G){if(!G)return[D,0];var $=G/m,st=(m*m*(1-$*$)-D*D)/(2*m*D);return[D?m*(y(D)*X(st*st+1)-st):0,S*g(2*r($))]};var ii=function(){return l.geoProjection(la).scale(79.4183)};function Pa(D,G){if(!G)return[D,0];var $=c(G);if(!D||$===S)return[0,G];var st=$/S,Ct=st*st,wt=(8*st-Ct*(Ct+2)-5)/(2*Ct*(st-1)),Ut=wt*wt,Yt=st*wt,qt=Ct+Ut+2*Yt,he=st+3*wt,ye=D/S,je=ye+1/ye,Ie=y(c(D)-S)*X(je*je-4),Ve=Ie*Ie,qe=qt*(Ct+Ut*Ve-1)+(1-Ct)*(Ct*(he*he+4*Ut)+12*Yt*Ut+4*Ut*Ut),sn=(Ie*(qt+Ut-1)+2*X(qe))/(4*qt+Ve);return[y(D)*S*sn,y(G)*S*X(1+Ie*c(sn)-sn*sn)]}Pa.invert=function(D,G){var $;if(!D||!G)return[D,G];G/=m;var st=y(D)*D/S,Ct=(st*st-1+4*G*G)/c(st),wt=Ct*Ct,Ut=2*G,Yt=50;do{var qt=Ut*Ut,he=(8*Ut-qt*(qt+2)-5)/(2*qt*(Ut-1)),ye=(3*Ut-qt*Ut-10)/(2*qt*Ut),je=he*he,Ie=Ut*he,Ve=Ut+he,qe=Ve*Ve,sn=Ut+3*he,tr=qe*(qt+je*wt-1)+(1-qt)*(qt*(sn*sn+4*je)+je*(12*Ie+4*je)),kn=-2*Ve*(4*Ie*je+(1-4*qt+3*qt*qt)*(1+ye)+je*(-6+14*qt-wt+(-8+8*qt-2*wt)*ye)+Ie*(-8+12*qt+(-10+10*qt-wt)*ye)),pr=X(tr),Mr=Ct*(qe+je-1)+2*pr-st*(4*qe+wt),$r=Ct*(2*he*ye+2*Ve*(1+ye))+kn/pr-8*Ve*(Ct*(-1+je+qe)+2*pr)*(1+ye)/(wt+4*qe);Ut-=$=Mr/$r}while($>M&&--Yt>0);return[y(D)*(X(Ct*Ct+4)+Ct)*m/4,S*Ut]};var Va=function(){return l.geoProjection(Pa).scale(127.16)},Ya=4*m+3*X(3),Ii=2*X(2*m*X(3)/Ya),Ra=at(Ii*X(3)/m,Ii,Ya/6),lo=function(){return l.geoProjection(Ra).scale(176.84)};function Rs(D,G){return[D*X(1-3*G*G/(m*m)),G]}Rs.invert=function(D,G){return[D/X(1-3*G*G/(m*m)),G]};var Ds=function(){return l.geoProjection(Rs).scale(152.63)};function Ku(D,G){var $=.90631*g(G),st=X(1-$*$),Ct=X(2/(1+st*n(D/=3)));return[2.66723*st*Ct*g(D),1.24104*$*Ct]}Ku.invert=function(D,G){var $=D/2.66723,st=G/1.24104,Ct=X($*$+st*st),wt=2*k(Ct/2);return[3*h(D*_(wt),2.66723*Ct),Ct&&k(G*g(wt)/(1.24104*.90631*Ct))]};var hu=function(){return l.geoProjection(Ku).scale(172.632)};function j(D,G){var $=n(G),st=n(D)*$,Ct=1-st,wt=n(D=h(g(D)*$,-g(G))),Ut=g(D);return $=X(1-st*st),[Ut*$-wt*Ct,-wt*$-Ut*Ct]}j.invert=function(D,G){var $=(D*D+G*G)/-2,st=X(-$*(2+$)),Ct=G*$+D*st,wt=D*$-G*st,Ut=X(wt*wt+Ct*Ct);return[h(st*Ct,Ut*(1+$)),Ut?-k(st*wt/Ut):0]};var I=function(){return l.geoProjection(j).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function w(D,G){var $=Mt(D,G);return[($[0]+D/S)/2,($[1]+G)/2]}w.invert=function(D,G){var $=D,st=G,Ct=25;do{var wt=n(st),Ut=g(st),Yt=g(2*st),qt=Ut*Ut,he=wt*wt,ye=g($),je=n($/2),Ie=g($/2),Ve=Ie*Ie,qe=1-he*je*je,sn=qe?Z(wt*je)*X(tr=1/qe):tr=0,tr,kn=.5*(2*sn*wt*Ie+$/S)-D,pr=.5*(sn*Ut+st)-G,Mr=.5*tr*(he*Ve+sn*wt*je*qt)+.5/S,$r=tr*(ye*Yt/4-sn*Ut*Ie),Yr=.125*tr*(Yt*Ie-sn*Ut*he*ye),Ti=.5*tr*(qt*je+sn*Ve*wt)+.5,Li=$r*Yr-Ti*Mr,Ki=(pr*$r-kn*Ti)/Li,Xi=(kn*Yr-pr*Mr)/Li;$-=Ki,st-=Xi}while((c(Ki)>M||c(Xi)>M)&&--Ct>0);return[$,st]};var B=function(){return l.geoProjection(w).scale(158.837)};t.geoAiry=Rt,t.geoAiryRaw=Nt,t.geoAitoff=bt,t.geoAitoffRaw=Mt,t.geoArmadillo=rt,t.geoArmadilloRaw=At,t.geoAugust=z,t.geoAugustRaw=Pt,t.geoBaker=ot,t.geoBakerRaw=et,t.geoBerghaus=H,t.geoBerghausRaw=xt,t.geoBoggs=ee,t.geoBoggsRaw=Qt,t.geoBonne=le,t.geoBonneRaw=me,t.geoBottomley=ze,t.geoBottomleyRaw=be,t.geoBromley=Sn,t.geoBromleyRaw=Xe,t.geoChamberlin=fr,t.geoChamberlinRaw=en,t.geoChamberlinAfrica=Nn,t.geoCollignon=Ce,t.geoCollignonRaw=hi,t.geoCraig=Jt,t.geoCraigRaw=Te,t.geoCraster=ie,t.geoCrasterRaw=Wt,t.geoCylindricalEqualArea=ue,t.geoCylindricalEqualAreaRaw=Ae,t.geoCylindricalStereographic=$e,t.geoCylindricalStereographicRaw=xe,t.geoEckert1=or,t.geoEckert1Raw=Fn,t.geoEckert2=Pn,t.geoEckert2Raw=En,t.geoEckert3=Pr,t.geoEckert3Raw=br,t.geoEckert4=Cr,t.geoEckert4Raw=ln,t.geoEckert5=Be,t.geoEckert5Raw=Ar,t.geoEckert6=Ye,t.geoEckert6Raw=We,t.geoEisenlohr=Bn,t.geoEisenlohrRaw=gn,t.geoFahey=ir,t.geoFaheyRaw=Ln,t.geoFoucaut=_n,t.geoFoucautRaw=Yn,t.geoGilbert=zr,t.geoGingery=eo,t.geoGingeryRaw=Ai,t.geoGinzburg4=so,t.geoGinzburg4Raw=Ea,t.geoGinzburg5=no,t.geoGinzburg5Raw=Ko,t.geoGinzburg6=cs,t.geoGinzburg6Raw=So,t.geoGinzburg8=zo,t.geoGinzburg8Raw=wa,t.geoGinzburg9=fu,t.geoGinzburg9Raw=Ro,t.geoGringorten=oe,t.geoGringortenRaw=au,t.geoGuyou=Si,t.geoGuyouRaw=qn,t.geoHammer=oa,t.geoHammerRaw=Ci,t.geoHammerRetroazimuthal=mo,t.geoHammerRetroazimuthalRaw=Xa,t.geoHealpix=_o,t.geoHealpixRaw=yo,t.geoHill=Do,t.geoHillRaw=ts,t.geoHomolosine=Ca,t.geoHomolosineRaw=as,t.geoInterrupt=Ui,t.geoInterruptedBoggs=xo,t.geoInterruptedHomolosine=qi,t.geoInterruptedMollweide=bs,t.geoInterruptedMollweideHemispheres=Ga,t.geoInterruptedSinuMollweide=Uo,t.geoInterruptedSinusoidal=Qs,t.geoKavrayskiy7=hs,t.geoKavrayskiy7Raw=fs,t.geoLagrange=ds,t.geoLagrangeRaw=os,t.geoLarrivee=Uu,t.geoLarriveeRaw=Ou,t.geoLaskowski=Fs,t.geoLaskowskiRaw=uo,t.geoLittrow=ul,t.geoLittrowRaw=ku,t.geoLoximuthal=Qu,t.geoLoximuthalRaw=ll,t.geoMiller=La,t.geoMillerRaw=To,t.geoModifiedStereographic=Wa,t.geoModifiedStereographicRaw=ya,t.geoModifiedStereographicAlaska=ou,t.geoModifiedStereographicGs48=qs,t.geoModifiedStereographicGs50=Ls,t.geoModifiedStereographicMiller=qu,t.geoModifiedStereographicLee=su,t.geoMollweide=_t,t.geoMollweideRaw=q,t.geoMtFlatPolarParabolic=ql,t.geoMtFlatPolarParabolicRaw=_l,t.geoMtFlatPolarQuartic=Ha,t.geoMtFlatPolarQuarticRaw=Gu,t.geoMtFlatPolarSinusoidal=Ml,t.geoMtFlatPolarSinusoidalRaw=uu,t.geoNaturalEarth=wu,t.geoNaturalEarthRaw=vs,t.geoNaturalEarth2=Vu,t.geoNaturalEarth2Raw=gu,t.geoNellHammer=Jo,t.geoNellHammerRaw=Ws,t.geoPatterson=Us,t.geoPattersonRaw=Hu,t.geoPolyconic=hc,t.geoPolyconicRaw=Dl,t.geoPolyhedral=Nl,t.geoPolyhedralButterfly=ks,t.geoPolyhedralCollignon=Yu,t.geoPolyhedralWaterman=dc,t.geoProject=Qo,t.geoGringortenQuincuncial=Bu,t.geoPeirceQuincuncial=nu,t.geoPierceQuincuncial=nu,t.geoQuantize=we,t.geoQuincuncial=ju,t.geoRectangularPolyconic=dn,t.geoRectangularPolyconicRaw=Pe,t.geoRobinson=dr,t.geoRobinsonRaw=wn,t.geoSatellite=ti,t.geoSatelliteRaw=Xr,t.geoSinuMollweide=Ms,t.geoSinuMollweideRaw=$a,t.geoSinusoidal=Me,t.geoSinusoidalRaw=$t,t.geoStitch=Vn,t.geoTimes=Wn,t.geoTimesRaw=Zn,t.geoTwoPointAzimuthal=mi,t.geoTwoPointAzimuthalRaw=xr,t.geoTwoPointAzimuthalUsa=Hr,t.geoTwoPointEquidistant=_i,t.geoTwoPointEquidistantRaw=Br,t.geoTwoPointEquidistantUsa=ui,t.geoVanDerGrinten=Ri,t.geoVanDerGrintenRaw=Zi,t.geoVanDerGrinten2=ga,t.geoVanDerGrinten2Raw=Ma,t.geoVanDerGrinten3=ii,t.geoVanDerGrinten3Raw=la,t.geoVanDerGrinten4=Va,t.geoVanDerGrinten4Raw=Pa,t.geoWagner4=lo,t.geoWagner4Raw=Ra,t.geoWagner6=Ds,t.geoWagner6Raw=Rs,t.geoWagner7=hu,t.geoWagner7Raw=Ku,t.geoWiechel=I,t.geoWiechelRaw=j,t.geoWinkel3=B,t.geoWinkel3Raw=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";function s(){return new c}function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(zt){h(r,zt,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(Dt,zt,se){var re=Dt.s=zt+se,fe=re-zt,Fe=re-fe;Dt.t=zt-Fe+(se-fe)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,u=a/4,f=a*2,v=180/a,b=a/180,y=Math.abs,g=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(Dt){return Dt>0?1:Dt<0?-1:0},L=Math.sqrt,W=Math.tan;function F(Dt){return Dt>1?0:Dt<-1?a:Math.acos(Dt)}function K(Dt){return Dt>1?o:Dt<-1?-o:Math.asin(Dt)}function V(Dt){return(Dt=A(Dt/2))*Dt}function k(){}function Z(Dt,zt){Dt&&it.hasOwnProperty(Dt.type)&&it[Dt.type](Dt,zt)}var X={Feature:function(zt,se){Z(zt.geometry,se)},FeatureCollection:function(zt,se){for(var re=zt.features,fe=-1,Fe=re.length;++fe<Fe;)Z(re[fe].geometry,se)}},it={Sphere:function(zt,se){se.sphere()},Point:function(zt,se){zt=zt.coordinates,se.point(zt[0],zt[1],zt[2])},MultiPoint:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)zt=re[fe],se.point(zt[0],zt[1],zt[2])},LineString:function(zt,se){ft(zt.coordinates,se,0)},MultiLineString:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)ft(re[fe],se,0)},Polygon:function(zt,se){pt(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)pt(re[fe],se)},GeometryCollection:function(zt,se){for(var re=zt.geometries,fe=-1,Fe=re.length;++fe<Fe;)Z(re[fe],se)}};function ft(Dt,zt,se){var re=-1,fe=Dt.length-se,Fe;for(zt.lineStart();++re<fe;)Fe=Dt[re],zt.point(Fe[0],Fe[1],Fe[2]);zt.lineEnd()}function pt(Dt,zt){var se=-1,re=Dt.length;for(zt.polygonStart();++se<re;)ft(Dt[se],zt,1);zt.polygonEnd()}function ut(Dt,zt){Dt&&X.hasOwnProperty(Dt.type)?X[Dt.type](Dt,zt):Z(Dt,zt)}var It=s(),Nt=s(),Rt,Mt,bt,At,rt,Pt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){It.reset(),Pt.lineStart=z,Pt.lineEnd=Q},polygonEnd:function(){var zt=+It;Nt.add(zt<0?f+zt:zt),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){Pt.point=gt}function Q(){et(Rt,Mt)}function gt(Dt,zt){Pt.point=et,Rt=Dt,Mt=zt,Dt*=b,zt*=b,bt=Dt,At=M(zt=zt/2+u),rt=A(zt)}function et(Dt,zt){Dt*=b,zt*=b,zt=zt/2+u;var se=Dt-bt,re=se>=0?1:-1,fe=re*se,Fe=M(zt),Ke=A(zt),rn=rt*Ke,Je=At*Fe+rn*M(fe),pn=rn*re*A(fe);It.add(_(pn,Je)),bt=Dt,At=Fe,rt=Ke}function ot(Dt){return Nt.reset(),ut(Dt,Pt),Nt*2}function xt(Dt){return[_(Dt[1],Dt[0]),K(Dt[2])]}function H(Dt){var zt=Dt[0],se=Dt[1],re=M(se);return[re*M(zt),re*A(zt),A(se)]}function nt(Dt,zt){return Dt[0]*zt[0]+Dt[1]*zt[1]+Dt[2]*zt[2]}function at(Dt,zt){return[Dt[1]*zt[2]-Dt[2]*zt[1],Dt[2]*zt[0]-Dt[0]*zt[2],Dt[0]*zt[1]-Dt[1]*zt[0]]}function q(Dt,zt){Dt[0]+=zt[0],Dt[1]+=zt[1],Dt[2]+=zt[2]}function _t(Dt,zt){return[Dt[0]*zt,Dt[1]*zt,Dt[2]*zt]}function yt(Dt){var zt=L(Dt[0]*Dt[0]+Dt[1]*Dt[1]+Dt[2]*Dt[2]);Dt[0]/=zt,Dt[1]/=zt,Dt[2]/=zt}var Ft,Qt,ee,Vt,$t,Me,me,le,be=s(),ze,Xe,Sn={point:Xn,lineStart:nn,lineEnd:en,polygonStart:function(){Sn.point=An,Sn.lineStart=Nn,Sn.lineEnd=fr,be.reset(),Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd(),Sn.point=Xn,Sn.lineStart=nn,Sn.lineEnd=en,It<0?(Ft=-(ee=180),Qt=-(Vt=90)):be>n?Vt=90:be<-n&&(Qt=-90),Xe[0]=Ft,Xe[1]=ee},sphere:function(){Ft=-(ee=180),Qt=-(Vt=90)}};function Xn(Dt,zt){ze.push(Xe=[Ft=Dt,ee=Dt]),zt<Qt&&(Qt=zt),zt>Vt&&(Vt=zt)}function Hn(Dt,zt){var se=H([Dt*b,zt*b]);if(le){var re=at(le,se),fe=[re[1],-re[0],0],Fe=at(fe,re);yt(Fe),Fe=xt(Fe);var Ke=Dt-$t,rn=Ke>0?1:-1,Je=Fe[0]*v*rn,pn,hn=y(Ke)>180;hn^(rn*$t<Je&&Je<rn*Dt)?(pn=Fe[1]*v,pn>Vt&&(Vt=pn)):(Je=(Je+360)%360-180,hn^(rn*$t<Je&&Je<rn*Dt)?(pn=-Fe[1]*v,pn<Qt&&(Qt=pn)):(zt<Qt&&(Qt=zt),zt>Vt&&(Vt=zt))),hn?Dt<$t?hi(Ft,Dt)>hi(Ft,ee)&&(ee=Dt):hi(Dt,ee)>hi(Ft,ee)&&(Ft=Dt):ee>=Ft?(Dt<Ft&&(Ft=Dt),Dt>ee&&(ee=Dt)):Dt>$t?hi(Ft,Dt)>hi(Ft,ee)&&(ee=Dt):hi(Dt,ee)>hi(Ft,ee)&&(Ft=Dt)}else ze.push(Xe=[Ft=Dt,ee=Dt]);zt<Qt&&(Qt=zt),zt>Vt&&(Vt=zt),le=se,$t=Dt}function nn(){Sn.point=Hn}function en(){Xe[0]=Ft,Xe[1]=ee,Sn.point=Xn,le=null}function An(Dt,zt){if(le){var se=Dt-$t;be.add(y(se)>180?se+(se>0?360:-360):se)}else Me=Dt,me=zt;Pt.point(Dt,zt),Hn(Dt,zt)}function Nn(){Pt.lineStart()}function fr(){An(Me,me),Pt.lineEnd(),y(be)>n&&(Ft=-(ee=180)),Xe[0]=Ft,Xe[1]=ee,le=null}function hi(Dt,zt){return(zt-=Dt)<0?zt+360:zt}function Ce(Dt,zt){return Dt[0]-zt[0]}function Te(Dt,zt){return Dt[0]<=Dt[1]?Dt[0]<=zt&&zt<=Dt[1]:zt<Dt[0]||Dt[1]<zt}function Jt(Dt){var zt,se,re,fe,Fe,Ke,rn;if(Vt=ee=-(Ft=Qt=Infinity),ze=[],ut(Dt,Sn),se=ze.length){for(ze.sort(Ce),zt=1,re=ze[0],Fe=[re];zt<se;++zt)fe=ze[zt],Te(re,fe[0])||Te(re,fe[1])?(hi(re[0],fe[1])>hi(re[0],re[1])&&(re[1]=fe[1]),hi(fe[0],re[1])>hi(re[0],re[1])&&(re[0]=fe[0])):Fe.push(re=fe);for(Ke=-Infinity,se=Fe.length-1,zt=0,re=Fe[se];zt<=se;re=fe,++zt)fe=Fe[zt],(rn=hi(re[1],fe[0]))>Ke&&(Ke=rn,Ft=fe[0],ee=re[1])}return ze=Xe=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ee,Vt]]}var pe,Wt,ie,Ae,ue,xe,$e,Fn,or,En,Pn,br,Pr,ln,Cr,Ar,Be={sphere:k,point:We,lineStart:fn,lineEnd:bn,polygonStart:function(){Be.lineStart=Ln,Be.lineEnd=ir},polygonEnd:function(){Be.lineStart=fn,Be.lineEnd=bn}};function We(Dt,zt){Dt*=b,zt*=b;var se=M(zt);Ye(se*M(Dt),se*A(Dt),A(zt))}function Ye(Dt,zt,se){++pe,ie+=(Dt-ie)/pe,Ae+=(zt-Ae)/pe,ue+=(se-ue)/pe}function fn(){Be.point=gn}function gn(Dt,zt){Dt*=b,zt*=b;var se=M(zt);ln=se*M(Dt),Cr=se*A(Dt),Ar=A(zt),Be.point=Bn,Ye(ln,Cr,Ar)}function Bn(Dt,zt){Dt*=b,zt*=b;var se=M(zt),re=se*M(Dt),fe=se*A(Dt),Fe=A(zt),Ke=_(L((Ke=Cr*Fe-Ar*fe)*Ke+(Ke=Ar*re-ln*Fe)*Ke+(Ke=ln*fe-Cr*re)*Ke),ln*re+Cr*fe+Ar*Fe);Wt+=Ke,xe+=Ke*(ln+(ln=re)),$e+=Ke*(Cr+(Cr=fe)),Fn+=Ke*(Ar+(Ar=Fe)),Ye(ln,Cr,Ar)}function bn(){Be.point=We}function Ln(){Be.point=Yn}function ir(){_n(br,Pr),Be.point=We}function Yn(Dt,zt){br=Dt,Pr=zt,Dt*=b,zt*=b,Be.point=_n;var se=M(zt);ln=se*M(Dt),Cr=se*A(Dt),Ar=A(zt),Ye(ln,Cr,Ar)}function _n(Dt,zt){Dt*=b,zt*=b;var se=M(zt),re=se*M(Dt),fe=se*A(Dt),Fe=A(zt),Ke=Cr*Fe-Ar*fe,rn=Ar*re-ln*Fe,Je=ln*fe-Cr*re,pn=L(Ke*Ke+rn*rn+Je*Je),hn=K(pn),Jn=pn&&-hn/pn;or+=Jn*Ke,En+=Jn*rn,Pn+=Jn*Je,Wt+=hn,xe+=hn*(ln+(ln=re)),$e+=hn*(Cr+(Cr=fe)),Fn+=hn*(Ar+(Ar=Fe)),Ye(ln,Cr,Ar)}function Dr(Dt){pe=Wt=ie=Ae=ue=xe=$e=Fn=or=En=Pn=0,ut(Dt,Be);var zt=or,se=En,re=Pn,fe=zt*zt+se*se+re*re;return fe<i&&(zt=xe,se=$e,re=Fn,Wt<n&&(zt=ie,se=Ae,re=ue),fe=zt*zt+se*se+re*re,fe<i)?[NaN,NaN]:[_(se,zt)*v,K(re/L(fe))*v]}function vr(Dt){return function(){return Dt}}function zr(Dt,zt){function se(re,fe){return re=Dt(re,fe),zt(re[0],re[1])}return Dt.invert&&zt.invert&&(se.invert=function(re,fe){return re=zt.invert(re,fe),re&&Dt.invert(re[0],re[1])}),se}function Ai(Dt,zt){return[y(Dt)>a?Dt+Math.round(-Dt/f)*f:Dt,zt]}Ai.invert=Ai;function Aa(Dt,zt,se){return(Dt%=f)?zt||se?zr(eo(Dt),Zo(zt,se)):eo(Dt):zt||se?Zo(zt,se):Ai}function ka(Dt){return function(zt,se){return zt+=Dt,[zt>a?zt-f:zt<-a?zt+f:zt,se]}}function eo(Dt){var zt=ka(Dt);return zt.invert=ka(-Dt),zt}function Zo(Dt,zt){var se=M(Dt),re=A(Dt),fe=M(zt),Fe=A(zt);function Ke(rn,Je){var pn=M(Je),hn=M(rn)*pn,Jn=A(rn)*pn,Vn=A(Je),Zn=Vn*se+hn*re;return[_(Jn*fe-Zn*Fe,hn*se-Vn*re),K(Zn*fe+Jn*Fe)]}return Ke.invert=function(rn,Je){var pn=M(Je),hn=M(rn)*pn,Jn=A(rn)*pn,Vn=A(Je),Zn=Vn*fe-Jn*Fe;return[_(Jn*fe+Vn*Fe,hn*se+Zn*re),K(Zn*se-hn*re)]},Ke}function Ea(Dt){Dt=Aa(Dt[0]*b,Dt[1]*b,Dt.length>2?Dt[2]*b:0);function zt(se){return se=Dt(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se}return zt.invert=function(se){return se=Dt.invert(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se},zt}function so(Dt,zt,se,re,fe,Fe){if(!!se){var Ke=M(zt),rn=A(zt),Je=re*se;fe==null?(fe=zt+re*f,Fe=zt-Je/2):(fe=Ko(Ke,fe),Fe=Ko(Ke,Fe),(re>0?fe<Fe:fe>Fe)&&(fe+=re*f));for(var pn,hn=fe;re>0?hn>Fe:hn<Fe;hn-=Je)pn=xt([Ke,-rn*M(hn),-rn*A(hn)]),Dt.point(pn[0],pn[1])}}function Ko(Dt,zt){zt=H(zt),zt[0]-=Dt,yt(zt);var se=F(-zt[1]);return((-zt[2]<0?-se:se)+f-n)%f}function no(){var Dt=vr([0,0]),zt=vr(90),se=vr(6),re,fe,Fe={point:Ke};function Ke(Je,pn){re.push(Je=fe(Je,pn)),Je[0]*=v,Je[1]*=v}function rn(){var Je=Dt.apply(this,arguments),pn=zt.apply(this,arguments)*b,hn=se.apply(this,arguments)*b;return re=[],fe=Aa(-Je[0]*b,-Je[1]*b,0).invert,so(Fe,pn,hn,1),Je={type:"Polygon",coordinates:[re]},re=fe=null,Je}return rn.center=function(Je){return arguments.length?(Dt=typeof Je=="function"?Je:vr([+Je[0],+Je[1]]),rn):Dt},rn.radius=function(Je){return arguments.length?(zt=typeof Je=="function"?Je:vr(+Je),rn):zt},rn.precision=function(Je){return arguments.length?(se=typeof Je=="function"?Je:vr(+Je),rn):se},rn}function So(){var Dt=[],zt;return{point:function(re,fe,Fe){zt.push([re,fe,Fe])},lineStart:function(){Dt.push(zt=[])},lineEnd:k,rejoin:function(){Dt.length>1&&Dt.push(Dt.pop().concat(Dt.shift()))},result:function(){var re=Dt;return Dt=[],zt=null,re}}}function cs(Dt,zt){return y(Dt[0]-zt[0])<n&&y(Dt[1]-zt[1])<n}function wa(Dt,zt,se,re){this.x=Dt,this.z=zt,this.o=se,this.e=re,this.v=!1,this.n=this.p=null}function zo(Dt,zt,se,re,fe){var Fe=[],Ke=[],rn,Je;if(Dt.forEach(function(Wn){if(!((cr=Wn.length-1)<=0)){var cr,xr=Wn[0],Hr=Wn[cr],mi;if(cs(xr,Hr)){if(!xr[2]&&!Hr[2]){for(fe.lineStart(),rn=0;rn<cr;++rn)fe.point((xr=Wn[rn])[0],xr[1]);fe.lineEnd();return}Hr[0]+=2*n}Fe.push(mi=new wa(xr,Wn,null,!0)),Ke.push(mi.o=new wa(xr,null,mi,!1)),Fe.push(mi=new wa(Hr,Wn,null,!1)),Ke.push(mi.o=new wa(Hr,null,mi,!0))}}),!!Fe.length){for(Ke.sort(zt),Ro(Fe),Ro(Ke),rn=0,Je=Ke.length;rn<Je;++rn)Ke[rn].e=se=!se;for(var pn=Fe[0],hn,Jn;;){for(var Vn=pn,Zn=!0;Vn.v;)if((Vn=Vn.n)===pn)return;hn=Vn.z,fe.lineStart();do{if(Vn.v=Vn.o.v=!0,Vn.e){if(Zn)for(rn=0,Je=hn.length;rn<Je;++rn)fe.point((Jn=hn[rn])[0],Jn[1]);else re(Vn.x,Vn.n.x,1,fe);Vn=Vn.n}else{if(Zn)for(hn=Vn.p.z,rn=hn.length-1;rn>=0;--rn)fe.point((Jn=hn[rn])[0],Jn[1]);else re(Vn.x,Vn.p.x,-1,fe);Vn=Vn.p}Vn=Vn.o,hn=Vn.z,Zn=!Zn}while(!Vn.v);fe.lineEnd()}}}function Ro(Dt){if(!!(zt=Dt.length)){for(var zt,se=0,re=Dt[0],fe;++se<zt;)re.n=fe=Dt[se],fe.p=re,re=fe;re.n=fe=Dt[0],fe.p=re}}var fu=s();function Xo(Dt){return y(Dt[0])<=a?Dt[0]:O(Dt[0])*((y(Dt[0])+a)%f-a)}function au(Dt,zt){var se=Xo(zt),re=zt[1],fe=A(re),Fe=[A(se),-M(se),0],Ke=0,rn=0;fu.reset(),fe===1?re=o+n:fe===-1&&(re=-o-n);for(var Je=0,pn=Dt.length;Je<pn;++Je)if(!!(Jn=(hn=Dt[Je]).length))for(var hn,Jn,Vn=hn[Jn-1],Zn=Xo(Vn),Wn=Vn[1]/2+u,cr=A(Wn),xr=M(Wn),Hr=0;Hr<Jn;++Hr,Zn=Br,cr=_i,xr=Zi,Vn=mi){var mi=hn[Hr],Br=Xo(mi),ui=mi[1]/2+u,_i=A(ui),Zi=M(ui),Ri=Br-Zn,Ma=Ri>=0?1:-1,ga=Ma*Ri,la=ga>a,ii=cr*_i;if(fu.add(_(ii*Ma*A(ga),xr*Zi+ii*M(ga))),Ke+=la?Ri+Ma*f:Ri,la^Zn>=se^Br>=se){var Pa=at(H(Vn),H(mi));yt(Pa);var Va=at(Fe,Pa);yt(Va);var Ya=(la^Ri>=0?-1:1)*K(Va[2]);(re>Ya||re===Ya&&(Pa[0]||Pa[1]))&&(rn+=la^Ri>=0?1:-1)}}return(Ke<-n||Ke<n&&fu<-n)^rn&1}function $s(Dt,zt,se,re){return function(fe){var Fe=zt(fe),Ke=So(),rn=zt(Ke),Je=!1,pn,hn,Jn,Vn={point:Zn,lineStart:cr,lineEnd:xr,polygonStart:function(){Vn.point=Hr,Vn.lineStart=mi,Vn.lineEnd=Br,hn=[],pn=[]},polygonEnd:function(){Vn.point=Zn,Vn.lineStart=cr,Vn.lineEnd=xr,hn=l.merge(hn);var _i=au(pn,re);hn.length?(Je||(fe.polygonStart(),Je=!0),zo(hn,oe,_i,se,fe)):_i&&(Je||(fe.polygonStart(),Je=!0),fe.lineStart(),se(null,null,1,fe),fe.lineEnd()),Je&&(fe.polygonEnd(),Je=!1),hn=pn=null},sphere:function(){fe.polygonStart(),fe.lineStart(),se(null,null,1,fe),fe.lineEnd(),fe.polygonEnd()}};function Zn(ui,_i){Dt(ui,_i)&&fe.point(ui,_i)}function Wn(ui,_i){Fe.point(ui,_i)}function cr(){Vn.point=Wn,Fe.lineStart()}function xr(){Vn.point=Zn,Fe.lineEnd()}function Hr(ui,_i){Jn.push([ui,_i]),rn.point(ui,_i)}function mi(){rn.lineStart(),Jn=[]}function Br(){Hr(Jn[0][0],Jn[0][1]),rn.lineEnd();var ui=rn.clean(),_i=Ke.result(),Zi,Ri=_i.length,Ma,ga,la;if(Jn.pop(),pn.push(Jn),Jn=null,!!Ri){if(ui&1){if(ga=_i[0],(Ma=ga.length-1)>0){for(Je||(fe.polygonStart(),Je=!0),fe.lineStart(),Zi=0;Zi<Ma;++Zi)fe.point((la=ga[Zi])[0],la[1]);fe.lineEnd()}return}Ri>1&&ui&2&&_i.push(_i.pop().concat(_i.shift())),hn.push(_i.filter(Ne))}}return Vn}}function Ne(Dt){return Dt.length>1}function oe(Dt,zt){return((Dt=Dt.x)[0]<0?Dt[1]-o-n:o-Dt[1])-((zt=zt.x)[0]<0?zt[1]-o-n:o-zt[1])}var Ht=$s(function(){return!0},Ee,zn,[-a,-o]);function Ee(Dt){var zt=NaN,se=NaN,re=NaN,fe;return{lineStart:function(){Dt.lineStart(),fe=1},point:function(Ke,rn){var Je=Ke>0?a:-a,pn=y(Ke-zt);y(pn-a)<n?(Dt.point(zt,se=(se+rn)/2>0?o:-o),Dt.point(re,se),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,se),Dt.point(Ke,se),fe=0):re!==Je&&pn>=a&&(y(zt-re)<n&&(zt-=re*n),y(Ke-Je)<n&&(Ke-=Je*n),se=an(zt,se,Ke,rn),Dt.point(re,se),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,se),fe=0),Dt.point(zt=Ke,se=rn),re=Je},lineEnd:function(){Dt.lineEnd(),zt=se=NaN},clean:function(){return 2-fe}}}function an(Dt,zt,se,re){var fe,Fe,Ke=A(Dt-se);return y(Ke)>n?g((A(zt)*(Fe=M(re))*A(se)-A(re)*(fe=M(zt))*A(Dt))/(fe*Fe*Ke)):(zt+re)/2}function zn(Dt,zt,se,re){var fe;if(Dt==null)fe=se*o,re.point(-a,fe),re.point(0,fe),re.point(a,fe),re.point(a,0),re.point(a,-fe),re.point(0,-fe),re.point(-a,-fe),re.point(-a,0),re.point(-a,fe);else if(y(Dt[0]-zt[0])>n){var Fe=Dt[0]<zt[0]?a:-a;fe=se*Fe/2,re.point(-Fe,fe),re.point(0,fe),re.point(Fe,fe)}else re.point(zt[0],zt[1])}function qn(Dt){var zt=M(Dt),se=6*b,re=zt>0,fe=y(zt)>n;function Fe(hn,Jn,Vn,Zn){so(Zn,Dt,se,Vn,hn,Jn)}function Ke(hn,Jn){return M(hn)*M(Jn)>zt}function rn(hn){var Jn,Vn,Zn,Wn,cr;return{lineStart:function(){Wn=Zn=!1,cr=1},point:function(Hr,mi){var Br=[Hr,mi],ui,_i=Ke(Hr,mi),Zi=re?_i?0:pn(Hr,mi):_i?pn(Hr+(Hr<0?a:-a),mi):0;if(!Jn&&(Wn=Zn=_i)&&hn.lineStart(),_i!==Zn&&(ui=Je(Jn,Br),(!ui||cs(Jn,ui)||cs(Br,ui))&&(Br[2]=1)),_i!==Zn)cr=0,_i?(hn.lineStart(),ui=Je(Br,Jn),hn.point(ui[0],ui[1])):(ui=Je(Jn,Br),hn.point(ui[0],ui[1],2),hn.lineEnd()),Jn=ui;else if(fe&&Jn&&re^_i){var Ri;!(Zi&Vn)&&(Ri=Je(Br,Jn,!0))&&(cr=0,re?(hn.lineStart(),hn.point(Ri[0][0],Ri[0][1]),hn.point(Ri[1][0],Ri[1][1]),hn.lineEnd()):(hn.point(Ri[1][0],Ri[1][1]),hn.lineEnd(),hn.lineStart(),hn.point(Ri[0][0],Ri[0][1],3)))}_i&&(!Jn||!cs(Jn,Br))&&hn.point(Br[0],Br[1]),Jn=Br,Zn=_i,Vn=Zi},lineEnd:function(){Zn&&hn.lineEnd(),Jn=null},clean:function(){return cr|(Wn&&Zn)<<1}}}function Je(hn,Jn,Vn){var Zn=H(hn),Wn=H(Jn),cr=[1,0,0],xr=at(Zn,Wn),Hr=nt(xr,xr),mi=xr[0],Br=Hr-mi*mi;if(!Br)return!Vn&&hn;var ui=zt*Hr/Br,_i=-zt*mi/Br,Zi=at(cr,xr),Ri=_t(cr,ui),Ma=_t(xr,_i);q(Ri,Ma);var ga=Zi,la=nt(Ri,ga),ii=nt(ga,ga),Pa=la*la-ii*(nt(Ri,Ri)-1);if(!(Pa<0)){var Va=L(Pa),Ya=_t(ga,(-la-Va)/ii);if(q(Ya,Ri),Ya=xt(Ya),!Vn)return Ya;var Ii=hn[0],Ra=Jn[0],lo=hn[1],Rs=Jn[1],Ds;Ra<Ii&&(Ds=Ii,Ii=Ra,Ra=Ds);var Ku=Ra-Ii,hu=y(Ku-a)<n,j=hu||Ku<n;if(!hu&&Rs<lo&&(Ds=lo,lo=Rs,Rs=Ds),j?hu?lo+Rs>0^Ya[1]<(y(Ya[0]-Ii)<n?lo:Rs):lo<=Ya[1]&&Ya[1]<=Rs:Ku>a^(Ii<=Ya[0]&&Ya[0]<=Ra)){var I=_t(ga,(-la+Va)/ii);return q(I,Ri),[Ya,xt(I)]}}}function pn(hn,Jn){var Vn=re?Dt:a-Dt,Zn=0;return hn<-Vn?Zn|=1:hn>Vn&&(Zn|=2),Jn<-Vn?Zn|=4:Jn>Vn&&(Zn|=8),Zn}return $s(Ke,rn,Fe,re?[0,-Dt]:[-a,Dt-a])}function Un(Dt,zt,se,re,fe,Fe){var Ke=Dt[0],rn=Dt[1],Je=zt[0],pn=zt[1],hn=0,Jn=1,Vn=Je-Ke,Zn=pn-rn,Wn;if(Wn=se-Ke,!(!Vn&&Wn>0)){if(Wn/=Vn,Vn<0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}else if(Vn>0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}if(Wn=fe-Ke,!(!Vn&&Wn<0)){if(Wn/=Vn,Vn<0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}else if(Vn>0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}if(Wn=re-rn,!(!Zn&&Wn>0)){if(Wn/=Zn,Zn<0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}else if(Zn>0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}if(Wn=Fe-rn,!(!Zn&&Wn<0)){if(Wn/=Zn,Zn<0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}else if(Zn>0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}return hn>0&&(Dt[0]=Ke+hn*Vn,Dt[1]=rn+hn*Zn),Jn<1&&(zt[0]=Ke+Jn*Vn,zt[1]=rn+Jn*Zn),!0}}}}}var Jr=1e9,Si=-Jr;function Ci(Dt,zt,se,re){function fe(pn,hn){return Dt<=pn&&pn<=se&&zt<=hn&&hn<=re}function Fe(pn,hn,Jn,Vn){var Zn=0,Wn=0;if(pn==null||(Zn=Ke(pn,Jn))!==(Wn=Ke(hn,Jn))||Je(pn,hn)<0^Jn>0)do Vn.point(Zn===0||Zn===3?Dt:se,Zn>1?re:zt);while((Zn=(Zn+Jn+4)%4)!==Wn);else Vn.point(hn[0],hn[1])}function Ke(pn,hn){return y(pn[0]-Dt)<n?hn>0?0:3:y(pn[0]-se)<n?hn>0?2:1:y(pn[1]-zt)<n?hn>0?1:0:hn>0?3:2}function rn(pn,hn){return Je(pn.x,hn.x)}function Je(pn,hn){var Jn=Ke(pn,1),Vn=Ke(hn,1);return Jn!==Vn?Jn-Vn:Jn===0?hn[1]-pn[1]:Jn===1?pn[0]-hn[0]:Jn===2?pn[1]-hn[1]:hn[0]-pn[0]}return function(pn){var hn=pn,Jn=So(),Vn,Zn,Wn,cr,xr,Hr,mi,Br,ui,_i,Zi,Ri={point:Ma,lineStart:Pa,lineEnd:Va,polygonStart:la,polygonEnd:ii};function Ma(Ii,Ra){fe(Ii,Ra)&&hn.point(Ii,Ra)}function ga(){for(var Ii=0,Ra=0,lo=Zn.length;Ra<lo;++Ra)for(var Rs=Zn[Ra],Ds=1,Ku=Rs.length,hu=Rs[0],j,I,w=hu[0],B=hu[1];Ds<Ku;++Ds)j=w,I=B,hu=Rs[Ds],w=hu[0],B=hu[1],I<=re?B>re&&(w-j)*(re-I)>(B-I)*(Dt-j)&&++Ii:B<=re&&(w-j)*(re-I)<(B-I)*(Dt-j)&&--Ii;return Ii}function la(){hn=Jn,Vn=[],Zn=[],Zi=!0}function ii(){var Ii=ga(),Ra=Zi&&Ii,lo=(Vn=l.merge(Vn)).length;(Ra||lo)&&(pn.polygonStart(),Ra&&(pn.lineStart(),Fe(null,null,1,pn),pn.lineEnd()),lo&&zo(Vn,rn,Ii,Fe,pn),pn.polygonEnd()),hn=pn,Vn=Zn=Wn=null}function Pa(){Ri.point=Ya,Zn&&Zn.push(Wn=[]),_i=!0,ui=!1,mi=Br=NaN}function Va(){Vn&&(Ya(cr,xr),Hr&&ui&&Jn.rejoin(),Vn.push(Jn.result())),Ri.point=Ma,ui&&hn.lineEnd()}function Ya(Ii,Ra){var lo=fe(Ii,Ra);if(Zn&&Wn.push([Ii,Ra]),_i)cr=Ii,xr=Ra,Hr=lo,_i=!1,lo&&(hn.lineStart(),hn.point(Ii,Ra));else if(lo&&ui)hn.point(Ii,Ra);else{var Rs=[mi=Math.max(Si,Math.min(Jr,mi)),Br=Math.max(Si,Math.min(Jr,Br))],Ds=[Ii=Math.max(Si,Math.min(Jr,Ii)),Ra=Math.max(Si,Math.min(Jr,Ra))];Un(Rs,Ds,Dt,zt,se,re)?(ui||(hn.lineStart(),hn.point(Rs[0],Rs[1])),hn.point(Ds[0],Ds[1]),lo||hn.lineEnd(),Zi=!1):lo&&(hn.lineStart(),hn.point(Ii,Ra),Zi=!1)}mi=Ii,Br=Ra,ui=lo}return Ri}}function ki(){var Dt=0,zt=0,se=960,re=500,fe,Fe,Ke;return Ke={stream:function(Je){return fe&&Fe===Je?fe:fe=Ci(Dt,zt,se,re)(Fe=Je)},extent:function(Je){return arguments.length?(Dt=+Je[0][0],zt=+Je[0][1],se=+Je[1][0],re=+Je[1][1],fe=Fe=null,Ke):[[Dt,zt],[se,re]]}}}var oa=s(),Xa,ma,mo,Ba={sphere:k,point:k,lineStart:ao,lineEnd:k,polygonStart:k,polygonEnd:k};function ao(){Ba.point=Ja,Ba.lineEnd=yo}function yo(){Ba.point=Ba.lineEnd=k}function Ja(Dt,zt){Dt*=b,zt*=b,Xa=Dt,ma=A(zt),mo=M(zt),Ba.point=_o}function _o(Dt,zt){Dt*=b,zt*=b;var se=A(zt),re=M(zt),fe=y(Dt-Xa),Fe=M(fe),Ke=A(fe),rn=re*Ke,Je=mo*se-ma*re*Fe,pn=ma*se+mo*re*Fe;oa.add(_(L(rn*rn+Je*Je),pn)),Xa=Dt,ma=se,mo=re}function ts(Dt){return oa.reset(),ut(Dt,Ba),+oa}var Do=[null,null],xs={type:"LineString",coordinates:Do};function Mo(Dt,zt){return Do[0]=Dt,Do[1]=zt,ts(xs)}var $a={Feature:function(zt,se){return as(zt.geometry,se)},FeatureCollection:function(zt,se){for(var re=zt.features,fe=-1,Fe=re.length;++fe<Fe;)if(as(re[fe].geometry,se))return!0;return!1}},Ms={Sphere:function(){return!0},Point:function(zt,se){return Ca(zt.coordinates,se)},MultiPoint:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)if(Ca(re[fe],se))return!0;return!1},LineString:function(zt,se){return mn(zt.coordinates,se)},MultiLineString:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)if(mn(re[fe],se))return!0;return!1},Polygon:function(zt,se){return hr(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var re=zt.coordinates,fe=-1,Fe=re.length;++fe<Fe;)if(hr(re[fe],se))return!0;return!1},GeometryCollection:function(zt,se){for(var re=zt.geometries,fe=-1,Fe=re.length;++fe<Fe;)if(as(re[fe],se))return!0;return!1}};function as(Dt,zt){return Dt&&Ms.hasOwnProperty(Dt.type)?Ms[Dt.type](Dt,zt):!1}function Ca(Dt,zt){return Mo(Dt,zt)===0}function mn(Dt,zt){for(var se,re,fe,Fe=0,Ke=Dt.length;Fe<Ke;Fe++){if(re=Mo(Dt[Fe],zt),re===0||Fe>0&&(fe=Mo(Dt[Fe],Dt[Fe-1]),fe>0&&se<=fe&&re<=fe&&(se+re-fe)*(1-Math.pow((se-re)/fe,2))<i*fe))return!0;se=re}return!1}function hr(Dt,zt){return!!au(Dt.map(Gr),Ui(zt))}function Gr(Dt){return Dt=Dt.map(Ui),Dt.pop(),Dt}function Ui(Dt){return[Dt[0]*b,Dt[1]*b]}function Ka(Dt,zt){return(Dt&&$a.hasOwnProperty(Dt.type)?$a[Dt.type]:as)(Dt,zt)}function xo(Dt,zt,se){var re=l.range(Dt,zt-n,se).concat(zt);return function(fe){return re.map(function(Fe){return[fe,Fe]})}}function vo(Dt,zt,se){var re=l.range(Dt,zt-n,se).concat(zt);return function(fe){return re.map(function(Fe){return[Fe,fe]})}}function qi(){var Dt,zt,se,re,fe,Fe,Ke,rn,Je=10,pn=Je,hn=90,Jn=360,Vn,Zn,Wn,cr,xr=2.5;function Hr(){return{type:"MultiLineString",coordinates:mi()}}function mi(){return l.range(x(re/hn)*hn,se,hn).map(Wn).concat(l.range(x(rn/Jn)*Jn,Ke,Jn).map(cr)).concat(l.range(x(zt/Je)*Je,Dt,Je).filter(function(Br){return y(Br%hn)>n}).map(Vn)).concat(l.range(x(Fe/pn)*pn,fe,pn).filter(function(Br){return y(Br%Jn)>n}).map(Zn))}return Hr.lines=function(){return mi().map(function(Br){return{type:"LineString",coordinates:Br}})},Hr.outline=function(){return{type:"Polygon",coordinates:[Wn(re).concat(cr(Ke).slice(1),Wn(se).reverse().slice(1),cr(rn).reverse().slice(1))]}},Hr.extent=function(Br){return arguments.length?Hr.extentMajor(Br).extentMinor(Br):Hr.extentMinor()},Hr.extentMajor=function(Br){return arguments.length?(re=+Br[0][0],se=+Br[1][0],rn=+Br[0][1],Ke=+Br[1][1],re>se&&(Br=re,re=se,se=Br),rn>Ke&&(Br=rn,rn=Ke,Ke=Br),Hr.precision(xr)):[[re,rn],[se,Ke]]},Hr.extentMinor=function(Br){return arguments.length?(zt=+Br[0][0],Dt=+Br[1][0],Fe=+Br[0][1],fe=+Br[1][1],zt>Dt&&(Br=zt,zt=Dt,Dt=Br),Fe>fe&&(Br=Fe,Fe=fe,fe=Br),Hr.precision(xr)):[[zt,Fe],[Dt,fe]]},Hr.step=function(Br){return arguments.length?Hr.stepMajor(Br).stepMinor(Br):Hr.stepMinor()},Hr.stepMajor=function(Br){return arguments.length?(hn=+Br[0],Jn=+Br[1],Hr):[hn,Jn]},Hr.stepMinor=function(Br){return arguments.length?(Je=+Br[0],pn=+Br[1],Hr):[Je,pn]},Hr.precision=function(Br){return arguments.length?(xr=+Br,Vn=xo(Fe,fe,90),Zn=vo(zt,Dt,xr),Wn=xo(rn,Ke,90),cr=vo(re,se,xr),Hr):xr},Hr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Qa(){return qi()()}function bs(Dt,zt){var se=Dt[0]*b,re=Dt[1]*b,fe=zt[0]*b,Fe=zt[1]*b,Ke=M(re),rn=A(re),Je=M(Fe),pn=A(Fe),hn=Ke*M(se),Jn=Ke*A(se),Vn=Je*M(fe),Zn=Je*A(fe),Wn=2*K(L(V(Fe-re)+Ke*Je*V(fe-se))),cr=A(Wn),xr=Wn?function(Hr){var mi=A(Hr*=Wn)/cr,Br=A(Wn-Hr)/cr,ui=Br*hn+mi*Vn,_i=Br*Jn+mi*Zn,Zi=Br*rn+mi*pn;return[_(_i,ui)*v,_(Zi,L(ui*ui+_i*_i))*v]}:function(){return[se*v,re*v]};return xr.distance=Wn,xr}function Es(Dt){return Dt}var Ga=s(),Pu=s(),Uo,Ps,Qs,fs,hs={point:k,lineStart:k,lineEnd:k,polygonStart:function(){hs.lineStart=os,hs.lineEnd=Ou},polygonEnd:function(){hs.lineStart=hs.lineEnd=hs.point=k,Ga.add(y(Pu)),Pu.reset()},result:function(){var zt=Ga/2;return Ga.reset(),zt}};function os(){hs.point=ds}function ds(Dt,zt){hs.point=Ts,Uo=Qs=Dt,Ps=fs=zt}function Ts(Dt,zt){Pu.add(fs*Dt-Qs*zt),Qs=Dt,fs=zt}function Ou(){Ts(Uo,Ps)}var Uu=Infinity,uo=Uu,Fs=-Uu,ku=Fs,ul={point:ll,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var zt=[[Uu,uo],[Fs,ku]];return Fs=ku=-(uo=Uu=Infinity),zt}};function ll(Dt,zt){Dt<Uu&&(Uu=Dt),Dt>Fs&&(Fs=Dt),zt<uo&&(uo=zt),zt>ku&&(ku=zt)}var Qu=0,To=0,La=0,ya=0,wo=0,pu=0,El=0,zs=0,Ss=0,ou,qs,Ls,qu,su={point:Wa,lineStart:Sl,lineEnd:ql,polygonStart:function(){su.lineStart=Gu,su.lineEnd=Ha},polygonEnd:function(){su.point=Wa,su.lineStart=Sl,su.lineEnd=ql},result:function(){var zt=Ss?[El/Ss,zs/Ss]:pu?[ya/pu,wo/pu]:La?[Qu/La,To/La]:[NaN,NaN];return Qu=To=La=ya=wo=pu=El=zs=Ss=0,zt}};function Wa(Dt,zt){Qu+=Dt,To+=zt,++La}function Sl(){su.point=Ql}function Ql(Dt,zt){su.point=_l,Wa(Ls=Dt,qu=zt)}function _l(Dt,zt){var se=Dt-Ls,re=zt-qu,fe=L(se*se+re*re);ya+=fe*(Ls+Dt)/2,wo+=fe*(qu+zt)/2,pu+=fe,Wa(Ls=Dt,qu=zt)}function ql(){su.point=Wa}function Gu(){su.point=uu}function Ha(){Ml(ou,qs)}function uu(Dt,zt){su.point=Ml,Wa(ou=Ls=Dt,qs=qu=zt)}function Ml(Dt,zt){var se=Dt-Ls,re=zt-qu,fe=L(se*se+re*re);ya+=fe*(Ls+Dt)/2,wo+=fe*(qu+zt)/2,pu+=fe,fe=qu*Dt-Ls*zt,El+=fe*(Ls+Dt),zs+=fe*(qu+zt),Ss+=fe*3,Wa(Ls=Dt,qu=zt)}function vs(Dt){this._context=Dt}vs.prototype={_radius:4.5,pointRadius:function(zt){return this._radius=zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._context.moveTo(zt,se),this._point=1;break}case 1:{this._context.lineTo(zt,se);break}default:{this._context.moveTo(zt+this._radius,se),this._context.arc(zt,se,this._radius,0,f);break}}},result:k};var wu=s(),gu,Vu,Ws,Jo,ss,cl={point:k,lineStart:function(){cl.point=Rl},lineEnd:function(){gu&&tc(Vu,Ws),cl.point=k},polygonStart:function(){gu=!0},polygonEnd:function(){gu=null},result:function(){var zt=+wu;return wu.reset(),zt}};function Rl(Dt,zt){cl.point=tc,Vu=Jo=Dt,Ws=ss=zt}function tc(Dt,zt){Jo-=Dt,ss-=zt,wu.add(L(Jo*Jo+ss*ss)),Jo=Dt,ss=zt}function Wu(){this._string=[]}Wu.prototype={_radius:4.5,_circle:tl(4.5),pointRadius:function(zt){return(zt=+zt)!==this._radius&&(this._radius=zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._string.push("M",zt,",",se),this._point=1;break}case 1:{this._string.push("L",zt,",",se);break}default:{this._circle==null&&(this._circle=tl(this._radius)),this._string.push("M",zt,",",se,this._circle);break}}},result:function(){if(this._string.length){var zt=this._string.join("");return this._string=[],zt}else return null}};function tl(Dt){return"m0,"+Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+-2*Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+2*Dt+"z"}function Iu(Dt,zt){var se=4.5,re,fe;function Fe(Ke){return Ke&&(typeof se=="function"&&fe.pointRadius(+se.apply(this,arguments)),ut(Ke,re(fe))),fe.result()}return Fe.area=function(Ke){return ut(Ke,re(hs)),hs.result()},Fe.measure=function(Ke){return ut(Ke,re(cl)),cl.result()},Fe.bounds=function(Ke){return ut(Ke,re(ul)),ul.result()},Fe.centroid=function(Ke){return ut(Ke,re(su)),su.result()},Fe.projection=function(Ke){return arguments.length?(re=Ke==null?(Dt=null,Es):(Dt=Ke).stream,Fe):Dt},Fe.context=function(Ke){return arguments.length?(fe=Ke==null?(zt=null,new Wu):new vs(zt=Ke),typeof se!="function"&&fe.pointRadius(se),Fe):zt},Fe.pointRadius=function(Ke){return arguments.length?(se=typeof Ke=="function"?Ke:(fe.pointRadius(+Ke),+Ke),Fe):se},Fe.projection(Dt).context(zt)}function Lu(Dt){return{stream:mu(Dt)}}function mu(Dt){return function(zt){var se=new Hu;for(var re in Dt)se[re]=Dt[re];return se.stream=zt,se}}function Hu(){}Hu.prototype={constructor:Hu,point:function(zt,se){this.stream.point(zt,se)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Us(Dt,zt,se){var re=Dt.clipExtent&&Dt.clipExtent();return Dt.scale(150).translate([0,0]),re!=null&&Dt.clipExtent(null),ut(se,Dt.stream(ul)),zt(ul.result()),re!=null&&Dt.clipExtent(re),Dt}function Dl(Dt,zt,se){return Us(Dt,function(re){var fe=zt[1][0]-zt[0][0],Fe=zt[1][1]-zt[0][1],Ke=Math.min(fe/(re[1][0]-re[0][0]),Fe/(re[1][1]-re[0][1])),rn=+zt[0][0]+(fe-Ke*(re[1][0]+re[0][0]))/2,Je=+zt[0][1]+(Fe-Ke*(re[1][1]+re[0][1]))/2;Dt.scale(150*Ke).translate([rn,Je])},se)}function hc(Dt,zt,se){return Dl(Dt,[[0,0],zt],se)}function Pl(Dt,zt,se){return Us(Dt,function(re){var fe=+zt,Fe=fe/(re[1][0]-re[0][0]),Ke=(fe-Fe*(re[1][0]+re[0][0]))/2,rn=-Fe*re[0][1];Dt.scale(150*Fe).translate([Ke,rn])},se)}function jl(Dt,zt,se){return Us(Dt,function(re){var fe=+zt,Fe=fe/(re[1][1]-re[0][1]),Ke=-Fe*re[0][0],rn=(fe-Fe*(re[1][1]+re[0][1]))/2;Dt.scale(150*Fe).translate([Ke,rn])},se)}var Bl=16,sc=M(30*b);function el(Dt,zt){return+zt?Nl(Dt,zt):Tl(Dt)}function Tl(Dt){return mu({point:function(se,re){se=Dt(se,re),this.stream.point(se[0],se[1])}})}function Nl(Dt,zt){function se(re,fe,Fe,Ke,rn,Je,pn,hn,Jn,Vn,Zn,Wn,cr,xr){var Hr=pn-re,mi=hn-fe,Br=Hr*Hr+mi*mi;if(Br>4*zt&&cr--){var ui=Ke+Vn,_i=rn+Zn,Zi=Je+Wn,Ri=L(ui*ui+_i*_i+Zi*Zi),Ma=K(Zi/=Ri),ga=y(y(Zi)-1)<n||y(Fe-Jn)<n?(Fe+Jn)/2:_(_i,ui),la=Dt(ga,Ma),ii=la[0],Pa=la[1],Va=ii-re,Ya=Pa-fe,Ii=mi*Va-Hr*Ya;(Ii*Ii/Br>zt||y((Hr*Va+mi*Ya)/Br-.5)>.3||Ke*Vn+rn*Zn+Je*Wn<sc)&&(se(re,fe,Fe,Ke,rn,Je,ii,Pa,ga,ui/=Ri,_i/=Ri,Zi,cr,xr),xr.point(ii,Pa),se(ii,Pa,ga,ui,_i,Zi,pn,hn,Jn,Vn,Zn,Wn,cr,xr))}}return function(re){var fe,Fe,Ke,rn,Je,pn,hn,Jn,Vn,Zn,Wn,cr,xr={point:Hr,lineStart:mi,lineEnd:ui,polygonStart:function(){re.polygonStart(),xr.lineStart=_i},polygonEnd:function(){re.polygonEnd(),xr.lineStart=mi}};function Hr(Ma,ga){Ma=Dt(Ma,ga),re.point(Ma[0],Ma[1])}function mi(){Jn=NaN,xr.point=Br,re.lineStart()}function Br(Ma,ga){var la=H([Ma,ga]),ii=Dt(Ma,ga);se(Jn,Vn,hn,Zn,Wn,cr,Jn=ii[0],Vn=ii[1],hn=Ma,Zn=la[0],Wn=la[1],cr=la[2],Bl,re),re.point(Jn,Vn)}function ui(){xr.point=Hr,re.lineEnd()}function _i(){mi(),xr.point=Zi,xr.lineEnd=Ri}function Zi(Ma,ga){Br(fe=Ma,ga),Fe=Jn,Ke=Vn,rn=Zn,Je=Wn,pn=cr,xr.point=Br}function Ri(){se(Jn,Vn,hn,Zn,Wn,cr,Fe,Ke,fe,rn,Je,pn,Bl,re),xr.lineEnd=ui,ui()}return xr}}var tu=mu({point:function(zt,se){this.stream.point(zt*b,se*b)}});function po(Dt){return mu({point:function(se,re){var fe=Dt(se,re);return this.stream.point(fe[0],fe[1])}})}function pl(Dt,zt,se,re,fe){function Fe(Ke,rn){return Ke*=re,rn*=fe,[zt+Dt*Ke,se-Dt*rn]}return Fe.invert=function(Ke,rn){return[(Ke-zt)/Dt*re,(se-rn)/Dt*fe]},Fe}function fl(Dt,zt,se,re,fe,Fe){var Ke=M(Fe),rn=A(Fe),Je=Ke*Dt,pn=rn*Dt,hn=Ke/Dt,Jn=rn/Dt,Vn=(rn*se-Ke*zt)/Dt,Zn=(rn*zt+Ke*se)/Dt;function Wn(cr,xr){return cr*=re,xr*=fe,[Je*cr-pn*xr+zt,se-pn*cr-Je*xr]}return Wn.invert=function(cr,xr){return[re*(hn*cr-Jn*xr+Vn),fe*(Zn-Jn*cr-hn*xr)]},Wn}function Hs(Dt){return Da(function(){return Dt})()}function Da(Dt){var zt,se=150,re=480,fe=250,Fe=0,Ke=0,rn=0,Je=0,pn=0,hn,Jn=0,Vn=1,Zn=1,Wn=null,cr=Ht,xr=null,Hr,mi,Br,ui=Es,_i=.5,Zi,Ri,Ma,ga,la;function ii(Ii){return Ma(Ii[0]*b,Ii[1]*b)}function Pa(Ii){return Ii=Ma.invert(Ii[0],Ii[1]),Ii&&[Ii[0]*v,Ii[1]*v]}ii.stream=function(Ii){return ga&&la===Ii?ga:ga=tu(po(hn)(cr(Zi(ui(la=Ii)))))},ii.preclip=function(Ii){return arguments.length?(cr=Ii,Wn=void 0,Ya()):cr},ii.postclip=function(Ii){return arguments.length?(ui=Ii,xr=Hr=mi=Br=null,Ya()):ui},ii.clipAngle=function(Ii){return arguments.length?(cr=+Ii?qn(Wn=Ii*b):(Wn=null,Ht),Ya()):Wn*v},ii.clipExtent=function(Ii){return arguments.length?(ui=Ii==null?(xr=Hr=mi=Br=null,Es):Ci(xr=+Ii[0][0],Hr=+Ii[0][1],mi=+Ii[1][0],Br=+Ii[1][1]),Ya()):xr==null?null:[[xr,Hr],[mi,Br]]},ii.scale=function(Ii){return arguments.length?(se=+Ii,Va()):se},ii.translate=function(Ii){return arguments.length?(re=+Ii[0],fe=+Ii[1],Va()):[re,fe]},ii.center=function(Ii){return arguments.length?(Fe=Ii[0]%360*b,Ke=Ii[1]%360*b,Va()):[Fe*v,Ke*v]},ii.rotate=function(Ii){return arguments.length?(rn=Ii[0]%360*b,Je=Ii[1]%360*b,pn=Ii.length>2?Ii[2]%360*b:0,Va()):[rn*v,Je*v,pn*v]},ii.angle=function(Ii){return arguments.length?(Jn=Ii%360*b,Va()):Jn*v},ii.reflectX=function(Ii){return arguments.length?(Vn=Ii?-1:1,Va()):Vn<0},ii.reflectY=function(Ii){return arguments.length?(Zn=Ii?-1:1,Va()):Zn<0},ii.precision=function(Ii){return arguments.length?(Zi=el(Ri,_i=Ii*Ii),Ya()):L(_i)},ii.fitExtent=function(Ii,Ra){return Dl(ii,Ii,Ra)},ii.fitSize=function(Ii,Ra){return hc(ii,Ii,Ra)},ii.fitWidth=function(Ii,Ra){return Pl(ii,Ii,Ra)},ii.fitHeight=function(Ii,Ra){return jl(ii,Ii,Ra)};function Va(){var Ii=fl(se,0,0,Vn,Zn,Jn).apply(null,zt(Fe,Ke)),Ra=(Jn?fl:pl)(se,re-Ii[0],fe-Ii[1],Vn,Zn,Jn);return hn=Aa(rn,Je,pn),Ri=zr(zt,Ra),Ma=zr(hn,Ri),Zi=el(Ri,_i),Ya()}function Ya(){return ga=la=null,ii}return function(){return zt=Dt.apply(this,arguments),ii.invert=zt.invert&&Pa,Va()}}function bo(Dt){var zt=0,se=a/3,re=Da(Dt),fe=re(zt,se);return fe.parallels=function(Fe){return arguments.length?re(zt=Fe[0]*b,se=Fe[1]*b):[zt*v,se*v]},fe}function ks(Dt){var zt=M(Dt);function se(re,fe){return[re*zt,A(fe)/zt]}return se.invert=function(re,fe){return[re/zt,K(fe*zt)]},se}function gl(Dt,zt){var se=A(Dt),re=(se+A(zt))/2;if(y(re)<n)return ks(Dt);var fe=1+se*(2*re-se),Fe=L(fe)/re;function Ke(rn,Je){var pn=L(fe-2*re*A(Je))/re;return[pn*A(rn*=re),Fe-pn*M(rn)]}return Ke.invert=function(rn,Je){var pn=Fe-Je,hn=_(rn,y(pn))*O(pn);return pn*re<0&&(hn-=a*O(rn)*O(pn)),[hn/re,K((fe-(rn*rn+pn*pn)*re*re)/(2*re))]},Ke}function nl(){return bo(gl).scale(155.424).center([0,33.6442])}function Yu(){return nl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dc(Dt){var zt=Dt.length;return{point:function(re,fe){for(var Fe=-1;++Fe<zt;)Dt[Fe].point(re,fe)},sphere:function(){for(var re=-1;++re<zt;)Dt[re].sphere()},lineStart:function(){for(var re=-1;++re<zt;)Dt[re].lineStart()},lineEnd:function(){for(var re=-1;++re<zt;)Dt[re].lineEnd()},polygonStart:function(){for(var re=-1;++re<zt;)Dt[re].polygonStart()},polygonEnd:function(){for(var re=-1;++re<zt;)Dt[re].polygonEnd()}}}function As(){var Dt,zt,se=Yu(),re,fe=nl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Fe,Ke=nl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),rn,Je,pn={point:function(Zn,Wn){Je=[Zn,Wn]}};function hn(Vn){var Zn=Vn[0],Wn=Vn[1];return Je=null,re.point(Zn,Wn),Je||(Fe.point(Zn,Wn),Je)||(rn.point(Zn,Wn),Je)}hn.invert=function(Vn){var Zn=se.scale(),Wn=se.translate(),cr=(Vn[0]-Wn[0])/Zn,xr=(Vn[1]-Wn[1])/Zn;return(xr>=.12&&xr<.234&&cr>=-.425&&cr<-.214?fe:xr>=.166&&xr<.234&&cr>=-.214&&cr<-.115?Ke:se).invert(Vn)},hn.stream=function(Vn){return Dt&&zt===Vn?Dt:Dt=dc([se.stream(zt=Vn),fe.stream(Vn),Ke.stream(Vn)])},hn.precision=function(Vn){return arguments.length?(se.precision(Vn),fe.precision(Vn),Ke.precision(Vn),Jn()):se.precision()},hn.scale=function(Vn){return arguments.length?(se.scale(Vn),fe.scale(Vn*.35),Ke.scale(Vn),hn.translate(se.translate())):se.scale()},hn.translate=function(Vn){if(!arguments.length)return se.translate();var Zn=se.scale(),Wn=+Vn[0],cr=+Vn[1];return re=se.translate(Vn).clipExtent([[Wn-.455*Zn,cr-.238*Zn],[Wn+.455*Zn,cr+.238*Zn]]).stream(pn),Fe=fe.translate([Wn-.307*Zn,cr+.201*Zn]).clipExtent([[Wn-.425*Zn+n,cr+.12*Zn+n],[Wn-.214*Zn-n,cr+.234*Zn-n]]).stream(pn),rn=Ke.translate([Wn-.205*Zn,cr+.212*Zn]).clipExtent([[Wn-.214*Zn+n,cr+.166*Zn+n],[Wn-.115*Zn-n,cr+.234*Zn-n]]).stream(pn),Jn()},hn.fitExtent=function(Vn,Zn){return Dl(hn,Vn,Zn)},hn.fitSize=function(Vn,Zn){return hc(hn,Vn,Zn)},hn.fitWidth=function(Vn,Zn){return Pl(hn,Vn,Zn)},hn.fitHeight=function(Vn,Zn){return jl(hn,Vn,Zn)};function Jn(){return Dt=zt=null,hn}return hn.scale(1070)}function rl(Dt){return function(zt,se){var re=M(zt),fe=M(se),Fe=Dt(re*fe);return[Fe*fe*A(zt),Fe*A(se)]}}function lu(Dt){return function(zt,se){var re=L(zt*zt+se*se),fe=Dt(re),Fe=A(fe),Ke=M(fe);return[_(zt*Fe,re*Ke),K(re&&se*Fe/re)]}}var Ys=rl(function(Dt){return L(2/(1+Dt))});Ys.invert=lu(function(Dt){return 2*K(Dt/2)});function $o(){return Hs(Ys).scale(124.75).clipAngle(180-.001)}var eu=rl(function(Dt){return(Dt=F(Dt))&&Dt/A(Dt)});eu.invert=lu(function(Dt){return Dt});function Ru(){return Hs(eu).scale(79.4188).clipAngle(180-.001)}function Qo(Dt,zt){return[Dt,S(W((o+zt)/2))]}Qo.invert=function(Dt,zt){return[Dt,2*g(m(zt))-o]};function Wi(){return Cs(Qo).scale(961/f)}function Cs(Dt){var zt=Hs(Dt),se=zt.center,re=zt.scale,fe=zt.translate,Fe=zt.clipExtent,Ke=null,rn,Je,pn;zt.scale=function(Jn){return arguments.length?(re(Jn),hn()):re()},zt.translate=function(Jn){return arguments.length?(fe(Jn),hn()):fe()},zt.center=function(Jn){return arguments.length?(se(Jn),hn()):se()},zt.clipExtent=function(Jn){return arguments.length?(Jn==null?Ke=rn=Je=pn=null:(Ke=+Jn[0][0],rn=+Jn[0][1],Je=+Jn[1][0],pn=+Jn[1][1]),hn()):Ke==null?null:[[Ke,rn],[Je,pn]]};function hn(){var Jn=a*re(),Vn=zt(Ea(zt.rotate()).invert([0,0]));return Fe(Ke==null?[[Vn[0]-Jn,Vn[1]-Jn],[Vn[0]+Jn,Vn[1]+Jn]]:Dt===Qo?[[Math.max(Vn[0]-Jn,Ke),rn],[Math.min(Vn[0]+Jn,Je),pn]]:[[Ke,Math.max(Vn[1]-Jn,rn)],[Je,Math.min(Vn[1]+Jn,pn)]])}return hn()}function Zu(Dt){return W((o+Dt)/2)}function Du(Dt,zt){var se=M(Dt),re=Dt===zt?A(Dt):S(se/M(zt))/S(Zu(zt)/Zu(Dt)),fe=se*P(Zu(Dt),re)/re;if(!re)return Qo;function Fe(Ke,rn){fe>0?rn<-o+n&&(rn=-o+n):rn>o-n&&(rn=o-n);var Je=fe/P(Zu(rn),re);return[Je*A(re*Ke),fe-Je*M(re*Ke)]}return Fe.invert=function(Ke,rn){var Je=fe-rn,pn=O(re)*L(Ke*Ke+Je*Je),hn=_(Ke,y(Je))*O(Je);return Je*re<0&&(hn-=a*O(Ke)*O(Je)),[hn/re,2*g(P(fe/pn,1/re))-o]},Fe}function jo(){return bo(Du).scale(109.5).parallels([30,30])}function Bo(Dt,zt){return[Dt,zt]}Bo.invert=Bo;function Tu(){return Hs(Bo).scale(152.63)}function Mi(Dt,zt){var se=M(Dt),re=Dt===zt?A(Dt):(se-M(zt))/(zt-Dt),fe=se/re+Dt;if(y(re)<n)return Bo;function Fe(Ke,rn){var Je=fe-rn,pn=re*Ke;return[Je*A(pn),fe-Je*M(pn)]}return Fe.invert=function(Ke,rn){var Je=fe-rn,pn=_(Ke,y(Je))*O(Je);return Je*re<0&&(pn-=a*O(Ke)*O(Je)),[pn/re,fe-O(re)*L(Ke*Ke+Je*Je)]},Fe}function il(){return bo(Mi).scale(131.154).center([0,13.9389])}var ju=1.340264,Bu=-.081106,nu=893e-6,we=.003796,Pe=L(3)/2,dn=12;function tn(Dt,zt){var se=K(Pe*A(zt)),re=se*se,fe=re*re*re;return[Dt*M(se)/(Pe*(ju+3*Bu*re+fe*(7*nu+9*we*re))),se*(ju+Bu*re+fe*(nu+we*re))]}tn.invert=function(Dt,zt){for(var se=zt,re=se*se,fe=re*re*re,Fe=0,Ke,rn,Je;Fe<dn&&(rn=se*(ju+Bu*re+fe*(nu+we*re))-zt,Je=ju+3*Bu*re+fe*(7*nu+9*we*re),se-=Ke=rn/Je,re=se*se,fe=re*re*re,!(y(Ke)<i));++Fe);return[Pe*Dt*(ju+3*Bu*re+fe*(7*nu+9*we*re))/M(se),K(A(se)/Pe)]};function wn(){return Hs(tn).scale(177.158)}function dr(Dt,zt){var se=M(zt),re=M(Dt)*se;return[se*A(Dt)/re,A(zt)/re]}dr.invert=lu(g);function Rr(){return Hs(dr).scale(144.049).clipAngle(60)}function Xr(){var Dt=1,zt=0,se=0,re=1,fe=1,Fe=0,Ke,rn,Je=null,pn,hn,Jn,Vn=1,Zn=1,Wn=mu({point:function(_i,Zi){var Ri=Br([_i,Zi]);this.stream.point(Ri[0],Ri[1])}}),cr=Es,xr,Hr;function mi(){return Vn=Dt*re,Zn=Dt*fe,xr=Hr=null,Br}function Br(ui){var _i=ui[0]*Vn,Zi=ui[1]*Zn;if(Fe){var Ri=Zi*Ke-_i*rn;_i=_i*Ke+Zi*rn,Zi=Ri}return[_i+zt,Zi+se]}return Br.invert=function(ui){var _i=ui[0]-zt,Zi=ui[1]-se;if(Fe){var Ri=Zi*Ke+_i*rn;_i=_i*Ke-Zi*rn,Zi=Ri}return[_i/Vn,Zi/Zn]},Br.stream=function(ui){return xr&&Hr===ui?xr:xr=Wn(cr(Hr=ui))},Br.postclip=function(ui){return arguments.length?(cr=ui,Je=pn=hn=Jn=null,mi()):cr},Br.clipExtent=function(ui){return arguments.length?(cr=ui==null?(Je=pn=hn=Jn=null,Es):Ci(Je=+ui[0][0],pn=+ui[0][1],hn=+ui[1][0],Jn=+ui[1][1]),mi()):Je==null?null:[[Je,pn],[hn,Jn]]},Br.scale=function(ui){return arguments.length?(Dt=+ui,mi()):Dt},Br.translate=function(ui){return arguments.length?(zt=+ui[0],se=+ui[1],mi()):[zt,se]},Br.angle=function(ui){return arguments.length?(Fe=ui%360*b,rn=A(Fe),Ke=M(Fe),mi()):Fe*v},Br.reflectX=function(ui){return arguments.length?(re=ui?-1:1,mi()):re<0},Br.reflectY=function(ui){return arguments.length?(fe=ui?-1:1,mi()):fe<0},Br.fitExtent=function(ui,_i){return Dl(Br,ui,_i)},Br.fitSize=function(ui,_i){return hc(Br,ui,_i)},Br.fitWidth=function(ui,_i){return Pl(Br,ui,_i)},Br.fitHeight=function(ui,_i){return jl(Br,ui,_i)},Br}function ti(Dt,zt){var se=zt*zt,re=se*se;return[Dt*(.8707-.131979*se+re*(-.013791+re*(.003971*se-.001529*re))),zt*(1.007226+se*(.015085+re*(-.044475+.028874*se-.005916*re)))]}ti.invert=function(Dt,zt){var se=zt,re=25,fe;do{var Fe=se*se,Ke=Fe*Fe;se-=fe=(se*(1.007226+Fe*(.015085+Ke*(-.044475+.028874*Fe-.005916*Ke)))-zt)/(1.007226+Fe*(.015085*3+Ke*(-.044475*7+.028874*9*Fe-.005916*11*Ke)))}while(y(fe)>n&&--re>0);return[Dt/(.8707+(Fe=se*se)*(-.131979+Fe*(-.013791+Fe*Fe*Fe*(.003971-.001529*Fe)))),se]};function Fr(){return Hs(ti).scale(175.295)}function li(Dt,zt){return[M(zt)*A(Dt),A(zt)]}li.invert=lu(K);function yr(){return Hs(li).scale(249.5).clipAngle(90+n)}function Zt(Dt,zt){var se=M(zt),re=1+M(Dt)*se;return[se*A(Dt)/re,A(zt)/re]}Zt.invert=lu(function(Dt){return 2*g(Dt)});function te(){return Hs(Zt).scale(250).clipAngle(142)}function Le(Dt,zt){return[S(W((o+zt)/2)),-Dt]}Le.invert=function(Dt,zt){return[-zt,2*g(m(Dt))-o]};function Se(){var Dt=Cs(Le),zt=Dt.center,se=Dt.rotate;return Dt.center=function(re){return arguments.length?zt([-re[1],re[0]]):(re=zt(),[re[1],-re[0]])},Dt.rotate=function(re){return arguments.length?se([re[0],re[1],re.length>2?re[2]+90:90]):(re=se(),[re[0],re[1],re[2]-90])},se([0,0,90]).scale(159.155)}t.geoAlbers=Yu,t.geoAlbersUsa=As,t.geoArea=ot,t.geoAzimuthalEqualArea=$o,t.geoAzimuthalEqualAreaRaw=Ys,t.geoAzimuthalEquidistant=Ru,t.geoAzimuthalEquidistantRaw=eu,t.geoBounds=Jt,t.geoCentroid=Dr,t.geoCircle=no,t.geoClipAntimeridian=Ht,t.geoClipCircle=qn,t.geoClipExtent=ki,t.geoClipRectangle=Ci,t.geoConicConformal=jo,t.geoConicConformalRaw=Du,t.geoConicEqualArea=nl,t.geoConicEqualAreaRaw=gl,t.geoConicEquidistant=il,t.geoConicEquidistantRaw=Mi,t.geoContains=Ka,t.geoDistance=Mo,t.geoEqualEarth=wn,t.geoEqualEarthRaw=tn,t.geoEquirectangular=Tu,t.geoEquirectangularRaw=Bo,t.geoGnomonic=Rr,t.geoGnomonicRaw=dr,t.geoGraticule=qi,t.geoGraticule10=Qa,t.geoIdentity=Xr,t.geoInterpolate=bs,t.geoLength=ts,t.geoMercator=Wi,t.geoMercatorRaw=Qo,t.geoNaturalEarth1=Fr,t.geoNaturalEarth1Raw=ti,t.geoOrthographic=yr,t.geoOrthographicRaw=li,t.geoPath=Iu,t.geoProjection=Hs,t.geoProjectionMutator=Da,t.geoRotation=Ea,t.geoStereographic=te,t.geoStereographicRaw=Zt,t.geoStream=ut,t.geoTransform=Lu,t.geoTransverseMercator=Se,t.geoTransverseMercatorRaw=Le,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";var s=function(){return new c};function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(Pe){h(r,Pe,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(we,Pe,dn){var tn=we.s=Pe+dn,wn=tn-Pe,dr=tn-wn;we.t=Pe-dr+(dn-wn)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,u=a/4,f=a*2,v=180/a,b=a/180,y=Math.abs,g=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(we){return we>0?1:we<0?-1:0},L=Math.sqrt,W=Math.tan;function F(we){return we>1?0:we<-1?a:Math.acos(we)}function K(we){return we>1?o:we<-1?-o:Math.asin(we)}function V(we){return(we=A(we/2))*we}function k(){}function Z(we,Pe){we&&it.hasOwnProperty(we.type)&&it[we.type](we,Pe)}var X={Feature:function(Pe,dn){Z(Pe.geometry,dn)},FeatureCollection:function(Pe,dn){for(var tn=Pe.features,wn=-1,dr=tn.length;++wn<dr;)Z(tn[wn].geometry,dn)}},it={Sphere:function(Pe,dn){dn.sphere()},Point:function(Pe,dn){Pe=Pe.coordinates,dn.point(Pe[0],Pe[1],Pe[2])},MultiPoint:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)Pe=tn[wn],dn.point(Pe[0],Pe[1],Pe[2])},LineString:function(Pe,dn){ft(Pe.coordinates,dn,0)},MultiLineString:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)ft(tn[wn],dn,0)},Polygon:function(Pe,dn){pt(Pe.coordinates,dn)},MultiPolygon:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)pt(tn[wn],dn)},GeometryCollection:function(Pe,dn){for(var tn=Pe.geometries,wn=-1,dr=tn.length;++wn<dr;)Z(tn[wn],dn)}};function ft(we,Pe,dn){var tn=-1,wn=we.length-dn,dr;for(Pe.lineStart();++tn<wn;)dr=we[tn],Pe.point(dr[0],dr[1],dr[2]);Pe.lineEnd()}function pt(we,Pe){var dn=-1,tn=we.length;for(Pe.polygonStart();++dn<tn;)ft(we[dn],Pe,1);Pe.polygonEnd()}var ut=function(Pe,dn){Pe&&X.hasOwnProperty(Pe.type)?X[Pe.type](Pe,dn):Z(Pe,dn)},It=s(),Nt=s(),Rt,Mt,bt,At,rt,Pt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){It.reset(),Pt.lineStart=z,Pt.lineEnd=Q},polygonEnd:function(){var Pe=+It;Nt.add(Pe<0?f+Pe:Pe),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){Pt.point=gt}function Q(){et(Rt,Mt)}function gt(we,Pe){Pt.point=et,Rt=we,Mt=Pe,we*=b,Pe*=b,bt=we,At=M(Pe=Pe/2+u),rt=A(Pe)}function et(we,Pe){we*=b,Pe*=b,Pe=Pe/2+u;var dn=we-bt,tn=dn>=0?1:-1,wn=tn*dn,dr=M(Pe),Rr=A(Pe),Xr=rt*Rr,ti=At*dr+Xr*M(wn),Fr=Xr*tn*A(wn);It.add(_(Fr,ti)),bt=we,At=dr,rt=Rr}var ot=function(Pe){return Nt.reset(),ut(Pe,Pt),Nt*2};function xt(we){return[_(we[1],we[0]),K(we[2])]}function H(we){var Pe=we[0],dn=we[1],tn=M(dn);return[tn*M(Pe),tn*A(Pe),A(dn)]}function nt(we,Pe){return we[0]*Pe[0]+we[1]*Pe[1]+we[2]*Pe[2]}function at(we,Pe){return[we[1]*Pe[2]-we[2]*Pe[1],we[2]*Pe[0]-we[0]*Pe[2],we[0]*Pe[1]-we[1]*Pe[0]]}function q(we,Pe){we[0]+=Pe[0],we[1]+=Pe[1],we[2]+=Pe[2]}function _t(we,Pe){return[we[0]*Pe,we[1]*Pe,we[2]*Pe]}function yt(we){var Pe=L(we[0]*we[0]+we[1]*we[1]+we[2]*we[2]);we[0]/=Pe,we[1]/=Pe,we[2]/=Pe}var Ft,Qt,ee,Vt,$t,Me,me,le,be=s(),ze,Xe,Sn={point:Xn,lineStart:nn,lineEnd:en,polygonStart:function(){Sn.point=An,Sn.lineStart=Nn,Sn.lineEnd=fr,be.reset(),Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd(),Sn.point=Xn,Sn.lineStart=nn,Sn.lineEnd=en,It<0?(Ft=-(ee=180),Qt=-(Vt=90)):be>n?Vt=90:be<-n&&(Qt=-90),Xe[0]=Ft,Xe[1]=ee}};function Xn(we,Pe){ze.push(Xe=[Ft=we,ee=we]),Pe<Qt&&(Qt=Pe),Pe>Vt&&(Vt=Pe)}function Hn(we,Pe){var dn=H([we*b,Pe*b]);if(le){var tn=at(le,dn),wn=[tn[1],-tn[0],0],dr=at(wn,tn);yt(dr),dr=xt(dr);var Rr=we-$t,Xr=Rr>0?1:-1,ti=dr[0]*v*Xr,Fr,li=y(Rr)>180;li^(Xr*$t<ti&&ti<Xr*we)?(Fr=dr[1]*v,Fr>Vt&&(Vt=Fr)):(ti=(ti+360)%360-180,li^(Xr*$t<ti&&ti<Xr*we)?(Fr=-dr[1]*v,Fr<Qt&&(Qt=Fr)):(Pe<Qt&&(Qt=Pe),Pe>Vt&&(Vt=Pe))),li?we<$t?hi(Ft,we)>hi(Ft,ee)&&(ee=we):hi(we,ee)>hi(Ft,ee)&&(Ft=we):ee>=Ft?(we<Ft&&(Ft=we),we>ee&&(ee=we)):we>$t?hi(Ft,we)>hi(Ft,ee)&&(ee=we):hi(we,ee)>hi(Ft,ee)&&(Ft=we)}else ze.push(Xe=[Ft=we,ee=we]);Pe<Qt&&(Qt=Pe),Pe>Vt&&(Vt=Pe),le=dn,$t=we}function nn(){Sn.point=Hn}function en(){Xe[0]=Ft,Xe[1]=ee,Sn.point=Xn,le=null}function An(we,Pe){if(le){var dn=we-$t;be.add(y(dn)>180?dn+(dn>0?360:-360):dn)}else Me=we,me=Pe;Pt.point(we,Pe),Hn(we,Pe)}function Nn(){Pt.lineStart()}function fr(){An(Me,me),Pt.lineEnd(),y(be)>n&&(Ft=-(ee=180)),Xe[0]=Ft,Xe[1]=ee,le=null}function hi(we,Pe){return(Pe-=we)<0?Pe+360:Pe}function Ce(we,Pe){return we[0]-Pe[0]}function Te(we,Pe){return we[0]<=we[1]?we[0]<=Pe&&Pe<=we[1]:Pe<we[0]||we[1]<Pe}var Jt=function(Pe){var dn,tn,wn,dr,Rr,Xr,ti;if(Vt=ee=-(Ft=Qt=Infinity),ze=[],ut(Pe,Sn),tn=ze.length){for(ze.sort(Ce),dn=1,wn=ze[0],Rr=[wn];dn<tn;++dn)dr=ze[dn],Te(wn,dr[0])||Te(wn,dr[1])?(hi(wn[0],dr[1])>hi(wn[0],wn[1])&&(wn[1]=dr[1]),hi(dr[0],wn[1])>hi(wn[0],wn[1])&&(wn[0]=dr[0])):Rr.push(wn=dr);for(Xr=-Infinity,tn=Rr.length-1,dn=0,wn=Rr[tn];dn<=tn;wn=dr,++dn)dr=Rr[dn],(ti=hi(wn[1],dr[0]))>Xr&&(Xr=ti,Ft=dr[0],ee=wn[1])}return ze=Xe=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ee,Vt]]},pe,Wt,ie,Ae,ue,xe,$e,Fn,or,En,Pn,br,Pr,ln,Cr,Ar,Be={sphere:k,point:We,lineStart:fn,lineEnd:bn,polygonStart:function(){Be.lineStart=Ln,Be.lineEnd=ir},polygonEnd:function(){Be.lineStart=fn,Be.lineEnd=bn}};function We(we,Pe){we*=b,Pe*=b;var dn=M(Pe);Ye(dn*M(we),dn*A(we),A(Pe))}function Ye(we,Pe,dn){++pe,ie+=(we-ie)/pe,Ae+=(Pe-Ae)/pe,ue+=(dn-ue)/pe}function fn(){Be.point=gn}function gn(we,Pe){we*=b,Pe*=b;var dn=M(Pe);ln=dn*M(we),Cr=dn*A(we),Ar=A(Pe),Be.point=Bn,Ye(ln,Cr,Ar)}function Bn(we,Pe){we*=b,Pe*=b;var dn=M(Pe),tn=dn*M(we),wn=dn*A(we),dr=A(Pe),Rr=_(L((Rr=Cr*dr-Ar*wn)*Rr+(Rr=Ar*tn-ln*dr)*Rr+(Rr=ln*wn-Cr*tn)*Rr),ln*tn+Cr*wn+Ar*dr);Wt+=Rr,xe+=Rr*(ln+(ln=tn)),$e+=Rr*(Cr+(Cr=wn)),Fn+=Rr*(Ar+(Ar=dr)),Ye(ln,Cr,Ar)}function bn(){Be.point=We}function Ln(){Be.point=Yn}function ir(){_n(br,Pr),Be.point=We}function Yn(we,Pe){br=we,Pr=Pe,we*=b,Pe*=b,Be.point=_n;var dn=M(Pe);ln=dn*M(we),Cr=dn*A(we),Ar=A(Pe),Ye(ln,Cr,Ar)}function _n(we,Pe){we*=b,Pe*=b;var dn=M(Pe),tn=dn*M(we),wn=dn*A(we),dr=A(Pe),Rr=Cr*dr-Ar*wn,Xr=Ar*tn-ln*dr,ti=ln*wn-Cr*tn,Fr=L(Rr*Rr+Xr*Xr+ti*ti),li=K(Fr),yr=Fr&&-li/Fr;or+=yr*Rr,En+=yr*Xr,Pn+=yr*ti,Wt+=li,xe+=li*(ln+(ln=tn)),$e+=li*(Cr+(Cr=wn)),Fn+=li*(Ar+(Ar=dr)),Ye(ln,Cr,Ar)}var Dr=function(Pe){pe=Wt=ie=Ae=ue=xe=$e=Fn=or=En=Pn=0,ut(Pe,Be);var dn=or,tn=En,wn=Pn,dr=dn*dn+tn*tn+wn*wn;return dr<i&&(dn=xe,tn=$e,wn=Fn,Wt<n&&(dn=ie,tn=Ae,wn=ue),dr=dn*dn+tn*tn+wn*wn,dr<i)?[NaN,NaN]:[_(tn,dn)*v,K(wn/L(dr))*v]},vr=function(Pe){return function(){return Pe}},zr=function(Pe,dn){function tn(wn,dr){return wn=Pe(wn,dr),dn(wn[0],wn[1])}return Pe.invert&&dn.invert&&(tn.invert=function(wn,dr){return wn=dn.invert(wn,dr),wn&&Pe.invert(wn[0],wn[1])}),tn};function Ai(we,Pe){return[we>a?we-f:we<-a?we+f:we,Pe]}Ai.invert=Ai;function Aa(we,Pe,dn){return(we%=f)?Pe||dn?zr(eo(we),Zo(Pe,dn)):eo(we):Pe||dn?Zo(Pe,dn):Ai}function ka(we){return function(Pe,dn){return Pe+=we,[Pe>a?Pe-f:Pe<-a?Pe+f:Pe,dn]}}function eo(we){var Pe=ka(we);return Pe.invert=ka(-we),Pe}function Zo(we,Pe){var dn=M(we),tn=A(we),wn=M(Pe),dr=A(Pe);function Rr(Xr,ti){var Fr=M(ti),li=M(Xr)*Fr,yr=A(Xr)*Fr,Zt=A(ti),te=Zt*dn+li*tn;return[_(yr*wn-te*dr,li*dn-Zt*tn),K(te*wn+yr*dr)]}return Rr.invert=function(Xr,ti){var Fr=M(ti),li=M(Xr)*Fr,yr=A(Xr)*Fr,Zt=A(ti),te=Zt*wn-yr*dr;return[_(yr*wn+Zt*dr,li*dn+te*tn),K(te*dn-li*tn)]},Rr}var Ea=function(Pe){Pe=Aa(Pe[0]*b,Pe[1]*b,Pe.length>2?Pe[2]*b:0);function dn(tn){return tn=Pe(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn}return dn.invert=function(tn){return tn=Pe.invert(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn},dn};function so(we,Pe,dn,tn,wn,dr){if(!!dn){var Rr=M(Pe),Xr=A(Pe),ti=tn*dn;wn==null?(wn=Pe+tn*f,dr=Pe-ti/2):(wn=Ko(Rr,wn),dr=Ko(Rr,dr),(tn>0?wn<dr:wn>dr)&&(wn+=tn*f));for(var Fr,li=wn;tn>0?li>dr:li<dr;li-=ti)Fr=xt([Rr,-Xr*M(li),-Xr*A(li)]),we.point(Fr[0],Fr[1])}}function Ko(we,Pe){Pe=H(Pe),Pe[0]-=we,yt(Pe);var dn=F(-Pe[1]);return((-Pe[2]<0?-dn:dn)+f-n)%f}var no=function(){var Pe=vr([0,0]),dn=vr(90),tn=vr(6),wn,dr,Rr={point:Xr};function Xr(Fr,li){wn.push(Fr=dr(Fr,li)),Fr[0]*=v,Fr[1]*=v}function ti(){var Fr=Pe.apply(this,arguments),li=dn.apply(this,arguments)*b,yr=tn.apply(this,arguments)*b;return wn=[],dr=Aa(-Fr[0]*b,-Fr[1]*b,0).invert,so(Rr,li,yr,1),Fr={type:"Polygon",coordinates:[wn]},wn=dr=null,Fr}return ti.center=function(Fr){return arguments.length?(Pe=typeof Fr=="function"?Fr:vr([+Fr[0],+Fr[1]]),ti):Pe},ti.radius=function(Fr){return arguments.length?(dn=typeof Fr=="function"?Fr:vr(+Fr),ti):dn},ti.precision=function(Fr){return arguments.length?(tn=typeof Fr=="function"?Fr:vr(+Fr),ti):tn},ti},So=function(){var Pe=[],dn;return{point:function(wn,dr){dn.push([wn,dr])},lineStart:function(){Pe.push(dn=[])},lineEnd:k,rejoin:function(){Pe.length>1&&Pe.push(Pe.pop().concat(Pe.shift()))},result:function(){var wn=Pe;return Pe=[],dn=null,wn}}},cs=function(Pe,dn,tn,wn,dr,Rr){var Xr=Pe[0],ti=Pe[1],Fr=dn[0],li=dn[1],yr=0,Zt=1,te=Fr-Xr,Le=li-ti,Se;if(Se=tn-Xr,!(!te&&Se>0)){if(Se/=te,te<0){if(Se<yr)return;Se<Zt&&(Zt=Se)}else if(te>0){if(Se>Zt)return;Se>yr&&(yr=Se)}if(Se=dr-Xr,!(!te&&Se<0)){if(Se/=te,te<0){if(Se>Zt)return;Se>yr&&(yr=Se)}else if(te>0){if(Se<yr)return;Se<Zt&&(Zt=Se)}if(Se=wn-ti,!(!Le&&Se>0)){if(Se/=Le,Le<0){if(Se<yr)return;Se<Zt&&(Zt=Se)}else if(Le>0){if(Se>Zt)return;Se>yr&&(yr=Se)}if(Se=Rr-ti,!(!Le&&Se<0)){if(Se/=Le,Le<0){if(Se>Zt)return;Se>yr&&(yr=Se)}else if(Le>0){if(Se<yr)return;Se<Zt&&(Zt=Se)}return yr>0&&(Pe[0]=Xr+yr*te,Pe[1]=ti+yr*Le),Zt<1&&(dn[0]=Xr+Zt*te,dn[1]=ti+Zt*Le),!0}}}}},wa=function(Pe,dn){return y(Pe[0]-dn[0])<n&&y(Pe[1]-dn[1])<n};function zo(we,Pe,dn,tn){this.x=we,this.z=Pe,this.o=dn,this.e=tn,this.v=!1,this.n=this.p=null}var Ro=function(Pe,dn,tn,wn,dr){var Rr=[],Xr=[],ti,Fr;if(Pe.forEach(function(Se){if(!((Dt=Se.length-1)<=0)){var Dt,zt=Se[0],se=Se[Dt],re;if(wa(zt,se)){for(dr.lineStart(),ti=0;ti<Dt;++ti)dr.point((zt=Se[ti])[0],zt[1]);dr.lineEnd();return}Rr.push(re=new zo(zt,Se,null,!0)),Xr.push(re.o=new zo(zt,null,re,!1)),Rr.push(re=new zo(se,Se,null,!1)),Xr.push(re.o=new zo(se,null,re,!0))}}),!!Rr.length){for(Xr.sort(dn),fu(Rr),fu(Xr),ti=0,Fr=Xr.length;ti<Fr;++ti)Xr[ti].e=tn=!tn;for(var li=Rr[0],yr,Zt;;){for(var te=li,Le=!0;te.v;)if((te=te.n)===li)return;yr=te.z,dr.lineStart();do{if(te.v=te.o.v=!0,te.e){if(Le)for(ti=0,Fr=yr.length;ti<Fr;++ti)dr.point((Zt=yr[ti])[0],Zt[1]);else wn(te.x,te.n.x,1,dr);te=te.n}else{if(Le)for(yr=te.p.z,ti=yr.length-1;ti>=0;--ti)dr.point((Zt=yr[ti])[0],Zt[1]);else wn(te.x,te.p.x,-1,dr);te=te.p}te=te.o,yr=te.z,Le=!Le}while(!te.v);dr.lineEnd()}}};function fu(we){if(!!(Pe=we.length)){for(var Pe,dn=0,tn=we[0],wn;++dn<Pe;)tn.n=wn=we[dn],wn.p=tn,tn=wn;tn.n=wn=we[0],wn.p=tn}}var Xo=1e9,au=-Xo;function $s(we,Pe,dn,tn){function wn(Fr,li){return we<=Fr&&Fr<=dn&&Pe<=li&&li<=tn}function dr(Fr,li,yr,Zt){var te=0,Le=0;if(Fr==null||(te=Rr(Fr,yr))!==(Le=Rr(li,yr))||ti(Fr,li)<0^yr>0)do Zt.point(te===0||te===3?we:dn,te>1?tn:Pe);while((te=(te+yr+4)%4)!==Le);else Zt.point(li[0],li[1])}function Rr(Fr,li){return y(Fr[0]-we)<n?li>0?0:3:y(Fr[0]-dn)<n?li>0?2:1:y(Fr[1]-Pe)<n?li>0?1:0:li>0?3:2}function Xr(Fr,li){return ti(Fr.x,li.x)}function ti(Fr,li){var yr=Rr(Fr,1),Zt=Rr(li,1);return yr!==Zt?yr-Zt:yr===0?li[1]-Fr[1]:yr===1?Fr[0]-li[0]:yr===2?Fr[1]-li[1]:li[0]-Fr[0]}return function(Fr){var li=Fr,yr=So(),Zt,te,Le,Se,Dt,zt,se,re,fe,Fe,Ke,rn={point:Je,lineStart:Vn,lineEnd:Zn,polygonStart:hn,polygonEnd:Jn};function Je(cr,xr){wn(cr,xr)&&li.point(cr,xr)}function pn(){for(var cr=0,xr=0,Hr=te.length;xr<Hr;++xr)for(var mi=te[xr],Br=1,ui=mi.length,_i=mi[0],Zi,Ri,Ma=_i[0],ga=_i[1];Br<ui;++Br)Zi=Ma,Ri=ga,_i=mi[Br],Ma=_i[0],ga=_i[1],Ri<=tn?ga>tn&&(Ma-Zi)*(tn-Ri)>(ga-Ri)*(we-Zi)&&++cr:ga<=tn&&(Ma-Zi)*(tn-Ri)<(ga-Ri)*(we-Zi)&&--cr;return cr}function hn(){li=yr,Zt=[],te=[],Ke=!0}function Jn(){var cr=pn(),xr=Ke&&cr,Hr=(Zt=l.merge(Zt)).length;(xr||Hr)&&(Fr.polygonStart(),xr&&(Fr.lineStart(),dr(null,null,1,Fr),Fr.lineEnd()),Hr&&Ro(Zt,Xr,cr,dr,Fr),Fr.polygonEnd()),li=Fr,Zt=te=Le=null}function Vn(){rn.point=Wn,te&&te.push(Le=[]),Fe=!0,fe=!1,se=re=NaN}function Zn(){Zt&&(Wn(Se,Dt),zt&&fe&&yr.rejoin(),Zt.push(yr.result())),rn.point=Je,fe&&li.lineEnd()}function Wn(cr,xr){var Hr=wn(cr,xr);if(te&&Le.push([cr,xr]),Fe)Se=cr,Dt=xr,zt=Hr,Fe=!1,Hr&&(li.lineStart(),li.point(cr,xr));else if(Hr&&fe)li.point(cr,xr);else{var mi=[se=Math.max(au,Math.min(Xo,se)),re=Math.max(au,Math.min(Xo,re))],Br=[cr=Math.max(au,Math.min(Xo,cr)),xr=Math.max(au,Math.min(Xo,xr))];cs(mi,Br,we,Pe,dn,tn)?(fe||(li.lineStart(),li.point(mi[0],mi[1])),li.point(Br[0],Br[1]),Hr||li.lineEnd(),Ke=!1):Hr&&(li.lineStart(),li.point(cr,xr),Ke=!1)}se=cr,re=xr,fe=Hr}return rn}}var Ne=function(){var Pe=0,dn=0,tn=960,wn=500,dr,Rr,Xr;return Xr={stream:function(Fr){return dr&&Rr===Fr?dr:dr=$s(Pe,dn,tn,wn)(Rr=Fr)},extent:function(Fr){return arguments.length?(Pe=+Fr[0][0],dn=+Fr[0][1],tn=+Fr[1][0],wn=+Fr[1][1],dr=Rr=null,Xr):[[Pe,dn],[tn,wn]]}}},oe=s(),Ht=function(Pe,dn){var tn=dn[0],wn=dn[1],dr=[A(tn),-M(tn),0],Rr=0,Xr=0;oe.reset();for(var ti=0,Fr=Pe.length;ti<Fr;++ti)if(!!(yr=(li=Pe[ti]).length))for(var li,yr,Zt=li[yr-1],te=Zt[0],Le=Zt[1]/2+u,Se=A(Le),Dt=M(Le),zt=0;zt<yr;++zt,te=re,Se=Fe,Dt=Ke,Zt=se){var se=li[zt],re=se[0],fe=se[1]/2+u,Fe=A(fe),Ke=M(fe),rn=re-te,Je=rn>=0?1:-1,pn=Je*rn,hn=pn>a,Jn=Se*Fe;if(oe.add(_(Jn*Je*A(pn),Dt*Ke+Jn*M(pn))),Rr+=hn?rn+Je*f:rn,hn^te>=tn^re>=tn){var Vn=at(H(Zt),H(se));yt(Vn);var Zn=at(dr,Vn);yt(Zn);var Wn=(hn^rn>=0?-1:1)*K(Zn[2]);(wn>Wn||wn===Wn&&(Vn[0]||Vn[1]))&&(Xr+=hn^rn>=0?1:-1)}}return(Rr<-n||Rr<n&&oe<-n)^Xr&1},Ee=s(),an,zn,qn,Un={sphere:k,point:k,lineStart:Jr,lineEnd:k,polygonStart:k,polygonEnd:k};function Jr(){Un.point=Ci,Un.lineEnd=Si}function Si(){Un.point=Un.lineEnd=k}function Ci(we,Pe){we*=b,Pe*=b,an=we,zn=A(Pe),qn=M(Pe),Un.point=ki}function ki(we,Pe){we*=b,Pe*=b;var dn=A(Pe),tn=M(Pe),wn=y(we-an),dr=M(wn),Rr=A(wn),Xr=tn*Rr,ti=qn*dn-zn*tn*dr,Fr=zn*dn+qn*tn*dr;Ee.add(_(L(Xr*Xr+ti*ti),Fr)),an=we,zn=dn,qn=tn}var oa=function(Pe){return Ee.reset(),ut(Pe,Un),+Ee},Xa=[null,null],ma={type:"LineString",coordinates:Xa},mo=function(Pe,dn){return Xa[0]=Pe,Xa[1]=dn,oa(ma)},Ba={Feature:function(Pe,dn){return yo(Pe.geometry,dn)},FeatureCollection:function(Pe,dn){for(var tn=Pe.features,wn=-1,dr=tn.length;++wn<dr;)if(yo(tn[wn].geometry,dn))return!0;return!1}},ao={Sphere:function(){return!0},Point:function(Pe,dn){return Ja(Pe.coordinates,dn)},MultiPoint:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)if(Ja(tn[wn],dn))return!0;return!1},LineString:function(Pe,dn){return _o(Pe.coordinates,dn)},MultiLineString:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)if(_o(tn[wn],dn))return!0;return!1},Polygon:function(Pe,dn){return ts(Pe.coordinates,dn)},MultiPolygon:function(Pe,dn){for(var tn=Pe.coordinates,wn=-1,dr=tn.length;++wn<dr;)if(ts(tn[wn],dn))return!0;return!1},GeometryCollection:function(Pe,dn){for(var tn=Pe.geometries,wn=-1,dr=tn.length;++wn<dr;)if(yo(tn[wn],dn))return!0;return!1}};function yo(we,Pe){return we&&ao.hasOwnProperty(we.type)?ao[we.type](we,Pe):!1}function Ja(we,Pe){return mo(we,Pe)===0}function _o(we,Pe){var dn=mo(we[0],we[1]),tn=mo(we[0],Pe),wn=mo(Pe,we[1]);return tn+wn<=dn+n}function ts(we,Pe){return!!Ht(we.map(Do),xs(Pe))}function Do(we){return we=we.map(xs),we.pop(),we}function xs(we){return[we[0]*b,we[1]*b]}var Mo=function(Pe,dn){return(Pe&&Ba.hasOwnProperty(Pe.type)?Ba[Pe.type]:yo)(Pe,dn)};function $a(we,Pe,dn){var tn=l.range(we,Pe-n,dn).concat(Pe);return function(wn){return tn.map(function(dr){return[wn,dr]})}}function Ms(we,Pe,dn){var tn=l.range(we,Pe-n,dn).concat(Pe);return function(wn){return tn.map(function(dr){return[dr,wn]})}}function as(){var we,Pe,dn,tn,wn,dr,Rr,Xr,ti=10,Fr=ti,li=90,yr=360,Zt,te,Le,Se,Dt=2.5;function zt(){return{type:"MultiLineString",coordinates:se()}}function se(){return l.range(x(tn/li)*li,dn,li).map(Le).concat(l.range(x(Xr/yr)*yr,Rr,yr).map(Se)).concat(l.range(x(Pe/ti)*ti,we,ti).filter(function(re){return y(re%li)>n}).map(Zt)).concat(l.range(x(dr/Fr)*Fr,wn,Fr).filter(function(re){return y(re%yr)>n}).map(te))}return zt.lines=function(){return se().map(function(re){return{type:"LineString",coordinates:re}})},zt.outline=function(){return{type:"Polygon",coordinates:[Le(tn).concat(Se(Rr).slice(1),Le(dn).reverse().slice(1),Se(Xr).reverse().slice(1))]}},zt.extent=function(re){return arguments.length?zt.extentMajor(re).extentMinor(re):zt.extentMinor()},zt.extentMajor=function(re){return arguments.length?(tn=+re[0][0],dn=+re[1][0],Xr=+re[0][1],Rr=+re[1][1],tn>dn&&(re=tn,tn=dn,dn=re),Xr>Rr&&(re=Xr,Xr=Rr,Rr=re),zt.precision(Dt)):[[tn,Xr],[dn,Rr]]},zt.extentMinor=function(re){return arguments.length?(Pe=+re[0][0],we=+re[1][0],dr=+re[0][1],wn=+re[1][1],Pe>we&&(re=Pe,Pe=we,we=re),dr>wn&&(re=dr,dr=wn,wn=re),zt.precision(Dt)):[[Pe,dr],[we,wn]]},zt.step=function(re){return arguments.length?zt.stepMajor(re).stepMinor(re):zt.stepMinor()},zt.stepMajor=function(re){return arguments.length?(li=+re[0],yr=+re[1],zt):[li,yr]},zt.stepMinor=function(re){return arguments.length?(ti=+re[0],Fr=+re[1],zt):[ti,Fr]},zt.precision=function(re){return arguments.length?(Dt=+re,Zt=$a(dr,wn,90),te=Ms(Pe,we,Dt),Le=$a(Xr,Rr,90),Se=Ms(tn,dn,Dt),zt):Dt},zt.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Ca(){return as()()}var mn=function(Pe,dn){var tn=Pe[0]*b,wn=Pe[1]*b,dr=dn[0]*b,Rr=dn[1]*b,Xr=M(wn),ti=A(wn),Fr=M(Rr),li=A(Rr),yr=Xr*M(tn),Zt=Xr*A(tn),te=Fr*M(dr),Le=Fr*A(dr),Se=2*K(L(V(Rr-wn)+Xr*Fr*V(dr-tn))),Dt=A(Se),zt=Se?function(se){var re=A(se*=Se)/Dt,fe=A(Se-se)/Dt,Fe=fe*yr+re*te,Ke=fe*Zt+re*Le,rn=fe*ti+re*li;return[_(Ke,Fe)*v,_(rn,L(Fe*Fe+Ke*Ke))*v]}:function(){return[tn*v,wn*v]};return zt.distance=Se,zt},hr=function(Pe){return Pe},Gr=s(),Ui=s(),Ka,xo,vo,qi,Qa={point:k,lineStart:k,lineEnd:k,polygonStart:function(){Qa.lineStart=bs,Qa.lineEnd=Pu},polygonEnd:function(){Qa.lineStart=Qa.lineEnd=Qa.point=k,Gr.add(y(Ui)),Ui.reset()},result:function(){var Pe=Gr/2;return Gr.reset(),Pe}};function bs(){Qa.point=Es}function Es(we,Pe){Qa.point=Ga,Ka=vo=we,xo=qi=Pe}function Ga(we,Pe){Ui.add(qi*we-vo*Pe),vo=we,qi=Pe}function Pu(){Ga(Ka,xo)}var Uo=Infinity,Ps=Uo,Qs=-Uo,fs=Qs,hs={point:os,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var Pe=[[Uo,Ps],[Qs,fs]];return Qs=fs=-(Ps=Uo=Infinity),Pe}};function os(we,Pe){we<Uo&&(Uo=we),we>Qs&&(Qs=we),Pe<Ps&&(Ps=Pe),Pe>fs&&(fs=Pe)}var ds=0,Ts=0,Ou=0,Uu=0,uo=0,Fs=0,ku=0,ul=0,ll=0,Qu,To,La,ya,wo={point:pu,lineStart:El,lineEnd:ou,polygonStart:function(){wo.lineStart=qs,wo.lineEnd=Ls},polygonEnd:function(){wo.point=pu,wo.lineStart=El,wo.lineEnd=ou},result:function(){var Pe=ll?[ku/ll,ul/ll]:Fs?[Uu/Fs,uo/Fs]:Ou?[ds/Ou,Ts/Ou]:[NaN,NaN];return ds=Ts=Ou=Uu=uo=Fs=ku=ul=ll=0,Pe}};function pu(we,Pe){ds+=we,Ts+=Pe,++Ou}function El(){wo.point=zs}function zs(we,Pe){wo.point=Ss,pu(La=we,ya=Pe)}function Ss(we,Pe){var dn=we-La,tn=Pe-ya,wn=L(dn*dn+tn*tn);Uu+=wn*(La+we)/2,uo+=wn*(ya+Pe)/2,Fs+=wn,pu(La=we,ya=Pe)}function ou(){wo.point=pu}function qs(){wo.point=qu}function Ls(){su(Qu,To)}function qu(we,Pe){wo.point=su,pu(Qu=La=we,To=ya=Pe)}function su(we,Pe){var dn=we-La,tn=Pe-ya,wn=L(dn*dn+tn*tn);Uu+=wn*(La+we)/2,uo+=wn*(ya+Pe)/2,Fs+=wn,wn=ya*we-La*Pe,ku+=wn*(La+we),ul+=wn*(ya+Pe),ll+=wn*3,pu(La=we,ya=Pe)}function Wa(we){this._context=we}Wa.prototype={_radius:4.5,pointRadius:function(Pe){return this._radius=Pe,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Pe,dn){switch(this._point){case 0:{this._context.moveTo(Pe,dn),this._point=1;break}case 1:{this._context.lineTo(Pe,dn);break}default:{this._context.moveTo(Pe+this._radius,dn),this._context.arc(Pe,dn,this._radius,0,f);break}}},result:k};var Sl=s(),Ql,_l,ql,Gu,Ha,uu={point:k,lineStart:function(){uu.point=Ml},lineEnd:function(){Ql&&vs(_l,ql),uu.point=k},polygonStart:function(){Ql=!0},polygonEnd:function(){Ql=null},result:function(){var Pe=+Sl;return Sl.reset(),Pe}};function Ml(we,Pe){uu.point=vs,_l=Gu=we,ql=Ha=Pe}function vs(we,Pe){Gu-=we,Ha-=Pe,Sl.add(L(Gu*Gu+Ha*Ha)),Gu=we,Ha=Pe}function wu(){this._string=[]}wu.prototype={_radius:4.5,_circle:gu(4.5),pointRadius:function(Pe){return(Pe=+Pe)!==this._radius&&(this._radius=Pe,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Pe,dn){switch(this._point){case 0:{this._string.push("M",Pe,",",dn),this._point=1;break}case 1:{this._string.push("L",Pe,",",dn);break}default:{this._circle==null&&(this._circle=gu(this._radius)),this._string.push("M",Pe,",",dn,this._circle);break}}},result:function(){if(this._string.length){var Pe=this._string.join("");return this._string=[],Pe}else return null}};function gu(we){return"m0,"+we+"a"+we+","+we+" 0 1,1 0,"+-2*we+"a"+we+","+we+" 0 1,1 0,"+2*we+"z"}var Vu=function(Pe,dn){var tn=4.5,wn,dr;function Rr(Xr){return Xr&&(typeof tn=="function"&&dr.pointRadius(+tn.apply(this,arguments)),ut(Xr,wn(dr))),dr.result()}return Rr.area=function(Xr){return ut(Xr,wn(Qa)),Qa.result()},Rr.measure=function(Xr){return ut(Xr,wn(uu)),uu.result()},Rr.bounds=function(Xr){return ut(Xr,wn(hs)),hs.result()},Rr.centroid=function(Xr){return ut(Xr,wn(wo)),wo.result()},Rr.projection=function(Xr){return arguments.length?(wn=Xr==null?(Pe=null,hr):(Pe=Xr).stream,Rr):Pe},Rr.context=function(Xr){return arguments.length?(dr=Xr==null?(dn=null,new wu):new Wa(dn=Xr),typeof tn!="function"&&dr.pointRadius(tn),Rr):dn},Rr.pointRadius=function(Xr){return arguments.length?(tn=typeof Xr=="function"?Xr:(dr.pointRadius(+Xr),+Xr),Rr):tn},Rr.projection(Pe).context(dn)},Ws=function(Pe,dn,tn,wn){return function(dr,Rr){var Xr=dn(Rr),ti=dr.invert(wn[0],wn[1]),Fr=So(),li=dn(Fr),yr=!1,Zt,te,Le,Se={point:Dt,lineStart:se,lineEnd:re,polygonStart:function(){Se.point=fe,Se.lineStart=Fe,Se.lineEnd=Ke,te=[],Zt=[]},polygonEnd:function(){Se.point=Dt,Se.lineStart=se,Se.lineEnd=re,te=l.merge(te);var Je=Ht(Zt,ti);te.length?(yr||(Rr.polygonStart(),yr=!0),Ro(te,ss,Je,tn,Rr)):Je&&(yr||(Rr.polygonStart(),yr=!0),Rr.lineStart(),tn(null,null,1,Rr),Rr.lineEnd()),yr&&(Rr.polygonEnd(),yr=!1),te=Zt=null},sphere:function(){Rr.polygonStart(),Rr.lineStart(),tn(null,null,1,Rr),Rr.lineEnd(),Rr.polygonEnd()}};function Dt(rn,Je){var pn=dr(rn,Je);Pe(rn=pn[0],Je=pn[1])&&Rr.point(rn,Je)}function zt(rn,Je){var pn=dr(rn,Je);Xr.point(pn[0],pn[1])}function se(){Se.point=zt,Xr.lineStart()}function re(){Se.point=Dt,Xr.lineEnd()}function fe(rn,Je){Le.push([rn,Je]);var pn=dr(rn,Je);li.point(pn[0],pn[1])}function Fe(){li.lineStart(),Le=[]}function Ke(){fe(Le[0][0],Le[0][1]),li.lineEnd();var rn=li.clean(),Je=Fr.result(),pn,hn=Je.length,Jn,Vn,Zn;if(Le.pop(),Zt.push(Le),Le=null,!!hn){if(rn&1){if(Vn=Je[0],(Jn=Vn.length-1)>0){for(yr||(Rr.polygonStart(),yr=!0),Rr.lineStart(),pn=0;pn<Jn;++pn)Rr.point((Zn=Vn[pn])[0],Zn[1]);Rr.lineEnd()}return}hn>1&&rn&2&&Je.push(Je.pop().concat(Je.shift())),te.push(Je.filter(Jo))}}return Se}};function Jo(we){return we.length>1}function ss(we,Pe){return((we=we.x)[0]<0?we[1]-o-n:o-we[1])-((Pe=Pe.x)[0]<0?Pe[1]-o-n:o-Pe[1])}var cl=Ws(function(){return!0},Rl,Wu,[-a,-o]);function Rl(we){var Pe=NaN,dn=NaN,tn=NaN,wn;return{lineStart:function(){we.lineStart(),wn=1},point:function(Rr,Xr){var ti=Rr>0?a:-a,Fr=y(Rr-Pe);y(Fr-a)<n?(we.point(Pe,dn=(dn+Xr)/2>0?o:-o),we.point(tn,dn),we.lineEnd(),we.lineStart(),we.point(ti,dn),we.point(Rr,dn),wn=0):tn!==ti&&Fr>=a&&(y(Pe-tn)<n&&(Pe-=tn*n),y(Rr-ti)<n&&(Rr-=ti*n),dn=tc(Pe,dn,Rr,Xr),we.point(tn,dn),we.lineEnd(),we.lineStart(),we.point(ti,dn),wn=0),we.point(Pe=Rr,dn=Xr),tn=ti},lineEnd:function(){we.lineEnd(),Pe=dn=NaN},clean:function(){return 2-wn}}}function tc(we,Pe,dn,tn){var wn,dr,Rr=A(we-dn);return y(Rr)>n?g((A(Pe)*(dr=M(tn))*A(dn)-A(tn)*(wn=M(Pe))*A(we))/(wn*dr*Rr)):(Pe+tn)/2}function Wu(we,Pe,dn,tn){var wn;if(we==null)wn=dn*o,tn.point(-a,wn),tn.point(0,wn),tn.point(a,wn),tn.point(a,0),tn.point(a,-wn),tn.point(0,-wn),tn.point(-a,-wn),tn.point(-a,0),tn.point(-a,wn);else if(y(we[0]-Pe[0])>n){var dr=we[0]<Pe[0]?a:-a;wn=dn*dr/2,tn.point(-dr,wn),tn.point(0,wn),tn.point(dr,wn)}else tn.point(Pe[0],Pe[1])}var tl=function(Pe,dn){var tn=M(Pe),wn=tn>0,dr=y(tn)>n;function Rr(yr,Zt,te,Le){so(Le,Pe,dn,te,yr,Zt)}function Xr(yr,Zt){return M(yr)*M(Zt)>tn}function ti(yr){var Zt,te,Le,Se,Dt;return{lineStart:function(){Se=Le=!1,Dt=1},point:function(se,re){var fe=[se,re],Fe,Ke=Xr(se,re),rn=wn?Ke?0:li(se,re):Ke?li(se+(se<0?a:-a),re):0;if(!Zt&&(Se=Le=Ke)&&yr.lineStart(),Ke!==Le&&(Fe=Fr(Zt,fe),(!Fe||wa(Zt,Fe)||wa(fe,Fe))&&(fe[0]+=n,fe[1]+=n,Ke=Xr(fe[0],fe[1]))),Ke!==Le)Dt=0,Ke?(yr.lineStart(),Fe=Fr(fe,Zt),yr.point(Fe[0],Fe[1])):(Fe=Fr(Zt,fe),yr.point(Fe[0],Fe[1]),yr.lineEnd()),Zt=Fe;else if(dr&&Zt&&wn^Ke){var Je;!(rn&te)&&(Je=Fr(fe,Zt,!0))&&(Dt=0,wn?(yr.lineStart(),yr.point(Je[0][0],Je[0][1]),yr.point(Je[1][0],Je[1][1]),yr.lineEnd()):(yr.point(Je[1][0],Je[1][1]),yr.lineEnd(),yr.lineStart(),yr.point(Je[0][0],Je[0][1])))}Ke&&(!Zt||!wa(Zt,fe))&&yr.point(fe[0],fe[1]),Zt=fe,Le=Ke,te=rn},lineEnd:function(){Le&&yr.lineEnd(),Zt=null},clean:function(){return Dt|(Se&&Le)<<1}}}function Fr(yr,Zt,te){var Le=H(yr),Se=H(Zt),Dt=[1,0,0],zt=at(Le,Se),se=nt(zt,zt),re=zt[0],fe=se-re*re;if(!fe)return!te&&yr;var Fe=tn*se/fe,Ke=-tn*re/fe,rn=at(Dt,zt),Je=_t(Dt,Fe),pn=_t(zt,Ke);q(Je,pn);var hn=rn,Jn=nt(Je,hn),Vn=nt(hn,hn),Zn=Jn*Jn-Vn*(nt(Je,Je)-1);if(!(Zn<0)){var Wn=L(Zn),cr=_t(hn,(-Jn-Wn)/Vn);if(q(cr,Je),cr=xt(cr),!te)return cr;var xr=yr[0],Hr=Zt[0],mi=yr[1],Br=Zt[1],ui;Hr<xr&&(ui=xr,xr=Hr,Hr=ui);var _i=Hr-xr,Zi=y(_i-a)<n,Ri=Zi||_i<n;if(!Zi&&Br<mi&&(ui=mi,mi=Br,Br=ui),Ri?Zi?mi+Br>0^cr[1]<(y(cr[0]-xr)<n?mi:Br):mi<=cr[1]&&cr[1]<=Br:_i>a^(xr<=cr[0]&&cr[0]<=Hr)){var Ma=_t(hn,(-Jn+Wn)/Vn);return q(Ma,Je),[cr,xt(Ma)]}}}function li(yr,Zt){var te=wn?Pe:a-Pe,Le=0;return yr<-te?Le|=1:yr>te&&(Le|=2),Zt<-te?Le|=4:Zt>te&&(Le|=8),Le}return Ws(Xr,ti,Rr,wn?[0,-Pe]:[-a,Pe-a])},Iu=function(Pe){return{stream:Lu(Pe)}};function Lu(we){return function(Pe){var dn=new mu;for(var tn in we)dn[tn]=we[tn];return dn.stream=Pe,dn}}function mu(){}mu.prototype={constructor:mu,point:function(Pe,dn){this.stream.point(Pe,dn)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Hu(we,Pe,dn){var tn=Pe[1][0]-Pe[0][0],wn=Pe[1][1]-Pe[0][1],dr=we.clipExtent&&we.clipExtent();we.scale(150).translate([0,0]),dr!=null&&we.clipExtent(null),ut(dn,we.stream(hs));var Rr=hs.result(),Xr=Math.min(tn/(Rr[1][0]-Rr[0][0]),wn/(Rr[1][1]-Rr[0][1])),ti=+Pe[0][0]+(tn-Xr*(Rr[1][0]+Rr[0][0]))/2,Fr=+Pe[0][1]+(wn-Xr*(Rr[1][1]+Rr[0][1]))/2;return dr!=null&&we.clipExtent(dr),we.scale(Xr*150).translate([ti,Fr])}function Us(we,Pe,dn){return Hu(we,[[0,0],Pe],dn)}var Dl=16,hc=M(30*b),Pl=function(Pe,dn){return+dn?Bl(Pe,dn):jl(Pe)};function jl(we){return Lu({point:function(dn,tn){dn=we(dn,tn),this.stream.point(dn[0],dn[1])}})}function Bl(we,Pe){function dn(tn,wn,dr,Rr,Xr,ti,Fr,li,yr,Zt,te,Le,Se,Dt){var zt=Fr-tn,se=li-wn,re=zt*zt+se*se;if(re>4*Pe&&Se--){var fe=Rr+Zt,Fe=Xr+te,Ke=ti+Le,rn=L(fe*fe+Fe*Fe+Ke*Ke),Je=K(Ke/=rn),pn=y(y(Ke)-1)<n||y(dr-yr)<n?(dr+yr)/2:_(Fe,fe),hn=we(pn,Je),Jn=hn[0],Vn=hn[1],Zn=Jn-tn,Wn=Vn-wn,cr=se*Zn-zt*Wn;(cr*cr/re>Pe||y((zt*Zn+se*Wn)/re-.5)>.3||Rr*Zt+Xr*te+ti*Le<hc)&&(dn(tn,wn,dr,Rr,Xr,ti,Jn,Vn,pn,fe/=rn,Fe/=rn,Ke,Se,Dt),Dt.point(Jn,Vn),dn(Jn,Vn,pn,fe,Fe,Ke,Fr,li,yr,Zt,te,Le,Se,Dt))}}return function(tn){var wn,dr,Rr,Xr,ti,Fr,li,yr,Zt,te,Le,Se,Dt={point:zt,lineStart:se,lineEnd:fe,polygonStart:function(){tn.polygonStart(),Dt.lineStart=Fe},polygonEnd:function(){tn.polygonEnd(),Dt.lineStart=se}};function zt(Je,pn){Je=we(Je,pn),tn.point(Je[0],Je[1])}function se(){yr=NaN,Dt.point=re,tn.lineStart()}function re(Je,pn){var hn=H([Je,pn]),Jn=we(Je,pn);dn(yr,Zt,li,te,Le,Se,yr=Jn[0],Zt=Jn[1],li=Je,te=hn[0],Le=hn[1],Se=hn[2],Dl,tn),tn.point(yr,Zt)}function fe(){Dt.point=zt,tn.lineEnd()}function Fe(){se(),Dt.point=Ke,Dt.lineEnd=rn}function Ke(Je,pn){re(wn=Je,pn),dr=yr,Rr=Zt,Xr=te,ti=Le,Fr=Se,Dt.point=re}function rn(){dn(yr,Zt,li,te,Le,Se,dr,Rr,wn,Xr,ti,Fr,Dl,tn),Dt.lineEnd=fe,fe()}return Dt}}var sc=Lu({point:function(Pe,dn){this.stream.point(Pe*b,dn*b)}});function el(we){return Tl(function(){return we})()}function Tl(we){var Pe,dn=150,tn=480,wn=250,dr,Rr,Xr=0,ti=0,Fr=0,li=0,yr=0,Zt,te,Le=null,Se=cl,Dt=null,zt,se,re,fe=hr,Fe=.5,Ke=Pl(Jn,Fe),rn,Je;function pn(Wn){return Wn=te(Wn[0]*b,Wn[1]*b),[Wn[0]*dn+dr,Rr-Wn[1]*dn]}function hn(Wn){return Wn=te.invert((Wn[0]-dr)/dn,(Rr-Wn[1])/dn),Wn&&[Wn[0]*v,Wn[1]*v]}function Jn(Wn,cr){return Wn=Pe(Wn,cr),[Wn[0]*dn+dr,Rr-Wn[1]*dn]}pn.stream=function(Wn){return rn&&Je===Wn?rn:rn=sc(Se(Zt,Ke(fe(Je=Wn))))},pn.clipAngle=function(Wn){return arguments.length?(Se=+Wn?tl(Le=Wn*b,6*b):(Le=null,cl),Zn()):Le*v},pn.clipExtent=function(Wn){return arguments.length?(fe=Wn==null?(Dt=zt=se=re=null,hr):$s(Dt=+Wn[0][0],zt=+Wn[0][1],se=+Wn[1][0],re=+Wn[1][1]),Zn()):Dt==null?null:[[Dt,zt],[se,re]]},pn.scale=function(Wn){return arguments.length?(dn=+Wn,Vn()):dn},pn.translate=function(Wn){return arguments.length?(tn=+Wn[0],wn=+Wn[1],Vn()):[tn,wn]},pn.center=function(Wn){return arguments.length?(Xr=Wn[0]%360*b,ti=Wn[1]%360*b,Vn()):[Xr*v,ti*v]},pn.rotate=function(Wn){return arguments.length?(Fr=Wn[0]%360*b,li=Wn[1]%360*b,yr=Wn.length>2?Wn[2]%360*b:0,Vn()):[Fr*v,li*v,yr*v]},pn.precision=function(Wn){return arguments.length?(Ke=Pl(Jn,Fe=Wn*Wn),Zn()):L(Fe)},pn.fitExtent=function(Wn,cr){return Hu(pn,Wn,cr)},pn.fitSize=function(Wn,cr){return Us(pn,Wn,cr)};function Vn(){te=zr(Zt=Aa(Fr,li,yr),Pe);var Wn=Pe(Xr,ti);return dr=tn-Wn[0]*dn,Rr=wn+Wn[1]*dn,Zn()}function Zn(){return rn=Je=null,pn}return function(){return Pe=we.apply(this,arguments),pn.invert=Pe.invert&&hn,Vn()}}function Nl(we){var Pe=0,dn=a/3,tn=Tl(we),wn=tn(Pe,dn);return wn.parallels=function(dr){return arguments.length?tn(Pe=dr[0]*b,dn=dr[1]*b):[Pe*v,dn*v]},wn}function tu(we){var Pe=M(we);function dn(tn,wn){return[tn*Pe,A(wn)/Pe]}return dn.invert=function(tn,wn){return[tn/Pe,K(wn*Pe)]},dn}function po(we,Pe){var dn=A(we),tn=(dn+A(Pe))/2;if(y(tn)<n)return tu(we);var wn=1+dn*(2*tn-dn),dr=L(wn)/tn;function Rr(Xr,ti){var Fr=L(wn-2*tn*A(ti))/tn;return[Fr*A(Xr*=tn),dr-Fr*M(Xr)]}return Rr.invert=function(Xr,ti){var Fr=dr-ti;return[_(Xr,y(Fr))/tn*O(Fr),K((wn-(Xr*Xr+Fr*Fr)*tn*tn)/(2*tn))]},Rr}var pl=function(){return Nl(po).scale(155.424).center([0,33.6442])},fl=function(){return pl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Hs(we){var Pe=we.length;return{point:function(tn,wn){for(var dr=-1;++dr<Pe;)we[dr].point(tn,wn)},sphere:function(){for(var tn=-1;++tn<Pe;)we[tn].sphere()},lineStart:function(){for(var tn=-1;++tn<Pe;)we[tn].lineStart()},lineEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].lineEnd()},polygonStart:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonStart()},polygonEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonEnd()}}}var Da=function(){var Pe,dn,tn=fl(),wn,dr=pl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Rr,Xr=pl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ti,Fr,li={point:function(Le,Se){Fr=[Le,Se]}};function yr(te){var Le=te[0],Se=te[1];return Fr=null,wn.point(Le,Se),Fr||(Rr.point(Le,Se),Fr)||(ti.point(Le,Se),Fr)}yr.invert=function(te){var Le=tn.scale(),Se=tn.translate(),Dt=(te[0]-Se[0])/Le,zt=(te[1]-Se[1])/Le;return(zt>=.12&&zt<.234&&Dt>=-.425&&Dt<-.214?dr:zt>=.166&&zt<.234&&Dt>=-.214&&Dt<-.115?Xr:tn).invert(te)},yr.stream=function(te){return Pe&&dn===te?Pe:Pe=Hs([tn.stream(dn=te),dr.stream(te),Xr.stream(te)])},yr.precision=function(te){return arguments.length?(tn.precision(te),dr.precision(te),Xr.precision(te),Zt()):tn.precision()},yr.scale=function(te){return arguments.length?(tn.scale(te),dr.scale(te*.35),Xr.scale(te),yr.translate(tn.translate())):tn.scale()},yr.translate=function(te){if(!arguments.length)return tn.translate();var Le=tn.scale(),Se=+te[0],Dt=+te[1];return wn=tn.translate(te).clipExtent([[Se-.455*Le,Dt-.238*Le],[Se+.455*Le,Dt+.238*Le]]).stream(li),Rr=dr.translate([Se-.307*Le,Dt+.201*Le]).clipExtent([[Se-.425*Le+n,Dt+.12*Le+n],[Se-.214*Le-n,Dt+.234*Le-n]]).stream(li),ti=Xr.translate([Se-.205*Le,Dt+.212*Le]).clipExtent([[Se-.214*Le+n,Dt+.166*Le+n],[Se-.115*Le-n,Dt+.234*Le-n]]).stream(li),Zt()},yr.fitExtent=function(te,Le){return Hu(yr,te,Le)},yr.fitSize=function(te,Le){return Us(yr,te,Le)};function Zt(){return Pe=dn=null,yr}return yr.scale(1070)};function bo(we){return function(Pe,dn){var tn=M(Pe),wn=M(dn),dr=we(tn*wn);return[dr*wn*A(Pe),dr*A(dn)]}}function ks(we){return function(Pe,dn){var tn=L(Pe*Pe+dn*dn),wn=we(tn),dr=A(wn),Rr=M(wn);return[_(Pe*dr,tn*Rr),K(tn&&dn*dr/tn)]}}var gl=bo(function(we){return L(2/(1+we))});gl.invert=ks(function(we){return 2*K(we/2)});var nl=function(){return el(gl).scale(124.75).clipAngle(180-.001)},Yu=bo(function(we){return(we=F(we))&&we/A(we)});Yu.invert=ks(function(we){return we});var dc=function(){return el(Yu).scale(79.4188).clipAngle(180-.001)};function As(we,Pe){return[we,S(W((o+Pe)/2))]}As.invert=function(we,Pe){return[we,2*g(m(Pe))-o]};var rl=function(){return lu(As).scale(961/f)};function lu(we){var Pe=el(we),dn=Pe.center,tn=Pe.scale,wn=Pe.translate,dr=Pe.clipExtent,Rr=null,Xr,ti,Fr;Pe.scale=function(yr){return arguments.length?(tn(yr),li()):tn()},Pe.translate=function(yr){return arguments.length?(wn(yr),li()):wn()},Pe.center=function(yr){return arguments.length?(dn(yr),li()):dn()},Pe.clipExtent=function(yr){return arguments.length?(yr==null?Rr=Xr=ti=Fr=null:(Rr=+yr[0][0],Xr=+yr[0][1],ti=+yr[1][0],Fr=+yr[1][1]),li()):Rr==null?null:[[Rr,Xr],[ti,Fr]]};function li(){var yr=a*tn(),Zt=Pe(Ea(Pe.rotate()).invert([0,0]));return dr(Rr==null?[[Zt[0]-yr,Zt[1]-yr],[Zt[0]+yr,Zt[1]+yr]]:we===As?[[Math.max(Zt[0]-yr,Rr),Xr],[Math.min(Zt[0]+yr,ti),Fr]]:[[Rr,Math.max(Zt[1]-yr,Xr)],[ti,Math.min(Zt[1]+yr,Fr)]])}return li()}function Ys(we){return W((o+we)/2)}function $o(we,Pe){var dn=M(we),tn=we===Pe?A(we):S(dn/M(Pe))/S(Ys(Pe)/Ys(we)),wn=dn*P(Ys(we),tn)/tn;if(!tn)return As;function dr(Rr,Xr){wn>0?Xr<-o+n&&(Xr=-o+n):Xr>o-n&&(Xr=o-n);var ti=wn/P(Ys(Xr),tn);return[ti*A(tn*Rr),wn-ti*M(tn*Rr)]}return dr.invert=function(Rr,Xr){var ti=wn-Xr,Fr=O(tn)*L(Rr*Rr+ti*ti);return[_(Rr,y(ti))/tn*O(ti),2*g(P(wn/Fr,1/tn))-o]},dr}var eu=function(){return Nl($o).scale(109.5).parallels([30,30])};function Ru(we,Pe){return[we,Pe]}Ru.invert=Ru;var Qo=function(){return el(Ru).scale(152.63)};function Wi(we,Pe){var dn=M(we),tn=we===Pe?A(we):(dn-M(Pe))/(Pe-we),wn=dn/tn+we;if(y(tn)<n)return Ru;function dr(Rr,Xr){var ti=wn-Xr,Fr=tn*Rr;return[ti*A(Fr),wn-ti*M(Fr)]}return dr.invert=function(Rr,Xr){var ti=wn-Xr;return[_(Rr,y(ti))/tn*O(ti),wn-O(tn)*L(Rr*Rr+ti*ti)]},dr}var Cs=function(){return Nl(Wi).scale(131.154).center([0,13.9389])};function Zu(we,Pe){var dn=M(Pe),tn=M(we)*dn;return[dn*A(we)/tn,A(Pe)/tn]}Zu.invert=ks(g);var Du=function(){return el(Zu).scale(144.049).clipAngle(60)};function jo(we,Pe,dn,tn){return we===1&&Pe===1&&dn===0&&tn===0?hr:Lu({point:function(dr,Rr){this.stream.point(dr*we+dn,Rr*Pe+tn)}})}var Bo=function(){var Pe=1,dn=0,tn=0,wn=1,dr=1,Rr=hr,Xr=null,ti,Fr,li,yr=hr,Zt,te,Le;function Se(){return Zt=te=null,Le}return Le={stream:function(zt){return Zt&&te===zt?Zt:Zt=Rr(yr(te=zt))},clipExtent:function(zt){return arguments.length?(yr=zt==null?(Xr=ti=Fr=li=null,hr):$s(Xr=+zt[0][0],ti=+zt[0][1],Fr=+zt[1][0],li=+zt[1][1]),Se()):Xr==null?null:[[Xr,ti],[Fr,li]]},scale:function(zt){return arguments.length?(Rr=jo((Pe=+zt)*wn,Pe*dr,dn,tn),Se()):Pe},translate:function(zt){return arguments.length?(Rr=jo(Pe*wn,Pe*dr,dn=+zt[0],tn=+zt[1]),Se()):[dn,tn]},reflectX:function(zt){return arguments.length?(Rr=jo(Pe*(wn=zt?-1:1),Pe*dr,dn,tn),Se()):wn<0},reflectY:function(zt){return arguments.length?(Rr=jo(Pe*wn,Pe*(dr=zt?-1:1),dn,tn),Se()):dr<0},fitExtent:function(zt,se){return Hu(Le,zt,se)},fitSize:function(zt,se){return Us(Le,zt,se)}}};function Tu(we,Pe){return[M(Pe)*A(we),A(Pe)]}Tu.invert=ks(K);var Mi=function(){return el(Tu).scale(249.5).clipAngle(90+n)};function il(we,Pe){var dn=M(Pe),tn=1+M(we)*dn;return[dn*A(we)/tn,A(Pe)/tn]}il.invert=ks(function(we){return 2*g(we)});var ju=function(){return el(il).scale(250).clipAngle(142)};function Bu(we,Pe){return[S(W((o+Pe)/2)),-we]}Bu.invert=function(we,Pe){return[-Pe,2*g(m(we))-o]};var nu=function(){var Pe=lu(Bu),dn=Pe.center,tn=Pe.rotate;return Pe.center=function(wn){return arguments.length?dn([-wn[1],wn[0]]):(wn=dn(),[wn[1],-wn[0]])},Pe.rotate=function(wn){return arguments.length?tn([wn[0],wn[1],wn.length>2?wn[2]+90:90]):(wn=tn(),[wn[0],wn[1],wn[2]-90])},tn([0,0,90]).scale(159.155)};t.geoArea=ot,t.geoBounds=Jt,t.geoCentroid=Dr,t.geoCircle=no,t.geoClipExtent=Ne,t.geoContains=Mo,t.geoDistance=mo,t.geoGraticule=as,t.geoGraticule10=Ca,t.geoInterpolate=mn,t.geoLength=oa,t.geoPath=Vu,t.geoAlbers=fl,t.geoAlbersUsa=Da,t.geoAzimuthalEqualArea=nl,t.geoAzimuthalEqualAreaRaw=gl,t.geoAzimuthalEquidistant=dc,t.geoAzimuthalEquidistantRaw=Yu,t.geoConicConformal=eu,t.geoConicConformalRaw=$o,t.geoConicEqualArea=pl,t.geoConicEqualAreaRaw=po,t.geoConicEquidistant=Cs,t.geoConicEquidistantRaw=Wi,t.geoEquirectangular=Qo,t.geoEquirectangularRaw=Ru,t.geoGnomonic=Du,t.geoGnomonicRaw=Zu,t.geoIdentity=Bo,t.geoProjection=el,t.geoProjectionMutator=Tl,t.geoMercator=rl,t.geoMercatorRaw=As,t.geoOrthographic=Mi,t.geoOrthographicRaw=Tu,t.geoStereographic=ju,t.geoStereographicRaw=il,t.geoTransverseMercator=nu,t.geoTransverseMercatorRaw=Bu,t.geoRotation=Ea,t.geoStream=ut,t.geoTransform=Iu,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";var s=1e-6,c=1e-12,r=Math.PI,h=r/2,n=r/4,i=r*2,a=180/r,o=r/180,u=Math.abs,f=Math.atan,v=Math.atan2,b=Math.cos,y=Math.ceil,g=Math.exp,_=Math.hypot,M=Math.log,x=Math.pow,m=Math.sin,S=Math.sign||function(Zt){return Zt>0?1:Zt<0?-1:0},P=Math.sqrt,A=Math.tan;function O(Zt){return Zt>1?0:Zt<-1?r:Math.acos(Zt)}function L(Zt){return Zt>1?h:Zt<-1?-h:Math.asin(Zt)}function W(Zt){return(Zt=m(Zt/2))*Zt}function F(){}function K(Zt,te){Zt&&k.hasOwnProperty(Zt.type)&&k[Zt.type](Zt,te)}var V={Feature:function(te,Le){K(te.geometry,Le)},FeatureCollection:function(te,Le){for(var Se=te.features,Dt=-1,zt=Se.length;++Dt<zt;)K(Se[Dt].geometry,Le)}},k={Sphere:function(te,Le){Le.sphere()},Point:function(te,Le){te=te.coordinates,Le.point(te[0],te[1],te[2])},MultiPoint:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)te=Se[Dt],Le.point(te[0],te[1],te[2])},LineString:function(te,Le){Z(te.coordinates,Le,0)},MultiLineString:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)Z(Se[Dt],Le,0)},Polygon:function(te,Le){X(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)X(Se[Dt],Le)},GeometryCollection:function(te,Le){for(var Se=te.geometries,Dt=-1,zt=Se.length;++Dt<zt;)K(Se[Dt],Le)}};function Z(Zt,te,Le){var Se=-1,Dt=Zt.length-Le,zt;for(te.lineStart();++Se<Dt;)zt=Zt[Se],te.point(zt[0],zt[1],zt[2]);te.lineEnd()}function X(Zt,te){var Le=-1,Se=Zt.length;for(te.polygonStart();++Le<Se;)Z(Zt[Le],te,1);te.polygonEnd()}function it(Zt,te){Zt&&V.hasOwnProperty(Zt.type)?V[Zt.type](Zt,te):K(Zt,te)}var ft=new l.Adder,pt=new l.Adder,ut,It,Nt,Rt,Mt,bt={point:F,lineStart:F,lineEnd:F,polygonStart:function(){ft=new l.Adder,bt.lineStart=At,bt.lineEnd=rt},polygonEnd:function(){var te=+ft;pt.add(te<0?i+te:te),this.lineStart=this.lineEnd=this.point=F},sphere:function(){pt.add(i)}};function At(){bt.point=Pt}function rt(){z(ut,It)}function Pt(Zt,te){bt.point=z,ut=Zt,It=te,Zt*=o,te*=o,Nt=Zt,Rt=b(te=te/2+n),Mt=m(te)}function z(Zt,te){Zt*=o,te*=o,te=te/2+n;var Le=Zt-Nt,Se=Le>=0?1:-1,Dt=Se*Le,zt=b(te),se=m(te),re=Mt*se,fe=Rt*zt+re*b(Dt),Fe=re*Se*m(Dt);ft.add(v(Fe,fe)),Nt=Zt,Rt=zt,Mt=se}function Q(Zt){return pt=new l.Adder,it(Zt,bt),pt*2}function gt(Zt){return[v(Zt[1],Zt[0]),L(Zt[2])]}function et(Zt){var te=Zt[0],Le=Zt[1],Se=b(Le);return[Se*b(te),Se*m(te),m(Le)]}function ot(Zt,te){return Zt[0]*te[0]+Zt[1]*te[1]+Zt[2]*te[2]}function xt(Zt,te){return[Zt[1]*te[2]-Zt[2]*te[1],Zt[2]*te[0]-Zt[0]*te[2],Zt[0]*te[1]-Zt[1]*te[0]]}function H(Zt,te){Zt[0]+=te[0],Zt[1]+=te[1],Zt[2]+=te[2]}function nt(Zt,te){return[Zt[0]*te,Zt[1]*te,Zt[2]*te]}function at(Zt){var te=P(Zt[0]*Zt[0]+Zt[1]*Zt[1]+Zt[2]*Zt[2]);Zt[0]/=te,Zt[1]/=te,Zt[2]/=te}var q,_t,yt,Ft,Qt,ee,Vt,$t,Me,me,le,be={point:ze,lineStart:Sn,lineEnd:Xn,polygonStart:function(){be.point=Hn,be.lineStart=nn,be.lineEnd=en,Me=new l.Adder,bt.polygonStart()},polygonEnd:function(){bt.polygonEnd(),be.point=ze,be.lineStart=Sn,be.lineEnd=Xn,ft<0?(q=-(yt=180),_t=-(Ft=90)):Me>s?Ft=90:Me<-s&&(_t=-90),le[0]=q,le[1]=yt},sphere:function(){q=-(yt=180),_t=-(Ft=90)}};function ze(Zt,te){me.push(le=[q=Zt,yt=Zt]),te<_t&&(_t=te),te>Ft&&(Ft=te)}function Xe(Zt,te){var Le=et([Zt*o,te*o]);if($t){var Se=xt($t,Le),Dt=[Se[1],-Se[0],0],zt=xt(Dt,Se);at(zt),zt=gt(zt);var se=Zt-Qt,re=se>0?1:-1,fe=zt[0]*a*re,Fe,Ke=u(se)>180;Ke^(re*Qt<fe&&fe<re*Zt)?(Fe=zt[1]*a,Fe>Ft&&(Ft=Fe)):(fe=(fe+360)%360-180,Ke^(re*Qt<fe&&fe<re*Zt)?(Fe=-zt[1]*a,Fe<_t&&(_t=Fe)):(te<_t&&(_t=te),te>Ft&&(Ft=te))),Ke?Zt<Qt?An(q,Zt)>An(q,yt)&&(yt=Zt):An(Zt,yt)>An(q,yt)&&(q=Zt):yt>=q?(Zt<q&&(q=Zt),Zt>yt&&(yt=Zt)):Zt>Qt?An(q,Zt)>An(q,yt)&&(yt=Zt):An(Zt,yt)>An(q,yt)&&(q=Zt)}else me.push(le=[q=Zt,yt=Zt]);te<_t&&(_t=te),te>Ft&&(Ft=te),$t=Le,Qt=Zt}function Sn(){be.point=Xe}function Xn(){le[0]=q,le[1]=yt,be.point=ze,$t=null}function Hn(Zt,te){if($t){var Le=Zt-Qt;Me.add(u(Le)>180?Le+(Le>0?360:-360):Le)}else ee=Zt,Vt=te;bt.point(Zt,te),Xe(Zt,te)}function nn(){bt.lineStart()}function en(){Hn(ee,Vt),bt.lineEnd(),u(Me)>s&&(q=-(yt=180)),le[0]=q,le[1]=yt,$t=null}function An(Zt,te){return(te-=Zt)<0?te+360:te}function Nn(Zt,te){return Zt[0]-te[0]}function fr(Zt,te){return Zt[0]<=Zt[1]?Zt[0]<=te&&te<=Zt[1]:te<Zt[0]||Zt[1]<te}function hi(Zt){var te,Le,Se,Dt,zt,se,re;if(Ft=yt=-(q=_t=Infinity),me=[],it(Zt,be),Le=me.length){for(me.sort(Nn),te=1,Se=me[0],zt=[Se];te<Le;++te)Dt=me[te],fr(Se,Dt[0])||fr(Se,Dt[1])?(An(Se[0],Dt[1])>An(Se[0],Se[1])&&(Se[1]=Dt[1]),An(Dt[0],Se[1])>An(Se[0],Se[1])&&(Se[0]=Dt[0])):zt.push(Se=Dt);for(se=-Infinity,Le=zt.length-1,te=0,Se=zt[Le];te<=Le;Se=Dt,++te)Dt=zt[te],(re=An(Se[1],Dt[0]))>se&&(se=re,q=Dt[0],yt=Se[1])}return me=le=null,q===Infinity||_t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[q,_t],[yt,Ft]]}var Ce,Te,Jt,pe,Wt,ie,Ae,ue,xe,$e,Fn,or,En,Pn,br,Pr,ln={sphere:F,point:Cr,lineStart:Be,lineEnd:fn,polygonStart:function(){ln.lineStart=gn,ln.lineEnd=Bn},polygonEnd:function(){ln.lineStart=Be,ln.lineEnd=fn}};function Cr(Zt,te){Zt*=o,te*=o;var Le=b(te);Ar(Le*b(Zt),Le*m(Zt),m(te))}function Ar(Zt,te,Le){++Ce,Jt+=(Zt-Jt)/Ce,pe+=(te-pe)/Ce,Wt+=(Le-Wt)/Ce}function Be(){ln.point=We}function We(Zt,te){Zt*=o,te*=o;var Le=b(te);Pn=Le*b(Zt),br=Le*m(Zt),Pr=m(te),ln.point=Ye,Ar(Pn,br,Pr)}function Ye(Zt,te){Zt*=o,te*=o;var Le=b(te),Se=Le*b(Zt),Dt=Le*m(Zt),zt=m(te),se=v(P((se=br*zt-Pr*Dt)*se+(se=Pr*Se-Pn*zt)*se+(se=Pn*Dt-br*Se)*se),Pn*Se+br*Dt+Pr*zt);Te+=se,ie+=se*(Pn+(Pn=Se)),Ae+=se*(br+(br=Dt)),ue+=se*(Pr+(Pr=zt)),Ar(Pn,br,Pr)}function fn(){ln.point=Cr}function gn(){ln.point=bn}function Bn(){Ln(or,En),ln.point=Cr}function bn(Zt,te){or=Zt,En=te,Zt*=o,te*=o,ln.point=Ln;var Le=b(te);Pn=Le*b(Zt),br=Le*m(Zt),Pr=m(te),Ar(Pn,br,Pr)}function Ln(Zt,te){Zt*=o,te*=o;var Le=b(te),Se=Le*b(Zt),Dt=Le*m(Zt),zt=m(te),se=br*zt-Pr*Dt,re=Pr*Se-Pn*zt,fe=Pn*Dt-br*Se,Fe=_(se,re,fe),Ke=L(Fe),rn=Fe&&-Ke/Fe;xe.add(rn*se),$e.add(rn*re),Fn.add(rn*fe),Te+=Ke,ie+=Ke*(Pn+(Pn=Se)),Ae+=Ke*(br+(br=Dt)),ue+=Ke*(Pr+(Pr=zt)),Ar(Pn,br,Pr)}function ir(Zt){Ce=Te=Jt=pe=Wt=ie=Ae=ue=0,xe=new l.Adder,$e=new l.Adder,Fn=new l.Adder,it(Zt,ln);var te=+xe,Le=+$e,Se=+Fn,Dt=_(te,Le,Se);return Dt<c&&(te=ie,Le=Ae,Se=ue,Te<s&&(te=Jt,Le=pe,Se=Wt),Dt=_(te,Le,Se),Dt<c)?[NaN,NaN]:[v(Le,te)*a,L(Se/Dt)*a]}function Yn(Zt){return function(){return Zt}}function _n(Zt,te){function Le(Se,Dt){return Se=Zt(Se,Dt),te(Se[0],Se[1])}return Zt.invert&&te.invert&&(Le.invert=function(Se,Dt){return Se=te.invert(Se,Dt),Se&&Zt.invert(Se[0],Se[1])}),Le}function Dr(Zt,te){return[u(Zt)>r?Zt+Math.round(-Zt/i)*i:Zt,te]}Dr.invert=Dr;function vr(Zt,te,Le){return(Zt%=i)?te||Le?_n(Ai(Zt),Aa(te,Le)):Ai(Zt):te||Le?Aa(te,Le):Dr}function zr(Zt){return function(te,Le){return te+=Zt,[te>r?te-i:te<-r?te+i:te,Le]}}function Ai(Zt){var te=zr(Zt);return te.invert=zr(-Zt),te}function Aa(Zt,te){var Le=b(Zt),Se=m(Zt),Dt=b(te),zt=m(te);function se(re,fe){var Fe=b(fe),Ke=b(re)*Fe,rn=m(re)*Fe,Je=m(fe),pn=Je*Le+Ke*Se;return[v(rn*Dt-pn*zt,Ke*Le-Je*Se),L(pn*Dt+rn*zt)]}return se.invert=function(re,fe){var Fe=b(fe),Ke=b(re)*Fe,rn=m(re)*Fe,Je=m(fe),pn=Je*Dt-rn*zt;return[v(rn*Dt+Je*zt,Ke*Le+pn*Se),L(pn*Le-Ke*Se)]},se}function ka(Zt){Zt=vr(Zt[0]*o,Zt[1]*o,Zt.length>2?Zt[2]*o:0);function te(Le){return Le=Zt(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le}return te.invert=function(Le){return Le=Zt.invert(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le},te}function eo(Zt,te,Le,Se,Dt,zt){if(!!Le){var se=b(te),re=m(te),fe=Se*Le;Dt==null?(Dt=te+Se*i,zt=te-fe/2):(Dt=Zo(se,Dt),zt=Zo(se,zt),(Se>0?Dt<zt:Dt>zt)&&(Dt+=Se*i));for(var Fe,Ke=Dt;Se>0?Ke>zt:Ke<zt;Ke-=fe)Fe=gt([se,-re*b(Ke),-re*m(Ke)]),Zt.point(Fe[0],Fe[1])}}function Zo(Zt,te){te=et(te),te[0]-=Zt,at(te);var Le=O(-te[1]);return((-te[2]<0?-Le:Le)+i-s)%i}function Ea(){var Zt=Yn([0,0]),te=Yn(90),Le=Yn(6),Se,Dt,zt={point:se};function se(fe,Fe){Se.push(fe=Dt(fe,Fe)),fe[0]*=a,fe[1]*=a}function re(){var fe=Zt.apply(this,arguments),Fe=te.apply(this,arguments)*o,Ke=Le.apply(this,arguments)*o;return Se=[],Dt=vr(-fe[0]*o,-fe[1]*o,0).invert,eo(zt,Fe,Ke,1),fe={type:"Polygon",coordinates:[Se]},Se=Dt=null,fe}return re.center=function(fe){return arguments.length?(Zt=typeof fe=="function"?fe:Yn([+fe[0],+fe[1]]),re):Zt},re.radius=function(fe){return arguments.length?(te=typeof fe=="function"?fe:Yn(+fe),re):te},re.precision=function(fe){return arguments.length?(Le=typeof fe=="function"?fe:Yn(+fe),re):Le},re}function so(){var Zt=[],te;return{point:function(Se,Dt,zt){te.push([Se,Dt,zt])},lineStart:function(){Zt.push(te=[])},lineEnd:F,rejoin:function(){Zt.length>1&&Zt.push(Zt.pop().concat(Zt.shift()))},result:function(){var Se=Zt;return Zt=[],te=null,Se}}}function Ko(Zt,te){return u(Zt[0]-te[0])<s&&u(Zt[1]-te[1])<s}function no(Zt,te,Le,Se){this.x=Zt,this.z=te,this.o=Le,this.e=Se,this.v=!1,this.n=this.p=null}function So(Zt,te,Le,Se,Dt){var zt=[],se=[],re,fe;if(Zt.forEach(function(hn){if(!((Jn=hn.length-1)<=0)){var Jn,Vn=hn[0],Zn=hn[Jn],Wn;if(Ko(Vn,Zn)){if(!Vn[2]&&!Zn[2]){for(Dt.lineStart(),re=0;re<Jn;++re)Dt.point((Vn=hn[re])[0],Vn[1]);Dt.lineEnd();return}Zn[0]+=2*s}zt.push(Wn=new no(Vn,hn,null,!0)),se.push(Wn.o=new no(Vn,null,Wn,!1)),zt.push(Wn=new no(Zn,hn,null,!1)),se.push(Wn.o=new no(Zn,null,Wn,!0))}}),!!zt.length){for(se.sort(te),cs(zt),cs(se),re=0,fe=se.length;re<fe;++re)se[re].e=Le=!Le;for(var Fe=zt[0],Ke,rn;;){for(var Je=Fe,pn=!0;Je.v;)if((Je=Je.n)===Fe)return;Ke=Je.z,Dt.lineStart();do{if(Je.v=Je.o.v=!0,Je.e){if(pn)for(re=0,fe=Ke.length;re<fe;++re)Dt.point((rn=Ke[re])[0],rn[1]);else Se(Je.x,Je.n.x,1,Dt);Je=Je.n}else{if(pn)for(Ke=Je.p.z,re=Ke.length-1;re>=0;--re)Dt.point((rn=Ke[re])[0],rn[1]);else Se(Je.x,Je.p.x,-1,Dt);Je=Je.p}Je=Je.o,Ke=Je.z,pn=!pn}while(!Je.v);Dt.lineEnd()}}}function cs(Zt){if(!!(te=Zt.length)){for(var te,Le=0,Se=Zt[0],Dt;++Le<te;)Se.n=Dt=Zt[Le],Dt.p=Se,Se=Dt;Se.n=Dt=Zt[0],Dt.p=Se}}function wa(Zt){return u(Zt[0])<=r?Zt[0]:S(Zt[0])*((u(Zt[0])+r)%i-r)}function zo(Zt,te){var Le=wa(te),Se=te[1],Dt=m(Se),zt=[m(Le),-b(Le),0],se=0,re=0,fe=new l.Adder;Dt===1?Se=h+s:Dt===-1&&(Se=-h-s);for(var Fe=0,Ke=Zt.length;Fe<Ke;++Fe)if(!!(Je=(rn=Zt[Fe]).length))for(var rn,Je,pn=rn[Je-1],hn=wa(pn),Jn=pn[1]/2+n,Vn=m(Jn),Zn=b(Jn),Wn=0;Wn<Je;++Wn,hn=xr,Vn=mi,Zn=Br,pn=cr){var cr=rn[Wn],xr=wa(cr),Hr=cr[1]/2+n,mi=m(Hr),Br=b(Hr),ui=xr-hn,_i=ui>=0?1:-1,Zi=_i*ui,Ri=Zi>r,Ma=Vn*mi;if(fe.add(v(Ma*_i*m(Zi),Zn*Br+Ma*b(Zi))),se+=Ri?ui+_i*i:ui,Ri^hn>=Le^xr>=Le){var ga=xt(et(pn),et(cr));at(ga);var la=xt(zt,ga);at(la);var ii=(Ri^ui>=0?-1:1)*L(la[2]);(Se>ii||Se===ii&&(ga[0]||ga[1]))&&(re+=Ri^ui>=0?1:-1)}}return(se<-s||se<s&&fe<-c)^re&1}function Ro(Zt,te,Le,Se){return function(Dt){var zt=te(Dt),se=so(),re=te(se),fe=!1,Fe,Ke,rn,Je={point:pn,lineStart:Jn,lineEnd:Vn,polygonStart:function(){Je.point=Zn,Je.lineStart=Wn,Je.lineEnd=cr,Ke=[],Fe=[]},polygonEnd:function(){Je.point=pn,Je.lineStart=Jn,Je.lineEnd=Vn,Ke=l.merge(Ke);var Hr=zo(Fe,Se);Ke.length?(fe||(Dt.polygonStart(),fe=!0),So(Ke,Xo,Hr,Le,Dt)):Hr&&(fe||(Dt.polygonStart(),fe=!0),Dt.lineStart(),Le(null,null,1,Dt),Dt.lineEnd()),fe&&(Dt.polygonEnd(),fe=!1),Ke=Fe=null},sphere:function(){Dt.polygonStart(),Dt.lineStart(),Le(null,null,1,Dt),Dt.lineEnd(),Dt.polygonEnd()}};function pn(xr,Hr){Zt(xr,Hr)&&Dt.point(xr,Hr)}function hn(xr,Hr){zt.point(xr,Hr)}function Jn(){Je.point=hn,zt.lineStart()}function Vn(){Je.point=pn,zt.lineEnd()}function Zn(xr,Hr){rn.push([xr,Hr]),re.point(xr,Hr)}function Wn(){re.lineStart(),rn=[]}function cr(){Zn(rn[0][0],rn[0][1]),re.lineEnd();var xr=re.clean(),Hr=se.result(),mi,Br=Hr.length,ui,_i,Zi;if(rn.pop(),Fe.push(rn),rn=null,!!Br){if(xr&1){if(_i=Hr[0],(ui=_i.length-1)>0){for(fe||(Dt.polygonStart(),fe=!0),Dt.lineStart(),mi=0;mi<ui;++mi)Dt.point((Zi=_i[mi])[0],Zi[1]);Dt.lineEnd()}return}Br>1&&xr&2&&Hr.push(Hr.pop().concat(Hr.shift())),Ke.push(Hr.filter(fu))}}return Je}}function fu(Zt){return Zt.length>1}function Xo(Zt,te){return((Zt=Zt.x)[0]<0?Zt[1]-h-s:h-Zt[1])-((te=te.x)[0]<0?te[1]-h-s:h-te[1])}var au=Ro(function(){return!0},$s,oe,[-r,-h]);function $s(Zt){var te=NaN,Le=NaN,Se=NaN,Dt;return{lineStart:function(){Zt.lineStart(),Dt=1},point:function(se,re){var fe=se>0?r:-r,Fe=u(se-te);u(Fe-r)<s?(Zt.point(te,Le=(Le+re)/2>0?h:-h),Zt.point(Se,Le),Zt.lineEnd(),Zt.lineStart(),Zt.point(fe,Le),Zt.point(se,Le),Dt=0):Se!==fe&&Fe>=r&&(u(te-Se)<s&&(te-=Se*s),u(se-fe)<s&&(se-=fe*s),Le=Ne(te,Le,se,re),Zt.point(Se,Le),Zt.lineEnd(),Zt.lineStart(),Zt.point(fe,Le),Dt=0),Zt.point(te=se,Le=re),Se=fe},lineEnd:function(){Zt.lineEnd(),te=Le=NaN},clean:function(){return 2-Dt}}}function Ne(Zt,te,Le,Se){var Dt,zt,se=m(Zt-Le);return u(se)>s?f((m(te)*(zt=b(Se))*m(Le)-m(Se)*(Dt=b(te))*m(Zt))/(Dt*zt*se)):(te+Se)/2}function oe(Zt,te,Le,Se){var Dt;if(Zt==null)Dt=Le*h,Se.point(-r,Dt),Se.point(0,Dt),Se.point(r,Dt),Se.point(r,0),Se.point(r,-Dt),Se.point(0,-Dt),Se.point(-r,-Dt),Se.point(-r,0),Se.point(-r,Dt);else if(u(Zt[0]-te[0])>s){var zt=Zt[0]<te[0]?r:-r;Dt=Le*zt/2,Se.point(-zt,Dt),Se.point(0,Dt),Se.point(zt,Dt)}else Se.point(te[0],te[1])}function Ht(Zt){var te=b(Zt),Le=6*o,Se=te>0,Dt=u(te)>s;function zt(Ke,rn,Je,pn){eo(pn,Zt,Le,Je,Ke,rn)}function se(Ke,rn){return b(Ke)*b(rn)>te}function re(Ke){var rn,Je,pn,hn,Jn;return{lineStart:function(){hn=pn=!1,Jn=1},point:function(Zn,Wn){var cr=[Zn,Wn],xr,Hr=se(Zn,Wn),mi=Se?Hr?0:Fe(Zn,Wn):Hr?Fe(Zn+(Zn<0?r:-r),Wn):0;if(!rn&&(hn=pn=Hr)&&Ke.lineStart(),Hr!==pn&&(xr=fe(rn,cr),(!xr||Ko(rn,xr)||Ko(cr,xr))&&(cr[2]=1)),Hr!==pn)Jn=0,Hr?(Ke.lineStart(),xr=fe(cr,rn),Ke.point(xr[0],xr[1])):(xr=fe(rn,cr),Ke.point(xr[0],xr[1],2),Ke.lineEnd()),rn=xr;else if(Dt&&rn&&Se^Hr){var Br;!(mi&Je)&&(Br=fe(cr,rn,!0))&&(Jn=0,Se?(Ke.lineStart(),Ke.point(Br[0][0],Br[0][1]),Ke.point(Br[1][0],Br[1][1]),Ke.lineEnd()):(Ke.point(Br[1][0],Br[1][1]),Ke.lineEnd(),Ke.lineStart(),Ke.point(Br[0][0],Br[0][1],3)))}Hr&&(!rn||!Ko(rn,cr))&&Ke.point(cr[0],cr[1]),rn=cr,pn=Hr,Je=mi},lineEnd:function(){pn&&Ke.lineEnd(),rn=null},clean:function(){return Jn|(hn&&pn)<<1}}}function fe(Ke,rn,Je){var pn=et(Ke),hn=et(rn),Jn=[1,0,0],Vn=xt(pn,hn),Zn=ot(Vn,Vn),Wn=Vn[0],cr=Zn-Wn*Wn;if(!cr)return!Je&&Ke;var xr=te*Zn/cr,Hr=-te*Wn/cr,mi=xt(Jn,Vn),Br=nt(Jn,xr),ui=nt(Vn,Hr);H(Br,ui);var _i=mi,Zi=ot(Br,_i),Ri=ot(_i,_i),Ma=Zi*Zi-Ri*(ot(Br,Br)-1);if(!(Ma<0)){var ga=P(Ma),la=nt(_i,(-Zi-ga)/Ri);if(H(la,Br),la=gt(la),!Je)return la;var ii=Ke[0],Pa=rn[0],Va=Ke[1],Ya=rn[1],Ii;Pa<ii&&(Ii=ii,ii=Pa,Pa=Ii);var Ra=Pa-ii,lo=u(Ra-r)<s,Rs=lo||Ra<s;if(!lo&&Ya<Va&&(Ii=Va,Va=Ya,Ya=Ii),Rs?lo?Va+Ya>0^la[1]<(u(la[0]-ii)<s?Va:Ya):Va<=la[1]&&la[1]<=Ya:Ra>r^(ii<=la[0]&&la[0]<=Pa)){var Ds=nt(_i,(-Zi+ga)/Ri);return H(Ds,Br),[la,gt(Ds)]}}}function Fe(Ke,rn){var Je=Se?Zt:r-Zt,pn=0;return Ke<-Je?pn|=1:Ke>Je&&(pn|=2),rn<-Je?pn|=4:rn>Je&&(pn|=8),pn}return Ro(se,re,zt,Se?[0,-Zt]:[-r,Zt-r])}function Ee(Zt,te,Le,Se,Dt,zt){var se=Zt[0],re=Zt[1],fe=te[0],Fe=te[1],Ke=0,rn=1,Je=fe-se,pn=Fe-re,hn;if(hn=Le-se,!(!Je&&hn>0)){if(hn/=Je,Je<0){if(hn<Ke)return;hn<rn&&(rn=hn)}else if(Je>0){if(hn>rn)return;hn>Ke&&(Ke=hn)}if(hn=Dt-se,!(!Je&&hn<0)){if(hn/=Je,Je<0){if(hn>rn)return;hn>Ke&&(Ke=hn)}else if(Je>0){if(hn<Ke)return;hn<rn&&(rn=hn)}if(hn=Se-re,!(!pn&&hn>0)){if(hn/=pn,pn<0){if(hn<Ke)return;hn<rn&&(rn=hn)}else if(pn>0){if(hn>rn)return;hn>Ke&&(Ke=hn)}if(hn=zt-re,!(!pn&&hn<0)){if(hn/=pn,pn<0){if(hn>rn)return;hn>Ke&&(Ke=hn)}else if(pn>0){if(hn<Ke)return;hn<rn&&(rn=hn)}return Ke>0&&(Zt[0]=se+Ke*Je,Zt[1]=re+Ke*pn),rn<1&&(te[0]=se+rn*Je,te[1]=re+rn*pn),!0}}}}}var an=1e9,zn=-an;function qn(Zt,te,Le,Se){function Dt(Fe,Ke){return Zt<=Fe&&Fe<=Le&&te<=Ke&&Ke<=Se}function zt(Fe,Ke,rn,Je){var pn=0,hn=0;if(Fe==null||(pn=se(Fe,rn))!==(hn=se(Ke,rn))||fe(Fe,Ke)<0^rn>0)do Je.point(pn===0||pn===3?Zt:Le,pn>1?Se:te);while((pn=(pn+rn+4)%4)!==hn);else Je.point(Ke[0],Ke[1])}function se(Fe,Ke){return u(Fe[0]-Zt)<s?Ke>0?0:3:u(Fe[0]-Le)<s?Ke>0?2:1:u(Fe[1]-te)<s?Ke>0?1:0:Ke>0?3:2}function re(Fe,Ke){return fe(Fe.x,Ke.x)}function fe(Fe,Ke){var rn=se(Fe,1),Je=se(Ke,1);return rn!==Je?rn-Je:rn===0?Ke[1]-Fe[1]:rn===1?Fe[0]-Ke[0]:rn===2?Fe[1]-Ke[1]:Ke[0]-Fe[0]}return function(Fe){var Ke=Fe,rn=so(),Je,pn,hn,Jn,Vn,Zn,Wn,cr,xr,Hr,mi,Br={point:ui,lineStart:Ma,lineEnd:ga,polygonStart:Zi,polygonEnd:Ri};function ui(ii,Pa){Dt(ii,Pa)&&Ke.point(ii,Pa)}function _i(){for(var ii=0,Pa=0,Va=pn.length;Pa<Va;++Pa)for(var Ya=pn[Pa],Ii=1,Ra=Ya.length,lo=Ya[0],Rs,Ds,Ku=lo[0],hu=lo[1];Ii<Ra;++Ii)Rs=Ku,Ds=hu,lo=Ya[Ii],Ku=lo[0],hu=lo[1],Ds<=Se?hu>Se&&(Ku-Rs)*(Se-Ds)>(hu-Ds)*(Zt-Rs)&&++ii:hu<=Se&&(Ku-Rs)*(Se-Ds)<(hu-Ds)*(Zt-Rs)&&--ii;return ii}function Zi(){Ke=rn,Je=[],pn=[],mi=!0}function Ri(){var ii=_i(),Pa=mi&&ii,Va=(Je=l.merge(Je)).length;(Pa||Va)&&(Fe.polygonStart(),Pa&&(Fe.lineStart(),zt(null,null,1,Fe),Fe.lineEnd()),Va&&So(Je,re,ii,zt,Fe),Fe.polygonEnd()),Ke=Fe,Je=pn=hn=null}function Ma(){Br.point=la,pn&&pn.push(hn=[]),Hr=!0,xr=!1,Wn=cr=NaN}function ga(){Je&&(la(Jn,Vn),Zn&&xr&&rn.rejoin(),Je.push(rn.result())),Br.point=ui,xr&&Ke.lineEnd()}function la(ii,Pa){var Va=Dt(ii,Pa);if(pn&&hn.push([ii,Pa]),Hr)Jn=ii,Vn=Pa,Zn=Va,Hr=!1,Va&&(Ke.lineStart(),Ke.point(ii,Pa));else if(Va&&xr)Ke.point(ii,Pa);else{var Ya=[Wn=Math.max(zn,Math.min(an,Wn)),cr=Math.max(zn,Math.min(an,cr))],Ii=[ii=Math.max(zn,Math.min(an,ii)),Pa=Math.max(zn,Math.min(an,Pa))];Ee(Ya,Ii,Zt,te,Le,Se)?(xr||(Ke.lineStart(),Ke.point(Ya[0],Ya[1])),Ke.point(Ii[0],Ii[1]),Va||Ke.lineEnd(),mi=!1):Va&&(Ke.lineStart(),Ke.point(ii,Pa),mi=!1)}Wn=ii,cr=Pa,xr=Va}return Br}}function Un(){var Zt=0,te=0,Le=960,Se=500,Dt,zt,se;return se={stream:function(fe){return Dt&&zt===fe?Dt:Dt=qn(Zt,te,Le,Se)(zt=fe)},extent:function(fe){return arguments.length?(Zt=+fe[0][0],te=+fe[0][1],Le=+fe[1][0],Se=+fe[1][1],Dt=zt=null,se):[[Zt,te],[Le,Se]]}}}var Jr,Si,Ci,ki,oa={sphere:F,point:F,lineStart:Xa,lineEnd:F,polygonStart:F,polygonEnd:F};function Xa(){oa.point=mo,oa.lineEnd=ma}function ma(){oa.point=oa.lineEnd=F}function mo(Zt,te){Zt*=o,te*=o,Si=Zt,Ci=m(te),ki=b(te),oa.point=Ba}function Ba(Zt,te){Zt*=o,te*=o;var Le=m(te),Se=b(te),Dt=u(Zt-Si),zt=b(Dt),se=m(Dt),re=Se*se,fe=ki*Le-Ci*Se*zt,Fe=Ci*Le+ki*Se*zt;Jr.add(v(P(re*re+fe*fe),Fe)),Si=Zt,Ci=Le,ki=Se}function ao(Zt){return Jr=new l.Adder,it(Zt,oa),+Jr}var yo=[null,null],Ja={type:"LineString",coordinates:yo};function _o(Zt,te){return yo[0]=Zt,yo[1]=te,ao(Ja)}var ts={Feature:function(te,Le){return xs(te.geometry,Le)},FeatureCollection:function(te,Le){for(var Se=te.features,Dt=-1,zt=Se.length;++Dt<zt;)if(xs(Se[Dt].geometry,Le))return!0;return!1}},Do={Sphere:function(){return!0},Point:function(te,Le){return Mo(te.coordinates,Le)},MultiPoint:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if(Mo(Se[Dt],Le))return!0;return!1},LineString:function(te,Le){return $a(te.coordinates,Le)},MultiLineString:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if($a(Se[Dt],Le))return!0;return!1},Polygon:function(te,Le){return Ms(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if(Ms(Se[Dt],Le))return!0;return!1},GeometryCollection:function(te,Le){for(var Se=te.geometries,Dt=-1,zt=Se.length;++Dt<zt;)if(xs(Se[Dt],Le))return!0;return!1}};function xs(Zt,te){return Zt&&Do.hasOwnProperty(Zt.type)?Do[Zt.type](Zt,te):!1}function Mo(Zt,te){return _o(Zt,te)===0}function $a(Zt,te){for(var Le,Se,Dt,zt=0,se=Zt.length;zt<se;zt++){if(Se=_o(Zt[zt],te),Se===0||zt>0&&(Dt=_o(Zt[zt],Zt[zt-1]),Dt>0&&Le<=Dt&&Se<=Dt&&(Le+Se-Dt)*(1-Math.pow((Le-Se)/Dt,2))<c*Dt))return!0;Le=Se}return!1}function Ms(Zt,te){return!!zo(Zt.map(as),Ca(te))}function as(Zt){return Zt=Zt.map(Ca),Zt.pop(),Zt}function Ca(Zt){return[Zt[0]*o,Zt[1]*o]}function mn(Zt,te){return(Zt&&ts.hasOwnProperty(Zt.type)?ts[Zt.type]:xs)(Zt,te)}function hr(Zt,te,Le){var Se=l.range(Zt,te-s,Le).concat(te);return function(Dt){return Se.map(function(zt){return[Dt,zt]})}}function Gr(Zt,te,Le){var Se=l.range(Zt,te-s,Le).concat(te);return function(Dt){return Se.map(function(zt){return[zt,Dt]})}}function Ui(){var Zt,te,Le,Se,Dt,zt,se,re,fe=10,Fe=fe,Ke=90,rn=360,Je,pn,hn,Jn,Vn=2.5;function Zn(){return{type:"MultiLineString",coordinates:Wn()}}function Wn(){return l.range(y(Se/Ke)*Ke,Le,Ke).map(hn).concat(l.range(y(re/rn)*rn,se,rn).map(Jn)).concat(l.range(y(te/fe)*fe,Zt,fe).filter(function(cr){return u(cr%Ke)>s}).map(Je)).concat(l.range(y(zt/Fe)*Fe,Dt,Fe).filter(function(cr){return u(cr%rn)>s}).map(pn))}return Zn.lines=function(){return Wn().map(function(cr){return{type:"LineString",coordinates:cr}})},Zn.outline=function(){return{type:"Polygon",coordinates:[hn(Se).concat(Jn(se).slice(1),hn(Le).reverse().slice(1),Jn(re).reverse().slice(1))]}},Zn.extent=function(cr){return arguments.length?Zn.extentMajor(cr).extentMinor(cr):Zn.extentMinor()},Zn.extentMajor=function(cr){return arguments.length?(Se=+cr[0][0],Le=+cr[1][0],re=+cr[0][1],se=+cr[1][1],Se>Le&&(cr=Se,Se=Le,Le=cr),re>se&&(cr=re,re=se,se=cr),Zn.precision(Vn)):[[Se,re],[Le,se]]},Zn.extentMinor=function(cr){return arguments.length?(te=+cr[0][0],Zt=+cr[1][0],zt=+cr[0][1],Dt=+cr[1][1],te>Zt&&(cr=te,te=Zt,Zt=cr),zt>Dt&&(cr=zt,zt=Dt,Dt=cr),Zn.precision(Vn)):[[te,zt],[Zt,Dt]]},Zn.step=function(cr){return arguments.length?Zn.stepMajor(cr).stepMinor(cr):Zn.stepMinor()},Zn.stepMajor=function(cr){return arguments.length?(Ke=+cr[0],rn=+cr[1],Zn):[Ke,rn]},Zn.stepMinor=function(cr){return arguments.length?(fe=+cr[0],Fe=+cr[1],Zn):[fe,Fe]},Zn.precision=function(cr){return arguments.length?(Vn=+cr,Je=hr(zt,Dt,90),pn=Gr(te,Zt,Vn),hn=hr(re,se,90),Jn=Gr(Se,Le,Vn),Zn):Vn},Zn.extentMajor([[-180,-90+s],[180,90-s]]).extentMinor([[-180,-80-s],[180,80+s]])}function Ka(){return Ui()()}function xo(Zt,te){var Le=Zt[0]*o,Se=Zt[1]*o,Dt=te[0]*o,zt=te[1]*o,se=b(Se),re=m(Se),fe=b(zt),Fe=m(zt),Ke=se*b(Le),rn=se*m(Le),Je=fe*b(Dt),pn=fe*m(Dt),hn=2*L(P(W(zt-Se)+se*fe*W(Dt-Le))),Jn=m(hn),Vn=hn?function(Zn){var Wn=m(Zn*=hn)/Jn,cr=m(hn-Zn)/Jn,xr=cr*Ke+Wn*Je,Hr=cr*rn+Wn*pn,mi=cr*re+Wn*Fe;return[v(Hr,xr)*a,v(mi,P(xr*xr+Hr*Hr))*a]}:function(){return[Le*a,Se*a]};return Vn.distance=hn,Vn}var vo=function(te){return te},qi=new l.Adder,Qa=new l.Adder,bs,Es,Ga,Pu,Uo={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Uo.lineStart=Ps,Uo.lineEnd=hs},polygonEnd:function(){Uo.lineStart=Uo.lineEnd=Uo.point=F,qi.add(u(Qa)),Qa=new l.Adder},result:function(){var te=qi/2;return qi=new l.Adder,te}};function Ps(){Uo.point=Qs}function Qs(Zt,te){Uo.point=fs,bs=Ga=Zt,Es=Pu=te}function fs(Zt,te){Qa.add(Pu*Zt-Ga*te),Ga=Zt,Pu=te}function hs(){fs(bs,Es)}var os=Infinity,ds=os,Ts=-os,Ou=Ts,Uu={point:uo,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var te=[[os,ds],[Ts,Ou]];return Ts=Ou=-(ds=os=Infinity),te}};function uo(Zt,te){Zt<os&&(os=Zt),Zt>Ts&&(Ts=Zt),te<ds&&(ds=te),te>Ou&&(Ou=te)}var Fs=0,ku=0,ul=0,ll=0,Qu=0,To=0,La=0,ya=0,wo=0,pu,El,zs,Ss,ou={point:qs,lineStart:Ls,lineEnd:Wa,polygonStart:function(){ou.lineStart=Sl,ou.lineEnd=Ql},polygonEnd:function(){ou.point=qs,ou.lineStart=Ls,ou.lineEnd=Wa},result:function(){var te=wo?[La/wo,ya/wo]:To?[ll/To,Qu/To]:ul?[Fs/ul,ku/ul]:[NaN,NaN];return Fs=ku=ul=ll=Qu=To=La=ya=wo=0,te}};function qs(Zt,te){Fs+=Zt,ku+=te,++ul}function Ls(){ou.point=qu}function qu(Zt,te){ou.point=su,qs(zs=Zt,Ss=te)}function su(Zt,te){var Le=Zt-zs,Se=te-Ss,Dt=P(Le*Le+Se*Se);ll+=Dt*(zs+Zt)/2,Qu+=Dt*(Ss+te)/2,To+=Dt,qs(zs=Zt,Ss=te)}function Wa(){ou.point=qs}function Sl(){ou.point=_l}function Ql(){ql(pu,El)}function _l(Zt,te){ou.point=ql,qs(pu=zs=Zt,El=Ss=te)}function ql(Zt,te){var Le=Zt-zs,Se=te-Ss,Dt=P(Le*Le+Se*Se);ll+=Dt*(zs+Zt)/2,Qu+=Dt*(Ss+te)/2,To+=Dt,Dt=Ss*Zt-zs*te,La+=Dt*(zs+Zt),ya+=Dt*(Ss+te),wo+=Dt*3,qs(zs=Zt,Ss=te)}function Gu(Zt){this._context=Zt}Gu.prototype={_radius:4.5,pointRadius:function(te){return this._radius=te,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._context.moveTo(te,Le),this._point=1;break}case 1:{this._context.lineTo(te,Le);break}default:{this._context.moveTo(te+this._radius,Le),this._context.arc(te,Le,this._radius,0,i);break}}},result:F};var Ha=new l.Adder,uu,Ml,vs,wu,gu,Vu={point:F,lineStart:function(){Vu.point=Ws},lineEnd:function(){uu&&Jo(Ml,vs),Vu.point=F},polygonStart:function(){uu=!0},polygonEnd:function(){uu=null},result:function(){var te=+Ha;return Ha=new l.Adder,te}};function Ws(Zt,te){Vu.point=Jo,Ml=wu=Zt,vs=gu=te}function Jo(Zt,te){wu-=Zt,gu-=te,Ha.add(P(wu*wu+gu*gu)),wu=Zt,gu=te}function ss(){this._string=[]}ss.prototype={_radius:4.5,_circle:cl(4.5),pointRadius:function(te){return(te=+te)!==this._radius&&(this._radius=te,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._string.push("M",te,",",Le),this._point=1;break}case 1:{this._string.push("L",te,",",Le);break}default:{this._circle==null&&(this._circle=cl(this._radius)),this._string.push("M",te,",",Le,this._circle);break}}},result:function(){if(this._string.length){var te=this._string.join("");return this._string=[],te}else return null}};function cl(Zt){return"m0,"+Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+-2*Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+2*Zt+"z"}function Rl(Zt,te){var Le=4.5,Se,Dt;function zt(se){return se&&(typeof Le=="function"&&Dt.pointRadius(+Le.apply(this,arguments)),it(se,Se(Dt))),Dt.result()}return zt.area=function(se){return it(se,Se(Uo)),Uo.result()},zt.measure=function(se){return it(se,Se(Vu)),Vu.result()},zt.bounds=function(se){return it(se,Se(Uu)),Uu.result()},zt.centroid=function(se){return it(se,Se(ou)),ou.result()},zt.projection=function(se){return arguments.length?(Se=se==null?(Zt=null,vo):(Zt=se).stream,zt):Zt},zt.context=function(se){return arguments.length?(Dt=se==null?(te=null,new ss):new Gu(te=se),typeof Le!="function"&&Dt.pointRadius(Le),zt):te},zt.pointRadius=function(se){return arguments.length?(Le=typeof se=="function"?se:(Dt.pointRadius(+se),+se),zt):Le},zt.projection(Zt).context(te)}function tc(Zt){return{stream:Wu(Zt)}}function Wu(Zt){return function(te){var Le=new tl;for(var Se in Zt)Le[Se]=Zt[Se];return Le.stream=te,Le}}function tl(){}tl.prototype={constructor:tl,point:function(te,Le){this.stream.point(te,Le)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Iu(Zt,te,Le){var Se=Zt.clipExtent&&Zt.clipExtent();return Zt.scale(150).translate([0,0]),Se!=null&&Zt.clipExtent(null),it(Le,Zt.stream(Uu)),te(Uu.result()),Se!=null&&Zt.clipExtent(Se),Zt}function Lu(Zt,te,Le){return Iu(Zt,function(Se){var Dt=te[1][0]-te[0][0],zt=te[1][1]-te[0][1],se=Math.min(Dt/(Se[1][0]-Se[0][0]),zt/(Se[1][1]-Se[0][1])),re=+te[0][0]+(Dt-se*(Se[1][0]+Se[0][0]))/2,fe=+te[0][1]+(zt-se*(Se[1][1]+Se[0][1]))/2;Zt.scale(150*se).translate([re,fe])},Le)}function mu(Zt,te,Le){return Lu(Zt,[[0,0],te],Le)}function Hu(Zt,te,Le){return Iu(Zt,function(Se){var Dt=+te,zt=Dt/(Se[1][0]-Se[0][0]),se=(Dt-zt*(Se[1][0]+Se[0][0]))/2,re=-zt*Se[0][1];Zt.scale(150*zt).translate([se,re])},Le)}function Us(Zt,te,Le){return Iu(Zt,function(Se){var Dt=+te,zt=Dt/(Se[1][1]-Se[0][1]),se=-zt*Se[0][0],re=(Dt-zt*(Se[1][1]+Se[0][1]))/2;Zt.scale(150*zt).translate([se,re])},Le)}var Dl=16,hc=b(30*o);function Pl(Zt,te){return+te?Bl(Zt,te):jl(Zt)}function jl(Zt){return Wu({point:function(Le,Se){Le=Zt(Le,Se),this.stream.point(Le[0],Le[1])}})}function Bl(Zt,te){function Le(Se,Dt,zt,se,re,fe,Fe,Ke,rn,Je,pn,hn,Jn,Vn){var Zn=Fe-Se,Wn=Ke-Dt,cr=Zn*Zn+Wn*Wn;if(cr>4*te&&Jn--){var xr=se+Je,Hr=re+pn,mi=fe+hn,Br=P(xr*xr+Hr*Hr+mi*mi),ui=L(mi/=Br),_i=u(u(mi)-1)<s||u(zt-rn)<s?(zt+rn)/2:v(Hr,xr),Zi=Zt(_i,ui),Ri=Zi[0],Ma=Zi[1],ga=Ri-Se,la=Ma-Dt,ii=Wn*ga-Zn*la;(ii*ii/cr>te||u((Zn*ga+Wn*la)/cr-.5)>.3||se*Je+re*pn+fe*hn<hc)&&(Le(Se,Dt,zt,se,re,fe,Ri,Ma,_i,xr/=Br,Hr/=Br,mi,Jn,Vn),Vn.point(Ri,Ma),Le(Ri,Ma,_i,xr,Hr,mi,Fe,Ke,rn,Je,pn,hn,Jn,Vn))}}return function(Se){var Dt,zt,se,re,fe,Fe,Ke,rn,Je,pn,hn,Jn,Vn={point:Zn,lineStart:Wn,lineEnd:xr,polygonStart:function(){Se.polygonStart(),Vn.lineStart=Hr},polygonEnd:function(){Se.polygonEnd(),Vn.lineStart=Wn}};function Zn(ui,_i){ui=Zt(ui,_i),Se.point(ui[0],ui[1])}function Wn(){rn=NaN,Vn.point=cr,Se.lineStart()}function cr(ui,_i){var Zi=et([ui,_i]),Ri=Zt(ui,_i);Le(rn,Je,Ke,pn,hn,Jn,rn=Ri[0],Je=Ri[1],Ke=ui,pn=Zi[0],hn=Zi[1],Jn=Zi[2],Dl,Se),Se.point(rn,Je)}function xr(){Vn.point=Zn,Se.lineEnd()}function Hr(){Wn(),Vn.point=mi,Vn.lineEnd=Br}function mi(ui,_i){cr(Dt=ui,_i),zt=rn,se=Je,re=pn,fe=hn,Fe=Jn,Vn.point=cr}function Br(){Le(rn,Je,Ke,pn,hn,Jn,zt,se,Dt,re,fe,Fe,Dl,Se),Vn.lineEnd=xr,xr()}return Vn}}var sc=Wu({point:function(te,Le){this.stream.point(te*o,Le*o)}});function el(Zt){return Wu({point:function(Le,Se){var Dt=Zt(Le,Se);return this.stream.point(Dt[0],Dt[1])}})}function Tl(Zt,te,Le,Se,Dt){function zt(se,re){return se*=Se,re*=Dt,[te+Zt*se,Le-Zt*re]}return zt.invert=function(se,re){return[(se-te)/Zt*Se,(Le-re)/Zt*Dt]},zt}function Nl(Zt,te,Le,Se,Dt,zt){if(!zt)return Tl(Zt,te,Le,Se,Dt);var se=b(zt),re=m(zt),fe=se*Zt,Fe=re*Zt,Ke=se/Zt,rn=re/Zt,Je=(re*Le-se*te)/Zt,pn=(re*te+se*Le)/Zt;function hn(Jn,Vn){return Jn*=Se,Vn*=Dt,[fe*Jn-Fe*Vn+te,Le-Fe*Jn-fe*Vn]}return hn.invert=function(Jn,Vn){return[Se*(Ke*Jn-rn*Vn+Je),Dt*(pn-rn*Jn-Ke*Vn)]},hn}function tu(Zt){return po(function(){return Zt})()}function po(Zt){var te,Le=150,Se=480,Dt=250,zt=0,se=0,re=0,fe=0,Fe=0,Ke,rn=0,Je=1,pn=1,hn=null,Jn=au,Vn=null,Zn,Wn,cr,xr=vo,Hr=.5,mi,Br,ui,_i,Zi;function Ri(ii){return ui(ii[0]*o,ii[1]*o)}function Ma(ii){return ii=ui.invert(ii[0],ii[1]),ii&&[ii[0]*a,ii[1]*a]}Ri.stream=function(ii){return _i&&Zi===ii?_i:_i=sc(el(Ke)(Jn(mi(xr(Zi=ii)))))},Ri.preclip=function(ii){return arguments.length?(Jn=ii,hn=void 0,la()):Jn},Ri.postclip=function(ii){return arguments.length?(xr=ii,Vn=Zn=Wn=cr=null,la()):xr},Ri.clipAngle=function(ii){return arguments.length?(Jn=+ii?Ht(hn=ii*o):(hn=null,au),la()):hn*a},Ri.clipExtent=function(ii){return arguments.length?(xr=ii==null?(Vn=Zn=Wn=cr=null,vo):qn(Vn=+ii[0][0],Zn=+ii[0][1],Wn=+ii[1][0],cr=+ii[1][1]),la()):Vn==null?null:[[Vn,Zn],[Wn,cr]]},Ri.scale=function(ii){return arguments.length?(Le=+ii,ga()):Le},Ri.translate=function(ii){return arguments.length?(Se=+ii[0],Dt=+ii[1],ga()):[Se,Dt]},Ri.center=function(ii){return arguments.length?(zt=ii[0]%360*o,se=ii[1]%360*o,ga()):[zt*a,se*a]},Ri.rotate=function(ii){return arguments.length?(re=ii[0]%360*o,fe=ii[1]%360*o,Fe=ii.length>2?ii[2]%360*o:0,ga()):[re*a,fe*a,Fe*a]},Ri.angle=function(ii){return arguments.length?(rn=ii%360*o,ga()):rn*a},Ri.reflectX=function(ii){return arguments.length?(Je=ii?-1:1,ga()):Je<0},Ri.reflectY=function(ii){return arguments.length?(pn=ii?-1:1,ga()):pn<0},Ri.precision=function(ii){return arguments.length?(mi=Pl(Br,Hr=ii*ii),la()):P(Hr)},Ri.fitExtent=function(ii,Pa){return Lu(Ri,ii,Pa)},Ri.fitSize=function(ii,Pa){return mu(Ri,ii,Pa)},Ri.fitWidth=function(ii,Pa){return Hu(Ri,ii,Pa)},Ri.fitHeight=function(ii,Pa){return Us(Ri,ii,Pa)};function ga(){var ii=Nl(Le,0,0,Je,pn,rn).apply(null,te(zt,se)),Pa=Nl(Le,Se-ii[0],Dt-ii[1],Je,pn,rn);return Ke=vr(re,fe,Fe),Br=_n(te,Pa),ui=_n(Ke,Br),mi=Pl(Br,Hr),la()}function la(){return _i=Zi=null,Ri}return function(){return te=Zt.apply(this,arguments),Ri.invert=te.invert&&Ma,ga()}}function pl(Zt){var te=0,Le=r/3,Se=po(Zt),Dt=Se(te,Le);return Dt.parallels=function(zt){return arguments.length?Se(te=zt[0]*o,Le=zt[1]*o):[te*a,Le*a]},Dt}function fl(Zt){var te=b(Zt);function Le(Se,Dt){return[Se*te,m(Dt)/te]}return Le.invert=function(Se,Dt){return[Se/te,L(Dt*te)]},Le}function Hs(Zt,te){var Le=m(Zt),Se=(Le+m(te))/2;if(u(Se)<s)return fl(Zt);var Dt=1+Le*(2*Se-Le),zt=P(Dt)/Se;function se(re,fe){var Fe=P(Dt-2*Se*m(fe))/Se;return[Fe*m(re*=Se),zt-Fe*b(re)]}return se.invert=function(re,fe){var Fe=zt-fe,Ke=v(re,u(Fe))*S(Fe);return Fe*Se<0&&(Ke-=r*S(re)*S(Fe)),[Ke/Se,L((Dt-(re*re+Fe*Fe)*Se*Se)/(2*Se))]},se}function Da(){return pl(Hs).scale(155.424).center([0,33.6442])}function bo(){return Da().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ks(Zt){var te=Zt.length;return{point:function(Se,Dt){for(var zt=-1;++zt<te;)Zt[zt].point(Se,Dt)},sphere:function(){for(var Se=-1;++Se<te;)Zt[Se].sphere()},lineStart:function(){for(var Se=-1;++Se<te;)Zt[Se].lineStart()},lineEnd:function(){for(var Se=-1;++Se<te;)Zt[Se].lineEnd()},polygonStart:function(){for(var Se=-1;++Se<te;)Zt[Se].polygonStart()},polygonEnd:function(){for(var Se=-1;++Se<te;)Zt[Se].polygonEnd()}}}function gl(){var Zt,te,Le=bo(),Se,Dt=Da().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zt,se=Da().rotate([157,0]).center([-3,19.9]).parallels([8,18]),re,fe,Fe={point:function(pn,hn){fe=[pn,hn]}};function Ke(Je){var pn=Je[0],hn=Je[1];return fe=null,Se.point(pn,hn),fe||(zt.point(pn,hn),fe)||(re.point(pn,hn),fe)}Ke.invert=function(Je){var pn=Le.scale(),hn=Le.translate(),Jn=(Je[0]-hn[0])/pn,Vn=(Je[1]-hn[1])/pn;return(Vn>=.12&&Vn<.234&&Jn>=-.425&&Jn<-.214?Dt:Vn>=.166&&Vn<.234&&Jn>=-.214&&Jn<-.115?se:Le).invert(Je)},Ke.stream=function(Je){return Zt&&te===Je?Zt:Zt=ks([Le.stream(te=Je),Dt.stream(Je),se.stream(Je)])},Ke.precision=function(Je){return arguments.length?(Le.precision(Je),Dt.precision(Je),se.precision(Je),rn()):Le.precision()},Ke.scale=function(Je){return arguments.length?(Le.scale(Je),Dt.scale(Je*.35),se.scale(Je),Ke.translate(Le.translate())):Le.scale()},Ke.translate=function(Je){if(!arguments.length)return Le.translate();var pn=Le.scale(),hn=+Je[0],Jn=+Je[1];return Se=Le.translate(Je).clipExtent([[hn-.455*pn,Jn-.238*pn],[hn+.455*pn,Jn+.238*pn]]).stream(Fe),zt=Dt.translate([hn-.307*pn,Jn+.201*pn]).clipExtent([[hn-.425*pn+s,Jn+.12*pn+s],[hn-.214*pn-s,Jn+.234*pn-s]]).stream(Fe),re=se.translate([hn-.205*pn,Jn+.212*pn]).clipExtent([[hn-.214*pn+s,Jn+.166*pn+s],[hn-.115*pn-s,Jn+.234*pn-s]]).stream(Fe),rn()},Ke.fitExtent=function(Je,pn){return Lu(Ke,Je,pn)},Ke.fitSize=function(Je,pn){return mu(Ke,Je,pn)},Ke.fitWidth=function(Je,pn){return Hu(Ke,Je,pn)},Ke.fitHeight=function(Je,pn){return Us(Ke,Je,pn)};function rn(){return Zt=te=null,Ke}return Ke.scale(1070)}function nl(Zt){return function(te,Le){var Se=b(te),Dt=b(Le),zt=Zt(Se*Dt);return zt===Infinity?[2,0]:[zt*Dt*m(te),zt*m(Le)]}}function Yu(Zt){return function(te,Le){var Se=P(te*te+Le*Le),Dt=Zt(Se),zt=m(Dt),se=b(Dt);return[v(te*zt,Se*se),L(Se&&Le*zt/Se)]}}var dc=nl(function(Zt){return P(2/(1+Zt))});dc.invert=Yu(function(Zt){return 2*L(Zt/2)});function As(){return tu(dc).scale(124.75).clipAngle(180-.001)}var rl=nl(function(Zt){return(Zt=O(Zt))&&Zt/m(Zt)});rl.invert=Yu(function(Zt){return Zt});function lu(){return tu(rl).scale(79.4188).clipAngle(180-.001)}function Ys(Zt,te){return[Zt,M(A((h+te)/2))]}Ys.invert=function(Zt,te){return[Zt,2*f(g(te))-h]};function $o(){return eu(Ys).scale(961/i)}function eu(Zt){var te=tu(Zt),Le=te.center,Se=te.scale,Dt=te.translate,zt=te.clipExtent,se=null,re,fe,Fe;te.scale=function(rn){return arguments.length?(Se(rn),Ke()):Se()},te.translate=function(rn){return arguments.length?(Dt(rn),Ke()):Dt()},te.center=function(rn){return arguments.length?(Le(rn),Ke()):Le()},te.clipExtent=function(rn){return arguments.length?(rn==null?se=re=fe=Fe=null:(se=+rn[0][0],re=+rn[0][1],fe=+rn[1][0],Fe=+rn[1][1]),Ke()):se==null?null:[[se,re],[fe,Fe]]};function Ke(){var rn=r*Se(),Je=te(ka(te.rotate()).invert([0,0]));return zt(se==null?[[Je[0]-rn,Je[1]-rn],[Je[0]+rn,Je[1]+rn]]:Zt===Ys?[[Math.max(Je[0]-rn,se),re],[Math.min(Je[0]+rn,fe),Fe]]:[[se,Math.max(Je[1]-rn,re)],[fe,Math.min(Je[1]+rn,Fe)]])}return Ke()}function Ru(Zt){return A((h+Zt)/2)}function Qo(Zt,te){var Le=b(Zt),Se=Zt===te?m(Zt):M(Le/b(te))/M(Ru(te)/Ru(Zt)),Dt=Le*x(Ru(Zt),Se)/Se;if(!Se)return Ys;function zt(se,re){Dt>0?re<-h+s&&(re=-h+s):re>h-s&&(re=h-s);var fe=Dt/x(Ru(re),Se);return[fe*m(Se*se),Dt-fe*b(Se*se)]}return zt.invert=function(se,re){var fe=Dt-re,Fe=S(Se)*P(se*se+fe*fe),Ke=v(se,u(fe))*S(fe);return fe*Se<0&&(Ke-=r*S(se)*S(fe)),[Ke/Se,2*f(x(Dt/Fe,1/Se))-h]},zt}function Wi(){return pl(Qo).scale(109.5).parallels([30,30])}function Cs(Zt,te){return[Zt,te]}Cs.invert=Cs;function Zu(){return tu(Cs).scale(152.63)}function Du(Zt,te){var Le=b(Zt),Se=Zt===te?m(Zt):(Le-b(te))/(te-Zt),Dt=Le/Se+Zt;if(u(Se)<s)return Cs;function zt(se,re){var fe=Dt-re,Fe=Se*se;return[fe*m(Fe),Dt-fe*b(Fe)]}return zt.invert=function(se,re){var fe=Dt-re,Fe=v(se,u(fe))*S(fe);return fe*Se<0&&(Fe-=r*S(se)*S(fe)),[Fe/Se,Dt-S(Se)*P(se*se+fe*fe)]},zt}function jo(){return pl(Du).scale(131.154).center([0,13.9389])}var Bo=1.340264,Tu=-.081106,Mi=893e-6,il=.003796,ju=P(3)/2,Bu=12;function nu(Zt,te){var Le=L(ju*m(te)),Se=Le*Le,Dt=Se*Se*Se;return[Zt*b(Le)/(ju*(Bo+3*Tu*Se+Dt*(7*Mi+9*il*Se))),Le*(Bo+Tu*Se+Dt*(Mi+il*Se))]}nu.invert=function(Zt,te){for(var Le=te,Se=Le*Le,Dt=Se*Se*Se,zt=0,se,re,fe;zt<Bu&&(re=Le*(Bo+Tu*Se+Dt*(Mi+il*Se))-te,fe=Bo+3*Tu*Se+Dt*(7*Mi+9*il*Se),Le-=se=re/fe,Se=Le*Le,Dt=Se*Se*Se,!(u(se)<c));++zt);return[ju*Zt*(Bo+3*Tu*Se+Dt*(7*Mi+9*il*Se))/b(Le),L(m(Le)/ju)]};function we(){return tu(nu).scale(177.158)}function Pe(Zt,te){var Le=b(te),Se=b(Zt)*Le;return[Le*m(Zt)/Se,m(te)/Se]}Pe.invert=Yu(f);function dn(){return tu(Pe).scale(144.049).clipAngle(60)}function tn(){var Zt=1,te=0,Le=0,Se=1,Dt=1,zt=0,se,re,fe=null,Fe,Ke,rn,Je=1,pn=1,hn=Wu({point:function(Hr,mi){var Br=cr([Hr,mi]);this.stream.point(Br[0],Br[1])}}),Jn=vo,Vn,Zn;function Wn(){return Je=Zt*Se,pn=Zt*Dt,Vn=Zn=null,cr}function cr(xr){var Hr=xr[0]*Je,mi=xr[1]*pn;if(zt){var Br=mi*se-Hr*re;Hr=Hr*se+mi*re,mi=Br}return[Hr+te,mi+Le]}return cr.invert=function(xr){var Hr=xr[0]-te,mi=xr[1]-Le;if(zt){var Br=mi*se+Hr*re;Hr=Hr*se-mi*re,mi=Br}return[Hr/Je,mi/pn]},cr.stream=function(xr){return Vn&&Zn===xr?Vn:Vn=hn(Jn(Zn=xr))},cr.postclip=function(xr){return arguments.length?(Jn=xr,fe=Fe=Ke=rn=null,Wn()):Jn},cr.clipExtent=function(xr){return arguments.length?(Jn=xr==null?(fe=Fe=Ke=rn=null,vo):qn(fe=+xr[0][0],Fe=+xr[0][1],Ke=+xr[1][0],rn=+xr[1][1]),Wn()):fe==null?null:[[fe,Fe],[Ke,rn]]},cr.scale=function(xr){return arguments.length?(Zt=+xr,Wn()):Zt},cr.translate=function(xr){return arguments.length?(te=+xr[0],Le=+xr[1],Wn()):[te,Le]},cr.angle=function(xr){return arguments.length?(zt=xr%360*o,re=m(zt),se=b(zt),Wn()):zt*a},cr.reflectX=function(xr){return arguments.length?(Se=xr?-1:1,Wn()):Se<0},cr.reflectY=function(xr){return arguments.length?(Dt=xr?-1:1,Wn()):Dt<0},cr.fitExtent=function(xr,Hr){return Lu(cr,xr,Hr)},cr.fitSize=function(xr,Hr){return mu(cr,xr,Hr)},cr.fitWidth=function(xr,Hr){return Hu(cr,xr,Hr)},cr.fitHeight=function(xr,Hr){return Us(cr,xr,Hr)},cr}function wn(Zt,te){var Le=te*te,Se=Le*Le;return[Zt*(.8707-.131979*Le+Se*(-.013791+Se*(.003971*Le-.001529*Se))),te*(1.007226+Le*(.015085+Se*(-.044475+.028874*Le-.005916*Se)))]}wn.invert=function(Zt,te){var Le=te,Se=25,Dt;do{var zt=Le*Le,se=zt*zt;Le-=Dt=(Le*(1.007226+zt*(.015085+se*(-.044475+.028874*zt-.005916*se)))-te)/(1.007226+zt*(.015085*3+se*(-.044475*7+.028874*9*zt-.005916*11*se)))}while(u(Dt)>s&&--Se>0);return[Zt/(.8707+(zt=Le*Le)*(-.131979+zt*(-.013791+zt*zt*zt*(.003971-.001529*zt)))),Le]};function dr(){return tu(wn).scale(175.295)}function Rr(Zt,te){return[b(te)*m(Zt),m(te)]}Rr.invert=Yu(L);function Xr(){return tu(Rr).scale(249.5).clipAngle(90+s)}function ti(Zt,te){var Le=b(te),Se=1+b(Zt)*Le;return[Le*m(Zt)/Se,m(te)/Se]}ti.invert=Yu(function(Zt){return 2*f(Zt)});function Fr(){return tu(ti).scale(250).clipAngle(142)}function li(Zt,te){return[M(A((h+te)/2)),-Zt]}li.invert=function(Zt,te){return[-te,2*f(g(Zt))-h]};function yr(){var Zt=eu(li),te=Zt.center,Le=Zt.rotate;return Zt.center=function(Se){return arguments.length?te([-Se[1],Se[0]]):(Se=te(),[Se[1],-Se[0]])},Zt.rotate=function(Se){return arguments.length?Le([Se[0],Se[1],Se.length>2?Se[2]+90:90]):(Se=Le(),[Se[0],Se[1],Se[2]-90])},Le([0,0,90]).scale(159.155)}t.geoAlbers=bo,t.geoAlbersUsa=gl,t.geoArea=Q,t.geoAzimuthalEqualArea=As,t.geoAzimuthalEqualAreaRaw=dc,t.geoAzimuthalEquidistant=lu,t.geoAzimuthalEquidistantRaw=rl,t.geoBounds=hi,t.geoCentroid=ir,t.geoCircle=Ea,t.geoClipAntimeridian=au,t.geoClipCircle=Ht,t.geoClipExtent=Un,t.geoClipRectangle=qn,t.geoConicConformal=Wi,t.geoConicConformalRaw=Qo,t.geoConicEqualArea=Da,t.geoConicEqualAreaRaw=Hs,t.geoConicEquidistant=jo,t.geoConicEquidistantRaw=Du,t.geoContains=mn,t.geoDistance=_o,t.geoEqualEarth=we,t.geoEqualEarthRaw=nu,t.geoEquirectangular=Zu,t.geoEquirectangularRaw=Cs,t.geoGnomonic=dn,t.geoGnomonicRaw=Pe,t.geoGraticule=Ui,t.geoGraticule10=Ka,t.geoIdentity=tn,t.geoInterpolate=xo,t.geoLength=ao,t.geoMercator=$o,t.geoMercatorRaw=Ys,t.geoNaturalEarth1=dr,t.geoNaturalEarth1Raw=wn,t.geoOrthographic=Xr,t.geoOrthographicRaw=Rr,t.geoPath=Rl,t.geoProjection=tu,t.geoProjectionMutator=po,t.geoRotation=ka,t.geoStereographic=Fr,t.geoStereographicRaw=ti,t.geoStream=it,t.geoTransform=tc,t.geoTransverseMercator=yr,t.geoTransverseMercatorRaw=li,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";function s(u,f,v){var b=u.layout,y=[],g=0;Object.keys(u.hexes).forEach(function(W){u.hexes[W].key=W,y.push(u.hexes[W])});var _=l.max(y,function(W){return+W.q}),M=l.min(y,function(W){return+W.q}),x=l.max(y,function(W){return+W.r}),m=l.min(y,function(W){return+W.r}),S=_-M+1,P=x-m+1;b==="odd-r"||b==="even-r"?g=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):g=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var A=g*Math.sqrt(3),O=h(b,A,g),L=n(O);return y.forEach(function(W){W.qc=W.q-M,W.rc=x-W.r,W.x=c(W,b,A,g),W.y=r(W,b,A,g),W.vertices=O,W.points=L}),y}function c(u,f,v,b){var y=0,g=0;switch(f){case"odd-r":g=u.rc%2==1?v:v/2,y=u.qc*v+g;break;case"even-r":g=u.rc%2==0?v:v/2,y=u.qc*v+g;break;case"odd-q":case"even-q":y=u.qc*b*1.5+b;break}return y}function r(u,f,v,b){var y=0,g=0;switch(f){case"odd-r":case"even-r":y=u.rc*b*1.5+b;break;case"odd-q":g=u.qc%2==1?v:v/2,y=u.rc*v+g;break;case"even-q":g=u.qc%2==0?v:v/2,y=u.rc*v+g;break}return y}function h(u,f,v){var b=[];switch(u){case"odd-r":case"even-r":b.push({x:0,y:0-v}),b.push({x:0+f*.5,y:0-.5*v}),b.push({x:0+f*.5,y:0+.5*v}),b.push({x:0,y:0+v}),b.push({x:0-f*.5,y:0+.5*v}),b.push({x:0-f*.5,y:0-.5*v});break;case"odd-q":case"even-q":b.push({x:0-v,y:0}),b.push({x:0-.5*v,y:0-f*.5}),b.push({x:0+.5*v,y:0-f*.5}),b.push({x:0+v,y:0}),b.push({x:0+.5*v,y:0+f*.5}),b.push({x:0-.5*v,y:0+f*.5});break}return b}function n(u){var f="";return u.forEach(function(v){f+=v.x+","+v.y+" "}),f.substring(0,f.length-1)}function i(u){var f={};f.layout=u.layout,f.hexes={};var v=[];Object.keys(u.hexes).forEach(function(S){v.push(u.hexes[S])});var b=l.max(v,function(S){return+S.q}),y=l.min(v,function(S){return+S.q}),g=l.max(v,function(S){return+S.r}),_=l.min(v,function(S){return+S.r}),M,x,m;for(M=y;M<=b;M++)for(x=_;x<=g;x++)m="Q"+M+"R"+x,f.hexes[m]={q:M,r:x};return f}function a(u,f,v,b){var y=[],g=u.layout;Object.keys(u.hexes).forEach(function(pt){y.push(u.hexes[pt])});var _=l.max(y,function(pt){return+pt.q}),M=l.min(y,function(pt){return+pt.q}),x=l.max(y,function(pt){return+pt.r}),m=l.min(y,function(pt){return+pt.r}),S=_-M+1,P=x-m+1,A;g==="odd-r"||g==="even-r"?A=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],W=A*A*4,F=y.length;if(F>1){y.forEach(function(pt){pt.qc=pt.q-M,pt.rc=x-pt.r,pt.x=c(pt,g,O,A),pt.y=r(pt,g,O,A)});for(var K=0;K<F-1;K++)for(var V=K+1;V<F;V++){var k=y[K],Z=y[V];if(k[b]!==Z[b]&&Math.abs(k.q-Z.q)<=1&&Math.abs(k.r-Z.r)<=1&&(k.x-Z.x)*(k.x-Z.x)+(k.y-Z.y)*(k.y-Z.y)<W){var X={};X.x=Z.x+(k.x-Z.x)/2,X.y=Z.y+(k.y-Z.y)/2;var it={},ft=Math.sqrt(3)*4;it.dx=(k.y-Z.y)/ft,it.dy=-(k.x-Z.x)/ft,L.push({x:X.x-2*it.dx,y:X.y-2*it.dy}),L.push({x:X.x-it.dx,y:X.y-it.dy}),L.push({x:X.x,y:X.y}),L.push({x:X.x+it.dx,y:X.y+it.dy}),L.push({x:X.x+2*it.dx,y:X.y+2*it.dy})}}}return L}function o(u,f,v,b){var y=[],g=u.layout;Object.keys(u.hexes).forEach(function(ut){y.push(u.hexes[ut])});var _=l.max(y,function(ut){return+ut.q}),M=l.min(y,function(ut){return+ut.q}),x=l.max(y,function(ut){return+ut.r}),m=l.min(y,function(ut){return+ut.r}),S=_-M+1,P=x-m+1,A;g==="odd-r"||g==="even-r"?A=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],W=A*A*4,F=y.length;if(F>1){y.forEach(function(ut){ut.qc=ut.q-M,ut.rc=x-ut.r,ut.x=c(ut,g,O,A),ut.y=r(ut,g,O,A)});for(var K=0;K<F-1;K++)for(var V=K+1;V<F;V++){var k=y[K],Z=y[V];if(k[b]!==Z[b]&&Math.abs(k.q-Z.q)<=1&&Math.abs(k.r-Z.r)<=1&&(k.x-Z.x)*(k.x-Z.x)+(k.y-Z.y)*(k.y-Z.y)<W){var X={};X.x=Z.x+(k.x-Z.x)/2,X.y=Z.y+(k.y-Z.y)/2;var it={},ft=1;k[b]<Z[b]&&(ft=-1);var pt=Math.sqrt(3)*2*ft;it.dx=(k.y-Z.y)/pt,it.dy=-(k.x-Z.x)/pt,L.push({x1:X.x-it.dx,y1:X.y-it.dy,x2:X.x+it.dx,y2:X.y+it.dy})}}}return L}t.renderHexJSON=s,t.getGridForHexJSON=i,t.getBoundaryDotsForHexJSON=a,t.getBoundarySegmentsForHexJSON=o,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(Wt,ie){return Wt.parent===ie.parent?1:2}function s(Wt){return Wt.reduce(c,0)/Wt.length}function c(Wt,ie){return Wt+ie.x}function r(Wt){return 1+Wt.reduce(h,0)}function h(Wt,ie){return Math.max(Wt,ie.y)}function n(Wt){for(var ie;ie=Wt.children;)Wt=ie[0];return Wt}function i(Wt){for(var ie;ie=Wt.children;)Wt=ie[ie.length-1];return Wt}function a(){var Wt=l,ie=1,Ae=1,ue=!1;function xe($e){var Fn,or=0;$e.eachAfter(function(ln){var Cr=ln.children;Cr?(ln.x=s(Cr),ln.y=r(Cr)):(ln.x=Fn?or+=Wt(ln,Fn):0,ln.y=0,Fn=ln)});var En=n($e),Pn=i($e),br=En.x-Wt(En,Pn)/2,Pr=Pn.x+Wt(Pn,En)/2;return $e.eachAfter(ue?function(ln){ln.x=(ln.x-$e.x)*ie,ln.y=($e.y-ln.y)*Ae}:function(ln){ln.x=(ln.x-br)/(Pr-br)*ie,ln.y=(1-($e.y?ln.y/$e.y:1))*Ae})}return xe.separation=function($e){return arguments.length?(Wt=$e,xe):Wt},xe.size=function($e){return arguments.length?(ue=!1,ie=+$e[0],Ae=+$e[1],xe):ue?null:[ie,Ae]},xe.nodeSize=function($e){return arguments.length?(ue=!0,ie=+$e[0],Ae=+$e[1],xe):ue?[ie,Ae]:null},xe}function o(Wt){var ie=0,Ae=Wt.children,ue=Ae&&Ae.length;if(!ue)ie=1;else for(;--ue>=0;)ie+=Ae[ue].value;Wt.value=ie}function u(){return this.eachAfter(o)}function f(Wt){var ie=this,Ae,ue=[ie],xe,$e,Fn;do for(Ae=ue.reverse(),ue=[];ie=Ae.pop();)if(Wt(ie),xe=ie.children,xe)for($e=0,Fn=xe.length;$e<Fn;++$e)ue.push(xe[$e]);while(ue.length);return this}function v(Wt){for(var ie=this,Ae=[ie],ue,xe;ie=Ae.pop();)if(Wt(ie),ue=ie.children,ue)for(xe=ue.length-1;xe>=0;--xe)Ae.push(ue[xe]);return this}function b(Wt){for(var ie=this,Ae=[ie],ue=[],xe,$e,Fn;ie=Ae.pop();)if(ue.push(ie),xe=ie.children,xe)for($e=0,Fn=xe.length;$e<Fn;++$e)Ae.push(xe[$e]);for(;ie=ue.pop();)Wt(ie);return this}function y(Wt){return this.eachAfter(function(ie){for(var Ae=+Wt(ie.data)||0,ue=ie.children,xe=ue&&ue.length;--xe>=0;)Ae+=ue[xe].value;ie.value=Ae})}function g(Wt){return this.eachBefore(function(ie){ie.children&&ie.children.sort(Wt)})}function _(Wt){for(var ie=this,Ae=M(ie,Wt),ue=[ie];ie!==Ae;)ie=ie.parent,ue.push(ie);for(var xe=ue.length;Wt!==Ae;)ue.splice(xe,0,Wt),Wt=Wt.parent;return ue}function M(Wt,ie){if(Wt===ie)return Wt;var Ae=Wt.ancestors(),ue=ie.ancestors(),xe=null;for(Wt=Ae.pop(),ie=ue.pop();Wt===ie;)xe=Wt,Wt=Ae.pop(),ie=ue.pop();return xe}function x(){for(var Wt=this,ie=[Wt];Wt=Wt.parent;)ie.push(Wt);return ie}function m(){var Wt=[];return this.each(function(ie){Wt.push(ie)}),Wt}function S(){var Wt=[];return this.eachBefore(function(ie){ie.children||Wt.push(ie)}),Wt}function P(){var Wt=this,ie=[];return Wt.each(function(Ae){Ae!==Wt&&ie.push({source:Ae.parent,target:Ae})}),ie}function A(Wt,ie){var Ae=new K(Wt),ue=+Wt.value&&(Ae.value=Wt.value),xe,$e=[Ae],Fn,or,En,Pn;for(ie==null&&(ie=L);xe=$e.pop();)if(ue&&(xe.value=+xe.data.value),(or=ie(xe.data))&&(Pn=or.length))for(xe.children=new Array(Pn),En=Pn-1;En>=0;--En)$e.push(Fn=xe.children[En]=new K(or[En])),Fn.parent=xe,Fn.depth=xe.depth+1;return Ae.eachBefore(F)}function O(){return A(this).eachBefore(W)}function L(Wt){return Wt.children}function W(Wt){Wt.data=Wt.data.data}function F(Wt){var ie=0;do Wt.height=ie;while((Wt=Wt.parent)&&Wt.height<++ie)}function K(Wt){this.data=Wt,this.depth=this.height=0,this.parent=null}K.prototype=A.prototype={constructor:K,count:u,each:f,eachAfter:b,eachBefore:v,sum:y,sort:g,path:_,ancestors:x,descendants:m,leaves:S,links:P,copy:O};var V=Array.prototype.slice;function k(Wt){for(var ie=Wt.length,Ae,ue;ie;)ue=Math.random()*ie--|0,Ae=Wt[ie],Wt[ie]=Wt[ue],Wt[ue]=Ae;return Wt}function Z(Wt){for(var ie=0,Ae=(Wt=k(V.call(Wt))).length,ue=[],xe,$e;ie<Ae;)xe=Wt[ie],$e&&ft($e,xe)?++ie:($e=ut(ue=X(ue,xe)),ie=0);return $e}function X(Wt,ie){var Ae,ue;if(pt(ie,Wt))return[ie];for(Ae=0;Ae<Wt.length;++Ae)if(it(ie,Wt[Ae])&&pt(Nt(Wt[Ae],ie),Wt))return[Wt[Ae],ie];for(Ae=0;Ae<Wt.length-1;++Ae)for(ue=Ae+1;ue<Wt.length;++ue)if(it(Nt(Wt[Ae],Wt[ue]),ie)&&it(Nt(Wt[Ae],ie),Wt[ue])&&it(Nt(Wt[ue],ie),Wt[Ae])&&pt(Rt(Wt[Ae],Wt[ue],ie),Wt))return[Wt[Ae],Wt[ue],ie];throw new Error}function it(Wt,ie){var Ae=Wt.r-ie.r,ue=ie.x-Wt.x,xe=ie.y-Wt.y;return Ae<0||Ae*Ae<ue*ue+xe*xe}function ft(Wt,ie){var Ae=Wt.r-ie.r+1e-6,ue=ie.x-Wt.x,xe=ie.y-Wt.y;return Ae>0&&Ae*Ae>ue*ue+xe*xe}function pt(Wt,ie){for(var Ae=0;Ae<ie.length;++Ae)if(!ft(Wt,ie[Ae]))return!1;return!0}function ut(Wt){switch(Wt.length){case 1:return It(Wt[0]);case 2:return Nt(Wt[0],Wt[1]);case 3:return Rt(Wt[0],Wt[1],Wt[2])}}function It(Wt){return{x:Wt.x,y:Wt.y,r:Wt.r}}function Nt(Wt,ie){var Ae=Wt.x,ue=Wt.y,xe=Wt.r,$e=ie.x,Fn=ie.y,or=ie.r,En=$e-Ae,Pn=Fn-ue,br=or-xe,Pr=Math.sqrt(En*En+Pn*Pn);return{x:(Ae+$e+En/Pr*br)/2,y:(ue+Fn+Pn/Pr*br)/2,r:(Pr+xe+or)/2}}function Rt(Wt,ie,Ae){var ue=Wt.x,xe=Wt.y,$e=Wt.r,Fn=ie.x,or=ie.y,En=ie.r,Pn=Ae.x,br=Ae.y,Pr=Ae.r,ln=ue-Fn,Cr=ue-Pn,Ar=xe-or,Be=xe-br,We=En-$e,Ye=Pr-$e,fn=ue*ue+xe*xe-$e*$e,gn=fn-Fn*Fn-or*or+En*En,Bn=fn-Pn*Pn-br*br+Pr*Pr,bn=Cr*Ar-ln*Be,Ln=(Ar*Bn-Be*gn)/(bn*2)-ue,ir=(Be*We-Ar*Ye)/bn,Yn=(Cr*gn-ln*Bn)/(bn*2)-xe,_n=(ln*Ye-Cr*We)/bn,Dr=ir*ir+_n*_n-1,vr=2*($e+Ln*ir+Yn*_n),zr=Ln*Ln+Yn*Yn-$e*$e,Ai=-(Dr?(vr+Math.sqrt(vr*vr-4*Dr*zr))/(2*Dr):zr/vr);return{x:ue+Ln+ir*Ai,y:xe+Yn+_n*Ai,r:Ai}}function Mt(Wt,ie,Ae){var ue=Wt.x-ie.x,xe,$e,Fn=Wt.y-ie.y,or,En,Pn=ue*ue+Fn*Fn;Pn?($e=ie.r+Ae.r,$e*=$e,En=Wt.r+Ae.r,En*=En,$e>En?(xe=(Pn+En-$e)/(2*Pn),or=Math.sqrt(Math.max(0,En/Pn-xe*xe)),Ae.x=Wt.x-xe*ue-or*Fn,Ae.y=Wt.y-xe*Fn+or*ue):(xe=(Pn+$e-En)/(2*Pn),or=Math.sqrt(Math.max(0,$e/Pn-xe*xe)),Ae.x=ie.x+xe*ue-or*Fn,Ae.y=ie.y+xe*Fn+or*ue)):(Ae.x=ie.x+Ae.r,Ae.y=ie.y)}function bt(Wt,ie){var Ae=Wt.r+ie.r-1e-6,ue=ie.x-Wt.x,xe=ie.y-Wt.y;return Ae>0&&Ae*Ae>ue*ue+xe*xe}function At(Wt){var ie=Wt._,Ae=Wt.next._,ue=ie.r+Ae.r,xe=(ie.x*Ae.r+Ae.x*ie.r)/ue,$e=(ie.y*Ae.r+Ae.y*ie.r)/ue;return xe*xe+$e*$e}function rt(Wt){this._=Wt,this.next=null,this.previous=null}function Pt(Wt){if(!(xe=Wt.length))return 0;var ie,Ae,ue,xe,$e,Fn,or,En,Pn,br,Pr;if(ie=Wt[0],ie.x=0,ie.y=0,!(xe>1))return ie.r;if(Ae=Wt[1],ie.x=-Ae.r,Ae.x=ie.r,Ae.y=0,!(xe>2))return ie.r+Ae.r;Mt(Ae,ie,ue=Wt[2]),ie=new rt(ie),Ae=new rt(Ae),ue=new rt(ue),ie.next=ue.previous=Ae,Ae.next=ie.previous=ue,ue.next=Ae.previous=ie;t:for(or=3;or<xe;++or){Mt(ie._,Ae._,ue=Wt[or]),ue=new rt(ue),En=Ae.next,Pn=ie.previous,br=Ae._.r,Pr=ie._.r;do if(br<=Pr){if(bt(En._,ue._)){Ae=En,ie.next=Ae,Ae.previous=ie,--or;continue t}br+=En._.r,En=En.next}else{if(bt(Pn._,ue._)){ie=Pn,ie.next=Ae,Ae.previous=ie,--or;continue t}Pr+=Pn._.r,Pn=Pn.previous}while(En!==Pn.next);for(ue.previous=ie,ue.next=Ae,ie.next=Ae.previous=Ae=ue,$e=At(ie);(ue=ue.next)!==Ae;)(Fn=At(ue))<$e&&(ie=ue,$e=Fn);Ae=ie.next}for(ie=[Ae._],ue=Ae;(ue=ue.next)!==Ae;)ie.push(ue._);for(ue=Z(ie),or=0;or<xe;++or)ie=Wt[or],ie.x-=ue.x,ie.y-=ue.y;return ue.r}function z(Wt){return Pt(Wt),Wt}function Q(Wt){return Wt==null?null:gt(Wt)}function gt(Wt){if(typeof Wt!="function")throw new Error;return Wt}function et(){return 0}function ot(Wt){return function(){return Wt}}function xt(Wt){return Math.sqrt(Wt.value)}function H(){var Wt=null,ie=1,Ae=1,ue=et;function xe($e){return $e.x=ie/2,$e.y=Ae/2,Wt?$e.eachBefore(nt(Wt)).eachAfter(at(ue,.5)).eachBefore(q(1)):$e.eachBefore(nt(xt)).eachAfter(at(et,1)).eachAfter(at(ue,$e.r/Math.min(ie,Ae))).eachBefore(q(Math.min(ie,Ae)/(2*$e.r))),$e}return xe.radius=function($e){return arguments.length?(Wt=Q($e),xe):Wt},xe.size=function($e){return arguments.length?(ie=+$e[0],Ae=+$e[1],xe):[ie,Ae]},xe.padding=function($e){return arguments.length?(ue=typeof $e=="function"?$e:ot(+$e),xe):ue},xe}function nt(Wt){return function(ie){ie.children||(ie.r=Math.max(0,+Wt(ie)||0))}}function at(Wt,ie){return function(Ae){if(ue=Ae.children){var ue,xe,$e=ue.length,Fn=Wt(Ae)*ie||0,or;if(Fn)for(xe=0;xe<$e;++xe)ue[xe].r+=Fn;if(or=Pt(ue),Fn)for(xe=0;xe<$e;++xe)ue[xe].r-=Fn;Ae.r=or+Fn}}}function q(Wt){return function(ie){var Ae=ie.parent;ie.r*=Wt,Ae&&(ie.x=Ae.x+Wt*ie.x,ie.y=Ae.y+Wt*ie.y)}}function _t(Wt){Wt.x0=Math.round(Wt.x0),Wt.y0=Math.round(Wt.y0),Wt.x1=Math.round(Wt.x1),Wt.y1=Math.round(Wt.y1)}function yt(Wt,ie,Ae,ue,xe){for(var $e=Wt.children,Fn,or=-1,En=$e.length,Pn=Wt.value&&(ue-ie)/Wt.value;++or<En;)Fn=$e[or],Fn.y0=Ae,Fn.y1=xe,Fn.x0=ie,Fn.x1=ie+=Fn.value*Pn}function Ft(){var Wt=1,ie=1,Ae=0,ue=!1;function xe(Fn){var or=Fn.height+1;return Fn.x0=Fn.y0=Ae,Fn.x1=Wt,Fn.y1=ie/or,Fn.eachBefore($e(ie,or)),ue&&Fn.eachBefore(_t),Fn}function $e(Fn,or){return function(En){En.children&&yt(En,En.x0,Fn*(En.depth+1)/or,En.x1,Fn*(En.depth+2)/or);var Pn=En.x0,br=En.y0,Pr=En.x1-Ae,ln=En.y1-Ae;Pr<Pn&&(Pn=Pr=(Pn+Pr)/2),ln<br&&(br=ln=(br+ln)/2),En.x0=Pn,En.y0=br,En.x1=Pr,En.y1=ln}}return xe.round=function(Fn){return arguments.length?(ue=!!Fn,xe):ue},xe.size=function(Fn){return arguments.length?(Wt=+Fn[0],ie=+Fn[1],xe):[Wt,ie]},xe.padding=function(Fn){return arguments.length?(Ae=+Fn,xe):Ae},xe}var Qt="$",ee={depth:-1},Vt={};function $t(Wt){return Wt.id}function Me(Wt){return Wt.parentId}function me(){var Wt=$t,ie=Me;function Ae(ue){var xe,$e,Fn=ue.length,or,En,Pn,br=new Array(Fn),Pr,ln,Cr={};for($e=0;$e<Fn;++$e)xe=ue[$e],Pn=br[$e]=new K(xe),(Pr=Wt(xe,$e,ue))!=null&&(Pr+="")&&(ln=Qt+(Pn.id=Pr),Cr[ln]=ln in Cr?Vt:Pn);for($e=0;$e<Fn;++$e)if(Pn=br[$e],Pr=ie(ue[$e],$e,ue),Pr==null||!(Pr+="")){if(or)throw new Error("multiple roots");or=Pn}else{if(En=Cr[Qt+Pr],!En)throw new Error("missing: "+Pr);if(En===Vt)throw new Error("ambiguous: "+Pr);En.children?En.children.push(Pn):En.children=[Pn],Pn.parent=En}if(!or)throw new Error("no root");if(or.parent=ee,or.eachBefore(function(Ar){Ar.depth=Ar.parent.depth+1,--Fn}).eachBefore(F),or.parent=null,Fn>0)throw new Error("cycle");return or}return Ae.id=function(ue){return arguments.length?(Wt=gt(ue),Ae):Wt},Ae.parentId=function(ue){return arguments.length?(ie=gt(ue),Ae):ie},Ae}function le(Wt,ie){return Wt.parent===ie.parent?1:2}function be(Wt){var ie=Wt.children;return ie?ie[0]:Wt.t}function ze(Wt){var ie=Wt.children;return ie?ie[ie.length-1]:Wt.t}function Xe(Wt,ie,Ae){var ue=Ae/(ie.i-Wt.i);ie.c-=ue,ie.s+=Ae,Wt.c+=ue,ie.z+=Ae,ie.m+=Ae}function Sn(Wt){for(var ie=0,Ae=0,ue=Wt.children,xe=ue.length,$e;--xe>=0;)$e=ue[xe],$e.z+=ie,$e.m+=ie,ie+=$e.s+(Ae+=$e.c)}function Xn(Wt,ie,Ae){return Wt.a.parent===ie.parent?Wt.a:Ae}function Hn(Wt,ie){this._=Wt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ie}Hn.prototype=Object.create(K.prototype);function nn(Wt){for(var ie=new Hn(Wt,0),Ae,ue=[ie],xe,$e,Fn,or;Ae=ue.pop();)if($e=Ae._.children)for(Ae.children=new Array(or=$e.length),Fn=or-1;Fn>=0;--Fn)ue.push(xe=Ae.children[Fn]=new Hn($e[Fn],Fn)),xe.parent=Ae;return(ie.parent=new Hn(null,0)).children=[ie],ie}function en(){var Wt=le,ie=1,Ae=1,ue=null;function xe(Pn){var br=nn(Pn);if(br.eachAfter($e),br.parent.m=-br.z,br.eachBefore(Fn),ue)Pn.eachBefore(En);else{var Pr=Pn,ln=Pn,Cr=Pn;Pn.eachBefore(function(fn){fn.x<Pr.x&&(Pr=fn),fn.x>ln.x&&(ln=fn),fn.depth>Cr.depth&&(Cr=fn)});var Ar=Pr===ln?1:Wt(Pr,ln)/2,Be=Ar-Pr.x,We=ie/(ln.x+Ar+Be),Ye=Ae/(Cr.depth||1);Pn.eachBefore(function(fn){fn.x=(fn.x+Be)*We,fn.y=fn.depth*Ye})}return Pn}function $e(Pn){var br=Pn.children,Pr=Pn.parent.children,ln=Pn.i?Pr[Pn.i-1]:null;if(br){Sn(Pn);var Cr=(br[0].z+br[br.length-1].z)/2;ln?(Pn.z=ln.z+Wt(Pn._,ln._),Pn.m=Pn.z-Cr):Pn.z=Cr}else ln&&(Pn.z=ln.z+Wt(Pn._,ln._));Pn.parent.A=or(Pn,ln,Pn.parent.A||Pr[0])}function Fn(Pn){Pn._.x=Pn.z+Pn.parent.m,Pn.m+=Pn.parent.m}function or(Pn,br,Pr){if(br){for(var ln=Pn,Cr=Pn,Ar=br,Be=ln.parent.children[0],We=ln.m,Ye=Cr.m,fn=Ar.m,gn=Be.m,Bn;Ar=ze(Ar),ln=be(ln),Ar&&ln;)Be=be(Be),Cr=ze(Cr),Cr.a=Pn,Bn=Ar.z+fn-ln.z-We+Wt(Ar._,ln._),Bn>0&&(Xe(Xn(Ar,Pn,Pr),Pn,Bn),We+=Bn,Ye+=Bn),fn+=Ar.m,We+=ln.m,gn+=Be.m,Ye+=Cr.m;Ar&&!ze(Cr)&&(Cr.t=Ar,Cr.m+=fn-Ye),ln&&!be(Be)&&(Be.t=ln,Be.m+=We-gn,Pr=Pn)}return Pr}function En(Pn){Pn.x*=ie,Pn.y=Pn.depth*Ae}return xe.separation=function(Pn){return arguments.length?(Wt=Pn,xe):Wt},xe.size=function(Pn){return arguments.length?(ue=!1,ie=+Pn[0],Ae=+Pn[1],xe):ue?null:[ie,Ae]},xe.nodeSize=function(Pn){return arguments.length?(ue=!0,ie=+Pn[0],Ae=+Pn[1],xe):ue?[ie,Ae]:null},xe}function An(Wt,ie,Ae,ue,xe){for(var $e=Wt.children,Fn,or=-1,En=$e.length,Pn=Wt.value&&(xe-Ae)/Wt.value;++or<En;)Fn=$e[or],Fn.x0=ie,Fn.x1=ue,Fn.y0=Ae,Fn.y1=Ae+=Fn.value*Pn}var Nn=(1+Math.sqrt(5))/2;function fr(Wt,ie,Ae,ue,xe,$e){for(var Fn=[],or=ie.children,En,Pn,br=0,Pr=0,ln=or.length,Cr,Ar,Be=ie.value,We,Ye,fn,gn,Bn,bn,Ln;br<ln;){Cr=xe-Ae,Ar=$e-ue;do We=or[Pr++].value;while(!We&&Pr<ln);for(Ye=fn=We,bn=Math.max(Ar/Cr,Cr/Ar)/(Be*Wt),Ln=We*We*bn,Bn=Math.max(fn/Ln,Ln/Ye);Pr<ln;++Pr){if(We+=Pn=or[Pr].value,Pn<Ye&&(Ye=Pn),Pn>fn&&(fn=Pn),Ln=We*We*bn,gn=Math.max(fn/Ln,Ln/Ye),gn>Bn){We-=Pn;break}Bn=gn}Fn.push(En={value:We,dice:Cr<Ar,children:or.slice(br,Pr)}),En.dice?yt(En,Ae,ue,xe,Be?ue+=Ar*We/Be:$e):An(En,Ae,ue,Be?Ae+=Cr*We/Be:xe,$e),Be-=We,br=Pr}return Fn}var hi=function Wt(ie){function Ae(ue,xe,$e,Fn,or){fr(ie,ue,xe,$e,Fn,or)}return Ae.ratio=function(ue){return Wt((ue=+ue)>1?ue:1)},Ae}(Nn);function Ce(){var Wt=hi,ie=!1,Ae=1,ue=1,xe=[0],$e=et,Fn=et,or=et,En=et,Pn=et;function br(ln){return ln.x0=ln.y0=0,ln.x1=Ae,ln.y1=ue,ln.eachBefore(Pr),xe=[0],ie&&ln.eachBefore(_t),ln}function Pr(ln){var Cr=xe[ln.depth],Ar=ln.x0+Cr,Be=ln.y0+Cr,We=ln.x1-Cr,Ye=ln.y1-Cr;We<Ar&&(Ar=We=(Ar+We)/2),Ye<Be&&(Be=Ye=(Be+Ye)/2),ln.x0=Ar,ln.y0=Be,ln.x1=We,ln.y1=Ye,ln.children&&(Cr=xe[ln.depth+1]=$e(ln)/2,Ar+=Pn(ln)-Cr,Be+=Fn(ln)-Cr,We-=or(ln)-Cr,Ye-=En(ln)-Cr,We<Ar&&(Ar=We=(Ar+We)/2),Ye<Be&&(Be=Ye=(Be+Ye)/2),Wt(ln,Ar,Be,We,Ye))}return br.round=function(ln){return arguments.length?(ie=!!ln,br):ie},br.size=function(ln){return arguments.length?(Ae=+ln[0],ue=+ln[1],br):[Ae,ue]},br.tile=function(ln){return arguments.length?(Wt=gt(ln),br):Wt},br.padding=function(ln){return arguments.length?br.paddingInner(ln).paddingOuter(ln):br.paddingInner()},br.paddingInner=function(ln){return arguments.length?($e=typeof ln=="function"?ln:ot(+ln),br):$e},br.paddingOuter=function(ln){return arguments.length?br.paddingTop(ln).paddingRight(ln).paddingBottom(ln).paddingLeft(ln):br.paddingTop()},br.paddingTop=function(ln){return arguments.length?(Fn=typeof ln=="function"?ln:ot(+ln),br):Fn},br.paddingRight=function(ln){return arguments.length?(or=typeof ln=="function"?ln:ot(+ln),br):or},br.paddingBottom=function(ln){return arguments.length?(En=typeof ln=="function"?ln:ot(+ln),br):En},br.paddingLeft=function(ln){return arguments.length?(Pn=typeof ln=="function"?ln:ot(+ln),br):Pn},br}function Te(Wt,ie,Ae,ue,xe){var $e=Wt.children,Fn,or=$e.length,En,Pn=new Array(or+1);for(Pn[0]=En=Fn=0;Fn<or;++Fn)Pn[Fn+1]=En+=$e[Fn].value;br(0,or,Wt.value,ie,Ae,ue,xe);function br(Pr,ln,Cr,Ar,Be,We,Ye){if(Pr>=ln-1){var fn=$e[Pr];fn.x0=Ar,fn.y0=Be,fn.x1=We,fn.y1=Ye;return}for(var gn=Pn[Pr],Bn=Cr/2+gn,bn=Pr+1,Ln=ln-1;bn<Ln;){var ir=bn+Ln>>>1;Pn[ir]<Bn?bn=ir+1:Ln=ir}Bn-Pn[bn-1]<Pn[bn]-Bn&&Pr+1<bn&&--bn;var Yn=Pn[bn]-gn,_n=Cr-Yn;if(We-Ar>Ye-Be){var Dr=(Ar*_n+We*Yn)/Cr;br(Pr,bn,Yn,Ar,Be,Dr,Ye),br(bn,ln,_n,Dr,Be,We,Ye)}else{var vr=(Be*_n+Ye*Yn)/Cr;br(Pr,bn,Yn,Ar,Be,We,vr),br(bn,ln,_n,Ar,vr,We,Ye)}}}function Jt(Wt,ie,Ae,ue,xe){(Wt.depth&1?An:yt)(Wt,ie,Ae,ue,xe)}var pe=function Wt(ie){function Ae(ue,xe,$e,Fn,or){if((En=ue._squarify)&&En.ratio===ie)for(var En,Pn,br,Pr,ln=-1,Cr,Ar=En.length,Be=ue.value;++ln<Ar;){for(Pn=En[ln],br=Pn.children,Pr=Pn.value=0,Cr=br.length;Pr<Cr;++Pr)Pn.value+=br[Pr].value;Pn.dice?yt(Pn,xe,$e,Fn,$e+=(or-$e)*Pn.value/Be):An(Pn,xe,$e,xe+=(Fn-xe)*Pn.value/Be,or),Be-=Pn.value}else ue._squarify=En=fr(ie,ue,xe,$e,Fn,or),En.ratio=ie}return Ae.ratio=function(ue){return Wt((ue=+ue)>1?ue:1)},Ae}(Nn);t.cluster=a,t.hierarchy=A,t.pack=H,t.packEnclose=Z,t.packSiblings=z,t.partition=Ft,t.stratify=me,t.tree=en,t.treemap=Ce,t.treemapBinary=Te,t.treemapDice=yt,t.treemapResquarify=pe,t.treemapSlice=An,t.treemapSliceDice=Jt,t.treemapSquarify=hi,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l=Math.PI,s=2*l,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,u,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(a,o,u,f,v,b){this._+="C"+ +a+","+ +o+","+ +u+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,u,f,v){a=+a,o=+o,u=+u,f=+f,v=+v;var b=this._x1,y=this._y1,g=u-a,_=f-o,M=b-a,x=y-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>c)if(!(Math.abs(x*g-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=u-b,P=f-y,A=g*g+_*_,O=S*S+P*P,L=Math.sqrt(A),W=Math.sqrt(m),F=v*Math.tan((l-Math.acos((A+m-O)/(2*L*W)))/2),K=F/W,V=F/L;Math.abs(K-1)>c&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*g)+","+(this._y1=o+V*_)}},arc:function(a,o,u,f,v,b){a=+a,o=+o,u=+u,b=!!b;var y=u*Math.cos(f),g=u*Math.sin(f),_=a+y,M=o+g,x=1^b,m=b?f-v:v-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!u&&(m<0&&(m=m%s+s),m>r?this._+="A"+u+","+u+",0,1,"+x+","+(a-y)+","+(o-g)+"A"+u+","+u+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>c&&(this._+="A"+u+","+u+",0,"+ +(m>=l)+","+x+","+(this._x1=a+u*Math.cos(v))+","+(this._y1=o+u*Math.sin(v))))},rect:function(a,o,u,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l=Math.PI,s=2*l,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,u,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(a,o,u,f,v,b){this._+="C"+ +a+","+ +o+","+ +u+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,u,f,v){a=+a,o=+o,u=+u,f=+f,v=+v;var b=this._x1,y=this._y1,g=u-a,_=f-o,M=b-a,x=y-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>c)if(!(Math.abs(x*g-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=u-b,P=f-y,A=g*g+_*_,O=S*S+P*P,L=Math.sqrt(A),W=Math.sqrt(m),F=v*Math.tan((l-Math.acos((A+m-O)/(2*L*W)))/2),K=F/W,V=F/L;Math.abs(K-1)>c&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*g)+","+(this._y1=o+V*_)}},arc:function(a,o,u,f,v,b){a=+a,o=+o,u=+u,b=!!b;var y=u*Math.cos(f),g=u*Math.sin(f),_=a+y,M=o+g,x=1^b,m=b?f-v:v-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!u&&(m<0&&(m=m%s+s),m>r?this._+="A"+u+","+u+",0,1,"+x+","+(a-y)+","+(o-g)+"A"+u+","+u+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>c&&(this._+="A"+u+","+u+",0,"+ +(m>=l)+","+x+","+(this._x1=a+u*Math.cos(v))+","+(this._y1=o+u*Math.sin(v))))},rect:function(a,o,u,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),e("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),e("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(l,s,c,r){"use strict";function h(O){return O.target.depth}function n(O){return O.depth}function i(O,L){return L-1-O.height}function a(O,L){return O.sourceLinks.length?O.depth:L-1}function o(O){return O.targetLinks.length?O.depth:O.sourceLinks.length?s.min(O.sourceLinks,h)-1:0}function u(O){return function(){return O}}function f(O,L){return b(O.source,L.source)||O.index-L.index}function v(O,L){return b(O.target,L.target)||O.index-L.index}function b(O,L){return O.y0-L.y0}function y(O){return O.value}function g(O){return O.index}function _(O){return O.nodes}function M(O){return O.links}function x(O,L){var W=O.get(L);if(!W)throw new Error("missing: "+L);return W}function m(){var O=0,L=0,W=1,F=1,K=24,V=8,k=g,Z=a,X,it=_,ft=M,pt=6;function ut(){var At={nodes:it.apply(null,arguments),links:ft.apply(null,arguments)};return It(At),Nt(At),Rt(At),Mt(At),bt(At),At}ut.update=function(At){return bt(At),At},ut.nodeId=function(At){return arguments.length?(k=typeof At=="function"?At:u(At),ut):k},ut.nodeAlign=function(At){return arguments.length?(Z=typeof At=="function"?At:u(At),ut):Z},ut.nodeSort=function(At){return arguments.length?(X=At,ut):X},ut.nodeWidth=function(At){return arguments.length?(K=+At,ut):K},ut.nodePadding=function(At){return arguments.length?(V=+At,ut):V},ut.nodes=function(At){return arguments.length?(it=typeof At=="function"?At:u(At),ut):it},ut.links=function(At){return arguments.length?(ft=typeof At=="function"?At:u(At),ut):ft},ut.size=function(At){return arguments.length?(O=L=0,W=+At[0],F=+At[1],ut):[W-O,F-L]},ut.extent=function(At){return arguments.length?(O=+At[0][0],W=+At[1][0],L=+At[0][1],F=+At[1][1],ut):[[O,L],[W,F]]},ut.iterations=function(At){return arguments.length?(pt=+At,ut):pt};function It(At){At.nodes.forEach(function(Pt,z){Pt.index=z,Pt.sourceLinks=[],Pt.targetLinks=[]});var rt=c.map(At.nodes,k);At.links.forEach(function(Pt,z){Pt.index=z;var Q=Pt.source,gt=Pt.target;typeof Q!="object"&&(Q=Pt.source=x(rt,Q)),typeof gt!="object"&&(gt=Pt.target=x(rt,gt)),Q.sourceLinks.push(Pt),gt.targetLinks.push(Pt)})}function Nt(At){At.nodes.forEach(function(rt){rt.value=Math.max(s.sum(rt.sourceLinks,y),s.sum(rt.targetLinks,y))})}function Rt(At){var rt,Pt,z,Q=At.nodes.length;for(rt=At.nodes,Pt=[],z=0;rt.length;++z,rt=Pt,Pt=[]){if(z>Q)throw new Error("circular link");rt.forEach(function(et){et.depth=z,et.sourceLinks.forEach(function(ot){Pt.indexOf(ot.target)<0&&Pt.push(ot.target)})})}for(rt=At.nodes,Pt=[],z=0;rt.length;++z,rt=Pt,Pt=[]){if(z>Q)throw new Error("circular link");rt.forEach(function(et){et.height=z,et.targetLinks.forEach(function(ot){Pt.indexOf(ot.source)<0&&Pt.push(ot.source)})})}var gt=(W-O-K)/(z-1);At.nodes.forEach(function(et){et.x1=(et.x0=O+Math.max(0,Math.min(z-1,Math.floor(Z.call(null,et,z))))*gt)+K})}function Mt(At){var rt=c.nest().key(function(xt){return xt.x0}).sortKeys(s.ascending).entries(At.nodes).map(function(xt){return xt.values});Q(),ot();for(var Pt=.9,z=pt;z>0;--z,Pt*=.9)et(Pt),ot(),gt(Pt),ot();function Q(){var xt=s.min(rt,function(H){return(F-L-(H.length-1)*V)/s.sum(H,y)});rt.forEach(function(H){X!=null&&H.sort(X),H.forEach(function(nt,at){nt.y1=(nt.y0=at)+nt.value*xt})}),At.links.forEach(function(H){H.width=H.value*xt})}function gt(xt){rt.forEach(function(H){H.forEach(function(nt){var at,q,_t,yt,Ft=nt.y0;try{for(var Qt=t.__values(nt.sourceLinks.sort(v)),ee=Qt.next();!ee.done;ee=Qt.next()){var Vt=ee.value,$t=Vt.target,Me=Vt.width,me=Vt.value;if(me>0){var le=0;try{for(var be=(_t=void 0,t.__values($t.targetLinks)),ze=be.next();!ze.done;ze=be.next()){var Xe=ze.value,Sn=Xe.source,Xn=Xe.width;if(Sn===nt)break;le+=Xn+V/2}}catch(Hn){_t={error:Hn}}finally{try{ze&&!ze.done&&(yt=be.return)&&yt.call(be)}finally{if(_t)throw _t.error}}le=(Ft-le-$t.y0)*xt*(me/Math.min(nt.value,$t.value)),$t.y0+=le,$t.y1+=le}Ft+=Me+V/2}}catch(Hn){at={error:Hn}}finally{try{ee&&!ee.done&&(q=Qt.return)&&q.call(Qt)}finally{if(at)throw at.error}}})})}function et(xt){rt.slice().reverse().forEach(function(H){H.forEach(function(nt){var at,q,_t,yt,Ft=nt.y0;try{for(var Qt=t.__values(nt.targetLinks.sort(f)),ee=Qt.next();!ee.done;ee=Qt.next()){var Vt=ee.value,$t=Vt.source,Me=Vt.width,me=Vt.value;if(me>0){var le=0;try{for(var be=(_t=void 0,t.__values($t.sourceLinks)),ze=be.next();!ze.done;ze=be.next()){var Xe=ze.value,Sn=Xe.target,Xn=Xe.width;if(Sn===nt)break;le+=Xn+V/2}}catch(Hn){_t={error:Hn}}finally{try{ze&&!ze.done&&(yt=be.return)&&yt.call(be)}finally{if(_t)throw _t.error}}le=(Ft-le-$t.y0)*xt*(me/Math.min(nt.value,$t.value)),$t.y0+=le,$t.y1+=le}Ft+=Me+V/2}}catch(Hn){at={error:Hn}}finally{try{ee&&!ee.done&&(q=Qt.return)&&q.call(Qt)}finally{if(at)throw at.error}}})})}function ot(){rt.forEach(function(xt){var H,nt,at=L,q=xt.length,_t;for(X===void 0&&xt.sort(b),_t=0;_t<q;++_t)H=xt[_t],nt=at-H.y0,nt>0&&(H.y0+=nt,H.y1+=nt),at=H.y1+V;if(nt=at-V-F,nt>0)for(at=H.y0-=nt,H.y1-=nt,_t=q-2;_t>=0;--_t)H=xt[_t],nt=H.y1+V-at,nt>0&&(H.y0-=nt,H.y1-=nt),at=H.y0})}}function bt(At){At.nodes.forEach(function(rt){rt.sourceLinks.sort(v),rt.targetLinks.sort(f)}),At.nodes.forEach(function(rt){var Pt=rt.y0,z=Pt;rt.sourceLinks.forEach(function(Q){Q.y0=Pt+Q.width/2,Pt+=Q.width}),rt.targetLinks.forEach(function(Q){Q.y1=z+Q.width/2,z+=Q.width})})}return ut}function S(O){return[O.source.x1,O.y0]}function P(O){return[O.target.x0,O.y1]}function A(){return r.linkHorizontal().source(S).target(P)}l.sankey=m,l.sankeyCenter=o,l.sankeyLeft=n,l.sankeyRight=i,l.sankeyJustify=a,l.sankeyLinkHorizontal=A,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(t,l){"use strict";function s(Ne){return function(){return Ne}}var c=Math.abs,r=Math.atan2,h=Math.cos,n=Math.max,i=Math.min,a=Math.sin,o=Math.sqrt,u=1e-12,f=Math.PI,v=f/2,b=2*f;function y(Ne){return Ne>1?0:Ne<-1?f:Math.acos(Ne)}function g(Ne){return Ne>=1?v:Ne<=-1?-v:Math.asin(Ne)}function _(Ne){return Ne.innerRadius}function M(Ne){return Ne.outerRadius}function x(Ne){return Ne.startAngle}function m(Ne){return Ne.endAngle}function S(Ne){return Ne&&Ne.padAngle}function P(Ne,oe,Ht,Ee,an,zn,qn,Un){var Jr=Ht-Ne,Si=Ee-oe,Ci=qn-an,ki=Un-zn,oa=ki*Jr-Ci*Si;if(!(oa*oa<u))return oa=(Ci*(oe-zn)-ki*(Ne-an))/oa,[Ne+oa*Jr,oe+oa*Si]}function A(Ne,oe,Ht,Ee,an,zn,qn){var Un=Ne-Ht,Jr=oe-Ee,Si=(qn?zn:-zn)/o(Un*Un+Jr*Jr),Ci=Si*Jr,ki=-Si*Un,oa=Ne+Ci,Xa=oe+ki,ma=Ht+Ci,mo=Ee+ki,Ba=(oa+ma)/2,ao=(Xa+mo)/2,yo=ma-oa,Ja=mo-Xa,_o=yo*yo+Ja*Ja,ts=an-zn,Do=oa*mo-ma*Xa,xs=(Ja<0?-1:1)*o(n(0,ts*ts*_o-Do*Do)),Mo=(Do*Ja-yo*xs)/_o,$a=(-Do*yo-Ja*xs)/_o,Ms=(Do*Ja+yo*xs)/_o,as=(-Do*yo+Ja*xs)/_o,Ca=Mo-Ba,mn=$a-ao,hr=Ms-Ba,Gr=as-ao;return Ca*Ca+mn*mn>hr*hr+Gr*Gr&&(Mo=Ms,$a=as),{cx:Mo,cy:$a,x01:-Ci,y01:-ki,x11:Mo*(an/ts-1),y11:$a*(an/ts-1)}}function O(){var Ne=_,oe=M,Ht=s(0),Ee=null,an=x,zn=m,qn=S,Un=null;function Jr(){var Si,Ci,ki=+Ne.apply(this,arguments),oa=+oe.apply(this,arguments),Xa=an.apply(this,arguments)-v,ma=zn.apply(this,arguments)-v,mo=c(ma-Xa),Ba=ma>Xa;if(Un||(Un=Si=l.path()),oa<ki&&(Ci=oa,oa=ki,ki=Ci),!(oa>u))Un.moveTo(0,0);else if(mo>b-u)Un.moveTo(oa*h(Xa),oa*a(Xa)),Un.arc(0,0,oa,Xa,ma,!Ba),ki>u&&(Un.moveTo(ki*h(ma),ki*a(ma)),Un.arc(0,0,ki,ma,Xa,Ba));else{var ao=Xa,yo=ma,Ja=Xa,_o=ma,ts=mo,Do=mo,xs=qn.apply(this,arguments)/2,Mo=xs>u&&(Ee?+Ee.apply(this,arguments):o(ki*ki+oa*oa)),$a=i(c(oa-ki)/2,+Ht.apply(this,arguments)),Ms=$a,as=$a,Ca,mn;if(Mo>u){var hr=g(Mo/ki*a(xs)),Gr=g(Mo/oa*a(xs));(ts-=hr*2)>u?(hr*=Ba?1:-1,Ja+=hr,_o-=hr):(ts=0,Ja=_o=(Xa+ma)/2),(Do-=Gr*2)>u?(Gr*=Ba?1:-1,ao+=Gr,yo-=Gr):(Do=0,ao=yo=(Xa+ma)/2)}var Ui=oa*h(ao),Ka=oa*a(ao),xo=ki*h(_o),vo=ki*a(_o);if($a>u){var qi=oa*h(yo),Qa=oa*a(yo),bs=ki*h(Ja),Es=ki*a(Ja),Ga;if(mo<f&&(Ga=P(Ui,Ka,bs,Es,qi,Qa,xo,vo))){var Pu=Ui-Ga[0],Uo=Ka-Ga[1],Ps=qi-Ga[0],Qs=Qa-Ga[1],fs=1/a(y((Pu*Ps+Uo*Qs)/(o(Pu*Pu+Uo*Uo)*o(Ps*Ps+Qs*Qs)))/2),hs=o(Ga[0]*Ga[0]+Ga[1]*Ga[1]);Ms=i($a,(ki-hs)/(fs-1)),as=i($a,(oa-hs)/(fs+1))}}Do>u?as>u?(Ca=A(bs,Es,Ui,Ka,oa,as,Ba),mn=A(qi,Qa,xo,vo,oa,as,Ba),Un.moveTo(Ca.cx+Ca.x01,Ca.cy+Ca.y01),as<$a?Un.arc(Ca.cx,Ca.cy,as,r(Ca.y01,Ca.x01),r(mn.y01,mn.x01),!Ba):(Un.arc(Ca.cx,Ca.cy,as,r(Ca.y01,Ca.x01),r(Ca.y11,Ca.x11),!Ba),Un.arc(0,0,oa,r(Ca.cy+Ca.y11,Ca.cx+Ca.x11),r(mn.cy+mn.y11,mn.cx+mn.x11),!Ba),Un.arc(mn.cx,mn.cy,as,r(mn.y11,mn.x11),r(mn.y01,mn.x01),!Ba))):(Un.moveTo(Ui,Ka),Un.arc(0,0,oa,ao,yo,!Ba)):Un.moveTo(Ui,Ka),!(ki>u)||!(ts>u)?Un.lineTo(xo,vo):Ms>u?(Ca=A(xo,vo,qi,Qa,ki,-Ms,Ba),mn=A(Ui,Ka,bs,Es,ki,-Ms,Ba),Un.lineTo(Ca.cx+Ca.x01,Ca.cy+Ca.y01),Ms<$a?Un.arc(Ca.cx,Ca.cy,Ms,r(Ca.y01,Ca.x01),r(mn.y01,mn.x01),!Ba):(Un.arc(Ca.cx,Ca.cy,Ms,r(Ca.y01,Ca.x01),r(Ca.y11,Ca.x11),!Ba),Un.arc(0,0,ki,r(Ca.cy+Ca.y11,Ca.cx+Ca.x11),r(mn.cy+mn.y11,mn.cx+mn.x11),Ba),Un.arc(mn.cx,mn.cy,Ms,r(mn.y11,mn.x11),r(mn.y01,mn.x01),!Ba))):Un.arc(0,0,ki,_o,Ja,Ba)}if(Un.closePath(),Si)return Un=null,Si+""||null}return Jr.centroid=function(){var Si=(+Ne.apply(this,arguments)+ +oe.apply(this,arguments))/2,Ci=(+an.apply(this,arguments)+ +zn.apply(this,arguments))/2-f/2;return[h(Ci)*Si,a(Ci)*Si]},Jr.innerRadius=function(Si){return arguments.length?(Ne=typeof Si=="function"?Si:s(+Si),Jr):Ne},Jr.outerRadius=function(Si){return arguments.length?(oe=typeof Si=="function"?Si:s(+Si),Jr):oe},Jr.cornerRadius=function(Si){return arguments.length?(Ht=typeof Si=="function"?Si:s(+Si),Jr):Ht},Jr.padRadius=function(Si){return arguments.length?(Ee=Si==null?null:typeof Si=="function"?Si:s(+Si),Jr):Ee},Jr.startAngle=function(Si){return arguments.length?(an=typeof Si=="function"?Si:s(+Si),Jr):an},Jr.endAngle=function(Si){return arguments.length?(zn=typeof Si=="function"?Si:s(+Si),Jr):zn},Jr.padAngle=function(Si){return arguments.length?(qn=typeof Si=="function"?Si:s(+Si),Jr):qn},Jr.context=function(Si){return arguments.length?(Un=Si==null?null:Si,Jr):Un},Jr}function L(Ne){this._context=Ne}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2;default:this._context.lineTo(oe,Ht);break}}};function W(Ne){return new L(Ne)}function F(Ne){return Ne[0]}function K(Ne){return Ne[1]}function V(){var Ne=F,oe=K,Ht=s(!0),Ee=null,an=W,zn=null;function qn(Un){var Jr,Si=Un.length,Ci,ki=!1,oa;for(Ee==null&&(zn=an(oa=l.path())),Jr=0;Jr<=Si;++Jr)!(Jr<Si&&Ht(Ci=Un[Jr],Jr,Un))===ki&&((ki=!ki)?zn.lineStart():zn.lineEnd()),ki&&zn.point(+Ne(Ci,Jr,Un),+oe(Ci,Jr,Un));if(oa)return zn=null,oa+""||null}return qn.x=function(Un){return arguments.length?(Ne=typeof Un=="function"?Un:s(+Un),qn):Ne},qn.y=function(Un){return arguments.length?(oe=typeof Un=="function"?Un:s(+Un),qn):oe},qn.defined=function(Un){return arguments.length?(Ht=typeof Un=="function"?Un:s(!!Un),qn):Ht},qn.curve=function(Un){return arguments.length?(an=Un,Ee!=null&&(zn=an(Ee)),qn):an},qn.context=function(Un){return arguments.length?(Un==null?Ee=zn=null:zn=an(Ee=Un),qn):Ee},qn}function k(){var Ne=F,oe=null,Ht=s(0),Ee=K,an=s(!0),zn=null,qn=W,Un=null;function Jr(Ci){var ki,oa,Xa,ma=Ci.length,mo,Ba=!1,ao,yo=new Array(ma),Ja=new Array(ma);for(zn==null&&(Un=qn(ao=l.path())),ki=0;ki<=ma;++ki){if(!(ki<ma&&an(mo=Ci[ki],ki,Ci))===Ba)if(Ba=!Ba)oa=ki,Un.areaStart(),Un.lineStart();else{for(Un.lineEnd(),Un.lineStart(),Xa=ki-1;Xa>=oa;--Xa)Un.point(yo[Xa],Ja[Xa]);Un.lineEnd(),Un.areaEnd()}Ba&&(yo[ki]=+Ne(mo,ki,Ci),Ja[ki]=+Ht(mo,ki,Ci),Un.point(oe?+oe(mo,ki,Ci):yo[ki],Ee?+Ee(mo,ki,Ci):Ja[ki]))}if(ao)return Un=null,ao+""||null}function Si(){return V().defined(an).curve(qn).context(zn)}return Jr.x=function(Ci){return arguments.length?(Ne=typeof Ci=="function"?Ci:s(+Ci),oe=null,Jr):Ne},Jr.x0=function(Ci){return arguments.length?(Ne=typeof Ci=="function"?Ci:s(+Ci),Jr):Ne},Jr.x1=function(Ci){return arguments.length?(oe=Ci==null?null:typeof Ci=="function"?Ci:s(+Ci),Jr):oe},Jr.y=function(Ci){return arguments.length?(Ht=typeof Ci=="function"?Ci:s(+Ci),Ee=null,Jr):Ht},Jr.y0=function(Ci){return arguments.length?(Ht=typeof Ci=="function"?Ci:s(+Ci),Jr):Ht},Jr.y1=function(Ci){return arguments.length?(Ee=Ci==null?null:typeof Ci=="function"?Ci:s(+Ci),Jr):Ee},Jr.lineX0=Jr.lineY0=function(){return Si().x(Ne).y(Ht)},Jr.lineY1=function(){return Si().x(Ne).y(Ee)},Jr.lineX1=function(){return Si().x(oe).y(Ht)},Jr.defined=function(Ci){return arguments.length?(an=typeof Ci=="function"?Ci:s(!!Ci),Jr):an},Jr.curve=function(Ci){return arguments.length?(qn=Ci,zn!=null&&(Un=qn(zn)),Jr):qn},Jr.context=function(Ci){return arguments.length?(Ci==null?zn=Un=null:Un=qn(zn=Ci),Jr):zn},Jr}function Z(Ne,oe){return oe<Ne?-1:oe>Ne?1:oe>=Ne?0:NaN}function X(Ne){return Ne}function it(){var Ne=X,oe=Z,Ht=null,Ee=s(0),an=s(b),zn=s(0);function qn(Un){var Jr,Si=Un.length,Ci,ki,oa=0,Xa=new Array(Si),ma=new Array(Si),mo=+Ee.apply(this,arguments),Ba=Math.min(b,Math.max(-b,an.apply(this,arguments)-mo)),ao,yo=Math.min(Math.abs(Ba)/Si,zn.apply(this,arguments)),Ja=yo*(Ba<0?-1:1),_o;for(Jr=0;Jr<Si;++Jr)(_o=ma[Xa[Jr]=Jr]=+Ne(Un[Jr],Jr,Un))>0&&(oa+=_o);for(oe!=null?Xa.sort(function(ts,Do){return oe(ma[ts],ma[Do])}):Ht!=null&&Xa.sort(function(ts,Do){return Ht(Un[ts],Un[Do])}),Jr=0,ki=oa?(Ba-Si*Ja)/oa:0;Jr<Si;++Jr,mo=ao)Ci=Xa[Jr],_o=ma[Ci],ao=mo+(_o>0?_o*ki:0)+Ja,ma[Ci]={data:Un[Ci],index:Jr,value:_o,startAngle:mo,endAngle:ao,padAngle:yo};return ma}return qn.value=function(Un){return arguments.length?(Ne=typeof Un=="function"?Un:s(+Un),qn):Ne},qn.sortValues=function(Un){return arguments.length?(oe=Un,Ht=null,qn):oe},qn.sort=function(Un){return arguments.length?(Ht=Un,oe=null,qn):Ht},qn.startAngle=function(Un){return arguments.length?(Ee=typeof Un=="function"?Un:s(+Un),qn):Ee},qn.endAngle=function(Un){return arguments.length?(an=typeof Un=="function"?Un:s(+Un),qn):an},qn.padAngle=function(Un){return arguments.length?(zn=typeof Un=="function"?Un:s(+Un),qn):zn},qn}var ft=ut(W);function pt(Ne){this._curve=Ne}pt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(oe,Ht){this._curve.point(Ht*Math.sin(oe),Ht*-Math.cos(oe))}};function ut(Ne){function oe(Ht){return new pt(Ne(Ht))}return oe._curve=Ne,oe}function It(Ne){var oe=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(Ht){return arguments.length?oe(ut(Ht)):oe()._curve},Ne}function Nt(){return It(V().curve(ft))}function Rt(){var Ne=k().curve(ft),oe=Ne.curve,Ht=Ne.lineX0,Ee=Ne.lineX1,an=Ne.lineY0,zn=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return It(Ht())},delete Ne.lineX0,Ne.lineEndAngle=function(){return It(Ee())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return It(an())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return It(zn())},delete Ne.lineY1,Ne.curve=function(qn){return arguments.length?oe(ut(qn)):oe()._curve},Ne}function Mt(Ne,oe){return[(oe=+oe)*Math.cos(Ne-=Math.PI/2),oe*Math.sin(Ne)]}var bt=Array.prototype.slice;function At(Ne){return Ne.source}function rt(Ne){return Ne.target}function Pt(Ne){var oe=At,Ht=rt,Ee=F,an=K,zn=null;function qn(){var Un,Jr=bt.call(arguments),Si=oe.apply(this,Jr),Ci=Ht.apply(this,Jr);if(zn||(zn=Un=l.path()),Ne(zn,+Ee.apply(this,(Jr[0]=Si,Jr)),+an.apply(this,Jr),+Ee.apply(this,(Jr[0]=Ci,Jr)),+an.apply(this,Jr)),Un)return zn=null,Un+""||null}return qn.source=function(Un){return arguments.length?(oe=Un,qn):oe},qn.target=function(Un){return arguments.length?(Ht=Un,qn):Ht},qn.x=function(Un){return arguments.length?(Ee=typeof Un=="function"?Un:s(+Un),qn):Ee},qn.y=function(Un){return arguments.length?(an=typeof Un=="function"?Un:s(+Un),qn):an},qn.context=function(Un){return arguments.length?(zn=Un==null?null:Un,qn):zn},qn}function z(Ne,oe,Ht,Ee,an){Ne.moveTo(oe,Ht),Ne.bezierCurveTo(oe=(oe+Ee)/2,Ht,oe,an,Ee,an)}function Q(Ne,oe,Ht,Ee,an){Ne.moveTo(oe,Ht),Ne.bezierCurveTo(oe,Ht=(Ht+an)/2,Ee,Ht,Ee,an)}function gt(Ne,oe,Ht,Ee,an){var zn=Mt(oe,Ht),qn=Mt(oe,Ht=(Ht+an)/2),Un=Mt(Ee,Ht),Jr=Mt(Ee,an);Ne.moveTo(zn[0],zn[1]),Ne.bezierCurveTo(qn[0],qn[1],Un[0],Un[1],Jr[0],Jr[1])}function et(){return Pt(z)}function ot(){return Pt(Q)}function xt(){var Ne=Pt(gt);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne}var H={draw:function(oe,Ht){var Ee=Math.sqrt(Ht/f);oe.moveTo(Ee,0),oe.arc(0,0,Ee,0,b)}},nt={draw:function(oe,Ht){var Ee=Math.sqrt(Ht/5)/2;oe.moveTo(-3*Ee,-Ee),oe.lineTo(-Ee,-Ee),oe.lineTo(-Ee,-3*Ee),oe.lineTo(Ee,-3*Ee),oe.lineTo(Ee,-Ee),oe.lineTo(3*Ee,-Ee),oe.lineTo(3*Ee,Ee),oe.lineTo(Ee,Ee),oe.lineTo(Ee,3*Ee),oe.lineTo(-Ee,3*Ee),oe.lineTo(-Ee,Ee),oe.lineTo(-3*Ee,Ee),oe.closePath()}},at=Math.sqrt(1/3),q=at*2,_t={draw:function(oe,Ht){var Ee=Math.sqrt(Ht/q),an=Ee*at;oe.moveTo(0,-Ee),oe.lineTo(an,0),oe.lineTo(0,Ee),oe.lineTo(-an,0),oe.closePath()}},yt=.8908130915292852,Ft=Math.sin(f/10)/Math.sin(7*f/10),Qt=Math.sin(b/10)*Ft,ee=-Math.cos(b/10)*Ft,Vt={draw:function(oe,Ht){var Ee=Math.sqrt(Ht*yt),an=Qt*Ee,zn=ee*Ee;oe.moveTo(0,-Ee),oe.lineTo(an,zn);for(var qn=1;qn<5;++qn){var Un=b*qn/5,Jr=Math.cos(Un),Si=Math.sin(Un);oe.lineTo(Si*Ee,-Jr*Ee),oe.lineTo(Jr*an-Si*zn,Si*an+Jr*zn)}oe.closePath()}},$t={draw:function(oe,Ht){var Ee=Math.sqrt(Ht),an=-Ee/2;oe.rect(an,an,Ee,Ee)}},Me=Math.sqrt(3),me={draw:function(oe,Ht){var Ee=-Math.sqrt(Ht/(Me*3));oe.moveTo(0,Ee*2),oe.lineTo(-Me*Ee,-Ee),oe.lineTo(Me*Ee,-Ee),oe.closePath()}},le=-.5,be=Math.sqrt(3)/2,ze=1/Math.sqrt(12),Xe=(ze/2+1)*3,Sn={draw:function(oe,Ht){var Ee=Math.sqrt(Ht/Xe),an=Ee/2,zn=Ee*ze,qn=an,Un=Ee*ze+Ee,Jr=-qn,Si=Un;oe.moveTo(an,zn),oe.lineTo(qn,Un),oe.lineTo(Jr,Si),oe.lineTo(le*an-be*zn,be*an+le*zn),oe.lineTo(le*qn-be*Un,be*qn+le*Un),oe.lineTo(le*Jr-be*Si,be*Jr+le*Si),oe.lineTo(le*an+be*zn,le*zn-be*an),oe.lineTo(le*qn+be*Un,le*Un-be*qn),oe.lineTo(le*Jr+be*Si,le*Si-be*Jr),oe.closePath()}},Xn=[H,nt,_t,$t,Vt,me,Sn];function Hn(){var Ne=s(H),oe=s(64),Ht=null;function Ee(){var an;if(Ht||(Ht=an=l.path()),Ne.apply(this,arguments).draw(Ht,+oe.apply(this,arguments)),an)return Ht=null,an+""||null}return Ee.type=function(an){return arguments.length?(Ne=typeof an=="function"?an:s(an),Ee):Ne},Ee.size=function(an){return arguments.length?(oe=typeof an=="function"?an:s(+an),Ee):oe},Ee.context=function(an){return arguments.length?(Ht=an==null?null:an,Ee):Ht},Ee}function nn(){}function en(Ne,oe,Ht){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+oe)/6,(Ne._y0+4*Ne._y1+Ht)/6)}function An(Ne){this._context=Ne}An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:en(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:en(this,oe,Ht);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Ht}};function Nn(Ne){return new An(Ne)}function fr(Ne){this._context=Ne}fr.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._x2=oe,this._y2=Ht;break;case 1:this._point=2,this._x3=oe,this._y3=Ht;break;case 2:this._point=3,this._x4=oe,this._y4=Ht,this._context.moveTo((this._x0+4*this._x1+oe)/6,(this._y0+4*this._y1+Ht)/6);break;default:en(this,oe,Ht);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Ht}};function hi(Ne){return new fr(Ne)}function Ce(Ne){this._context=Ne}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ee=(this._x0+4*this._x1+oe)/6,an=(this._y0+4*this._y1+Ht)/6;this._line?this._context.lineTo(Ee,an):this._context.moveTo(Ee,an);break;case 3:this._point=4;default:en(this,oe,Ht);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Ht}};function Te(Ne){return new Ce(Ne)}function Jt(Ne,oe){this._basis=new An(Ne),this._beta=oe}Jt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var oe=this._x,Ht=this._y,Ee=oe.length-1;if(Ee>0)for(var an=oe[0],zn=Ht[0],qn=oe[Ee]-an,Un=Ht[Ee]-zn,Jr=-1,Si;++Jr<=Ee;)Si=Jr/Ee,this._basis.point(this._beta*oe[Jr]+(1-this._beta)*(an+Si*qn),this._beta*Ht[Jr]+(1-this._beta)*(zn+Si*Un));this._x=this._y=null,this._basis.lineEnd()},point:function(oe,Ht){this._x.push(+oe),this._y.push(+Ht)}};var pe=function Ne(oe){function Ht(Ee){return oe===1?new An(Ee):new Jt(Ee,oe)}return Ht.beta=function(Ee){return Ne(+Ee)},Ht}(.85);function Wt(Ne,oe,Ht){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-oe),Ne._y2+Ne._k*(Ne._y1-Ht),Ne._x2,Ne._y2)}function ie(Ne,oe){this._context=Ne,this._k=(1-oe)/6}ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2,this._x1=oe,this._y1=Ht;break;case 2:this._point=3;default:Wt(this,oe,Ht);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var Ae=function Ne(oe){function Ht(Ee){return new ie(Ee,oe)}return Ht.tension=function(Ee){return Ne(+Ee)},Ht}(0);function ue(Ne,oe){this._context=Ne,this._k=(1-oe)/6}ue.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._x3=oe,this._y3=Ht;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Ht);break;case 2:this._point=3,this._x5=oe,this._y5=Ht;break;default:Wt(this,oe,Ht);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var xe=function Ne(oe){function Ht(Ee){return new ue(Ee,oe)}return Ht.tension=function(Ee){return Ne(+Ee)},Ht}(0);function $e(Ne,oe){this._context=Ne,this._k=(1-oe)/6}$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wt(this,oe,Ht);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var Fn=function Ne(oe){function Ht(Ee){return new $e(Ee,oe)}return Ht.tension=function(Ee){return Ne(+Ee)},Ht}(0);function or(Ne,oe,Ht){var Ee=Ne._x1,an=Ne._y1,zn=Ne._x2,qn=Ne._y2;if(Ne._l01_a>u){var Un=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,Jr=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);Ee=(Ee*Un-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/Jr,an=(an*Un-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/Jr}if(Ne._l23_a>u){var Si=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,Ci=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);zn=(zn*Si+Ne._x1*Ne._l23_2a-oe*Ne._l12_2a)/Ci,qn=(qn*Si+Ne._y1*Ne._l23_2a-Ht*Ne._l12_2a)/Ci}Ne._context.bezierCurveTo(Ee,an,zn,qn,Ne._x2,Ne._y2)}function En(Ne,oe){this._context=Ne,this._alpha=oe}En.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){if(oe=+oe,Ht=+Ht,this._point){var Ee=this._x2-oe,an=this._y2-Ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2;break;case 2:this._point=3;default:or(this,oe,Ht);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var Pn=function Ne(oe){function Ht(Ee){return oe?new En(Ee,oe):new ie(Ee,0)}return Ht.alpha=function(Ee){return Ne(+Ee)},Ht}(.5);function br(Ne,oe){this._context=Ne,this._alpha=oe}br.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Ht){if(oe=+oe,Ht=+Ht,this._point){var Ee=this._x2-oe,an=this._y2-Ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=oe,this._y3=Ht;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Ht);break;case 2:this._point=3,this._x5=oe,this._y5=Ht;break;default:or(this,oe,Ht);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var Pr=function Ne(oe){function Ht(Ee){return oe?new br(Ee,oe):new ue(Ee,0)}return Ht.alpha=function(Ee){return Ne(+Ee)},Ht}(.5);function ln(Ne,oe){this._context=Ne,this._alpha=oe}ln.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){if(oe=+oe,Ht=+Ht,this._point){var Ee=this._x2-oe,an=this._y2-Ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:or(this,oe,Ht);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Ht}};var Cr=function Ne(oe){function Ht(Ee){return oe?new ln(Ee,oe):new $e(Ee,0)}return Ht.alpha=function(Ee){return Ne(+Ee)},Ht}(.5);function Ar(Ne){this._context=Ne}Ar.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(oe,Ht){oe=+oe,Ht=+Ht,this._point?this._context.lineTo(oe,Ht):(this._point=1,this._context.moveTo(oe,Ht))}};function Be(Ne){return new Ar(Ne)}function We(Ne){return Ne<0?-1:1}function Ye(Ne,oe,Ht){var Ee=Ne._x1-Ne._x0,an=oe-Ne._x1,zn=(Ne._y1-Ne._y0)/(Ee||an<0&&-0),qn=(Ht-Ne._y1)/(an||Ee<0&&-0),Un=(zn*an+qn*Ee)/(Ee+an);return(We(zn)+We(qn))*Math.min(Math.abs(zn),Math.abs(qn),.5*Math.abs(Un))||0}function fn(Ne,oe){var Ht=Ne._x1-Ne._x0;return Ht?(3*(Ne._y1-Ne._y0)/Ht-oe)/2:oe}function gn(Ne,oe,Ht){var Ee=Ne._x0,an=Ne._y0,zn=Ne._x1,qn=Ne._y1,Un=(zn-Ee)/3;Ne._context.bezierCurveTo(Ee+Un,an+Un*oe,zn-Un,qn-Un*Ht,zn,qn)}function Bn(Ne){this._context=Ne}Bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gn(this,this._t0,fn(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Ht){var Ee=NaN;if(oe=+oe,Ht=+Ht,!(oe===this._x1&&Ht===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2;break;case 2:this._point=3,gn(this,fn(this,Ee=Ye(this,oe,Ht)),Ee);break;default:gn(this,this._t0,Ee=Ye(this,oe,Ht));break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Ht,this._t0=Ee}}};function bn(Ne){this._context=new Ln(Ne)}(bn.prototype=Object.create(Bn.prototype)).point=function(Ne,oe){Bn.prototype.point.call(this,oe,Ne)};function Ln(Ne){this._context=Ne}Ln.prototype={moveTo:function(oe,Ht){this._context.moveTo(Ht,oe)},closePath:function(){this._context.closePath()},lineTo:function(oe,Ht){this._context.lineTo(Ht,oe)},bezierCurveTo:function(oe,Ht,Ee,an,zn,qn){this._context.bezierCurveTo(Ht,oe,an,Ee,qn,zn)}};function ir(Ne){return new Bn(Ne)}function Yn(Ne){return new bn(Ne)}function _n(Ne){this._context=Ne}_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var oe=this._x,Ht=this._y,Ee=oe.length;if(Ee)if(this._line?this._context.lineTo(oe[0],Ht[0]):this._context.moveTo(oe[0],Ht[0]),Ee===2)this._context.lineTo(oe[1],Ht[1]);else for(var an=Dr(oe),zn=Dr(Ht),qn=0,Un=1;Un<Ee;++qn,++Un)this._context.bezierCurveTo(an[0][qn],zn[0][qn],an[1][qn],zn[1][qn],oe[Un],Ht[Un]);(this._line||this._line!==0&&Ee===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(oe,Ht){this._x.push(+oe),this._y.push(+Ht)}};function Dr(Ne){var oe,Ht=Ne.length-1,Ee,an=new Array(Ht),zn=new Array(Ht),qn=new Array(Ht);for(an[0]=0,zn[0]=2,qn[0]=Ne[0]+2*Ne[1],oe=1;oe<Ht-1;++oe)an[oe]=1,zn[oe]=4,qn[oe]=4*Ne[oe]+2*Ne[oe+1];for(an[Ht-1]=2,zn[Ht-1]=7,qn[Ht-1]=8*Ne[Ht-1]+Ne[Ht],oe=1;oe<Ht;++oe)Ee=an[oe]/zn[oe-1],zn[oe]-=Ee,qn[oe]-=Ee*qn[oe-1];for(an[Ht-1]=qn[Ht-1]/zn[Ht-1],oe=Ht-2;oe>=0;--oe)an[oe]=(qn[oe]-an[oe+1])/zn[oe];for(zn[Ht-1]=(Ne[Ht]+an[Ht-1])/2,oe=0;oe<Ht-1;++oe)zn[oe]=2*Ne[oe+1]-an[oe+1];return[an,zn]}function vr(Ne){return new _n(Ne)}function zr(Ne,oe){this._context=Ne,this._t=oe}zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(oe,Ht){switch(oe=+oe,Ht=+Ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Ht):this._context.moveTo(oe,Ht);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ht),this._context.lineTo(oe,Ht);else{var Ee=this._x*(1-this._t)+oe*this._t;this._context.lineTo(Ee,this._y),this._context.lineTo(Ee,Ht)}break}}this._x=oe,this._y=Ht}};function Ai(Ne){return new zr(Ne,.5)}function Aa(Ne){return new zr(Ne,0)}function ka(Ne){return new zr(Ne,1)}function eo(Ne,oe){if((qn=Ne.length)>1)for(var Ht=1,Ee,an,zn=Ne[oe[0]],qn,Un=zn.length;Ht<qn;++Ht)for(an=zn,zn=Ne[oe[Ht]],Ee=0;Ee<Un;++Ee)zn[Ee][1]+=zn[Ee][0]=isNaN(an[Ee][1])?an[Ee][0]:an[Ee][1]}function Zo(Ne){for(var oe=Ne.length,Ht=new Array(oe);--oe>=0;)Ht[oe]=oe;return Ht}function Ea(Ne,oe){return Ne[oe]}function so(){var Ne=s([]),oe=Zo,Ht=eo,Ee=Ea;function an(zn){var qn=Ne.apply(this,arguments),Un,Jr=zn.length,Si=qn.length,Ci=new Array(Si),ki;for(Un=0;Un<Si;++Un){for(var oa=qn[Un],Xa=Ci[Un]=new Array(Jr),ma=0,mo;ma<Jr;++ma)Xa[ma]=mo=[0,+Ee(zn[ma],oa,ma,zn)],mo.data=zn[ma];Xa.key=oa}for(Un=0,ki=oe(Ci);Un<Si;++Un)Ci[ki[Un]].index=Un;return Ht(Ci,ki),Ci}return an.keys=function(zn){return arguments.length?(Ne=typeof zn=="function"?zn:s(bt.call(zn)),an):Ne},an.value=function(zn){return arguments.length?(Ee=typeof zn=="function"?zn:s(+zn),an):Ee},an.order=function(zn){return arguments.length?(oe=zn==null?Zo:typeof zn=="function"?zn:s(bt.call(zn)),an):oe},an.offset=function(zn){return arguments.length?(Ht=zn==null?eo:zn,an):Ht},an}function Ko(Ne,oe){if((Ee=Ne.length)>0){for(var Ht,Ee,an=0,zn=Ne[0].length,qn;an<zn;++an){for(qn=Ht=0;Ht<Ee;++Ht)qn+=Ne[Ht][an][1]||0;if(qn)for(Ht=0;Ht<Ee;++Ht)Ne[Ht][an][1]/=qn}eo(Ne,oe)}}function no(Ne,oe){if((Jr=Ne.length)>0)for(var Ht,Ee=0,an,zn,qn,Un,Jr,Si=Ne[oe[0]].length;Ee<Si;++Ee)for(qn=Un=0,Ht=0;Ht<Jr;++Ht)(zn=(an=Ne[oe[Ht]][Ee])[1]-an[0])>0?(an[0]=qn,an[1]=qn+=zn):zn<0?(an[1]=Un,an[0]=Un+=zn):(an[0]=0,an[1]=zn)}function So(Ne,oe){if((an=Ne.length)>0){for(var Ht=0,Ee=Ne[oe[0]],an,zn=Ee.length;Ht<zn;++Ht){for(var qn=0,Un=0;qn<an;++qn)Un+=Ne[qn][Ht][1]||0;Ee[Ht][1]+=Ee[Ht][0]=-Un/2}eo(Ne,oe)}}function cs(Ne,oe){if(!(!((qn=Ne.length)>0)||!((zn=(an=Ne[oe[0]]).length)>0))){for(var Ht=0,Ee=1,an,zn,qn;Ee<zn;++Ee){for(var Un=0,Jr=0,Si=0;Un<qn;++Un){for(var Ci=Ne[oe[Un]],ki=Ci[Ee][1]||0,oa=Ci[Ee-1][1]||0,Xa=(ki-oa)/2,ma=0;ma<Un;++ma){var mo=Ne[oe[ma]],Ba=mo[Ee][1]||0,ao=mo[Ee-1][1]||0;Xa+=Ba-ao}Jr+=ki,Si+=Xa*ki}an[Ee-1][1]+=an[Ee-1][0]=Ht,Jr&&(Ht-=Si/Jr)}an[Ee-1][1]+=an[Ee-1][0]=Ht,eo(Ne,oe)}}function wa(Ne){var oe=Ne.map(zo);return Zo(Ne).sort(function(Ht,Ee){return oe[Ht]-oe[Ee]})}function zo(Ne){for(var oe=-1,Ht=0,Ee=Ne.length,an,zn=-Infinity;++oe<Ee;)(an=+Ne[oe][1])>zn&&(zn=an,Ht=oe);return Ht}function Ro(Ne){var oe=Ne.map(fu);return Zo(Ne).sort(function(Ht,Ee){return oe[Ht]-oe[Ee]})}function fu(Ne){for(var oe=0,Ht=-1,Ee=Ne.length,an;++Ht<Ee;)(an=+Ne[Ht][1])&&(oe+=an);return oe}function Xo(Ne){return Ro(Ne).reverse()}function au(Ne){var oe=Ne.length,Ht,Ee,an=Ne.map(fu),zn=wa(Ne),qn=0,Un=0,Jr=[],Si=[];for(Ht=0;Ht<oe;++Ht)Ee=zn[Ht],qn<Un?(qn+=an[Ee],Jr.push(Ee)):(Un+=an[Ee],Si.push(Ee));return Si.reverse().concat(Jr)}function $s(Ne){return Zo(Ne).reverse()}t.arc=O,t.area=k,t.areaRadial=Rt,t.curveBasis=Nn,t.curveBasisClosed=hi,t.curveBasisOpen=Te,t.curveBundle=pe,t.curveCardinal=Ae,t.curveCardinalClosed=xe,t.curveCardinalOpen=Fn,t.curveCatmullRom=Pn,t.curveCatmullRomClosed=Pr,t.curveCatmullRomOpen=Cr,t.curveLinear=W,t.curveLinearClosed=Be,t.curveMonotoneX=ir,t.curveMonotoneY=Yn,t.curveNatural=vr,t.curveStep=Ai,t.curveStepAfter=ka,t.curveStepBefore=Aa,t.line=V,t.lineRadial=Nt,t.linkHorizontal=et,t.linkRadial=xt,t.linkVertical=ot,t.pie=it,t.pointRadial=Mt,t.radialArea=Rt,t.radialLine=Nt,t.stack=so,t.stackOffsetDiverging=no,t.stackOffsetExpand=Ko,t.stackOffsetNone=eo,t.stackOffsetSilhouette=So,t.stackOffsetWiggle=cs,t.stackOrderAppearance=wa,t.stackOrderAscending=Ro,t.stackOrderDescending=Xo,t.stackOrderInsideOut=au,t.stackOrderNone=Zo,t.stackOrderReverse=$s,t.symbol=Hn,t.symbolCircle=H,t.symbolCross=nt,t.symbolDiamond=_t,t.symbolSquare=$t,t.symbolStar=Vt,t.symbolTriangle=me,t.symbolWye=Sn,t.symbols=Xn,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(z){return function(){return z}}function s(z){return z[0]}function c(z){return z[1]}function r(){this._=null}function h(z){z.U=z.C=z.L=z.R=z.P=z.N=null}r.prototype={constructor:r,insert:function(Q,gt){var et,ot,xt;if(Q){if(gt.P=Q,gt.N=Q.N,Q.N&&(Q.N.P=gt),Q.N=gt,Q.R){for(Q=Q.R;Q.L;)Q=Q.L;Q.L=gt}else Q.R=gt;et=Q}else this._?(Q=a(this._),gt.P=null,gt.N=Q,Q.P=Q.L=gt,et=Q):(gt.P=gt.N=null,this._=gt,et=null);for(gt.L=gt.R=null,gt.U=et,gt.C=!0,Q=gt;et&&et.C;)ot=et.U,et===ot.L?(xt=ot.R,xt&&xt.C?(et.C=xt.C=!1,ot.C=!0,Q=ot):(Q===et.R&&(n(this,et),Q=et,et=Q.U),et.C=!1,ot.C=!0,i(this,ot))):(xt=ot.L,xt&&xt.C?(et.C=xt.C=!1,ot.C=!0,Q=ot):(Q===et.L&&(i(this,et),Q=et,et=Q.U),et.C=!1,ot.C=!0,n(this,ot))),et=Q.U;this._.C=!1},remove:function(Q){Q.N&&(Q.N.P=Q.P),Q.P&&(Q.P.N=Q.N),Q.N=Q.P=null;var gt=Q.U,et,ot=Q.L,xt=Q.R,H,nt;if(ot?xt?H=a(xt):H=ot:H=xt,gt?gt.L===Q?gt.L=H:gt.R=H:this._=H,ot&&xt?(nt=H.C,H.C=Q.C,H.L=ot,ot.U=H,H!==xt?(gt=H.U,H.U=Q.U,Q=H.R,gt.L=Q,H.R=xt,xt.U=H):(H.U=gt,gt=H,Q=H.R)):(nt=Q.C,Q=H),Q&&(Q.U=gt),!nt){if(Q&&Q.C){Q.C=!1;return}do{if(Q===this._)break;if(Q===gt.L){if(et=gt.R,et.C&&(et.C=!1,gt.C=!0,n(this,gt),et=gt.R),et.L&&et.L.C||et.R&&et.R.C){(!et.R||!et.R.C)&&(et.L.C=!1,et.C=!0,i(this,et),et=gt.R),et.C=gt.C,gt.C=et.R.C=!1,n(this,gt),Q=this._;break}}else if(et=gt.L,et.C&&(et.C=!1,gt.C=!0,i(this,gt),et=gt.L),et.L&&et.L.C||et.R&&et.R.C){(!et.L||!et.L.C)&&(et.R.C=!1,et.C=!0,n(this,et),et=gt.L),et.C=gt.C,gt.C=et.L.C=!1,i(this,gt),Q=this._;break}et.C=!0,Q=gt,gt=gt.U}while(!Q.C);Q&&(Q.C=!1)}}};function n(z,Q){var gt=Q,et=Q.R,ot=gt.U;ot?ot.L===gt?ot.L=et:ot.R=et:z._=et,et.U=ot,gt.U=et,gt.R=et.L,gt.R&&(gt.R.U=gt),et.L=gt}function i(z,Q){var gt=Q,et=Q.L,ot=gt.U;ot?ot.L===gt?ot.L=et:ot.R=et:z._=et,et.U=ot,gt.U=et,gt.L=et.R,gt.L&&(gt.L.U=gt),et.R=gt}function a(z){for(;z.L;)z=z.L;return z}function o(z,Q,gt,et){var ot=[null,null],xt=Mt.push(ot)-1;return ot.left=z,ot.right=Q,gt&&f(ot,z,Q,gt),et&&f(ot,Q,z,et),Nt[z.index].halfedges.push(xt),Nt[Q.index].halfedges.push(xt),ot}function u(z,Q,gt){var et=[Q,gt];return et.left=z,et}function f(z,Q,gt,et){!z[0]&&!z[1]?(z[0]=et,z.left=Q,z.right=gt):z.left===gt?z[1]=et:z[0]=et}function v(z,Q,gt,et,ot){var xt=z[0],H=z[1],nt=xt[0],at=xt[1],q=H[0],_t=H[1],yt=0,Ft=1,Qt=q-nt,ee=_t-at,Vt;if(Vt=Q-nt,!(!Qt&&Vt>0)){if(Vt/=Qt,Qt<0){if(Vt<yt)return;Vt<Ft&&(Ft=Vt)}else if(Qt>0){if(Vt>Ft)return;Vt>yt&&(yt=Vt)}if(Vt=et-nt,!(!Qt&&Vt<0)){if(Vt/=Qt,Qt<0){if(Vt>Ft)return;Vt>yt&&(yt=Vt)}else if(Qt>0){if(Vt<yt)return;Vt<Ft&&(Ft=Vt)}if(Vt=gt-at,!(!ee&&Vt>0)){if(Vt/=ee,ee<0){if(Vt<yt)return;Vt<Ft&&(Ft=Vt)}else if(ee>0){if(Vt>Ft)return;Vt>yt&&(yt=Vt)}if(Vt=ot-at,!(!ee&&Vt<0)){if(Vt/=ee,ee<0){if(Vt>Ft)return;Vt>yt&&(yt=Vt)}else if(ee>0){if(Vt<yt)return;Vt<Ft&&(Ft=Vt)}return!(yt>0)&&!(Ft<1)||(yt>0&&(z[0]=[nt+yt*Qt,at+yt*ee]),Ft<1&&(z[1]=[nt+Ft*Qt,at+Ft*ee])),!0}}}}}function b(z,Q,gt,et,ot){var xt=z[1];if(xt)return!0;var H=z[0],nt=z.left,at=z.right,q=nt[0],_t=nt[1],yt=at[0],Ft=at[1],Qt=(q+yt)/2,ee=(_t+Ft)/2,Vt,$t;if(Ft===_t){if(Qt<Q||Qt>=et)return;if(q>yt){if(!H)H=[Qt,gt];else if(H[1]>=ot)return;xt=[Qt,ot]}else{if(!H)H=[Qt,ot];else if(H[1]<gt)return;xt=[Qt,gt]}}else if(Vt=(q-yt)/(Ft-_t),$t=ee-Vt*Qt,Vt<-1||Vt>1)if(q>yt){if(!H)H=[(gt-$t)/Vt,gt];else if(H[1]>=ot)return;xt=[(ot-$t)/Vt,ot]}else{if(!H)H=[(ot-$t)/Vt,ot];else if(H[1]<gt)return;xt=[(gt-$t)/Vt,gt]}else if(_t<Ft){if(!H)H=[Q,Vt*Q+$t];else if(H[0]>=et)return;xt=[et,Vt*et+$t]}else{if(!H)H=[et,Vt*et+$t];else if(H[0]<Q)return;xt=[Q,Vt*Q+$t]}return z[0]=H,z[1]=xt,!0}function y(z,Q,gt,et){for(var ot=Mt.length,xt;ot--;)(!b(xt=Mt[ot],z,Q,gt,et)||!v(xt,z,Q,gt,et)||!(Math.abs(xt[0][0]-xt[1][0])>pt||Math.abs(xt[0][1]-xt[1][1])>pt))&&delete Mt[ot]}function g(z){return Nt[z.index]={site:z,halfedges:[]}}function _(z,Q){var gt=z.site,et=Q.left,ot=Q.right;return gt===ot&&(ot=et,et=gt),ot?Math.atan2(ot[1]-et[1],ot[0]-et[0]):(gt===et?(et=Q[1],ot=Q[0]):(et=Q[0],ot=Q[1]),Math.atan2(et[0]-ot[0],ot[1]-et[1]))}function M(z,Q){return Q[+(Q.left!==z.site)]}function x(z,Q){return Q[+(Q.left===z.site)]}function m(){for(var z=0,Q=Nt.length,gt,et,ot,xt;z<Q;++z)if((gt=Nt[z])&&(xt=(et=gt.halfedges).length)){var H=new Array(xt),nt=new Array(xt);for(ot=0;ot<xt;++ot)H[ot]=ot,nt[ot]=_(gt,Mt[et[ot]]);for(H.sort(function(at,q){return nt[q]-nt[at]}),ot=0;ot<xt;++ot)nt[ot]=et[H[ot]];for(ot=0;ot<xt;++ot)et[ot]=nt[ot]}}function S(z,Q,gt,et){var ot=Nt.length,xt,H,nt,at,q,_t,yt,Ft,Qt,ee,Vt,$t,Me=!0;for(xt=0;xt<ot;++xt)if(H=Nt[xt]){for(nt=H.site,q=H.halfedges,at=q.length;at--;)Mt[q[at]]||q.splice(at,1);for(at=0,_t=q.length;at<_t;)ee=x(H,Mt[q[at]]),Vt=ee[0],$t=ee[1],yt=M(H,Mt[q[++at%_t]]),Ft=yt[0],Qt=yt[1],(Math.abs(Vt-Ft)>pt||Math.abs($t-Qt)>pt)&&(q.splice(at,0,Mt.push(u(nt,ee,Math.abs(Vt-z)<pt&&et-$t>pt?[z,Math.abs(Ft-z)<pt?Qt:et]:Math.abs($t-et)<pt&&gt-Vt>pt?[Math.abs(Qt-et)<pt?Ft:gt,et]:Math.abs(Vt-gt)<pt&&$t-Q>pt?[gt,Math.abs(Ft-gt)<pt?Qt:Q]:Math.abs($t-Q)<pt&&Vt-z>pt?[Math.abs(Qt-Q)<pt?Ft:z,Q]:null))-1),++_t);_t&&(Me=!1)}if(Me){var me,le,be,ze=Infinity;for(xt=0,Me=null;xt<ot;++xt)(H=Nt[xt])&&(nt=H.site,me=nt[0]-z,le=nt[1]-Q,be=me*me+le*le,be<ze&&(ze=be,Me=H));if(Me){var Xe=[z,Q],Sn=[z,et],Xn=[gt,et],Hn=[gt,Q];Me.halfedges.push(Mt.push(u(nt=Me.site,Xe,Sn))-1,Mt.push(u(nt,Sn,Xn))-1,Mt.push(u(nt,Xn,Hn))-1,Mt.push(u(nt,Hn,Xe))-1)}}for(xt=0;xt<ot;++xt)(H=Nt[xt])&&(H.halfedges.length||delete Nt[xt])}var P=[],A;function O(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function L(z){var Q=z.P,gt=z.N;if(!(!Q||!gt)){var et=Q.site,ot=z.site,xt=gt.site;if(et!==xt){var H=ot[0],nt=ot[1],at=et[0]-H,q=et[1]-nt,_t=xt[0]-H,yt=xt[1]-nt,Ft=2*(at*yt-q*_t);if(!(Ft>=-ut)){var Qt=at*at+q*q,ee=_t*_t+yt*yt,Vt=(yt*Qt-q*ee)/Ft,$t=(at*ee-_t*Qt)/Ft,Me=P.pop()||new O;Me.arc=z,Me.site=ot,Me.x=Vt+H,Me.y=(Me.cy=$t+nt)+Math.sqrt(Vt*Vt+$t*$t),z.circle=Me;for(var me=null,le=Rt._;le;)if(Me.y<le.y||Me.y===le.y&&Me.x<=le.x)if(le.L)le=le.L;else{me=le.P;break}else if(le.R)le=le.R;else{me=le;break}Rt.insert(me,Me),me||(A=Me)}}}}function W(z){var Q=z.circle;Q&&(Q.P||(A=Q.N),Rt.remove(Q),P.push(Q),h(Q),z.circle=null)}var F=[];function K(){h(this),this.edge=this.site=this.circle=null}function V(z){var Q=F.pop()||new K;return Q.site=z,Q}function k(z){W(z),It.remove(z),F.push(z),h(z)}function Z(z){var Q=z.circle,gt=Q.x,et=Q.cy,ot=[gt,et],xt=z.P,H=z.N,nt=[z];k(z);for(var at=xt;at.circle&&Math.abs(gt-at.circle.x)<pt&&Math.abs(et-at.circle.cy)<pt;)xt=at.P,nt.unshift(at),k(at),at=xt;nt.unshift(at),W(at);for(var q=H;q.circle&&Math.abs(gt-q.circle.x)<pt&&Math.abs(et-q.circle.cy)<pt;)H=q.N,nt.push(q),k(q),q=H;nt.push(q),W(q);var _t=nt.length,yt;for(yt=1;yt<_t;++yt)q=nt[yt],at=nt[yt-1],f(q.edge,at.site,q.site,ot);at=nt[0],q=nt[_t-1],q.edge=o(at.site,q.site,null,ot),L(at),L(q)}function X(z){for(var Q=z[0],gt=z[1],et,ot,xt,H,nt=It._;nt;)if(xt=it(nt,gt)-Q,xt>pt)nt=nt.L;else if(H=Q-ft(nt,gt),H>pt){if(!nt.R){et=nt;break}nt=nt.R}else{xt>-pt?(et=nt.P,ot=nt):H>-pt?(et=nt,ot=nt.N):et=ot=nt;break}g(z);var at=V(z);if(It.insert(et,at),!(!et&&!ot)){if(et===ot){W(et),ot=V(et.site),It.insert(at,ot),at.edge=ot.edge=o(et.site,at.site),L(et),L(ot);return}if(!ot){at.edge=o(et.site,at.site);return}W(et),W(ot);var q=et.site,_t=q[0],yt=q[1],Ft=z[0]-_t,Qt=z[1]-yt,ee=ot.site,Vt=ee[0]-_t,$t=ee[1]-yt,Me=2*(Ft*$t-Qt*Vt),me=Ft*Ft+Qt*Qt,le=Vt*Vt+$t*$t,be=[($t*me-Qt*le)/Me+_t,(Ft*le-Vt*me)/Me+yt];f(ot.edge,q,ee,be),at.edge=o(q,z,null,be),ot.edge=o(z,ee,null,be),L(et),L(ot)}}function it(z,Q){var gt=z.site,et=gt[0],ot=gt[1],xt=ot-Q;if(!xt)return et;var H=z.P;if(!H)return-Infinity;gt=H.site;var nt=gt[0],at=gt[1],q=at-Q;if(!q)return nt;var _t=nt-et,yt=1/xt-1/q,Ft=_t/q;return yt?(-Ft+Math.sqrt(Ft*Ft-2*yt*(_t*_t/(-2*q)-at+q/2+ot-xt/2)))/yt+et:(et+nt)/2}function ft(z,Q){var gt=z.N;if(gt)return it(gt,Q);var et=z.site;return et[1]===Q?et[0]:Infinity}var pt=1e-6,ut=1e-12,It,Nt,Rt,Mt;function bt(z,Q,gt){return(z[0]-gt[0])*(Q[1]-z[1])-(z[0]-Q[0])*(gt[1]-z[1])}function At(z,Q){return Q[1]-z[1]||Q[0]-z[0]}function rt(z,Q){var gt=z.sort(At).pop(),et,ot,xt;for(Mt=[],Nt=new Array(z.length),It=new r,Rt=new r;;)if(xt=A,gt&&(!xt||gt[1]<xt.y||gt[1]===xt.y&&gt[0]<xt.x))(gt[0]!==et||gt[1]!==ot)&&(X(gt),et=gt[0],ot=gt[1]),gt=z.pop();else if(xt)Z(xt.arc);else break;if(m(),Q){var H=+Q[0][0],nt=+Q[0][1],at=+Q[1][0],q=+Q[1][1];y(H,nt,at,q),S(H,nt,at,q)}this.edges=Mt,this.cells=Nt,It=Rt=Mt=Nt=null}rt.prototype={constructor:rt,polygons:function(){var Q=this.edges;return this.cells.map(function(gt){var et=gt.halfedges.map(function(ot){return M(gt,Q[ot])});return et.data=gt.site.data,et})},triangles:function(){var Q=[],gt=this.edges;return this.cells.forEach(function(et,ot){if(!!(at=(H=et.halfedges).length))for(var xt=et.site,H,nt=-1,at,q,_t=gt[H[at-1]],yt=_t.left===xt?_t.right:_t.left;++nt<at;)q=yt,_t=gt[H[nt]],yt=_t.left===xt?_t.right:_t.left,q&&yt&&ot<q.index&&ot<yt.index&&bt(xt,q,yt)<0&&Q.push([xt.data,q.data,yt.data])}),Q},links:function(){return this.edges.filter(function(Q){return Q.right}).map(function(Q){return{source:Q.left.data,target:Q.right.data}})},find:function(Q,gt,et){for(var ot=this,xt,H=ot._found||0,nt=ot.cells.length,at;!(at=ot.cells[H]);)if(++H>=nt)return null;var q=Q-at.site[0],_t=gt-at.site[1],yt=q*q+_t*_t;do at=ot.cells[xt=H],H=null,at.halfedges.forEach(function(Ft){var Qt=ot.edges[Ft],ee=Qt.left;if(!((ee===at.site||!ee)&&!(ee=Qt.right))){var Vt=Q-ee[0],$t=gt-ee[1],Me=Vt*Vt+$t*$t;Me<yt&&(yt=Me,H=ee.index)}});while(H!==null);return ot._found=xt,et==null||yt<=et*et?at.site:null}};function Pt(){var z=s,Q=c,gt=null;function et(ot){return new rt(ot.map(function(xt,H){var nt=[Math.round(z(xt,H,ot)/pt)*pt,Math.round(Q(xt,H,ot)/pt)*pt];return nt.index=H,nt.data=xt,nt}),gt)}return et.polygons=function(ot){return et(ot).polygons()},et.links=function(ot){return et(ot).links()},et.triangles=function(ot){return et(ot).triangles()},et.x=function(ot){return arguments.length?(z=typeof ot=="function"?ot:l(+ot),et):z},et.y=function(ot){return arguments.length?(Q=typeof ot=="function"?ot:l(+ot),et):Q},et.extent=function(ot){return arguments.length?(gt=ot==null?null:[[+ot[0][0],+ot[0][1]],[+ot[1][0],+ot[1][1]]],et):gt&&[[gt[0][0],gt[0][1]],[gt[1][0],gt[1][1]]]},et.size=function(ot){return arguments.length?(gt=ot==null?null:[[0,0],[+ot[0],+ot[1]]],et):gt&&[gt[1][0]-gt[0][0],gt[1][1]-gt[0][1]]},et}t.voronoi=Pt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(E,T,e){E.exports={graphlib:e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:e("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:e("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:e("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");E.exports={run:s,undo:r};function s(h){var n=h.graph().acyclicer==="greedy"?l(h,i(h)):c(h);t.forEach(n,function(a){var o=h.edge(a);h.removeEdge(a),o.forwardName=a.name,o.reversed=!0,h.setEdge(a.w,a.v,o,t.uniqueId("rev"))});function i(a){return function(o){return a.edge(o).weight}}}function c(h){var n=[],i={},a={};function o(u){t.has(a,u)||(a[u]=!0,i[u]=!0,t.forEach(h.outEdges(u),function(f){t.has(i,f.w)?n.push(f):o(f.w)}),delete i[u])}return t.forEach(h.nodes(),o),n}function r(h){t.forEach(h.edges(),function(n){var i=h.edge(n);if(i.reversed){h.removeEdge(n);var a=i.forwardName;delete i.reversed,delete i.forwardName,h.setEdge(n.w,n.v,i,a)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(r){function h(n){var i=r.children(n),a=r.node(n);if(i.length&&t.forEach(i,h),t.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,u=a.maxRank+1;o<u;++o)c(r,"borderLeft","_bl",n,a,o),c(r,"borderRight","_br",n,a,o)}}t.forEach(r.children(),h)}function c(r,h,n,i,a,o){var u={width:0,height:0,rank:o,borderType:h},f=a[h][o-1],v=l.addDummyNode(r,"border",u,n);a[h][o]=v,r.setParent(v,i),f&&r.setEdge(f,v,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={adjust:l,undo:s};function l(o){var u=o.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&c(o)}function s(o){var u=o.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&h(o),(u==="lr"||u==="rl")&&(i(o),c(o))}function c(o){t.forEach(o.nodes(),function(u){r(o.node(u))}),t.forEach(o.edges(),function(u){r(o.edge(u))})}function r(o){var u=o.width;o.width=o.height,o.height=u}function h(o){t.forEach(o.nodes(),function(u){n(o.node(u))}),t.forEach(o.edges(),function(u){var f=o.edge(u);t.forEach(f.points,n),t.has(f,"y")&&n(f)})}function n(o){o.y=-o.y}function i(o){t.forEach(o.nodes(),function(u){a(o.node(u))}),t.forEach(o.edges(),function(u){var f=o.edge(u);t.forEach(f.points,a),t.has(f,"x")&&a(f)})}function a(o){var u=o.x;o.x=o.y,o.y=u}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(E,T){E.exports=e;function e(){var s={};s._next=s._prev=s,this._sentinel=s}e.prototype.dequeue=function(){var s=this._sentinel,c=s._prev;if(c!==s)return t(c),c},e.prototype.enqueue=function(s){var c=this._sentinel;s._prev&&s._next&&t(s),s._next=c._next,c._next._prev=s,c._next=s,s._prev=c},e.prototype.toString=function(){for(var s=[],c=this._sentinel,r=c._prev;r!==c;)s.push(JSON.stringify(r,l)),r=r._prev;return"["+s.join(", ")+"]"};function t(s){s._prev._next=s._next,s._next._prev=s._prev,delete s._next,delete s._prev}function l(s,c){if(s!=="_next"&&s!=="_prev")return c}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={debugOrdering:c};function c(r){var h=l.buildLayerMatrix(r),n=new s({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+r.node(i).rank)}),t.forEach(r.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),t.forEach(h,function(i,a){var o="layer"+a;n.setNode(o,{rank:"same"}),t.reduce(i,function(u,f){return n.setEdge(u,f,{style:"invis"}),f})}),n}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(E,T,e){var t;try{t=e("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(l){}t||(t=window.graphlib),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");E.exports=r;var c=t.constant(1);function r(o,u){if(o.nodeCount()<=1)return[];var f=i(o,u||c),v=h(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(v,function(b){return o.outEdges(b.v,b.w)}),!0)}function h(o,u,f){for(var v=[],b=u[u.length-1],y=u[0],g;o.nodeCount();){for(;g=y.dequeue();)n(o,u,f,g);for(;g=b.dequeue();)n(o,u,f,g);if(o.nodeCount()){for(var _=u.length-2;_>0;--_)if(g=u[_].dequeue(),g){v=v.concat(n(o,u,f,g,!0));break}}}return v}function n(o,u,f,v,b){var y=b?[]:void 0;return t.forEach(o.inEdges(v.v),function(g){var _=o.edge(g),M=o.node(g.v);b&&y.push({v:g.v,w:g.w}),M.out-=_,a(u,f,M)}),t.forEach(o.outEdges(v.v),function(g){var _=o.edge(g),M=g.w,x=o.node(M);x.in-=_,a(u,f,x)}),o.removeNode(v.v),y}function i(o,u){var f=new l,v=0,b=0;t.forEach(o.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),t.forEach(o.edges(),function(_){var M=f.edge(_.v,_.w)||0,x=u(_),m=M+x;f.setEdge(_.v,_.w,m),b=Math.max(b,f.node(_.v).out+=x),v=Math.max(v,f.node(_.w).in+=x)});var y=t.range(b+v+3).map(function(){return new s}),g=v+1;return t.forEach(f.nodes(),function(_){a(y,g,f.node(_))}),{graph:f,buckets:y,zeroIdx:g}}function a(o,u,f){f.out?f.in?o[f.out-f.in+u].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,h=e("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,i=e("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),a=e("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),o=e("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),f=e("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),v=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=y;function y(bt,At){var rt=At&&At.debugTiming?v.time:v.notime;rt("layout",function(){var Pt=rt("  buildLayoutGraph",function(){return W(bt)});rt("  runLayout",function(){g(Pt,rt)}),rt("  updateInputGraph",function(){_(bt,Pt)})})}function g(bt,At){At("    makeSpaceForEdgeLabels",function(){F(bt)}),At("    removeSelfEdges",function(){ut(bt)}),At("    acyclic",function(){l.run(bt)}),At("    nestingGraph.run",function(){i.run(bt)}),At("    rank",function(){c(v.asNonCompoundGraph(bt))}),At("    injectEdgeLabelProxies",function(){K(bt)}),At("    removeEmptyRanks",function(){n(bt)}),At("    nestingGraph.cleanup",function(){i.cleanup(bt)}),At("    normalizeRanks",function(){r(bt)}),At("    assignRankMinMax",function(){V(bt)}),At("    removeEdgeLabelProxies",function(){k(bt)}),At("    normalize.run",function(){s.run(bt)}),At("    parentDummyChains",function(){h(bt)}),At("    addBorderSegments",function(){a(bt)}),At("    order",function(){u(bt)}),At("    insertSelfEdges",function(){It(bt)}),At("    adjustCoordinateSystem",function(){o.adjust(bt)}),At("    position",function(){f(bt)}),At("    positionSelfEdges",function(){Nt(bt)}),At("    removeBorderNodes",function(){pt(bt)}),At("    normalize.undo",function(){s.undo(bt)}),At("    fixupEdgeLabelCoords",function(){it(bt)}),At("    undoCoordinateSystem",function(){o.undo(bt)}),At("    translateGraph",function(){Z(bt)}),At("    assignNodeIntersects",function(){X(bt)}),At("    reversePoints",function(){ft(bt)}),At("    acyclic.undo",function(){l.undo(bt)})}function _(bt,At){t.forEach(bt.nodes(),function(rt){var Pt=bt.node(rt),z=At.node(rt);Pt&&(Pt.x=z.x,Pt.y=z.y,At.children(rt).length&&(Pt.width=z.width,Pt.height=z.height))}),t.forEach(bt.edges(),function(rt){var Pt=bt.edge(rt),z=At.edge(rt);Pt.points=z.points,t.has(z,"x")&&(Pt.x=z.x,Pt.y=z.y)}),bt.graph().width=At.graph().width,bt.graph().height=At.graph().height}var M=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],S=["width","height"],P={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function W(bt){var At=new b({multigraph:!0,compound:!0}),rt=Mt(bt.graph());return At.setGraph(t.merge({},x,Rt(rt,M),t.pick(rt,m))),t.forEach(bt.nodes(),function(Pt){var z=Mt(bt.node(Pt));At.setNode(Pt,t.defaults(Rt(z,S),P)),At.setParent(Pt,bt.parent(Pt))}),t.forEach(bt.edges(),function(Pt){var z=Mt(bt.edge(Pt));At.setEdge(Pt,t.merge({},O,Rt(z,A),t.pick(z,L)))}),At}function F(bt){var At=bt.graph();At.ranksep/=2,t.forEach(bt.edges(),function(rt){var Pt=bt.edge(rt);Pt.minlen*=2,Pt.labelpos.toLowerCase()!=="c"&&(At.rankdir==="TB"||At.rankdir==="BT"?Pt.width+=Pt.labeloffset:Pt.height+=Pt.labeloffset)})}function K(bt){t.forEach(bt.edges(),function(At){var rt=bt.edge(At);if(rt.width&&rt.height){var Pt=bt.node(At.v),z=bt.node(At.w),Q={rank:(z.rank-Pt.rank)/2+Pt.rank,e:At};v.addDummyNode(bt,"edge-proxy",Q,"_ep")}})}function V(bt){var At=0;t.forEach(bt.nodes(),function(rt){var Pt=bt.node(rt);Pt.borderTop&&(Pt.minRank=bt.node(Pt.borderTop).rank,Pt.maxRank=bt.node(Pt.borderBottom).rank,At=t.max(At,Pt.maxRank))}),bt.graph().maxRank=At}function k(bt){t.forEach(bt.nodes(),function(At){var rt=bt.node(At);rt.dummy==="edge-proxy"&&(bt.edge(rt.e).labelRank=rt.rank,bt.removeNode(At))})}function Z(bt){var At=Number.POSITIVE_INFINITY,rt=0,Pt=Number.POSITIVE_INFINITY,z=0,Q=bt.graph(),gt=Q.marginx||0,et=Q.marginy||0;function ot(xt){var H=xt.x,nt=xt.y,at=xt.width,q=xt.height;At=Math.min(At,H-at/2),rt=Math.max(rt,H+at/2),Pt=Math.min(Pt,nt-q/2),z=Math.max(z,nt+q/2)}t.forEach(bt.nodes(),function(xt){ot(bt.node(xt))}),t.forEach(bt.edges(),function(xt){var H=bt.edge(xt);t.has(H,"x")&&ot(H)}),At-=gt,Pt-=et,t.forEach(bt.nodes(),function(xt){var H=bt.node(xt);H.x-=At,H.y-=Pt}),t.forEach(bt.edges(),function(xt){var H=bt.edge(xt);t.forEach(H.points,function(nt){nt.x-=At,nt.y-=Pt}),t.has(H,"x")&&(H.x-=At),t.has(H,"y")&&(H.y-=Pt)}),Q.width=rt-At+gt,Q.height=z-Pt+et}function X(bt){t.forEach(bt.edges(),function(At){var rt=bt.edge(At),Pt=bt.node(At.v),z=bt.node(At.w),Q,gt;rt.points?(Q=rt.points[0],gt=rt.points[rt.points.length-1]):(rt.points=[],Q=z,gt=Pt),rt.points.unshift(v.intersectRect(Pt,Q)),rt.points.push(v.intersectRect(z,gt))})}function it(bt){t.forEach(bt.edges(),function(At){var rt=bt.edge(At);if(t.has(rt,"x"))switch((rt.labelpos==="l"||rt.labelpos==="r")&&(rt.width-=rt.labeloffset),rt.labelpos){case"l":rt.x-=rt.width/2+rt.labeloffset;break;case"r":rt.x+=rt.width/2+rt.labeloffset;break}})}function ft(bt){t.forEach(bt.edges(),function(At){var rt=bt.edge(At);rt.reversed&&rt.points.reverse()})}function pt(bt){t.forEach(bt.nodes(),function(At){if(bt.children(At).length){var rt=bt.node(At),Pt=bt.node(rt.borderTop),z=bt.node(rt.borderBottom),Q=bt.node(t.last(rt.borderLeft)),gt=bt.node(t.last(rt.borderRight));rt.width=Math.abs(gt.x-Q.x),rt.height=Math.abs(z.y-Pt.y),rt.x=Q.x+rt.width/2,rt.y=Pt.y+rt.height/2}}),t.forEach(bt.nodes(),function(At){bt.node(At).dummy==="border"&&bt.removeNode(At)})}function ut(bt){t.forEach(bt.edges(),function(At){if(At.v===At.w){var rt=bt.node(At.v);rt.selfEdges||(rt.selfEdges=[]),rt.selfEdges.push({e:At,label:bt.edge(At)}),bt.removeEdge(At)}})}function It(bt){var At=v.buildLayerMatrix(bt);t.forEach(At,function(rt){var Pt=0;t.forEach(rt,function(z,Q){var gt=bt.node(z);gt.order=Q+Pt,t.forEach(gt.selfEdges,function(et){v.addDummyNode(bt,"selfedge",{width:et.label.width,height:et.label.height,rank:gt.rank,order:Q+ ++Pt,e:et.e,label:et.label},"_se")}),delete gt.selfEdges})})}function Nt(bt){t.forEach(bt.nodes(),function(At){var rt=bt.node(At);if(rt.dummy==="selfedge"){var Pt=bt.node(rt.e.v),z=Pt.x+Pt.width/2,Q=Pt.y,gt=rt.x-z,et=Pt.height/2;bt.setEdge(rt.e,rt.label),bt.removeNode(At),rt.label.points=[{x:z+2*gt/3,y:Q-et},{x:z+5*gt/6,y:Q-et},{x:z+gt,y:Q},{x:z+5*gt/6,y:Q+et},{x:z+2*gt/3,y:Q+et}],rt.label.x=rt.x,rt.label.y=rt.y}})}function Rt(bt,At){return t.mapValues(t.pick(bt,At),Number)}function Mt(bt){var At={};return t.forEach(bt,function(rt,Pt){At[Pt.toLowerCase()]=rt}),At}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(E,T,e){var t;try{t={cloneDeep:e("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:e("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:e("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:e("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:e("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:e("./node_modules/_lodash@4.17.20@lodash/last.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:e("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:e("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:e("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:e("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:e("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:e("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:e("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:e("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:e("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:e("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:e("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(l){}t||(t=window._),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,cleanup:n};function s(i){var a=l.addDummyNode(i,"root",{},"_root"),o=r(i),u=t.max(t.values(o))-1,f=2*u+1;i.graph().nestingRoot=a,t.forEach(i.edges(),function(b){i.edge(b).minlen*=f});var v=h(i)+1;t.forEach(i.children(),function(b){c(i,a,f,v,u,o,b)}),i.graph().nodeRankFactor=f}function c(i,a,o,u,f,v,b){var y=i.children(b);if(!y.length){b!==a&&i.setEdge(a,b,{weight:0,minlen:o});return}var g=l.addBorderNode(i,"_bt"),_=l.addBorderNode(i,"_bb"),M=i.node(b);i.setParent(g,b),M.borderTop=g,i.setParent(_,b),M.borderBottom=_,t.forEach(y,function(x){c(i,a,o,u,f,v,x);var m=i.node(x),S=m.borderTop?m.borderTop:x,P=m.borderBottom?m.borderBottom:x,A=m.borderTop?u:2*u,O=S!==P?1:f-v[b]+1;i.setEdge(g,S,{weight:A,minlen:O,nestingEdge:!0}),i.setEdge(P,_,{weight:A,minlen:O,nestingEdge:!0})}),i.parent(b)||i.setEdge(a,g,{weight:0,minlen:f+v[b]})}function r(i){var a={};function o(u,f){var v=i.children(u);v&&v.length&&t.forEach(v,function(b){o(b,f+1)}),a[u]=f}return t.forEach(i.children(),function(u){o(u,1)}),a}function h(i){return t.reduce(i.edges(),function(a,o){return a+i.edge(o).weight},0)}function n(i){var a=i.graph();i.removeNode(a.nestingRoot),delete a.nestingRoot,t.forEach(i.edges(),function(o){var u=i.edge(o);u.nestingEdge&&i.removeEdge(o)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,undo:r};function s(h){h.graph().dummyChains=[],t.forEach(h.edges(),function(n){c(h,n)})}function c(h,n){var i=n.v,a=h.node(i).rank,o=n.w,u=h.node(o).rank,f=n.name,v=h.edge(n),b=v.labelRank;if(u!==a+1){h.removeEdge(n);var y,g,_;for(_=0,++a;a<u;++_,++a)v.points=[],g={width:0,height:0,edgeLabel:v,edgeObj:n,rank:a},y=l.addDummyNode(h,"edge",g,"_d"),a===b&&(g.width=v.width,g.height=v.height,g.dummy="edge-label",g.labelpos=v.labelpos),h.setEdge(i,y,{weight:v.weight},f),_===0&&h.graph().dummyChains.push(y),i=y;h.setEdge(i,o,{weight:v.weight},f)}}function r(h){t.forEach(h.graph().dummyChains,function(n){var i=h.node(n),a=i.edgeLabel,o;for(h.setEdge(i.edgeObj,a);i.dummy;)o=h.successors(n)[0],h.removeNode(n),a.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height),n=o,i=h.node(n)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s,c,r){var h={},n;t.forEach(r,function(i){for(var a=s.parent(i),o,u;a;){if(o=s.parent(a),o?(u=h[o],h[o]=a):(u=n,n=a),u&&u!==a){c.setEdge(u,a);return}a=o}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s,c){return t.map(c,function(r){var h=s.inEdges(r);if(h.length){var n=t.reduce(h,function(i,a){var o=s.edge(a),u=s.node(a.v);return{sum:i.sum+o.weight*u.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=s;function s(r,h,n){var i=c(r),a=new l({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return r.node(o)});return t.forEach(r.nodes(),function(o){var u=r.node(o),f=r.parent(o);(u.rank===h||u.minRank<=h&&h<=u.maxRank)&&(a.setNode(o),a.setParent(o,f||i),t.forEach(r[n](o),function(v){var b=v.v===o?v.w:v.v,y=a.edge(b,o),g=t.isUndefined(y)?0:y.weight;a.setEdge(b,o,{weight:r.edge(v).weight+g})}),t.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[h],borderRight:u.borderRight[h]}))}),a}function c(r){for(var h;r.hasNode(h=t.uniqueId("_root")););return h}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(c,r){for(var h=0,n=1;n<r.length;++n)h+=s(c,r[n-1],r[n]);return h}function s(c,r,h){for(var n=t.zipObject(h,t.map(h,function(v,b){return b})),i=t.flatten(t.map(r,function(v){return t.sortBy(t.map(c.outEdges(v),function(b){return{pos:n[b.w],weight:c.edge(b).weight}}),"pos")}),!0),a=1;a<h.length;)a<<=1;var o=2*a-1;a-=1;var u=t.map(new Array(o),function(){return 0}),f=0;return t.forEach(i.forEach(function(v){var b=v.pos+a;u[b]+=v.weight;for(var y=0;b>0;)b%2&&(y+=u[b+1]),b=b-1>>1,u[b]+=v.weight;f+=v.weight*y})),f}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,i=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=a;function a(v){var b=i.maxRank(v),y=o(v,t.range(1,b+1),"inEdges"),g=o(v,t.range(b-1,-1,-1),"outEdges"),_=l(v);f(v,_);for(var M=Number.POSITIVE_INFINITY,x,m=0,S=0;S<4;++m,++S){u(m%2?y:g,m%4>=2),_=i.buildLayerMatrix(v);var P=s(v,_);P<M&&(S=0,x=t.cloneDeep(_),M=P)}f(v,x)}function o(v,b,y){return t.map(b,function(g){return r(v,g,y)})}function u(v,b){var y=new n;t.forEach(v,function(g){var _=g.graph().root,M=c(g,_,y,b);t.forEach(M.vs,function(x,m){g.node(x).order=m}),h(g,y,M.vs)})}function f(v,b){t.forEach(b,function(y){t.forEach(y,function(g,_){v.node(g).order=_})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s){var c={},r=t.filter(s.nodes(),function(o){return!s.children(o).length}),h=t.max(t.map(r,function(o){return s.node(o).rank})),n=t.map(t.range(h+1),function(){return[]});function i(o){if(!t.has(c,o)){c[o]=!0;var u=s.node(o);n[u.rank].push(o),t.forEach(s.successors(o),i)}}var a=t.sortBy(r,function(o){return s.node(o).rank});return t.forEach(a,i),n}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(r,h){var n={};t.forEach(r,function(a,o){var u=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};t.isUndefined(a.barycenter)||(u.barycenter=a.barycenter,u.weight=a.weight)}),t.forEach(h.edges(),function(a){var o=n[a.v],u=n[a.w];!t.isUndefined(o)&&!t.isUndefined(u)&&(u.indegree++,o.out.push(n[a.w]))});var i=t.filter(n,function(a){return!a.indegree});return s(i)}function s(r){var h=[];function n(o){return function(u){u.merged||(t.isUndefined(u.barycenter)||t.isUndefined(o.barycenter)||u.barycenter>=o.barycenter)&&c(o,u)}}function i(o){return function(u){u.in.push(o),--u.indegree==0&&r.push(u)}}for(;r.length;){var a=r.pop();h.push(a),t.forEach(a.in.reverse(),n(a)),t.forEach(a.out,i(a))}return t.map(t.filter(h,function(o){return!o.merged}),function(o){return t.pick(o,["vs","i","barycenter","weight"])})}function c(r,h){var n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),h.weight&&(n+=h.barycenter*h.weight,i+=h.weight),r.vs=h.vs.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(h.i,r.i),h.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");E.exports=r;function r(i,a,o,u){var f=i.children(a),v=i.node(a),b=v?v.borderLeft:void 0,y=v?v.borderRight:void 0,g={};b&&(f=t.filter(f,function(P){return P!==b&&P!==y}));var _=l(i,f);t.forEach(_,function(P){if(i.children(P.v).length){var A=r(i,P.v,o,u);g[P.v]=A,t.has(A,"barycenter")&&n(P,A)}});var M=s(_,o);h(M,g);var x=c(M,u);if(b&&(x.vs=t.flatten([b,x.vs,y],!0),i.predecessors(b).length)){var m=i.node(i.predecessors(b)[0]),S=i.node(i.predecessors(y)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+m.order+S.order)/(x.weight+2),x.weight+=2}return x}function h(i,a){t.forEach(i,function(o){o.vs=t.flatten(o.vs.map(function(u){return a[u]?a[u].vs:u}),!0)})}function n(i,a){t.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(h,n){var i=l.partition(h,function(g){return t.has(g,"barycenter")}),a=i.lhs,o=t.sortBy(i.rhs,function(g){return-g.i}),u=[],f=0,v=0,b=0;a.sort(r(!!n)),b=c(u,o,b),t.forEach(a,function(g){b+=g.vs.length,u.push(g.vs),f+=g.barycenter*g.weight,v+=g.weight,b=c(u,o,b)});var y={vs:t.flatten(u,!0)};return v&&(y.barycenter=f/v,y.weight=v),y}function c(h,n,i){for(var a;n.length&&(a=t.last(n)).i<=i;)n.pop(),h.push(a.vs),i++;return i}function r(h){return function(n,i){return n.barycenter<i.barycenter?-1:n.barycenter>i.barycenter?1:h?i.i-n.i:n.i-i.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(r){var h=c(r);t.forEach(r.graph().dummyChains,function(n){for(var i=r.node(n),a=i.edgeObj,o=s(r,h,a.v,a.w),u=o.path,f=o.lca,v=0,b=u[v],y=!0;n!==a.w;){if(i=r.node(n),y){for(;(b=u[v])!==f&&r.node(b).maxRank<i.rank;)v++;b===f&&(y=!1)}if(!y){for(;v<u.length-1&&r.node(b=u[v+1]).minRank<=i.rank;)v++;b=u[v]}r.setParent(n,b),n=r.successors(n)[0]}})}function s(r,h,n,i){var a=[],o=[],u=Math.min(h[n].low,h[i].low),f=Math.max(h[n].lim,h[i].lim),v,b;v=n;do v=r.parent(v),a.push(v);while(v&&(h[v].low>u||f>h[v].lim));for(b=v,v=i;(v=r.parent(v))!==b;)o.push(v);return{path:a.concat(o.reverse()),lca:b}}function c(r){var h={},n=0;function i(a){var o=n;t.forEach(r.children(a),i),h[a]={low:o,lim:n++}}return t.forEach(r.children(),i),h}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={positionX:y,findType1Conflicts:c,findType2Conflicts:r,addConflict:n,hasConflict:i,verticalAlignment:a,horizontalCompaction:o,alignCoordinates:v,findSmallestWidthAlignment:f,balance:b};function c(M,x){var m={};function S(P,A){var O=0,L=0,W=P.length,F=t.last(A);return t.forEach(A,function(K,V){var k=h(M,K),Z=k?M.node(k).order:W;(k||K===F)&&(t.forEach(A.slice(L,V+1),function(X){t.forEach(M.predecessors(X),function(it){var ft=M.node(it),pt=ft.order;(pt<O||Z<pt)&&!(ft.dummy&&M.node(X).dummy)&&n(m,it,X)})}),L=V+1,O=Z)}),A}return t.reduce(x,S),m}function r(M,x){var m={};function S(A,O,L,W,F){var K;t.forEach(t.range(O,L),function(V){K=A[V],M.node(K).dummy&&t.forEach(M.predecessors(K),function(k){var Z=M.node(k);Z.dummy&&(Z.order<W||Z.order>F)&&n(m,k,K)})})}function P(A,O){var L=-1,W,F=0;return t.forEach(O,function(K,V){if(M.node(K).dummy==="border"){var k=M.predecessors(K);k.length&&(W=M.node(k[0]).order,S(O,F,V,L,W),F=V,L=W)}S(O,F,O.length,W,A.length)}),O}return t.reduce(x,P),m}function h(M,x){if(M.node(x).dummy)return t.find(M.predecessors(x),function(m){return M.node(m).dummy})}function n(M,x,m){if(x>m){var S=x;x=m,m=S}var P=M[x];P||(M[x]=P={}),P[m]=!0}function i(M,x,m){if(x>m){var S=x;x=m,m=S}return t.has(M[x],m)}function a(M,x,m,S){var P={},A={},O={};return t.forEach(x,function(L){t.forEach(L,function(W,F){P[W]=W,A[W]=W,O[W]=F})}),t.forEach(x,function(L){var W=-1;t.forEach(L,function(F){var K=S(F);if(K.length){K=t.sortBy(K,function(it){return O[it]});for(var V=(K.length-1)/2,k=Math.floor(V),Z=Math.ceil(V);k<=Z;++k){var X=K[k];A[F]===F&&W<O[X]&&!i(m,F,X)&&(A[X]=F,A[F]=P[F]=P[X],W=O[X])}}})}),{root:P,align:A}}function o(M,x,m,S,P){var A={},O=u(M,x,m,P),L=P?"borderLeft":"borderRight";function W(V,k){for(var Z=O.nodes(),X=Z.pop(),it={};X;)it[X]?V(X):(it[X]=!0,Z.push(X),Z=Z.concat(k(X))),X=Z.pop()}function F(V){A[V]=O.inEdges(V).reduce(function(k,Z){return Math.max(k,A[Z.v]+O.edge(Z))},0)}function K(V){var k=O.outEdges(V).reduce(function(X,it){return Math.min(X,A[it.w]-O.edge(it))},Number.POSITIVE_INFINITY),Z=M.node(V);k!==Number.POSITIVE_INFINITY&&Z.borderType!==L&&(A[V]=Math.max(A[V],k))}return W(F,O.predecessors.bind(O)),W(K,O.successors.bind(O)),t.forEach(S,function(V){A[V]=A[m[V]]}),A}function u(M,x,m,S){var P=new l,A=M.graph(),O=g(A.nodesep,A.edgesep,S);return t.forEach(x,function(L){var W;t.forEach(L,function(F){var K=m[F];if(P.setNode(K),W){var V=m[W],k=P.edge(V,K);P.setEdge(V,K,Math.max(O(M,F,W),k||0))}W=F})}),P}function f(M,x){return t.minBy(t.values(x),function(m){var S=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return t.forIn(m,function(A,O){var L=_(M,O)/2;S=Math.max(A+L,S),P=Math.min(A-L,P)}),S-P})}function v(M,x){var m=t.values(x),S=t.min(m),P=t.max(m);t.forEach(["u","d"],function(A){t.forEach(["l","r"],function(O){var L=A+O,W=M[L],F;if(W!==x){var K=t.values(W);F=O==="l"?S-t.min(K):P-t.max(K),F&&(M[L]=t.mapValues(W,function(V){return V+F}))}})})}function b(M,x){return t.mapValues(M.ul,function(m,S){if(x)return M[x.toLowerCase()][S];var P=t.sortBy(t.map(M,S));return(P[1]+P[2])/2})}function y(M){var x=s.buildLayerMatrix(M),m=t.merge(c(M,x),r(M,x)),S={},P;t.forEach(["u","d"],function(O){P=O==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(L){L==="r"&&(P=t.map(P,function(V){return t.values(V).reverse()}));var W=(O==="u"?M.predecessors:M.successors).bind(M),F=a(M,P,m,W),K=o(M,P,F.root,F.align,L==="r");L==="r"&&(K=t.mapValues(K,function(V){return-V})),S[O+L]=K})});var A=f(M,S);return v(S,A),b(S,M.graph().align)}function g(M,x,m){return function(S,P,A){var O=S.node(P),L=S.node(A),W=0,F;if(W+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":F=-O.width/2;break;case"r":F=O.width/2;break}if(F&&(W+=m?F:-F),F=0,W+=(O.dummy?x:M)/2,W+=(L.dummy?x:M)/2,W+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":F=L.width/2;break;case"r":F=-L.width/2;break}return F&&(W+=m?F:-F),F=0,W}}function _(M,x){return M.node(x).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;E.exports=c;function c(h){h=l.asNonCompoundGraph(h),r(h),t.forEach(s(h),function(n,i){h.node(i).x=n})}function r(h){var n=l.buildLayerMatrix(h),i=h.graph().ranksep,a=0;t.forEach(n,function(o){var u=t.max(t.map(o,function(f){return h.node(f).height}));t.forEach(o,function(f){h.node(f).y=a+u/2}),a+=u+i})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;E.exports=c;function c(i){var a=new l({directed:!1}),o=i.nodes()[0],u=i.nodeCount();a.setNode(o,{});for(var f,v;r(a,i)<u;)f=h(a,i),v=a.hasNode(f.v)?s(i,f):-s(i,f),n(a,i,v);return a}function r(i,a){function o(u){t.forEach(a.nodeEdges(u),function(f){var v=f.v,b=u===v?f.w:v;!i.hasNode(b)&&!s(a,f)&&(i.setNode(b,{}),i.setEdge(u,b,{}),o(b))})}return t.forEach(i.nodes(),o),i.nodeCount()}function h(i,a){return t.minBy(a.edges(),function(o){if(i.hasNode(o.v)!==i.hasNode(o.w))return s(a,o)})}function n(i,a,o){t.forEach(i.nodes(),function(u){a.node(u).rank+=o})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),l=t.longestPath,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");E.exports=r;function r(a){switch(a.graph().ranker){case"network-simplex":i(a);break;case"tight-tree":n(a);break;case"longest-path":h(a);break;default:i(a)}}var h=l;function n(a){l(a),s(a)}function i(a){c(a)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,r=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,h=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;E.exports=i,i.initLowLimValues=f,i.initCutValues=a,i.calcCutValue=u,i.leaveEdge=b,i.enterEdge=y,i.exchangeEdges=g;function i(m){m=n(m),c(m);var S=l(m);f(S),a(S,m);for(var P,A;P=b(S);)A=y(S,m,P),g(S,m,P,A)}function a(m,S){var P=h(m,m.nodes());P=P.slice(0,P.length-1),t.forEach(P,function(A){o(m,S,A)})}function o(m,S,P){var A=m.node(P),O=A.parent;m.edge(P,O).cutvalue=u(m,S,P)}function u(m,S,P){var A=m.node(P),O=A.parent,L=!0,W=S.edge(P,O),F=0;return W||(L=!1,W=S.edge(O,P)),F=W.weight,t.forEach(S.nodeEdges(P),function(K){var V=K.v===P,k=V?K.w:K.v;if(k!==O){var Z=V===L,X=S.edge(K).weight;if(F+=Z?X:-X,M(m,P,k)){var it=m.edge(P,k).cutvalue;F+=Z?-it:it}}}),F}function f(m,S){arguments.length<2&&(S=m.nodes()[0]),v(m,{},1,S)}function v(m,S,P,A,O){var L=P,W=m.node(A);return S[A]=!0,t.forEach(m.neighbors(A),function(F){t.has(S,F)||(P=v(m,S,P,F,A))}),W.low=L,W.lim=P++,O?W.parent=O:delete W.parent,P}function b(m){return t.find(m.edges(),function(S){return m.edge(S).cutvalue<0})}function y(m,S,P){var A=P.v,O=P.w;S.hasEdge(A,O)||(A=P.w,O=P.v);var L=m.node(A),W=m.node(O),F=L,K=!1;L.lim>W.lim&&(F=W,K=!0);var V=t.filter(S.edges(),function(k){return K===x(m,m.node(k.v),F)&&K!==x(m,m.node(k.w),F)});return t.minBy(V,function(k){return s(S,k)})}function g(m,S,P,A){var O=P.v,L=P.w;m.removeEdge(O,L),m.setEdge(A.v,A.w,{}),f(m),a(m,S),_(m,S)}function _(m,S){var P=t.find(m.nodes(),function(O){return!S.node(O).parent}),A=r(m,P);A=A.slice(1),t.forEach(A,function(O){var L=m.node(O).parent,W=S.edge(O,L),F=!1;W||(W=S.edge(L,O),F=!0),S.node(O).rank=S.node(L).rank+(F?W.minlen:-W.minlen)})}function M(m,S,P){return m.hasEdge(S,P)}function x(m,S,P){return P.low<=S.lim&&S.lim<=P.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={longestPath:l,slack:s};function l(c){var r={};function h(n){var i=c.node(n);if(t.has(r,n))return i.rank;r[n]=!0;var a=t.min(t.map(c.outEdges(n),function(o){return h(o.w)-c.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}t.forEach(c.sources(),h)}function s(c,r){return c.node(r.w).rank-c.node(r.v).rank-c.edge(r).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={addDummyNode:s,simplify:c,asNonCompoundGraph:r,successorWeights:h,predecessorWeights:n,intersectRect:i,buildLayerMatrix:a,normalizeRanks:o,removeEmptyRanks:u,addBorderNode:f,maxRank:v,partition:b,time:y,notime:g};function s(_,M,x,m){var S;do S=t.uniqueId(m);while(_.hasNode(S));return x.dummy=M,_.setNode(S,x),S}function c(_){var M=new l().setGraph(_.graph());return t.forEach(_.nodes(),function(x){M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){var m=M.edge(x.v,x.w)||{weight:0,minlen:1},S=_.edge(x);M.setEdge(x.v,x.w,{weight:m.weight+S.weight,minlen:Math.max(m.minlen,S.minlen)})}),M}function r(_){var M=new l({multigraph:_.isMultigraph()}).setGraph(_.graph());return t.forEach(_.nodes(),function(x){_.children(x).length||M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){M.setEdge(x,_.edge(x))}),M}function h(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.outEdges(x),function(S){m[S.w]=(m[S.w]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function n(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.inEdges(x),function(S){m[S.v]=(m[S.v]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function i(_,M){var x=_.x,m=_.y,S=M.x-x,P=M.y-m,A=_.width/2,O=_.height/2;if(!S&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var L,W;return Math.abs(P)*A>Math.abs(S)*O?(P<0&&(O=-O),L=O*S/P,W=O):(S<0&&(A=-A),L=A,W=A*P/S),{x:x+L,y:m+W}}function a(_){var M=t.map(t.range(v(_)+1),function(){return[]});return t.forEach(_.nodes(),function(x){var m=_.node(x),S=m.rank;t.isUndefined(S)||(M[S][m.order]=x)}),M}function o(_){var M=t.min(t.map(_.nodes(),function(x){return _.node(x).rank}));t.forEach(_.nodes(),function(x){var m=_.node(x);t.has(m,"rank")&&(m.rank-=M)})}function u(_){var M=t.min(t.map(_.nodes(),function(P){return _.node(P).rank})),x=[];t.forEach(_.nodes(),function(P){var A=_.node(P).rank-M;x[A]||(x[A]=[]),x[A].push(P)});var m=0,S=_.graph().nodeRankFactor;t.forEach(x,function(P,A){t.isUndefined(P)&&A%S!=0?--m:m&&t.forEach(P,function(O){_.node(O).rank+=m})})}function f(_,M,x,m){var S={width:0,height:0};return arguments.length>=4&&(S.rank=x,S.order=m),s(_,"border",S,M)}function v(_){return t.max(t.map(_.nodes(),function(M){var x=_.node(M).rank;if(!t.isUndefined(x))return x}))}function b(_,M){var x={lhs:[],rhs:[]};return t.forEach(_,function(m){M(m)?x.lhs.push(m):x.rhs.push(m)}),x}function y(_,M){var x=t.now();try{return M()}finally{console.log(_+" time: "+(t.now()-x)+"ms")}}function g(_,M){return M()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(E,T){E.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");E.exports={Graph:t.Graph,json:e("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:t.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(s){var c={},r=[],h;function n(i){t.has(c,i)||(c[i]=!0,h.push(i),t.each(s.successors(i),n),t.each(s.predecessors(i),n))}return t.each(s.nodes(),function(i){h=[],n(i),h.length&&r.push(h)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(c,r,h){t.isArray(r)||(r=[r]);var n=(c.isDirected()?c.successors:c.neighbors).bind(c),i=[],a={};return t.each(r,function(o){if(!c.hasNode(o))throw new Error("Graph does not have node: "+o);s(c,o,h==="post",a,n,i)}),i}function s(c,r,h,n,i,a){t.has(n,r)||(n[r]=!0,h||a.push(r),t.each(i(r),function(o){s(c,o,h,n,i,a)}),h&&a.push(r))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;function s(c,r,h){return l.transform(c.nodes(),function(n,i){n[i]=t(c,i,r,h)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;var s=t.constant(1);function c(h,n,i,a){return r(h,String(n),i||s,a||function(o){return h.outEdges(o)})}function r(h,n,i,a){var o={},u=new l,f,v,b=function(g){var _=g.v!==f?g.v:g.w,M=o[_],x=i(g),m=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+x);m<M.distance&&(M.distance=m,M.predecessor=f,u.decrease(_,m))};for(h.nodes().forEach(function(y){var g=y===n?0:Number.POSITIVE_INFINITY;o[y]={distance:g},u.add(y,g)});u.size()>0&&(f=u.removeMin(),v=o[f],v.distance!==Number.POSITIVE_INFINITY);)a(f).forEach(b);return o}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");E.exports=s;function s(c){return t.filter(l(c),function(r){return r.length>1||r.length===1&&c.hasEdge(r[0],r[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;var l=t.constant(1);function s(r,h,n){return c(r,h||l,n||function(i){return r.outEdges(i)})}function c(r,h,n){var i={},a=r.nodes();return a.forEach(function(o){i[o]={},i[o][o]={distance:0},a.forEach(function(u){o!==u&&(i[o][u]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(u){var f=u.v===o?u.w:u.v,v=h(u);i[o][f]={distance:v,predecessor:o}})}),a.forEach(function(o){var u=i[o];a.forEach(function(f){var v=i[f];a.forEach(function(b){var y=v[o],g=u[b],_=v[b],M=y.distance+g.distance;M<_.distance&&(_.distance=M,_.predecessor=g.predecessor)})})}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(E,T,e){E.exports={components:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");E.exports=l;function l(s){try{t(s)}catch(c){if(c instanceof t.CycleException)return!1;throw c}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=l;function l(s,c){return t(s,c,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=l;function l(s,c){return t(s,c,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),s=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;function c(r,h){var n=new l,i={},a=new s,o;function u(v){var b=v.v===o?v.w:v.v,y=a.priority(b);if(y!==void 0){var g=h(v);g<y&&(i[b]=o,a.decrease(b,g))}}if(r.nodeCount()===0)return n;t.each(r.nodes(),function(v){a.add(v,Number.POSITIVE_INFINITY),n.setNode(v)}),a.decrease(r.nodes()[0],0);for(var f=!1;a.size()>0;){if(o=a.removeMin(),t.has(i,o))n.setEdge(o,i[o]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(o).forEach(u)}return n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(s){var c=0,r=[],h={},n=[];function i(a){var o=h[a]={onStack:!0,lowlink:c,index:c++};if(r.push(a),s.successors(a).forEach(function(v){t.has(h,v)?h[v].onStack&&(o.lowlink=Math.min(o.lowlink,h[v].index)):(i(v),o.lowlink=Math.min(o.lowlink,h[v].lowlink))}),o.lowlink===o.index){var u=[],f;do f=r.pop(),h[f].onStack=!1,u.push(f);while(a!==f);n.push(u)}}return s.nodes().forEach(function(a){t.has(h,a)||i(a)}),n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l,l.CycleException=s;function l(c){var r={},h={},n=[];function i(a){if(t.has(h,a))throw new s;t.has(r,a)||(h[a]=!0,r[a]=!0,t.each(c.predecessors(a),i),delete h[a],n.push(a))}if(t.each(c.sinks(),i),t.size(r)!==c.nodeCount())throw new s;return n}function s(){}s.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(){this._arr=[],this._keyIndices={}}l.prototype.size=function(){return this._arr.length},l.prototype.keys=function(){return this._arr.map(function(s){return s.key})},l.prototype.has=function(s){return t.has(this._keyIndices,s)},l.prototype.priority=function(s){var c=this._keyIndices[s];if(c!==void 0)return this._arr[c].priority},l.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},l.prototype.add=function(s,c){var r=this._keyIndices;if(s=String(s),!t.has(r,s)){var h=this._arr,n=h.length;return r[s]=n,h.push({key:s,priority:c}),this._decrease(n),!0}return!1},l.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},l.prototype.decrease=function(s,c){var r=this._keyIndices[s];if(c>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[r].priority+" New: "+c);this._arr[r].priority=c,this._decrease(r)},l.prototype._heapify=function(s){var c=this._arr,r=2*s,h=r+1,n=s;r<c.length&&(n=c[r].priority<c[n].priority?r:n,h<c.length&&(n=c[h].priority<c[n].priority?h:n),n!==s&&(this._swap(s,n),this._heapify(n)))},l.prototype._decrease=function(s){for(var c=this._arr,r=c[s].priority,h;s!==0&&(h=s>>1,!(c[h].priority<r));)this._swap(s,h),s=h},l.prototype._swap=function(s,c){var r=this._arr,h=this._keyIndices,n=r[s],i=r[c];r[s]=i,r[c]=n,h[i.key]=s,h[n.key]=c}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(E,T,e){"use strict";var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=r;var l="\0",s="\0",c="";function r(u){this._isDirected=t.has(u,"directed")?u.directed:!0,this._isMultigraph=t.has(u,"multigraph")?u.multigraph:!1,this._isCompound=t.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(u){return this._label=u,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultNodeLabelFn=u,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._in[f])})},r.prototype.sinks=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._out[f])})},r.prototype.setNodes=function(u,f){var v=arguments,b=this;return t.each(u,function(y){v.length>1?b.setNode(y,f):b.setNode(y)}),this},r.prototype.setNode=function(u,f){return t.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=s,this._children[u]={},this._children[s][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},r.prototype.node=function(u){return this._nodes[u]},r.prototype.hasNode=function(u){return t.has(this._nodes,u)},r.prototype.removeNode=function(u){var f=this;if(t.has(this._nodes,u)){var v=function(y){f.removeEdge(f._edgeObjs[y])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],t.each(this.children(u),function(b){f.setParent(b)}),delete this._children[u]),t.each(t.keys(this._in[u]),v),delete this._in[u],delete this._preds[u],t.each(t.keys(this._out[u]),v),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},r.prototype.setParent=function(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=s;else{f+="";for(var v=f;!t.isUndefined(v);v=this.parent(v))if(v===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this},r.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},r.prototype.parent=function(u){if(this._isCompound){var f=this._parent[u];if(f!==s)return f}},r.prototype.children=function(u){if(t.isUndefined(u)&&(u=s),this._isCompound){var f=this._children[u];if(f)return t.keys(f)}else{if(u===s)return this.nodes();if(this.hasNode(u))return[]}},r.prototype.predecessors=function(u){var f=this._preds[u];if(f)return t.keys(f)},r.prototype.successors=function(u){var f=this._sucs[u];if(f)return t.keys(f)},r.prototype.neighbors=function(u){var f=this.predecessors(u);if(f)return t.union(f,this.successors(u))},r.prototype.isLeaf=function(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0},r.prototype.filterNodes=function(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var v=this;t.each(this._nodes,function(g,_){u(_)&&f.setNode(_,g)}),t.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,v.edge(g))});var b={};function y(g){var _=v.parent(g);return _===void 0||f.hasNode(_)?(b[g]=_,_):_ in b?b[_]:y(_)}return this._isCompound&&t.each(f.nodes(),function(g){f.setParent(g,y(g))}),f},r.prototype.setDefaultEdgeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultEdgeLabelFn=u,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(u,f){var v=this,b=arguments;return t.reduce(u,function(y,g){return b.length>1?v.setEdge(y,g,f):v.setEdge(y,g),g}),this},r.prototype.setEdge=function(){var u,f,v,b,y=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,f=g.w,v=g.name,arguments.length===2&&(b=arguments[1],y=!0)):(u=g,f=arguments[1],v=arguments[3],arguments.length>2&&(b=arguments[2],y=!0)),u=""+u,f=""+f,t.isUndefined(v)||(v=""+v);var _=i(this._isDirected,u,f,v);if(t.has(this._edgeLabels,_))return y&&(this._edgeLabels[_]=b),this;if(!t.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[_]=y?b:this._defaultEdgeLabelFn(u,f,v);var M=a(this._isDirected,u,f,v);return u=M.v,f=M.w,Object.freeze(M),this._edgeObjs[_]=M,h(this._preds[f],u),h(this._sucs[u],f),this._in[f][_]=M,this._out[u][_]=M,this._edgeCount++,this},r.prototype.edge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v);return this._edgeLabels[b]},r.prototype.hasEdge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v);return t.has(this._edgeLabels,b)},r.prototype.removeEdge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v),y=this._edgeObjs[b];return y&&(u=y.v,f=y.w,delete this._edgeLabels[b],delete this._edgeObjs[b],n(this._preds[f],u),n(this._sucs[u],f),delete this._in[f][b],delete this._out[u][b],this._edgeCount--),this},r.prototype.inEdges=function(u,f){var v=this._in[u];if(v){var b=t.values(v);return f?t.filter(b,function(y){return y.v===f}):b}},r.prototype.outEdges=function(u,f){var v=this._out[u];if(v){var b=t.values(v);return f?t.filter(b,function(y){return y.w===f}):b}},r.prototype.nodeEdges=function(u,f){var v=this.inEdges(u,f);if(v)return v.concat(this.outEdges(u,f))};function h(u,f){u[f]?u[f]++:u[f]=1}function n(u,f){--u[f]||delete u[f]}function i(u,f,v,b){var y=""+f,g=""+v;if(!u&&y>g){var _=y;y=g,g=_}return y+c+g+c+(t.isUndefined(b)?l:b)}function a(u,f,v,b){var y=""+f,g=""+v;if(!u&&y>g){var _=y;y=g,g=_}var M={v:y,w:g};return b&&(M.name=b),M}function o(u,f){return i(u,f.v,f.w,f.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(E,T,e){E.exports={Graph:e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:e("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");E.exports={write:s,read:h};function s(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:c(n),edges:r(n)};return t.isUndefined(n.graph())||(i.value=t.clone(n.graph())),i}function c(n){return t.map(n.nodes(),function(i){var a=n.node(i),o=n.parent(i),u={v:i};return t.isUndefined(a)||(u.value=a),t.isUndefined(o)||(u.parent=o),u})}function r(n){return t.map(n.edges(),function(i){var a=n.edge(i),o={v:i.v,w:i.w};return t.isUndefined(i.name)||(o.name=i.name),t.isUndefined(a)||(o.value=a),o})}function h(n){var i=new l(n.options).setGraph(n.value);return t.each(n.nodes,function(a){i.setNode(a.v,a.value),a.parent&&i.setParent(a.v,a.parent)}),t.each(n.edges,function(a){i.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(E,T,e){var t;try{t={clone:e("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:e("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:e("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:e("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:e("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:e("./node_modules/_lodash@4.17.20@lodash/union.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(l){}t||(t=window._),E.exports=t},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(E,T){E.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(E,T){E.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"DataView");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Map");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Promise");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Set");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function c(r){var h=-1,n=r==null?0:r.length;for(this.__data__=new t;++h<n;)this.add(r[h])}c.prototype.add=c.prototype.push=l,c.prototype.has=s,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function n(i){var a=this.__data__=new t(i);this.size=a.size}n.prototype.clear=l,n.prototype.delete=s,n.prototype.get=c,n.prototype.has=r,n.prototype.set=h,E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t.Symbol;E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t.Uint8Array;E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"WeakMap");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(E,T){function e(t,l,s){switch(s.length){case 0:return t.call(l);case 1:return t.call(l,s[0]);case 2:return t.call(l,s[0],s[1]);case 3:return t.call(l,s[0],s[1],s[2])}return t.apply(l,s)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length;++s<c&&l(t[s],s,t)!==!1;);return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length,r=0,h=[];++s<c;){var n=t[s];l(n,s,t)&&(h[r++]=n)}return h}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function l(s,c){var r=s==null?0:s.length;return!!r&&t(s,c,0)>-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(E,T){function e(t,l,s){for(var c=-1,r=t==null?0:t.length;++c<r;)if(s(l,t[c]))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=Object.prototype,i=n.hasOwnProperty;function a(o,u){var f=s(o),v=!f&&l(o),b=!f&&!v&&c(o),y=!f&&!v&&!b&&h(o),g=f||v||b||y,_=g?t(o.length,String):[],M=_.length;for(var x in o)(u||i.call(o,x))&&!(g&&(x=="length"||b&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||r(x,M)))&&_.push(x);return _}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length,r=Array(c);++s<c;)r[s]=l(t[s],s,t);return r}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(E,T){function e(t,l){for(var s=-1,c=l.length,r=t.length;++s<c;)t[r+s]=l[s];return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(E,T){function e(t,l,s,c){var r=-1,h=t==null?0:t.length;for(c&&h&&(s=t[++r]);++r<h;)s=l(s,t[r],r,t);return s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length;++s<c;)if(l(t[s],s,t))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),l=t("length");E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function s(c,r,h){(h!==void 0&&!l(c[r],h)||h===void 0&&!(r in c))&&t(c,r,h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i){var a=h[n];(!(c.call(h,n)&&l(a,i))||i===void 0&&!(n in h))&&t(h,n,i)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function l(s,c){for(var r=s.length;r--;)if(t(s[r][0],c))return r;return-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(r,l(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c,r){return c&&t(r,l(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function l(s,c,r){c=="__proto__"&&t?t(s,c,{configurable:!0,enumerable:!0,value:r,writable:!0}):s[c]=r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),a=e("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),o=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),f=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=e("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),y=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),g=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),_=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),M=e("./node_modules/_lodash@4.17.20@lodash/isMap.js"),x=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),m=e("./node_modules/_lodash@4.17.20@lodash/isSet.js"),S=e("./node_modules/_lodash@4.17.20@lodash/keys.js"),P=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),A=1,O=2,L=4,W="[object Arguments]",F="[object Array]",K="[object Boolean]",V="[object Date]",k="[object Error]",Z="[object Function]",X="[object GeneratorFunction]",it="[object Map]",ft="[object Number]",pt="[object Object]",ut="[object RegExp]",It="[object Set]",Nt="[object String]",Rt="[object Symbol]",Mt="[object WeakMap]",bt="[object ArrayBuffer]",At="[object DataView]",rt="[object Float32Array]",Pt="[object Float64Array]",z="[object Int8Array]",Q="[object Int16Array]",gt="[object Int32Array]",et="[object Uint8Array]",ot="[object Uint8ClampedArray]",xt="[object Uint16Array]",H="[object Uint32Array]",nt={};nt[W]=nt[F]=nt[bt]=nt[At]=nt[K]=nt[V]=nt[rt]=nt[Pt]=nt[z]=nt[Q]=nt[gt]=nt[it]=nt[ft]=nt[pt]=nt[ut]=nt[It]=nt[Nt]=nt[Rt]=nt[et]=nt[ot]=nt[xt]=nt[H]=!0,nt[k]=nt[Z]=nt[Mt]=!1;function at(q,_t,yt,Ft,Qt,ee){var Vt,$t=_t&A,Me=_t&O,me=_t&L;if(yt&&(Vt=Qt?yt(q,Ft,Qt,ee):yt(q)),Vt!==void 0)return Vt;if(!x(q))return q;var le=g(q);if(le){if(Vt=v(q),!$t)return n(q,Vt)}else{var be=f(q),ze=be==Z||be==X;if(_(q))return h(q,$t);if(be==pt||be==W||ze&&!Qt){if(Vt=Me||ze?{}:y(q),!$t)return Me?a(q,r(Vt,q)):i(q,c(Vt,q))}else{if(!nt[be])return Qt?q:{};Vt=b(q,be,$t)}}ee||(ee=new t);var Xe=ee.get(q);if(Xe)return Xe;ee.set(q,Vt),m(q)?q.forEach(function(Hn){Vt.add(at(Hn,_t,yt,Hn,q,ee))}):M(q)&&q.forEach(function(Hn,nn){Vt.set(nn,at(Hn,_t,yt,nn,q,ee))});var Sn=me?Me?u:o:Me?P:S,Xn=le?void 0:Sn(q);return l(Xn||q,function(Hn,nn){Xn&&(nn=Hn,Hn=q[nn]),s(Vt,nn,at(Hn,_t,yt,nn,q,ee))}),Vt}E.exports=at},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=Object.create,s=function(){function c(){}return function(r){if(!t(r))return{};if(l)return l(r);c.prototype=r;var h=new c;return c.prototype=void 0,h}}();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),s=l(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function l(s,c,r){for(var h=-1,n=s.length;++h<n;){var i=s[h],a=c(i);if(a!=null&&(o===void 0?a===a&&!t(a):r(a,o)))var o=a,u=i}return u}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function l(s,c){var r=[];return t(s,function(h,n,i){c(h,n,i)&&r.push(h)}),r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(E,T){function e(t,l,s,c){for(var r=t.length,h=s+(c?1:-1);c?h--:++h<r;)if(l(t[h],h,t))return h;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function s(c,r,h,n,i){var a=-1,o=c.length;for(h||(h=l),i||(i=[]);++a<o;){var u=c[a];r>0&&h(u)?r>1?s(u,r-1,h,n,i):t(i,u):n||(i[i.length]=u)}return i}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),l=t();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(c,r,l)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function s(c,r){r=t(r,c);for(var h=0,n=r.length;c!=null&&h<n;)c=c[l(r[h++])];return h&&h==n?c:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(c,r,h){var n=r(c);return l(c)?n:t(n,h(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),c="[object Null]",r="[object Undefined]",h=t?t.toStringTag:void 0;function n(i){return i==null?i===void 0?r:c:h&&h in Object(i)?l(i):s(i)}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(E,T){function e(t,l){return t>l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function l(s,c){return s!=null&&t.call(s,c)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(E,T){function e(t,l){return t!=null&&l in Object(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function c(r,h,n){return h===h?s(r,h,n):t(r,l,n)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Arguments]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c,r,h,n,i){return c===r?!0:c==null||r==null||!l(c)&&!l(r)?c!==c&&r!==r:t(c,r,h,n,s,i)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a=1,o="[object Arguments]",u="[object Array]",f="[object Object]",v=Object.prototype,b=v.hasOwnProperty;function y(g,_,M,x,m,S){var P=h(g),A=h(_),O=P?u:r(g),L=A?u:r(_);O=O==o?f:O,L=L==o?f:L;var W=O==f,F=L==f,K=O==L;if(K&&n(g)){if(!n(_))return!1;P=!0,W=!1}if(K&&!W)return S||(S=new t),P||i(g)?l(g,_,M,x,m,S):s(g,_,O,M,x,m,S);if(!(M&a)){var V=W&&b.call(g,"__wrapped__"),k=F&&b.call(_,"__wrapped__");if(V||k){var Z=V?g.value():g,X=k?_.value():_;return S||(S=new t),m(Z,X,M,x,S)}}return K?(S||(S=new t),c(g,_,M,x,m,S)):!1}E.exports=y},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Map]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),s=1,c=2;function r(h,n,i,a){var o=i.length,u=o,f=!a;if(h==null)return!u;for(h=Object(h);o--;){var v=i[o];if(f&&v[2]?v[1]!==h[v[0]]:!(v[0]in h))return!1}for(;++o<u;){v=i[o];var b=v[0],y=h[b],g=v[1];if(f&&v[2]){if(y===void 0&&!(b in h))return!1}else{var _=new t;if(a)var M=a(y,g,b,h,n,_);if(!(M===void 0?l(g,y,s|c,a,_):M))return!1}}return!0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(E,T){function e(t){return t!==t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,n=Function.prototype,i=Object.prototype,a=n.toString,o=i.hasOwnProperty,u=RegExp("^"+a.call(o).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!s(v)||l(v))return!1;var b=t(v)?u:h;return b.test(c(v))}E.exports=f},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Set]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Arguments]",r="[object Array]",h="[object Boolean]",n="[object Date]",i="[object Error]",a="[object Function]",o="[object Map]",u="[object Number]",f="[object Object]",v="[object RegExp]",b="[object Set]",y="[object String]",g="[object WeakMap]",_="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",m="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",L="[object Uint8ClampedArray]",W="[object Uint16Array]",F="[object Uint32Array]",K={};K[x]=K[m]=K[S]=K[P]=K[A]=K[O]=K[L]=K[W]=K[F]=!0,K[c]=K[r]=K[_]=K[h]=K[M]=K[n]=K[i]=K[a]=K[o]=K[u]=K[f]=K[v]=K[b]=K[y]=K[g]=!1;function V(k){return s(k)&&l(k.length)&&!!K[t(k)]}E.exports=V},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/property.js");function h(n){return typeof n=="function"?n:n==null?s:typeof n=="object"?c(n)?l(n[0],n[1]):t(n):r(n)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h){if(!t(h))return l(h);var n=[];for(var i in Object(h))c.call(h,i)&&i!="constructor"&&n.push(i);return n}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),c=Object.prototype,r=c.hasOwnProperty;function h(n){if(!t(n))return s(n);var i=l(n),a=[];for(var o in n)o=="constructor"&&(i||!r.call(n,o))||a.push(o);return a}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(E,T){function e(t,l){return t<l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function s(c,r){var h=-1,n=l(c)?Array(c.length):[];return t(c,function(i,a,o){n[++h]=r(i,a,o)}),n}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function c(r){var h=l(r);return h.length==1&&h[0][2]?s(h[0][0],h[0][1]):function(n){return n===r||t(n,r,h)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),l=e("./node_modules/_lodash@4.17.20@lodash/get.js"),s=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),i=1,a=2;function o(u,f){return c(u)&&r(f)?h(n(u),f):function(v){var b=l(v,u);return b===void 0&&b===f?s(v,u):t(f,b,i|a)}}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function i(a,o,u,f,v){a!==o&&s(o,function(b,y){if(v||(v=new t),r(b))c(a,o,y,u,i,f,v);else{var g=f?f(n(a,y),b,y+"",a,o,v):void 0;g===void 0&&(g=b),l(a,y,g)}},h)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),f=e("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),v=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),y=e("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function g(_,M,x,m,S,P,A){var O=b(_,x),L=b(M,x),W=A.get(L);if(W){t(_,x,W);return}var F=P?P(O,L,x+"",_,M,A):void 0,K=F===void 0;if(K){var V=n(L),k=!V&&a(L),Z=!V&&!k&&v(L);F=L,V||k||Z?n(O)?F=O:i(O)?F=c(O):k?(K=!1,F=l(L,!0)):Z?(K=!1,F=s(L,!0)):F=[]:f(L)||h(L)?(F=O,h(O)?F=y(O):(!u(O)||o(O))&&(F=r(L))):K=!1}K&&(A.set(L,F),S(F,L,m,P,A),A.delete(L)),t(_,x,F)}E.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),i=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function o(u,f,v){f.length?f=t(f,function(g){return a(g)?function(_){return l(_,g.length===1?g[0]:g)}:g}):f=[i];var b=-1;f=t(f,h(s));var y=c(u,function(g,_,M){var x=t(f,function(m){return m(g)});return{criteria:x,index:++b,value:g}});return r(y,function(g,_){return n(g,_,v)})}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),l=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function s(c,r){return t(c,r,function(h,n){return l(c,n)})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function c(r,h,n){for(var i=-1,a=h.length,o={};++i<a;){var u=h[i],f=t(r,u);n(f,u)&&l(o,s(u,r),f)}return o}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(E,T){function e(t){return function(l){return l==null?void 0:l[t]}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function l(s){return function(c){return t(c,s)}}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(E,T){var e=Math.ceil,t=Math.max;function l(s,c,r,h){for(var n=-1,i=t(e((c-s)/(r||1)),0),a=Array(i);i--;)a[h?i:++n]=s,s+=r;return a}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(E,T){function e(t,l,s,c,r){return r(t,function(h,n,i){s=c?(c=!1,h):l(s,h,n,i)}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r,h){return s(l(r,h,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function h(n,i,a,o){if(!c(n))return n;i=l(i,n);for(var u=-1,f=i.length,v=f-1,b=n;b!=null&&++u<f;){var y=r(i[u]),g=a;if(y==="__proto__"||y==="constructor"||y==="prototype")return n;if(u!=v){var _=b[y];g=o?o(_,y,b):void 0,g===void 0&&(g=c(_)?_:s(i[u+1])?[]:{})}t(b,y,g),b=b[y]}return n}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/constant.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=l?function(r,h){return l(r,"toString",{configurable:!0,enumerable:!1,value:t(h),writable:!0})}:s;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(E,T){function e(t,l){var s=t.length;for(t.sort(l);s--;)t[s]=t[s].value;return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(E,T){function e(t,l){for(var s=-1,c=Array(t);++s<t;)c[s]=l(s);return c}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),r=1/0,h=t?t.prototype:void 0,n=h?h.toString:void 0;function i(a){if(typeof a=="string")return a;if(s(a))return l(a,i)+"";if(c(a))return n?n.call(a):"";var o=a+"";return o=="0"&&1/a==-r?"-0":o}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(E,T){function e(t){return function(l){return t(l)}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=200;function i(a,o,u){var f=-1,v=l,b=a.length,y=!0,g=[],_=g;if(u)y=!1,v=s;else if(b>=n){var M=o?null:r(a);if(M)return h(M);y=!1,v=c,_=new t}else _=o?[]:g;t:for(;++f<b;){var x=a[f],m=o?o(x):x;if(x=u||x!==0?x:0,y&&m===m){for(var S=_.length;S--;)if(_[S]===m)continue t;o&&_.push(m),g.push(x)}else v(_,m,u)||(_!==g&&_.push(m),g.push(x))}return g}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function l(s,c){return t(c,function(r){return s[r]})}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(E,T){function e(t,l,s){for(var c=-1,r=t.length,h=l.length,n={};++c<r;){var i=c<h?l[c]:void 0;s(n,t[c],i)}return n}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(E,T){function e(t,l){return t.has(l)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function l(s){return typeof s=="function"?s:t}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),c=e("./node_modules/_lodash@4.17.20@lodash/toString.js");function r(h,n){return t(h)?h:l(h,n)?[h]:s(c(h))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function l(s){var c=new s.constructor(s.byteLength);return new t(c).set(new t(s)),c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r?l.Buffer:void 0,n=h?h.allocUnsafe:void 0;function i(a,o){if(o)return a.slice();var u=a.length,f=n?n(u):new a.constructor(u);return a.copy(f),f}t.exports=i}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function l(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.byteLength)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(E,T){var e=/\w*$/;function t(l){var s=new l.constructor(l.source,e.exec(l));return s.lastIndex=l.lastIndex,s}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=t?t.prototype:void 0,s=l?l.valueOf:void 0;function c(r){return s?Object(s.call(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function l(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.length)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function l(s,c){if(s!==c){var r=s!==void 0,h=s===null,n=s===s,i=t(s),a=c!==void 0,o=c===null,u=c===c,f=t(c);if(!o&&!f&&!i&&s>c||i&&a&&u&&!o&&!f||h&&a&&u||!r&&u||!n)return 1;if(!h&&!i&&!f&&s<c||f&&r&&n&&!h&&!i||o&&r&&n||!a&&n||!u)return-1}return 0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function l(s,c,r){for(var h=-1,n=s.criteria,i=c.criteria,a=n.length,o=r.length;++h<a;){var u=t(n[h],i[h]);if(u){if(h>=o)return u;var f=r[h];return u*(f=="desc"?-1:1)}}return s.index-c.index}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(E,T){function e(t,l){var s=-1,c=t.length;for(l||(l=Array(c));++s<c;)l[s]=t[s];return l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function s(c,r,h,n){var i=!h;h||(h={});for(var a=-1,o=r.length;++a<o;){var u=r[a],f=n?n(h[u],c[u],u,h,c):void 0;f===void 0&&(f=c[u]),i?l(h,u,f):t(h,u,f)}return h}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function s(c,r){return t(c,l(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function s(c,r){return t(c,l(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t["__core-js_shared__"];E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function s(c){return t(function(r,h){var n=-1,i=h.length,a=i>1?h[i-1]:void 0,o=i>2?h[2]:void 0;for(a=c.length>3&&typeof a=="function"?(i--,a):void 0,o&&l(h[0],h[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var u=h[n];u&&c(r,u,n,a)}return r})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function l(s,c){return function(r,h){if(r==null)return r;if(!t(r))return s(r,h);for(var n=r.length,i=c?n:-1,a=Object(r);(c?i--:++i<n)&&h(a[i],i,a)!==!1;);return r}}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(E,T){function e(t){return function(l,s,c){for(var r=-1,h=Object(l),n=c(l),i=n.length;i--;){var a=n[t?i:++r];if(s(h[a],a,h)===!1)break}return l}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return function(h,n,i){var a=Object(h);if(!l(h)){var o=t(n,3);h=s(h),n=function(v){return o(a[v],v,a)}}var u=r(h,n,i);return u>-1?a[o?h[u]:u]:void 0}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function c(r){return function(h,n,i){return i&&typeof i!="number"&&l(h,n,i)&&(n=i=void 0),h=s(h),n===void 0?(n=h,h=0):n=s(n),i=i===void 0?h<n?1:-1:s(i),t(h,n,i,r)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),l=e("./node_modules/_lodash@4.17.20@lodash/noop.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),c=1/0,r=t&&1/s(new t([,-0]))[1]==c?function(h){return new t(h)}:l;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch(c){}}();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),c=1,r=2;function h(n,i,a,o,u,f){var v=a&c,b=n.length,y=i.length;if(b!=y&&!(v&&y>b))return!1;var g=f.get(n),_=f.get(i);if(g&&_)return g==i&&_==n;var M=-1,x=!0,m=a&r?new t:void 0;for(f.set(n,i),f.set(i,n);++M<b;){var S=n[M],P=i[M];if(o)var A=v?o(P,S,M,i,n,f):o(S,P,M,n,i,f);if(A!==void 0){if(A)continue;x=!1;break}if(m){if(!l(i,function(O,L){if(!s(m,L)&&(S===O||u(S,O,a,o,f)))return m.push(L)})){x=!1;break}}else if(!(S===P||u(S,P,a,o,f))){x=!1;break}}return f.delete(n),f.delete(i),x}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),s=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=1,i=2,a="[object Boolean]",o="[object Date]",u="[object Error]",f="[object Map]",v="[object Number]",b="[object RegExp]",y="[object Set]",g="[object String]",_="[object Symbol]",M="[object ArrayBuffer]",x="[object DataView]",m=t?t.prototype:void 0,S=m?m.valueOf:void 0;function P(A,O,L,W,F,K,V){switch(L){case x:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case M:return!(A.byteLength!=O.byteLength||!K(new l(A),new l(O)));case a:case o:case v:return s(+A,+O);case u:return A.name==O.name&&A.message==O.message;case b:case g:return A==O+"";case f:var k=r;case y:var Z=W&n;if(k||(k=h),A.size!=O.size&&!Z)return!1;var X=V.get(A);if(X)return X==O;W|=i,V.set(A,O);var it=c(k(A),k(O),W,F,K,V);return V.delete(A),it;case _:if(S)return S.call(A)==S.call(O)}return!1}E.exports=P},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),l=1,s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i,a,o,u){var f=i&l,v=t(h),b=v.length,y=t(n),g=y.length;if(b!=g&&!f)return!1;for(var _=b;_--;){var M=v[_];if(!(f?M in n:c.call(n,M)))return!1}var x=u.get(h),m=u.get(n);if(x&&m)return x==n&&m==h;var S=!0;u.set(h,n),u.set(n,h);for(var P=f;++_<b;){M=v[_];var A=h[M],O=n[M];if(a)var L=f?a(O,A,M,n,h,u):a(A,O,M,h,n,u);if(!(L===void 0?A===O||o(A,O,i,a,u):L)){S=!1;break}P||(P=M=="constructor")}if(S&&!P){var W=h.constructor,F=n.constructor;W!=F&&"constructor"in h&&"constructor"in n&&!(typeof W=="function"&&W instanceof W&&typeof F=="function"&&F instanceof F)&&(S=!1)}return u.delete(h),u.delete(n),S}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r){return s(l(r,void 0,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(E,T,e){(function(t){var l=typeof t=="object"&&t&&t.Object===Object&&t;E.exports=l}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return t(r,s,l)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r){return t(r,s,l)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function l(s,c){var r=s.__data__;return t(c)?r[typeof c=="string"?"string":"hash"]:r.map}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){for(var r=l(c),h=r.length;h--;){var n=r[h],i=c[n];r[h]=[n,i,t(i)]}return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function s(c,r){var h=l(c,r);return t(h)?h:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),l=t(Object.getPrototypeOf,Object);E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=Object.prototype,s=l.hasOwnProperty,c=l.toString,r=t?t.toStringTag:void 0;function h(n){var i=s.call(n,r),a=n[r];try{n[r]=void 0;var o=!0}catch(f){}var u=c.call(n);return o&&(i?n[r]=a:delete n[r]),u}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),l=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),s=Object.prototype,c=s.propertyIsEnumerable,r=Object.getOwnPropertySymbols,h=r?function(n){return n==null?[]:(n=Object(n),t(r(n),function(i){return c.call(n,i)}))}:l;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),c=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),r=Object.getOwnPropertySymbols,h=r?function(n){for(var i=[];n;)t(i,s(n)),n=l(n);return i}:c;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),i="[object Map]",a="[object Object]",o="[object Promise]",u="[object Set]",f="[object WeakMap]",v="[object DataView]",b=n(t),y=n(l),g=n(s),_=n(c),M=n(r),x=h;(t&&x(new t(new ArrayBuffer(1)))!=v||l&&x(new l)!=i||s&&x(s.resolve())!=o||c&&x(new c)!=u||r&&x(new r)!=f)&&(x=function(S){var P=h(S),A=P==a?S.constructor:void 0,O=A?n(A):"";if(O)switch(O){case b:return v;case y:return i;case g:return o;case _:return u;case M:return f}return P}),E.exports=x},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(E,T){function e(t,l){return t==null?void 0:t[l]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function n(i,a,o){a=t(a,i);for(var u=-1,f=a.length,v=!1;++u<f;){var b=h(a[u]);if(!(v=i!=null&&o(i,b)))break;i=i[b]}return v||++u!=f?v:(f=i==null?0:i.length,!!f&&r(f)&&c(b,f)&&(s(i)||l(i)))}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",l="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+l+s,r="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+e+c+r+"]");function i(a){return n.test(a)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function l(){this.__data__=t?t(null):{},this.size=0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(E,T){function e(t){var l=this.has(t)&&delete this.__data__[t];return this.size-=l?1:0,l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l="__lodash_hash_undefined__",s=Object.prototype,c=s.hasOwnProperty;function r(h){var n=this.__data__;if(t){var i=n[h];return i===l?void 0:i}return c.call(n,h)?n[h]:void 0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l=Object.prototype,s=l.hasOwnProperty;function c(r){var h=this.__data__;return t?h[r]!==void 0:s.call(h,r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l="__lodash_hash_undefined__";function s(c,r){var h=this.__data__;return this.size+=this.has(c)?0:1,h[c]=t&&r===void 0?l:r,this}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function l(s){var c=s.length,r=new s.constructor(c);return c&&typeof s[0]=="string"&&t.call(s,"index")&&(r.index=s.index,r.input=s.input),r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h="[object Boolean]",n="[object Date]",i="[object Map]",a="[object Number]",o="[object RegExp]",u="[object Set]",f="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",M="[object Int8Array]",x="[object Int16Array]",m="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]";function L(W,F,K){var V=W.constructor;switch(F){case b:return t(W);case h:case n:return new V(+W);case y:return l(W,K);case g:case _:case M:case x:case m:case S:case P:case A:case O:return r(W,K);case i:return new V;case a:case f:return new V(W);case o:return s(W);case u:return new V;case v:return c(W)}}E.exports=L},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function c(r){return typeof r.constructor=="function"&&!s(r)?t(l(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=t?t.isConcatSpreadable:void 0;function r(h){return s(h)||l(h)||!!(c&&h&&h[c])}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(E,T){var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function l(s,c){var r=typeof s;return c=c==null?e:c,!!c&&(r=="number"||r!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function r(h,n,i){if(!c(i))return!1;var a=typeof n;return(a=="number"?l(i)&&s(n,i.length):a=="string"&&n in i)?t(i[n],h):!1}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function r(h,n){if(t(h))return!1;var i=typeof h;return i=="number"||i=="symbol"||i=="boolean"||h==null||l(h)?!0:c.test(h)||!s.test(h)||n!=null&&h in Object(n)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(E,T){function e(t){var l=typeof t;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?t!=="__proto__":t===null}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),l=function(){var c=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function s(c){return!!l&&l in c}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(E,T){var e=Object.prototype;function t(l){var s=l&&l.constructor,c=typeof s=="function"&&s.prototype||e;return l===c}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function l(s){return s===s&&!t(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(E,T){function e(){this.__data__=[],this.size=0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),l=Array.prototype,s=l.splice;function c(r){var h=this.__data__,n=t(h,r);if(n<0)return!1;var i=h.length-1;return n==i?h.pop():s.call(h,n,1),--this.size,!0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s){var c=this.__data__,r=t(c,s);return r<0?void 0:c[r][1]}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s){return t(this.__data__,s)>-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s,c){var r=this.__data__,h=t(r,s);return h<0?(++this.size,r.push([s,c])):r[h][1]=c,this}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Map.js");function c(){this.size=0,this.__data__={hash:new t,map:new(s||l),string:new t}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){var c=t(this,s).delete(s);return this.size-=c?1:0,c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){return t(this,s).get(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){return t(this,s).has(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s,c){var r=t(this,s),h=r.size;return r.set(s,c),this.size+=r.size==h?0:1,this}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(E,T){function e(t){var l=-1,s=Array(t.size);return t.forEach(function(c,r){s[++l]=[r,c]}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(E,T){function e(t,l){return function(s){return s==null?!1:s[t]===l&&(l!==void 0||t in Object(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/memoize.js"),l=500;function s(c){var r=t(c,function(n){return h.size===l&&h.clear(),n}),h=r.cache;return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=t(Object,"create");E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),l=t(Object.keys,Object);E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(E,T){function e(t){var l=[];if(t!=null)for(var s in Object(t))l.push(s);return l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r&&l.process,n=function(){try{var i=c&&c.require&&c.require("util").types;return i||h&&h.binding&&h.binding("util")}catch(a){}}();t.exports=n}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(E,T){var e=Object.prototype,t=e.toString;function l(s){return t.call(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(E,T){function e(t,l){return function(s){return t(l(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_apply.js"),l=Math.max;function s(c,r,h){return r=l(r===void 0?c.length-1:r,0),function(){for(var n=arguments,i=-1,a=l(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=n[i];return u[r]=h(o),t(c,this,u)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),l=typeof self=="object"&&self&&self.Object===Object&&self,s=t||l||Function("return this")();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(E,T){function e(t,l){if(!(l==="constructor"&&typeof t[l]=="function")&&l!="__proto__")return t[l]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(E,T){var e="__lodash_hash_undefined__";function t(l){return this.__data__.set(l,e),this}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(E,T){function e(t){var l=-1,s=Array(t.size);return t.forEach(function(c){s[++l]=c}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),s=l(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(E,T){var e=800,t=16,l=Date.now;function s(c){var r=0,h=0;return function(){var n=l(),i=t-(n-h);if(h=n,i>0){if(++r>=e)return arguments[0]}else r=0;return c.apply(void 0,arguments)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function l(){this.__data__=new t,this.size=0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(E,T){function e(t){var l=this.__data__,s=l.delete(t);return this.size=l.size,s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(E,T){function e(t){return this.__data__.get(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),c=200;function r(h,n){var i=this.__data__;if(i instanceof t){var a=i.__data__;if(!l||a.length<c-1)return a.push([h,n]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(h,n),this.size=i.size,this}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(E,T){function e(t,l,s){for(var c=s-1,r=t.length;++c<r;)if(t[c]===l)return c;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function c(r){return l(r)?s(r):t(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,c=t(function(r){var h=[];return r.charCodeAt(0)===46&&h.push(""),r.replace(l,function(n,i,a,o){h.push(a?o.replace(s,"$1"):i||n)}),h});E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),l=1/0;function s(c){if(typeof c=="string"||t(c))return c;var r=c+"";return r=="0"&&1/c==-l?"-0":r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(E,T){var e=Function.prototype,t=e.toString;function l(s){if(s!=null){try{return t.call(s)}catch(c){}try{return s+""}catch(c){}}return""}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",l="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+l+s,r="\\ufe0e\\ufe0f",h="["+e+"]",n="["+c+"]",i="\\ud83c[\\udffb-\\udfff]",a="(?:"+n+"|"+i+")",o="[^"+e+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=a+"?",y="["+r+"]?",g="(?:"+v+"(?:"+[o,u,f].join("|")+")"+y+b+")*",_=y+b+g,M="(?:"+[o+n+"?",n,u,f,h].join("|")+")",x=RegExp(i+"(?="+i+")|"+M+_,"g");function m(S){for(var P=x.lastIndex=0;x.test(S);)++P;return P}E.exports=m},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),l=4;function s(c){return t(c,l)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),l=1,s=4;function c(r){return t(r,l|s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(E,T){function e(t){return function(){return t}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),c=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),r=Object.prototype,h=r.hasOwnProperty,n=t(function(i,a){i=Object(i);var o=-1,u=a.length,f=u>2?a[2]:void 0;for(f&&s(a[0],a[1],f)&&(u=1);++o<u;)for(var v=a[o],b=c(v),y=-1,g=b.length;++y<g;){var _=b[y],M=i[_];(M===void 0||l(M,r[_])&&!h.call(i,_))&&(i[_]=v[_])}return i});E.exports=n},"./node_modules/_lodash@4.17.20@lodash/each.js":function(E,T,e){E.exports=e("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(E,T){function e(t,l){return t===l||t!==t&&l!==l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:l;return i(h,s(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/find.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),l=e("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),s=t(l);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),c=Math.max;function r(h,n,i){var a=h==null?0:h.length;if(!a)return-1;var o=i==null?0:s(i);return o<0&&(o=c(a+o,0)),t(h,l(n,3),o)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function l(s){var c=s==null?0:s.length;return c?t(s,1):[]}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:l;return i(h,s(n))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r,h){return r==null?r:t(r,l(h),s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/get.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function l(s,c,r){var h=s==null?void 0:t(s,c);return h===void 0?r:h}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/has.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&l(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&l(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(E,T){function e(t){return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s=Object.prototype,c=s.hasOwnProperty,r=s.propertyIsEnumerable,h=t(function(){return arguments}())?t:function(n){return l(n)&&c.call(n,"callee")&&!r.call(n,"callee")};E.exports=h},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(E,T){var e=Array.isArray;E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isLength.js");function s(c){return c!=null&&l(c.length)&&!t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c){return l(c)&&t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=e("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),c=T&&!T.nodeType&&T,r=c&&typeof t=="object"&&t&&!t.nodeType&&t,h=r&&r.exports===c,n=h?l.Buffer:void 0,i=n?n.isBuffer:void 0,a=i||s;t.exports=a}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a="[object Map]",o="[object Set]",u=Object.prototype,f=u.hasOwnProperty;function v(b){if(b==null)return!0;if(r(b)&&(c(b)||typeof b=="string"||typeof b.splice=="function"||h(b)||i(b)||s(b)))return!b.length;var y=l(b);if(y==a||y==o)return!b.size;if(n(b))return!t(b).length;for(var g in b)if(f.call(b,g))return!1;return!0}E.exports=v},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s="[object AsyncFunction]",c="[object Function]",r="[object GeneratorFunction]",h="[object Proxy]";function n(i){if(!l(i))return!1;var a=t(i);return a==c||a==r||a==s||a==h}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(E,T){var e=9007199254740991;function t(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=e}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isMap,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(E,T){function e(t){var l=typeof t;return t!=null&&(l=="object"||l=="function")}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(E,T){function e(t){return t!=null&&typeof t=="object"}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Object]",r=Function.prototype,h=Object.prototype,n=r.toString,i=h.hasOwnProperty,a=n.call(Object);function o(u){if(!s(u)||t(u)!=c)return!1;var f=l(u);if(f===null)return!0;var v=i.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&n.call(v)==a}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isSet,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object String]";function r(h){return typeof h=="string"||!l(h)&&s(h)&&t(h)==c}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Symbol]";function c(r){return typeof r=="symbol"||l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isTypedArray,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(E,T){function e(t){return t===void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r):l(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r,!0):l(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/last.js":function(E,T){function e(t){var l=t==null?0:t.length;return l?t[l-1]:void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:s;return i(h,l(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function c(r,h){var n={};return h=s(h,3),l(r,function(i,a,o){t(n,a,h(i,a,o))}),n}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/max.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,l):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),l="Expected a function";function s(c,r){if(typeof c!="function"||r!=null&&typeof r!="function")throw new TypeError(l);var h=function n(){var i=arguments,a=r?r.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var u=c.apply(this,i);return n.cache=o.set(a,u)||o,u};return h.cache=new(s.Cache||t),h}s.Cache=t,E.exports=s},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),s=l(function(c,r,h){t(c,r,h)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/min.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,l):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function c(r,h){return r&&r.length?t(r,l(h,2),s):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(E,T){function e(){}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/now.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=function(){return t.Date.now()};E.exports=l},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),s=l(function(c,r){return c==null?{}:t(c,r)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/property.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function r(h){return s(h)?t(c(h)):l(h)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/range.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),l=t();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function h(n,i,a){var o=r(n)?t:c,u=arguments.length<3;return o(n,s(i,4),a,u,l)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/size.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isString.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),h="[object Map]",n="[object Set]";function i(a){if(a==null)return 0;if(s(a))return c(a)?r(a):a.length;var o=l(a);return o==h||o==n?a.size:t(a).length}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),r=s(function(h,n){if(h==null)return[];var i=n.length;return i>1&&c(h,n[0],n[1])?n=[]:i>2&&c(n[0],n[1],n[2])&&(n=[n[0]]),l(h,t(n,1),[])});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(E,T){function e(){return[]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(E,T){function e(){return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),l=1/0,s=17976931348623157e292;function c(r){if(!r)return r===0?r:0;if(r=t(r),r===l||r===-l){var h=r<0?-1:1;return h*s}return r===r?r:0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function l(s){var c=t(s),r=c%1;return c===c?r?c-r:c:0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=0/0,c=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt;function a(o){if(typeof o=="number")return o;if(l(o))return s;if(t(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=t(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=o.replace(c,"");var f=h.test(o);return f||n.test(o)?i(o.slice(2),f?2:8):r.test(o)?s:+o}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c){return t(c,l(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function l(s){return s==null?"":t(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function u(f,v,b){var y=h(f),g=y||n(f)||o(f);if(v=c(v,4),b==null){var _=f&&f.constructor;g?b=y?new _:[]:a(f)?b=i(_)?l(r(f)):{}:b={}}return(g?t:s)(f,function(M,x,m){return v(b,M,x,m)}),b}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/union.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),r=l(function(h){return s(t(h,1,c,!0))});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toString.js"),l=0;function s(c){var r=++l;return t(c)+r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/values.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){return c==null?[]:t(c,l(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function s(c,r){return l(c||[],r||[],t)}E.exports=s},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(E,T){E.exports=l;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function l(r){var h=[];return r.replace(t,function(n,i,a){var o=i.toLowerCase();for(a=c(a),o=="m"&&a.length>2&&(h.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==e[o])return a.unshift(i),h.push(a);if(a.length<e[o])throw new Error("malformed path data");h.push([i].concat(a.splice(0,e[o])))}}),h}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function c(r){var h=r.match(s);return h?h.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(E,T,e){var t=e("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),l=e("./node_modules/_isarray@0.0.1@isarray/index.js"),s=e("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");E.exports=c;function c(i){if(!(this instanceof c))return new c(i);this._path=l(i)?i:t(i),this._path=s(this._path),this._path=n(this._path),this._path=h(this._path)}c.prototype.at=function(i,a){return this._walk(i,a).pos},c.prototype.length=function(){return this._walk(null).length},c.prototype._walk=function(i,a){for(var o=[0,0],u=[0,0,0],f=[0,0],v=0,b=0;b<this._path.length;b++){var y=this._path[b];if(y[0]==="M"){if(o[0]=y[1],o[1]=y[2],i===0)return{length:v,pos:o}}else if(y[0]==="C"){u[0]=f[0]=o[0],u[1]=f[1]=o[1],u[2]=v;for(var g=100,_=0;_<=g;_++){var M=_/g,x=A(y,M),m=O(y,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}else if(y[0]==="Q"){u[0]=f[0]=o[0],u[1]=f[1]=o[1],u[2]=v;for(var g=100,_=0;_<=g;_++){var M=_/g,x=L(y,M),m=W(y,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}else if(y[0]==="L"){if(u[0]=o[0],u[1]=o[1],u[2]=v,v+=r(o[0],o[1],y[1],y[2]),o[0]=y[1],o[1]=y[2],typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}return{length:v,pos:o};function A(F,K){return Math.pow(1-K,3)*f[0]+3*Math.pow(1-K,2)*K*F[1]+3*(1-K)*Math.pow(K,2)*F[3]+Math.pow(K,3)*F[5]}function O(F,K){return Math.pow(1-K,3)*f[1]+3*Math.pow(1-K,2)*K*F[2]+3*(1-K)*Math.pow(K,2)*F[4]+Math.pow(K,3)*F[6]}function L(F,K){return Math.pow(1-K,2)*f[0]+2*(1-K)*K*F[1]+Math.pow(K,2)*F[3]}function W(F,K){return Math.pow(1-K,2)*f[1]+2*(1-K)*K*F[2]+Math.pow(K,2)*F[4]}};function r(i,a,o,u){var f=i-o,v=a-u;return Math.sqrt(f*f+v*v)}function h(i){for(var a,o=0,u=0,f={S:{to:"C",x:3},T:{to:"Q",x:1}},v=0,b=i.length;v<b;v++){var y=i[v],g=f[y[0]];g&&(y[0]=g.to,a&&(a[0]===g.to?(o=2*a[g.x+2]-a[g.x],u=2*a[g.x+3]-a[g.x+1]):(o=a[a.length-2],u=a[a.length-1])),y.splice(1,0,o,u)),a=y}return i}function n(i){for(var a=[],o=["L",0,0],u,f=0,v=i.length;f<v;f++){var b=i[f];switch(b[0]){case"M":o=["L",b[1],b[2]],a.push(b);break;case"Z":a.push(o);break;case"H":u=a[a.length-1]||["L",0,0],a.push(["L",b[1],u[u.length-1]]);break;case"V":u=a[a.length-1]||["L",0,0],a.push(["L",u[u.length-2],b[1]]);break;default:a.push(b)}}return a}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(E,T,e){var t,l,s;(function(c,r){if(!0)l=[E],t=r,s=typeof t=="function"?t.apply(T,l):t,s!==void 0&&(E.exports=s);else var h})(this,function(c){"use strict";function r(b,y,g){return y in b?Object.defineProperty(b,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[y]=g,b}var h=Object.assign||function(b){for(var y=1;y<arguments.length;y++){var g=arguments[y];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])}return b};function n(b){if(Array.isArray(b)){for(var y=0,g=Array(b.length);y<b.length;y++)g[y]=b[y];return g}else return Array.from(b)}var i={order:2,precision:2,period:null};function a(b,y){var g=[],_=[];b.forEach(function(P,A){P[1]!==null&&(_.push(P),g.push(y[A]))});var M=_.reduce(function(P,A){return P+A[1]},0),x=M/_.length,m=_.reduce(function(P,A){var O=A[1]-x;return P+O*O},0),S=_.reduce(function(P,A,O){var L=g[O],W=A[1]-L[1];return P+W*W},0);return 1-S/m}function o(b,y){for(var g=b,_=b.length-1,M=[y],x=0;x<_;x++){for(var m=x,S=x+1;S<_;S++)Math.abs(g[x][S])>Math.abs(g[x][m])&&(m=S);for(var P=x;P<_+1;P++){var A=g[P][x];g[P][x]=g[P][m],g[P][m]=A}for(var O=x+1;O<_;O++)for(var L=_;L>=x;L--)g[L][O]-=g[L][x]*g[x][O]/g[x][x]}for(var W=_-1;W>=0;W--){for(var F=0,K=W+1;K<_;K++)F+=g[K][W]*M[K];M[W]=(g[_][W]-F)/g[W][W]}return M}function u(b,y){var g=Math.pow(10,y);return Math.round(b*g)/g}var f={linear:function(y,g){for(var _=[0,0,0,0,0],M=0,x=0;x<y.length;x++)y[x][1]!==null&&(M++,_[0]+=y[x][0],_[1]+=y[x][1],_[2]+=y[x][0]*y[x][0],_[3]+=y[x][0]*y[x][1],_[4]+=y[x][1]*y[x][1]);var m=M*_[2]-_[0]*_[0],S=M*_[3]-_[0]*_[1],P=m===0?0:u(S/m,g.precision),A=u(_[1]/M-P*_[0]/M,g.precision),O=function(F){return[u(F,g.precision),u(P*F+A,g.precision)]},L=y.map(function(W){return O(W[0])});return{points:L,predict:O,equation:[P,A],r2:u(a(y,L),g.precision),string:A===0?"y = "+P+"x":"y = "+P+"x + "+A}},exponential:function(y,g){for(var _=[0,0,0,0,0,0],M=0;M<y.length;M++)y[M][1]!==null&&(_[0]+=y[M][0],_[1]+=y[M][1],_[2]+=y[M][0]*y[M][0]*y[M][1],_[3]+=y[M][1]*Math.log(y[M][1]),_[4]+=y[M][0]*y[M][1]*Math.log(y[M][1]),_[5]+=y[M][0]*y[M][1]);var x=_[1]*_[2]-_[5]*_[5],m=Math.exp((_[2]*_[3]-_[5]*_[4])/x),S=(_[1]*_[4]-_[5]*_[3])/x,P=u(m,g.precision),A=u(S,g.precision),O=function(F){return[u(F,g.precision),u(P*Math.exp(A*F),g.precision)]},L=y.map(function(W){return O(W[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"e^("+A+"x)",r2:u(a(y,L),g.precision)}},logarithmic:function(y,g){for(var _=[0,0,0,0],M=y.length,x=0;x<M;x++)y[x][1]!==null&&(_[0]+=Math.log(y[x][0]),_[1]+=y[x][1]*Math.log(y[x][0]),_[2]+=y[x][1],_[3]+=Math.pow(Math.log(y[x][0]),2));var m=(M*_[1]-_[2]*_[0])/(M*_[3]-_[0]*_[0]),S=u(m,g.precision),P=u((_[2]-S*_[0])/M,g.precision),A=function(W){return[u(W,g.precision),u(u(P+S*Math.log(W),g.precision),g.precision)]},O=y.map(function(L){return A(L[0])});return{points:O,predict:A,equation:[P,S],string:"y = "+P+" + "+S+" ln(x)",r2:u(a(y,O),g.precision)}},power:function(y,g){for(var _=[0,0,0,0,0],M=y.length,x=0;x<M;x++)y[x][1]!==null&&(_[0]+=Math.log(y[x][0]),_[1]+=Math.log(y[x][1])*Math.log(y[x][0]),_[2]+=Math.log(y[x][1]),_[3]+=Math.pow(Math.log(y[x][0]),2));var m=(M*_[1]-_[0]*_[2])/(M*_[3]-Math.pow(_[0],2)),S=(_[2]-m*_[0])/M,P=u(Math.exp(S),g.precision),A=u(m,g.precision),O=function(F){return[u(F,g.precision),u(u(P*Math.pow(F,A),g.precision),g.precision)]},L=y.map(function(W){return O(W[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"x^"+A,r2:u(a(y,L),g.precision)}},polynomial:function(y,g){for(var _=[],M=[],x=0,m=0,S=y.length,P=g.order+1,A=0;A<P;A++){for(var O=0;O<S;O++)y[O][1]!==null&&(x+=Math.pow(y[O][0],A)*y[O][1]);_.push(x),x=0;for(var L=[],W=0;W<P;W++){for(var F=0;F<S;F++)y[F][1]!==null&&(m+=Math.pow(y[F][0],A+W));L.push(m),m=0}M.push(L)}M.push(_);for(var K=o(M,P).map(function(it){return u(it,g.precision)}),V=function(ft){return[u(ft,g.precision),u(K.reduce(function(pt,ut,It){return pt+ut*Math.pow(ft,It)},0),g.precision)]},k=y.map(function(it){return V(it[0])}),Z="y = ",X=K.length-1;X>=0;X--)X>1?Z+=K[X]+"x^"+X+" + ":X===1?Z+=K[X]+"x + ":Z+=K[X];return{string:Z,points:k,predict:V,equation:[].concat(n(K)).reverse(),r2:u(a(y,k),g.precision)}}};function v(){var b=function(g,_){return h({_round:u},g,r({},_,function(M,x){return f[_](M,h({},i,x))}))};return Object.keys(f).reduce(b,{})}c.exports=v()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(H){if(H.length===0)return 0;for(var nt,at=H[0],q=0,_t=1;_t<H.length;_t++)nt=at+H[_t],Math.abs(at)>=Math.abs(H[_t])?q+=at-nt+H[_t]:q+=H[_t]-nt+at,at=nt;return at+q}function s(H){if(H.length===0)throw new Error("mean requires at least one data point");return l(H)/H.length}function c(H,nt){var at,q,_t=s(H),yt=0;if(nt===2)for(q=0;q<H.length;q++)yt+=(at=H[q]-_t)*at;else for(q=0;q<H.length;q++)yt+=Math.pow(H[q]-_t,nt);return yt}function r(H){if(H.length===0)throw new Error("variance requires at least one data point");return c(H,2)/H.length}function h(H){if(H.length===1)return 0;var nt=r(H);return Math.sqrt(nt)}function n(H){if(H.length===0)throw new Error("mode requires at least one data point");if(H.length===1)return H[0];for(var nt=H[0],at=NaN,q=0,_t=1,yt=1;yt<H.length+1;yt++)H[yt]!==nt?(q<_t&&(q=_t,at=nt),_t=1,nt=H[yt]):_t++;return at}function i(H){return H.slice().sort(function(nt,at){return nt-at})}function a(H){if(H.length===0)throw new Error("min requires at least one data point");for(var nt=H[0],at=1;at<H.length;at++)H[at]<nt&&(nt=H[at]);return nt}function o(H){if(H.length===0)throw new Error("max requires at least one data point");for(var nt=H[0],at=1;at<H.length;at++)H[at]>nt&&(nt=H[at]);return nt}function u(H,nt){var at=H.length*nt;if(H.length===0)throw new Error("quantile requires at least one data point.");if(nt<0||1<nt)throw new Error("quantiles must be between 0 and 1");return nt===1?H[H.length-1]:nt===0?H[0]:at%1!=0?H[Math.ceil(at)-1]:H.length%2==0?(H[at-1]+H[at])/2:H[at]}function f(H,nt,at,q){for(at=at||0,q=q||H.length-1;at<q;){if(600<q-at){var _t=q-at+1,yt=nt-at+1,Ft=Math.log(_t),Qt=.5*Math.exp(2*Ft/3),ee=.5*Math.sqrt(Ft*Qt*(_t-Qt)/_t);yt-_t/2<0&&(ee*=-1),f(H,nt,Math.max(at,Math.floor(nt-yt*Qt/_t+ee)),Math.min(q,Math.floor(nt+(_t-yt)*Qt/_t+ee)))}var Vt=H[nt],$t=at,Me=q;for(v(H,at,nt),H[q]>Vt&&v(H,at,q);$t<Me;){for(v(H,$t,Me),$t++,Me--;H[$t]<Vt;)$t++;for(;H[Me]>Vt;)Me--}H[at]===Vt?v(H,at,Me):v(H,++Me,q),Me<=nt&&(at=Me+1),nt<=Me&&(q=Me-1)}}function v(H,nt,at){var q=H[nt];H[nt]=H[at],H[at]=q}function b(H,nt){var at=H.slice();if(Array.isArray(nt)){(function(yt,Ft){for(var Qt=[0],ee=0;ee<Ft.length;ee++)Qt.push(_(yt.length,Ft[ee]));Qt.push(yt.length-1),Qt.sort(g);for(var Vt=[0,Qt.length-1];Vt.length;){var $t=Math.ceil(Vt.pop()),Me=Math.floor(Vt.pop());if(!($t-Me<=1)){var me=Math.floor((Me+$t)/2);y(yt,Qt[me],Qt[Me],Qt[$t]),Vt.push(Me,me,me,$t)}}})(at,nt);for(var q=[],_t=0;_t<nt.length;_t++)q[_t]=u(at,nt[_t]);return q}return y(at,_(at.length,nt),0,at.length-1),u(at,nt)}function y(H,nt,at,q){nt%1==0?f(H,nt,at,q):(f(H,nt=Math.floor(nt),at,q),f(H,nt+1,nt+1,q))}function g(H,nt){return H-nt}function _(H,nt){var at=H*nt;return nt===1?H-1:nt===0?0:at%1!=0?Math.ceil(at)-1:H%2==0?at-.5:at}function M(H,nt){if(nt<H[0])return 0;if(nt>H[H.length-1])return 1;var at=function(yt,Ft){for(var Qt=0,ee=0,Vt=yt.length;ee<Vt;)Ft<=yt[Qt=ee+Vt>>>1]?Vt=Qt:ee=-~Qt;return ee}(H,nt);if(H[at]!==nt)return at/H.length;at++;var q=function(yt,Ft){for(var Qt=0,ee=0,Vt=yt.length;ee<Vt;)Ft>=yt[Qt=ee+Vt>>>1]?ee=-~Qt:Vt=Qt;return ee}(H,nt);if(q===at)return at/H.length;var _t=q-at+1;return _t*(q+at)/2/_t/H.length}function x(H){var nt=b(H,.75),at=b(H,.25);if(typeof nt=="number"&&typeof at=="number")return nt-at}function m(H){return+b(H,.5)}function S(H){for(var nt=m(H),at=[],q=0;q<H.length;q++)at.push(Math.abs(H[q]-nt));return m(at)}function P(H,nt){nt=nt||Math.random;for(var at,q,_t=H.length;0<_t;)q=Math.floor(nt()*_t--),at=H[_t],H[_t]=H[q],H[q]=at;return H}function A(H,nt){return P(H.slice().slice(),nt)}function O(H){for(var nt,at=0,q=0;q<H.length;q++)q!==0&&H[q]===nt||(nt=H[q],at++);return at}function L(H,nt){for(var at=[],q=0;q<H;q++){for(var _t=[],yt=0;yt<nt;yt++)_t.push(0);at.push(_t)}return at}function W(H,nt,at,q){var _t;if(0<H){var yt=(at[nt]-at[H-1])/(nt-H+1);_t=q[nt]-q[H-1]-(nt-H+1)*yt*yt}else _t=q[nt]-at[nt]*at[nt]/(nt+1);return _t<0?0:_t}function F(H,nt,at,q,_t,yt,Ft){if(!(nt<H)){var Qt=Math.floor((H+nt)/2);q[at][Qt]=q[at-1][Qt-1],_t[at][Qt]=Qt;var ee=at;at<H&&(ee=Math.max(ee,_t[at][H-1]||0)),ee=Math.max(ee,_t[at-1][Qt]||0);var Vt,$t,Me,me=Qt-1;nt<q.length-1&&(me=Math.min(me,_t[at][nt+1]||0));for(var le=me;ee<=le&&!((Vt=W(le,Qt,yt,Ft))+q[at-1][ee-1]>=q[at][Qt]);--le)($t=W(ee,Qt,yt,Ft)+q[at-1][ee-1])<q[at][Qt]&&(q[at][Qt]=$t,_t[at][Qt]=ee),ee++,(Me=Vt+q[at-1][le-1])<q[at][Qt]&&(q[at][Qt]=Me,_t[at][Qt]=le);F(H,Qt-1,at,q,_t,yt,Ft),F(Qt+1,nt,at,q,_t,yt,Ft)}}function K(H,nt){if(H.length!==nt.length)throw new Error("sampleCovariance requires samples with equal lengths");if(H.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var at=s(H),q=s(nt),_t=0,yt=0;yt<H.length;yt++)_t+=(H[yt]-at)*(nt[yt]-q);return _t/(H.length-1)}function V(H){if(H.length<2)throw new Error("sampleVariance requires at least two data points");return c(H,2)/(H.length-1)}function k(H){var nt=V(H);return Math.sqrt(nt)}function Z(H,nt,at,q){return(H*nt+at*q)/(nt+q)}function X(H){if(H.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var nt=0,at=0;at<H.length;at++)nt+=Math.pow(H[at],2);return Math.sqrt(nt/H.length)}function it(){this.totalCount=0,this.data={}}function ft(){this.weights=[],this.bias=0}it.prototype.train=function(H,nt){for(var at in this.data[nt]||(this.data[nt]={}),H){var q=H[at];this.data[nt][at]===void 0&&(this.data[nt][at]={}),this.data[nt][at][q]===void 0&&(this.data[nt][at][q]=0),this.data[nt][at][q]++}this.totalCount++},it.prototype.score=function(H){var nt,at={};for(var q in H){var _t=H[q];for(nt in this.data)at[nt]={},this.data[nt][q]?at[nt][q+"_"+_t]=(this.data[nt][q][_t]||0)/this.totalCount:at[nt][q+"_"+_t]=0}var yt={};for(nt in at)for(var Ft in yt[nt]=0,at[nt])yt[nt]+=at[nt][Ft];return yt},ft.prototype.predict=function(H){if(H.length!==this.weights.length)return null;for(var nt=0,at=0;at<this.weights.length;at++)nt+=this.weights[at]*H[at];return 0<(nt+=this.bias)?1:0},ft.prototype.train=function(H,nt){if(nt!==0&&nt!==1)return null;H.length!==this.weights.length&&(this.weights=H,this.bias=1);var at=this.predict(H);if(at!==nt){for(var q=nt-at,_t=0;_t<this.weights.length;_t++)this.weights[_t]+=q*H[_t];this.bias+=q}return this};var pt=1e-4;function ut(H){if(H<0)throw new Error("factorial requires a non-negative value");if(Math.floor(H)!==H)throw new Error("factorial requires an integer input");for(var nt=1,at=2;at<=H;at++)nt*=at;return nt}var It=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Nt=Math.log(Math.sqrt(2*Math.PI)),Rt={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},Mt=Math.sqrt(2*Math.PI),bt={gaussian:function(nt){return Math.exp(-.5*nt*nt)/Mt}},At={nrd:function(nt){var at=k(nt),q=x(nt);return typeof q=="number"&&(at=Math.min(at,q/1.34)),1.06*at*Math.pow(nt.length,-.2)}};function rt(H,nt,at){var q,_t;if(nt===void 0)q=bt.gaussian;else if(typeof nt=="string"){if(!bt[nt])throw new Error('Unknown kernel "'+nt+'"');q=bt[nt]}else q=nt;if(at===void 0)_t=At.nrd(H);else if(typeof at=="string"){if(!At[at])throw new Error('Unknown bandwidth method "'+at+'"');_t=At[at](H)}else _t=at;return function(yt){var Ft=0,Qt=0;for(Ft=0;Ft<H.length;Ft++)Qt+=q((yt-H[Ft])/_t);return Qt/_t/H.length}}var Pt=Math.sqrt(2*Math.PI);function z(H){for(var nt=H,at=H,q=1;q<15;q++)nt+=at*=H*H/(2*q+1);return Math.round(1e4*(.5+nt/Pt*Math.exp(-H*H/2)))/1e4}for(var Q=[],gt=0;gt<=3.09;gt+=.01)Q.push(z(gt));function et(H){var nt=1/(1+.5*Math.abs(H)),at=nt*Math.exp(-Math.pow(H,2)-1.26551223+1.00002368*nt+.37409196*Math.pow(nt,2)+.09678418*Math.pow(nt,3)-.18628806*Math.pow(nt,4)+.27886807*Math.pow(nt,5)-1.13520398*Math.pow(nt,6)+1.48851587*Math.pow(nt,7)-.82215223*Math.pow(nt,8)+.17087277*Math.pow(nt,9));return 0<=H?1-at:at-1}function ot(H){var nt=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),at=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*nt)+Math.log(1-H*H)/2,2)-Math.log(1-H*H)/nt)-(2/(Math.PI*nt)+Math.log(1-H*H)/2));return 0<=H?at:-at}function xt(H){if(typeof H=="number")return H<0?-1:H===0?0:1;throw new TypeError("not a number")}t.linearRegression=function(H){var nt,at,q=H.length;if(q===1)at=H[nt=0][1];else{for(var _t,yt,Ft,Qt=0,ee=0,Vt=0,$t=0,Me=0;Me<q;Me++)Qt+=yt=(_t=H[Me])[0],ee+=Ft=_t[1],Vt+=yt*yt,$t+=yt*Ft;at=ee/q-(nt=(q*$t-Qt*ee)/(q*Vt-Qt*Qt))*Qt/q}return{m:nt,b:at}},t.linearRegressionLine=function(H){return function(nt){return H.b+H.m*nt}},t.standardDeviation=h,t.rSquared=function(H,nt){if(H.length<2)return 1;for(var at,q=0,_t=0;_t<H.length;_t++)q+=H[_t][1];at=q/H.length;for(var yt=0,Ft=0;Ft<H.length;Ft++)yt+=Math.pow(at-H[Ft][1],2);for(var Qt=0,ee=0;ee<H.length;ee++)Qt+=Math.pow(H[ee][1]-nt(H[ee][0]),2);return 1-Qt/yt},t.mode=function(H){return n(i(H))},t.modeFast=function(H){for(var nt,at=new Map,q=0,_t=0;_t<H.length;_t++){var yt=at.get(H[_t]);yt===void 0?yt=1:yt++,q<yt&&(nt=H[_t],q=yt),at.set(H[_t],yt)}if(q===0)throw new Error("mode requires at last one data point");return nt},t.modeSorted=n,t.min=a,t.max=o,t.extent=function(H){if(H.length===0)throw new Error("extent requires at least one data point");for(var nt=H[0],at=H[0],q=1;q<H.length;q++)H[q]>at&&(at=H[q]),H[q]<nt&&(nt=H[q]);return[nt,at]},t.minSorted=function(H){return H[0]},t.maxSorted=function(H){return H[H.length-1]},t.extentSorted=function(H){return[H[0],H[H.length-1]]},t.sum=l,t.sumSimple=function(H){for(var nt=0,at=0;at<H.length;at++)nt+=H[at];return nt},t.product=function(H){for(var nt=1,at=0;at<H.length;at++)nt*=H[at];return nt},t.quantile=b,t.quantileSorted=u,t.quantileRank=function(H,nt){return M(i(H),nt)},t.quantileRankSorted=M,t.interquartileRange=x,t.iqr=x,t.medianAbsoluteDeviation=S,t.mad=S,t.chunk=function(H,nt){var at=[];if(nt<1)throw new Error("chunk size must be a positive number");if(Math.floor(nt)!==nt)throw new Error("chunk size must be an integer");for(var q=0;q<H.length;q+=nt)at.push(H.slice(q,q+nt));return at},t.sampleWithReplacement=function(H,nt,at){if(H.length===0)return[];at=at||Math.random;for(var q=H.length,_t=[],yt=0;yt<nt;yt++){var Ft=Math.floor(at()*q);_t.push(H[Ft])}return _t},t.shuffle=A,t.shuffleInPlace=P,t.sample=function(H,nt,at){return A(H,at).slice(0,nt)},t.ckmeans=function(H,nt){if(nt>H.length)throw new Error("cannot generate more classes than there are data values");var at=i(H);if(O(at)===1)return[at];var q=L(nt,at.length),_t=L(nt,at.length);(function(Vt,$t,Me){for(var me,le=$t[0].length,be=Vt[Math.floor(le/2)],ze=[],Xe=[],Sn=0;Sn<le;++Sn)me=Vt[Sn]-be,Sn===0?(ze.push(me),Xe.push(me*me)):(ze.push(ze[Sn-1]+me),Xe.push(Xe[Sn-1]+me*me)),$t[0][Sn]=W(0,Sn,ze,Xe),Me[0][Sn]=0;for(var Xn=1;Xn<$t.length;++Xn)F(Xn<$t.length-1?Xn:le-1,le-1,Xn,$t,Me,ze,Xe)})(at,q,_t);for(var yt=[],Ft=_t[0].length-1,Qt=_t.length-1;0<=Qt;Qt--){var ee=_t[Qt][Ft];yt[Qt]=at.slice(ee,Ft+1),0<Qt&&(Ft=ee-1)}return yt},t.uniqueCountSorted=O,t.sumNthPowerDeviations=c,t.equalIntervalBreaks=function(H,nt){if(H.length<2)return H;for(var at=a(H),q=o(H),_t=[at],yt=(q-at)/nt,Ft=1;Ft<nt;Ft++)_t.push(_t[0]+yt*Ft);return _t.push(q),_t},t.sampleCovariance=K,t.sampleCorrelation=function(H,nt){return K(H,nt)/k(H)/k(nt)},t.sampleVariance=V,t.sampleStandardDeviation=k,t.sampleSkewness=function(H){if(H.length<3)throw new Error("sampleSkewness requires at least three data points");for(var nt,at=s(H),q=0,_t=0,yt=0;yt<H.length;yt++)q+=(nt=H[yt]-at)*nt,_t+=nt*nt*nt;var Ft=H.length-1,Qt=Math.sqrt(q/Ft),ee=H.length;return ee*_t/((ee-1)*(ee-2)*Math.pow(Qt,3))},t.sampleKurtosis=function(H){var nt=H.length;if(nt<4)throw new Error("sampleKurtosis requires at least four data points");for(var at,q=s(H),_t=0,yt=0,Ft=0;Ft<nt;Ft++)_t+=(at=H[Ft]-q)*at,yt+=at*at*at*at;return(nt-1)/((nt-2)*(nt-3))*(nt*(nt+1)*yt/(_t*_t)-3*(nt-1))},t.permutationsHeap=function(H){for(var nt=new Array(H.length),at=[H.slice()],q=0;q<H.length;q++)nt[q]=0;for(q=0;q<H.length;)if(nt[q]<q){var _t=0;q%2!=0&&(_t=nt[q]);var yt=H[_t];H[_t]=H[q],H[q]=yt,at.push(H.slice()),nt[q]++,q=0}else nt[q]=0,q++;return at},t.combinations=function H(nt,at){var q,_t,yt,Ft,Qt=[];for(q=0;q<nt.length;q++)if(at===1)Qt.push([nt[q]]);else for(yt=H(nt.slice(q+1,nt.length),at-1),_t=0;_t<yt.length;_t++)(Ft=yt[_t]).unshift(nt[q]),Qt.push(Ft);return Qt},t.combinationsReplacement=function H(nt,at){for(var q=[],_t=0;_t<nt.length;_t++)if(at===1)q.push([nt[_t]]);else for(var yt=H(nt.slice(_t,nt.length),at-1),Ft=0;Ft<yt.length;Ft++)q.push([nt[_t]].concat(yt[Ft]));return q},t.addToMean=function(H,nt,at){return H+(at-H)/(nt+1)},t.combineMeans=Z,t.combineVariances=function(H,nt,at,q,_t,yt){var Ft=Z(nt,at,_t,yt);return(at*(H+Math.pow(nt-Ft,2))+yt*(q+Math.pow(_t-Ft,2)))/(at+yt)},t.geometricMean=function(H){if(H.length===0)throw new Error("geometricMean requires at least one data point");for(var nt=1,at=0;at<H.length;at++){if(H[at]<=0)throw new Error("geometricMean requires only positive numbers as input");nt*=H[at]}return Math.pow(nt,1/H.length)},t.harmonicMean=function(H){if(H.length===0)throw new Error("harmonicMean requires at least one data point");for(var nt=0,at=0;at<H.length;at++){if(H[at]<=0)throw new Error("harmonicMean requires only positive numbers as input");nt+=1/H[at]}return H.length/nt},t.average=s,t.mean=s,t.median=m,t.medianSorted=function(H){return u(H,.5)},t.subtractFromMean=function(H,nt,at){return(H*nt-at)/(nt-1)},t.rootMeanSquare=X,t.rms=X,t.variance=r,t.tTest=function(H,nt){return(s(H)-nt)/(h(H)/Math.sqrt(H.length))},t.tTestTwoSample=function(H,nt,at){var q=H.length,_t=nt.length;if(!q||!_t)return null;at||(at=0);var yt=s(H),Ft=s(nt),Qt=V(H),ee=V(nt);if(typeof yt=="number"&&typeof Ft=="number"&&typeof Qt=="number"&&typeof ee=="number"){var Vt=((q-1)*Qt+(_t-1)*ee)/(q+_t-2);return(yt-Ft-at)/Math.sqrt(Vt*(1/q+1/_t))}},t.BayesianClassifier=it,t.bayesian=it,t.PerceptronModel=ft,t.perceptron=ft,t.epsilon=pt,t.factorial=ut,t.gamma=function H(nt){if(typeof(at=nt)=="number"&&isFinite(at)&&Math.floor(at)===at)return nt<=0?NaN:ut(nt-1);var at;if(--nt<0)return Math.PI/(Math.sin(Math.PI*-nt)*H(-nt));var q=nt+.25;return Math.pow(nt/Math.E,nt)*Math.sqrt(2*Math.PI*(nt+1/6))*(1+1/144/Math.pow(q,2)-1/12960/Math.pow(q,3)-257/207360/Math.pow(q,4)-52/2612736/Math.pow(q,5)+5741173/9405849600/Math.pow(q,6)+37529/18811699200/Math.pow(q,7))},t.gammaln=function(H){if(H<=0)return 1/0;H--;for(var nt=It[0],at=1;at<15;at++)nt+=It[at]/(H+at);var q=5.2421875+H;return Nt+Math.log(nt)-q+(H+.5)*Math.log(q)},t.bernoulliDistribution=function(H){if(H<0||1<H)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-H,H]},t.binomialDistribution=function(H,nt){if(!(nt<0||1<nt||H<=0||H%1!=0)){for(var at=0,q=0,_t=[],yt=1;_t[at]=yt*Math.pow(nt,at)*Math.pow(1-nt,H-at),q+=_t[at],yt=yt*(H-++at+1)/at,q<1-pt;);return _t}},t.poissonDistribution=function(H){if(!(H<=0)){for(var nt=0,at=0,q=[],_t=1;q[nt]=Math.exp(-H)*Math.pow(H,nt)/_t,at+=q[nt],_t*=++nt,at<1-pt;);return q}},t.chiSquaredDistributionTable=Rt,t.chiSquaredGoodnessOfFit=function(H,nt,at){for(var q,_t,yt=0,Ft=nt(s(H)),Qt=[],ee=[],Vt=0;Vt<H.length;Vt++)Qt[H[Vt]]===void 0&&(Qt[H[Vt]]=0),Qt[H[Vt]]++;for(Vt=0;Vt<Qt.length;Vt++)Qt[Vt]===void 0&&(Qt[Vt]=0);for(_t in Ft)_t in Qt&&(ee[+_t]=Ft[_t]*H.length);for(_t=ee.length-1;0<=_t;_t--)ee[_t]<3&&(ee[_t-1]+=ee[_t],ee.pop(),Qt[_t-1]+=Qt[_t],Qt.pop());for(_t=0;_t<Qt.length;_t++)yt+=Math.pow(Qt[_t]-ee[_t],2)/ee[_t];return q=Qt.length-1-1,Rt[q][at]<yt},t.kernelDensityEstimation=rt,t.kde=rt,t.zScore=function(H,nt,at){return(H-nt)/at},t.cumulativeStdNormalProbability=function(H){var nt=Math.abs(H),at=Math.min(Math.round(100*nt),Q.length-1);return 0<=H?Q[at]:+(1-Q[at]).toFixed(4)},t.standardNormalTable=Q,t.errorFunction=et,t.erf=et,t.inverseErrorFunction=ot,t.probit=function(H){return H===0?H=pt:1<=H&&(H=1-pt),Math.sqrt(2)*ot(2*H-1)},t.permutationTest=function(H,nt,at,q){if(q===void 0&&(q=1e4),at===void 0&&(at="two_side"),at!=="two_side"&&at!=="greater"&&at!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var _t=s(H)-s(nt),yt=new Array(q),Ft=H.concat(nt),Qt=Math.floor(Ft.length/2),ee=0;ee<q;ee++){P(Ft);var Vt=Ft.slice(0,Qt),$t=Ft.slice(Qt,Ft.length),Me=s(Vt)-s($t);yt[ee]=Me}var me=0;if(at==="two_side")for(ee=0;ee<=q;ee++)Math.abs(yt[ee])>=Math.abs(_t)&&(me+=1);else if(at==="greater")for(ee=0;ee<=q;ee++)yt[ee]>=_t&&(me+=1);else for(ee=0;ee<=q;ee++)yt[ee]<=_t&&(me+=1);return me/q},t.bisect=function(H,nt,at,q,_t){if(typeof H!="function")throw new TypeError("func must be a function");for(var yt=0;yt<q;yt++){var Ft=(nt+at)/2;if(H(Ft)===0||Math.abs((at-nt)/2)<_t)return Ft;xt(H(Ft))===xt(H(nt))?nt=Ft:at=Ft}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=xt,t.numericSort=i,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(m){return m}function s(m){if(m==null)return l;var S,P,A=m.scale[0],O=m.scale[1],L=m.translate[0],W=m.translate[1];return function(F,K){K||(S=P=0);var V=2,k=F.length,Z=new Array(k);for(Z[0]=(S+=F[0])*A+L,Z[1]=(P+=F[1])*O+W;V<k;)Z[V]=F[V],++V;return Z}}function c(m){var S=s(m.transform),P,A=Infinity,O=A,L=-A,W=-A;function F(V){V=S(V),V[0]<A&&(A=V[0]),V[0]>L&&(L=V[0]),V[1]<O&&(O=V[1]),V[1]>W&&(W=V[1])}function K(V){switch(V.type){case"GeometryCollection":V.geometries.forEach(K);break;case"Point":F(V.coordinates);break;case"MultiPoint":V.coordinates.forEach(F);break}}m.arcs.forEach(function(V){for(var k=-1,Z=V.length,X;++k<Z;)X=S(V[k],k),X[0]<A&&(A=X[0]),X[0]>L&&(L=X[0]),X[1]<O&&(O=X[1]),X[1]>W&&(W=X[1])});for(P in m.objects)K(m.objects[P]);return[A,O,L,W]}function r(m,S){for(var P,A=m.length,O=A-S;O<--A;)P=m[O],m[O++]=m[A],m[A]=P}function h(m,S){return typeof S=="string"&&(S=m.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(P){return n(m,P)})}:n(m,S)}function n(m,S){var P=S.id,A=S.bbox,O=S.properties==null?{}:S.properties,L=i(m,S);return P==null&&A==null?{type:"Feature",properties:O,geometry:L}:A==null?{type:"Feature",id:P,properties:O,geometry:L}:{type:"Feature",id:P,bbox:A,properties:O,geometry:L}}function i(m,S){var P=s(m.transform),A=m.arcs;function O(k,Z){Z.length&&Z.pop();for(var X=A[k<0?~k:k],it=0,ft=X.length;it<ft;++it)Z.push(P(X[it],it));k<0&&r(Z,ft)}function L(k){return P(k)}function W(k){for(var Z=[],X=0,it=k.length;X<it;++X)O(k[X],Z);return Z.length<2&&Z.push(Z[0]),Z}function F(k){for(var Z=W(k);Z.length<4;)Z.push(Z[0]);return Z}function K(k){return k.map(F)}function V(k){var Z=k.type,X;switch(Z){case"GeometryCollection":return{type:Z,geometries:k.geometries.map(V)};case"Point":X=L(k.coordinates);break;case"MultiPoint":X=k.coordinates.map(L);break;case"LineString":X=W(k.arcs);break;case"MultiLineString":X=k.arcs.map(W);break;case"Polygon":X=K(k.arcs);break;case"MultiPolygon":X=k.arcs.map(K);break;default:return null}return{type:Z,coordinates:X}}return V(S)}function a(m,S){var P={},A={},O={},L=[],W=-1;S.forEach(function(V,k){var Z=m.arcs[V<0?~V:V],X;Z.length<3&&!Z[1][0]&&!Z[1][1]&&(X=S[++W],S[W]=V,S[k]=X)}),S.forEach(function(V){var k=F(V),Z=k[0],X=k[1],it,ft;if(it=O[Z])if(delete O[it.end],it.push(V),it.end=X,ft=A[X]){delete A[ft.start];var pt=ft===it?it:it.concat(ft);A[pt.start=it.start]=O[pt.end=ft.end]=pt}else A[it.start]=O[it.end]=it;else if(it=A[X])if(delete A[it.start],it.unshift(V),it.start=Z,ft=O[Z]){delete O[ft.end];var ut=ft===it?it:ft.concat(it);A[ut.start=ft.start]=O[ut.end=it.end]=ut}else A[it.start]=O[it.end]=it;else it=[V],A[it.start=Z]=O[it.end=X]=it});function F(V){var k=m.arcs[V<0?~V:V],Z=k[0],X;return m.transform?(X=[0,0],k.forEach(function(it){X[0]+=it[0],X[1]+=it[1]})):X=k[k.length-1],V<0?[X,Z]:[Z,X]}function K(V,k){for(var Z in V){var X=V[Z];delete k[X.start],delete X.start,delete X.end,X.forEach(function(it){P[it<0?~it:it]=1}),L.push(X)}}return K(O,A),K(A,O),S.forEach(function(V){P[V<0?~V:V]||L.push([V])}),L}function o(m){return i(m,u.apply(this,arguments))}function u(m,S,P){var A,O,L;if(arguments.length>1)A=f(m,S,P);else for(O=0,A=new Array(L=m.arcs.length);O<L;++O)A[O]=O;return{type:"MultiLineString",arcs:a(m,A)}}function f(m,S,P){var A=[],O=[],L;function W(Z){var X=Z<0?~Z:Z;(O[X]||(O[X]=[])).push({i:Z,g:L})}function F(Z){Z.forEach(W)}function K(Z){Z.forEach(F)}function V(Z){Z.forEach(K)}function k(Z){switch(L=Z,Z.type){case"GeometryCollection":Z.geometries.forEach(k);break;case"LineString":F(Z.arcs);break;case"MultiLineString":case"Polygon":K(Z.arcs);break;case"MultiPolygon":V(Z.arcs);break}}return k(S),O.forEach(P==null?function(Z){A.push(Z[0].i)}:function(Z){P(Z[0].g,Z[Z.length-1].g)&&A.push(Z[0].i)}),A}function v(m){for(var S=-1,P=m.length,A,O=m[P-1],L=0;++S<P;)A=O,O=m[S],L+=A[0]*O[1]-A[1]*O[0];return Math.abs(L)}function b(m){return i(m,y.apply(this,arguments))}function y(m,S){var P={},A=[],O=[];S.forEach(L);function L(K){switch(K.type){case"GeometryCollection":K.geometries.forEach(L);break;case"Polygon":W(K.arcs);break;case"MultiPolygon":K.arcs.forEach(W);break}}function W(K){K.forEach(function(V){V.forEach(function(k){(P[k=k<0?~k:k]||(P[k]=[])).push(K)})}),A.push(K)}function F(K){return v(i(m,{type:"Polygon",arcs:[K]}).coordinates[0])}return A.forEach(function(K){if(!K._){var V=[],k=[K];for(K._=1,O.push(V);K=k.pop();)V.push(K),K.forEach(function(Z){Z.forEach(function(X){P[X<0?~X:X].forEach(function(it){it._||(it._=1,k.push(it))})})})}}),A.forEach(function(K){delete K._}),{type:"MultiPolygon",arcs:O.map(function(K){var V=[],k;if(K.forEach(function(pt){pt.forEach(function(ut){ut.forEach(function(It){P[It<0?~It:It].length<2&&V.push(It)})})}),V=a(m,V),(k=V.length)>1)for(var Z=1,X=F(V[0]),it,ft;Z<k;++Z)(it=F(V[Z]))>X&&(ft=V[0],V[0]=V[Z],V[Z]=ft,X=it);return V}).filter(function(K){return K.length>0})}}function g(m,S){for(var P=0,A=m.length;P<A;){var O=P+A>>>1;m[O]<S?P=O+1:A=O}return P}function _(m){var S={},P=m.map(function(){return[]});function A(pt,ut){pt.forEach(function(It){It<0&&(It=~It);var Nt=S[It];Nt?Nt.push(ut):S[It]=[ut]})}function O(pt,ut){pt.forEach(function(It){A(It,ut)})}function L(pt,ut){pt.type==="GeometryCollection"?pt.geometries.forEach(function(It){L(It,ut)}):pt.type in W&&W[pt.type](pt.arcs,ut)}var W={LineString:A,MultiLineString:O,Polygon:O,MultiPolygon:function(ut,It){ut.forEach(function(Nt){O(Nt,It)})}};m.forEach(L);for(var F in S)for(var K=S[F],V=K.length,k=0;k<V;++k)for(var Z=k+1;Z<V;++Z){var X=K[k],it=K[Z],ft;(ft=P[X])[F=g(ft,it)]!==it&&ft.splice(F,0,it),(ft=P[it])[F=g(ft,X)]!==X&&ft.splice(F,0,X)}return P}function M(m){if(m==null)return l;var S,P,A=m.scale[0],O=m.scale[1],L=m.translate[0],W=m.translate[1];return function(F,K){K||(S=P=0);var V=2,k=F.length,Z=new Array(k),X=Math.round((F[0]-L)/A),it=Math.round((F[1]-W)/O);for(Z[0]=X-S,S=X,Z[1]=it-P,P=it;V<k;)Z[V]=F[V],++V;return Z}}function x(m,S){if(m.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((W=Math.floor(S))>=2))throw new Error("n must be \u22652");K=m.bbox||c(m);var P=K[0],A=K[1],O=K[2],L=K[3],W;S={scale:[O-P?(O-P)/(W-1):1,L-A?(L-A)/(W-1):1],translate:[P,A]}}else K=m.bbox;var F=M(S),K,V,k=m.objects,Z={};function X(pt){return F(pt)}function it(pt){var ut;switch(pt.type){case"GeometryCollection":ut={type:"GeometryCollection",geometries:pt.geometries.map(it)};break;case"Point":ut={type:"Point",coordinates:X(pt.coordinates)};break;case"MultiPoint":ut={type:"MultiPoint",coordinates:pt.coordinates.map(X)};break;default:return pt}return pt.id!=null&&(ut.id=pt.id),pt.bbox!=null&&(ut.bbox=pt.bbox),pt.properties!=null&&(ut.properties=pt.properties),ut}function ft(pt){var ut=0,It=1,Nt=pt.length,Rt,Mt=new Array(Nt);for(Mt[0]=F(pt[0],0);++ut<Nt;)((Rt=F(pt[ut],ut))[0]||Rt[1])&&(Mt[It++]=Rt);return It===1&&(Mt[It++]=[0,0]),Mt.length=It,Mt}for(V in k)Z[V]=it(k[V]);return{type:"Topology",bbox:K,transform:S,objects:Z,arcs:m.arcs.map(ft)}}t.bbox=c,t.feature=h,t.merge=b,t.mergeArcs=y,t.mesh=o,t.meshArcs=u,t.neighbors=_,t.quantize=x,t.transform=s,t.untransform=M,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(E,T,e){(function(t){var l,s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c,r,h,n,i,a,o,u,f,v,b,y,g,_,M,x,m,S,P,A,O,L,W,F;(function(K){var V=typeof t=="object"?t:typeof self=="object"?self:typeof this=="object"?this:{};l=[T],s=function(Z){K(k(V,k(Z)))}.apply(T,l),s!==void 0&&(E.exports=s);function k(Z,X){return Z!==V&&(typeof Object.create=="function"?Object.defineProperty(Z,"__esModule",{value:!0}):Z.__esModule=!0),function(it,ft){return Z[it]=X?X(it,ft):ft}}})(function(K){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,X){Z.__proto__=X}||function(Z,X){for(var it in X)Object.prototype.hasOwnProperty.call(X,it)&&(Z[it]=X[it])};c=function(X,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");V(X,it);function ft(){this.constructor=X}X.prototype=it===null?Object.create(it):(ft.prototype=it.prototype,new ft)},r=Object.assign||function(Z){for(var X,it=1,ft=arguments.length;it<ft;it++){X=arguments[it];for(var pt in X)Object.prototype.hasOwnProperty.call(X,pt)&&(Z[pt]=X[pt])}return Z},h=function(X,it){var ft={};for(var pt in X)Object.prototype.hasOwnProperty.call(X,pt)&&it.indexOf(pt)<0&&(ft[pt]=X[pt]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,pt=Object.getOwnPropertySymbols(X);ut<pt.length;ut++)it.indexOf(pt[ut])<0&&Object.prototype.propertyIsEnumerable.call(X,pt[ut])&&(ft[pt[ut]]=X[pt[ut]]);return ft},n=function(X,it,ft,pt){var ut=arguments.length,It=ut<3?it:pt===null?pt=Object.getOwnPropertyDescriptor(it,ft):pt,Nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")It=Reflect.decorate(X,it,ft,pt);else for(var Rt=X.length-1;Rt>=0;Rt--)(Nt=X[Rt])&&(It=(ut<3?Nt(It):ut>3?Nt(it,ft,It):Nt(it,ft))||It);return ut>3&&It&&Object.defineProperty(it,ft,It),It},i=function(X,it){return function(ft,pt){it(ft,pt,X)}},a=function(X,it){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(X,it)},o=function(X,it,ft,pt){function ut(It){return It instanceof ft?It:new ft(function(Nt){Nt(It)})}return new(ft||(ft=Promise))(function(It,Nt){function Rt(At){try{bt(pt.next(At))}catch(rt){Nt(rt)}}function Mt(At){try{bt(pt.throw(At))}catch(rt){Nt(rt)}}function bt(At){At.done?It(At.value):ut(At.value).then(Rt,Mt)}bt((pt=pt.apply(X,it||[])).next())})},u=function(X,it){var ft={label:0,sent:function(){if(It[0]&1)throw It[1];return It[1]},trys:[],ops:[]},pt,ut,It,Nt;return Nt={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function Rt(bt){return function(At){return Mt([bt,At])}}function Mt(bt){if(pt)throw new TypeError("Generator is already executing.");for(;ft;)try{if(pt=1,ut&&(It=bt[0]&2?ut.return:bt[0]?ut.throw||((It=ut.return)&&It.call(ut),0):ut.next)&&!(It=It.call(ut,bt[1])).done)return It;switch(ut=0,It&&(bt=[bt[0]&2,It.value]),bt[0]){case 0:case 1:It=bt;break;case 4:return ft.label++,{value:bt[1],done:!1};case 5:ft.label++,ut=bt[1],bt=[0];continue;case 7:bt=ft.ops.pop(),ft.trys.pop();continue;default:if(It=ft.trys,!(It=It.length>0&&It[It.length-1])&&(bt[0]===6||bt[0]===2)){ft=0;continue}if(bt[0]===3&&(!It||bt[1]>It[0]&&bt[1]<It[3])){ft.label=bt[1];break}if(bt[0]===6&&ft.label<It[1]){ft.label=It[1],It=bt;break}if(It&&ft.label<It[2]){ft.label=It[2],ft.ops.push(bt);break}It[2]&&ft.ops.pop(),ft.trys.pop();continue}bt=it.call(X,ft)}catch(At){bt=[6,At],ut=0}finally{pt=It=0}if(bt[0]&5)throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}},f=function(X,it){for(var ft in X)ft!=="default"&&!Object.prototype.hasOwnProperty.call(it,ft)&&F(it,X,ft)},F=Object.create?function(Z,X,it,ft){ft===void 0&&(ft=it),Object.defineProperty(Z,ft,{enumerable:!0,get:function(){return X[it]}})}:function(Z,X,it,ft){ft===void 0&&(ft=it),Z[ft]=X[it]},v=function(X){var it=typeof Symbol=="function"&&Symbol.iterator,ft=it&&X[it],pt=0;if(ft)return ft.call(X);if(X&&typeof X.length=="number")return{next:function(){return X&&pt>=X.length&&(X=void 0),{value:X&&X[pt++],done:!X}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(X,it){var ft=typeof Symbol=="function"&&X[Symbol.iterator];if(!ft)return X;var pt=ft.call(X),ut,It=[],Nt;try{for(;(it===void 0||it-- >0)&&!(ut=pt.next()).done;)It.push(ut.value)}catch(Rt){Nt={error:Rt}}finally{try{ut&&!ut.done&&(ft=pt.return)&&ft.call(pt)}finally{if(Nt)throw Nt.error}}return It},y=function(){for(var X=[],it=0;it<arguments.length;it++)X=X.concat(b(arguments[it]));return X},g=function(){for(var X=0,it=0,ft=arguments.length;it<ft;it++)X+=arguments[it].length;for(var pt=Array(X),ut=0,it=0;it<ft;it++)for(var It=arguments[it],Nt=0,Rt=It.length;Nt<Rt;Nt++,ut++)pt[ut]=It[Nt];return pt},_=function(X,it){for(var ft=0,pt=it.length,ut=X.length;ft<pt;ft++,ut++)X[ut]=it[ft];return X},M=function(X){return this instanceof M?(this.v=X,this):new M(X)},x=function(X,it,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt=ft.apply(X,it||[]),ut,It=[];return ut={},Nt("next"),Nt("throw"),Nt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Nt(Pt){pt[Pt]&&(ut[Pt]=function(z){return new Promise(function(Q,gt){It.push([Pt,z,Q,gt])>1||Rt(Pt,z)})})}function Rt(Pt,z){try{Mt(pt[Pt](z))}catch(Q){rt(It[0][3],Q)}}function Mt(Pt){Pt.value instanceof M?Promise.resolve(Pt.value.v).then(bt,At):rt(It[0][2],Pt)}function bt(Pt){Rt("next",Pt)}function At(Pt){Rt("throw",Pt)}function rt(Pt,z){Pt(z),It.shift(),It.length&&Rt(It[0][0],It[0][1])}},m=function(X){var it,ft;return it={},pt("next"),pt("throw",function(ut){throw ut}),pt("return"),it[Symbol.iterator]=function(){return this},it;function pt(ut,It){it[ut]=X[ut]?function(Nt){return(ft=!ft)?{value:M(X[ut](Nt)),done:ut==="return"}:It?It(Nt):Nt}:It}},S=function(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it=X[Symbol.asyncIterator],ft;return it?it.call(X):(X=typeof v=="function"?v(X):X[Symbol.iterator](),ft={},pt("next"),pt("throw"),pt("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function pt(It){ft[It]=X[It]&&function(Nt){return new Promise(function(Rt,Mt){Nt=X[It](Nt),ut(Rt,Mt,Nt.done,Nt.value)})}}function ut(It,Nt,Rt,Mt){Promise.resolve(Mt).then(function(bt){It({value:bt,done:Rt})},Nt)}},P=function(X,it){return Object.defineProperty?Object.defineProperty(X,"raw",{value:it}):X.raw=it,X};var k=Object.create?function(Z,X){Object.defineProperty(Z,"default",{enumerable:!0,value:X})}:function(Z,X){Z.default=X};A=function(X){if(X&&X.__esModule)return X;var it={};if(X!=null)for(var ft in X)ft!=="default"&&Object.prototype.hasOwnProperty.call(X,ft)&&F(it,X,ft);return k(it,X),it},O=function(X){return X&&X.__esModule?X:{default:X}},L=function(X,it){if(!it.has(X))throw new TypeError("attempted to get private field on non-instance");return it.get(X)},W=function(X,it,ft){if(!it.has(X))throw new TypeError("attempted to set private field on non-instance");return it.set(X,ft),ft},K("__extends",c),K("__assign",r),K("__rest",h),K("__decorate",n),K("__param",i),K("__metadata",a),K("__awaiter",o),K("__generator",u),K("__exportStar",f),K("__createBinding",F),K("__values",v),K("__read",b),K("__spread",y),K("__spreadArrays",g),K("__spreadArray",_),K("__await",M),K("__asyncGenerator",x),K("__asyncDelegator",m),K("__asyncValues",S),K("__makeTemplateObject",P),K("__importStar",A),K("__importDefault",O),K("__classPrivateFieldGet",L),K("__classPrivateFieldSet",W)})}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(E,T){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){typeof window=="object"&&(e=window)}E.exports=e},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(E,T){E.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(E,T,e){var t;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(l){"use strict";function s(){}var c=s.prototype,r=l.EventEmitter;function h(a,o){for(var u=a.length;u--;)if(a[u].listener===o)return u;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var u=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in u)u.hasOwnProperty(v)&&o.test(v)&&(f[v]=u[v])}else f=u[o]||(u[o]=[]);return f},c.flattenListeners=function(o){var u=[],f;for(f=0;f<o.length;f+=1)u.push(o[f].listener);return u},c.getListenersAsObject=function(o){var u=this.getListeners(o),f;return u instanceof Array&&(f={},f[o]=u),f||u};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,u){if(!i(u))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof u=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],u)===-1&&f[b].push(v?u:{listener:u,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,u){return this.addListener(o,{listener:u,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var u=0;u<o.length;u+=1)this.defineEvent(o[u]);return this},c.removeListener=function(o,u){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],u),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,u){return this.manipulateListeners(!1,o,u)},c.removeListeners=function(o,u){return this.manipulateListeners(!0,o,u)},c.manipulateListeners=function(o,u,f){var v,b,y=o?this.removeListener:this.addListener,g=o?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(v in u)u.hasOwnProperty(v)&&(b=u[v])&&(typeof b=="function"?y.call(this,v,b):g.call(this,v,b));else for(v=f.length;v--;)y.call(this,u,f[v]);return this},c.removeEvent=function(o){var u=typeof o,f=this._getEvents(),v;if(u==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,u){var f=this.getListenersAsObject(o),v,b,y,g,_;for(g in f)if(f.hasOwnProperty(g))for(v=f[g].slice(0),y=0;y<v.length;y++)b=v[y],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,u||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,u)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return l.EventEmitter=r,s},t=function(){return s}.call(l,e,l,E),t!==void 0&&(E.exports=t)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),r=e("./src/view.ts"),h=t.__importDefault(e("./src/util/get-geo-projection.ts")),n={geoArea:function(a){return s.geoArea(a)},geoAreaByName:function(a){return s.geoArea(this.geoFeatureByName(a))},geoCentroid:function(a){return s.geoCentroid(a)},geoCentroidByName:function(a){return s.geoCentroid(this.geoFeatureByName(a))},geoDistance:function(a,o){return s.geoDistance(a,o)},geoLength:function(a){return s.geoLength(a)},geoLengthByName:function(a){return s.geoLength(this.geoFeatureByName(a))},geoContains:function(a,o){return s.geoContains(a,o)},geoFeatureByName:function(a){var o=this.rows,u;return o.some(function(f){return f.name===a?(u=f,!0):!1}),u},geoFeatureByPosition:function(a){var o=this.rows,u;return o.some(function(f){return s.geoContains(f,a)?(u=f,!0):!1}),u},geoNameByPosition:function(a){var o=this.geoFeatureByPosition(a);if(o)return o.name},getGeoProjection:h.default,geoProject:function(a,o,u){return o=h.default(o,u),c.geoProject(a,o)},geoProjectByName:function(a,o,u){return o=h.default(o,u),c.geoProject(this.geoFeatureByName(a),o)},geoProjectPosition:function(a,o,u){var f=h.default(o,u);return f(a)},geoProjectInvert:function(a,o,u){var f=h.default(o,u);return f.invert(a)}};l.assign(r.View.prototype,n)},"./src/api/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/view.ts");t.assign(l.View.prototype,{getAllNodes:function(){var c=[],r=this.root;return r&&r.each?r.each(function(h){c.push(h)}):r&&r.eachNode&&r.eachNode(function(h){c.push(h)}),c},getAllLinks:function(){for(var c=[],r=[this.root],h;h=r.pop();){var n=h.children;n&&n.forEach(function(i){c.push({source:h,target:i}),r.push(i)})}return c}}),t.assign(l.View.prototype,{getAllEdges:l.View.prototype.getAllLinks})},"./src/api/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/view.ts");l.assign(c.View.prototype,{partition:function(h,n){return n===void 0&&(n=[]),s.default(this.rows,h,n)},group:function(h,n){n===void 0&&(n=[]);var i=this.partition(h,n);return l.values(i)},groups:function(h,n){return n===void 0&&(n=[]),this.group(h,n)}})},"./src/api/statistics.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/view.ts"),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=t.__importDefault(e("./src/constants.ts")),n=h.default.STATISTICS_METHODS;function i(o,u){var f=o.getColumn(u);return s.isArray(f)&&s.isArray(f[0])&&(f=s.flattenDeep(f)),f}n.forEach(function(o){c.View.prototype[o]=function(u){return l[o](i(this,u))}});var a=l.quantile;s.assign(c.View.prototype,{average:c.View.prototype.mean,quantile:function(u,f){return a(i(this,u),f)},quantiles:function(u,f){var v=i(this,u);return f.map(function(b){return a(v,b)})},quantilesByFraction:function(u,f){return this.quantiles(u,r.default(f))},range:function(u){return[this.min(u),this.max(u)]},extent:function(u){return this.range(u)}})},"./src/connector/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts");l.DataSet.registerConnector("default",function(s,c){var r;if(t.isString(s)?r=c.getView(s):r=s,!r)throw new TypeError("Invalid dataView");return t.deepMix([],r.rows)})},"./src/connector/dsv.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),s=e("./src/data-set.ts");s.DataSet.registerConnector("dsv",function(c,r){r===void 0&&(r={});var h=r.delimiter||",";if(!t.isString(h))throw new TypeError("Invalid delimiter: must be a string!");return l.dsvFormat(h).parse(c)}),s.DataSet.registerConnector("csv",function(c){return l.csvParse(c)}),s.DataSet.registerConnector("tsv",function(c){return l.tsvParse(c)})},"./src/connector/geo-graticule.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),l=e("./src/data-set.ts");function s(c,r){r.dataType="geo-graticule";var h=t.geoGraticule().lines();return h.map(function(n,i){return n.index=""+i,n}),r.rows=h,h}T.default=s,l.DataSet.registerConnector("geo-graticule",s)},"./src/connector/geojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),r=e("./src/data-set.ts"),h=c.geoPath();function n(i,a,o){o.dataType=r.DataSet.CONSTANTS.GEO;var u=s.deepMix([],i.features);return u.forEach(function(f){f.name=f.properties.name,f.longitude=[],f.latitude=[];var v=f.pathData=h(f),b=l.default(v);b._path.forEach(function(g){f.longitude.push(g[1]),f.latitude.push(g[2])});var y=h.centroid(f);f.centroidX=y[0],f.centroidY=y[1]}),u}r.DataSet.registerConnector("geo",n),r.DataSet.registerConnector("geojson",n),r.DataSet.registerConnector("GeoJSON",n),T.default=n},"./src/connector/graph.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s={nodes:function(h){return h.nodes},edges:function(h){return h.edges}};function c(r,h,n){h=t.assign({},s,h),n.dataType=l.DataSet.CONSTANTS.GRAPH;var i=h.nodes,a=h.edges;if(i&&!t.isFunction(i))throw new TypeError("Invalid nodes: must be a function!");if(a&&!t.isFunction(a))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:i(r),edges:a(r)},t.assign(n,n.graph),n.rows}l.DataSet.registerConnector("graph",c),l.DataSet.registerConnector("diagram",c)},"./src/connector/hexjson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),s=e("./src/data-set.ts"),c={width:1,height:1};function r(n){return n.cx=n.x,n.cy=n.y,n.x=[],n.y=[],n.vertices.forEach(function(i){n.x.push(i.x+n.cx),n.y.push(i.y+n.cy)}),n}function h(n,i,a){a.dataType=s.DataSet.CONSTANTS.HEX,i=t.assign({},c,i);var o=i.width,u=i.height,f=t.deepMix([],n);a._HexJSON=f;var v=a._GridHexJSON=l.getGridForHexJSON(f),b=a.rows=l.renderHexJSON(f,o,u).map(r);return a._gridRows=l.renderHexJSON(v,o,u).map(r),b}s.DataSet.registerConnector("hex",h),s.DataSet.registerConnector("hexjson",h),s.DataSet.registerConnector("hex-json",h),s.DataSet.registerConnector("HexJSON",h),T.default=h},"./src/connector/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),s=e("./src/data-set.ts");function c(r,h,n){n.dataType=s.DataSet.CONSTANTS.HIERARCHY;var i=h&&h.children?h.children:null;if(i&&!t.isFunction(i))throw new TypeError("Invalid children: must be a function!");return h.pureData?n.rows=n.root=r:n.rows=n.root=l.hierarchy(r,i),r}s.DataSet.registerConnector("hierarchy",c),s.DataSet.registerConnector("tree",c)},"./src/connector/topojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),c=t.__importDefault(e("./src/connector/geojson.ts")),r=e("./src/data-set.ts");function h(n,i,a){var o=i.object;if(!l.isString(o))throw new TypeError("Invalid object: must be a string!");var u=s.feature(n,n.objects[o]);return c.default(u,void 0,a)}r.DataSet.registerConnector("topojson",h),r.DataSet.registerConnector("TopoJSON",h)},"./src/constants.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DataSet=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),c=e("./src/view.ts"),r=t.__importDefault(e("./src/constants.ts")),h=function(n){t.__extends(i,n);function i(a){a===void 0&&(a={state:{}});var o=n.call(this)||this;return o.isDataSet=!0,o._onChangeTimer=null,o.views={},o.state={},o.state=a.state,o}return i.registerConnector=function(a,o){i.connectors[a]=o},i.getConnector=function(a){return i.connectors[a]||i.connectors.default},i.registerTransform=function(a,o){i.transforms[a]=o},i.getTransform=function(a){return i.transforms[a]||i.transforms.default},i.prototype._getUniqueViewName=function(){for(var a=l.uniqueId("view_");this.views[a];)a=l.uniqueId("view_");return a},i.prototype.createView=function(a,o){if(l.isNil(a)&&(a=this._getUniqueViewName()),l.isObject(a)&&(o=a,a=this._getUniqueViewName()),this.views[a])throw new Error("data view exists: "+a);var u=new c.View(this,o);return this.views[a]=u,u},i.prototype.getView=function(a){return this.views[a]},i.prototype.setView=function(a,o){this.views[a]=o},i.prototype.setState=function(a,o){var u=this;this.state[a]=o,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){u.emit("statechange",a,o)},16)},i.CONSTANTS=r.default,i.connectors={},i.transforms={},i.DataSet=i,i.DataView=c.View,i.View=c.View,i.version="____DATASET_VERSION____",i}(s.default);T.DataSet=h,l.assign(h,r.default),l.assign(h.prototype,{view:h.prototype.createView}),c.View.DataSet=h},"./src/index.ts":function(E,T,e){"use strict";e("./src/api/geo.ts"),e("./src/api/hierarchy.ts"),e("./src/api/partition.ts"),e("./src/api/statistics.ts"),e("./src/connector/default.ts"),e("./src/connector/dsv.ts"),e("./src/connector/geo-graticule.ts"),e("./src/connector/geojson.ts"),e("./src/connector/graph.ts"),e("./src/connector/hexjson.ts"),e("./src/connector/hierarchy.ts"),e("./src/connector/topojson.ts"),e("./src/transform/default.ts"),e("./src/transform/filter.ts"),e("./src/transform/fold.ts"),e("./src/transform/map.ts"),e("./src/transform/partition.ts"),e("./src/transform/percent.ts"),e("./src/transform/pick.ts"),e("./src/transform/proportion.ts"),e("./src/transform/rename.ts"),e("./src/transform/reverse.ts"),e("./src/transform/sort.ts"),e("./src/transform/sort-by.ts"),e("./src/transform/subset.ts"),e("./src/transform/fill-rows.ts"),e("./src/transform/impute.ts"),e("./src/transform/aggregate.ts"),e("./src/transform/regression.ts"),e("./src/transform/kde.ts"),e("./src/transform/bin/hexagon.ts"),e("./src/transform/bin/histogram.ts"),e("./src/transform/bin/quantile.ts"),e("./src/transform/bin/rectangle.ts"),e("./src/transform/geo/centroid.ts"),e("./src/transform/geo/projection.ts"),e("./src/transform/geo/region.ts"),e("./src/transform/diagram/arc.ts"),e("./src/transform/diagram/dagre.ts"),e("./src/transform/diagram/sankey.ts"),e("./src/transform/diagram/voronoi.ts"),e("./src/transform/hierarchy/cluster.ts"),e("./src/transform/hierarchy/compact-box.ts"),e("./src/transform/hierarchy/dendrogram.ts"),e("./src/transform/hierarchy/indented.ts"),e("./src/transform/hierarchy/pack.ts"),e("./src/transform/hierarchy/partition.ts"),e("./src/transform/hierarchy/tree.ts"),e("./src/transform/hierarchy/treemap.ts"),e("./src/transform/tag-cloud.ts"),e("./src/transform/waffle.ts"),e("./src/transform/kernel-smooth/density.ts"),e("./src/transform/kernel-smooth/regression.ts");var t=e("./src/data-set.ts");E.exports=t.DataSet},"./src/transform/aggregate.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=e("./src/util/option-parser.ts"),i={as:[],fields:[],groupBy:[],operations:[]},a="count",o={count:function(v){return v.length},distinct:function(v,b){var y=l.uniq(v.map(function(g){return g[b]}));return y.length}};r.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(f){o[f]=function(v,b){var y=v.map(function(g){return g[b]});return l.isArray(y)&&l.isArray(y[0])&&(y=l.flattenDeep(y)),s[f](y)}}),o.average=o.mean;function u(f,v){v=l.assign({},i,v);var b=n.getFields(v);if(!l.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var y=v.as||[];l.isString(y)&&(y=[y]);var g=v.operations;l.isString(g)&&(g=[g]);var _=[a];if((!l.isArray(g)||!g.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),g=_,y=g),!(g.length===1&&g[0]===a)){if(g.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(y.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var M=c.default(f.rows,v.groupBy),x=[];l.forIn(M,function(m){var S=m[0];g.forEach(function(P,A){var O=y[A],L=b[A];S[O]=o[P](m,L)}),x.push(S)}),f.rows=x}h("aggregate",u),h("summary",u),T.default={VALID_AGGREGATES:l.keys(o)}},"./src/transform/bin/hexagon.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),r={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},h=Math.sqrt(3),n=Math.PI/3,i=[0,n,2*n,3*n,4*n,5*n];function a(v,b,y,g){return Math.sqrt((v-y)*(v-y)+(b-g)*(b-g))}function o(v,b,y){var g=v-y;b=b/2;var _=Math.floor(g/b),M=b*(_+(Math.abs(_%2)===1?1:0)),x=b*(_+(Math.abs(_%2)===1?0:1));return[M+y,x+y]}function u(v,b,y){b===void 0&&(b=[1,1]),y===void 0&&(y=[0,0]);var g={},_=t.__read(b,2),M=_[0],x=_[1],m=t.__read(y,2),S=m[0],P=m[1];return v.forEach(function(A){var O,L,W=t.__read(A,2),F=W[0],K=W[1],V=t.__read(o(F,M,S),2),k=V[0],Z=V[1],X=t.__read(o(K,x,P),2),it=X[0],ft=X[1],pt=a(F,K,k,it),ut=a(F,K,Z,ft),It,Nt,Rt;pt<ut?(It="x"+k+"y"+it,O=t.__read([k,it],2),Nt=O[0],Rt=O[1]):(It="x"+Z+"y"+ft,L=t.__read([Z,ft],2),Nt=L[0],Rt=L[1]),g[It]=g[It]||{x:Nt,y:Rt,count:0},g[It].count++}),g}function f(v,b){b=l.assign({},r,b);var y=c.getFields(b);if(!l.isArray(y)||y.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var g=t.__read(y,2),_=g[0],M=g[1],x=v.range(_),m=v.range(M),S=x[1]-x[0],P=m[1]-m[0],A=b.binWidth||[];if(A.length!==2){var O=t.__read(b.bins,2),L=O[0],W=O[1];if(L<=0||W<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");A=[S/L,P/W]}var F=t.__read(b.offset,2),K=F[0],V=F[1],k=3*A[0]/(h*A[1]),Z=v.rows.map(function(bt){return[bt[_],k*bt[M]]}),X=u(Z,[A[0],k*A[1]],[K,k*V]),it=t.__read(b.as,3),ft=it[0],pt=it[1],ut=it[2];if(!ft||!pt||!ut)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var It=A[0]/h,Nt=i.map(function(bt){return[Math.sin(bt)*It,-Math.cos(bt)*It]}),Rt=[],Mt=0;b.sizeByCount&&l.forIn(X,function(bt){bt.count>Mt&&(Mt=bt.count)}),l.forIn(X,function(bt){var At=bt.x,rt=bt.y,Pt=bt.count,z={};z[ut]=Pt,b.sizeByCount?(z[ft]=Nt.map(function(Q){return At+bt.count/Mt*Q[0]}),z[pt]=Nt.map(function(Q){return(rt+bt.count/Mt*Q[1])/k})):(z[ft]=Nt.map(function(Q){return At+Q[0]}),z[pt]=Nt.map(function(Q){return(rt+Q[1])/k})),Rt.push(z)}),v.rows=Rt}s.DataSet.registerTransform("bin.hexagon",f),s.DataSet.registerTransform("bin.hex",f),s.DataSet.registerTransform("hexbin",f)},"./src/transform/bin/histogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function n(o,u,f){var v=o-f,b=Math.floor(v/u);return[b*u+f,(b+1)*u+f]}function i(o){return Math.ceil(Math.log(o)/Math.LN2)+1}function a(o,u){u=l.assign({},h,u);var f=r.getField(u);if(o.rows.length!==0){var v=o.range(f),b=v[1]-v[0],y=u.binWidth,g=u.bins;if(!y&&g){if(g<=0)throw new TypeError("Invalid bins: it must be a positive number!");y=b/g}if(!y&&!g){var _=i(o.rows.length);y=b/_}var M=u.offset%y,x=[],m=u.groupBy,S=s.default(o.rows,m);l.forIn(S,function(P){var A={},O=P.map(function(V){return V[f]});O.forEach(function(V){var k=t.__read(n(V,y,M),2),Z=k[0],X=k[1],it=Z+"-"+X;A[it]=A[it]||{x0:Z,x1:X,count:0},A[it].count++});var L=t.__read(u.as,2),W=L[0],F=L[1];if(!W||!F)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var K=l.pick(P[0],m);l.forIn(A,function(V){var k=l.assign({},K);k[W]=[V.x0,V.x1],k[F]=V.count,x.push(k)})}),o.rows=x}}c.DataSet.registerTransform("bin.histogram",a),c.DataSet.registerTransform("bin.dot",a)},"./src/transform/bin/quantile.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=e("./src/data-set.ts"),n=h.DataSet.registerTransform,i=e("./src/util/option-parser.ts"),a={as:"_bin",groupBy:[],fraction:4};function o(u,f){f=l.assign({},a,f);var v=i.getField(f),b=f.as;if(!l.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var y=f.p,g=f.fraction;(!l.isArray(y)||y.length===0)&&(y=r.default(g));var _=u.rows,M=f.groupBy,x=c.default(_,M),m=[];l.forIn(x,function(S){var P=S[0],A=S.map(function(L){return L[v]}),O=y.map(function(L){return s.quantile(A,L)});P[b]=O,m.push(P)}),u.rows=m}n("bin.quantile",o)},"./src/transform/bin/rectangle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=s.DataSet.registerTransform,r=e("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function n(a,o,u){var f=a-u,v=Math.floor(f/o);return[v*o+u,(v+1)*o+u]}function i(a,o){o=l.assign({},h,o);var u=t.__read(r.getFields(o),2),f=u[0],v=u[1];if(!f||!v)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=a.range(f),y=a.range(v),g=b[1]-b[0],_=y[1]-y[0],M=o.binWidth||[];if(M.length!==2){var x=t.__read(o.bins,2),m=x[0],S=x[1];if(m<=0||S<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");M=[g/m,_/S]}var P=a.rows.map(function(it){return[it[f],it[v]]}),A={},O=t.__read(o.offset,2),L=O[0],W=O[1];P.forEach(function(it){var ft=t.__read(n(it[0],M[0],L),2),pt=ft[0],ut=ft[1],It=t.__read(n(it[1],M[1],W),2),Nt=It[0],Rt=It[1],Mt=pt+"-"+ut+"-"+Nt+"-"+Rt;A[Mt]=A[Mt]||{x0:pt,x1:ut,y0:Nt,y1:Rt,count:0},A[Mt].count++});var F=[],K=t.__read(o.as,3),V=K[0],k=K[1],Z=K[2];if(!V||!k||!Z)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!o.sizeByCount)l.forIn(A,function(it){var ft={};ft[V]=[it.x0,it.x1,it.x1,it.x0],ft[k]=[it.y0,it.y0,it.y1,it.y1],ft[Z]=it.count,F.push(ft)});else{var X=0;l.forIn(A,function(it){it.count>X&&(X=it.count)}),l.forIn(A,function(it){var ft=it.x0,pt=it.x1,ut=it.y0,It=it.y1,Nt=it.count,Rt=Nt/X,Mt=t.__read([(ft+pt)/2,(ut+It)/2],2),bt=Mt[0],At=Mt[1],rt=(pt-ft)*Rt/2,Pt=(It-ut)*Rt/2,z=bt-rt,Q=bt+rt,gt=At-Pt,et=At+Pt,ot={};ot[V]=[z,Q,Q,z],ot[k]=[gt,gt,et,et],ot[Z]=Nt,F.push(ot)})}a.rows=F}c("bin.rectangle",i),c("bin.rect",i)},"./src/transform/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("default",function(l){return l})},"./src/transform/diagram/arc.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(u){return u.id},source:function(u){return u.source},target:function(u){return u.target},sourceWeight:function(u){return u.value||1},targetWeight:function(u){return u.value||1},sortBy:null};function c(o,u,f){return f===void 0&&(f={}),o.forEach(function(v){var b=u.edgeSource(v),y=u.edgeTarget(v);f[b]||(f[b]={id:b}),f[y]||(f[y]={id:y})}),t.values(f)}function r(o,u,f){t.forIn(o,function(v,b){v.inEdges=u.filter(function(y){return""+f.target(y)==""+b}),v.outEdges=u.filter(function(y){return""+f.source(y)==""+b}),v.edges=v.outEdges.concat(v.inEdges),v.frequency=v.edges.length,v.value=0,v.inEdges.forEach(function(y){v.value+=f.targetWeight(y)}),v.outEdges.forEach(function(y){v.value+=f.sourceWeight(y)})})}function h(o,u){var f={weight:function(y,g){return g.value-y.value},frequency:function(y,g){return g.frequency-y.frequency},id:function(y,g){return(""+u.id(y)).localeCompare(""+u.id(g))}},v=f[u.sortBy];!v&&t.isFunction(u.sortBy)&&(v=u.sortBy),v&&o.sort(v)}function n(o,u){var f=o.length;if(!f)throw new TypeError("Invalid nodes: it's empty!");if(u.weight){var v=u.marginRatio;if(v<0||v>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=v/(2*f),y=u.thickness;if(y<=0||y>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var g=0;o.forEach(function(M){g+=M.value}),o.forEach(function(M){M.weight=M.value/g,M.width=M.weight*(1-v),M.height=y}),o.forEach(function(M,x){for(var m=0,S=x-1;S>=0;S--)m+=o[S].width+2*b;var P=M.minX=b+m,A=M.maxX=M.minX+M.width,O=M.minY=u.y-y/2,L=M.maxY=O+y;M.x=[P,A,A,P],M.y=[O,O,L,L]})}else{var _=1/f;o.forEach(function(M,x){M.x=(x+.5)*_,M.y=u.y})}}function i(o,u,f){if(f.weight){var v={};t.forIn(o,function(b,y){v[y]=b.value}),u.forEach(function(b){var y=f.source(b),g=f.target(b),_=o[y],M=o[g];if(_&&M){var x=v[y],m=f.sourceWeight(b),S=_.minX+(_.value-x)/_.value*_.width,P=S+m/_.value*_.width;v[y]-=m;var A=v[g],O=f.targetWeight(b),L=M.minX+(M.value-A)/M.value*M.width,W=L+O/M.value*M.width;v[g]-=O;var F=f.y;b.x=[S,P,L,W],b.y=[F,F,F,F]}})}else u.forEach(function(b){var y=o[f.source(b)],g=o[f.target(b)];y&&g&&(b.x=[y.x,g.x],b.y=[y.y,g.y])})}function a(o,u){u=t.assign({},s,u);var f={},v=o.nodes,b=o.edges;(!t.isArray(v)||v.length===0)&&(v=c(b,u,f)),v.forEach(function(y){var g=u.id(y);f[g]=y}),r(f,b,u),h(v,u),n(v,u),i(f,b,u),o.nodes=v,o.edges=b}l.DataSet.registerTransform("diagram.arc",a),l.DataSet.registerTransform("arc",a)},"./src/transform/diagram/dagre.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_dagre@0.8.5@dagre/index.js")),c=e("./src/data-set.ts"),r={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(i){return i.source},target:function(i){return i.target}};function h(n,i){i=l.assign({},r,i);var a=new s.default.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel(function(){return{}}),n.nodes.forEach(function(f){var v=i.nodeId?i.nodeId(f):f.id;!f.height&&!f.width&&(f.height=f.width=i.edgesep),a.setNode(v,f)}),n.edges.forEach(function(f){a.setEdge(i.source(f),i.target(f))}),s.default.layout(a);var o=[],u=[];a.nodes().forEach(function(f){var v=a.node(f),b=v.x,y=v.y,g=v.height,_=v.width;v.x=[b-_/2,b+_/2,b+_/2,b-_/2],v.y=[y+g/2,y+g/2,y-g/2,y-g/2],o.push(v)}),a.edges().forEach(function(f){var v=a.edge(f).points,b={};b.x=v.map(function(y){return y.x}),b.y=v.map(function(y){return y.y}),u.push(b)}),n.nodes=o,n.edges=u}c.DataSet.registerTransform("diagram.dagre",h),c.DataSet.registerTransform("dagre",h)},"./src/transform/diagram/sankey.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),s=e("./src/data-set.ts"),c={sankeyLeft:l.sankeyLeft,sankeyRight:l.sankeyRight,sankeyCenter:l.sankeyCenter,sankeyJustify:l.sankeyJustify},r={value:function(i){return i.value},source:function(i){return i.source},target:function(i){return i.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function h(n,i){i=t.assign({},r,i);var a=null;t.isString(i.nodeAlign)?a=c[i.nodeAlign]:t.isFunction(i.nodeAlign)&&(a=i.nodeAlign);var o=l.sankey().nodeSort(i.sort).links(function(u){return u.edges}).nodeWidth(i.nodeWidth).nodePadding(i.nodePadding).extent([[0,0],[1,1]]);t.isFunction(i.nodeId)&&o.nodeId(i.nodeId),a&&o.nodeAlign(a),o(n),n.nodes.forEach(function(u){var f=u.x0,v=u.x1,b=u.y0,y=u.y1;u.x=[f,v,v,f],u.y=[b,b,y,y]}),n.edges.forEach(function(u){var f=u.source,v=u.target,b=f.x1,y=v.x0;u.x=[b,b,y,y];var g=u.width/2;u.y=[u.y0+g,u.y0-g,u.y1+g,u.y1-g]})}s.DataSet.registerTransform("diagram.sankey",h),s.DataSet.registerTransform("sankey",h)},"./src/transform/diagram/voronoi.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=c.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),n={as:["_x","_y"]};function i(a,o){o=s.assign({},n,o);var u=o.as;if(!s.isArray(u)||u.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var f=u[0],v=u[1],b=h.getFields(o);if(!s.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var y=b[0],g=b[1],_=a.rows,M=_.map(function(S){return[S[y],S[g]]}),x=l.voronoi();o.extend&&x.extent(o.extend),o.size&&x.size(o.size);var m=x(M).polygons();_.forEach(function(S,P){var A=m[P].filter(function(O){return!!O});S[f]=A.map(function(O){return O[0]}),S[v]=A.map(function(O){return O[1]})})}r("diagram.voronoi",i),r("voronoi",i)},"./src/transform/fill-rows.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={fillBy:"group",groupBy:[],orderBy:[]};function h(i,a){var o=i.map(function(u){return u});return a.forEach(function(u){var f=o.indexOf(u);f>-1&&o.splice(f,1)}),o}function n(i,a){a=l.assign({},r,a);var o=i.rows,u=a.groupBy,f=a.orderBy,v=s.default(o,u,f),b=0,y=[];l.forIn(v,function(P){P.length>b&&(b=P.length,y=P)});var g=[],_={};if(y.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");g.push(A),_[A]=P}),a.fillBy==="order"){var M=y[0],x=[],m={};o.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");x.indexOf(A)===-1&&(x.push(A),m[A]=P)});var S=h(x,g);S.forEach(function(P){var A={};u.forEach(function(O){A[O]=M[O]}),f.forEach(function(O){A[O]=m[P][O]}),o.push(A),y.push(A),g.push(P),_[P]=A}),b=y.length}l.forIn(v,function(P){if(P!==y&&P.length<b){var A=P[0],O=[];P.forEach(function(W){O.push(f.map(function(F){return W[F]}).join("-"))});var L=h(g,O);L.some(function(W,F){if(F>=b-P.length)return!0;var K=_[W],V={};return u.forEach(function(k){V[k]=A[k]}),f.forEach(function(k){V[k]=K[k]}),o.push(V),!1})}})}c.DataSet.registerTransform("fill-rows",n),c.DataSet.registerTransform("fillRows",n)},"./src/transform/filter.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function l(s){return!!s}t.DataSet.registerTransform("filter",function(s,c){s.rows=s.rows.filter(c.callback||l)})},"./src/transform/fold.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c={fields:[],key:"key",retains:[],value:"value"};l.DataSet.registerTransform("fold",function(r,h){var n=r.getColumnNames();h=t.assign({},c,h);var i=s.getFields(h);i.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var a=h.key,o=h.value,u=h.retains;(!u||u.length===0)&&(u=t.difference(n,i));var f=[];r.rows.forEach(function(v){i.forEach(function(b){var y=t.pick(v,u);y[a]=b,y[o]=v[b],f.push(y)})}),r.rows=f})},"./src/transform/geo/centroid.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=l.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_centroid_x","_centroid_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&n.dataSet&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var u=i.as;if(!t.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var f=u[0],v=u[1];n.rows.forEach(function(b){var y=o.geoFeatureByName(b[a]);y&&(o._projectedAs?(b[f]=y[o._projectedAs[2]],b[v]=y[o._projectedAs[3]]):(b[f]=y.centroidX,b[v]=y.centroidY))})}s("geo.centroid",h)},"./src/transform/geo/projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=t.__importDefault(e("./src/util/get-geo-projection.ts")),i={as:["_x","_y","_centroid_x","_centroid_y"]};function a(o,u){if(o.dataType!=="geo"&&o.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");u=l.assign({},i,u);var f=u.projection;if(!f)throw new TypeError("Invalid projection!");f=n.default(f);var v=s.geoPath(f),b=u.as;if(!l.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');o._projectedAs=b;var y=t.__read(b,4),g=y[0],_=y[1],M=y[2],x=y[3];o.rows.forEach(function(m){m[g]=[],m[_]=[];var S=v(m);if(S){var P=c.default(S);P._path.forEach(function(O){m[g].push(O[1]),m[_].push(O[2])});var A=v.centroid(m);m[M]=A[0],m[x]=A[1]}}),o.rows=o.rows.filter(function(m){return m[g].length!==0})}h("geo.projection",a)},"./src/transform/geo/region.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=l.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_x","_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var u=i.as;if(!t.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=u[0],v=u[1];n.rows.forEach(function(b){var y=o.geoFeatureByName(b[a]);y&&(o._projectedAs?(b[f]=y[o._projectedAs[0]],b[v]=y[o._projectedAs[1]]):(b[f]=y.longitude,b[v]=y.latitude))})}s("geo.region",h)},"./src/transform/hierarchy/cluster.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY||!i.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=void 0;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.cluster();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=g.x,g[y]=g.y})}c.DataSet.registerTransform("hierarchy.cluster",n),c.DataSet.registerTransform("dendrogram",n)},"./src/transform/hierarchy/compact-box.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.compactBox(i,n)}s.DataSet.registerTransform("hierarchy.compact-box",r),s.DataSet.registerTransform("compact-box-tree",r),s.DataSet.registerTransform("non-layered-tidy-tree",r),s.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.dendrogram(i,n)}s.DataSet.registerTransform("hierarchy.dendrogram",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.indented(i,n)}s.DataSet.registerTransform("hierarchy.indented",r),s.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=l.assign({},h,a);var u=a.as;if(!l.isArray(u)||u.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var f;try{f=r.getField(a)}catch(_){console.warn(_)}f&&o.sum(function(_){return _[f]}).sort(function(_,M){return M[f]-_[f]});var v=s.pack();v.size(a.size),a.padding&&v.padding(a.padding),v(o);var b=u[0],y=u[1],g=u[2];o.each(function(_){_[b]=_.x,_[y]=_.y,_[g]=_.r})}c.DataSet.registerTransform("hierarchy.pack",n),c.DataSet.registerTransform("hierarchy.circle-packing",n),c.DataSet.registerTransform("circle-packing",n)},"./src/transform/hierarchy/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.partition();v.size(a.size).round(a.round).padding(a.padding),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=[g.x0,g.x1,g.x1,g.x0],g[y]=[g.y1,g.y1,g.y0,g.y0],["x0","x1","y0","y1"].forEach(function(_){u.indexOf(_)===-1&&delete g[_]})})}c.DataSet.registerTransform("hierarchy.partition",n),c.DataSet.registerTransform("adjacency",n)},"./src/transform/hierarchy/tree.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.tree();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=g.x,g[y]=g.y})}c.DataSet.registerTransform("hierarchy.tree",n),c.DataSet.registerTransform("tree",n)},"./src/transform/hierarchy/treemap.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.treemap();v.tile(l[a.tile]).size(a.size).round(a.round).padding(a.padding).paddingInner(a.paddingInner).paddingOuter(a.paddingOuter).paddingTop(a.paddingTop).paddingRight(a.paddingRight).paddingBottom(a.paddingBottom).paddingLeft(a.paddingLeft),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=[g.x0,g.x1,g.x1,g.x0],g[y]=[g.y1,g.y1,g.y0,g.y0],["x0","x1","y0","y1"].forEach(function(_){u.indexOf(_)===-1&&delete g[_]})})}c.DataSet.registerTransform("hierarchy.treemap",n),c.DataSet.registerTransform("treemap",n)},"./src/transform/impute.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[]};function i(f){return f.filter(function(v){return!l.isUndefined(v)})}var a=["mean","median","max","min"],o={};a.forEach(function(f){o[f]=function(v,b){return s[f](b)}}),o.value=function(f,v,b){return b};function u(f,v){v=l.assign({},n,v);var b=h.getField(v),y=v.method;if(!y)throw new TypeError("Invalid method!");if(y==="value"&&!l.has(v,"value"))throw new TypeError("Invalid value: it is nil.");var g=i(f.getColumn(b)),_=c.default(f.rows,v.groupBy);l.forIn(_,function(M){var x=i(M.map(function(m){return m[b]}));x.length===0&&(x=g),M.forEach(function(m){if(l.isUndefined(m[b]))if(l.isFunction(y))m[b]=y(m,x,v.value,M);else if(l.isString(y))m[b]=o[y](m,x,v.value);else throw new TypeError("Invalid method: must be a function or one of "+a.join(", "))})})}r.DataSet.registerTransform("impute",u)},"./src/transform/kde.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=t.__importStar(e("./src/util/bandwidth.ts")),h=t.__importDefault(e("./src/util/partition.ts")),n=e("./src/data-set.ts"),i=e("./src/util/option-parser.ts"),a=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),o={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},u=l.keys(c.default),f=l.keys(r);function v(b,y){y=l.assign({},o,y);var g=i.getFields(y);if(!l.isArray(g)||g.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var _=y.as;if(!l.isArray(_)||_.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var M=y.method;if(l.isString(M)){if(u.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+u.join(", "));M=c.default[M]}if(!l.isFunction(M))throw new TypeError("invalid method: kernel method must be a function!");var x=y.extent;if(!l.isArray(x)||x.length===0){var m=[];l.each(g,function(W){var F=b.range(W);m=m.concat(F)}),x=[Math.min.apply(Math,t.__spread(m)),Math.max.apply(Math,t.__spread(m))]}var S=y.bandwidth;l.isString(S)&&r[S]?S=r[S](b.getColumn(g[0])):l.isFunction(S)?S=S(b.getColumn(g[0])):(!l.isNumber(S)||S<=0)&&(S=r.nrd(b.getColumn(g[0])));var P=s.default(x,y.step?y.step:S),A=[],O=y.groupBy,L=h.default(b.rows,O);l.forIn(L,function(W){var F={};l.each(g,function(K){var V=l.pick(W[0],O);F[K]=a.kernelDensityEstimation(W.map(function(ft){return ft[K]}),M,S);var k=t.__read(_,3),Z=k[0],X=k[1],it=k[2];V[Z]=K,V[X]=[],V[it]=[],l.each(P,function(ft){var pt=F[K](ft);pt>=y.minSize&&(V[X].push(ft),V[it].push(pt))}),A.push(V)})}),b.rows=A}n.DataSet.registerTransform("kernel-density-estimation",v),n.DataSet.registerTransform("kde",v),n.DataSet.registerTransform("KDE",v),T.default={KERNEL_METHODS:u,BANDWIDTH_METHODS:f}},"./src/transform/kernel-smooth/density.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y","z"],method:"gaussian"},a=l.keys(c.default);function o(u,f){var v,b;f=l.assign({},i,f);var y=h.getFields(f);if(!l.isArray(y)||y.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var g=t.__read(f.as,3),_=g[0],M=g[1],x=g[2];if(!l.isString(_)||!l.isString(M)||!l.isString(x))throw new TypeError("invalid as: must be an array of 3 strings!");var m;if(l.isString(f.method)){if(a.indexOf(f.method)===-1)throw new TypeError("invalid method: "+f.method+". Must be one of "+a.join(", "));m=c.default[f.method]}var S=t.__read(y,2),P=S[0],A=S[1],O=f.extent,L=f.bandwidth,W,F;O&&Array.isArray(O)&&Array.isArray(O[0])&&Array.isArray(O[1])?(v=t.__read(O,2),W=v[0],F=v[1]):(W=u.range(P),F=u.range(A));var K,V;L&&Array.isArray(L)&&L.slice(0,2).every(l.isNumber)&&L.slice(0,2).every(function(At){return At>0})?(b=t.__read(L,2),K=b[0],V=b[1]):(K=n.silverman(u.getColumn(P)),V=n.silverman(u.getColumn(A)));for(var k=s.default(W,K),Z=s.default(F,V),X=u.rows.length,it=[],ft=0;ft<k.length;ft++)for(var pt=0;pt<Z.length;pt++){for(var ut=0,It=k[ft],Nt=Z[pt],Rt=0;Rt<X;Rt++)ut+=m((It-u.rows[Rt][P])/K)*m((Nt-u.rows[Rt][A])/V);var Mt=1/(X*K*V)*ut,bt={};bt[_]=It,bt[M]=Nt,bt[x]=Mt,it.push(bt)}u.rows=it}r.DataSet.registerTransform("kernel-smooth.density",o),r.DataSet.registerTransform("kernel.density",o),T.default={KERNEL_METHODS:a}},"./src/transform/kernel-smooth/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),n=e("./src/util/option-parser.ts"),i=e("./src/util/bandwidth.ts"),a={as:["x","y"],method:"gaussian"},o=l.keys(c.default);function u(b,y,g,_){var M=(_-g)/y;return b(M)}function f(b){return function(y){return l.isArray(y)?y.map(function(g){return b(g)}):b(y)}}function v(b,y){y=l.assign({},a,y);var g=n.getFields(y);if(!l.isArray(g)||!(g.length===1||g.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var _=t.__read(y.as,2),M=_[0],x=_[1];if(!l.isString(M)||!l.isString(x))throw new TypeError("invalid as: must be an array of 2 strings!");var m,S=y.method;if(l.isString(S)){if(o.indexOf(S)===-1)throw new TypeError("invalid method: "+S+". Must be one of "+o.join(", "));m=c.default[S]}var P=t.__read(g,2),A=P[0],O=P[1],L=b.getColumn(A),W=y.extent;(W||!l.isArray(W))&&(W=b.range(A));var F=y.bandwidth;(!F||!l.isNumber(F)||F<=0)&&(F=i.silverman(L));var K=s.default(W,F),V=L.length,k=u.bind(null,m,F),Z;if(l.isNil(O))Z=f(function(ft){var pt=L.map(function(Nt){return k(ft,Nt)}),ut=h.sum(pt),It=V*F;return!ut||!It?0:ut/It});else{var X=b.getColumn(O);Z=f(function(ft){var pt=L.map(function(Nt){return k(ft,Nt)}),ut=h.sum(pt.map(function(Nt,Rt){return Nt*X[Rt]})),It=h.sum(pt);return!ut||!It?0:ut/It})}var it=K.map(function(ft){var pt={};return pt[M]=ft,pt[x]=Z(ft),pt});b.rows=it}r.DataSet.registerTransform("kernel-smooth.regression",v),r.DataSet.registerTransform("kernel.regression",v),T.default={KERNEL_METHODS:o}},"./src/transform/map.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function l(s){return s}t.DataSet.registerTransform("map",function(s,c){s.rows=s.rows.map(c.callback||l)})},"./src/transform/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={groupBy:[],orderBy:[]};c.DataSet.registerTransform("partition",function(n,i){i=l.assign({},r,i),n.rows=s.default(n.rows,i.groupBy,i.orderBy)});function h(n,i){i=l.assign({},r,i),n.rows=l.values(s.default(n.rows,i.groupBy,i.orderBy))}c.DataSet.registerTransform("group",h),c.DataSet.registerTransform("groups",h)},"./src/transform/percent.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[],as:"_percent"};function i(a,o){o=l.assign({},n,o);var u=h.getField(o),f=o.dimension,v=o.groupBy,b=o.as;if(!l.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(l.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!l.isString(b))throw new TypeError("Invalid as: must be a string!");var y=a.rows,g=[],_=c.default(y,v);l.forIn(_,function(M){var x=s.sum(M.map(function(S){return S[u]})),m=c.default(M,[f]);l.forIn(m,function(S){var P=s.sum(S.map(function(L){return L[u]})),A=S[0],O=A[f];A[u]=P,A[f]=O,x===0?A[b]=0:A[b]=P/x,g.push(A)})}),a.rows=g}r.DataSet.registerTransform("percent",i)},"./src/transform/pick.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts");l.DataSet.registerTransform("pick",function(c,r){var h=s.getFields(r,c.getColumnNames());c.rows=c.rows.map(function(n){return t.pick(n,h)})})},"./src/transform/proportion.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={groupBy:[],as:"_proportion"};function n(i,a){a=l.assign({},h,a);var o=r.getField(a),u=a.dimension,f=a.groupBy,v=a.as;if(!l.isString(u))throw new TypeError("Invalid dimension: must be a string!");if(l.isArray(v)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),v=v[0]),!l.isString(v))throw new TypeError("Invalid as: must be a string!");var b=i.rows,y=[],g=s.default(b,f);l.forIn(g,function(_){var M=_.length,x=s.default(_,[u]);l.forIn(x,function(m){var S=m.length,P=m[0],A=P[u];P[o]=S,P[u]=A,P[v]=S/M,y.push(P)})}),i.rows=y}c.DataSet.registerTransform("proportion",n)},"./src/transform/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_regression@2.0.1@regression/dist/regression.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=t.__importDefault(e("./src/util/get-series-values.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y"],method:"linear",order:2,precision:2},a=["linear","exponential","logarithmic","power","polynomial"];function o(u,f){f=s.assign({},i,f);var v=h.getFields(f);if(!s.isArray(v)||v.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=t.__read(v,2),y=b[0],g=b[1],_=f.method;if(a.indexOf(_)===-1)throw new TypeError("invalid method: "+_+". Must be one of "+a.join(", "));var M=u.rows.map(function(F){return[F[y],F[g]]}),x=l.default[_](M,f),m=f.extent;(!s.isArray(m)||m.length!==2)&&(m=u.range(y));var S=f.bandwidth;(!s.isNumber(S)||S<=0)&&(S=n.silverman(u.getColumn(y)));var P=c.default(m,S),A=[],O=t.__read(f.as,2),L=O[0],W=O[1];P.forEach(function(F){var K={},V=t.__read(x.predict(F),2),k=V[0],Z=V[1];K[L]=k,K[W]=Z,isFinite(Z)&&A.push(K)}),u.rows=A}r.DataSet.registerTransform("regression",o),T.default={REGRESSION_METHODS:a}},"./src/transform/rename.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts");function s(c,r){var h=r.map||{},n={};t.isPlainObject(h)&&t.forIn(h,function(i,a){t.isString(i)&&t.isString(a)&&(n[a]=i)}),c.rows.forEach(function(i){t.forIn(n,function(a,o){var u=i[o];delete i[o],i[a]=u})})}l.DataSet.registerTransform("rename",s),l.DataSet.registerTransform("rename-fields",s)},"./src/transform/reverse.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("reverse",function(l){l.rows.reverse()})},"./src/transform/sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c=["ASC","DESC"];function r(h,n){var i=s.getFields(n,[h.getColumnName(0)]);if(!t.isArray(i))throw new TypeError("Invalid fields: must be an array with strings!");h.rows=t.sortBy(h.rows,i);var a=n.order;if(a&&c.indexOf(a)===-1)throw new TypeError("Invalid order: "+a+" must be one of "+c.join(", "));a==="DESC"&&h.rows.reverse()}l.DataSet.registerTransform("sort-by",r),l.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("sort",function(l,s){var c=l.getColumnName(0);l.rows.sort(s.callback||function(r,h){return r[c]-h[c]})})},"./src/transform/subset.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts"),l=e("./src/util/option-parser.ts");t.DataSet.registerTransform("subset",function(s,c){var r=c.startRowIndex||0,h=c.endRowIndex||s.rows.length-1,n=l.getFields(c,s.getColumnNames());s.rows=s.getSubset(r,h,n)})},"./src/transform/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=t.__importDefault(e("./src/util/tag-cloud.ts")),r=e("./src/util/option-parser.ts"),h={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function n(i,a){a=l.assign({},h,a);var o=c.default();if(!a.size[0]||!a.size[1]){i.rows=[],i._tagCloud=o;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(A){a[A]&&o[A](a[A])});var u=r.getFields(a),f=t.__read(u,2),v=f[0],b=f[1];if(!l.isString(v)||!l.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var y=i.rows.map(function(A){return A.text=A[v],A.value=A[b],A});o.words(y),a.imageMask&&o.createMask(a.imageMask);var g=o.start(),_=g._tags,M=g._bounds||[{x:0,y:0},{x:a.size[0],y:a.size[1]}];_.forEach(function(A){A.x+=a.size[0]/2,A.y+=a.size[1]/2});var x=t.__read(a.size,2),m=x[0],S=x[1],P=g.hasImage;_.push({text:"",value:0,x:P?0:M[0].x,y:P?0:M[0].y,opacity:0}),_.push({text:"",value:0,x:P?m:M[1].x,y:P?S:M[1].y,opacity:0}),i.rows=_,i._tagCloud=g}s.DataSet.registerTransform("tag-cloud",n),s.DataSet.registerTransform("word-cloud",n)},"./src/transform/waffle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function i(a,o){o=l.assign({},n,o);var u=h.getFields(o),f=t.__read(u,2),v=f[0],b=f[1],y=t.__read(o.as,2),g=y[0],_=y[1],M=o.groupBy,x=c.default(a.rows,M),m=l.keys(x),S=t.__read(o.size,2),P=S[0],A=S[1],O=o.maxCount,L=m.length,W=A/L,F=o.rows,K=o.gapRatio,V=[],k=o.scale,Z=0,X=0;l.forIn(x,function(it){var ft=s.sum(l.map(it,function(ut){return ut[b]})),pt=Math.ceil(ft*k/F);ft*k>O&&(k=O/ft,pt=Math.ceil(ft*k/F)),X=P/pt}),l.forIn(x,function(it){var ft=[Z*W,(Z+1)*W],pt=ft[1]-ft[0],ut=pt*(1-K)/F,It=0,Nt=0;l.each(it,function(Rt){for(var Mt=Rt[b],bt=Math.round(Mt*k),At=0;At<bt;At++){Nt===F&&(Nt=0,It++);var rt=l.pick(Rt,[v,b].concat(M));rt[g]=It*X+X/2,rt[_]=Nt*ut+ut/2+ft[0],rt._wStep=X,rt._hStep=ut,Nt++,V.push(rt)}}),Z+=1}),a.rows=V}r.DataSet.registerTransform("waffle",i)},"./src/util/bandwidth.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.nrd=T.silverman=void 0;var t=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function l(c){var r=t.standardDeviation(c),h=4*Math.pow(r,5),n=3*c.length;return Math.pow(h/n,.2)}T.silverman=l;function s(c){var r=t.standardDeviation(c),h=t.interquartileRange(c);return typeof h=="number"&&(r=Math.min(r,h/1.34)),1.06*r*Math.pow(c.length,-.2)}T.nrd=s},"./src/util/get-geo-projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),c=t.__importStar(e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),r=t.__importStar(e("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));T.default=function(h,n){if(n===void 0&&(n=!1),l.isFunction(h))return n?h:h();if(l.isString(h)){if(s[h])return n?s[h]:s[h]();if(c[h])return n?c[h]:c[h]();if(r[h])return n?r[h]:r[h]()}return null}},"./src/util/get-series-values.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");T.default=function(l,s){for(var c=s||1,r=t.__read(l,2),h=r[0],n=r[1],i=[],a=h;a<n;)i.push(a),a+=c;return i.push(n),i}},"./src/util/kernel.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s){return Math.abs(s)<=1?.5:0}function l(s){var c=1-Math.pow(Math.abs(s),3);return Math.pow(c,3)}T.default={boxcar:t,cosine:function(c){return Math.abs(c)<=1?Math.PI/4*Math.cos(Math.PI/2*c):0},epanechnikov:function(c){return Math.abs(c)<1?.75*(1-c*c):0},gaussian:function(c){return .3989422804*Math.exp(-.5*c*c)},quartic:function(c){if(Math.abs(c)<1){var r=1-c*c;return 15/16*r*r}return 0},triangular:function(c){var r=Math.abs(c);return r<1?1-r:0},tricube:function(c){return Math.abs(c)<1?70/81*l(c):0},triweight:function(c){if(Math.abs(c)<1){var r=1-c*c;return 35/32*r*r*r}return 0},uniform:t}},"./src/util/option-parser.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getFields=T.getField=void 0;var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";function c(h,n){var i=h.field,a=h.fields;if(t.isString(i))return i;if(t.isArray(i))return console.warn(l),i[0];if(console.warn(l+" will try to get fields instead."),t.isString(a))return a;if(t.isArray(a)&&a.length)return a[0];if(n)return n;throw new TypeError(l)}T.getField=c;function r(h,n){var i=h.field,a=h.fields;if(t.isArray(a))return a;if(t.isString(a))return console.warn(s),[a];if(console.warn(s+" will try to get field instead."),t.isString(i))return console.warn(s),[i];if(t.isArray(i)&&i.length)return console.warn(s),i;if(n)return n;throw new TypeError(s)}T.getFields=r},"./src/util/p-by-fraction.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){for(var l=1/t,s=[],c=0;c<=1;c=c+l)s.push(c);return s}},"./src/util/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/simple-sort-by.ts"));T.default=function(c,r,h){h===void 0&&(h=[]);var n=c;h&&h.length&&(n=s.default(c,h));var i;l.isFunction(r)?i=r:l.isArray(r)?i=function(u){return"_"+r.map(function(f){return u[f]}).join("-")}:l.isString(r)&&(i=function(u){return"_"+u[r]});var a=l.groupBy(n,i);return a}},"./src/util/simple-sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function l(s,c){c===void 0&&(c=[]);var r=void 0;return t.isFunction(c)?r=c:t.isArray(c)?r=function(n,i){for(var a=0;a<c.length;a++){var o=c[a];if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}:t.isString(c)&&(r=function(n,i){return n[c]<i[c]?-1:n[c]>i[c]?1:0}),s.sort(r)}T.default=l},"./src/util/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=Math.PI/180,s=1<<11>>5,c=1<<11;function r(P){return P.text}function h(){return"serif"}function n(){return"normal"}function i(P){return P.value}function a(){return~~(Math.random()*2)*90}function o(){return 1}function u(P,A,O,L){if(!A.sprite){var W=P.context,F=P.ratio;W.clearRect(0,0,(s<<5)/F,c/F);var K=0,V=0,k=0,Z=O.length;for(--L;++L<Z;){A=O[L],W.save(),W.font=A.style+" "+A.weight+" "+~~((A.size+1)/F)+"px "+A.font;var X=W.measureText(A.text+"m").width*F,it=A.size<<1;if(A.rotate){var ft=Math.sin(A.rotate*l),pt=Math.cos(A.rotate*l),ut=X*pt,It=X*ft,Nt=it*pt,Rt=it*ft;X=Math.max(Math.abs(ut+Rt),Math.abs(ut-Rt))+31>>5<<5,it=~~Math.max(Math.abs(It+Nt),Math.abs(It-Nt))}else X=X+31>>5<<5;if(it>k&&(k=it),K+X>=s<<5&&(K=0,V+=k,k=0),V+it>=c)break;W.translate((K+(X>>1))/F,(V+(it>>1))/F),A.rotate&&W.rotate(A.rotate*l),W.fillText(A.text,0,0),A.padding&&(W.lineWidth=2*A.padding,W.strokeText(A.text,0,0)),W.restore(),A.width=X,A.height=it,A.xoff=K,A.yoff=V,A.x1=X>>1,A.y1=it>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,K+=X}for(var Mt=W.getImageData(0,0,(s<<5)/F,c/F).data,bt=[];--L>=0;)if(A=O[L],!!A.hasText){for(var X=A.width,At=X>>5,it=A.y1-A.y0,rt=0;rt<it*At;rt++)bt[rt]=0;if(K=A.xoff,K==null)return;V=A.yoff;for(var Pt=0,z=-1,Q=0;Q<it;Q++){for(var rt=0;rt<X;rt++){var gt=At*Q+(rt>>5),et=Mt[(V+Q)*(s<<5)+(K+rt)<<2]?1<<31-rt%32:0;bt[gt]|=et,Pt|=et}Pt?z=Q:(A.y0++,it--,Q--,V++)}A.y1=A.y0+z,A.sprite=bt.slice(0,(A.y1-A.y0)*At)}}}function f(P,A,O){O>>=5;for(var L=P.sprite,W=P.width>>5,F=P.x-(W<<4),K=F&127,V=32-K,k=P.y1-P.y0,Z=(P.y+P.y0)*O+(F>>5),X,it=0;it<k;it++){X=0;for(var ft=0;ft<=W;ft++)if((X<<V|(ft<W?(X=L[it*W+ft])>>>K:0))&A[Z+ft])return!0;Z+=O}return!1}function v(P,A){var O=P[0],L=P[1];A.x+A.x0<O.x&&(O.x=A.x+A.x0),A.y+A.y0<O.y&&(O.y=A.y+A.y0),A.x+A.x1>L.x&&(L.x=A.x+A.x1),A.y+A.y1>L.y&&(L.y=A.y+A.y1)}function b(P,A){return P.x+P.x1>A[0].x&&P.x+P.x0<A[1].x&&P.y+P.y1>A[0].y&&P.y+P.y0<A[1].y}function y(P){var A=P[0]/P[1];return function(O){return[A*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function g(P){var A=4,O=A*P[0]/P[1],L=0,W=0;return function(F){var K=F<0?-1:1;switch(Math.sqrt(1+4*K*F)-K&3){case 0:L+=O;break;case 1:W+=A;break;case 2:L-=O;break;default:W-=A;break}return[L,W]}}function _(P){for(var A=[],O=-1;++O<P;)A[O]=0;return A}function M(){return document.createElement("canvas")}function x(P){return typeof P=="function"?P:function(){return P}}var m={archimedean:y,rectangular:g};function S(){var P=[256,256],A=r,O=h,L=i,W=n,F=n,K=a,V=o,k=y,Z=[],X=Infinity,it=Math.random,ft=M,pt={};pt.canvas=function(Nt){return arguments.length?(ft=x(Nt),pt):ft},pt.start=function(){var Nt=t.__read(P,2),Rt=Nt[0],Mt=Nt[1],bt=ut(ft()),At=pt.board?pt.board:_((P[0]>>5)*P[1]),rt=Z.length,Pt=[],z=Z.map(function(ot,xt){return ot.text=A.call(this,ot,xt),ot.font=O.call(this,ot,xt),ot.style=W.call(this,ot,xt),ot.weight=F.call(this,ot,xt),ot.rotate=K.call(this,ot,xt),ot.size=~~L.call(this,ot,xt),ot.padding=V.call(this,ot,xt),ot}).sort(function(ot,xt){return xt.size-ot.size}),Q=-1,gt=pt.board?[{x:0,y:0},{x:Rt,y:Mt}]:null;et();function et(){for(var ot=Date.now();Date.now()-ot<X&&++Q<rt;){var xt=z[Q];xt.x=Rt*(it()+.5)>>1,xt.y=Mt*(it()+.5)>>1,u(bt,xt,z,Q),xt.hasText&&It(At,xt,gt)&&(Pt.push(xt),gt?pt.hasImage||v(gt,xt):gt=[{x:xt.x+xt.x0,y:xt.y+xt.y0},{x:xt.x+xt.x1,y:xt.y+xt.y1}],xt.x-=P[0]>>1,xt.y-=P[1]>>1)}pt._tags=Pt,pt._bounds=gt}return pt};function ut(Nt){Nt.width=Nt.height=1;var Rt=Math.sqrt(Nt.getContext("2d").getImageData(0,0,1,1).data.length>>2);Nt.width=(s<<5)/Rt,Nt.height=c/Rt;var Mt=Nt.getContext("2d");return Mt.fillStyle=Mt.strokeStyle="red",Mt.textAlign="center",{context:Mt,ratio:Rt}}function It(Nt,Rt,Mt){for(var bt=Rt.x,At=Rt.y,rt=Math.sqrt(P[0]*P[0]+P[1]*P[1]),Pt=k(P),z=it()<.5?1:-1,Q,gt=-z,et,ot;(Q=Pt(gt+=z))&&(et=~~Q[0],ot=~~Q[1],!(Math.min(Math.abs(et),Math.abs(ot))>=rt));)if(Rt.x=bt+et,Rt.y=At+ot,!(Rt.x+Rt.x0<0||Rt.y+Rt.y0<0||Rt.x+Rt.x1>P[0]||Rt.y+Rt.y1>P[1])&&(!Mt||!f(Rt,Nt,P[0]))&&(!Mt||b(Rt,Mt))){for(var xt=Rt.sprite,H=Rt.width>>5,nt=P[0]>>5,at=Rt.x-(H<<4),q=at&127,_t=32-q,yt=Rt.y1-Rt.y0,Ft=void 0,Qt=(Rt.y+Rt.y0)*nt+(at>>5),ee=0;ee<yt;ee++){Ft=0;for(var Vt=0;Vt<=H;Vt++)Nt[Qt+Vt]|=Ft<<_t|(Vt<H?(Ft=xt[ee*H+Vt])>>>q:0);Qt+=nt}return delete Rt.sprite,!0}return!1}return pt.createMask=function(Nt){var Rt=document.createElement("canvas"),Mt=t.__read(P,2),bt=Mt[0],At=Mt[1];if(!(!bt||!At)){var rt=bt>>5,Pt=_((bt>>5)*At);Rt.width=bt,Rt.height=At;var z=Rt.getContext("2d");z.drawImage(Nt,0,0,Nt.width,Nt.height,0,0,bt,At);for(var Q=z.getImageData(0,0,bt,At).data,gt=0;gt<At;gt++)for(var et=0;et<bt;et++){var ot=rt*gt+(et>>5),xt=gt*bt+et<<2,H=Q[xt]>=250&&Q[xt+1]>=250&&Q[xt+2]>=250,nt=H?1<<31-et%32:0;Pt[ot]|=nt}pt.board=Pt,pt.hasImage=!0}},pt.timeInterval=function(Nt){return arguments.length?(X=Nt==null?Infinity:Nt,pt):X},pt.words=function(Nt){return arguments.length?(Z=Nt,pt):Z},pt.size=function(Nt){return arguments.length?(P=[+Nt[0],+Nt[1]],pt):P},pt.font=function(Nt){return arguments.length?(O=x(Nt),pt):O},pt.fontStyle=function(Nt){return arguments.length?(W=x(Nt),pt):W},pt.fontWeight=function(Nt){return arguments.length?(F=x(Nt),pt):F},pt.rotate=function(Nt){return arguments.length?(K=x(Nt),pt):K},pt.text=function(Nt){return arguments.length?(A=x(Nt),pt):A},pt.spiral=function(Nt){return arguments.length?(k=m[Nt]||Nt,pt):k},pt.fontSize=function(Nt){return arguments.length?(L=x(Nt),pt):L},pt.padding=function(Nt){return arguments.length?(V=x(Nt),pt):V},pt.random=function(Nt){return arguments.length?(it=Nt,pt):it},pt}T.default=S},"./src/view.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.View=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function c(h){var n={};return s.forIn(h,function(i,a){s.isObject(i)&&i.isView?n[a]=i:s.isArray(i)?n[a]=i.concat([]):s.isPlainObject(i)?n[a]=s.clone(i):n[a]=i}),n}var r=function(h){t.__extends(n,h);function n(i,a){var o=h.call(this)||this;if(o.isView=!0,o.isDataView=!0,o.watchingStates=null,o.dataType="table",o.transforms=[],o.origin=[],o.rows=[],i&&i.isDataSet?o.dataSet=i:(o.dataSet=null,a=i),o.loose=!o.dataSet,a&&(o.watchingStates=a.watchingStates),!o.loose){var u=o.watchingStates;i.on("statechange",function(f){s.isArray(u)?u.indexOf(f)>-1&&o._reExecute():o._reExecute()})}return o}return n.prototype._parseStateExpression=function(i){var a=this.dataSet;if(a!==null){var o=/^\$state\.(\w+)/.exec(i);return o?a.state[o[1]]:i}},n.prototype._preparseOptions=function(i){var a=this,o=c(i);return this.loose||s.forIn(o,function(u,f){s.isString(u)&&/^\$state\./.test(u)&&(o[f]=a._parseStateExpression(u))}),o},n.prototype._prepareSource=function(i,a){if(this._source={source:i,options:a},a){var o=this._preparseOptions(a);this.origin=n.DataSet.getConnector(o.type)(i,o,this)}else if(i instanceof n||s.isString(i))this.origin=n.DataSet.getConnector("default")(i,this.dataSet);else if(s.isArray(i))this.origin=i;else if(s.isObject(i)&&i.type){var o=this._preparseOptions(i);this.origin=n.DataSet.getConnector(o.type)(o,this)}else throw new TypeError("Invalid source");return this.rows=s.deepMix([],this.origin),this},n.prototype.source=function(i,a){return this._prepareSource(i,a)._reExecuteTransforms(),this.trigger("change",[]),this},n.prototype.transform=function(i){return i&&i.type&&(this.transforms.push(i),this._executeTransform(i)),this},n.prototype._executeTransform=function(i){i=this._preparseOptions(i);var a=n.DataSet.getTransform(i.type);a(this,i)},n.prototype._reExecuteTransforms=function(){var i=this;this.transforms.forEach(function(a){i._executeTransform(a)})},n.prototype.addRow=function(i){this.rows.push(i)},n.prototype.removeRow=function(i){this.rows.splice(i,1)},n.prototype.updateRow=function(i,a){s.assign(this.rows[i],a)},n.prototype.findRows=function(i){return this.rows.filter(function(a){return s.isMatch(a,i)})},n.prototype.findRow=function(i){return s.find(this.rows,i)},n.prototype.getColumnNames=function(){var i=this.rows[0];return i?s.keys(i):[]},n.prototype.getColumnName=function(i){return this.getColumnNames()[i]},n.prototype.getColumnIndex=function(i){var a=this.getColumnNames();return a.indexOf(i)},n.prototype.getColumn=function(i){return this.rows.map(function(a){return a[i]})},n.prototype.getColumnData=function(i){return this.getColumn(i)},n.prototype.getSubset=function(i,a,o){for(var u=[],f=i;f<=a;f++)u.push(s.pick(this.rows[f],o));return u},n.prototype.toString=function(i){return i===void 0&&(i=!1),i?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n.prototype._reExecute=function(){var i=this._source,a=i.source,o=i.options;this._prepareSource(a,o),this._reExecuteTransforms(),this.trigger("change",[])},n}(l.default);T.View=r}})})},cSJO:function(Oe,mt,R){"use strict";var U=this&&this.__spreadArrays||function(){for(var r=0,h=0,n=arguments.length;h<n;h++)r+=arguments[h].length;for(var i=Array(r),a=0,h=0;h<n;h++)for(var o=arguments[h],u=0,f=o.length;u<f;u++,a++)i[a]=o[u];return i};Object.defineProperty(mt,"__esModule",{value:!0}),mt.resolveInstance=void 0;var E=R("MON2"),T=R("FV85"),e=R("xfSm");function t(r,h,n){var i=h.filter(function(o){return o.target!==null&&o.target.type===T.TargetTypeEnum.ClassProperty}),a=i.map(n);return i.forEach(function(o,u){var f="";f=o.target.name.value();var v=a[u];r[f]=v}),r}function l(r,h){return new(r.bind.apply(r,U([void 0],h)))}function s(r,h){if(Reflect.hasMetadata(e.POST_CONSTRUCT,r)){var n=Reflect.getMetadata(e.POST_CONSTRUCT,r);try{h[n.value]()}catch(i){throw new Error(E.POST_CONSTRUCT_ERROR(r.name,i.message))}}}function c(r,h,n){var i=null;if(h.length>0){var a=h.filter(function(u){return u.target!==null&&u.target.type===T.TargetTypeEnum.ConstructorArgument}),o=a.map(n);i=l(r,o),i=t(i,h,n)}else i=new r;return s(r,i),i}mt.resolveInstance=c},cWXX:function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("oIFs"),e=R.n(T)},cZ5Q:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.injectable=void 0;var U=R("MON2"),E=R("xfSm");function T(){return function(e){if(Reflect.hasOwnMetadata(E.PARAM_TYPES,e))throw new Error(U.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(E.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(E.PARAM_TYPES,t,e),e}}mt.injectable=T},cZlC:function(Oe,mt,R){"use strict";R.d(mt,"b",function(){return U}),R.d(mt,"c",function(){return E}),R.d(mt,"a",function(){return T});var U;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(U||(U={}));var E;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(E||(E={}));var T;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(T||(T={}))},"cq/+":function(Oe,mt,R){var U=R("mc0g"),E=U();Oe.exports=E},cvCv:function(Oe,mt){function R(U){return function(){return U}}Oe.exports=R},d9O0:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.id=void 0;var U=0;function E(){return U++}mt.id=E},dQpi:function(Oe,mt,R){var U=R("yGk4"),E=R("vN+2"),T=R("rEGp"),e=1/0,t=U&&1/T(new U([,-0]))[1]==e?function(l){return new U(l)}:E;Oe.exports=t},dTAl:function(Oe,mt,R){var U=R("GoyQ"),E=Object.create,T=function(){function e(){}return function(t){if(!U(t))return{};if(E)return E(t);e.prototype=t;var l=new e;return e.prototype=void 0,l}}();Oe.exports=T},dVn5:function(Oe,mt){var R=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function U(E){return E.match(R)||[]}Oe.exports=U},dX1H:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Target=void 0;var U=R("xfSm"),E=R("d9O0"),T=R("GXnB"),e=R("zxMA"),t=function(){function l(s,c,r,h){this.id=E.id(),this.type=s,this.serviceIdentifier=r,this.name=new e.QueryableString(c||""),this.metadata=new Array;var n=null;typeof h=="string"?n=new T.Metadata(U.NAMED_TAG,h):h instanceof T.Metadata&&(n=h),n!==null&&this.metadata.push(n)}return l.prototype.hasTag=function(s){for(var c=0,r=this.metadata;c<r.length;c++){var h=r[c];if(h.key===s)return!0}return!1},l.prototype.isArray=function(){return this.hasTag(U.MULTI_INJECT_TAG)},l.prototype.matchesArray=function(s){return this.matchesTag(U.MULTI_INJECT_TAG)(s)},l.prototype.isNamed=function(){return this.hasTag(U.NAMED_TAG)},l.prototype.isTagged=function(){return this.metadata.some(function(s){return s.key!==U.INJECT_TAG&&s.key!==U.MULTI_INJECT_TAG&&s.key!==U.NAME_TAG&&s.key!==U.UNMANAGED_TAG&&s.key!==U.NAMED_TAG})},l.prototype.isOptional=function(){return this.matchesTag(U.OPTIONAL_TAG)(!0)},l.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(s){return s.key===U.NAMED_TAG})[0]:null},l.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(s){return s.key!==U.INJECT_TAG&&s.key!==U.MULTI_INJECT_TAG&&s.key!==U.NAME_TAG&&s.key!==U.UNMANAGED_TAG&&s.key!==U.NAMED_TAG}):null},l.prototype.matchesNamedTag=function(s){return this.matchesTag(U.NAMED_TAG)(s)},l.prototype.matchesTag=function(s){var c=this;return function(r){for(var h=0,n=c.metadata;h<n.length;h++){var i=n[h];if(i.key===s&&i.value===r)return!0}return!1}},l}();mt.Target=t},doU7:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingCount=void 0;var U={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};mt.BindingCount=U},dt0z:function(Oe,mt,R){var U=R("zoYe");function E(T){return T==null?"":U(T)}Oe.exports=E},dxzI:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.AsyncContainerModule=mt.ContainerModule=void 0;var U=R("d9O0"),E=function(){function e(t){this.id=U.id(),this.registry=t}return e}();mt.ContainerModule=E;var T=function(){function e(t){this.id=U.id(),this.registry=t}return e}();mt.AsyncContainerModule=T},eUgh:function(Oe,mt){function R(U,E){for(var T=-1,e=U==null?0:U.length,t=Array(e);++T<e;)t[T]=E(U[T],T,U);return t}Oe.exports=R},"eg+a":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},fX6N:function(Oe,mt,R){"use strict";R.d(mt,"d",function(){return mf}),R.d(mt,"b",function(){return zc}),R.d(mt,"a",function(){return xf});var U=R("mNvP"),E=R("uhBA"),T=R.n(E),e=R("4cb6"),t=R("APxj"),l=R.n(t),s=R("bB6j"),c=R("lSNA"),r=R.n(c),h=R("lwsE"),n=R.n(h),i=R("W8MJ"),a=R.n(i),o=R("Hel2"),u=R("rxlC"),f=R.n(u);function v(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function b(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?v(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):v(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function y(ve,ge){var Gt;if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(Gt=g(ve))||ge&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=ve.length?{done:!0}:{done:!1,value:ve[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){Gt=ve[Symbol.iterator]()},n:function(){var Qr=Gt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Gn)throw mr}}}}function g(ve,ge){if(!!ve){if(typeof ve=="string")return _(ve,ge);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return _(ve,ge)}}function _(ve,ge){(ge==null||ge>ve.length)&&(ge=ve.length);for(var Gt=0,Kt=new Array(ge);Gt<ge;Gt++)Kt[Gt]=ve[Gt];return Kt}var M=30;function x(ve){var ge=ve.characterSet,Gt=ve.getFontWidth,Kt=ve.fontHeight,Ue=ve.buffer,un=ve.maxCanvasWidth,Gn=ve.mapping,mr=Gn===void 0?{}:Gn,gr=ve.xOffset,Qr=gr===void 0?0:gr,xi=ve.yOffset,Ji=xi===void 0?0:xi,fa=0,ba=Qr;Array.from(ge).forEach(function(ro,No){if(!mr[ro]){var ko=Gt(ro,No);ba+M>un&&(ba=0,fa++),mr[ro]={x:ba,y:Ji+fa*M,width:M,height:M,advance:ko},ba+=M}});var oo=Kt+Ue*2;return{mapping:mr,xOffset:ba,yOffset:Ji+fa*oo,canvasHeight:P(Ji+(fa+1)*oo)}}function m(ve,ge,Gt){var Kt=0,Ue=0,un=0,Gn=[],mr={},gr=y(ve),Qr;try{for(gr.s();!(Qr=gr.n()).done;){var xi=Qr.value;if(!mr[xi.id]){var Ji=xi.size;Kt+Ji+ge>Gt&&(S(mr,Gn,Ue),Kt=0,Ue=un+Ue+ge,un=0,Gn=[]),Gn.push({icon:xi,xOffset:Kt}),Kt=Kt+Ji+ge,un=Math.max(un,Ji)}}}catch(ba){gr.e(ba)}finally{gr.f()}Gn.length>0&&S(mr,Gn,Ue);var fa=P(un+Ue+ge);return{mapping:mr,canvasHeight:fa}}function S(ve,ge,Gt){var Kt=y(ge),Ue;try{for(Kt.s();!(Ue=Kt.n()).done;){var un=Ue.value,Gn=un.icon,mr=un.xOffset;ve[Gn.id]=b(b({},Gn),{},{x:mr,y:Gt,image:Gn.image,width:Gn.width,height:Gn.height})}}catch(gr){Kt.e(gr)}finally{Kt.f()}}function P(ve){return Math.pow(2,Math.ceil(Math.log2(ve)))}var A,O,L;function W(ve,ge){var Gt;if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(Gt=F(ve))||ge&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=ve.length?{done:!0}:{done:!1,value:ve[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){Gt=ve[Symbol.iterator]()},n:function(){var Qr=Gt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Gn)throw mr}}}}function F(ve,ge){if(!!ve){if(typeof ve=="string")return K(ve,ge);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return K(ve,ge)}}function K(ve,ge){(ge==null||ge>ve.length)&&(ge=ve.length);for(var Gt=0,Kt=new Array(ge);Gt<ge;Gt++)Kt[Gt]=ve[Gt];return Kt}function V(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function k(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?V(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):V(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}var Z=rt(),X="sans-serif",it="normal",ft=24,pt=3,ut=.25,It=8,Nt=1024,Rt=1,Mt=1,bt=3,At=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function rt(){for(var ve=[],ge=32;ge<128;ge++)ve.push(String.fromCharCode(ge));return ve}function Pt(ve,ge,Gt,Kt){ve.font="".concat(Kt," ").concat(Gt,"px ").concat(ge),ve.fillStyle="black",ve.textBaseline="middle"}function z(ve,ge){for(var Gt=0;Gt<ve.length;Gt++)ge.data[4*Gt+3]=ve[Gt]}var Q=(A=Object(e.injectable)(),A(O=(L=function(){function ve(){n()(this,ve),this.fontAtlas=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new o.b(bt)}return a()(ve,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:X,fontWeight:it,characterSet:Z,fontSize:ft,buffer:pt,sdf:!0,cutoff:ut,radius:It},this.key=""}},{key:"addIconGlyphs",value:function(Gt){var Kt=this;Gt.forEach(function(Ue){Kt.iconFontGlyphs[Ue.name]=Ue.unicode})}},{key:"getGlyph",value:function(Gt){return this.iconFontGlyphs[Gt]?String.fromCharCode(parseInt(this.iconFontGlyphs[Gt],16)):""}},{key:"scale",get:function(){return Mt}},{key:"canvas",get:function(){var Gt=this.cache.get(this.key);return Gt&&Gt.data}},{key:"mapping",get:function(){var Gt=this.cache.get(this.key);return Gt&&Gt.mapping}},{key:"setFontOptions",value:function(Gt){this.fontOptions=k(k({},this.fontOptions),Gt),this.key=this.getKey();var Kt=this.getNewChars(this.key,this.fontOptions.characterSet),Ue=this.cache.get(this.key);if(!(Ue&&Kt.length===0)){var un=this.generateFontAtlas(this.key,Kt,Ue);this.fontAtlas=un,this.cache.set(this.key,un)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(Gt,Kt,Ue){var un=this.fontOptions,Gn=un.fontFamily,mr=un.fontWeight,gr=un.fontSize,Qr=un.buffer,xi=un.sdf,Ji=un.radius,fa=un.cutoff,ba=Ue&&Ue.data;ba||(ba=document.createElement("canvas"),ba.width=Nt);var oo=ba.getContext("2d");Pt(oo,Gn,gr,mr);var ro=x(k({getFontWidth:function(bf){return oo.measureText(bf).width},fontHeight:gr*Mt,buffer:Qr,characterSet:Kt,maxCanvasWidth:Nt},Ue&&{mapping:Ue.mapping,xOffset:Ue.xOffset,yOffset:Ue.yOffset})),No=ro.mapping,ko=ro.canvasHeight,Gs=ro.xOffset,Bs=ro.yOffset,bu=oo.getImageData(0,0,ba.width,ba.height);if(ba.height=ko,oo.putImageData(bu,0,0),Pt(oo,Gn,gr,mr),xi){var Ns=new f.a(gr,Qr,Ji,fa,Gn,mr),ru=oo.getImageData(0,0,Ns.size,Ns.size),io=W(Kt),Eu;try{for(io.s();!(Eu=io.n()).done;){var Ol=Eu.value;z(Ns.draw(Ol),ru),oo.putImageData(ru,No[Ol].x,No[Ol].y)}}catch(hl){io.e(hl)}finally{io.f()}}else{var ps=W(Kt),Vs;try{for(ps.s();!(Vs=ps.n()).done;){var Go=Vs.value;oo.fillText(Go,No[Go].x,No[Go].y+gr*Rt)}}catch(hl){ps.e(hl)}finally{ps.f()}}return{xOffset:Gs,yOffset:Bs,mapping:No,data:ba,width:ba.width,height:ba.height}}},{key:"getKey",value:function(){var Gt=this.fontOptions,Kt=Gt.fontFamily,Ue=Gt.fontWeight,un=Gt.fontSize,Gn=Gt.buffer,mr=Gt.sdf,gr=Gt.radius,Qr=Gt.cutoff;return mr?"".concat(Kt," ").concat(Ue," ").concat(un," ").concat(Gn," ").concat(gr," ").concat(Qr):"".concat(Kt," ").concat(Ue," ").concat(un," ").concat(Gn)}},{key:"getNewChars",value:function(Gt,Kt){var Ue=this.cache.get(Gt);if(!Ue)return Kt;var un=[],Gn=Ue.mapping,mr=new Set(Object.keys(Gn)),gr=new Set(Kt);return gr.forEach(function(Qr){mr.has(Qr)||un.push(Qr)}),un}}]),ve}(),L))||O),gt=R("7W2i"),et=R.n(gt),ot=R("a1gu"),xt=R.n(ot),H=R("Nsbk"),nt=R.n(H),at,q,_t;function yt(ve){var ge=Ft();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Qt=3,ee=1024,Vt=64,$t=(at=Object(e.injectable)(),at(q=(_t=function(ve){et()(Gt,ve);var ge=yt(Gt);function Gt(){var Kt;n()(this,Gt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),Kt.canvasHeight=128,Kt.texture=void 0,Kt.canvas=void 0,Kt.iconData=void 0,Kt.iconMap=void 0,Kt.ctx=void 0,Kt.loadingImageCount=0,Kt}return a()(Gt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(Ue,un){var Gn=this,mr=new Image;if(this.loadingImageCount++,this.hasImage(Ue))throw new Error("Image Id already exists");this.iconData.push({id:Ue,size:Vt}),this.updateIconMap(),this.loadImage(un).then(function(gr){mr=gr;var Qr=Gn.iconData.find(function(xi){return xi.id===Ue});Qr&&(Qr.image=mr,Qr.width=mr.width,Qr.height=mr.height),Gn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Ue){return this.iconMap.hasOwnProperty(Ue)}},{key:"removeImage",value:function(Ue){this.hasImage(Ue)&&(this.iconData=this.iconData.filter(function(un){return un.id!==Ue}),delete this.iconMap[Ue],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Ue=this;this.canvas.width=ee,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(un){var Gn=Ue.iconMap[un],mr=Gn.x,gr=Gn.y,Qr=Gn.image,xi=Gn.width,Ji=xi===void 0?64:xi,fa=Gn.height,ba=fa===void 0?64:fa,oo=Math.max(Ji,ba),ro=oo/Vt,No=ba/ro,ko=Ji/ro;Qr&&Ue.ctx.drawImage(Qr,mr+(Vt-ko)/2,gr+(Vt-No)/2,ko,No)})}},{key:"updateIconMap",value:function(){var Ue=m(this.iconData,Qt,ee),un=Ue.mapping,Gn=Ue.canvasHeight;this.iconMap=un,this.canvasHeight=Gn}},{key:"loadImage",value:function(Ue){return new Promise(function(un,Gn){if(Ue instanceof HTMLImageElement){un(Ue);return}var mr=new Image;mr.crossOrigin="anonymous",mr.onload=function(){un(mr)},mr.onerror=function(){Gn(new Error("Could not load image at "+Ue))},mr.src=Ue instanceof File?URL.createObjectURL(Ue):Ue})}}]),Gt}(E.EventEmitter),_t))||q),Me=R("J4zp"),me=R.n(Me),le=R("IOcx"),be,ze,Xe,Sn=(be=Object(e.injectable)(),be(ze=(Xe=function(){function ve(){n()(this,ve),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return a()(ve,[{key:"init",value:function(){}},{key:"update",value:function(Gt){this.viewport=Gt,this.viewMatrixInverse=le.b.invert(le.b.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Gt=this.viewport.getCenter(),Kt=me()(Gt,2),Ue=Kt[0],un=Kt[1];return[Ue,un]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Gt,Kt){return this.viewport.projectFlat(Gt,Kt)}},{key:"setViewProjectionMatrix",value:function(Gt){this.overridedViewProjectionMatrix=Gt}},{key:"jitterProjectionMatrix",value:function(Gt,Kt){var Ue=le.b.fromTranslation(le.b.create(),[Gt,Kt,0]);this.jitteredProjectionMatrix=le.b.multiply(le.b.create(),Ue,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=le.b.multiply(le.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),ve}(),Xe))||ze),Xn,Hn,nn;function en(ve,ge){var Gt;if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(Gt=An(ve))||ge&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=ve.length?{done:!0}:{done:!1,value:ve[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){Gt=ve[Symbol.iterator]()},n:function(){var Qr=Gt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Gn)throw mr}}}}function An(ve,ge){if(!!ve){if(typeof ve=="string")return Nn(ve,ge);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return Nn(ve,ge)}}function Nn(ve,ge){(ge==null||ge>ve.length)&&(ge=ve.length);for(var Gt=0,Kt=new Array(ge);Gt<ge;Gt++)Kt[Gt]=ve[Gt];return Kt}var fr=(Xn=Object(e.injectable)(),Xn(Hn=(nn=function(){function ve(){n()(this,ve),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return a()(ve,[{key:"init",value:function(Gt,Kt){this.container=Gt.container,this.scene=Kt,this.mapsService=Kt.get(s.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(Gt,Kt){var Ue=Kt.get(s.a.IMapService);Ue.map?(Gt.addTo(this.scene),this.controls.push(Gt)):this.unAddControls.push(Gt)}},{key:"getControlByName",value:function(Gt){return this.controls.find(function(Kt){return Kt.controlOption.name===Gt})}},{key:"removeControl",value:function(Gt){var Kt=this.controls.indexOf(Gt);return Kt>-1&&this.controls.splice(Kt,1),Gt.remove(),this}},{key:"addControls",value:function(){var Gt=this;this.unAddControls.forEach(function(Kt){Kt.addTo(Gt.scene),Gt.controls.push(Kt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Gt=en(this.controls),Kt;try{for(Gt.s();!(Kt=Gt.n()).done;){var Ue=Kt.value;Ue.remove()}}catch(un){Gt.e(un)}finally{Gt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Gt=this.controlCorners={},Kt="l7-",Ue=this.controlContainer=o.a.create("div",Kt+"control-container",this.container);function un(Gn,mr){var gr=Kt+Gn+" "+Kt+mr;Gt[Gn+mr]=o.a.create("div",gr,Ue)}un("top","left"),un("top","right"),un("bottom","left"),un("bottom","right")}},{key:"clearControlPos",value:function(){for(var Gt in this.controlCorners)this.controlCorners[Gt]&&o.a.remove(this.controlCorners[Gt]);this.controlContainer&&o.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),ve}(),nn))||Hn),hi,Ce,Te,Jt=(hi=Object(e.injectable)(),hi(Ce=(Te=function(){function ve(){n()(this,ve),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return a()(ve,[{key:"addMarkerLayer",value:function(Gt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Gt),Gt.addTo(this.scene)):this.unAddMarkerLayers.push(Gt)}},{key:"removeMarkerLayer",value:function(Gt){Gt.destroy(),this.markerLayers.indexOf(Gt);var Kt=this.markerLayers.indexOf(Gt);Kt>-1&&this.markerLayers.splice(Kt,1)}},{key:"addMarker",value:function(Gt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Gt),Gt.addTo(this.scene)):this.unAddMarkers.push(Gt)}},{key:"addMarkers",value:function(){var Gt=this;this.unAddMarkers.forEach(function(Kt){Kt.addTo(Gt.scene),Gt.markers.push(Kt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Gt=this;this.unAddMarkerLayers.forEach(function(Kt){Gt.markerLayers.push(Kt),Kt.addTo(Gt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Gt){Gt.remove(),this.markers.indexOf(Gt);var Kt=this.markers.indexOf(Gt);Kt>-1&&this.markers.splice(Kt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Gt){this.scene=Gt,this.mapsService=Gt.get(s.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Gt){Gt.remove()}),this.markers=[],this.markerLayers.forEach(function(Gt){Gt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Gt){Gt.destroy()}}]),ve}(),Te))||Ce),pe,Wt,ie,Ae=(pe=Object(e.injectable)(),pe(Wt=(ie=function(){function ve(){n()(this,ve),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return a()(ve,[{key:"removePopup",value:function(Gt){Gt.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(Gt){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(Gt.addTo(this.scene),this.popup=Gt):this.unAddPopup=Gt}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(Gt){this.scene=Gt,this.mapsService=Gt.get(s.a.IMapService)}}]),ve}(),ie))||Wt),ue=R("QkVN"),xe=R.n(ue),$e={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Fn=$e,or,En,Pn;function br(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function Pr(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?br(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):br(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}var ln={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Cr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},Ar=(or=Object(e.injectable)(),or(En=(Pn=function(){function ve(){n()(this,ve),this.sceneConfigCache={},this.layerConfigCache={}}return a()(ve,[{key:"getSceneConfig",value:function(Gt){return this.sceneConfigCache[Gt]}},{key:"getSceneWarninfo",value:function(Gt){return Fn[Gt]}},{key:"setSceneConfig",value:function(Gt,Kt){this.sceneConfigCache[Gt]=Pr(Pr({},ln),Kt)}},{key:"getLayerConfig",value:function(Gt){return this.layerConfigCache[Gt]}},{key:"setLayerConfig",value:function(Gt,Kt,Ue){this.layerConfigCache[Kt]=Pr({},xe()({},this.sceneConfigCache[Gt],Cr,Ue))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),ve}(),Pn))||En),Be=R("yG8O"),We=R.n(Be),Ye=R("U+yc"),fn=R.n(Ye),gn=R("1ABj"),Bn=Math.PI/180,bn=512,Ln=4003e4;function ir(ve){var ge=ve.latitude,Gt=ge===void 0?0:ge,Kt=ve.zoom,Ue=Kt===void 0?0:Kt,un=ve.scale,Gn=ve.highPrecision,mr=Gn===void 0?!1:Gn,gr=ve.flipY,Qr=gr===void 0?!1:gr;un=un!==void 0?un:Math.pow(2,Ue);var xi={},Ji=bn*un,fa=Math.cos(Gt*Bn),ba=Ji/360,oo=ba/fa,ro=Ji/Ln/fa;if(xi.pixelsPerMeter=[ro,-ro,ro],xi.metersPerPixel=[1/ro,-1/ro,1/ro],xi.pixelsPerDegree=[ba,-oo,ro],xi.degreesPerPixel=[1/ba,-1/oo,1/ro],mr){var No=Bn*Math.tan(Gt*Bn)/fa,ko=ba*No/2,Gs=Ji/Ln*No,Bs=Gs/oo*ro;xi.pixelsPerDegree2=[0,-ko,Gs],xi.pixelsPerMeter2=[Bs,0,Bs],Qr&&(xi.pixelsPerDegree2[1]=-xi.pixelsPerDegree2[1],xi.pixelsPerMeter2[1]=-xi.pixelsPerMeter2[1])}return Qr&&(xi.pixelsPerMeter[1]=-xi.pixelsPerMeter[1],xi.metersPerPixel[1]=-xi.metersPerPixel[1],xi.pixelsPerDegree[1]=-xi.pixelsPerDegree[1],xi.degreesPerPixel[1]=-xi.degreesPerPixel[1]),xi}var Yn=R("HthE"),_n,Dr,vr,zr,Ai,Aa,ka=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],eo=(_n=Object(e.injectable)(),Dr=Object(e.inject)(s.a.ICameraService),_n(vr=(zr=(Aa=function(){function ve(){n()(this,ve),this.needRefresh=!0,We()(this,"cameraService",Ai,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return a()(ve,[{key:"refresh",value:function(){var Gt=this.cameraService.getZoom(),Kt=this.cameraService.getZoomScale(),Ue=this.cameraService.getCenter(),un=ir({latitude:Ue[1],zoom:Gt}),Gn=un.pixelsPerMeter,mr=un.pixelsPerDegree;this.viewportCenter=Ue,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Gn,this.pixelsPerDegree=mr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Yn.a.LNGLAT||this.coordinateSystem===Yn.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Yn.a.LNGLAT_OFFSET?this.calculateLnglatOffset(Ue,Gt):this.coordinateSystem===Yn.a.P20_OFFSET&&this.calculateLnglatOffset(Ue,Gt,Kt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Gt){this.coordinateSystem=Gt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Gt,Kt,Ue,un){var Gn=ir({latitude:Gt[1],zoom:Kt,scale:Ue,flipY:un,highPrecision:!0}),mr=Gn.pixelsPerMeter,gr=Gn.pixelsPerDegree,Qr=Gn.pixelsPerDegree2,xi=this.cameraService.getViewMatrix(),Ji=this.cameraService.getProjectionMatrix(),fa=le.b.multiply([],Ji,xi),ba=this.cameraService.projectFlat([Math.fround(Gt[0]),Math.fround(Gt[1])],Math.pow(2,Kt));this.viewportCenterProjection=le.e.transformMat4([],[ba[0],ba[1],0,1],fa),xi=this.cameraService.getViewMatrixUncentered()||xi,fa=le.b.multiply([],Ji,xi),fa=le.b.multiply([],fa,ka),this.cameraService.setViewProjectionMatrix(fa),this.pixelsPerMeter=mr,this.pixelsPerDegree=gr,this.pixelsPerDegree2=Qr}}]),ve}(),Aa),Ai=fn()(zr.prototype,"cameraService",[Dr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr))||vr),Zo=R("PJYZ"),Ea=R.n(Zo),so=R("yLV6"),Ko=R.n(so),no=R("V1cb"),So,cs,wa,zo,Ro,fu,Xo,au;function $s(ve){var ge=Ne();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Ne(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var oe={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},Ht=(So=Object(e.injectable)(),cs=Object(e.inject)(s.a.IMapService),wa=Object(e.inject)(s.a.ILogService),So(zo=(Ro=(au=function(ve){et()(Gt,ve);var ge=$s(Gt);function Gt(){var Kt;n()(this,Gt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"mapService",fu,Ea()(Kt)),We()(Kt,"logger",Xo,Ea()(Kt)),Kt.hammertime=void 0,Kt.lastClickTime=0,Kt.lastClickXY=[-1,-1],Kt.clickTimer=void 0,Kt.$containter=void 0,Kt.onDrag=function(mr){var gr=Kt.interactionEvent(mr);gr.type=oe[gr.type],Kt.emit(no.a.Drag,gr)},Kt.onHammer=function(mr){mr.srcEvent.stopPropagation();var gr=Kt.interactionEvent(mr);Kt.emit(no.a.Hover,gr)},Kt.onTouch=function(mr){var gr=mr.touches[0];Kt.onHover({x:gr.pageX,y:gr.pageY,type:"touch"})},Kt.onHover=function(mr){var gr=mr.clientX,Qr=mr.clientY,xi=gr,Ji=Qr,fa=mr.type,ba=Kt.mapService.getMapContainer();if(ba){var oo=ba.getBoundingClientRect(),ro=oo.top,No=oo.left;xi=xi-No-ba.clientLeft,Ji=Ji-ro-ba.clientTop}var ko=Kt.mapService.containerToLngLat([xi,Ji]);if(fa==="click"){if("ontouchstart"in document.documentElement)return;Kt.isDoubleTap(xi,Ji,ko);return}if(fa==="touch"){Kt.isDoubleTap(xi,Ji,ko);return}fa!=="click"&&fa!=="dblclick"&&Kt.emit(no.a.Hover,{x:xi,y:Ji,lngLat:ko,type:fa,target:mr})},Kt}return a()(Gt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(no.a.Hover)}},{key:"triggerHover",value:function(Ue){var un=Ue.x,Gn=Ue.y;this.emit(no.a.Hover,{x:un,y:Gn})}},{key:"triggerSelect",value:function(Ue){this.emit(no.a.Select,{featureId:Ue})}},{key:"triggerActive",value:function(Ue){this.emit(no.a.Active,{featureId:Ue})}},{key:"addEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();if(Ue){var un=new Ko.a.Manager(Ue);un.add(new Ko.a.Tap({event:"dblclick",taps:2})),un.add(new Ko.a.Tap({event:"click"})),un.add(new Ko.a.Pan({threshold:0,pointers:0})),un.add(new Ko.a.Press({})),un.on("dblclick click",this.onHammer),un.on("panstart panmove panend pancancel",this.onDrag),Ue.addEventListener("mousemove",this.onHover),Ue.addEventListener("mousedown",this.onHover,!0),Ue.addEventListener("mouseup",this.onHover),Ue.addEventListener("contextmenu",this.onHover),this.hammertime=un,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();Ue&&(Ue.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Ue.removeEventListener("mousedown",this.onHover),Ue.removeEventListener("mouseup",this.onHover),Ue.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(Ue){var un=Ue.type,Gn=Ue.pointerType,mr,gr;Gn==="touch"?(gr=Math.floor(Ue.pointers[0].clientY),mr=Math.floor(Ue.pointers[0].clientX)):(gr=Math.floor(Ue.srcEvent.y),mr=Math.floor(Ue.srcEvent.x));var Qr=this.mapService.getMapContainer();if(Qr){var xi=Qr.getBoundingClientRect(),Ji=xi.top,fa=xi.left;mr-=fa,gr-=Ji}var ba=this.mapService.containerToLngLat([mr,gr]);return{x:mr,y:gr,lngLat:ba,type:un,target:Ue.srcEvent}}},{key:"isDoubleTap",value:function(Ue,un,Gn){var mr=this,gr=new Date().getTime(),Qr="click";gr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Ue)<10&&Math.abs(this.lastClickXY[1]-un)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Qr="dblclick",this.emit(no.a.Hover,{x:Ue,y:un,lngLat:Gn,type:Qr})):(this.lastClickTime=gr,this.lastClickXY=[Ue,un],this.clickTimer=setTimeout(function(){Qr="click",mr.emit(no.a.Hover,{x:Ue,y:un,lngLat:Gn,type:Qr})},400))}}]),Gt}(T.a),au),fu=fn()(Ro.prototype,"mapService",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xo=fn()(Ro.prototype,"logger",[wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro))||zo),Ee=R("yXPU"),an=R.n(Ee),zn=R("o0o1"),qn=R.n(zn),Un=R("o+pz"),Jr,Si,Ci,ki,oa,Xa,ma,mo,Ba,ao,yo,Ja;function _o(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function ts(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?_o(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):_o(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}var Do=(Jr=Object(e.injectable)(),Si=Object(e.inject)(s.a.IRendererService),Ci=Object(e.inject)(s.a.IGlobalConfigService),ki=Object(e.inject)(s.a.IInteractionService),oa=Object(e.inject)(s.a.ILayerService),Jr(Xa=(ma=(Ja=function(){function ve(){var ge=this;n()(this,ve),We()(this,"rendererService",mo,this),We()(this,"configService",Ba,this),We()(this,"interactionService",ao,this),We()(this,"layerService",yo,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(Gt,Kt){var Ue,un=Kt.x,Gn=Kt.y,mr=Kt.lngLat,gr=Kt.type,Qr=Kt.target,xi=!1,Ji=ge.rendererService,fa=Ji.getViewportSize,ba=Ji.readPixels,oo=Ji.getContainer,ro=oo().getBoundingClientRect(),No=ro.width,ko=ro.height;No*=o.a.DPR,ko*=o.a.DPR;var Gs=Gt.getLayerConfig(),Bs=Gs.enableHighlight,bu=Gs.enableSelect,Ns=un*o.a.DPR,ru=Gn*o.a.DPR;if(Ns>No-1*o.a.DPR||Ns<0||ru>ko-1*o.a.DPR||ru<0)return!1;var io;if(io=ba({x:Math.floor(Ns/ge.pickBufferScale),y:Math.floor((ko-(Gn+1)*o.a.DPR)/ge.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ge.pickingFBO}),io[0]!==0||io[1]!==0||io[2]!==0){var Eu=Object(o.k)(io),Ol=Gt.getSource().getFeatureById(Eu);Eu!==Gt.getCurrentPickId()&&gr==="mousemove"&&(gr="mouseenter");var ps={x:un,y:Gn,type:gr,lngLat:mr,featureId:Eu,feature:Ol,target:Qr};Ol&&(xi=!0,Gt.setCurrentPickId(Eu),ge.triggerHoverOnLayer(Gt,ps))}else{var Vs={x:un,y:Gn,lngLat:mr,type:Gt.getCurrentPickId()!==null&&gr==="mousemove"?"mouseout":"un"+gr,featureId:null,target:Qr,feature:null};ge.triggerHoverOnLayer(Gt,ts(ts({},Vs),{},{type:"unpick"})),ge.triggerHoverOnLayer(Gt,Vs),Gt.setCurrentPickId(null)}if(Bs&&ge.highlightPickedFeature(Gt,io),bu&&gr==="click"&&((Ue=io)===null||Ue===void 0?void 0:Ue.toString())!==[0,0,0,0].toString()){var Go=Object(o.k)(io);Gt.getCurrentSelectedId()===null||Go!==Gt.getCurrentSelectedId()?(ge.selectFeature(Gt,io),Gt.setCurrentSelectedId(Go)):(ge.selectFeature(Gt,new Uint8Array([0,0,0,0])),Gt.setCurrentSelectedId(null))}return xi}}return a()(ve,[{key:"init",value:function(Gt){var Kt=this.rendererService,Ue=Kt.createTexture2D,un=Kt.createFramebuffer,Gn=Kt.getViewportSize,mr=Kt.getContainer,gr=mr().getBoundingClientRect(),Qr=gr.width,xi=gr.height;Qr*=o.a.DPR,xi*=o.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(Gt).pickBufferScale||1,this.pickingFBO=un({color:Ue({width:Math.round(Qr/this.pickBufferScale),height:Math.round(xi/this.pickBufferScale),wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})}),this.interactionService.on(no.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var ge=an()(qn.a.mark(function Kt(Ue,un,Gn){var mr=this,gr,Qr,xi,Ji;return qn.a.wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:gr=this.rendererService,Qr=gr.useFramebuffer,xi=gr.clear,Ji=gr.getContainer,this.resizePickingFBO(),Qr(this.pickingFBO,function(){xi({framebuffer:mr.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Ue.hooks.beforePickingEncode.call(),Ue.renderModels(),Ue.hooks.afterPickingEncode.call();var oo=mr.pickBox(Ue,un);Gn(oo)});case 3:case"end":return ba.stop()}},Kt,this)}));function Gt(Kt,Ue,un){return ge.apply(this,arguments)}return Gt}()},{key:"pickBox",value:function(Gt,Kt){var Ue=this,un=Kt.map(function(Vs){var Go=Vs<0?0:Vs;return Math.floor(Go*o.a.DPR/Ue.pickBufferScale)}),Gn=me()(un,4),mr=Gn[0],gr=Gn[1],Qr=Gn[2],xi=Gn[3],Ji=this.rendererService,fa=Ji.getViewportSize,ba=Ji.readPixels,oo=Ji.getContainer,ro=oo().getBoundingClientRect(),No=ro.width,ko=ro.height;if(No*=o.a.DPR,ko*=o.a.DPR,mr>(No-1)*o.a.DPR/this.pickBufferScale||Qr<0||gr>(ko-1)*o.a.DPR/this.pickBufferScale||xi<0)return[];var Gs,Bs=Math.min(No/this.pickBufferScale,Qr)-mr,bu=Math.min(ko/this.pickBufferScale,xi)-gr;Gs=ba({x:mr,y:Math.floor(ko/this.pickBufferScale-(xi+1)),width:Bs,height:bu,data:new Uint8Array(Bs*bu*4),framebuffer:this.pickingFBO});for(var Ns=[],ru={},io=0;io<Gs.length/4;io=io+1){var Eu=Gs.slice(io*4,io*4+4),Ol=Object(o.k)(Eu);if(Ol!==-1&&!ru[Ol]){var ps=Gt.getSource().getFeatureById(Ol);Ns.push(ps),ru[Ol]=!0}}return Ns}},{key:"pickingAllLayer",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){return qn.a.wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){Gn.next=2;break}return Gn.abrupt("return");case 2:return this.alreadyInPicking=!0,Gn.next=5,this.pickingLayers(Ue);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Gn.stop()}},Kt,this)}));function Gt(Kt){return ge.apply(this,arguments)}return Gt}()},{key:"resizePickingFBO",value:function(){var Gt=this.rendererService.getContainer,Kt=Gt().getBoundingClientRect(),Ue=Kt.width,un=Kt.height;Ue*=o.a.DPR,un*=o.a.DPR,(this.width!==Ue||this.height!==un)&&(this.pickingFBO.resize({width:Math.round(Ue/this.pickBufferScale),height:Math.round(un/this.pickBufferScale)}),this.width=Ue,this.height=un)}},{key:"pickingLayers",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){var un=this,Gn,mr,gr,Qr,xi;return qn.a.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:Gn=this.rendererService,mr=Gn.getViewportSize,gr=Gn.useFramebuffer,Qr=Gn.clear,xi=Gn.getContainer,this.resizePickingFBO(),gr(this.pickingFBO,function(){var ba=un.layerService.getLayers();ba.filter(function(oo){return oo.needPick(Ue.type)}).reverse().some(function(oo){Qr({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),oo.hooks.beforePickingEncode.call(),oo.renderModels(),oo.hooks.afterPickingEncode.call();var ro=un.pickFromPickingFBO(oo,Ue);return ro&&!oo.getLayerConfig().enablePropagation})});case 3:case"end":return fa.stop()}},Kt,this)}));function Gt(Kt){return ge.apply(this,arguments)}return Gt}()},{key:"triggerHoverOnLayer",value:function(Gt,Kt){Gt.emit(Kt.type,Kt)}},{key:"highlightPickedFeature",value:function(Gt,Kt){var Ue=me()(Kt,3),un=Ue[0],Gn=Ue[1],mr=Ue[2];Gt.hooks.beforeHighlight.call([un,Gn,mr])}},{key:"selectFeature",value:function(Gt,Kt){var Ue=me()(Kt,3),un=Ue[0],Gn=Ue[1],mr=Ue[2];Gt.hooks.beforeSelect.call([un,Gn,mr])}}]),ve}(),Ja),mo=fn()(ma.prototype,"rendererService",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ba=fn()(ma.prototype,"configService",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao=fn()(ma.prototype,"interactionService",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yo=fn()(ma.prototype,"layerService",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma))||Xa),xs=function(){function ve(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n()(this,ve),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=ge}return a()(ve,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Gt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Kt=(typeof performance=="undefined"?Date:performance).now();Gt=(Kt-this.oldTime)/1e3,this.oldTime=Kt,this.elapsedTime+=Gt}return Gt}}]),ve}(),Mo,$a,Ms,as,Ca,mn,hr,Gr,Ui=(Mo=Object(e.injectable)(),$a=Object(e.inject)(s.a.IRendererService),Ms=Object(e.inject)(s.a.IGlobalConfigService),Mo(as=(Ca=(Gr=function(){function ve(){n()(this,ve),this.clock=new xs,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,We()(this,"renderService",mn,this),We()(this,"configService",hr,this)}return a()(ve,[{key:"add",value:function(Gt){this.sceneInited&&Gt.init(),this.layers.push(Gt)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(Gt){Gt.inited||Gt.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Gt){return this.layers.find(function(Kt){return Kt.id===Gt})}},{key:"getLayerByName",value:function(Gt){return this.layers.find(function(Kt){return Kt.name===Gt})}},{key:"remove",value:function(Gt){var Kt=this.layers.indexOf(Gt);Kt>-1&&this.layers.splice(Kt,1),Gt.emit("remove",null),Gt.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(Gt){return Gt.inited}).filter(function(Gt){return Gt.isVisible()}).forEach(function(Gt){Gt.hooks.beforeRenderData.call(),Gt.hooks.beforeRender.call(),Gt.render(),Gt.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(Gt,Kt){return Gt.zIndex-Kt.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(Gt){return Gt.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),ve}(),Gr),mn=fn()(Ca.prototype,"renderService",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr=fn()(Ca.prototype,"configService",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca))||as),Ka=R("QILm"),xo=R.n(Ka),vo=R("RIqP"),qi=R.n(vo),Qa=R("J2iB"),bs=R.n(Qa),Es=function(){function ve(ge){var Gt=this;n()(this,ve),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:Infinity},this.vertexAttribute=void 0,this.defaultCallback=function(Kt){if(Kt.length===0){var Ue;return((Ue=Gt.scale)===null||Ue===void 0?void 0:Ue.defaultValues)||[]}return Kt.map(function(un,Gn){var mr,gr=(mr=Gt.scale)===null||mr===void 0?void 0:mr.scalers[Gn].func,Qr=gr(un);return Qr})},this.setProps(ge)}return a()(ve,[{key:"setProps",value:function(Gt){Object.assign(this,Gt)}},{key:"mapping",value:function(Gt){var Kt;if((Kt=this.scale)!==null&&Kt!==void 0&&Kt.callback){var Ue,un=(Ue=this.scale)===null||Ue===void 0?void 0:Ue.callback.apply(Ue,qi()(Gt));if(!bs()(un))return[un]}return this.defaultCallback(Gt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),ve}(),Ga,Pu,Uo,Ps,Qs,fs,hs;function os(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function ds(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?os(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):os(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function Ts(ve){return new Promise(function(ge){return setTimeout(ge,ve)})}var Ou=(Ga={},r()(Ga,Un.a.FLOAT,4),r()(Ga,Un.a.UNSIGNED_BYTE,1),r()(Ga,Un.a.UNSIGNED_SHORT,2),Ga),Uu=(Pu=Object(e.injectable)(),Uo=Object(e.inject)(s.a.IRendererService),Pu(Ps=(Qs=(hs=function(){function ve(){n()(this,ve),this.attributesAndIndices=void 0,We()(this,"rendererService",fs,this),this.attributes=[],this.triangulation=void 0,this.featureLayout={sizePerElement:0,elements:[]}}return a()(ve,[{key:"registerStyleAttribute",value:function(Gt){var Kt=this.getLayerStyleAttribute(Gt.name||"");return Kt?Kt.setProps(Gt):(Kt=new Es(Gt),this.attributes.push(Kt)),Kt}},{key:"updateStyleAttribute",value:function(Gt,Kt,Ue){var un=this.getLayerStyleAttribute(Gt);un||(un=this.registerStyleAttribute(ds(ds({},Kt),{},{name:Gt})));var Gn=Kt.scale;Gn&&un&&(un.scale=Gn,un.needRescale=!0,un.needRemapping=!0,un.needRegenerateVertices=!0,Ue&&Ue.featureRange&&(un.featureRange=Ue.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Gt){return this.attributes.find(function(Kt){return Kt.name===Gt})}},{key:"getLayerAttributeScale",value:function(Gt){var Kt,Ue=this.getLayerStyleAttribute(Gt),un=Ue==null||(Kt=Ue.scale)===null||Kt===void 0?void 0:Kt.scalers;return un&&un[0]?un[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Gt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,un=arguments.length>3?arguments[3]:void 0,Gn=this.attributes.find(function(bu){return bu.name===Gt});if(Gn&&Gn.descriptor){var mr=Gn.descriptor,gr=mr.update,Qr=mr.buffer,xi=mr.size,Ji=xi===void 0?0:xi,fa=Ou[Qr.type||Un.a.FLOAT];if(gr){var ba=this.featureLayout,oo=ba.elements,ro=ba.sizePerElement,No=oo.slice(Ue,un);if(!No.length)return;var ko=No[0].offset,Gs=ko*Ji*fa,Bs=No.map(function(bu,Ns){for(var ru=bu.featureIdx,io=bu.vertices,Eu=bu.normals,Ol=io.length/ro,ps=[],Vs=0;Vs<Ol;Vs++){var Go=Eu?Eu.slice(Vs*3,Vs*3+3):[];ps.push.apply(ps,qi()(gr(Kt[ru],ru,io.slice(Vs*ro,Vs*ro+ro),Ns,Go)))}return ps}).reduce(function(bu,Ns){return bu.push.apply(bu,qi()(Ns)),bu},[]);Gn.vertexAttribute.updateBuffer({data:Bs,offset:Gs})}}}},{key:"createAttributesAndIndices",value:function(Gt,Kt){var Ue=this;this.featureLayout={sizePerElement:0,elements:[]},Kt&&(this.triangulation=Kt);var un=this.attributes.map(function(ko){return ko.resetDescriptor(),ko.descriptor}),Gn=0,mr=[],gr=[],Qr=[],xi=3;Gt.forEach(function(ko,Gs){var Bs=Ue.triangulation(ko),bu=Bs.indices,Ns=Bs.vertices,ru=Bs.normals,io=Bs.size;bu.forEach(function(Vs){gr.push(Vs+Gn)}),xi=io;var Eu=Ns.length/io;Ue.featureLayout.sizePerElement=xi,Ue.featureLayout.elements.push({featureIdx:Gs,vertices:Ns,normals:ru,offset:Gn}),Gn+=Eu;for(var Ol=function(Go){var hl=(ru==null?void 0:ru.slice(Go*3,Go*3+3))||[],bf=Ns.slice(Go*io,Go*io+io);un.forEach(function(Xc,mh){if(Xc&&Xc.update){var wf;(wf=Xc.buffer.data).push.apply(wf,qi()(Xc.update(ko,Gs,bf,Go,hl)))}})},ps=0;ps<Eu;ps++)Ol(ps)});var Ji=this.rendererService,fa=Ji.createAttribute,ba=Ji.createBuffer,oo=Ji.createElements,ro={};un.forEach(function(ko,Gs){if(ko){var Bs=ko.buffer,bu=ko.update,Ns=ko.name,ru=xo()(ko,["buffer","update","name"]),io=fa(ds({buffer:ba(Bs)},ru));ro[ko.name||""]=io,Ue.attributes[Gs].vertexAttribute=io}});var No=oo({data:gr,type:Un.a.UNSIGNED_INT,count:gr.length});return this.attributesAndIndices={attributes:ro,elements:No},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var Gt;this.attributes.forEach(function(Kt){Kt.vertexAttribute&&Kt.vertexAttribute.destroy()}),(Gt=this.attributesAndIndices)===null||Gt===void 0||Gt.elements.destroy(),this.attributes=[]}}]),ve}(),hs),fs=fn()(Qs.prototype,"rendererService",[Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs))||Ps),uo=R("U8pU"),Fs=R("KQm4"),ku=R("rePB"),ul=R("1OyB"),ll=R("vuIU"),Qu=R("5ku3"),To=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",La=Object(Qu.a)();function ya(ve){try{var ge=window[ve],Gt="__storage_test__";return ge.setItem(Gt,Gt),ge.removeItem(Gt),ge}catch(Kt){return null}}var wo=function(){function ve(ge,Gt){var Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Object(ul.a)(this,ve),this.storage=ya(Kt),this.id=ge,this.config={},Object.assign(this.config,Gt),this._loadConfiguration()}return Object(ll.a)(ve,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(Gt){return this.config={},this.updateConfiguration(Gt)}},{key:"updateConfiguration",value:function(Gt){if(Object.assign(this.config,Gt),this.storage){var Kt=JSON.stringify(this.config);this.storage.setItem(this.id,Kt)}return this}},{key:"_loadConfiguration",value:function(){var Gt={};if(this.storage){var Kt=this.storage.getItem(this.id);Gt=Kt?JSON.parse(Kt):{}}return Object.assign(this.config,Gt),this}}]),ve}();function pu(ve){var ge;return ve<10?ge="".concat(ve.toFixed(2),"ms"):ve<100?ge="".concat(ve.toFixed(1),"ms"):ve<1e3?ge="".concat(ve.toFixed(0),"ms"):ge="".concat((ve/1e3).toFixed(2),"s"),ge}function El(ve){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Gt=Math.max(ge-ve.length,0);return"".concat(" ".repeat(Gt)).concat(ve)}function zs(ve){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Gt=Math.max(ge-ve.length,0);return"".concat(ve).concat(" ".repeat(Gt))}function Ss(ve){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=1e-16,Kt=ge.isInteger,Ue=Kt===void 0?!1:Kt;if(Array.isArray(ve)||ArrayBuffer.isView(ve))return ou(ve,ge);if(!Number.isFinite(ve))return String(ve);if(Math.abs(ve)<Gt)return Ue?"0":"0.";if(Ue||Math.abs(ve)>100&&Math.abs(ve)<1e4)return ve.toFixed(0);var un=ve.toPrecision(2),Gn=un.indexOf(".0");return Gn===un.length-2?un.slice(0,-1):un}function ou(ve,ge){for(var Gt=ge.maxElts,Kt=Gt===void 0?16:Gt,Ue=ge.size,un=Ue===void 0?1:Ue,Gn="[",mr=0;mr<ve.length&&mr<Kt;++mr)mr>0&&(Gn+=",".concat(mr%un==0?" ":"")),Gn+=Ss(ve[mr],ge);var gr=ve.length>Kt?"...":"]";return"".concat(Gn).concat(gr)}function qs(ve,ge,Gt){var Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,Ue=ve.src.replace(/\(/g,"%28").replace(/\)/g,"%29");ve.width>Kt&&(Gt=Math.min(Gt,Kt/ve.width));var un=ve.width*Gt,Gn=ve.height*Gt,mr=["font-size:1px;","padding:".concat(Math.floor(Gn/2),"px ").concat(Math.floor(un/2),"px;"),"line-height:".concat(Gn,"px;"),"background:url(".concat(Ue,");"),"background-size:".concat(un,"px ").concat(Gn,"px;"),"color:transparent;"].join("");return["".concat(ge," %c+"),mr]}var Ls={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function qu(ve){return typeof ve=="string"?Ls[ve.toUpperCase()]||Ls.WHITE:ve}function su(ve,ge,Gt){return!La&&typeof ve=="string"&&(ge&&(ge=qu(ge),ve="[".concat(ge,"m").concat(ve,"[39m")),Gt&&(ge=qu(Gt),ve="[".concat(Gt+10,"m").concat(ve,"[49m"))),ve}function Wa(ve){if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(ve=Sl(ve))){var ge=0,Gt=function(){};return{s:Gt,n:function(){return ge>=ve.length?{done:!0}:{done:!1,value:ve[ge++]}},e:function(gr){throw gr},f:Gt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kt,Ue=!0,un=!1,Gn;return{s:function(){Kt=ve[Symbol.iterator]()},n:function(){var gr=Kt.next();return Ue=gr.done,gr},e:function(gr){un=!0,Gn=gr},f:function(){try{!Ue&&Kt.return!=null&&Kt.return()}finally{if(un)throw Gn}}}}function Sl(ve,ge){if(!!ve){if(typeof ve=="string")return Ql(ve,ge);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(Gt);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return Ql(ve,ge)}}function Ql(ve,ge){(ge==null||ge>ve.length)&&(ge=ve.length);for(var Gt=0,Kt=new Array(ge);Gt<ge;Gt++)Kt[Gt]=ve[Gt];return Kt}function _l(ve){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],Gt=Object.getPrototypeOf(ve),Kt=Object.getOwnPropertyNames(Gt),Ue=Wa(Kt),un;try{var Gn=function(){var gr=un.value;typeof ve[gr]=="function"&&(ge.find(function(Qr){return gr===Qr})||(ve[gr]=ve[gr].bind(ve)))};for(Ue.s();!(un=Ue.n()).done;)Gn()}catch(mr){Ue.e(mr)}finally{Ue.f()}}function ql(ve,ge){if(!ve)throw new Error(ge||"Assertion failed")}var Gu=R("K9nA");function Ha(){var ve;if(La&&Gu.b.performance)ve=Gu.b.performance.now();else if(Gu.a.hrtime){var ge=Gu.a.hrtime();ve=ge[0]*1e3+ge[1]/1e6}else ve=Date.now();return ve}var uu={debug:La&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ml={enabled:!0,level:0};function vs(){}var wu={},gu={once:!0};function Vu(ve){for(var ge in ve)for(var Gt in ve[ge])return Gt||"untitled";return"empty"}var Ws=function(){function ve(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ge.id;Object(ul.a)(this,ve),this.id=Gt,this.VERSION=To,this._startTs=Ha(),this._deltaTs=Ha(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new wo("__probe-".concat(this.id,"__"),Ml),this.userData={},this.timeStamp("".concat(this.id," started")),_l(this),Object.seal(this)}return Object(ll.a)(ve,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((Ha()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Ha()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:Gt}),this}},{key:"setLevel",value:function(Gt){return this._storage.updateConfiguration({level:Gt}),this}},{key:"assert",value:function(Gt,Kt){ql(Gt,Kt)}},{key:"warn",value:function(Gt){return this._getLogFunction(0,Gt,uu.warn,arguments,gu)}},{key:"error",value:function(Gt){return this._getLogFunction(0,Gt,uu.error,arguments)}},{key:"deprecated",value:function(Gt,Kt){return this.warn("`".concat(Gt,"` is deprecated and will be removed in a later version. Use `").concat(Kt,"` instead"))}},{key:"removed",value:function(Gt,Kt){return this.error("`".concat(Gt,"` has been removed. Use `").concat(Kt,"` instead"))}},{key:"probe",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,uu.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,uu.debug,arguments)}},{key:"info",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,console.info,arguments)}},{key:"once",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,uu.debug||uu.info,arguments,gu)}},{key:"table",value:function(Gt,Kt,Ue){return Kt?this._getLogFunction(Gt,Kt,console.table||vs,Ue&&[Ue],{tag:Vu(Kt)}):vs}},{key:"image",value:function(Gt){var Kt=Gt.logLevel,Ue=Gt.priority,un=Gt.image,Gn=Gt.message,mr=Gn===void 0?"":Gn,gr=Gt.scale,Qr=gr===void 0?1:gr;return this._shouldLog(Kt||Ue)?La?tc({image:un,message:mr,scale:Qr}):Rl({image:un,message:mr,scale:Qr}):vs}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(Gt){return this._storage.config[Gt]}},{key:"set",value:function(Gt,Kt){this._storage.updateConfiguration(Object(ku.a)({},Gt,Kt))}},{key:"time",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,console.time?console.time:console.info)}},{key:"timeEnd",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(Gt,Kt){return this._getLogFunction(Gt,Kt,console.timeStamp||vs)}},{key:"group",value:function(Gt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};Ue=ss({logLevel:Gt,message:Kt,opts:Ue});var un=Ue,Gn=un.collapsed;return Ue.method=(Gn?console.groupCollapsed:console.group)||console.info,this._getLogFunction(Ue)}},{key:"groupCollapsed",value:function(Gt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(Gt,Kt,Object.assign({},Ue,{collapsed:!0}))}},{key:"groupEnd",value:function(Gt){return this._getLogFunction(Gt,"",console.groupEnd||vs)}},{key:"withGroup",value:function(Gt,Kt,Ue){this.group(Gt,Kt)();try{Ue()}finally{this.groupEnd(Gt)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(Gt){return this.isEnabled()&&this.getLevel()>=Jo(Gt)}},{key:"_getLogFunction",value:function(Gt,Kt,Ue){var un=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Gn=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(Gt)){var mr;Gn=ss({logLevel:Gt,message:Kt,args:un,opts:Gn}),Ue=Ue||Gn.method,ql(Ue),Gn.total=this.getTotal(),Gn.delta=this.getDelta(),this._deltaTs=Ha();var gr=Gn.tag||Gn.message;if(Gn.once)if(!wu[gr])wu[gr]=Ha();else return vs;return Kt=cl(this.id,Gn.message,Gn),(mr=Ue).bind.apply(mr,[console,Kt].concat(Object(Fs.a)(Gn.args)))}return vs}},{key:"level",set:function(Gt){this.setLevel(Gt)},get:function(){return this.getLevel()}},{key:"priority",set:function(Gt){this.level=Gt},get:function(){return this.level}}]),ve}();Ws.VERSION=To;function Jo(ve){if(!ve)return 0;var ge;switch(Object(uo.a)(ve)){case"number":ge=ve;break;case"object":ge=ve.logLevel||ve.priority||0;break;default:return 0}return ql(Number.isFinite(ge)&&ge>=0),ge}function ss(ve){var ge=ve.logLevel,Gt=ve.message;ve.logLevel=Jo(ge);for(var Kt=ve.args?Array.from(ve.args):[];Kt.length&&Kt.shift()!==Gt;);switch(ve.args=Kt,Object(uo.a)(ge)){case"string":case"function":Gt!==void 0&&Kt.unshift(Gt),ve.message=ge;break;case"object":Object.assign(ve,ge);break;default:}typeof ve.message=="function"&&(ve.message=ve.message());var Ue=Object(uo.a)(ve.message);return ql(Ue==="string"||Ue==="object"),Object.assign(ve,ve.opts)}function cl(ve,ge,Gt){if(typeof ge=="string"){var Kt=Gt.time?El(pu(Gt.total)):"";ge=Gt.time?"".concat(ve,": ").concat(Kt,"  ").concat(ge):"".concat(ve,": ").concat(ge),ge=su(ge,Gt.color,Gt.background)}return ge}function Rl(ve){var ge=ve.image,Gt=ve.message,Kt=Gt===void 0?"":Gt,Ue=ve.scale,un=Ue===void 0?1:Ue,Gn=null;try{Gn=R(3)}catch(mr){}return Gn?function(){return Gn(ge,{fit:"box",width:"".concat(Math.round(80*un),"%")}).then(function(mr){return console.log(mr)})}:vs}function tc(ve){var ge=ve.image,Gt=ve.message,Kt=Gt===void 0?"":Gt,Ue=ve.scale,un=Ue===void 0?1:Ue;if(typeof ge=="string"){var Gn=new Image;return Gn.onload=function(){var xi,Ji=qs(Gn,Kt,un);(xi=console).log.apply(xi,Object(Fs.a)(Ji))},Gn.src=ge,vs}var mr=ge.nodeName||"";if(mr.toLowerCase()==="img"){var gr;return(gr=console).log.apply(gr,Object(Fs.a)(qs(ge,Kt,un))),vs}if(mr.toLowerCase()==="canvas"){var Qr=new Image;return Qr.onload=function(){var xi;return(xi=console).log.apply(xi,Object(Fs.a)(qs(Qr,Kt,un)))},Qr.src=ge.toDataURL(),vs}return vs}var Wu,tl,Iu=new Ws({id:"L7"}).enable(!1);Iu.priority=5;var Lu=(Wu=Object(e.injectable)(),Wu(tl=function(){function ve(){n()(this,ve)}return a()(ve,[{key:"error",value:function(Gt){Iu.error(Gt)()}},{key:"warn",value:function(Gt){Iu.probe(1,Gt)()}},{key:"info",value:function(Gt){Iu.info(3,Gt)()}},{key:"debug",value:function(Gt){Iu.probe(4,Gt)()}}]),ve}())||tl),mu=R("xp6e"),Hu=R("iegG"),Us=R.n(Hu),Dl=window.document.documentElement.style,hc=0;function Pl(ve){var ge=ve;if(typeof ve=="string"&&(ge=document.getElementById(ve)),ge){var Gt=document.createElement("div");return Gt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Gt.id="l7-scene-".concat(hc++),Gt.classList.add("l7-scene"),ge.appendChild(Gt),Gt}return null}var jl,Bl,sc,el,Tl,Nl,tu,po,pl,fl,Hs,Da,bo,ks,gl,nl,Yu,dc,As,rl,lu,Ys,$o,eu,Ru,Qo,Wi,Cs,Zu,Du,jo,Bo,Tu,Mi,il,ju;function Bu(ve){var ge=nu();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var we=(jl=Object(e.injectable)(),Bl=Object(e.inject)(s.a.SceneID),sc=Object(e.inject)(s.a.IIconService),el=Object(e.inject)(s.a.IFontService),Tl=Object(e.inject)(s.a.IControlService),Nl=Object(e.inject)(s.a.ILogService),tu=Object(e.inject)(s.a.IGlobalConfigService),po=Object(e.inject)(s.a.IMapService),pl=Object(e.inject)(s.a.ICoordinateSystemService),fl=Object(e.inject)(s.a.IRendererService),Hs=Object(e.inject)(s.a.ILayerService),Da=Object(e.inject)(s.a.ICameraService),bo=Object(e.inject)(s.a.IInteractionService),ks=Object(e.inject)(s.a.IPickingService),gl=Object(e.inject)(s.a.IShaderModuleService),nl=Object(e.inject)(s.a.IMarkerService),Yu=Object(e.inject)(s.a.IPopupService),jl(dc=(As=(ju=function(ve){et()(Gt,ve);var ge=Bu(Gt);function Gt(){var Kt;return n()(this,Gt),Kt=ge.call(this),Kt.destroyed=!1,Kt.loaded=!1,We()(Kt,"id",rl,Ea()(Kt)),We()(Kt,"iconService",lu,Ea()(Kt)),We()(Kt,"fontService",Ys,Ea()(Kt)),We()(Kt,"controlService",$o,Ea()(Kt)),We()(Kt,"logger",eu,Ea()(Kt)),We()(Kt,"configService",Ru,Ea()(Kt)),We()(Kt,"map",Qo,Ea()(Kt)),We()(Kt,"coordinateSystemService",Wi,Ea()(Kt)),We()(Kt,"rendererService",Cs,Ea()(Kt)),We()(Kt,"layerService",Zu,Ea()(Kt)),We()(Kt,"cameraService",Du,Ea()(Kt)),We()(Kt,"interactionService",jo,Ea()(Kt)),We()(Kt,"pickingService",Bo,Ea()(Kt)),We()(Kt,"shaderModuleService",Tu,Ea()(Kt)),We()(Kt,"markerService",Mi,Ea()(Kt)),We()(Kt,"popupService",il,Ea()(Kt)),Kt.inited=!1,Kt.initPromise=void 0,Kt.rendering=!1,Kt.$container=void 0,Kt.canvas=void 0,Kt.markerContainer=void 0,Kt.hooks=void 0,Kt.handleWindowResized=function(){Kt.emit("resize"),Kt.$container&&(Kt.initContainer(),o.a.triggerResize(),Kt.coordinateSystemService.needRefresh=!0,Kt.render())},Kt.handleMapCameraChanged=function(Ue){Kt.cameraService.update(Ue),Kt.render()},Kt.hooks={init:new mu.a},Kt}return a()(Gt,[{key:"init",value:function(Ue){var un=this;this.configService.setSceneConfig(this.id,Ue),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",an()(qn.a.mark(function Gn(){return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,new Promise(function(Qr){un.map.onCameraChanged(function(xi){un.cameraService.init(),un.cameraService.update(xi),Qr()}),un.map.init()});case 2:un.map.onCameraChanged(un.handleMapCameraChanged),un.map.addMarkerContainer(),un.markerService.addMarkers(),un.markerService.addMarkerLayers(),un.popupService.initPopup(),un.interactionService.init(),un.interactionService.on(no.a.Drag,un.addSceneEvent.bind(un)),un.logger.debug("map ".concat(un.id," loaded"));case 10:case"end":return gr.stop()}},Gn)}))),this.hooks.init.tapPromise("initRenderer",an()(qn.a.mark(function Gn(){var mr;return qn.a.wrap(function(Qr){for(;;)switch(Qr.prev=Qr.next){case 0:if(mr=Pl(un.configService.getSceneConfig(un.id).id||""),un.$container=mr,!mr){Qr.next=11;break}return un.canvas=o.a.create("canvas","",mr),un.setCanvas(),Qr.next=7,un.rendererService.init(un.canvas,un.configService.getSceneConfig(un.id));case 7:Us()(un.$container,un.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(un.handleWindowResized),Qr.next=12;break;case 11:un.logger.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:un.pickingService.init(un.id),un.logger.debug("scene ".concat(un.id," renderer loaded"));case 14:case"end":return Qr.stop()}},Gn)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(Ue){this.logger.debug("add layer ".concat(Ue.name," to scene ").concat(this.id)),this.layerService.add(Ue),this.render()}},{key:"render",value:function(){var Kt=an()(qn.a.mark(function un(){return qn.a.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(!(this.rendering||this.destroyed)){mr.next=2;break}return mr.abrupt("return");case 2:if(this.rendering=!0,this.inited){mr.next=13;break}return mr.next=6,this.initPromise;case 6:this.destroyed&&this.destroy(),this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 13:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 16:case"end":return mr.stop()}},un,this)}));function Ue(){return Kt.apply(this,arguments)}return Ue}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(Ue){var un,Gn=(un=this.$container)===null||un===void 0?void 0:un.getElementsByTagName("canvas")[0];this.render();var mr=Ue==="jpg"?Gn==null?void 0:Gn.toDataURL("image/jpeg"):Gn==null?void 0:Gn.toDataURL("image/png");return mr}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var Ue=this.$container.parentElement;Ue!==null&&(this.markerContainer=o.a.create("div","l7-marker-container",Ue))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(Hu.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var Ue,un,Gn=o.a.DPR,mr=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,gr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,Qr=this.canvas;Qr&&(Qr.width=mr*Gn,Qr.height=gr*Gn,Qr.style.width="".concat(mr,"px"),Qr.style.height="".concat(gr,"px")),this.rendererService.viewport({x:0,y:0,width:Gn*mr,height:Gn*gr})}},{key:"setCanvas",value:function(){var Ue,un,Gn=o.a.DPR,mr=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,gr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,Qr=this.canvas;Qr.width=mr*Gn,Qr.height=gr*Gn,Qr.style.width="".concat(mr,"px"),Qr.style.height="".concat(gr,"px")}},{key:"addSceneEvent",value:function(Ue){this.emit(Ue.type,Ue)}}]),Gt}(E.EventEmitter),ju),rl=fn()(As.prototype,"id",[Bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lu=fn()(As.prototype,"iconService",[sc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ys=fn()(As.prototype,"fontService",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$o=fn()(As.prototype,"controlService",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eu=fn()(As.prototype,"logger",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ru=fn()(As.prototype,"configService",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qo=fn()(As.prototype,"map",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=fn()(As.prototype,"coordinateSystemService",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=fn()(As.prototype,"rendererService",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zu=fn()(As.prototype,"layerService",[Hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Du=fn()(As.prototype,"cameraService",[Da],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=fn()(As.prototype,"interactionService",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo=fn()(As.prototype,"pickingService",[ks],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tu=fn()(As.prototype,"shaderModuleService",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=fn()(As.prototype,"markerService",[nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=fn()(As.prototype,"popupService",[Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),As))||dc),Pe=R("7tbW"),dn=R.n(Pe);function tn(ve){var ge=0;switch(ve){case"vec2":case"ivec2":ge=2;break;case"vec3":case"ivec3":ge=3;break;case"vec4":case"ivec4":case"mat2":ge=4;break;case"mat3":ge=9;break;case"mat4":ge=16;break;default:}return ge}var wn=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function dr(ve){var ge={};return ve=ve.replace(wn,function(Gt,Kt,Ue){var un=Ue.split(":"),Gn=un[0].trim(),mr="";switch(un.length>1&&(mr=un[1].trim()),Kt){case"bool":mr=mr==="true";break;case"float":case"int":mr=Number(mr);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":mr?mr=mr.replace("[","").replace("]","").split(",").reduce(function(gr,Qr){return gr.push(Number(Qr.trim())),gr},[]):mr=new Array(tn(Kt)).fill(0);break;default:}return ge[Gn]=mr,"uniform ".concat(Kt," ").concat(Gn,`;
`)}),{content:ve,uniforms:ge}}var Rr,Xr,ti;function Fr(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function li(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?Fr(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Fr(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}var yr="#define PI 3.14159265359",Zt=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,te=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Le=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Se=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,Dt=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}
`,zt=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}
`,se=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }
  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

`,re=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,fe=/precision\s+(high|low|medium)p\s+float/,Fe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Ke=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,rn=(Rr=Object(e.injectable)(),Rr(Xr=(ti=function(){function ve(){n()(this,ve),this.moduleCache={},this.rawContentCache={}}return a()(ve,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:yr,fs:yr}),this.registerModule("decode",{vs:Zt,fs:""}),this.registerModule("projection",{vs:se,fs:""}),this.registerModule("project",{vs:zt,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:re}),this.registerModule("lighting",{vs:Le,fs:""}),this.registerModule("light",{vs:te,fs:""}),this.registerModule("picking",{vs:Dt,fs:Se})}},{key:"registerModule",value:function(Gt,Kt){if(!this.rawContentCache[Gt]){var Ue=Kt.vs,un=Kt.fs,Gn=Kt.uniforms,mr=dr(Ue),gr=mr.content,Qr=mr.uniforms,xi=dr(un),Ji=xi.content,fa=xi.uniforms;this.rawContentCache[Gt]={fs:Ji,uniforms:li(li(li({},Qr),fa),Gn),vs:gr}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Gt){var Kt=this;if(this.moduleCache[Gt])return this.moduleCache[Gt];var Ue=this.rawContentCache[Gt].vs,un=this.rawContentCache[Gt].fs,Gn=this.processModule(Ue,[],"vs"),mr=Gn.content,gr=Gn.includeList,Qr=this.processModule(un,[],"fs"),xi=Qr.content,Ji=Qr.includeList,fa=xi,ba=dn()(gr.concat(Ji).concat(Gt)).reduce(function(oo,ro){return li(li({},oo),Kt.rawContentCache[ro].uniforms)},{});return fe.test(xi)||(fa=Fe+xi),this.moduleCache[Gt]={fs:fa.trim(),uniforms:ba,vs:mr.trim()},this.moduleCache[Gt]}},{key:"processModule",value:function(Gt,Kt,Ue){var un=this,Gn=Gt.replace(Ke,function(mr,gr){var Qr=gr.split(" "),xi=Qr[0].replace(/"/g,"");if(Kt.indexOf(xi)>-1)return"";var Ji=un.rawContentCache[xi][Ue];Kt.push(xi);var fa=un.processModule(Ji,Kt,Ue),ba=fa.content;return ba});return{content:Gn,includeList:Kt}}}]),ve}(),ti))||Xr),Je=R("iWIM"),pn=R.n(Je),hn=R("bPkA"),Jn,Vn,Zn,Wn,cr,xr,Hr=(Jn=Object(e.injectable)(),Vn=Object(e.inject)(s.a.IShaderModuleService),Jn(Zn=(Wn=(xr=function(){function ve(){n()(this,ve),We()(this,"shaderModuleService",cr,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return a()(ve,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return hn.a.Normal}},{key:"init",value:function(Gt,Kt){this.config=Kt,this.rendererService=Gt.getContainer().get(s.a.IRendererService),this.cameraService=Gt.getContainer().get(s.a.ICameraService),this.mapService=Gt.getContainer().get(s.a.IMapService),this.interactionService=Gt.getContainer().get(s.a.IInteractionService),this.layerService=Gt.getContainer().get(s.a.ILayerService)}},{key:"render",value:function(Gt){}}]),ve}(),xr),cr=fn()(Wn.prototype,"shaderModuleService",[Vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn))||Zn),mi,Br;function ui(ve){var ge=_i();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function _i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Zi=(mi=Object(e.injectable)(),mi(Br=function(ve){et()(Gt,ve);var ge=ui(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Ue,un){pn()(nt()(Gt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Gt}(Hr))||Br),Ri,Ma,ga,la,ii,Pa;function Va(ve,ge){var Gt;if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(Gt=Ya(ve))||ge&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=ve.length?{done:!0}:{done:!1,value:ve[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){Gt=ve[Symbol.iterator]()},n:function(){var Qr=Gt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Gn)throw mr}}}}function Ya(ve,ge){if(!!ve){if(typeof ve=="string")return Ii(ve,ge);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return Ii(ve,ge)}}function Ii(ve,ge){(ge==null||ge>ve.length)&&(ge=ve.length);for(var Gt=0,Kt=new Array(ge);Gt<ge;Gt++)Kt[Gt]=ve[Gt];return Kt}var Ra=(Ri=Object(e.injectable)(),Ma=Object(e.inject)(s.a.IPostProcessor),Ri(ga=(la=(Pa=function(){function ve(){n()(this,ve),this.passes=[],We()(this,"postProcessor",ii,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return a()(ve,[{key:"setLayer",value:function(Gt){this.layer=Gt}},{key:"setRenderFlag",value:function(Gt){this.renderFlag=Gt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var ge=an()(qn.a.mark(function Kt(){var Ue,un,Gn;return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:Ue=Va(this.passes),gr.prev=1,Ue.s();case 3:if((un=Ue.n()).done){gr.next=9;break}return Gn=un.value,gr.next=7,Gn.render(this.layer);case 7:gr.next=3;break;case 9:gr.next=14;break;case 11:gr.prev=11,gr.t0=gr.catch(1),Ue.e(gr.t0);case 14:return gr.prev=14,Ue.f(),gr.finish(14);case 17:this.layer.renderModels();case 18:case"end":return gr.stop()}},Kt,this,[[1,11,14,17]])}));function Gt(){return ge.apply(this,arguments)}return Gt}()},{key:"resize",value:function(Gt,Kt){(this.width!==Gt||this.height!==Kt)&&(this.width=Gt,this.height=Kt)}},{key:"add",value:function(Gt,Kt){Gt.getType()===hn.a.PostProcessing?this.postProcessor.add(Gt,this.layer,Kt):(Gt.init(this.layer,Kt),this.passes.push(Gt))}},{key:"insert",value:function(Gt,Kt,Ue){Gt.init(this.layer,Kt),this.passes.splice(Ue,0,Gt)}},{key:"destroy",value:function(){this.passes.length=0}}]),ve}(),Pa),ii=fn()(la.prototype,"postProcessor",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),la))||ga),lo,Rs,Ds,Ku,hu,j;function I(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function w(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?I(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):I(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function B(ve){var ge=D();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var G=(lo=Object(e.injectable)(),Rs=Object(e.inject)(s.a.ILogService),lo(Ds=(Ku=(j=function(ve){et()(Gt,ve);var ge=B(Gt);function Gt(){var Kt;n()(this,Gt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"logger",hu,Ea()(Kt)),Kt.pickingFBO=void 0,Kt.layer=void 0,Kt.width=0,Kt.height=0,Kt.alreadyInRendering=!1,Kt.pickFromPickingFBO=function(mr){var gr=mr.x,Qr=mr.y,xi=mr.lngLat,Ji=mr.type;if(!(!Kt.layer.isVisible()||!Kt.layer.needPick(Ji))){var fa=Kt.rendererService,ba=fa.getViewportSize,oo=fa.readPixels,ro=fa.useFramebuffer,No=ba(),ko=No.width,Gs=No.height,Bs=Kt.layer.getLayerConfig(),bu=Bs.enableHighlight,Ns=Bs.enableSelect,ru=gr*o.a.DPR,io=Qr*o.a.DPR;if(!(ru>ko||ru<0||io>Gs||io<0)){var Eu;ro(Kt.pickingFBO,function(){var Ol;if(Eu=oo({x:Math.round(ru),y:Math.round(Gs-(Qr+1)*o.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Kt.pickingFBO}),Eu[0]!==0||Eu[1]!==0||Eu[2]!==0){Kt.logger.debug("picked");var ps=Object(o.k)(Eu),Vs=Kt.layer.getSource().getFeatureById(ps),Go={x:gr,y:Qr,type:Ji,lngLat:xi,featureId:ps,feature:Vs};Vs&&(Kt.layer.setCurrentPickId(ps),Kt.triggerHoverOnLayer(Go))}else{var hl={x:gr,y:Qr,lngLat:xi,type:Kt.layer.getCurrentPickId()===null?"un"+Ji:"mouseout",featureId:null,feature:null};Kt.triggerHoverOnLayer(w(w({},hl),{},{type:"unpick"})),Kt.triggerHoverOnLayer(hl),Kt.layer.setCurrentPickId(null)}bu&&Kt.highlightPickedFeature(Eu),Ns&&Ji==="click"&&((Ol=Eu)===null||Ol===void 0?void 0:Ol.toString())!==[0,0,0,0].toString()&&Kt.selectFeature(Eu)})}}},Kt}return a()(Gt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Ue,un){pn()(nt()(Gt.prototype),"init",this).call(this,Ue,un),this.layer=Ue;var Gn=this.rendererService,mr=Gn.createTexture2D,gr=Gn.createFramebuffer,Qr=Gn.getViewportSize,xi=Qr(),Ji=xi.width,fa=xi.height;this.pickingFBO=gr({color:mr({width:Ji,height:fa,wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})}),this.interactionService.on(no.a.Hover,this.pickFromPickingFBO),this.interactionService.on(no.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(no.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Ue){var un=this;if(!this.alreadyInRendering){var Gn=this.rendererService,mr=Gn.getViewportSize,gr=Gn.useFramebuffer,Qr=Gn.clear,xi=mr(),Ji=xi.width,fa=xi.height;this.alreadyInRendering=!0,(this.width!==Ji||this.height!==fa)&&(this.pickingFBO.resize({width:Ji,height:fa}),this.width=Ji,this.height=fa),gr(this.pickingFBO,function(){Qr({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var ba=un.layer.multiPassRenderer.getRenderFlag();un.layer.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforePickingEncode.call(),Ue.render(),Ue.hooks.afterPickingEncode.call(),un.layer.multiPassRenderer.setRenderFlag(ba),un.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Ue){this.layer.emit(Ue.type,Ue)}},{key:"highlightPickedFeature",value:function(Ue){var un=me()(Ue,3),Gn=un[0],mr=un[1],gr=un[2];this.layer.hooks.beforeHighlight.call([Gn,mr,gr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Ue){var un=me()(Ue,3),Gn=un[0],mr=un[1],gr=un[2];this.layer.hooks.beforeSelect.call([Gn,mr,gr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Ue){var un=Ue.featureId,Gn=Object(o.l)(un);this.selectFeature(new Uint8Array(Gn))}},{key:"highlightFeatureHandle",value:function(Ue){var un=Ue.featureId,Gn=Object(o.l)(un);this.highlightPickedFeature(new Uint8Array(Gn))}}]),Gt}(Hr),j),hu=fn()(Ku.prototype,"logger",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ku))||Ds),$=R("+em5"),st,Ct;function wt(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function Ut(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?wt(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):wt(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function Yt(ve){var ge=qt();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function qt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var he=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ye=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,je=(st=Object(e.injectable)(),st(Ct=function(ve){et()(Gt,ve);var ge=Yt(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ye,fs:he});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,xi=gr.height;return{vs:un,fs:Gn,uniforms:Ut(Ut({},mr),{},{u_ViewportSize:[Qr,xi]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return bs()(Ue.blurRadius)||(un.u_BlurDir=[Ue.blurRadius,0]),un}}]),Gt}($.a))||Ct),Ie,Ve;function qe(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function sn(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?qe(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):qe(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function tr(ve){var ge=kn();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function kn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var pr=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Mr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$r=(Ie=Object(e.injectable)(),Ie(Ve=function(ve){et()(Gt,ve);var ge=tr(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Mr,fs:pr});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,xi=gr.height;return{vs:un,fs:Gn,uniforms:sn(sn({},mr),{},{u_ViewportSize:[Qr,xi]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return bs()(Ue.blurRadius)||(un.u_BlurDir=[0,Ue.blurRadius]),un}}]),Gt}($.a))||Ve),Yr,Ti;function Li(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function Ki(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?Li(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Li(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function Xi(ve){var ge=Oa();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Na=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,ji=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Sa=(Yr=Object(e.injectable)(),Yr(Ti=function(ve){et()(Gt,ve);var ge=Xi(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:ji,fs:Na});var Ue=this.shaderModuleService.getModule("colorhalftone-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,xi=gr.height;return{vs:un,fs:Gn,uniforms:Ki(Ki({},mr),{},{u_ViewportSize:[Qr,xi]})}}}]),Gt}($.a))||Ti),xa,Yi;function _a(ve){var ge=sa();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function sa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Ia=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Fa=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,_s=(xa=Object(e.injectable)(),xa(Yi=function(ve){et()(Gt,ve);var ge=_a(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Fa,fs:Ia}),this.shaderModuleService.getModule("copy-pass")}}]),Gt}($.a))||Yi),us,Os;function es(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function js(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?es(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):es(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function ml(ve){var ge=yu();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function yu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Fl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,zl=(us=Object(e.injectable)(),us(Os=function(ve){et()(Gt,ve);var ge=ml(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:xc,fs:Fl});var Ue=this.shaderModuleService.getModule("hexagonalpixelate-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,xi=gr.height;return{vs:un,fs:Gn,uniforms:js(js({},mr),{},{u_ViewportSize:[Qr,xi]})}}}]),Gt}($.a))||Os),Al,Nc;function Hc(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function Tc(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?Hc(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Hc(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function kc(ve){var ge=Yc();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Lc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Zc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,bc=(Al=Object(e.injectable)(),Al(Nc=function(ve){et()(Gt,ve);var ge=kc(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Zc,fs:Lc});var Ue=this.shaderModuleService.getModule("ink-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,xi=gr.height;return{vs:un,fs:Gn,uniforms:Tc(Tc({},mr),{},{u_ViewportSize:[Qr,xi]})}}}]),Gt}($.a))||Nc),Au,Ec;function Kc(ve){var ge=Hl();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Hl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var al=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Cl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ws=(Au=Object(e.injectable)(),Au(Ec=function(ve){et()(Gt,ve);var ge=Kc(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Cl,fs:al}),this.shaderModuleService.getModule("noise-pass")}}]),Gt}($.a))||Ec),cu,Is;function Yl(ve){var ge=Rc();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Rc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Dc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,of=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Ac=(cu=Object(e.injectable)(),cu(Is=function(ve){et()(Gt,ve);var ge=Yl(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Dc,fs:of}),this.shaderModuleService.getModule("sepia-pass")}}]),Gt}($.a))||Is),tf,jc,Ul,Nu,Cc,Tf,Zf,oh=(tf=Object(e.injectable)(),jc=Object(e.inject)(s.a.IRendererService),Ul=Object(e.postConstruct)(),tf(Nu=(Cc=(Zf=function(){function ve(){n()(this,ve),We()(this,"rendererService",Tf,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return a()(ve,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){var un,Gn;return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:un=0;case 1:if(!(un<this.passes.length)){gr.next=10;break}return Gn=this.passes[un],Gn.setRenderToScreen(this.isLastEnabledPass(un)),gr.next=6,Gn.render(Ue);case 6:un!==this.passes.length-1&&this.swap();case 7:un++,gr.next=1;break;case 10:case"end":return gr.stop()}},Kt,this)}));function Gt(Kt){return ge.apply(this,arguments)}return Gt}()},{key:"resize",value:function(Gt,Kt){this.readFBO.resize({width:Gt,height:Kt}),this.writeFBO.resize({width:Gt,height:Kt})}},{key:"add",value:function(Gt,Kt,Ue){Gt.init(Kt,Ue),this.passes.push(Gt)}},{key:"insert",value:function(Gt,Kt,Ue,un){Gt.init(Ue,un),this.passes.splice(Kt,0,Gt)}},{key:"getPostProcessingPassByName",value:function(Gt){return this.passes.find(function(Kt){return Kt.getName()===Gt})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(Gt){for(var Kt=Gt+1;Kt<this.passes.length;Kt++)if(this.passes[Kt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Gt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Gt}}]),ve}(),Zf),Tf=fn()(Cc.prototype,"rendererService",[jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn()(Cc.prototype,"init",[Ul],Object.getOwnPropertyDescriptor(Cc.prototype,"init"),Cc.prototype),Cc))||Nu),Kf,sh;function Gc(ve){var ge=Af();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function Af(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Fc=(Kf=Object(e.injectable)(),Kf(sh=function(ve){et()(Gt,ve);var ge=Gc(Gt);function Gt(){return n()(this,Gt),ge.apply(this,arguments)}return a()(Gt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Ue,un){pn()(nt()(Gt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(Ue){var un=this.rendererService,Gn=un.useFramebuffer,mr=un.clear;Gn(null,function(){mr({color:[0,0,0,0],depth:1,stencil:0}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)})}}]),Gt}(Hr))||sh),Cf,vc,ef,Df,jf,sf,Bf,Xf;function Jf(ve,ge){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(ve);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(ve,Ue).enumerable})),Gt.push.apply(Gt,Kt)}return Gt}function pf(ve){for(var ge=1;ge<arguments.length;ge++){var Gt=arguments[ge]!=null?arguments[ge]:{};ge%2?Jf(Object(Gt),!0).forEach(function(Kt){r()(ve,Kt,Gt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Jf(Object(Gt)).forEach(function(Kt){Object.defineProperty(ve,Kt,Object.getOwnPropertyDescriptor(Gt,Kt))})}return ve}function Of(ve){var ge=uh();return function(){var Kt=nt()(ve),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return xt()(this,Ue)}}function uh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var nf=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,gf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,xu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Vc(ve,ge){for(var Gt=0,Kt=1/ge,Ue=ve;Ue>0;)Gt=Gt+Kt*(Ue%ge),Ue=Math.floor(Ue/ge),Kt=Kt/ge;return Gt}var uf=1,lf=(Cf=Object(e.injectable)(),vc=Object(e.inject)(s.a.IShaderModuleService),ef=Object(e.inject)(s.a.ILogService),Cf(Df=(jf=(Xf=function(ve){et()(Gt,ve);var ge=Of(Gt);function Gt(){var Kt;n()(this,Gt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"shaderModuleService",sf,Ea()(Kt)),We()(Kt,"logger",Bf,Ea()(Kt)),Kt.haltonSequence=[],Kt.accumulatingId=0,Kt.frame=0,Kt.timer=void 0,Kt.sampleRenderTarget=void 0,Kt.prevRenderTarget=void 0,Kt.outputRenderTarget=void 0,Kt.copyRenderTarget=void 0,Kt.blendModel=void 0,Kt.outputModel=void 0,Kt.copyModel=void 0,Kt}return a()(Gt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Ue,un){pn()(nt()(Gt.prototype),"init",this).call(this,Ue,un);var Gn=this.rendererService,mr=Gn.createFramebuffer,gr=Gn.createTexture2D;this.sampleRenderTarget=mr({color:gr({width:1,height:1,wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=mr({color:gr({width:1,height:1,wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=mr({color:gr({width:1,height:1,wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=mr({color:gr({width:1,height:1,wrapS:Un.a.CLAMP_TO_EDGE,wrapT:Un.a.CLAMP_TO_EDGE})});for(var Qr=0;Qr<30;Qr++)this.haltonSequence.push([Vc(Qr,2),Vc(Qr,3)]);this.blendModel=this.createTriangleModel("blend-pass",nf),this.outputModel=this.createTriangleModel("copy-pass",gf,{blend:{enable:!0,func:{srcRGB:Un.a.ONE,dstRGB:Un.a.ONE_MINUS_SRC_ALPHA,srcAlpha:Un.a.ONE,dstAlpha:Un.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:Un.a.FUNC_ADD,alpha:Un.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",gf)}},{key:"render",value:function(Ue){var un=this,Gn=this.rendererService,mr=Gn.clear,gr=Gn.getViewportSize,Qr=Gn.useFramebuffer,xi=gr(),Ji=xi.width,fa=xi.height;this.sampleRenderTarget.resize({width:Ji,height:fa}),this.prevRenderTarget.resize({width:Ji,height:fa}),this.outputRenderTarget.resize({width:Ji,height:fa}),this.copyRenderTarget.resize({width:Ji,height:fa}),this.resetFrame(),this.stopAccumulating();var ba=Ue.multiPassRenderer.getPostProcessor().getReadFBO();Qr(ba,function(){mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:ba}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)});var oo=function ro(No){!un.accumulatingId||No!==un.accumulatingId||un.isFinished()||(un.doRender(Ue),requestAnimationFrame(function(){ro(No)}))};this.accumulatingId=uf++,this.timer=window.setTimeout(function(){oo(un.accumulatingId)},50)}},{key:"doRender",value:function(Ue){var un=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var Gn=this.rendererService,mr=Gn.clear,gr=Gn.getViewportSize,Qr=Gn.useFramebuffer,xi=gr(),Ji=xi.width,fa=xi.height,ba=Ue.getLayerConfig(),oo=ba.jitterScale,ro=oo===void 0?1:oo,No=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((No[0]*2-1)/Ji*ro,(No[1]*2-1)/fa*ro),Ue.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforeRender.call(),Qr(this.sampleRenderTarget,function(){mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:un.sampleRenderTarget}),Ue.render()}),Ue.hooks.afterRender.call(),Ue.multiPassRenderer.setRenderFlag(!0);var ko=Ue.getLayerConfig();Qr(this.outputRenderTarget,function(){un.blendModel.draw({uniforms:{u_opacity:ko.opacity||1,u_MixRatio:un.frame===0?1:.9,u_Diffuse1:un.sampleRenderTarget,u_Diffuse2:un.frame===0?Ue.multiPassRenderer.getPostProcessor().getReadFBO():un.prevRenderTarget}})}),this.frame===0&&mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Qr(this.copyRenderTarget,function(){un.outputModel.draw({uniforms:{u_Texture:un.outputRenderTarget}})}),Qr(Ue.multiPassRenderer.getPostProcessor().getReadFBO(),function(){un.copyModel.draw({uniforms:{u_Texture:un.copyRenderTarget}})}),Ue.multiPassRenderer.getPostProcessor().render(Ue));var Gs=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Gs,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Ue,un,Gn){this.shaderModuleService.registerModule(Ue,{vs:xu,fs:un});var mr=this.shaderModuleService.getModule(Ue),gr=mr.vs,Qr=mr.fs,xi=mr.uniforms,Ji=this.rendererService,fa=Ji.createAttribute,ba=Ji.createBuffer,oo=Ji.createModel;return oo(pf({vs:gr,fs:Qr,attributes:{a_Position:fa({buffer:ba({data:[-4,-4,4,-4,0,4],type:Un.a.FLOAT}),size:2})},uniforms:pf({},xi),depth:{enable:!1},count:3},Gn))}}]),Gt}(Hr),Xf),sf=fn()(jf.prototype,"shaderModuleService",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bf=fn()(jf.prototype,"logger",[ef],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf))||Df),Oc=new e.Container;Oc.bind(s.a.IGlobalConfigService).to(Ar).inSingletonScope(),Oc.bind(s.a.IShaderModuleService).to(rn).inSingletonScope(),Oc.bind(s.a.ILogService).to(Lu).inSingletonScope(),Object(e.decorate)(Object(e.injectable)(),E.EventEmitter),Oc.bind(s.a.IEventEmitter).to(E.EventEmitter);var pc=l()(Oc,!1),mf=function(ge){var Gt=pc.lazyInject(ge);return function(Kt,Ue,un){Gt.call(this,Kt,Ue),un&&(un.initializer=function(){return Kt[Ue]})}},Wc=function(ge){var Gt=pc.lazyMultiInject(ge);return function(Kt,Ue,un){Gt.call(this,Kt,Ue),un&&(un.initializer=function(){return Kt[Ue]})}},rf=mt.c=Oc,yf=0;function zc(){var ve=new e.Container;return ve.parent=Oc,ve.bind(s.a.SceneID).toConstantValue("".concat(yf++)),ve.bind(s.a.ILayerService).to(Ui).inSingletonScope(),ve.bind(s.a.ISceneService).to(we).inSingletonScope(),ve.bind(s.a.ICameraService).to(Sn).inSingletonScope(),ve.bind(s.a.ICoordinateSystemService).to(eo).inSingletonScope(),ve.bind(s.a.IInteractionService).to(Ht).inSingletonScope(),ve.bind(s.a.IPickingService).to(Do).inSingletonScope(),ve.bind(s.a.IControlService).to(fr).inSingletonScope(),ve.bind(s.a.IMarkerService).to(Jt).inSingletonScope(),ve.bind(s.a.IIconService).to($t).inSingletonScope(),ve.bind(s.a.IFontService).to(Q).inSingletonScope(),ve.bind(s.a.IPopupService).to(Ae).inSingletonScope(),ve.bind(s.a.INormalPass).to(Zi).whenTargetNamed("clear"),ve.bind(s.a.INormalPass).to(G).whenTargetNamed("pixelPicking"),ve.bind(s.a.INormalPass).to(Fc).whenTargetNamed("render"),ve.bind(s.a.INormalPass).to(lf).whenTargetNamed("taa"),ve.bind(s.a.IFactoryNormalPass).toFactory(function(ge){return function(Gt){return ge.container.getNamed(s.a.INormalPass,Gt)}}),ve.bind(s.a.IPostProcessingPass).to(_s).whenTargetNamed("copy"),ve.bind(s.a.IPostProcessingPass).to(je).whenTargetNamed("blurH"),ve.bind(s.a.IPostProcessingPass).to($r).whenTargetNamed("blurV"),ve.bind(s.a.IPostProcessingPass).to(ws).whenTargetNamed("noise"),ve.bind(s.a.IPostProcessingPass).to(Ac).whenTargetNamed("sepia"),ve.bind(s.a.IPostProcessingPass).to(Sa).whenTargetNamed("colorHalftone"),ve.bind(s.a.IPostProcessingPass).to(zl).whenTargetNamed("hexagonalPixelate"),ve.bind(s.a.IPostProcessingPass).to(bc).whenTargetNamed("ink"),ve.bind(s.a.IFactoryPostProcessingPass).toFactory(function(ge){return function(Gt){var Kt=ge.container.getNamed(s.a.IPostProcessingPass,Gt);return Kt.setName(Gt),Kt}}),ve}function xf(ve){var ge=new e.Container;return ge.parent=ve,ge.bind(s.a.IStyleAttributeService).to(Uu).inSingletonScope(),ge.bind(s.a.IMultiPassRenderer).to(Ra).inSingletonScope(),ge.bind(s.a.IPostProcessor).to(oh).inSingletonScope(),ge}},fbrv:function(Oe,mt,R){"use strict";var U=this&&this.__spreadArrays||function(){for(var u=0,f=0,v=arguments.length;f<v;f++)u+=arguments[f].length;for(var b=Array(u),y=0,f=0;f<v;f++)for(var g=arguments[f],_=0,M=g.length;_<M;_++,y++)b[y]=g[_];return b};Object.defineProperty(mt,"__esModule",{value:!0}),mt.getFunctionName=mt.getBaseClassDependencyCount=mt.getDependencies=void 0;var E=R("Yk9n"),T=R("MON2"),e=R("FV85"),t=R("xfSm"),l=R("ujMp");Object.defineProperty(mt,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}});var s=R("dX1H");function c(u,f){var v=l.getFunctionName(f),b=r(u,v,f,!1);return b}mt.getDependencies=c;function r(u,f,v,b){var y=u.getConstructorMetadata(v),g=y.compilerGeneratedMetadata;if(g===void 0){var _=T.MISSING_INJECTABLE_ANNOTATION+" "+f+".";throw new Error(_)}var M=y.userGeneratedMetadata,x=Object.keys(M),m=v.length===0&&x.length>0,S=m?x.length:v.length,P=n(b,f,g,M,S),A=i(u,v),O=U(P,A);return O}function h(u,f,v,b,y){var g=y[u.toString()]||[],_=o(g),M=_.unmanaged!==!0,x=b[u],m=_.inject||_.multiInject;if(x=m||x,x instanceof E.LazyServiceIdentifer&&(x=x.unwrap()),M){var S=x===Object,P=x===Function,A=x===void 0,O=S||P||A;if(!f&&O){var L=T.MISSING_INJECT_ANNOTATION+" argument "+u+" in class "+v+".";throw new Error(L)}var W=new s.Target(e.TargetTypeEnum.ConstructorArgument,_.targetName,x);return W.metadata=g,W}return null}function n(u,f,v,b,y){for(var g=[],_=0;_<y;_++){var M=_,x=h(M,u,f,v,b);x!==null&&g.push(x)}return g}function i(u,f){for(var v=u.getPropertiesMetadata(f),b=[],y=Object.keys(v),g=0,_=y;g<_.length;g++){var M=_[g],x=v[M],m=o(v[M]),S=m.targetName||M,P=m.inject||m.multiInject,A=new s.Target(e.TargetTypeEnum.ClassProperty,S,P);A.metadata=x,b.push(A)}var O=Object.getPrototypeOf(f.prototype).constructor;if(O!==Object){var L=i(u,O);b=U(b,L)}return b}function a(u,f){var v=Object.getPrototypeOf(f.prototype).constructor;if(v!==Object){var b=l.getFunctionName(v),y=r(u,b,v,!0),g=y.map(function(x){return x.metadata.filter(function(m){return m.key===t.UNMANAGED_TAG})}),_=[].concat.apply([],g).length,M=y.length-_;return M>0?M:a(u,v)}else return 0}mt.getBaseClassDependencyCount=a;function o(u){var f={};return u.forEach(function(v){f[v.key.toString()]=v.value}),{inject:f[t.INJECT_TAG],multiInject:f[t.MULTI_INJECT_TAG],targetName:f[t.NAME_TAG],unmanaged:f[t.UNMANAGED_TAG]}}},fbvF:function(Oe,mt,R){(function(U,E){Oe.exports=E()})(this,function(){"use strict";var U=function(_e){return _e instanceof Uint8Array||_e instanceof Uint16Array||_e instanceof Uint32Array||_e instanceof Int8Array||_e instanceof Int16Array||_e instanceof Int32Array||_e instanceof Float32Array||_e instanceof Float64Array||_e instanceof Uint8ClampedArray},E=function(_e,Ze){for(var In=Object.keys(Ze),ar=0;ar<In.length;++ar)_e[In[ar]]=Ze[In[ar]];return _e},T=`
`;function e(ne){return typeof atob!="undefined"?atob(ne):"base64:"+ne}function t(ne){var _e=new Error("(regl) "+ne);throw console.error(_e),_e}function l(ne,_e){ne||t(_e)}function s(ne){return ne?": "+ne:""}function c(ne,_e,Ze){ne in _e||t("unknown parameter ("+ne+")"+s(Ze)+". possible values: "+Object.keys(_e).join())}function r(ne,_e){U(ne)||t("invalid parameter type"+s(_e)+". must be a typed array")}function h(ne,_e){switch(_e){case"number":return typeof ne=="number";case"object":return typeof ne=="object";case"string":return typeof ne=="string";case"boolean":return typeof ne=="boolean";case"function":return typeof ne=="function";case"undefined":return typeof ne=="undefined";case"symbol":return typeof ne=="symbol"}}function n(ne,_e,Ze){h(ne,_e)||t("invalid parameter type"+s(Ze)+". expected "+_e+", got "+typeof ne)}function i(ne,_e){ne>=0&&(ne|0)===ne||t("invalid parameter type, ("+ne+")"+s(_e)+". must be a nonnegative integer")}function a(ne,_e,Ze){_e.indexOf(ne)<0&&t("invalid value"+s(Ze)+". must be one of: "+_e)}var o=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(ne){Object.keys(ne).forEach(function(_e){o.indexOf(_e)<0&&t('invalid regl constructor argument "'+_e+'". must be one of '+o)})}function f(ne,_e){for(ne=ne+"";ne.length<_e;)ne=" "+ne;return ne}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(ne,_e){this.number=ne,this.line=_e,this.errors=[]}function y(ne,_e,Ze){this.file=ne,this.line=_e,this.message=Ze}function g(){var ne=new Error,_e=(ne.stack||ne).toString(),Ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(_e);if(Ze)return Ze[1];var In=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(_e);return In?In[1]:"unknown"}function _(){var ne=new Error,_e=(ne.stack||ne).toString(),Ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(_e);if(Ze)return Ze[1];var In=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(_e);return In?In[1]:"unknown"}function M(ne,_e){var Ze=ne.split(`
`),In=1,ar=0,ur={unknown:new v,0:new v};ur.unknown.name=ur[0].name=_e||g(),ur.unknown.lines.push(new b(0,""));for(var sr=0;sr<Ze.length;++sr){var Or=Ze[sr],ri=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Or);if(ri)switch(ri[1]){case"line":var Vr=/(\d+)(\s+\d+)?/.exec(ri[2]);Vr&&(In=Vr[1]|0,Vr[2]&&(ar=Vr[2]|0,ar in ur||(ur[ar]=new v)));break;case"define":var ni=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ri[2]);ni&&(ur[ar].name=ni[1]?e(ni[2]):ni[2]);break}ur[ar].lines.push(new b(In++,Or))}return Object.keys(ur).forEach(function(fi){var Oi=ur[fi];Oi.lines.forEach(function(vi){Oi.index[vi.number]=vi})}),ur}function x(ne){var _e=[];return ne.split(`
`).forEach(function(Ze){if(!(Ze.length<5)){var In=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ze);In?_e.push(new y(In[1]|0,In[2]|0,In[3].trim())):Ze.length>0&&_e.push(new y("unknown",0,Ze))}}),_e}function m(ne,_e){_e.forEach(function(Ze){var In=ne[Ze.file];if(In){var ar=In.index[Ze.line];if(ar){ar.errors.push(Ze),In.hasErrors=!0;return}}ne.unknown.hasErrors=!0,ne.unknown.lines[0].errors.push(Ze)})}function S(ne,_e,Ze,In,ar){if(!ne.getShaderParameter(_e,ne.COMPILE_STATUS)){var ur=ne.getShaderInfoLog(_e),sr=In===ne.FRAGMENT_SHADER?"fragment":"vertex";K(Ze,"string",sr+" shader source must be a string",ar);var Or=M(Ze,ar),ri=x(ur);m(Or,ri),Object.keys(Or).forEach(function(Vr){var ni=Or[Vr];if(!ni.hasErrors)return;var fi=[""],Oi=[""];function vi(si,Lr){fi.push(si),Oi.push(Lr||"")}vi("file number "+Vr+": "+ni.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ni.lines.forEach(function(si){if(si.errors.length>0){vi(f(si.number,4)+"|  ","background-color:yellow; font-weight:bold"),vi(si.line+T,"color:red; background-color:yellow; font-weight:bold");var Lr=0;si.errors.forEach(function(_r){var di=_r.message,Vi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(di);if(Vi){var qr=Vi[1];switch(di=Vi[2],qr){case"assign":qr="=";break}Lr=Math.max(si.line.indexOf(qr,Lr),0)}else Lr=0;vi(f("| ",6)),vi(f("^^^",Lr+3)+T,"font-weight:bold"),vi(f("| ",6)),vi(di+T,"font-weight:bold")}),vi(f("| ",6)+T)}else vi(f(si.number,4)+"|  "),vi(si.line+T,"color:red")}),typeof document!="undefined"&&!window.chrome?(Oi[0]=fi.join("%c"),console.log.apply(console,Oi)):console.log(fi.join(""))}),l.raise("Error compiling "+sr+" shader, "+Or[0].name)}}function P(ne,_e,Ze,In,ar){if(!ne.getProgramParameter(_e,ne.LINK_STATUS)){var ur=ne.getProgramInfoLog(_e),sr=M(Ze,ar),Or=M(In,ar),ri='Error linking program with vertex shader, "'+Or[0].name+'", and fragment shader "'+sr[0].name+'"';typeof document!="undefined"?console.log("%c"+ri+T+"%c"+ur,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ri+T+ur),l.raise(ri)}}function A(ne){ne._commandRef=g()}function O(ne,_e,Ze,In){A(ne);function ar(ri){return ri?In.id(ri):0}ne._fragId=ar(ne.static.frag),ne._vertId=ar(ne.static.vert);function ur(ri,Vr){Object.keys(Vr).forEach(function(ni){ri[In.id(ni)]=!0})}var sr=ne._uniformSet={};ur(sr,_e.static),ur(sr,_e.dynamic);var Or=ne._attributeSet={};ur(Or,Ze.static),ur(Or,Ze.dynamic),ne._hasCount="count"in ne.static||"count"in ne.dynamic||"elements"in ne.static||"elements"in ne.dynamic}function L(ne,_e){var Ze=_();t(ne+" in command "+(_e||g())+(Ze==="unknown"?"":" called from "+Ze))}function W(ne,_e,Ze){ne||L(_e,Ze||g())}function F(ne,_e,Ze,In){ne in _e||L("unknown parameter ("+ne+")"+s(Ze)+". possible values: "+Object.keys(_e).join(),In||g())}function K(ne,_e,Ze,In){h(ne,_e)||L("invalid parameter type"+s(Ze)+". expected "+_e+", got "+typeof ne,In||g())}function V(ne){ne()}function k(ne,_e,Ze){ne.texture?a(ne.texture._texture.internalformat,_e,"unsupported texture format for attachment"):a(ne.renderbuffer._renderbuffer.format,Ze,"unsupported renderbuffer format for attachment")}var Z=33071,X=9728,it=9984,ft=9985,pt=9986,ut=9987,It=5120,Nt=5121,Rt=5122,Mt=5123,bt=5124,At=5125,rt=5126,Pt=32819,z=32820,Q=33635,gt=34042,et=36193,ot={};ot[It]=ot[Nt]=1,ot[Rt]=ot[Mt]=ot[et]=ot[Q]=ot[Pt]=ot[z]=2,ot[bt]=ot[At]=ot[rt]=ot[gt]=4;function xt(ne,_e){return ne===z||ne===Pt||ne===Q?2:ne===gt?4:ot[ne]*_e}function H(ne){return!(ne&ne-1)&&!!ne}function nt(ne,_e,Ze){var In,ar=_e.width,ur=_e.height,sr=_e.channels;l(ar>0&&ar<=Ze.maxTextureSize&&ur>0&&ur<=Ze.maxTextureSize,"invalid texture shape"),(ne.wrapS!==Z||ne.wrapT!==Z)&&l(H(ar)&&H(ur),"incompatible wrap mode for texture, both width and height must be power of 2"),_e.mipmask===1?ar!==1&&ur!==1&&l(ne.minFilter!==it&&ne.minFilter!==pt&&ne.minFilter!==ft&&ne.minFilter!==ut,"min filter requires mipmap"):(l(H(ar)&&H(ur),"texture must be a square power of 2 to support mipmapping"),l(_e.mipmask===(ar<<1)-1,"missing or incomplete mipmap data")),_e.type===rt&&(Ze.extensions.indexOf("oes_texture_float_linear")<0&&l(ne.minFilter===X&&ne.magFilter===X,"filter not supported, must enable oes_texture_float_linear"),l(!ne.genMipmaps,"mipmap generation not supported with float textures"));var Or=_e.images;for(In=0;In<16;++In)if(Or[In]){var ri=ar>>In,Vr=ur>>In;l(_e.mipmask&1<<In,"missing mipmap data");var ni=Or[In];if(l(ni.width===ri&&ni.height===Vr,"invalid shape for mip images"),l(ni.format===_e.format&&ni.internalformat===_e.internalformat&&ni.type===_e.type,"incompatible type for mip image"),!ni.compressed)if(ni.data){var fi=Math.ceil(xt(ni.type,sr)*ri/ni.unpackAlignment)*ni.unpackAlignment;l(ni.data.byteLength===fi*Vr,"invalid data for image, buffer size is inconsistent with image format")}else ni.element||ni.copy}else ne.genMipmaps||l((_e.mipmask&1<<In)==0,"extra mipmap data");_e.compressed&&l(!ne.genMipmaps,"mipmap generation for compressed images not supported")}function at(ne,_e,Ze,In){var ar=ne.width,ur=ne.height,sr=ne.channels;l(ar>0&&ar<=In.maxTextureSize&&ur>0&&ur<=In.maxTextureSize,"invalid texture shape"),l(ar===ur,"cube map must be square"),l(_e.wrapS===Z&&_e.wrapT===Z,"wrap mode not supported by cube map");for(var Or=0;Or<Ze.length;++Or){var ri=Ze[Or];l(ri.width===ar&&ri.height===ur,"inconsistent cube map face shape"),_e.genMipmaps&&(l(!ri.compressed,"can not generate mipmap for compressed textures"),l(ri.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Vr=ri.images,ni=0;ni<16;++ni){var fi=Vr[ni];if(fi){var Oi=ar>>ni,vi=ur>>ni;l(ri.mipmask&1<<ni,"missing mipmap data"),l(fi.width===Oi&&fi.height===vi,"invalid shape for mip images"),l(fi.format===ne.format&&fi.internalformat===ne.internalformat&&fi.type===ne.type,"incompatible type for mip image"),fi.compressed||(fi.data?l(fi.data.byteLength===Oi*vi*Math.max(xt(fi.type,sr),fi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):fi.element||fi.copy)}}}}var q=E(l,{optional:V,raise:t,commandRaise:L,command:W,parameter:c,commandParameter:F,constructor:u,type:n,commandType:K,isTypedArray:r,nni:i,oneOf:a,shaderError:S,linkError:P,callSite:_,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:k,guessCommand:g,texture2D:nt,textureCube:at}),_t=0,yt=0,Ft=5,Qt=6;function ee(ne,_e){this.id=_t++,this.type=ne,this.data=_e}function Vt(ne){return ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function $t(ne){if(ne.length===0)return[];var _e=ne.charAt(0),Ze=ne.charAt(ne.length-1);if(ne.length>1&&_e===Ze&&(_e==='"'||_e==="'"))return['"'+Vt(ne.substr(1,ne.length-2))+'"'];var In=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ne);if(In)return $t(ne.substr(0,In.index)).concat($t(In[1])).concat($t(ne.substr(In.index+In[0].length)));var ar=ne.split(".");if(ar.length===1)return['"'+Vt(ne)+'"'];for(var ur=[],sr=0;sr<ar.length;++sr)ur=ur.concat($t(ar[sr]));return ur}function Me(ne){return"["+$t(ne).join("][")+"]"}function me(ne,_e){return new ee(ne,Me(_e+""))}function le(ne){return typeof ne=="function"&&!ne._reglType||ne instanceof ee}function be(ne,_e){if(typeof ne=="function")return new ee(yt,ne);if(typeof ne=="number"||typeof ne=="boolean")return new ee(Ft,ne);if(Array.isArray(ne))return new ee(Qt,ne.map(function(Ze,In){return be(Ze,_e+"["+In+"]")}));if(ne instanceof ee)return ne;q(!1,"invalid option type in uniform "+_e)}var ze={DynamicVariable:ee,define:me,isDynamic:le,unbox:be,accessor:Me},Xe={next:typeof requestAnimationFrame=="function"?function(ne){return requestAnimationFrame(ne)}:function(ne){return setTimeout(ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(ne){return cancelAnimationFrame(ne)}:clearTimeout},Sn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Xn(){var ne={"":0},_e=[""];return{id:function(In){var ar=ne[In];return ar||(ar=ne[In]=_e.length,_e.push(In),ar)},str:function(In){return _e[In]}}}function Hn(ne,_e,Ze){var In=document.createElement("canvas");E(In.style,{border:0,margin:0,padding:0,top:0,left:0}),ne.appendChild(In),ne===document.body&&(In.style.position="absolute",E(ne.style,{margin:0,padding:0}));function ar(){var Or=window.innerWidth,ri=window.innerHeight;if(ne!==document.body){var Vr=ne.getBoundingClientRect();Or=Vr.right-Vr.left,ri=Vr.bottom-Vr.top}In.width=Ze*Or,In.height=Ze*ri,E(In.style,{width:Or+"px",height:ri+"px"})}var ur;ne!==document.body&&typeof ResizeObserver=="function"?(ur=new ResizeObserver(function(){setTimeout(ar)}),ur.observe(ne)):window.addEventListener("resize",ar,!1);function sr(){ur?ur.disconnect():window.removeEventListener("resize",ar),ne.removeChild(In)}return ar(),{canvas:In,onDestroy:sr}}function nn(ne,_e){function Ze(In){try{return ne.getContext(In,_e)}catch(ar){return null}}return Ze("webgl")||Ze("experimental-webgl")||Ze("webgl-experimental")}function en(ne){return typeof ne.nodeName=="string"&&typeof ne.appendChild=="function"&&typeof ne.getBoundingClientRect=="function"}function An(ne){return typeof ne.drawArrays=="function"||typeof ne.drawElements=="function"}function Nn(ne){return typeof ne=="string"?ne.split():(q(Array.isArray(ne),"invalid extension array"),ne)}function fr(ne){return typeof ne=="string"?(q(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ne)):ne}function hi(ne){var _e=ne||{},Ze,In,ar,ur,sr={},Or=[],ri=[],Vr=typeof window=="undefined"?1:window.devicePixelRatio,ni=!1,fi=function(Lr){Lr&&q.raise(Lr)},Oi=function(){};if(typeof _e=="string"?(q(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ze=document.querySelector(_e),q(Ze,"invalid query string for element")):typeof _e=="object"?en(_e)?Ze=_e:An(_e)?(ur=_e,ar=ur.canvas):(q.constructor(_e),"gl"in _e?ur=_e.gl:"canvas"in _e?ar=fr(_e.canvas):"container"in _e&&(In=fr(_e.container)),"attributes"in _e&&(sr=_e.attributes,q.type(sr,"object","invalid context attributes")),"extensions"in _e&&(Or=Nn(_e.extensions)),"optionalExtensions"in _e&&(ri=Nn(_e.optionalExtensions)),"onDone"in _e&&(q.type(_e.onDone,"function","invalid or missing onDone callback"),fi=_e.onDone),"profile"in _e&&(ni=!!_e.profile),"pixelRatio"in _e&&(Vr=+_e.pixelRatio,q(Vr>0,"invalid pixel ratio"))):q.raise("invalid arguments to regl"),Ze&&(Ze.nodeName.toLowerCase()==="canvas"?ar=Ze:In=Ze),!ur){if(!ar){q(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var vi=Hn(In||document.body,fi,Vr);if(!vi)return null;ar=vi.canvas,Oi=vi.onDestroy}sr.premultipliedAlpha===void 0&&(sr.premultipliedAlpha=!0),ur=nn(ar,sr)}return ur?{gl:ur,canvas:ar,container:In,extensions:Or,optionalExtensions:ri,pixelRatio:Vr,profile:ni,onDone:fi,onDestroy:Oi}:(Oi(),fi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ce(ne,_e){var Ze={};function In(sr){q.type(sr,"string","extension name must be string");var Or=sr.toLowerCase(),ri;try{ri=Ze[Or]=ne.getExtension(Or)}catch(Vr){}return!!ri}for(var ar=0;ar<_e.extensions.length;++ar){var ur=_e.extensions[ar];if(!In(ur))return _e.onDestroy(),_e.onDone('"'+ur+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return _e.optionalExtensions.forEach(In),{extensions:Ze,restore:function(){Object.keys(Ze).forEach(function(Or){if(Ze[Or]&&!In(Or))throw new Error("(regl): error restoring extension "+Or)})}}}function Te(ne,_e){for(var Ze=Array(ne),In=0;In<ne;++In)Ze[In]=_e(In);return Ze}var Jt=5120,pe=5121,Wt=5122,ie=5123,Ae=5124,ue=5125,xe=5126;function $e(ne){for(var _e=16;_e<=1<<28;_e*=16)if(ne<=_e)return _e;return 0}function Fn(ne){var _e,Ze;return _e=(ne>65535)<<4,ne>>>=_e,Ze=(ne>255)<<3,ne>>>=Ze,_e|=Ze,Ze=(ne>15)<<2,ne>>>=Ze,_e|=Ze,Ze=(ne>3)<<1,ne>>>=Ze,_e|=Ze,_e|ne>>1}function or(){var ne=Te(8,function(){return[]});function _e(ur){var sr=$e(ur),Or=ne[Fn(sr)>>2];return Or.length>0?Or.pop():new ArrayBuffer(sr)}function Ze(ur){ne[Fn(ur.byteLength)>>2].push(ur)}function In(ur,sr){var Or=null;switch(ur){case Jt:Or=new Int8Array(_e(sr),0,sr);break;case pe:Or=new Uint8Array(_e(sr),0,sr);break;case Wt:Or=new Int16Array(_e(2*sr),0,sr);break;case ie:Or=new Uint16Array(_e(2*sr),0,sr);break;case Ae:Or=new Int32Array(_e(4*sr),0,sr);break;case ue:Or=new Uint32Array(_e(4*sr),0,sr);break;case xe:Or=new Float32Array(_e(4*sr),0,sr);break;default:return null}return Or.length!==sr?Or.subarray(0,sr):Or}function ar(ur){Ze(ur.buffer)}return{alloc:_e,free:Ze,allocType:In,freeType:ar}}var En=or();En.zero=or();var Pn=3408,br=3410,Pr=3411,ln=3412,Cr=3413,Ar=3414,Be=3415,We=33901,Ye=33902,fn=3379,gn=3386,Bn=34921,bn=36347,Ln=36348,ir=35661,Yn=35660,_n=34930,Dr=36349,vr=34076,zr=34024,Ai=7936,Aa=7937,ka=7938,eo=35724,Zo=34047,Ea=36063,so=34852,Ko=3553,no=34067,So=34069,cs=33984,wa=6408,zo=5126,Ro=5121,fu=36160,Xo=36053,au=36064,$s=16384,Ne=function(_e,Ze){var In=1;Ze.ext_texture_filter_anisotropic&&(In=_e.getParameter(Zo));var ar=1,ur=1;Ze.webgl_draw_buffers&&(ar=_e.getParameter(so),ur=_e.getParameter(Ea));var sr=!!Ze.oes_texture_float;if(sr){var Or=_e.createTexture();_e.bindTexture(Ko,Or),_e.texImage2D(Ko,0,wa,1,1,0,wa,zo,null);var ri=_e.createFramebuffer();if(_e.bindFramebuffer(fu,ri),_e.framebufferTexture2D(fu,au,Ko,Or,0),_e.bindTexture(Ko,null),_e.checkFramebufferStatus(fu)!==Xo)sr=!1;else{_e.viewport(0,0,1,1),_e.clearColor(1,0,0,1),_e.clear($s);var Vr=En.allocType(zo,4);_e.readPixels(0,0,1,1,wa,zo,Vr),_e.getError()?sr=!1:(_e.deleteFramebuffer(ri),_e.deleteTexture(Or),sr=Vr[0]===1),En.freeType(Vr)}}var ni=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),fi=!0;if(!ni){var Oi=_e.createTexture(),vi=En.allocType(Ro,36);_e.activeTexture(cs),_e.bindTexture(no,Oi),_e.texImage2D(So,0,wa,3,3,0,wa,Ro,vi),En.freeType(vi),_e.bindTexture(no,null),_e.deleteTexture(Oi),fi=!_e.getError()}return{colorBits:[_e.getParameter(br),_e.getParameter(Pr),_e.getParameter(ln),_e.getParameter(Cr)],depthBits:_e.getParameter(Ar),stencilBits:_e.getParameter(Be),subpixelBits:_e.getParameter(Pn),extensions:Object.keys(Ze).filter(function(si){return!!Ze[si]}),maxAnisotropic:In,maxDrawbuffers:ar,maxColorAttachments:ur,pointSizeDims:_e.getParameter(We),lineWidthDims:_e.getParameter(Ye),maxViewportDims:_e.getParameter(gn),maxCombinedTextureUnits:_e.getParameter(ir),maxCubeMapSize:_e.getParameter(vr),maxRenderbufferSize:_e.getParameter(zr),maxTextureUnits:_e.getParameter(_n),maxTextureSize:_e.getParameter(fn),maxAttributes:_e.getParameter(Bn),maxVertexUniforms:_e.getParameter(bn),maxVertexTextureUnits:_e.getParameter(Yn),maxVaryingVectors:_e.getParameter(Ln),maxFragmentUniforms:_e.getParameter(Dr),glsl:_e.getParameter(eo),renderer:_e.getParameter(Aa),vendor:_e.getParameter(Ai),version:_e.getParameter(ka),readFloat:sr,npotTextureCube:fi}};function oe(ne){return!!ne&&typeof ne=="object"&&Array.isArray(ne.shape)&&Array.isArray(ne.stride)&&typeof ne.offset=="number"&&ne.shape.length===ne.stride.length&&(Array.isArray(ne.data)||U(ne.data))}var Ht=function(_e){return Object.keys(_e).map(function(Ze){return _e[Ze]})},Ee={shape:Si,flatten:Jr};function an(ne,_e,Ze){for(var In=0;In<_e;++In)Ze[In]=ne[In]}function zn(ne,_e,Ze,In){for(var ar=0,ur=0;ur<_e;++ur)for(var sr=ne[ur],Or=0;Or<Ze;++Or)In[ar++]=sr[Or]}function qn(ne,_e,Ze,In,ar,ur){for(var sr=ur,Or=0;Or<_e;++Or)for(var ri=ne[Or],Vr=0;Vr<Ze;++Vr)for(var ni=ri[Vr],fi=0;fi<In;++fi)ar[sr++]=ni[fi]}function Un(ne,_e,Ze,In,ar){for(var ur=1,sr=Ze+1;sr<_e.length;++sr)ur*=_e[sr];var Or=_e[Ze];if(_e.length-Ze==4){var ri=_e[Ze+1],Vr=_e[Ze+2],ni=_e[Ze+3];for(sr=0;sr<Or;++sr)qn(ne[sr],ri,Vr,ni,In,ar),ar+=ur}else for(sr=0;sr<Or;++sr)Un(ne[sr],_e,Ze+1,In,ar),ar+=ur}function Jr(ne,_e,Ze,In){var ar=1;if(_e.length)for(var ur=0;ur<_e.length;++ur)ar*=_e[ur];else ar=0;var sr=In||En.allocType(Ze,ar);switch(_e.length){case 0:break;case 1:an(ne,_e[0],sr);break;case 2:zn(ne,_e[0],_e[1],sr);break;case 3:qn(ne,_e[0],_e[1],_e[2],sr,0);break;default:Un(ne,_e,0,sr,0)}return sr}function Si(ne){for(var _e=[],Ze=ne;Ze.length;Ze=Ze[0])_e.push(Ze.length);return _e}var Ci={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ki=5120,oa=5122,Xa=5124,ma=5121,mo=5123,Ba=5125,ao=5126,yo=5126,Ja={int8:ki,int16:oa,int32:Xa,uint8:ma,uint16:mo,uint32:Ba,float:ao,float32:yo},_o=35048,ts=35040,Do={dynamic:_o,stream:ts,static:35044},xs=Ee.flatten,Mo=Ee.shape,$a=35044,Ms=35040,as=5121,Ca=5126,mn=[];mn[5120]=1,mn[5122]=2,mn[5124]=4,mn[5121]=1,mn[5123]=2,mn[5125]=4,mn[5126]=4;function hr(ne){return Ci[Object.prototype.toString.call(ne)]|0}function Gr(ne,_e){for(var Ze=0;Ze<_e.length;++Ze)ne[Ze]=_e[Ze]}function Ui(ne,_e,Ze,In,ar,ur,sr){for(var Or=0,ri=0;ri<Ze;++ri)for(var Vr=0;Vr<In;++Vr)ne[Or++]=_e[ar*ri+ur*Vr+sr]}function Ka(ne,_e,Ze,In){var ar=0,ur={};function sr(Lr){this.id=ar++,this.buffer=ne.createBuffer(),this.type=Lr,this.usage=$a,this.byteLength=0,this.dimension=1,this.dtype=as,this.persistentData=null,Ze.profile&&(this.stats={size:0})}sr.prototype.bind=function(){ne.bindBuffer(this.type,this.buffer)},sr.prototype.destroy=function(){Oi(this)};var Or=[];function ri(Lr,_r){var di=Or.pop();return di||(di=new sr(Lr)),di.bind(),fi(di,_r,Ms,0,1,!1),di}function Vr(Lr){Or.push(Lr)}function ni(Lr,_r,di){Lr.byteLength=_r.byteLength,ne.bufferData(Lr.type,_r,di)}function fi(Lr,_r,di,Vi,qr,na){var wi;if(Lr.usage=di,Array.isArray(_r)){if(Lr.dtype=Vi||Ca,_r.length>0){var Pi;if(Array.isArray(_r[0])){wi=Mo(_r);for(var yi=1,bi=1;bi<wi.length;++bi)yi*=wi[bi];Lr.dimension=yi,Pi=xs(_r,wi,Lr.dtype),ni(Lr,Pi,di),na?Lr.persistentData=Pi:En.freeType(Pi)}else if(typeof _r[0]=="number"){Lr.dimension=qr;var ra=En.allocType(Lr.dtype,_r.length);Gr(ra,_r),ni(Lr,ra,di),na?Lr.persistentData=ra:En.freeType(ra)}else U(_r[0])?(Lr.dimension=_r[0].length,Lr.dtype=Vi||hr(_r[0])||Ca,Pi=xs(_r,[_r.length,_r[0].length],Lr.dtype),ni(Lr,Pi,di),na?Lr.persistentData=Pi:En.freeType(Pi)):q.raise("invalid buffer data")}}else if(U(_r))Lr.dtype=Vi||hr(_r),Lr.dimension=qr,ni(Lr,_r,di),na&&(Lr.persistentData=new Uint8Array(new Uint8Array(_r.buffer)));else if(oe(_r)){wi=_r.shape;var ha=_r.stride,Ni=_r.offset,Ei=0,gi=0,za=0,$i=0;wi.length===1?(Ei=wi[0],gi=1,za=ha[0],$i=0):wi.length===2?(Ei=wi[0],gi=wi[1],za=ha[0],$i=ha[1]):q.raise("invalid shape"),Lr.dtype=Vi||hr(_r.data)||Ca,Lr.dimension=gi;var Gi=En.allocType(Lr.dtype,Ei*gi);Ui(Gi,_r.data,Ei,gi,za,$i,Ni),ni(Lr,Gi,di),na?Lr.persistentData=Gi:En.freeType(Gi)}else _r instanceof ArrayBuffer?(Lr.dtype=as,Lr.dimension=qr,ni(Lr,_r,di),na&&(Lr.persistentData=new Uint8Array(new Uint8Array(_r)))):q.raise("invalid buffer data")}function Oi(Lr){_e.bufferCount--,In(Lr);var _r=Lr.buffer;q(_r,"buffer must not be deleted already"),ne.deleteBuffer(_r),Lr.buffer=null,delete ur[Lr.id]}function vi(Lr,_r,di,Vi){_e.bufferCount++;var qr=new sr(_r);ur[qr.id]=qr;function na(yi){var bi=$a,ra=null,ha=0,Ni=0,Ei=1;return Array.isArray(yi)||U(yi)||oe(yi)||yi instanceof ArrayBuffer?ra=yi:typeof yi=="number"?ha=yi|0:yi&&(q.type(yi,"object","buffer arguments must be an object, a number or an array"),"data"in yi&&(q(ra===null||Array.isArray(ra)||U(ra)||oe(ra),"invalid data for buffer"),ra=yi.data),"usage"in yi&&(q.parameter(yi.usage,Do,"invalid buffer usage"),bi=Do[yi.usage]),"type"in yi&&(q.parameter(yi.type,Ja,"invalid buffer type"),Ni=Ja[yi.type]),"dimension"in yi&&(q.type(yi.dimension,"number","invalid dimension"),Ei=yi.dimension|0),"length"in yi&&(q.nni(ha,"buffer length must be a nonnegative integer"),ha=yi.length|0)),qr.bind(),ra?fi(qr,ra,bi,Ni,Ei,Vi):(ha&&ne.bufferData(qr.type,ha,bi),qr.dtype=Ni||as,qr.usage=bi,qr.dimension=Ei,qr.byteLength=ha),Ze.profile&&(qr.stats.size=qr.byteLength*mn[qr.dtype]),na}function wi(yi,bi){q(bi+yi.byteLength<=qr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+yi.byteLength+" starting from offset "+bi+" to a buffer of size "+qr.byteLength),ne.bufferSubData(qr.type,bi,yi)}function Pi(yi,bi){var ra=(bi||0)|0,ha;if(qr.bind(),U(yi)||yi instanceof ArrayBuffer)wi(yi,ra);else if(Array.isArray(yi)){if(yi.length>0)if(typeof yi[0]=="number"){var Ni=En.allocType(qr.dtype,yi.length);Gr(Ni,yi),wi(Ni,ra),En.freeType(Ni)}else if(Array.isArray(yi[0])||U(yi[0])){ha=Mo(yi);var Ei=xs(yi,ha,qr.dtype);wi(Ei,ra),En.freeType(Ei)}else q.raise("invalid buffer data")}else if(oe(yi)){ha=yi.shape;var gi=yi.stride,za=0,$i=0,Gi=0,co=0;ha.length===1?(za=ha[0],$i=1,Gi=gi[0],co=0):ha.length===2?(za=ha[0],$i=ha[1],Gi=gi[0],co=gi[1]):q.raise("invalid shape");var qa=Array.isArray(yi.data)?qr.dtype:hr(yi.data),Ao=En.allocType(qa,za*$i);Ui(Ao,yi.data,za,$i,Gi,co,yi.offset),wi(Ao,ra),En.freeType(Ao)}else q.raise("invalid data for buffer subdata");return na}return di||na(Lr),na._reglType="buffer",na._buffer=qr,na.subdata=Pi,Ze.profile&&(na.stats=qr.stats),na.destroy=function(){Oi(qr)},na}function si(){Ht(ur).forEach(function(Lr){Lr.buffer=ne.createBuffer(),ne.bindBuffer(Lr.type,Lr.buffer),ne.bufferData(Lr.type,Lr.persistentData||Lr.byteLength,Lr.usage)})}return Ze.profile&&(_e.getTotalBufferSize=function(){var Lr=0;return Object.keys(ur).forEach(function(_r){Lr+=ur[_r].stats.size}),Lr}),{create:vi,createStream:ri,destroyStream:Vr,clear:function(){Ht(ur).forEach(Oi),Or.forEach(Oi)},getBuffer:function(_r){return _r&&_r._buffer instanceof sr?_r._buffer:null},restore:si,_initBuffer:fi}}var xo=0,vo=0,qi=1,Qa=1,bs=4,Es=4,Ga={points:xo,point:vo,lines:qi,line:Qa,triangles:bs,triangle:Es,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Pu=0,Uo=1,Ps=4,Qs=5120,fs=5121,hs=5122,os=5123,ds=5124,Ts=5125,Ou=34963,Uu=35040,uo=35044;function Fs(ne,_e,Ze,In){var ar={},ur=0,sr={uint8:fs,uint16:os};_e.oes_element_index_uint&&(sr.uint32=Ts);function Or(si){this.id=ur++,ar[this.id]=this,this.buffer=si,this.primType=Ps,this.vertCount=0,this.type=0}Or.prototype.bind=function(){this.buffer.bind()};var ri=[];function Vr(si){var Lr=ri.pop();return Lr||(Lr=new Or(Ze.create(null,Ou,!0,!1)._buffer)),fi(Lr,si,Uu,-1,-1,0,0),Lr}function ni(si){ri.push(si)}function fi(si,Lr,_r,di,Vi,qr,na){si.buffer.bind();var wi;if(Lr){var Pi=na;!na&&(!U(Lr)||oe(Lr)&&!U(Lr.data))&&(Pi=_e.oes_element_index_uint?Ts:os),Ze._initBuffer(si.buffer,Lr,_r,Pi,3)}else ne.bufferData(Ou,qr,_r),si.buffer.dtype=wi||fs,si.buffer.usage=_r,si.buffer.dimension=3,si.buffer.byteLength=qr;if(wi=na,!na){switch(si.buffer.dtype){case fs:case Qs:wi=fs;break;case os:case hs:wi=os;break;case Ts:case ds:wi=Ts;break;default:q.raise("unsupported type for element array")}si.buffer.dtype=wi}si.type=wi,q(wi!==Ts||!!_e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var yi=Vi;yi<0&&(yi=si.buffer.byteLength,wi===os?yi>>=1:wi===Ts&&(yi>>=2)),si.vertCount=yi;var bi=di;if(di<0){bi=Ps;var ra=si.buffer.dimension;ra===1&&(bi=Pu),ra===2&&(bi=Uo),ra===3&&(bi=Ps)}si.primType=bi}function Oi(si){In.elementsCount--,q(si.buffer!==null,"must not double destroy elements"),delete ar[si.id],si.buffer.destroy(),si.buffer=null}function vi(si,Lr){var _r=Ze.create(null,Ou,!0),di=new Or(_r._buffer);In.elementsCount++;function Vi(qr){if(!qr)_r(),di.primType=Ps,di.vertCount=0,di.type=fs;else if(typeof qr=="number")_r(qr),di.primType=Ps,di.vertCount=qr|0,di.type=fs;else{var na=null,wi=uo,Pi=-1,yi=-1,bi=0,ra=0;Array.isArray(qr)||U(qr)||oe(qr)?na=qr:(q.type(qr,"object","invalid arguments for elements"),"data"in qr&&(na=qr.data,q(Array.isArray(na)||U(na)||oe(na),"invalid data for element buffer")),"usage"in qr&&(q.parameter(qr.usage,Do,"invalid element buffer usage"),wi=Do[qr.usage]),"primitive"in qr&&(q.parameter(qr.primitive,Ga,"invalid element buffer primitive"),Pi=Ga[qr.primitive]),"count"in qr&&(q(typeof qr.count=="number"&&qr.count>=0,"invalid vertex count for elements"),yi=qr.count|0),"type"in qr&&(q.parameter(qr.type,sr,"invalid buffer type"),ra=sr[qr.type]),"length"in qr?bi=qr.length|0:(bi=yi,ra===os||ra===hs?bi*=2:(ra===Ts||ra===ds)&&(bi*=4))),fi(di,na,wi,Pi,yi,bi,ra)}return Vi}return Vi(si),Vi._reglType="elements",Vi._elements=di,Vi.subdata=function(qr,na){return _r.subdata(qr,na),Vi},Vi.destroy=function(){Oi(di)},Vi}return{create:vi,createStream:Vr,destroyStream:ni,getElements:function(Lr){return typeof Lr=="function"&&Lr._elements instanceof Or?Lr._elements:null},clear:function(){Ht(ar).forEach(Oi)}}}var ku=new Float32Array(1),ul=new Uint32Array(ku.buffer),ll=5123;function Qu(ne){for(var _e=En.allocType(ll,ne.length),Ze=0;Ze<ne.length;++Ze)if(isNaN(ne[Ze]))_e[Ze]=65535;else if(ne[Ze]===Infinity)_e[Ze]=31744;else if(ne[Ze]===-Infinity)_e[Ze]=64512;else{ku[0]=ne[Ze];var In=ul[0],ar=In>>>31<<15,ur=(In<<1>>>24)-127,sr=In>>13&(1<<10)-1;if(ur<-24)_e[Ze]=ar;else if(ur<-14){var Or=-14-ur;_e[Ze]=ar+(sr+(1<<10)>>Or)}else ur>15?_e[Ze]=ar+31744:_e[Ze]=ar+(ur+15<<10)+sr}return _e}function To(ne){return Array.isArray(ne)||U(ne)}var La=function(_e){return!(_e&_e-1)&&!!_e},ya=34467,wo=3553,pu=34067,El=34069,zs=6408,Ss=6406,ou=6407,qs=6409,Ls=6410,qu=32854,su=32855,Wa=36194,Sl=32819,Ql=32820,_l=33635,ql=34042,Gu=6402,Ha=34041,uu=35904,Ml=35906,vs=36193,wu=33776,gu=33777,Vu=33778,Ws=33779,Jo=35986,ss=35987,cl=34798,Rl=35840,tc=35841,Wu=35842,tl=35843,Iu=36196,Lu=5121,mu=5123,Hu=5125,Us=5126,Dl=10242,hc=10243,Pl=10497,jl=33071,Bl=33648,sc=10240,el=10241,Tl=9728,Nl=9729,tu=9984,po=9985,pl=9986,fl=9987,Hs=33170,Da=4352,bo=4353,ks=4354,gl=34046,nl=3317,Yu=37440,dc=37441,As=37443,rl=37444,lu=33984,Ys=[tu,pl,po,fl],$o=[0,qs,Ls,ou,zs],eu={};eu[qs]=eu[Ss]=eu[Gu]=1,eu[Ha]=eu[Ls]=2,eu[ou]=eu[uu]=3,eu[zs]=eu[Ml]=4;function Ru(ne){return"[object "+ne+"]"}var Qo=Ru("HTMLCanvasElement"),Wi=Ru("OffscreenCanvas"),Cs=Ru("CanvasRenderingContext2D"),Zu=Ru("ImageBitmap"),Du=Ru("HTMLImageElement"),jo=Ru("HTMLVideoElement"),Bo=Object.keys(Ci).concat([Qo,Wi,Cs,Zu,Du,jo]),Tu=[];Tu[Lu]=1,Tu[Us]=4,Tu[vs]=2,Tu[mu]=2,Tu[Hu]=4;var Mi=[];Mi[qu]=2,Mi[su]=2,Mi[Wa]=2,Mi[Ha]=4,Mi[wu]=.5,Mi[gu]=.5,Mi[Vu]=1,Mi[Ws]=1,Mi[Jo]=.5,Mi[ss]=1,Mi[cl]=1,Mi[Rl]=.5,Mi[tc]=.25,Mi[Wu]=.5,Mi[tl]=.25,Mi[Iu]=.5;function il(ne){return Array.isArray(ne)&&(ne.length===0||typeof ne[0]=="number")}function ju(ne){if(!Array.isArray(ne))return!1;var _e=ne.length;return!(_e===0||!To(ne[0]))}function Bu(ne){return Object.prototype.toString.call(ne)}function nu(ne){return Bu(ne)===Qo}function we(ne){return Bu(ne)===Wi}function Pe(ne){return Bu(ne)===Cs}function dn(ne){return Bu(ne)===Zu}function tn(ne){return Bu(ne)===Du}function wn(ne){return Bu(ne)===jo}function dr(ne){if(!ne)return!1;var _e=Bu(ne);return Bo.indexOf(_e)>=0?!0:il(ne)||ju(ne)||oe(ne)}function Rr(ne){return Ci[Object.prototype.toString.call(ne)]|0}function Xr(ne,_e){var Ze=_e.length;switch(ne.type){case Lu:case mu:case Hu:case Us:var In=En.allocType(ne.type,Ze);In.set(_e),ne.data=In;break;case vs:ne.data=Qu(_e);break;default:q.raise("unsupported texture type, must specify a typed array")}}function ti(ne,_e){return En.allocType(ne.type===vs?Us:ne.type,_e)}function Fr(ne,_e){ne.type===vs?(ne.data=Qu(_e),En.freeType(_e)):ne.data=_e}function li(ne,_e,Ze,In,ar,ur){for(var sr=ne.width,Or=ne.height,ri=ne.channels,Vr=sr*Or*ri,ni=ti(ne,Vr),fi=0,Oi=0;Oi<Or;++Oi)for(var vi=0;vi<sr;++vi)for(var si=0;si<ri;++si)ni[fi++]=_e[Ze*vi+In*Oi+ar*si+ur];Fr(ne,ni)}function yr(ne,_e,Ze,In,ar,ur){var sr;if(typeof Mi[ne]!="undefined"?sr=Mi[ne]:sr=eu[ne]*Tu[_e],ur&&(sr*=6),ar){for(var Or=0,ri=Ze;ri>=1;)Or+=sr*ri*ri,ri/=2;return Or}else return sr*Ze*In}function Zt(ne,_e,Ze,In,ar,ur,sr){var Or={"don't care":Da,"dont care":Da,nice:ks,fast:bo},ri={repeat:Pl,clamp:jl,mirror:Bl},Vr={nearest:Tl,linear:Nl},ni=E({mipmap:fl,"nearest mipmap nearest":tu,"linear mipmap nearest":po,"nearest mipmap linear":pl,"linear mipmap linear":fl},Vr),fi={none:0,browser:rl},Oi={uint8:Lu,rgba4:Sl,rgb565:_l,"rgb5 a1":Ql},vi={alpha:Ss,luminance:qs,"luminance alpha":Ls,rgb:ou,rgba:zs,rgba4:qu,"rgb5 a1":su,rgb565:Wa},si={};_e.ext_srgb&&(vi.srgb=uu,vi.srgba=Ml),_e.oes_texture_float&&(Oi.float32=Oi.float=Us),_e.oes_texture_half_float&&(Oi.float16=Oi["half float"]=vs),_e.webgl_depth_texture&&(E(vi,{depth:Gu,"depth stencil":Ha}),E(Oi,{uint16:mu,uint32:Hu,"depth stencil":ql})),_e.webgl_compressed_texture_s3tc&&E(si,{"rgb s3tc dxt1":wu,"rgba s3tc dxt1":gu,"rgba s3tc dxt3":Vu,"rgba s3tc dxt5":Ws}),_e.webgl_compressed_texture_atc&&E(si,{"rgb atc":Jo,"rgba atc explicit alpha":ss,"rgba atc interpolated alpha":cl}),_e.webgl_compressed_texture_pvrtc&&E(si,{"rgb pvrtc 4bppv1":Rl,"rgb pvrtc 2bppv1":tc,"rgba pvrtc 4bppv1":Wu,"rgba pvrtc 2bppv1":tl}),_e.webgl_compressed_texture_etc1&&(si["rgb etc1"]=Iu);var Lr=Array.prototype.slice.call(ne.getParameter(ya));Object.keys(si).forEach(function(jn){var Zr=si[jn];Lr.indexOf(Zr)>=0&&(vi[jn]=Zr)});var _r=Object.keys(vi);Ze.textureFormats=_r;var di=[];Object.keys(vi).forEach(function(jn){var Zr=vi[jn];di[Zr]=jn});var Vi=[];Object.keys(Oi).forEach(function(jn){var Zr=Oi[jn];Vi[Zr]=jn});var qr=[];Object.keys(Vr).forEach(function(jn){var Zr=Vr[jn];qr[Zr]=jn});var na=[];Object.keys(ni).forEach(function(jn){var Zr=ni[jn];na[Zr]=jn});var wi=[];Object.keys(ri).forEach(function(jn){var Zr=ri[jn];wi[Zr]=jn});var Pi=_r.reduce(function(jn,Zr){var Ur=vi[Zr];return Ur===qs||Ur===Ss||Ur===qs||Ur===Ls||Ur===Gu||Ur===Ha||_e.ext_srgb&&(Ur===uu||Ur===Ml)?jn[Ur]=Ur:Ur===su||Zr.indexOf("rgba")>=0?jn[Ur]=zs:jn[Ur]=ou,jn},{});function yi(){this.internalformat=zs,this.format=zs,this.type=Lu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=rl,this.width=0,this.height=0,this.channels=0}function bi(jn,Zr){jn.internalformat=Zr.internalformat,jn.format=Zr.format,jn.type=Zr.type,jn.compressed=Zr.compressed,jn.premultiplyAlpha=Zr.premultiplyAlpha,jn.flipY=Zr.flipY,jn.unpackAlignment=Zr.unpackAlignment,jn.colorSpace=Zr.colorSpace,jn.width=Zr.width,jn.height=Zr.height,jn.channels=Zr.channels}function ra(jn,Zr){if(!(typeof Zr!="object"||!Zr)){if("premultiplyAlpha"in Zr&&(q.type(Zr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),jn.premultiplyAlpha=Zr.premultiplyAlpha),"flipY"in Zr&&(q.type(Zr.flipY,"boolean","invalid texture flip"),jn.flipY=Zr.flipY),"alignment"in Zr&&(q.oneOf(Zr.alignment,[1,2,4,8],"invalid texture unpack alignment"),jn.unpackAlignment=Zr.alignment),"colorSpace"in Zr&&(q.parameter(Zr.colorSpace,fi,"invalid colorSpace"),jn.colorSpace=fi[Zr.colorSpace]),"type"in Zr){var Ur=Zr.type;q(_e.oes_texture_float||!(Ur==="float"||Ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),q(_e.oes_texture_half_float||!(Ur==="half float"||Ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),q(_e.webgl_depth_texture||!(Ur==="uint16"||Ur==="uint32"||Ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter(Ur,Oi,"invalid texture type"),jn.type=Oi[Ur]}var Qi=jn.width,Po=jn.height,Mn=jn.channels,on=!1;"shape"in Zr?(q(Array.isArray(Zr.shape)&&Zr.shape.length>=2,"shape must be an array"),Qi=Zr.shape[0],Po=Zr.shape[1],Zr.shape.length===3&&(Mn=Zr.shape[2],q(Mn>0&&Mn<=4,"invalid number of channels"),on=!0),q(Qi>=0&&Qi<=Ze.maxTextureSize,"invalid width"),q(Po>=0&&Po<=Ze.maxTextureSize,"invalid height")):("radius"in Zr&&(Qi=Po=Zr.radius,q(Qi>=0&&Qi<=Ze.maxTextureSize,"invalid radius")),"width"in Zr&&(Qi=Zr.width,q(Qi>=0&&Qi<=Ze.maxTextureSize,"invalid width")),"height"in Zr&&(Po=Zr.height,q(Po>=0&&Po<=Ze.maxTextureSize,"invalid height")),"channels"in Zr&&(Mn=Zr.channels,q(Mn>0&&Mn<=4,"invalid number of channels"),on=!0)),jn.width=Qi|0,jn.height=Po|0,jn.channels=Mn|0;var er=!1;if("format"in Zr){var Ir=Zr.format;q(_e.webgl_depth_texture||!(Ir==="depth"||Ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter(Ir,vi,"invalid texture format");var wr=jn.internalformat=vi[Ir];jn.format=Pi[wr],Ir in Oi&&("type"in Zr||(jn.type=Oi[Ir])),Ir in si&&(jn.compressed=!0),er=!0}!on&&er?jn.channels=eu[jn.format]:on&&!er?jn.channels!==$o[jn.format]&&(jn.format=jn.internalformat=$o[jn.channels]):er&&on&&q(jn.channels===eu[jn.format],"number of channels inconsistent with specified format")}}function ha(jn){ne.pixelStorei(Yu,jn.flipY),ne.pixelStorei(dc,jn.premultiplyAlpha),ne.pixelStorei(As,jn.colorSpace),ne.pixelStorei(nl,jn.unpackAlignment)}function Ni(){yi.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ei(jn,Zr){var Ur=null;if(dr(Zr)?Ur=Zr:Zr&&(q.type(Zr,"object","invalid pixel data type"),ra(jn,Zr),"x"in Zr&&(jn.xOffset=Zr.x|0),"y"in Zr&&(jn.yOffset=Zr.y|0),dr(Zr.data)&&(Ur=Zr.data)),q(!jn.compressed||Ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Zr.copy){q(!Ur,"can not specify copy and data field for the same texture");var Qi=ar.viewportWidth,Po=ar.viewportHeight;jn.width=jn.width||Qi-jn.xOffset,jn.height=jn.height||Po-jn.yOffset,jn.needsCopy=!0,q(jn.xOffset>=0&&jn.xOffset<Qi&&jn.yOffset>=0&&jn.yOffset<Po&&jn.width>0&&jn.width<=Qi&&jn.height>0&&jn.height<=Po,"copy texture read out of bounds")}else if(!Ur)jn.width=jn.width||1,jn.height=jn.height||1,jn.channels=jn.channels||4;else if(U(Ur))jn.channels=jn.channels||4,jn.data=Ur,!("type"in Zr)&&jn.type===Lu&&(jn.type=Rr(Ur));else if(il(Ur))jn.channels=jn.channels||4,Xr(jn,Ur),jn.alignment=1,jn.needsFree=!0;else if(oe(Ur)){var Mn=Ur.data;!Array.isArray(Mn)&&jn.type===Lu&&(jn.type=Rr(Mn));var on=Ur.shape,er=Ur.stride,Ir,wr,lr,nr,Er,Tn;on.length===3?(lr=on[2],Tn=er[2]):(q(on.length===2,"invalid ndarray pixel data, must be 2 or 3D"),lr=1,Tn=1),Ir=on[0],wr=on[1],nr=er[0],Er=er[1],jn.alignment=1,jn.width=Ir,jn.height=wr,jn.channels=lr,jn.format=jn.internalformat=$o[lr],jn.needsFree=!0,li(jn,Mn,nr,Er,Tn,Ur.offset)}else if(nu(Ur)||we(Ur)||Pe(Ur))nu(Ur)||we(Ur)?jn.element=Ur:jn.element=Ur.canvas,jn.width=jn.element.width,jn.height=jn.element.height,jn.channels=4;else if(dn(Ur))jn.element=Ur,jn.width=Ur.width,jn.height=Ur.height,jn.channels=4;else if(tn(Ur))jn.element=Ur,jn.width=Ur.naturalWidth,jn.height=Ur.naturalHeight,jn.channels=4;else if(wn(Ur))jn.element=Ur,jn.width=Ur.videoWidth,jn.height=Ur.videoHeight,jn.channels=4;else if(ju(Ur)){var Kn=jn.width||Ur[0].length,xn=jn.height||Ur.length,Tr=jn.channels;To(Ur[0][0])?Tr=Tr||Ur[0][0].length:Tr=Tr||1;for(var jr=Ee.shape(Ur),ci=1,Kr=0;Kr<jr.length;++Kr)ci*=jr[Kr];var oi=ti(jn,ci);Ee.flatten(Ur,jr,"",oi),Fr(jn,oi),jn.alignment=1,jn.width=Kn,jn.height=xn,jn.channels=Tr,jn.format=jn.internalformat=$o[Tr],jn.needsFree=!0}jn.type===Us?q(Ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):jn.type===vs&&q(Ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function gi(jn,Zr,Ur){var Qi=jn.element,Po=jn.data,Mn=jn.internalformat,on=jn.format,er=jn.type,Ir=jn.width,wr=jn.height;ha(jn),Qi?ne.texImage2D(Zr,Ur,on,on,er,Qi):jn.compressed?ne.compressedTexImage2D(Zr,Ur,Mn,Ir,wr,0,Po):jn.needsCopy?(In(),ne.copyTexImage2D(Zr,Ur,on,jn.xOffset,jn.yOffset,Ir,wr,0)):ne.texImage2D(Zr,Ur,on,Ir,wr,0,on,er,Po||null)}function za(jn,Zr,Ur,Qi,Po){var Mn=jn.element,on=jn.data,er=jn.internalformat,Ir=jn.format,wr=jn.type,lr=jn.width,nr=jn.height;ha(jn),Mn?ne.texSubImage2D(Zr,Po,Ur,Qi,Ir,wr,Mn):jn.compressed?ne.compressedTexSubImage2D(Zr,Po,Ur,Qi,er,lr,nr,on):jn.needsCopy?(In(),ne.copyTexSubImage2D(Zr,Po,Ur,Qi,jn.xOffset,jn.yOffset,lr,nr)):ne.texSubImage2D(Zr,Po,Ur,Qi,lr,nr,Ir,wr,on)}var $i=[];function Gi(){return $i.pop()||new Ni}function co(jn){jn.needsFree&&En.freeType(jn.data),Ni.call(jn),$i.push(jn)}function qa(){yi.call(this),this.genMipmaps=!1,this.mipmapHint=Da,this.mipmask=0,this.images=Array(16)}function Ao(jn,Zr,Ur){var Qi=jn.images[0]=Gi();jn.mipmask=1,Qi.width=jn.width=Zr,Qi.height=jn.height=Ur,Qi.channels=jn.channels=4}function Fo(jn,Zr){var Ur=null;if(dr(Zr))Ur=jn.images[0]=Gi(),bi(Ur,jn),Ei(Ur,Zr),jn.mipmask=1;else if(ra(jn,Zr),Array.isArray(Zr.mipmap))for(var Qi=Zr.mipmap,Po=0;Po<Qi.length;++Po)Ur=jn.images[Po]=Gi(),bi(Ur,jn),Ur.width>>=Po,Ur.height>>=Po,Ei(Ur,Qi[Po]),jn.mipmask|=1<<Po;else Ur=jn.images[0]=Gi(),bi(Ur,jn),Ei(Ur,Zr),jn.mipmask=1;bi(jn,jn.images[0]),jn.compressed&&(jn.internalformat===wu||jn.internalformat===gu||jn.internalformat===Vu||jn.internalformat===Ws)&&q(jn.width%4==0&&jn.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function dl(jn,Zr){for(var Ur=jn.images,Qi=0;Qi<Ur.length;++Qi){if(!Ur[Qi])return;gi(Ur[Qi],Zr,Qi)}}var kl=[];function Vo(){var jn=kl.pop()||new qa;yi.call(jn),jn.mipmask=0;for(var Zr=0;Zr<16;++Zr)jn.images[Zr]=null;return jn}function vl(jn){for(var Zr=jn.images,Ur=0;Ur<Zr.length;++Ur)Zr[Ur]&&co(Zr[Ur]),Zr[Ur]=null;kl.push(jn)}function Zs(){this.minFilter=Tl,this.magFilter=Tl,this.wrapS=jl,this.wrapT=jl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Da}function Gl(jn,Zr){if("min"in Zr){var Ur=Zr.min;q.parameter(Ur,ni),jn.minFilter=ni[Ur],Ys.indexOf(jn.minFilter)>=0&&!("faces"in Zr)&&(jn.genMipmaps=!0)}if("mag"in Zr){var Qi=Zr.mag;q.parameter(Qi,Vr),jn.magFilter=Vr[Qi]}var Po=jn.wrapS,Mn=jn.wrapT;if("wrap"in Zr){var on=Zr.wrap;typeof on=="string"?(q.parameter(on,ri),Po=Mn=ri[on]):Array.isArray(on)&&(q.parameter(on[0],ri),q.parameter(on[1],ri),Po=ri[on[0]],Mn=ri[on[1]])}else{if("wrapS"in Zr){var er=Zr.wrapS;q.parameter(er,ri),Po=ri[er]}if("wrapT"in Zr){var Ir=Zr.wrapT;q.parameter(Ir,ri),Mn=ri[Ir]}}if(jn.wrapS=Po,jn.wrapT=Mn,"anisotropic"in Zr){var wr=Zr.anisotropic;q(typeof wr=="number"&&wr>=1&&wr<=Ze.maxAnisotropic,"aniso samples must be between 1 and "),jn.anisotropic=Zr.anisotropic}if("mipmap"in Zr){var lr=!1;switch(typeof Zr.mipmap){case"string":q.parameter(Zr.mipmap,Or,"invalid mipmap hint"),jn.mipmapHint=Or[Zr.mipmap],jn.genMipmaps=!0,lr=!0;break;case"boolean":lr=jn.genMipmaps=Zr.mipmap;break;case"object":q(Array.isArray(Zr.mipmap),"invalid mipmap type"),jn.genMipmaps=!1,lr=!0;break;default:q.raise("invalid mipmap type")}lr&&!("min"in Zr)&&(jn.minFilter=tu)}}function Zl(jn,Zr){ne.texParameteri(Zr,el,jn.minFilter),ne.texParameteri(Zr,sc,jn.magFilter),ne.texParameteri(Zr,Dl,jn.wrapS),ne.texParameteri(Zr,hc,jn.wrapT),_e.ext_texture_filter_anisotropic&&ne.texParameteri(Zr,gl,jn.anisotropic),jn.genMipmaps&&(ne.hint(Hs,jn.mipmapHint),ne.generateMipmap(Zr))}var ac=0,uc={},gc=Ze.maxTextureUnits,Vl=Array(gc).map(function(){return null});function Co(jn){yi.call(this),this.mipmask=0,this.internalformat=zs,this.id=ac++,this.refCount=1,this.target=jn,this.texture=ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Zs,sr.profile&&(this.stats={size:0})}function Sc(jn){ne.activeTexture(lu),ne.bindTexture(jn.target,jn.texture)}function Ks(){var jn=Vl[0];jn?ne.bindTexture(jn.target,jn.texture):ne.bindTexture(wo,null)}function Ua(jn){var Zr=jn.texture;q(Zr,"must not double destroy texture");var Ur=jn.unit,Qi=jn.target;Ur>=0&&(ne.activeTexture(lu+Ur),ne.bindTexture(Qi,null),Vl[Ur]=null),ne.deleteTexture(Zr),jn.texture=null,jn.params=null,jn.pixels=null,jn.refCount=0,delete uc[jn.id],ur.textureCount--}E(Co.prototype,{bind:function(){var Zr=this;Zr.bindCount+=1;var Ur=Zr.unit;if(Ur<0){for(var Qi=0;Qi<gc;++Qi){var Po=Vl[Qi];if(Po){if(Po.bindCount>0)continue;Po.unit=-1}Vl[Qi]=Zr,Ur=Qi;break}Ur>=gc&&q.raise("insufficient number of texture units"),sr.profile&&ur.maxTextureUnits<Ur+1&&(ur.maxTextureUnits=Ur+1),Zr.unit=Ur,ne.activeTexture(lu+Ur),ne.bindTexture(Zr.target,Zr.texture)}return Ur},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ua(this)}});function ho(jn,Zr){var Ur=new Co(wo);uc[Ur.id]=Ur,ur.textureCount++;function Qi(on,er){var Ir=Ur.texInfo;Zs.call(Ir);var wr=Vo();return typeof on=="number"?typeof er=="number"?Ao(wr,on|0,er|0):Ao(wr,on|0,on|0):on?(q.type(on,"object","invalid arguments to regl.texture"),Gl(Ir,on),Fo(wr,on)):Ao(wr,1,1),Ir.genMipmaps&&(wr.mipmask=(wr.width<<1)-1),Ur.mipmask=wr.mipmask,bi(Ur,wr),q.texture2D(Ir,wr,Ze),Ur.internalformat=wr.internalformat,Qi.width=wr.width,Qi.height=wr.height,Sc(Ur),dl(wr,wo),Zl(Ir,wo),Ks(),vl(wr),sr.profile&&(Ur.stats.size=yr(Ur.internalformat,Ur.type,wr.width,wr.height,Ir.genMipmaps,!1)),Qi.format=di[Ur.internalformat],Qi.type=Vi[Ur.type],Qi.mag=qr[Ir.magFilter],Qi.min=na[Ir.minFilter],Qi.wrapS=wi[Ir.wrapS],Qi.wrapT=wi[Ir.wrapT],Qi}function Po(on,er,Ir,wr){q(!!on,"must specify image data");var lr=er|0,nr=Ir|0,Er=wr|0,Tn=Gi();return bi(Tn,Ur),Tn.width=0,Tn.height=0,Ei(Tn,on),Tn.width=Tn.width||(Ur.width>>Er)-lr,Tn.height=Tn.height||(Ur.height>>Er)-nr,q(Ur.type===Tn.type&&Ur.format===Tn.format&&Ur.internalformat===Tn.internalformat,"incompatible format for texture.subimage"),q(lr>=0&&nr>=0&&lr+Tn.width<=Ur.width&&nr+Tn.height<=Ur.height,"texture.subimage write out of bounds"),q(Ur.mipmask&1<<Er,"missing mipmap data"),q(Tn.data||Tn.element||Tn.needsCopy,"missing image data"),Sc(Ur),za(Tn,wo,lr,nr,Er),Ks(),co(Tn),Qi}function Mn(on,er){var Ir=on|0,wr=er|0||Ir;if(Ir===Ur.width&&wr===Ur.height)return Qi;Qi.width=Ur.width=Ir,Qi.height=Ur.height=wr,Sc(Ur);for(var lr=0;Ur.mipmask>>lr;++lr){var nr=Ir>>lr,Er=wr>>lr;if(!nr||!Er)break;ne.texImage2D(wo,lr,Ur.format,nr,Er,0,Ur.format,Ur.type,null)}return Ks(),sr.profile&&(Ur.stats.size=yr(Ur.internalformat,Ur.type,Ir,wr,!1,!1)),Qi}return Qi(jn,Zr),Qi.subimage=Po,Qi.resize=Mn,Qi._reglType="texture2d",Qi._texture=Ur,sr.profile&&(Qi.stats=Ur.stats),Qi.destroy=function(){Ur.decRef()},Qi}function ns(jn,Zr,Ur,Qi,Po,Mn){var on=new Co(pu);uc[on.id]=on,ur.cubeCount++;var er=new Array(6);function Ir(nr,Er,Tn,Kn,xn,Tr){var jr,ci=on.texInfo;for(Zs.call(ci),jr=0;jr<6;++jr)er[jr]=Vo();if(typeof nr=="number"||!nr){var Kr=nr|0||1;for(jr=0;jr<6;++jr)Ao(er[jr],Kr,Kr)}else if(typeof nr=="object")if(Er)Fo(er[0],nr),Fo(er[1],Er),Fo(er[2],Tn),Fo(er[3],Kn),Fo(er[4],xn),Fo(er[5],Tr);else if(Gl(ci,nr),ra(on,nr),"faces"in nr){var oi=nr.faces;for(q(Array.isArray(oi)&&oi.length===6,"cube faces must be a length 6 array"),jr=0;jr<6;++jr)q(typeof oi[jr]=="object"&&!!oi[jr],"invalid input for cube map face"),bi(er[jr],on),Fo(er[jr],oi[jr])}else for(jr=0;jr<6;++jr)Fo(er[jr],nr);else q.raise("invalid arguments to cube map");for(bi(on,er[0]),Ze.npotTextureCube||q(La(on.width)&&La(on.height),"your browser does not support non power or two texture dimensions"),ci.genMipmaps?on.mipmask=(er[0].width<<1)-1:on.mipmask=er[0].mipmask,q.textureCube(on,ci,er,Ze),on.internalformat=er[0].internalformat,Ir.width=er[0].width,Ir.height=er[0].height,Sc(on),jr=0;jr<6;++jr)dl(er[jr],El+jr);for(Zl(ci,pu),Ks(),sr.profile&&(on.stats.size=yr(on.internalformat,on.type,Ir.width,Ir.height,ci.genMipmaps,!0)),Ir.format=di[on.internalformat],Ir.type=Vi[on.type],Ir.mag=qr[ci.magFilter],Ir.min=na[ci.minFilter],Ir.wrapS=wi[ci.wrapS],Ir.wrapT=wi[ci.wrapT],jr=0;jr<6;++jr)vl(er[jr]);return Ir}function wr(nr,Er,Tn,Kn,xn){q(!!Er,"must specify image data"),q(typeof nr=="number"&&nr===(nr|0)&&nr>=0&&nr<6,"invalid face");var Tr=Tn|0,jr=Kn|0,ci=xn|0,Kr=Gi();return bi(Kr,on),Kr.width=0,Kr.height=0,Ei(Kr,Er),Kr.width=Kr.width||(on.width>>ci)-Tr,Kr.height=Kr.height||(on.height>>ci)-jr,q(on.type===Kr.type&&on.format===Kr.format&&on.internalformat===Kr.internalformat,"incompatible format for texture.subimage"),q(Tr>=0&&jr>=0&&Tr+Kr.width<=on.width&&jr+Kr.height<=on.height,"texture.subimage write out of bounds"),q(on.mipmask&1<<ci,"missing mipmap data"),q(Kr.data||Kr.element||Kr.needsCopy,"missing image data"),Sc(on),za(Kr,El+nr,Tr,jr,ci),Ks(),co(Kr),Ir}function lr(nr){var Er=nr|0;if(Er!==on.width){Ir.width=on.width=Er,Ir.height=on.height=Er,Sc(on);for(var Tn=0;Tn<6;++Tn)for(var Kn=0;on.mipmask>>Kn;++Kn)ne.texImage2D(El+Tn,Kn,on.format,Er>>Kn,Er>>Kn,0,on.format,on.type,null);return Ks(),sr.profile&&(on.stats.size=yr(on.internalformat,on.type,Ir.width,Ir.height,!1,!0)),Ir}}return Ir(jn,Zr,Ur,Qi,Po,Mn),Ir.subimage=wr,Ir.resize=lr,Ir._reglType="textureCube",Ir._texture=on,sr.profile&&(Ir.stats=on.stats),Ir.destroy=function(){on.decRef()},Ir}function ec(){for(var jn=0;jn<gc;++jn)ne.activeTexture(lu+jn),ne.bindTexture(wo,null),Vl[jn]=null;Ht(uc).forEach(Ua),ur.cubeCount=0,ur.textureCount=0}sr.profile&&(ur.getTotalTextureSize=function(){var jn=0;return Object.keys(uc).forEach(function(Zr){jn+=uc[Zr].stats.size}),jn});function mc(){for(var jn=0;jn<gc;++jn){var Zr=Vl[jn];Zr&&(Zr.bindCount=0,Zr.unit=-1,Vl[jn]=null)}Ht(uc).forEach(function(Ur){Ur.texture=ne.createTexture(),ne.bindTexture(Ur.target,Ur.texture);for(var Qi=0;Qi<32;++Qi)if((Ur.mipmask&1<<Qi)!=0)if(Ur.target===wo)ne.texImage2D(wo,Qi,Ur.internalformat,Ur.width>>Qi,Ur.height>>Qi,0,Ur.internalformat,Ur.type,null);else for(var Po=0;Po<6;++Po)ne.texImage2D(El+Po,Qi,Ur.internalformat,Ur.width>>Qi,Ur.height>>Qi,0,Ur.internalformat,Ur.type,null);Zl(Ur.texInfo,Ur.target)})}function Ef(){for(var jn=0;jn<gc;++jn){var Zr=Vl[jn];Zr&&(Zr.bindCount=0,Zr.unit=-1,Vl[jn]=null),ne.activeTexture(lu+jn),ne.bindTexture(wo,null),ne.bindTexture(pu,null)}}return{create2D:ho,createCube:ns,clear:ec,getTexture:function(Zr){return null},restore:mc,refresh:Ef}}var te=36161,Le=32854,Se=32855,Dt=36194,zt=33189,se=36168,re=34041,fe=35907,Fe=34836,Ke=34842,rn=34843,Je=[];Je[Le]=2,Je[Se]=2,Je[Dt]=2,Je[zt]=2,Je[se]=1,Je[re]=4,Je[fe]=4,Je[Fe]=16,Je[Ke]=8,Je[rn]=6;function pn(ne,_e,Ze){return Je[ne]*_e*Ze}var hn=function(_e,Ze,In,ar,ur){var sr={rgba4:Le,rgb565:Dt,"rgb5 a1":Se,depth:zt,stencil:se,"depth stencil":re};Ze.ext_srgb&&(sr.srgba=fe),Ze.ext_color_buffer_half_float&&(sr.rgba16f=Ke,sr.rgb16f=rn),Ze.webgl_color_buffer_float&&(sr.rgba32f=Fe);var Or=[];Object.keys(sr).forEach(function(si){var Lr=sr[si];Or[Lr]=si});var ri=0,Vr={};function ni(si){this.id=ri++,this.refCount=1,this.renderbuffer=si,this.format=Le,this.width=0,this.height=0,ur.profile&&(this.stats={size:0})}ni.prototype.decRef=function(){--this.refCount<=0&&fi(this)};function fi(si){var Lr=si.renderbuffer;q(Lr,"must not double destroy renderbuffer"),_e.bindRenderbuffer(te,null),_e.deleteRenderbuffer(Lr),si.renderbuffer=null,si.refCount=0,delete Vr[si.id],ar.renderbufferCount--}function Oi(si,Lr){var _r=new ni(_e.createRenderbuffer());Vr[_r.id]=_r,ar.renderbufferCount++;function di(qr,na){var wi=0,Pi=0,yi=Le;if(typeof qr=="object"&&qr){var bi=qr;if("shape"in bi){var ra=bi.shape;q(Array.isArray(ra)&&ra.length>=2,"invalid renderbuffer shape"),wi=ra[0]|0,Pi=ra[1]|0}else"radius"in bi&&(wi=Pi=bi.radius|0),"width"in bi&&(wi=bi.width|0),"height"in bi&&(Pi=bi.height|0);"format"in bi&&(q.parameter(bi.format,sr,"invalid renderbuffer format"),yi=sr[bi.format])}else typeof qr=="number"?(wi=qr|0,typeof na=="number"?Pi=na|0:Pi=wi):qr?q.raise("invalid arguments to renderbuffer constructor"):wi=Pi=1;if(q(wi>0&&Pi>0&&wi<=In.maxRenderbufferSize&&Pi<=In.maxRenderbufferSize,"invalid renderbuffer size"),!(wi===_r.width&&Pi===_r.height&&yi===_r.format))return di.width=_r.width=wi,di.height=_r.height=Pi,_r.format=yi,_e.bindRenderbuffer(te,_r.renderbuffer),_e.renderbufferStorage(te,yi,wi,Pi),q(_e.getError()===0,"invalid render buffer format"),ur.profile&&(_r.stats.size=pn(_r.format,_r.width,_r.height)),di.format=Or[_r.format],di}function Vi(qr,na){var wi=qr|0,Pi=na|0||wi;return wi===_r.width&&Pi===_r.height||(q(wi>0&&Pi>0&&wi<=In.maxRenderbufferSize&&Pi<=In.maxRenderbufferSize,"invalid renderbuffer size"),di.width=_r.width=wi,di.height=_r.height=Pi,_e.bindRenderbuffer(te,_r.renderbuffer),_e.renderbufferStorage(te,_r.format,wi,Pi),q(_e.getError()===0,"invalid render buffer format"),ur.profile&&(_r.stats.size=pn(_r.format,_r.width,_r.height))),di}return di(si,Lr),di.resize=Vi,di._reglType="renderbuffer",di._renderbuffer=_r,ur.profile&&(di.stats=_r.stats),di.destroy=function(){_r.decRef()},di}ur.profile&&(ar.getTotalRenderbufferSize=function(){var si=0;return Object.keys(Vr).forEach(function(Lr){si+=Vr[Lr].stats.size}),si});function vi(){Ht(Vr).forEach(function(si){si.renderbuffer=_e.createRenderbuffer(),_e.bindRenderbuffer(te,si.renderbuffer),_e.renderbufferStorage(te,si.format,si.width,si.height)}),_e.bindRenderbuffer(te,null)}return{create:Oi,clear:function(){Ht(Vr).forEach(fi)},restore:vi}},Jn=36160,Vn=36161,Zn=3553,Wn=34069,cr=36064,xr=36096,Hr=36128,mi=33306,Br=36053,ui=36054,_i=36055,Zi=36057,Ri=36061,Ma=36193,ga=5121,la=5126,ii=6407,Pa=6408,Va=6402,Ya=[ii,Pa],Ii=[];Ii[Pa]=4,Ii[ii]=3;var Ra=[];Ra[ga]=1,Ra[la]=4,Ra[Ma]=2;var lo=32854,Rs=32855,Ds=36194,Ku=33189,hu=36168,j=34041,I=35907,w=34836,B=34842,D=34843,G=[lo,Rs,Ds,I,B,D,w],$={};$[Br]="complete",$[ui]="incomplete attachment",$[Zi]="incomplete dimensions",$[_i]="incomplete, missing attachment",$[Ri]="unsupported";function st(ne,_e,Ze,In,ar,ur){var sr={cur:null,next:null,dirty:!1,setFBO:null},Or=["rgba"],ri=["rgba4","rgb565","rgb5 a1"];_e.ext_srgb&&ri.push("srgba"),_e.ext_color_buffer_half_float&&ri.push("rgba16f","rgb16f"),_e.webgl_color_buffer_float&&ri.push("rgba32f");var Vr=["uint8"];_e.oes_texture_half_float&&Vr.push("half float","float16"),_e.oes_texture_float&&Vr.push("float","float32");function ni(Ni,Ei,gi){this.target=Ni,this.texture=Ei,this.renderbuffer=gi;var za=0,$i=0;Ei?(za=Ei.width,$i=Ei.height):gi&&(za=gi.width,$i=gi.height),this.width=za,this.height=$i}function fi(Ni){Ni&&(Ni.texture&&Ni.texture._texture.decRef(),Ni.renderbuffer&&Ni.renderbuffer._renderbuffer.decRef())}function Oi(Ni,Ei,gi){if(!!Ni)if(Ni.texture){var za=Ni.texture._texture,$i=Math.max(1,za.width),Gi=Math.max(1,za.height);q($i===Ei&&Gi===gi,"inconsistent width/height for supplied texture"),za.refCount+=1}else{var co=Ni.renderbuffer._renderbuffer;q(co.width===Ei&&co.height===gi,"inconsistent width/height for renderbuffer"),co.refCount+=1}}function vi(Ni,Ei){Ei&&(Ei.texture?ne.framebufferTexture2D(Jn,Ni,Ei.target,Ei.texture._texture.texture,0):ne.framebufferRenderbuffer(Jn,Ni,Vn,Ei.renderbuffer._renderbuffer.renderbuffer))}function si(Ni){var Ei=Zn,gi=null,za=null,$i=Ni;typeof Ni=="object"&&($i=Ni.data,"target"in Ni&&(Ei=Ni.target|0)),q.type($i,"function","invalid attachment data");var Gi=$i._reglType;return Gi==="texture2d"?(gi=$i,q(Ei===Zn)):Gi==="textureCube"?(gi=$i,q(Ei>=Wn&&Ei<Wn+6,"invalid cube map target")):Gi==="renderbuffer"?(za=$i,Ei=Vn):q.raise("invalid regl object for attachment"),new ni(Ei,gi,za)}function Lr(Ni,Ei,gi,za,$i){if(gi){var Gi=In.create2D({width:Ni,height:Ei,format:za,type:$i});return Gi._texture.refCount=0,new ni(Zn,Gi,null)}else{var co=ar.create({width:Ni,height:Ei,format:za});return co._renderbuffer.refCount=0,new ni(Vn,null,co)}}function _r(Ni){return Ni&&(Ni.texture||Ni.renderbuffer)}function di(Ni,Ei,gi){Ni&&(Ni.texture?Ni.texture.resize(Ei,gi):Ni.renderbuffer&&Ni.renderbuffer.resize(Ei,gi),Ni.width=Ei,Ni.height=gi)}var Vi=0,qr={};function na(){this.id=Vi++,qr[this.id]=this,this.framebuffer=ne.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function wi(Ni){Ni.colorAttachments.forEach(fi),fi(Ni.depthAttachment),fi(Ni.stencilAttachment),fi(Ni.depthStencilAttachment)}function Pi(Ni){var Ei=Ni.framebuffer;q(Ei,"must not double destroy framebuffer"),ne.deleteFramebuffer(Ei),Ni.framebuffer=null,ur.framebufferCount--,delete qr[Ni.id]}function yi(Ni){var Ei;ne.bindFramebuffer(Jn,Ni.framebuffer);var gi=Ni.colorAttachments;for(Ei=0;Ei<gi.length;++Ei)vi(cr+Ei,gi[Ei]);for(Ei=gi.length;Ei<Ze.maxColorAttachments;++Ei)ne.framebufferTexture2D(Jn,cr+Ei,Zn,null,0);ne.framebufferTexture2D(Jn,mi,Zn,null,0),ne.framebufferTexture2D(Jn,xr,Zn,null,0),ne.framebufferTexture2D(Jn,Hr,Zn,null,0),vi(xr,Ni.depthAttachment),vi(Hr,Ni.stencilAttachment),vi(mi,Ni.depthStencilAttachment);var za=ne.checkFramebufferStatus(Jn);!ne.isContextLost()&&za!==Br&&q.raise("framebuffer configuration not supported, status = "+$[za]),ne.bindFramebuffer(Jn,sr.next?sr.next.framebuffer:null),sr.cur=sr.next,ne.getError()}function bi(Ni,Ei){var gi=new na;ur.framebufferCount++;function za(Gi,co){var qa;q(sr.next!==gi,"can not update framebuffer which is currently in use");var Ao=0,Fo=0,dl=!0,kl=!0,Vo=null,vl=!0,Zs="rgba",Gl="uint8",Zl=1,ac=null,uc=null,gc=null,Vl=!1;if(typeof Gi=="number")Ao=Gi|0,Fo=co|0||Ao;else if(!Gi)Ao=Fo=1;else{q.type(Gi,"object","invalid arguments for framebuffer");var Co=Gi;if("shape"in Co){var Sc=Co.shape;q(Array.isArray(Sc)&&Sc.length>=2,"invalid shape for framebuffer"),Ao=Sc[0],Fo=Sc[1]}else"radius"in Co&&(Ao=Fo=Co.radius),"width"in Co&&(Ao=Co.width),"height"in Co&&(Fo=Co.height);("color"in Co||"colors"in Co)&&(Vo=Co.color||Co.colors,Array.isArray(Vo)&&q(Vo.length===1||_e.webgl_draw_buffers,"multiple render targets not supported")),Vo||("colorCount"in Co&&(Zl=Co.colorCount|0,q(Zl>0,"invalid color buffer count")),"colorTexture"in Co&&(vl=!!Co.colorTexture,Zs="rgba4"),"colorType"in Co&&(Gl=Co.colorType,vl?(q(_e.oes_texture_float||!(Gl==="float"||Gl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),q(_e.oes_texture_half_float||!(Gl==="half float"||Gl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Gl==="half float"||Gl==="float16"?(q(_e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zs="rgba16f"):(Gl==="float"||Gl==="float32")&&(q(_e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zs="rgba32f"),q.oneOf(Gl,Vr,"invalid color type")),"colorFormat"in Co&&(Zs=Co.colorFormat,Or.indexOf(Zs)>=0?vl=!0:ri.indexOf(Zs)>=0?vl=!1:vl?q.oneOf(Co.colorFormat,Or,"invalid color format for texture"):q.oneOf(Co.colorFormat,ri,"invalid color format for renderbuffer"))),("depthTexture"in Co||"depthStencilTexture"in Co)&&(Vl=!!(Co.depthTexture||Co.depthStencilTexture),q(!Vl||_e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Co&&(typeof Co.depth=="boolean"?dl=Co.depth:(ac=Co.depth,kl=!1)),"stencil"in Co&&(typeof Co.stencil=="boolean"?kl=Co.stencil:(uc=Co.stencil,dl=!1)),"depthStencil"in Co&&(typeof Co.depthStencil=="boolean"?dl=kl=Co.depthStencil:(gc=Co.depthStencil,dl=!1,kl=!1))}var Ks=null,Ua=null,ho=null,ns=null;if(Array.isArray(Vo))Ks=Vo.map(si);else if(Vo)Ks=[si(Vo)];else for(Ks=new Array(Zl),qa=0;qa<Zl;++qa)Ks[qa]=Lr(Ao,Fo,vl,Zs,Gl);q(_e.webgl_draw_buffers||Ks.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),q(Ks.length<=Ze.maxColorAttachments,"too many color attachments, not supported"),Ao=Ao||Ks[0].width,Fo=Fo||Ks[0].height,ac?Ua=si(ac):dl&&!kl&&(Ua=Lr(Ao,Fo,Vl,"depth","uint32")),uc?ho=si(uc):kl&&!dl&&(ho=Lr(Ao,Fo,!1,"stencil","uint8")),gc?ns=si(gc):!ac&&!uc&&kl&&dl&&(ns=Lr(Ao,Fo,Vl,"depth stencil","depth stencil")),q(!!ac+!!uc+!!gc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ec=null;for(qa=0;qa<Ks.length;++qa)if(Oi(Ks[qa],Ao,Fo),q(!Ks[qa]||Ks[qa].texture&&Ya.indexOf(Ks[qa].texture._texture.format)>=0||Ks[qa].renderbuffer&&G.indexOf(Ks[qa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+qa+" is invalid"),Ks[qa]&&Ks[qa].texture){var mc=Ii[Ks[qa].texture._texture.format]*Ra[Ks[qa].texture._texture.type];ec===null?ec=mc:q(ec===mc,"all color attachments much have the same number of bits per pixel.")}return Oi(Ua,Ao,Fo),q(!Ua||Ua.texture&&Ua.texture._texture.format===Va||Ua.renderbuffer&&Ua.renderbuffer._renderbuffer.format===Ku,"invalid depth attachment for framebuffer object"),Oi(ho,Ao,Fo),q(!ho||ho.renderbuffer&&ho.renderbuffer._renderbuffer.format===hu,"invalid stencil attachment for framebuffer object"),Oi(ns,Ao,Fo),q(!ns||ns.texture&&ns.texture._texture.format===j||ns.renderbuffer&&ns.renderbuffer._renderbuffer.format===j,"invalid depth-stencil attachment for framebuffer object"),wi(gi),gi.width=Ao,gi.height=Fo,gi.colorAttachments=Ks,gi.depthAttachment=Ua,gi.stencilAttachment=ho,gi.depthStencilAttachment=ns,za.color=Ks.map(_r),za.depth=_r(Ua),za.stencil=_r(ho),za.depthStencil=_r(ns),za.width=gi.width,za.height=gi.height,yi(gi),za}function $i(Gi,co){q(sr.next!==gi,"can not resize a framebuffer which is currently in use");var qa=Math.max(Gi|0,1),Ao=Math.max(co|0||qa,1);if(qa===gi.width&&Ao===gi.height)return za;for(var Fo=gi.colorAttachments,dl=0;dl<Fo.length;++dl)di(Fo[dl],qa,Ao);return di(gi.depthAttachment,qa,Ao),di(gi.stencilAttachment,qa,Ao),di(gi.depthStencilAttachment,qa,Ao),gi.width=za.width=qa,gi.height=za.height=Ao,yi(gi),za}return za(Ni,Ei),E(za,{resize:$i,_reglType:"framebuffer",_framebuffer:gi,destroy:function(){Pi(gi),wi(gi)},use:function(co){sr.setFBO({framebuffer:za},co)}})}function ra(Ni){var Ei=Array(6);function gi($i){var Gi;q(Ei.indexOf(sr.next)<0,"can not update framebuffer which is currently in use");var co={color:null},qa=0,Ao=null,Fo="rgba",dl="uint8",kl=1;if(typeof $i=="number")qa=$i|0;else if(!$i)qa=1;else{q.type($i,"object","invalid arguments for framebuffer");var Vo=$i;if("shape"in Vo){var vl=Vo.shape;q(Array.isArray(vl)&&vl.length>=2,"invalid shape for framebuffer"),q(vl[0]===vl[1],"cube framebuffer must be square"),qa=vl[0]}else"radius"in Vo&&(qa=Vo.radius|0),"width"in Vo?(qa=Vo.width|0,"height"in Vo&&q(Vo.height===qa,"must be square")):"height"in Vo&&(qa=Vo.height|0);("color"in Vo||"colors"in Vo)&&(Ao=Vo.color||Vo.colors,Array.isArray(Ao)&&q(Ao.length===1||_e.webgl_draw_buffers,"multiple render targets not supported")),Ao||("colorCount"in Vo&&(kl=Vo.colorCount|0,q(kl>0,"invalid color buffer count")),"colorType"in Vo&&(q.oneOf(Vo.colorType,Vr,"invalid color type"),dl=Vo.colorType),"colorFormat"in Vo&&(Fo=Vo.colorFormat,q.oneOf(Vo.colorFormat,Or,"invalid color format for texture"))),"depth"in Vo&&(co.depth=Vo.depth),"stencil"in Vo&&(co.stencil=Vo.stencil),"depthStencil"in Vo&&(co.depthStencil=Vo.depthStencil)}var Zs;if(Ao)if(Array.isArray(Ao))for(Zs=[],Gi=0;Gi<Ao.length;++Gi)Zs[Gi]=Ao[Gi];else Zs=[Ao];else{Zs=Array(kl);var Gl={radius:qa,format:Fo,type:dl};for(Gi=0;Gi<kl;++Gi)Zs[Gi]=In.createCube(Gl)}for(co.color=Array(Zs.length),Gi=0;Gi<Zs.length;++Gi){var Zl=Zs[Gi];q(typeof Zl=="function"&&Zl._reglType==="textureCube","invalid cube map"),qa=qa||Zl.width,q(Zl.width===qa&&Zl.height===qa,"invalid cube map shape"),co.color[Gi]={target:Wn,data:Zs[Gi]}}for(Gi=0;Gi<6;++Gi){for(var ac=0;ac<Zs.length;++ac)co.color[ac].target=Wn+Gi;Gi>0&&(co.depth=Ei[0].depth,co.stencil=Ei[0].stencil,co.depthStencil=Ei[0].depthStencil),Ei[Gi]?Ei[Gi](co):Ei[Gi]=bi(co)}return E(gi,{width:qa,height:qa,color:Zs})}function za($i){var Gi,co=$i|0;if(q(co>0&&co<=Ze.maxCubeMapSize,"invalid radius for cube fbo"),co===gi.width)return gi;var qa=gi.color;for(Gi=0;Gi<qa.length;++Gi)qa[Gi].resize(co);for(Gi=0;Gi<6;++Gi)Ei[Gi].resize(co);return gi.width=gi.height=co,gi}return gi(Ni),E(gi,{faces:Ei,resize:za,_reglType:"framebufferCube",destroy:function(){Ei.forEach(function(Gi){Gi.destroy()})}})}function ha(){sr.cur=null,sr.next=null,sr.dirty=!0,Ht(qr).forEach(function(Ni){Ni.framebuffer=ne.createFramebuffer(),yi(Ni)})}return E(sr,{getFramebuffer:function(Ei){if(typeof Ei=="function"&&Ei._reglType==="framebuffer"){var gi=Ei._framebuffer;if(gi instanceof na)return gi}return null},create:bi,createCube:ra,clear:function(){Ht(qr).forEach(Pi)},restore:ha})}var Ct=5126,wt=34962;function Ut(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ct,this.offset=0,this.stride=0,this.divisor=0}function Yt(ne,_e,Ze,In,ar){for(var ur=Ze.maxAttributes,sr=new Array(ur),Or=0;Or<ur;++Or)sr[Or]=new Ut;var ri=0,Vr={},ni={Record:Ut,scope:{},state:sr,currentVAO:null,targetVAO:null,restore:Oi()?qr:function(){},createVAO:na,getVAO:si,destroyBuffer:fi,setVAO:Oi()?Lr:_r,clear:Oi()?di:function(){}};function fi(wi){for(var Pi=0;Pi<sr.length;++Pi){var yi=sr[Pi];yi.buffer===wi&&(ne.disableVertexAttribArray(Pi),yi.buffer=null)}}function Oi(){return _e.oes_vertex_array_object}function vi(){return _e.angle_instanced_arrays}function si(wi){return typeof wi=="function"&&wi._vao?wi._vao:null}function Lr(wi){if(wi!==ni.currentVAO){var Pi=Oi();wi?Pi.bindVertexArrayOES(wi.vao):Pi.bindVertexArrayOES(null),ni.currentVAO=wi}}function _r(wi){if(wi!==ni.currentVAO){if(wi)wi.bindAttrs();else for(var Pi=vi(),yi=0;yi<sr.length;++yi){var bi=sr[yi];bi.buffer?(ne.enableVertexAttribArray(yi),ne.vertexAttribPointer(yi,bi.size,bi.type,bi.normalized,bi.stride,bi.offfset),Pi&&bi.divisor&&Pi.vertexAttribDivisorANGLE(yi,bi.divisor)):(ne.disableVertexAttribArray(yi),ne.vertexAttrib4f(yi,bi.x,bi.y,bi.z,bi.w))}ni.currentVAO=wi}}function di(){Ht(Vr).forEach(function(wi){wi.destroy()})}function Vi(){this.id=++ri,this.attributes=[];var wi=Oi();wi?this.vao=wi.createVertexArrayOES():this.vao=null,Vr[this.id]=this,this.buffers=[]}Vi.prototype.bindAttrs=function(){for(var wi=vi(),Pi=this.attributes,yi=0;yi<Pi.length;++yi){var bi=Pi[yi];bi.buffer?(ne.enableVertexAttribArray(yi),ne.bindBuffer(wt,bi.buffer.buffer),ne.vertexAttribPointer(yi,bi.size,bi.type,bi.normalized,bi.stride,bi.offset),wi&&bi.divisor&&wi.vertexAttribDivisorANGLE(yi,bi.divisor)):(ne.disableVertexAttribArray(yi),ne.vertexAttrib4f(yi,bi.x,bi.y,bi.z,bi.w))}for(var ra=Pi.length;ra<ur;++ra)ne.disableVertexAttribArray(ra)},Vi.prototype.refresh=function(){var wi=Oi();wi&&(wi.bindVertexArrayOES(this.vao),this.bindAttrs(),ni.currentVAO=this)},Vi.prototype.destroy=function(){if(this.vao){var wi=Oi();this===ni.currentVAO&&(ni.currentVAO=null,wi.bindVertexArrayOES(null)),wi.deleteVertexArrayOES(this.vao),this.vao=null}Vr[this.id]&&(delete Vr[this.id],In.vaoCount-=1)};function qr(){var wi=Oi();wi&&Ht(Vr).forEach(function(Pi){Pi.refresh()})}function na(wi){var Pi=new Vi;In.vaoCount+=1;function yi(bi){q(Array.isArray(bi),"arguments to vertex array constructor must be an array"),q(bi.length<ur,"too many attributes"),q(bi.length>0,"must specify at least one attribute");var ra={},ha=Pi.attributes;ha.length=bi.length;for(var Ni=0;Ni<bi.length;++Ni){var Ei=bi[Ni],gi=ha[Ni]=new Ut,za=Ei.data||Ei;if(Array.isArray(za)||U(za)||oe(za)){var $i;Pi.buffers[Ni]&&($i=Pi.buffers[Ni],U(za)&&$i._buffer.byteLength>=za.byteLength?$i.subdata(za):($i.destroy(),Pi.buffers[Ni]=null)),Pi.buffers[Ni]||($i=Pi.buffers[Ni]=ar.create(Ei,wt,!1,!0)),gi.buffer=ar.getBuffer($i),gi.size=gi.buffer.dimension|0,gi.normalized=!1,gi.type=gi.buffer.dtype,gi.offset=0,gi.stride=0,gi.divisor=0,gi.state=1,ra[Ni]=1}else ar.getBuffer(Ei)?(gi.buffer=ar.getBuffer(Ei),gi.size=gi.buffer.dimension|0,gi.normalized=!1,gi.type=gi.buffer.dtype,gi.offset=0,gi.stride=0,gi.divisor=0,gi.state=1):ar.getBuffer(Ei.buffer)?(gi.buffer=ar.getBuffer(Ei.buffer),gi.size=(+Ei.size||gi.buffer.dimension)|0,gi.normalized=!!Ei.normalized||!1,"type"in Ei?(q.parameter(Ei.type,Ja,"invalid buffer type"),gi.type=Ja[Ei.type]):gi.type=gi.buffer.dtype,gi.offset=(Ei.offset||0)|0,gi.stride=(Ei.stride||0)|0,gi.divisor=(Ei.divisor||0)|0,gi.state=1,q(gi.size>=1&&gi.size<=4,"size must be between 1 and 4"),q(gi.offset>=0,"invalid offset"),q(gi.stride>=0&&gi.stride<=255,"stride must be between 0 and 255"),q(gi.divisor>=0,"divisor must be positive"),q(!gi.divisor||!!_e.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ei?(q(Ni>0,"first attribute must not be a constant"),gi.x=+Ei.x||0,gi.y=+Ei.y||0,gi.z=+Ei.z||0,gi.w=+Ei.w||0,gi.state=2):q(!1,"invalid attribute spec for location "+Ni)}for(var Gi=0;Gi<Pi.buffers.length;++Gi)!ra[Gi]&&Pi.buffers[Gi]&&(Pi.buffers[Gi].destroy(),Pi.buffers[Gi]=null);return Pi.refresh(),yi}return yi.destroy=function(){for(var bi=0;bi<Pi.buffers.length;++bi)Pi.buffers[bi]&&Pi.buffers[bi].destroy();Pi.buffers.length=0,Pi.destroy()},yi._vao=Pi,yi._reglType="vao",yi(wi)}return ni}var qt=35632,he=35633,ye=35718,je=35721;function Ie(ne,_e,Ze,In){var ar={},ur={};function sr(Lr,_r,di,Vi){this.name=Lr,this.id=_r,this.location=di,this.info=Vi}function Or(Lr,_r){for(var di=0;di<Lr.length;++di)if(Lr[di].id===_r.id){Lr[di].location=_r.location;return}Lr.push(_r)}function ri(Lr,_r,di){var Vi=Lr===qt?ar:ur,qr=Vi[_r];if(!qr){var na=_e.str(_r);qr=ne.createShader(Lr),ne.shaderSource(qr,na),ne.compileShader(qr),q.shaderError(ne,qr,na,Lr,di),Vi[_r]=qr}return qr}var Vr={},ni=[],fi=0;function Oi(Lr,_r){this.id=fi++,this.fragId=Lr,this.vertId=_r,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,In.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function vi(Lr,_r,di){var Vi,qr,na=ri(qt,Lr.fragId),wi=ri(he,Lr.vertId),Pi=Lr.program=ne.createProgram();if(ne.attachShader(Pi,na),ne.attachShader(Pi,wi),di)for(Vi=0;Vi<di.length;++Vi){var yi=di[Vi];ne.bindAttribLocation(Pi,yi[0],yi[1])}ne.linkProgram(Pi),q.linkError(ne,Pi,_e.str(Lr.fragId),_e.str(Lr.vertId),_r);var bi=ne.getProgramParameter(Pi,ye);In.profile&&(Lr.stats.uniformsCount=bi);var ra=Lr.uniforms;for(Vi=0;Vi<bi;++Vi)if(qr=ne.getActiveUniform(Pi,Vi),qr)if(qr.size>1)for(var ha=0;ha<qr.size;++ha){var Ni=qr.name.replace("[0]","["+ha+"]");Or(ra,new sr(Ni,_e.id(Ni),ne.getUniformLocation(Pi,Ni),qr))}else Or(ra,new sr(qr.name,_e.id(qr.name),ne.getUniformLocation(Pi,qr.name),qr));var Ei=ne.getProgramParameter(Pi,je);In.profile&&(Lr.stats.attributesCount=Ei);var gi=Lr.attributes;for(Vi=0;Vi<Ei;++Vi)qr=ne.getActiveAttrib(Pi,Vi),qr&&Or(gi,new sr(qr.name,_e.id(qr.name),ne.getAttribLocation(Pi,qr.name),qr))}In.profile&&(Ze.getMaxUniformsCount=function(){var Lr=0;return ni.forEach(function(_r){_r.stats.uniformsCount>Lr&&(Lr=_r.stats.uniformsCount)}),Lr},Ze.getMaxAttributesCount=function(){var Lr=0;return ni.forEach(function(_r){_r.stats.attributesCount>Lr&&(Lr=_r.stats.attributesCount)}),Lr});function si(){ar={},ur={};for(var Lr=0;Lr<ni.length;++Lr)vi(ni[Lr],null,ni[Lr].attributes.map(function(_r){return[_r.location,_r.name]}))}return{clear:function(){var _r=ne.deleteShader.bind(ne);Ht(ar).forEach(_r),ar={},Ht(ur).forEach(_r),ur={},ni.forEach(function(di){ne.deleteProgram(di.program)}),ni.length=0,Vr={},Ze.shaderCount=0},program:function(_r,di,Vi,qr){q.command(_r>=0,"missing vertex shader",Vi),q.command(di>=0,"missing fragment shader",Vi);var na=Vr[di];na||(na=Vr[di]={});var wi=na[_r];if(wi&&(wi.refCount++,!qr))return wi;var Pi=new Oi(di,_r);return Ze.shaderCount++,vi(Pi,Vi,qr),wi||(na[_r]=Pi),ni.push(Pi),E(Pi,{destroy:function(){if(Pi.refCount--,Pi.refCount<=0){ne.deleteProgram(Pi.program);var bi=ni.indexOf(Pi);ni.splice(bi,1),Ze.shaderCount--}na[Pi.vertId].refCount<=0&&(ne.deleteShader(ur[Pi.vertId]),delete ur[Pi.vertId],delete Vr[Pi.fragId][Pi.vertId]),Object.keys(Vr[Pi.fragId]).length||(ne.deleteShader(ar[Pi.fragId]),delete ar[Pi.fragId],delete Vr[Pi.fragId])}})},restore:si,shader:ri,frag:-1,vert:-1}}var Ve=6408,qe=5121,sn=3333,tr=5126;function kn(ne,_e,Ze,In,ar,ur,sr){function Or(ni){var fi;_e.next===null?(q(ar.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),fi=qe):(q(_e.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),fi=_e.next.colorAttachments[0].texture._texture.type,ur.oes_texture_float?(q(fi===qe||fi===tr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),fi===tr&&q(sr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):q(fi===qe,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Oi=0,vi=0,si=In.framebufferWidth,Lr=In.framebufferHeight,_r=null;U(ni)?_r=ni:ni&&(q.type(ni,"object","invalid arguments to regl.read()"),Oi=ni.x|0,vi=ni.y|0,q(Oi>=0&&Oi<In.framebufferWidth,"invalid x offset for regl.read"),q(vi>=0&&vi<In.framebufferHeight,"invalid y offset for regl.read"),si=(ni.width||In.framebufferWidth-Oi)|0,Lr=(ni.height||In.framebufferHeight-vi)|0,_r=ni.data||null),_r&&(fi===qe?q(_r instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):fi===tr&&q(_r instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),q(si>0&&si+Oi<=In.framebufferWidth,"invalid width for read pixels"),q(Lr>0&&Lr+vi<=In.framebufferHeight,"invalid height for read pixels"),Ze();var di=si*Lr*4;return _r||(fi===qe?_r=new Uint8Array(di):fi===tr&&(_r=_r||new Float32Array(di))),q.isTypedArray(_r,"data buffer for regl.read() must be a typedarray"),q(_r.byteLength>=di,"data buffer for regl.read() too small"),ne.pixelStorei(sn,4),ne.readPixels(Oi,vi,si,Lr,Ve,fi,_r),_r}function ri(ni){var fi;return _e.setFBO({framebuffer:ni.framebuffer},function(){fi=Or(ni)}),fi}function Vr(ni){return!ni||!("framebuffer"in ni)?Or(ni):ri(ni)}return Vr}function pr(ne){return Array.prototype.slice.call(ne)}function Mr(ne){return pr(ne).join("")}function $r(){var ne=0,_e=[],Ze=[];function In(fi){for(var Oi=0;Oi<Ze.length;++Oi)if(Ze[Oi]===fi)return _e[Oi];var vi="g"+ne++;return _e.push(vi),Ze.push(fi),vi}function ar(){var fi=[];function Oi(){fi.push.apply(fi,pr(arguments))}var vi=[];function si(){var Lr="v"+ne++;return vi.push(Lr),arguments.length>0&&(fi.push(Lr,"="),fi.push.apply(fi,pr(arguments)),fi.push(";")),Lr}return E(Oi,{def:si,toString:function(){return Mr([vi.length>0?"var "+vi.join(",")+";":"",Mr(fi)])}})}function ur(){var fi=ar(),Oi=ar(),vi=fi.toString,si=Oi.toString;function Lr(_r,di){Oi(_r,di,"=",fi.def(_r,di),";")}return E(function(){fi.apply(fi,pr(arguments))},{def:fi.def,entry:fi,exit:Oi,save:Lr,set:function(di,Vi,qr){Lr(di,Vi),fi(di,Vi,"=",qr,";")},toString:function(){return vi()+si()}})}function sr(){var fi=Mr(arguments),Oi=ur(),vi=ur(),si=Oi.toString,Lr=vi.toString;return E(Oi,{then:function(){return Oi.apply(Oi,pr(arguments)),this},else:function(){return vi.apply(vi,pr(arguments)),this},toString:function(){var di=Lr();return di&&(di="else{"+di+"}"),Mr(["if(",fi,"){",si(),"}",di])}})}var Or=ar(),ri={};function Vr(fi,Oi){var vi=[];function si(){var qr="a"+vi.length;return vi.push(qr),qr}Oi=Oi||0;for(var Lr=0;Lr<Oi;++Lr)si();var _r=ur(),di=_r.toString,Vi=ri[fi]=E(_r,{arg:si,toString:function(){return Mr(["function(",vi.join(),"){",di(),"}"])}});return Vi}function ni(){var fi=['"use strict";',Or,"return {"];Object.keys(ri).forEach(function(si){fi.push('"',si,'":',ri[si].toString(),",")}),fi.push("}");var Oi=Mr(fi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),vi=Function.apply(null,_e.concat(Oi));return vi.apply(null,Ze)}return{global:Or,link:In,block:ar,proc:Vr,scope:ur,cond:sr,compile:ni}}var Yr="xyzw".split(""),Ti=5121,Li=1,Ki=2,Xi=0,Oa=1,Na=2,ji=3,Sa=4,xa=5,Yi=6,_a="dither",sa="blend.enable",Ia="blend.color",Fa="blend.equation",_s="blend.func",us="depth.enable",Os="depth.func",es="depth.range",js="depth.mask",ml="colorMask",yu="cull.enable",Fl="cull.face",xc="frontFace",zl="lineWidth",Al="polygonOffset.enable",Nc="polygonOffset.offset",Hc="sample.alpha",Tc="sample.enable",kc="sample.coverage",Yc="stencil.enable",Lc="stencil.mask",Zc="stencil.func",bc="stencil.opFront",Au="stencil.opBack",Ec="scissor.enable",Kc="scissor.box",Hl="viewport",al="profile",Cl="framebuffer",ws="vert",cu="frag",Is="elements",Yl="primitive",Rc="count",Dc="offset",of="instances",Ac="vao",tf="Width",jc="Height",Ul=Cl+tf,Nu=Cl+jc,Cc=Hl+tf,Tf=Hl+jc,Zf="drawingBuffer",oh=Zf+tf,Kf=Zf+jc,sh=[_s,Fa,Zc,bc,Au,kc,Hl,Kc,Nc],Gc=34962,Af=34963,Fc=35632,Cf=35633,vc=3553,ef=34067,Df=2884,jf=3042,sf=3024,Bf=2960,Xf=2929,Jf=3089,pf=32823,Of=32926,uh=32928,nf=5126,gf=35664,xu=35665,Vc=35666,uf=5124,lf=35667,Oc=35668,pc=35669,mf=35670,Wc=35671,rf=35672,yf=35673,zc=35674,xf=35675,ve=35676,ge=35678,Gt=35680,Kt=4,Ue=1028,un=1029,Gn=2304,mr=2305,gr=32775,Qr=32776,xi=519,Ji=7680,fa=0,ba=1,oo=32774,ro=513,No=36160,ko=36064,Gs={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Bs=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],bu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ns={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ru={frag:Fc,vert:Cf},io={cw:Gn,ccw:mr};function Eu(ne){return Array.isArray(ne)||U(ne)||oe(ne)}function Ol(ne){return ne.sort(function(_e,Ze){return _e===Hl?-1:Ze===Hl?1:_e<Ze?-1:1})}function ps(ne,_e,Ze,In){this.thisDep=ne,this.contextDep=_e,this.propDep=Ze,this.append=In}function Vs(ne){return ne&&!(ne.thisDep||ne.contextDep||ne.propDep)}function Go(ne){return new ps(!1,!1,!1,ne)}function hl(ne,_e){var Ze=ne.type;if(Ze===Xi){var In=ne.data.length;return new ps(!0,In>=1,In>=2,_e)}else if(Ze===Sa){var ar=ne.data;return new ps(ar.thisDep,ar.contextDep,ar.propDep,_e)}else{if(Ze===xa)return new ps(!1,!1,!1,_e);if(Ze===Yi){for(var ur=!1,sr=!1,Or=!1,ri=0;ri<ne.data.length;++ri){var Vr=ne.data[ri];if(Vr.type===Oa)Or=!0;else if(Vr.type===Na)sr=!0;else if(Vr.type===ji)ur=!0;else if(Vr.type===Xi){ur=!0;var ni=Vr.data;ni>=1&&(sr=!0),ni>=2&&(Or=!0)}else Vr.type===Sa&&(ur=ur||Vr.data.thisDep,sr=sr||Vr.data.contextDep,Or=Or||Vr.data.propDep)}return new ps(ur,sr,Or,_e)}else return new ps(Ze===ji,Ze===Na,Ze===Oa,_e)}}var bf=new ps(!1,!1,!1,function(){});function Xc(ne,_e,Ze,In,ar,ur,sr,Or,ri,Vr,ni,fi,Oi,vi,si){var Lr=Vr.Record,_r={add:32774,subtract:32778,"reverse subtract":32779};Ze.ext_blend_minmax&&(_r.min=gr,_r.max=Qr);var di=Ze.angle_instanced_arrays,Vi=Ze.webgl_draw_buffers,qr={dirty:!0,profile:si.profile},na={},wi=[],Pi={},yi={};function bi(Mn){return Mn.replace(".","_")}function ra(Mn,on,er){var Ir=bi(Mn);wi.push(Mn),na[Ir]=qr[Ir]=!!er,Pi[Ir]=on}function ha(Mn,on,er){var Ir=bi(Mn);wi.push(Mn),Array.isArray(er)?(qr[Ir]=er.slice(),na[Ir]=er.slice()):qr[Ir]=na[Ir]=er,yi[Ir]=on}ra(_a,sf),ra(sa,jf),ha(Ia,"blendColor",[0,0,0,0]),ha(Fa,"blendEquationSeparate",[oo,oo]),ha(_s,"blendFuncSeparate",[ba,fa,ba,fa]),ra(us,Xf,!0),ha(Os,"depthFunc",ro),ha(es,"depthRange",[0,1]),ha(js,"depthMask",!0),ha(ml,ml,[!0,!0,!0,!0]),ra(yu,Df),ha(Fl,"cullFace",un),ha(xc,xc,mr),ha(zl,zl,1),ra(Al,pf),ha(Nc,"polygonOffset",[0,0]),ra(Hc,Of),ra(Tc,uh),ha(kc,"sampleCoverage",[1,!1]),ra(Yc,Bf),ha(Lc,"stencilMask",-1),ha(Zc,"stencilFunc",[xi,0,-1]),ha(bc,"stencilOpSeparate",[Ue,Ji,Ji,Ji]),ha(Au,"stencilOpSeparate",[un,Ji,Ji,Ji]),ra(Ec,Jf),ha(Kc,"scissor",[0,0,ne.drawingBufferWidth,ne.drawingBufferHeight]),ha(Hl,Hl,[0,0,ne.drawingBufferWidth,ne.drawingBufferHeight]);var Ni={gl:ne,context:Oi,strings:_e,next:na,current:qr,draw:fi,elements:ur,buffer:ar,shader:ni,attributes:Vr.state,vao:Vr,uniforms:ri,framebuffer:Or,extensions:Ze,timer:vi,isBufferArgs:Eu},Ei={primTypes:Ga,compareFuncs:bu,blendFuncs:Gs,blendEquations:_r,stencilOps:Ns,glTypes:Ja,orientationType:io};q.optional(function(){Ni.isArrayLike=To}),Vi&&(Ei.backBuffer=[un],Ei.drawBuffer=Te(In.maxDrawbuffers,function(Mn){return Mn===0?[0]:Te(Mn,function(on){return ko+on})}));var gi=0;function za(){var Mn=$r(),on=Mn.link,er=Mn.global;Mn.id=gi++,Mn.batchId="0";var Ir=on(Ni),wr=Mn.shared={props:"a0"};Object.keys(Ni).forEach(function(Kn){wr[Kn]=er.def(Ir,".",Kn)}),q.optional(function(){Mn.CHECK=on(q),Mn.commandStr=q.guessCommand(),Mn.command=on(Mn.commandStr),Mn.assert=function(Kn,xn,Tr){Kn("if(!(",xn,"))",this.CHECK,".commandRaise(",on(Tr),",",this.command,");")},Ei.invalidBlendCombinations=Bs});var lr=Mn.next={},nr=Mn.current={};Object.keys(yi).forEach(function(Kn){Array.isArray(qr[Kn])&&(lr[Kn]=er.def(wr.next,".",Kn),nr[Kn]=er.def(wr.current,".",Kn))});var Er=Mn.constants={};Object.keys(Ei).forEach(function(Kn){Er[Kn]=er.def(JSON.stringify(Ei[Kn]))}),Mn.invoke=function(Kn,xn){switch(xn.type){case Xi:var Tr=["this",wr.context,wr.props,Mn.batchId];return Kn.def(on(xn.data),".call(",Tr.slice(0,Math.max(xn.data.length+1,4)),")");case Oa:return Kn.def(wr.props,xn.data);case Na:return Kn.def(wr.context,xn.data);case ji:return Kn.def("this",xn.data);case Sa:return xn.data.append(Mn,Kn),xn.data.ref;case xa:return xn.data.toString();case Yi:return xn.data.map(function(jr){return Mn.invoke(Kn,jr)})}},Mn.attribCache={};var Tn={};return Mn.scopeAttrib=function(Kn){var xn=_e.id(Kn);if(xn in Tn)return Tn[xn];var Tr=Vr.scope[xn];Tr||(Tr=Vr.scope[xn]=new Lr);var jr=Tn[xn]=on(Tr);return jr},Mn}function $i(Mn){var on=Mn.static,er=Mn.dynamic,Ir;if(al in on){var wr=!!on[al];Ir=Go(function(nr,Er){return wr}),Ir.enable=wr}else if(al in er){var lr=er[al];Ir=hl(lr,function(nr,Er){return nr.invoke(Er,lr)})}return Ir}function Gi(Mn,on){var er=Mn.static,Ir=Mn.dynamic;if(Cl in er){var wr=er[Cl];return wr?(wr=Or.getFramebuffer(wr),q.command(wr,"invalid framebuffer object"),Go(function(nr,Er){var Tn=nr.link(wr),Kn=nr.shared;Er.set(Kn.framebuffer,".next",Tn);var xn=Kn.context;return Er.set(xn,"."+Ul,Tn+".width"),Er.set(xn,"."+Nu,Tn+".height"),Tn})):Go(function(nr,Er){var Tn=nr.shared;Er.set(Tn.framebuffer,".next","null");var Kn=Tn.context;return Er.set(Kn,"."+Ul,Kn+"."+oh),Er.set(Kn,"."+Nu,Kn+"."+Kf),"null"})}else if(Cl in Ir){var lr=Ir[Cl];return hl(lr,function(nr,Er){var Tn=nr.invoke(Er,lr),Kn=nr.shared,xn=Kn.framebuffer,Tr=Er.def(xn,".getFramebuffer(",Tn,")");q.optional(function(){nr.assert(Er,"!"+Tn+"||"+Tr,"invalid framebuffer object")}),Er.set(xn,".next",Tr);var jr=Kn.context;return Er.set(jr,"."+Ul,Tr+"?"+Tr+".width:"+jr+"."+oh),Er.set(jr,"."+Nu,Tr+"?"+Tr+".height:"+jr+"."+Kf),Tr})}else return null}function co(Mn,on,er){var Ir=Mn.static,wr=Mn.dynamic;function lr(Tn){if(Tn in Ir){var Kn=Ir[Tn];q.commandType(Kn,"object","invalid "+Tn,er.commandStr);var xn=!0,Tr=Kn.x|0,jr=Kn.y|0,ci,Kr;return"width"in Kn?(ci=Kn.width|0,q.command(ci>=0,"invalid "+Tn,er.commandStr)):xn=!1,"height"in Kn?(Kr=Kn.height|0,q.command(Kr>=0,"invalid "+Tn,er.commandStr)):xn=!1,new ps(!xn&&on&&on.thisDep,!xn&&on&&on.contextDep,!xn&&on&&on.propDep,function(da,Io){var ua=da.shared.context,ja=ci;"width"in Kn||(ja=Io.def(ua,".",Ul,"-",Tr));var Eo=Kr;return"height"in Kn||(Eo=Io.def(ua,".",Nu,"-",jr)),[Tr,jr,ja,Eo]})}else if(Tn in wr){var oi=wr[Tn],Di=hl(oi,function(da,Io){var ua=da.invoke(Io,oi);q.optional(function(){da.assert(Io,ua+"&&typeof "+ua+'==="object"',"invalid "+Tn)});var ja=da.shared.context,Eo=Io.def(ua,".x|0"),gs=Io.def(ua,".y|0"),Fu=Io.def('"width" in ',ua,"?",ua,".width|0:","(",ja,".",Ul,"-",Eo,")"),Uc=Io.def('"height" in ',ua,"?",ua,".height|0:","(",ja,".",Nu,"-",gs,")");return q.optional(function(){da.assert(Io,Fu+">=0&&"+Uc+">=0","invalid "+Tn)}),[Eo,gs,Fu,Uc]});return on&&(Di.thisDep=Di.thisDep||on.thisDep,Di.contextDep=Di.contextDep||on.contextDep,Di.propDep=Di.propDep||on.propDep),Di}else return on?new ps(on.thisDep,on.contextDep,on.propDep,function(da,Io){var ua=da.shared.context;return[0,0,Io.def(ua,".",Ul),Io.def(ua,".",Nu)]}):null}var nr=lr(Hl);if(nr){var Er=nr;nr=new ps(nr.thisDep,nr.contextDep,nr.propDep,function(Tn,Kn){var xn=Er.append(Tn,Kn),Tr=Tn.shared.context;return Kn.set(Tr,"."+Cc,xn[2]),Kn.set(Tr,"."+Tf,xn[3]),xn})}return{viewport:nr,scissor_box:lr(Kc)}}function qa(Mn,on){var er=Mn.static,Ir=typeof er[cu]=="string"&&typeof er[ws]=="string";if(Ir){if(Object.keys(on.dynamic).length>0)return null;var wr=on.static,lr=Object.keys(wr);if(lr.length>0&&typeof wr[lr[0]]=="number"){for(var nr=[],Er=0;Er<lr.length;++Er)q(typeof wr[lr[Er]]=="number","must specify all vertex attribute locations when using vaos"),nr.push([wr[lr[Er]]|0,lr[Er]]);return nr}}return null}function Ao(Mn,on,er){var Ir=Mn.static,wr=Mn.dynamic;function lr(xn){if(xn in Ir){var Tr=_e.id(Ir[xn]);q.optional(function(){ni.shader(ru[xn],Tr,q.guessCommand())});var jr=Go(function(){return Tr});return jr.id=Tr,jr}else if(xn in wr){var ci=wr[xn];return hl(ci,function(Kr,oi){var Di=Kr.invoke(oi,ci),da=oi.def(Kr.shared.strings,".id(",Di,")");return q.optional(function(){oi(Kr.shared.shader,".shader(",ru[xn],",",da,",",Kr.command,");")}),da})}return null}var nr=lr(cu),Er=lr(ws),Tn=null,Kn;return Vs(nr)&&Vs(Er)?(Tn=ni.program(Er.id,nr.id,null,er),Kn=Go(function(xn,Tr){return xn.link(Tn)})):Kn=new ps(nr&&nr.thisDep||Er&&Er.thisDep,nr&&nr.contextDep||Er&&Er.contextDep,nr&&nr.propDep||Er&&Er.propDep,function(xn,Tr){var jr=xn.shared.shader,ci;nr?ci=nr.append(xn,Tr):ci=Tr.def(jr,".",cu);var Kr;Er?Kr=Er.append(xn,Tr):Kr=Tr.def(jr,".",ws);var oi=jr+".program("+Kr+","+ci;return q.optional(function(){oi+=","+xn.command}),Tr.def(oi+")")}),{frag:nr,vert:Er,progVar:Kn,program:Tn}}function Fo(Mn,on){var er=Mn.static,Ir=Mn.dynamic;function wr(){if(Is in er){var xn=er[Is];Eu(xn)?xn=ur.getElements(ur.create(xn,!0)):xn&&(xn=ur.getElements(xn),q.command(xn,"invalid elements",on.commandStr));var Tr=Go(function(ci,Kr){if(xn){var oi=ci.link(xn);return ci.ELEMENTS=oi,oi}return ci.ELEMENTS=null,null});return Tr.value=xn,Tr}else if(Is in Ir){var jr=Ir[Is];return hl(jr,function(ci,Kr){var oi=ci.shared,Di=oi.isBufferArgs,da=oi.elements,Io=ci.invoke(Kr,jr),ua=Kr.def("null"),ja=Kr.def(Di,"(",Io,")"),Eo=ci.cond(ja).then(ua,"=",da,".createStream(",Io,");").else(ua,"=",da,".getElements(",Io,");");return q.optional(function(){ci.assert(Eo.else,"!"+Io+"||"+ua,"invalid elements")}),Kr.entry(Eo),Kr.exit(ci.cond(ja).then(da,".destroyStream(",ua,");")),ci.ELEMENTS=ua,ua})}return null}var lr=wr();function nr(){if(Yl in er){var xn=er[Yl];return q.commandParameter(xn,Ga,"invalid primitve",on.commandStr),Go(function(jr,ci){return Ga[xn]})}else if(Yl in Ir){var Tr=Ir[Yl];return hl(Tr,function(jr,ci){var Kr=jr.constants.primTypes,oi=jr.invoke(ci,Tr);return q.optional(function(){jr.assert(ci,oi+" in "+Kr,"invalid primitive, must be one of "+Object.keys(Ga))}),ci.def(Kr,"[",oi,"]")})}else if(lr)return Vs(lr)?lr.value?Go(function(jr,ci){return ci.def(jr.ELEMENTS,".primType")}):Go(function(){return Kt}):new ps(lr.thisDep,lr.contextDep,lr.propDep,function(jr,ci){var Kr=jr.ELEMENTS;return ci.def(Kr,"?",Kr,".primType:",Kt)});return null}function Er(xn,Tr){if(xn in er){var jr=er[xn]|0;return q.command(!Tr||jr>=0,"invalid "+xn,on.commandStr),Go(function(Kr,oi){return Tr&&(Kr.OFFSET=jr),jr})}else if(xn in Ir){var ci=Ir[xn];return hl(ci,function(Kr,oi){var Di=Kr.invoke(oi,ci);return Tr&&(Kr.OFFSET=Di,q.optional(function(){Kr.assert(oi,Di+">=0","invalid "+xn)})),Di})}else if(Tr&&lr)return Go(function(Kr,oi){return Kr.OFFSET="0",0});return null}var Tn=Er(Dc,!0);function Kn(){if(Rc in er){var xn=er[Rc]|0;return q.command(typeof xn=="number"&&xn>=0,"invalid vertex count",on.commandStr),Go(function(){return xn})}else if(Rc in Ir){var Tr=Ir[Rc];return hl(Tr,function(Kr,oi){var Di=Kr.invoke(oi,Tr);return q.optional(function(){Kr.assert(oi,"typeof "+Di+'==="number"&&'+Di+">=0&&"+Di+"===("+Di+"|0)","invalid vertex count")}),Di})}else if(lr)if(Vs(lr)){if(lr)return Tn?new ps(Tn.thisDep,Tn.contextDep,Tn.propDep,function(Kr,oi){var Di=oi.def(Kr.ELEMENTS,".vertCount-",Kr.OFFSET);return q.optional(function(){Kr.assert(oi,Di+">=0","invalid vertex offset/element buffer too small")}),Di}):Go(function(Kr,oi){return oi.def(Kr.ELEMENTS,".vertCount")});var jr=Go(function(){return-1});return q.optional(function(){jr.MISSING=!0}),jr}else{var ci=new ps(lr.thisDep||Tn.thisDep,lr.contextDep||Tn.contextDep,lr.propDep||Tn.propDep,function(Kr,oi){var Di=Kr.ELEMENTS;return Kr.OFFSET?oi.def(Di,"?",Di,".vertCount-",Kr.OFFSET,":-1"):oi.def(Di,"?",Di,".vertCount:-1")});return q.optional(function(){ci.DYNAMIC=!0}),ci}return null}return{elements:lr,primitive:nr(),count:Kn(),instances:Er(of,!1),offset:Tn}}function dl(Mn,on){var er=Mn.static,Ir=Mn.dynamic,wr={};return wi.forEach(function(lr){var nr=bi(lr);function Er(Tn,Kn){if(lr in er){var xn=Tn(er[lr]);wr[nr]=Go(function(){return xn})}else if(lr in Ir){var Tr=Ir[lr];wr[nr]=hl(Tr,function(jr,ci){return Kn(jr,ci,jr.invoke(ci,Tr))})}}switch(lr){case yu:case sa:case _a:case Yc:case us:case Ec:case Al:case Hc:case Tc:case js:return Er(function(Tn){return q.commandType(Tn,"boolean",lr,on.commandStr),Tn},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,"typeof "+xn+'==="boolean"',"invalid flag "+lr,Tn.commandStr)}),xn});case Os:return Er(function(Tn){return q.commandParameter(Tn,bu,"invalid "+lr,on.commandStr),bu[Tn]},function(Tn,Kn,xn){var Tr=Tn.constants.compareFuncs;return q.optional(function(){Tn.assert(Kn,xn+" in "+Tr,"invalid "+lr+", must be one of "+Object.keys(bu))}),Kn.def(Tr,"[",xn,"]")});case es:return Er(function(Tn){return q.command(To(Tn)&&Tn.length===2&&typeof Tn[0]=="number"&&typeof Tn[1]=="number"&&Tn[0]<=Tn[1],"depth range is 2d array",on.commandStr),Tn},function(Tn,Kn,xn){q.optional(function(){Tn.assert(Kn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===2&&typeof "+xn+'[0]==="number"&&typeof '+xn+'[1]==="number"&&'+xn+"[0]<="+xn+"[1]","depth range must be a 2d array")});var Tr=Kn.def("+",xn,"[0]"),jr=Kn.def("+",xn,"[1]");return[Tr,jr]});case _s:return Er(function(Tn){q.commandType(Tn,"object","blend.func",on.commandStr);var Kn="srcRGB"in Tn?Tn.srcRGB:Tn.src,xn="srcAlpha"in Tn?Tn.srcAlpha:Tn.src,Tr="dstRGB"in Tn?Tn.dstRGB:Tn.dst,jr="dstAlpha"in Tn?Tn.dstAlpha:Tn.dst;return q.commandParameter(Kn,Gs,nr+".srcRGB",on.commandStr),q.commandParameter(xn,Gs,nr+".srcAlpha",on.commandStr),q.commandParameter(Tr,Gs,nr+".dstRGB",on.commandStr),q.commandParameter(jr,Gs,nr+".dstAlpha",on.commandStr),q.command(Bs.indexOf(Kn+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Kn+", "+Tr+")",on.commandStr),[Gs[Kn],Gs[Tr],Gs[xn],Gs[jr]]},function(Tn,Kn,xn){var Tr=Tn.constants.blendFuncs;q.optional(function(){Tn.assert(Kn,xn+"&&typeof "+xn+'==="object"',"invalid blend func, must be an object")});function jr(ua,ja){var Eo=Kn.def('"',ua,ja,'" in ',xn,"?",xn,".",ua,ja,":",xn,".",ua);return q.optional(function(){Tn.assert(Kn,Eo+" in "+Tr,"invalid "+lr+"."+ua+ja+", must be one of "+Object.keys(Gs))}),Eo}var ci=jr("src","RGB"),Kr=jr("dst","RGB");q.optional(function(){var ua=Tn.constants.invalidBlendCombinations;Tn.assert(Kn,ua+".indexOf("+ci+'+", "+'+Kr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var oi=Kn.def(Tr,"[",ci,"]"),Di=Kn.def(Tr,"[",jr("src","Alpha"),"]"),da=Kn.def(Tr,"[",Kr,"]"),Io=Kn.def(Tr,"[",jr("dst","Alpha"),"]");return[oi,da,Di,Io]});case Fa:return Er(function(Tn){if(typeof Tn=="string")return q.commandParameter(Tn,_r,"invalid "+lr,on.commandStr),[_r[Tn],_r[Tn]];if(typeof Tn=="object")return q.commandParameter(Tn.rgb,_r,lr+".rgb",on.commandStr),q.commandParameter(Tn.alpha,_r,lr+".alpha",on.commandStr),[_r[Tn.rgb],_r[Tn.alpha]];q.commandRaise("invalid blend.equation",on.commandStr)},function(Tn,Kn,xn){var Tr=Tn.constants.blendEquations,jr=Kn.def(),ci=Kn.def(),Kr=Tn.cond("typeof ",xn,'==="string"');return q.optional(function(){function oi(Di,da,Io){Tn.assert(Di,Io+" in "+Tr,"invalid "+da+", must be one of "+Object.keys(_r))}oi(Kr.then,lr,xn),Tn.assert(Kr.else,xn+"&&typeof "+xn+'==="object"',"invalid "+lr),oi(Kr.else,lr+".rgb",xn+".rgb"),oi(Kr.else,lr+".alpha",xn+".alpha")}),Kr.then(jr,"=",ci,"=",Tr,"[",xn,"];"),Kr.else(jr,"=",Tr,"[",xn,".rgb];",ci,"=",Tr,"[",xn,".alpha];"),Kn(Kr),[jr,ci]});case Ia:return Er(function(Tn){return q.command(To(Tn)&&Tn.length===4,"blend.color must be a 4d array",on.commandStr),Te(4,function(Kn){return+Tn[Kn]})},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===4","blend.color must be a 4d array")}),Te(4,function(Tr){return Kn.def("+",xn,"[",Tr,"]")})});case Lc:return Er(function(Tn){return q.commandType(Tn,"number",nr,on.commandStr),Tn|0},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,"typeof "+xn+'==="number"',"invalid stencil.mask")}),Kn.def(xn,"|0")});case Zc:return Er(function(Tn){q.commandType(Tn,"object",nr,on.commandStr);var Kn=Tn.cmp||"keep",xn=Tn.ref||0,Tr="mask"in Tn?Tn.mask:-1;return q.commandParameter(Kn,bu,lr+".cmp",on.commandStr),q.commandType(xn,"number",lr+".ref",on.commandStr),q.commandType(Tr,"number",lr+".mask",on.commandStr),[bu[Kn],xn,Tr]},function(Tn,Kn,xn){var Tr=Tn.constants.compareFuncs;q.optional(function(){function oi(){Tn.assert(Kn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}oi(xn+"&&typeof ",xn,'==="object"'),oi('!("cmp" in ',xn,")||(",xn,".cmp in ",Tr,")")});var jr=Kn.def('"cmp" in ',xn,"?",Tr,"[",xn,".cmp]",":",Ji),ci=Kn.def(xn,".ref|0"),Kr=Kn.def('"mask" in ',xn,"?",xn,".mask|0:-1");return[jr,ci,Kr]});case bc:case Au:return Er(function(Tn){q.commandType(Tn,"object",nr,on.commandStr);var Kn=Tn.fail||"keep",xn=Tn.zfail||"keep",Tr=Tn.zpass||"keep";return q.commandParameter(Kn,Ns,lr+".fail",on.commandStr),q.commandParameter(xn,Ns,lr+".zfail",on.commandStr),q.commandParameter(Tr,Ns,lr+".zpass",on.commandStr),[lr===Au?un:Ue,Ns[Kn],Ns[xn],Ns[Tr]]},function(Tn,Kn,xn){var Tr=Tn.constants.stencilOps;q.optional(function(){Tn.assert(Kn,xn+"&&typeof "+xn+'==="object"',"invalid "+lr)});function jr(ci){return q.optional(function(){Tn.assert(Kn,'!("'+ci+'" in '+xn+")||("+xn+"."+ci+" in "+Tr+")","invalid "+lr+"."+ci+", must be one of "+Object.keys(Ns))}),Kn.def('"',ci,'" in ',xn,"?",Tr,"[",xn,".",ci,"]:",Ji)}return[lr===Au?un:Ue,jr("fail"),jr("zfail"),jr("zpass")]});case Nc:return Er(function(Tn){q.commandType(Tn,"object",nr,on.commandStr);var Kn=Tn.factor|0,xn=Tn.units|0;return q.commandType(Kn,"number",nr+".factor",on.commandStr),q.commandType(xn,"number",nr+".units",on.commandStr),[Kn,xn]},function(Tn,Kn,xn){q.optional(function(){Tn.assert(Kn,xn+"&&typeof "+xn+'==="object"',"invalid "+lr)});var Tr=Kn.def(xn,".factor|0"),jr=Kn.def(xn,".units|0");return[Tr,jr]});case Fl:return Er(function(Tn){var Kn=0;return Tn==="front"?Kn=Ue:Tn==="back"&&(Kn=un),q.command(!!Kn,nr,on.commandStr),Kn},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,xn+'==="front"||'+xn+'==="back"',"invalid cull.face")}),Kn.def(xn,'==="front"?',Ue,":",un)});case zl:return Er(function(Tn){return q.command(typeof Tn=="number"&&Tn>=In.lineWidthDims[0]&&Tn<=In.lineWidthDims[1],"invalid line width, must be a positive number between "+In.lineWidthDims[0]+" and "+In.lineWidthDims[1],on.commandStr),Tn},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,"typeof "+xn+'==="number"&&'+xn+">="+In.lineWidthDims[0]+"&&"+xn+"<="+In.lineWidthDims[1],"invalid line width")}),xn});case xc:return Er(function(Tn){return q.commandParameter(Tn,io,nr,on.commandStr),io[Tn]},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,xn+'==="cw"||'+xn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Kn.def(xn+'==="cw"?'+Gn+":"+mr)});case ml:return Er(function(Tn){return q.command(To(Tn)&&Tn.length===4,"color.mask must be length 4 array",on.commandStr),Tn.map(function(Kn){return!!Kn})},function(Tn,Kn,xn){return q.optional(function(){Tn.assert(Kn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===4","invalid color.mask")}),Te(4,function(Tr){return"!!"+xn+"["+Tr+"]"})});case kc:return Er(function(Tn){q.command(typeof Tn=="object"&&Tn,nr,on.commandStr);var Kn="value"in Tn?Tn.value:1,xn=!!Tn.invert;return q.command(typeof Kn=="number"&&Kn>=0&&Kn<=1,"sample.coverage.value must be a number between 0 and 1",on.commandStr),[Kn,xn]},function(Tn,Kn,xn){q.optional(function(){Tn.assert(Kn,xn+"&&typeof "+xn+'==="object"',"invalid sample.coverage")});var Tr=Kn.def('"value" in ',xn,"?+",xn,".value:1"),jr=Kn.def("!!",xn,".invert");return[Tr,jr]})}}),wr}function kl(Mn,on){var er=Mn.static,Ir=Mn.dynamic,wr={};return Object.keys(er).forEach(function(lr){var nr=er[lr],Er;if(typeof nr=="number"||typeof nr=="boolean")Er=Go(function(){return nr});else if(typeof nr=="function"){var Tn=nr._reglType;Tn==="texture2d"||Tn==="textureCube"?Er=Go(function(Kn){return Kn.link(nr)}):Tn==="framebuffer"||Tn==="framebufferCube"?(q.command(nr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+lr+'"',on.commandStr),Er=Go(function(Kn){return Kn.link(nr.color[0])})):q.commandRaise('invalid data for uniform "'+lr+'"',on.commandStr)}else To(nr)?Er=Go(function(Kn){var xn=Kn.global.def("[",Te(nr.length,function(Tr){return q.command(typeof nr[Tr]=="number"||typeof nr[Tr]=="boolean","invalid uniform "+lr,Kn.commandStr),nr[Tr]}),"]");return xn}):q.commandRaise('invalid or missing data for uniform "'+lr+'"',on.commandStr);Er.value=nr,wr[lr]=Er}),Object.keys(Ir).forEach(function(lr){var nr=Ir[lr];wr[lr]=hl(nr,function(Er,Tn){return Er.invoke(Tn,nr)})}),wr}function Vo(Mn,on){var er=Mn.static,Ir=Mn.dynamic,wr={};return Object.keys(er).forEach(function(lr){var nr=er[lr],Er=_e.id(lr),Tn=new Lr;if(Eu(nr))Tn.state=Li,Tn.buffer=ar.getBuffer(ar.create(nr,Gc,!1,!0)),Tn.type=0;else{var Kn=ar.getBuffer(nr);if(Kn)Tn.state=Li,Tn.buffer=Kn,Tn.type=0;else if(q.command(typeof nr=="object"&&nr,"invalid data for attribute "+lr,on.commandStr),"constant"in nr){var xn=nr.constant;Tn.buffer="null",Tn.state=Ki,typeof xn=="number"?Tn.x=xn:(q.command(To(xn)&&xn.length>0&&xn.length<=4,"invalid constant for attribute "+lr,on.commandStr),Yr.forEach(function(da,Io){Io<xn.length&&(Tn[da]=xn[Io])}))}else{Eu(nr.buffer)?Kn=ar.getBuffer(ar.create(nr.buffer,Gc,!1,!0)):Kn=ar.getBuffer(nr.buffer),q.command(!!Kn,'missing buffer for attribute "'+lr+'"',on.commandStr);var Tr=nr.offset|0;q.command(Tr>=0,'invalid offset for attribute "'+lr+'"',on.commandStr);var jr=nr.stride|0;q.command(jr>=0&&jr<256,'invalid stride for attribute "'+lr+'", must be integer betweeen [0, 255]',on.commandStr);var ci=nr.size|0;q.command(!("size"in nr)||ci>0&&ci<=4,'invalid size for attribute "'+lr+'", must be 1,2,3,4',on.commandStr);var Kr=!!nr.normalized,oi=0;"type"in nr&&(q.commandParameter(nr.type,Ja,"invalid type for attribute "+lr,on.commandStr),oi=Ja[nr.type]);var Di=nr.divisor|0;"divisor"in nr&&(q.command(Di===0||di,'cannot specify divisor for attribute "'+lr+'", instancing not supported',on.commandStr),q.command(Di>=0,'invalid divisor for attribute "'+lr+'"',on.commandStr)),q.optional(function(){var da=on.commandStr,Io=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(nr).forEach(function(ua){q.command(Io.indexOf(ua)>=0,'unknown parameter "'+ua+'" for attribute pointer "'+lr+'" (valid parameters are '+Io+")",da)})}),Tn.buffer=Kn,Tn.state=Li,Tn.size=ci,Tn.normalized=Kr,Tn.type=oi||Kn.dtype,Tn.offset=Tr,Tn.stride=jr,Tn.divisor=Di}}wr[lr]=Go(function(da,Io){var ua=da.attribCache;if(Er in ua)return ua[Er];var ja={isStream:!1};return Object.keys(Tn).forEach(function(Eo){ja[Eo]=Tn[Eo]}),Tn.buffer&&(ja.buffer=da.link(Tn.buffer),ja.type=ja.type||ja.buffer+".dtype"),ua[Er]=ja,ja})}),Object.keys(Ir).forEach(function(lr){var nr=Ir[lr];function Er(Tn,Kn){var xn=Tn.invoke(Kn,nr),Tr=Tn.shared,jr=Tn.constants,ci=Tr.isBufferArgs,Kr=Tr.buffer;q.optional(function(){Tn.assert(Kn,xn+"&&(typeof "+xn+'==="object"||typeof '+xn+'==="function")&&('+ci+"("+xn+")||"+Kr+".getBuffer("+xn+")||"+Kr+".getBuffer("+xn+".buffer)||"+ci+"("+xn+'.buffer)||("constant" in '+xn+"&&(typeof "+xn+'.constant==="number"||'+Tr.isArrayLike+"("+xn+".constant))))",'invalid dynamic attribute "'+lr+'"')});var oi={isStream:Kn.def(!1)},Di=new Lr;Di.state=Li,Object.keys(Di).forEach(function(ja){oi[ja]=Kn.def(""+Di[ja])});var da=oi.buffer,Io=oi.type;Kn("if(",ci,"(",xn,")){",oi.isStream,"=true;",da,"=",Kr,".createStream(",Gc,",",xn,");",Io,"=",da,".dtype;","}else{",da,"=",Kr,".getBuffer(",xn,");","if(",da,"){",Io,"=",da,".dtype;",'}else if("constant" in ',xn,"){",oi.state,"=",Ki,";","if(typeof "+xn+'.constant === "number"){',oi[Yr[0]],"=",xn,".constant;",Yr.slice(1).map(function(ja){return oi[ja]}).join("="),"=0;","}else{",Yr.map(function(ja,Eo){return oi[ja]+"="+xn+".constant.length>"+Eo+"?"+xn+".constant["+Eo+"]:0;"}).join(""),"}}else{","if(",ci,"(",xn,".buffer)){",da,"=",Kr,".createStream(",Gc,",",xn,".buffer);","}else{",da,"=",Kr,".getBuffer(",xn,".buffer);","}",Io,'="type" in ',xn,"?",jr.glTypes,"[",xn,".type]:",da,".dtype;",oi.normalized,"=!!",xn,".normalized;");function ua(ja){Kn(oi[ja],"=",xn,".",ja,"|0;")}return ua("size"),ua("offset"),ua("stride"),ua("divisor"),Kn("}}"),Kn.exit("if(",oi.isStream,"){",Kr,".destroyStream(",da,");","}"),oi}wr[lr]=hl(nr,Er)}),wr}function vl(Mn,on){var er=Mn.static,Ir=Mn.dynamic;if(Ac in er){var wr=er[Ac];return wr!==null&&Vr.getVAO(wr)===null&&(wr=Vr.createVAO(wr)),Go(function(nr){return nr.link(Vr.getVAO(wr))})}else if(Ac in Ir){var lr=Ir[Ac];return hl(lr,function(nr,Er){var Tn=nr.invoke(Er,lr);return Er.def(nr.shared.vao+".getVAO("+Tn+")")})}return null}function Zs(Mn){var on=Mn.static,er=Mn.dynamic,Ir={};return Object.keys(on).forEach(function(wr){var lr=on[wr];Ir[wr]=Go(function(nr,Er){return typeof lr=="number"||typeof lr=="boolean"?""+lr:nr.link(lr)})}),Object.keys(er).forEach(function(wr){var lr=er[wr];Ir[wr]=hl(lr,function(nr,Er){return nr.invoke(Er,lr)})}),Ir}function Gl(Mn,on,er,Ir,wr){var lr=Mn.static,nr=Mn.dynamic;q.optional(function(){var ua=[Cl,ws,cu,Is,Yl,Dc,Rc,of,al,Ac].concat(wi);function ja(Eo){Object.keys(Eo).forEach(function(gs){q.command(ua.indexOf(gs)>=0,'unknown parameter "'+gs+'"',wr.commandStr)})}ja(lr),ja(nr)});var Er=qa(Mn,on),Tn=Gi(Mn,wr),Kn=co(Mn,Tn,wr),xn=Fo(Mn,wr),Tr=dl(Mn,wr),jr=Ao(Mn,wr,Er);function ci(ua){var ja=Kn[ua];ja&&(Tr[ua]=ja)}ci(Hl),ci(bi(Kc));var Kr=Object.keys(Tr).length>0,oi={framebuffer:Tn,draw:xn,shader:jr,state:Tr,dirty:Kr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(oi.profile=$i(Mn,wr),oi.uniforms=kl(er,wr),oi.drawVAO=oi.scopeVAO=vl(Mn,wr),!oi.drawVAO&&jr.program&&!Er&&Ze.angle_instanced_arrays){var Di=!0,da=jr.program.attributes.map(function(ua){var ja=on.static[ua];return Di=Di&&!!ja,ja});if(Di&&da.length>0){var Io=Vr.getVAO(Vr.createVAO(da));oi.drawVAO=new ps(null,null,null,function(ua,ja){return ua.link(Io)}),oi.useVAO=!0}}return Er?oi.useVAO=!0:oi.attributes=Vo(on,wr),oi.context=Zs(Ir,wr),oi}function Zl(Mn,on,er){var Ir=Mn.shared,wr=Ir.context,lr=Mn.scope();Object.keys(er).forEach(function(nr){on.save(wr,"."+nr);var Er=er[nr],Tn=Er.append(Mn,on);Array.isArray(Tn)?lr(wr,".",nr,"=[",Tn.join(),"];"):lr(wr,".",nr,"=",Tn,";")}),on(lr)}function ac(Mn,on,er,Ir){var wr=Mn.shared,lr=wr.gl,nr=wr.framebuffer,Er;Vi&&(Er=on.def(wr.extensions,".webgl_draw_buffers"));var Tn=Mn.constants,Kn=Tn.drawBuffer,xn=Tn.backBuffer,Tr;er?Tr=er.append(Mn,on):Tr=on.def(nr,".next"),Ir||on("if(",Tr,"!==",nr,".cur){"),on("if(",Tr,"){",lr,".bindFramebuffer(",No,",",Tr,".framebuffer);"),Vi&&on(Er,".drawBuffersWEBGL(",Kn,"[",Tr,".colorAttachments.length]);"),on("}else{",lr,".bindFramebuffer(",No,",null);"),Vi&&on(Er,".drawBuffersWEBGL(",xn,");"),on("}",nr,".cur=",Tr,";"),Ir||on("}")}function uc(Mn,on,er){var Ir=Mn.shared,wr=Ir.gl,lr=Mn.current,nr=Mn.next,Er=Ir.current,Tn=Ir.next,Kn=Mn.cond(Er,".dirty");wi.forEach(function(xn){var Tr=bi(xn);if(!(Tr in er.state)){var jr,ci;if(Tr in nr){jr=nr[Tr],ci=lr[Tr];var Kr=Te(qr[Tr].length,function(Di){return Kn.def(jr,"[",Di,"]")});Kn(Mn.cond(Kr.map(function(Di,da){return Di+"!=="+ci+"["+da+"]"}).join("||")).then(wr,".",yi[Tr],"(",Kr,");",Kr.map(function(Di,da){return ci+"["+da+"]="+Di}).join(";"),";"))}else{jr=Kn.def(Tn,".",Tr);var oi=Mn.cond(jr,"!==",Er,".",Tr);Kn(oi),Tr in Pi?oi(Mn.cond(jr).then(wr,".enable(",Pi[Tr],");").else(wr,".disable(",Pi[Tr],");"),Er,".",Tr,"=",jr,";"):oi(wr,".",yi[Tr],"(",jr,");",Er,".",Tr,"=",jr,";")}}}),Object.keys(er.state).length===0&&Kn(Er,".dirty=false;"),on(Kn)}function gc(Mn,on,er,Ir){var wr=Mn.shared,lr=Mn.current,nr=wr.current,Er=wr.gl;Ol(Object.keys(er)).forEach(function(Tn){var Kn=er[Tn];if(!(Ir&&!Ir(Kn))){var xn=Kn.append(Mn,on);if(Pi[Tn]){var Tr=Pi[Tn];Vs(Kn)?xn?on(Er,".enable(",Tr,");"):on(Er,".disable(",Tr,");"):on(Mn.cond(xn).then(Er,".enable(",Tr,");").else(Er,".disable(",Tr,");")),on(nr,".",Tn,"=",xn,";")}else if(To(xn)){var jr=lr[Tn];on(Er,".",yi[Tn],"(",xn,");",xn.map(function(ci,Kr){return jr+"["+Kr+"]="+ci}).join(";"),";")}else on(Er,".",yi[Tn],"(",xn,");",nr,".",Tn,"=",xn,";")}})}function Vl(Mn,on){di&&(Mn.instancing=on.def(Mn.shared.extensions,".angle_instanced_arrays"))}function Co(Mn,on,er,Ir,wr){var lr=Mn.shared,nr=Mn.stats,Er=lr.current,Tn=lr.timer,Kn=er.profile;function xn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,jr;function ci(ua){Tr=on.def(),ua(Tr,"=",xn(),";"),typeof wr=="string"?ua(nr,".count+=",wr,";"):ua(nr,".count++;"),vi&&(Ir?(jr=on.def(),ua(jr,"=",Tn,".getNumPendingQueries();")):ua(Tn,".beginQuery(",nr,");"))}function Kr(ua){ua(nr,".cpuTime+=",xn(),"-",Tr,";"),vi&&(Ir?ua(Tn,".pushScopeStats(",jr,",",Tn,".getNumPendingQueries(),",nr,");"):ua(Tn,".endQuery();"))}function oi(ua){var ja=on.def(Er,".profile");on(Er,".profile=",ua,";"),on.exit(Er,".profile=",ja,";")}var Di;if(Kn){if(Vs(Kn)){Kn.enable?(ci(on),Kr(on.exit),oi("true")):oi("false");return}Di=Kn.append(Mn,on),oi(Di)}else Di=on.def(Er,".profile");var da=Mn.block();ci(da),on("if(",Di,"){",da,"}");var Io=Mn.block();Kr(Io),on.exit("if(",Di,"){",Io,"}")}function Sc(Mn,on,er,Ir,wr){var lr=Mn.shared;function nr(Tn){switch(Tn){case gf:case lf:case Wc:return 2;case xu:case Oc:case rf:return 3;case Vc:case pc:case yf:return 4;default:return 1}}function Er(Tn,Kn,xn){var Tr=lr.gl,jr=on.def(Tn,".location"),ci=on.def(lr.attributes,"[",jr,"]"),Kr=xn.state,oi=xn.buffer,Di=[xn.x,xn.y,xn.z,xn.w],da=["buffer","normalized","offset","stride"];function Io(){on("if(!",ci,".buffer){",Tr,".enableVertexAttribArray(",jr,");}");var ja=xn.type,Eo;if(xn.size?Eo=on.def(xn.size,"||",Kn):Eo=Kn,on("if(",ci,".type!==",ja,"||",ci,".size!==",Eo,"||",da.map(function(Fu){return ci+"."+Fu+"!=="+xn[Fu]}).join("||"),"){",Tr,".bindBuffer(",Gc,",",oi,".buffer);",Tr,".vertexAttribPointer(",[jr,Eo,ja,xn.normalized,xn.stride,xn.offset],");",ci,".type=",ja,";",ci,".size=",Eo,";",da.map(function(Fu){return ci+"."+Fu+"="+xn[Fu]+";"}).join(""),"}"),di){var gs=xn.divisor;on("if(",ci,".divisor!==",gs,"){",Mn.instancing,".vertexAttribDivisorANGLE(",[jr,gs],");",ci,".divisor=",gs,";}")}}function ua(){on("if(",ci,".buffer){",Tr,".disableVertexAttribArray(",jr,");",ci,".buffer=null;","}if(",Yr.map(function(ja,Eo){return ci+"."+ja+"!=="+Di[Eo]}).join("||"),"){",Tr,".vertexAttrib4f(",jr,",",Di,");",Yr.map(function(ja,Eo){return ci+"."+ja+"="+Di[Eo]+";"}).join(""),"}")}Kr===Li?Io():Kr===Ki?ua():(on("if(",Kr,"===",Li,"){"),Io(),on("}else{"),ua(),on("}"))}Ir.forEach(function(Tn){var Kn=Tn.name,xn=er.attributes[Kn],Tr;if(xn){if(!wr(xn))return;Tr=xn.append(Mn,on)}else{if(!wr(bf))return;var jr=Mn.scopeAttrib(Kn);q.optional(function(){Mn.assert(on,jr+".state","missing attribute "+Kn)}),Tr={},Object.keys(new Lr).forEach(function(ci){Tr[ci]=on.def(jr,".",ci)})}Er(Mn.link(Tn),nr(Tn.info.type),Tr)})}function Ks(Mn,on,er,Ir,wr){for(var lr=Mn.shared,nr=lr.gl,Er,Tn=0;Tn<Ir.length;++Tn){var Kn=Ir[Tn],xn=Kn.name,Tr=Kn.info.type,jr=er.uniforms[xn],ci=Mn.link(Kn),Kr=ci+".location",oi;if(jr){if(!wr(jr))continue;if(Vs(jr)){var Di=jr.value;if(q.command(Di!==null&&typeof Di!="undefined",'missing uniform "'+xn+'"',Mn.commandStr),Tr===ge||Tr===Gt){q.command(typeof Di=="function"&&(Tr===ge&&(Di._reglType==="texture2d"||Di._reglType==="framebuffer")||Tr===Gt&&(Di._reglType==="textureCube"||Di._reglType==="framebufferCube")),"invalid texture for uniform "+xn,Mn.commandStr);var da=Mn.link(Di._texture||Di.color[0]._texture);on(nr,".uniform1i(",Kr,",",da+".bind());"),on.exit(da,".unbind();")}else if(Tr===zc||Tr===xf||Tr===ve){q.optional(function(){q.command(To(Di),"invalid matrix for uniform "+xn,Mn.commandStr),q.command(Tr===zc&&Di.length===4||Tr===xf&&Di.length===9||Tr===ve&&Di.length===16,"invalid length for matrix uniform "+xn,Mn.commandStr)});var Io=Mn.global.def("new Float32Array(["+Array.prototype.slice.call(Di)+"])"),ua=2;Tr===xf?ua=3:Tr===ve&&(ua=4),on(nr,".uniformMatrix",ua,"fv(",Kr,",false,",Io,");")}else{switch(Tr){case nf:q.commandType(Di,"number","uniform "+xn,Mn.commandStr),Er="1f";break;case gf:q.command(To(Di)&&Di.length===2,"uniform "+xn,Mn.commandStr),Er="2f";break;case xu:q.command(To(Di)&&Di.length===3,"uniform "+xn,Mn.commandStr),Er="3f";break;case Vc:q.command(To(Di)&&Di.length===4,"uniform "+xn,Mn.commandStr),Er="4f";break;case mf:q.commandType(Di,"boolean","uniform "+xn,Mn.commandStr),Er="1i";break;case uf:q.commandType(Di,"number","uniform "+xn,Mn.commandStr),Er="1i";break;case Wc:q.command(To(Di)&&Di.length===2,"uniform "+xn,Mn.commandStr),Er="2i";break;case lf:q.command(To(Di)&&Di.length===2,"uniform "+xn,Mn.commandStr),Er="2i";break;case rf:q.command(To(Di)&&Di.length===3,"uniform "+xn,Mn.commandStr),Er="3i";break;case Oc:q.command(To(Di)&&Di.length===3,"uniform "+xn,Mn.commandStr),Er="3i";break;case yf:q.command(To(Di)&&Di.length===4,"uniform "+xn,Mn.commandStr),Er="4i";break;case pc:q.command(To(Di)&&Di.length===4,"uniform "+xn,Mn.commandStr),Er="4i";break}on(nr,".uniform",Er,"(",Kr,",",To(Di)?Array.prototype.slice.call(Di):Di,");")}continue}else oi=jr.append(Mn,on)}else{if(!wr(bf))continue;oi=on.def(lr.uniforms,"[",_e.id(xn),"]")}Tr===ge?(q(!Array.isArray(oi),"must specify a scalar prop for textures"),on("if(",oi,"&&",oi,'._reglType==="framebuffer"){',oi,"=",oi,".color[0];","}")):Tr===Gt&&(q(!Array.isArray(oi),"must specify a scalar prop for cube maps"),on("if(",oi,"&&",oi,'._reglType==="framebufferCube"){',oi,"=",oi,".color[0];","}")),q.optional(function(){function Uc(Jc,Qf){Mn.assert(on,Jc,'bad data or missing for uniform "'+xn+'".  '+Qf)}function $f(Jc){q(!Array.isArray(oi),"must not specify an array type for uniform"),Uc("typeof "+oi+'==="'+Jc+'"',"invalid type, expected "+Jc)}function Bc(Jc,Qf){Array.isArray(oi)?q(oi.length===Jc,"must have length "+Jc):Uc(lr.isArrayLike+"("+oi+")&&"+oi+".length==="+Jc,"invalid vector, should have length "+Jc,Mn.commandStr)}function Ff(Jc){q(!Array.isArray(oi),"must not specify a value type"),Uc("typeof "+oi+'==="function"&&'+oi+'._reglType==="texture'+(Jc===vc?"2d":"Cube")+'"',"invalid texture type",Mn.commandStr)}switch(Tr){case uf:$f("number");break;case lf:Bc(2,"number");break;case Oc:Bc(3,"number");break;case pc:Bc(4,"number");break;case nf:$f("number");break;case gf:Bc(2,"number");break;case xu:Bc(3,"number");break;case Vc:Bc(4,"number");break;case mf:$f("boolean");break;case Wc:Bc(2,"boolean");break;case rf:Bc(3,"boolean");break;case yf:Bc(4,"boolean");break;case zc:Bc(4,"number");break;case xf:Bc(9,"number");break;case ve:Bc(16,"number");break;case ge:Ff(vc);break;case Gt:Ff(ef);break}});var ja=1;switch(Tr){case ge:case Gt:var Eo=on.def(oi,"._texture");on(nr,".uniform1i(",Kr,",",Eo,".bind());"),on.exit(Eo,".unbind();");continue;case uf:case mf:Er="1i";break;case lf:case Wc:Er="2i",ja=2;break;case Oc:case rf:Er="3i",ja=3;break;case pc:case yf:Er="4i",ja=4;break;case nf:Er="1f";break;case gf:Er="2f",ja=2;break;case xu:Er="3f",ja=3;break;case Vc:Er="4f",ja=4;break;case zc:Er="Matrix2fv";break;case xf:Er="Matrix3fv";break;case ve:Er="Matrix4fv";break}if(on(nr,".uniform",Er,"(",Kr,","),Er.charAt(0)==="M"){var gs=Math.pow(Tr-zc+2,2),Fu=Mn.global.def("new Float32Array(",gs,")");Array.isArray(oi)?on("false,(",Te(gs,function(Uc){return Fu+"["+Uc+"]="+oi[Uc]}),",",Fu,")"):on("false,(Array.isArray(",oi,")||",oi," instanceof Float32Array)?",oi,":(",Te(gs,function(Uc){return Fu+"["+Uc+"]="+oi+"["+Uc+"]"}),",",Fu,")")}else ja>1?on(Te(ja,function(Uc){return Array.isArray(oi)?oi[Uc]:oi+"["+Uc+"]"})):(q(!Array.isArray(oi),"uniform value must not be an array"),on(oi));on(");")}}function Ua(Mn,on,er,Ir){var wr=Mn.shared,lr=wr.gl,nr=wr.draw,Er=Ir.draw;function Tn(){var Eo=Er.elements,gs,Fu=on;return Eo?((Eo.contextDep&&Ir.contextDynamic||Eo.propDep)&&(Fu=er),gs=Eo.append(Mn,Fu)):gs=Fu.def(nr,".",Is),gs&&Fu("if("+gs+")"+lr+".bindBuffer("+Af+","+gs+".buffer.buffer);"),gs}function Kn(){var Eo=Er.count,gs,Fu=on;return Eo?((Eo.contextDep&&Ir.contextDynamic||Eo.propDep)&&(Fu=er),gs=Eo.append(Mn,Fu),q.optional(function(){Eo.MISSING&&Mn.assert(on,"false","missing vertex count"),Eo.DYNAMIC&&Mn.assert(Fu,gs+">=0","missing vertex count")})):(gs=Fu.def(nr,".",Rc),q.optional(function(){Mn.assert(Fu,gs+">=0","missing vertex count")})),gs}var xn=Tn();function Tr(Eo){var gs=Er[Eo];return gs?gs.contextDep&&Ir.contextDynamic||gs.propDep?gs.append(Mn,er):gs.append(Mn,on):on.def(nr,".",Eo)}var jr=Tr(Yl),ci=Tr(Dc),Kr=Kn();if(typeof Kr=="number"){if(Kr===0)return}else er("if(",Kr,"){"),er.exit("}");var oi,Di;di&&(oi=Tr(of),Di=Mn.instancing);var da=xn+".type",Io=Er.elements&&Vs(Er.elements);function ua(){function Eo(){er(Di,".drawElementsInstancedANGLE(",[jr,Kr,da,ci+"<<(("+da+"-"+Ti+")>>1)",oi],");")}function gs(){er(Di,".drawArraysInstancedANGLE(",[jr,ci,Kr,oi],");")}xn?Io?Eo():(er("if(",xn,"){"),Eo(),er("}else{"),gs(),er("}")):gs()}function ja(){function Eo(){er(lr+".drawElements("+[jr,Kr,da,ci+"<<(("+da+"-"+Ti+")>>1)"]+");")}function gs(){er(lr+".drawArrays("+[jr,ci,Kr]+");")}xn?Io?Eo():(er("if(",xn,"){"),Eo(),er("}else{"),gs(),er("}")):gs()}di&&(typeof oi!="number"||oi>=0)?typeof oi=="string"?(er("if(",oi,">0){"),ua(),er("}else if(",oi,"<0){"),ja(),er("}")):ua():ja()}function ho(Mn,on,er,Ir,wr){var lr=za(),nr=lr.proc("body",wr);return q.optional(function(){lr.commandStr=on.commandStr,lr.command=lr.link(on.commandStr)}),di&&(lr.instancing=nr.def(lr.shared.extensions,".angle_instanced_arrays")),Mn(lr,nr,er,Ir),lr.compile().body}function ns(Mn,on,er,Ir){Vl(Mn,on),er.useVAO?er.drawVAO?on(Mn.shared.vao,".setVAO(",er.drawVAO.append(Mn,on),");"):on(Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"):(on(Mn.shared.vao,".setVAO(null);"),Sc(Mn,on,er,Ir.attributes,function(){return!0})),Ks(Mn,on,er,Ir.uniforms,function(){return!0}),Ua(Mn,on,on,er)}function ec(Mn,on){var er=Mn.proc("draw",1);Vl(Mn,er),Zl(Mn,er,on.context),ac(Mn,er,on.framebuffer),uc(Mn,er,on),gc(Mn,er,on.state),Co(Mn,er,on,!1,!0);var Ir=on.shader.progVar.append(Mn,er);if(er(Mn.shared.gl,".useProgram(",Ir,".program);"),on.shader.program)ns(Mn,er,on,on.shader.program);else{er(Mn.shared.vao,".setVAO(null);");var wr=Mn.global.def("{}"),lr=er.def(Ir,".id"),nr=er.def(wr,"[",lr,"]");er(Mn.cond(nr).then(nr,".call(this,a0);").else(nr,"=",wr,"[",lr,"]=",Mn.link(function(Er){return ho(ns,Mn,on,Er,1)}),"(",Ir,");",nr,".call(this,a0);"))}Object.keys(on.state).length>0&&er(Mn.shared.current,".dirty=true;")}function mc(Mn,on,er,Ir){Mn.batchId="a1",Vl(Mn,on);function wr(){return!0}Sc(Mn,on,er,Ir.attributes,wr),Ks(Mn,on,er,Ir.uniforms,wr),Ua(Mn,on,on,er)}function Ef(Mn,on,er,Ir){Vl(Mn,on);var wr=er.contextDep,lr=on.def(),nr="a0",Er="a1",Tn=on.def();Mn.shared.props=Tn,Mn.batchId=lr;var Kn=Mn.scope(),xn=Mn.scope();on(Kn.entry,"for(",lr,"=0;",lr,"<",Er,";++",lr,"){",Tn,"=",nr,"[",lr,"];",xn,"}",Kn.exit);function Tr(da){return da.contextDep&&wr||da.propDep}function jr(da){return!Tr(da)}if(er.needsContext&&Zl(Mn,xn,er.context),er.needsFramebuffer&&ac(Mn,xn,er.framebuffer),gc(Mn,xn,er.state,Tr),er.profile&&Tr(er.profile)&&Co(Mn,xn,er,!1,!0),Ir)er.useVAO?er.drawVAO?Tr(er.drawVAO)?xn(Mn.shared.vao,".setVAO(",er.drawVAO.append(Mn,xn),");"):Kn(Mn.shared.vao,".setVAO(",er.drawVAO.append(Mn,Kn),");"):Kn(Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"):(Kn(Mn.shared.vao,".setVAO(null);"),Sc(Mn,Kn,er,Ir.attributes,jr),Sc(Mn,xn,er,Ir.attributes,Tr)),Ks(Mn,Kn,er,Ir.uniforms,jr),Ks(Mn,xn,er,Ir.uniforms,Tr),Ua(Mn,Kn,xn,er);else{var ci=Mn.global.def("{}"),Kr=er.shader.progVar.append(Mn,xn),oi=xn.def(Kr,".id"),Di=xn.def(ci,"[",oi,"]");xn(Mn.shared.gl,".useProgram(",Kr,".program);","if(!",Di,"){",Di,"=",ci,"[",oi,"]=",Mn.link(function(da){return ho(mc,Mn,er,da,2)}),"(",Kr,");}",Di,".call(this,a0[",lr,"],",lr,");")}}function jn(Mn,on){var er=Mn.proc("batch",2);Mn.batchId="0",Vl(Mn,er);var Ir=!1,wr=!0;Object.keys(on.context).forEach(function(ci){Ir=Ir||on.context[ci].propDep}),Ir||(Zl(Mn,er,on.context),wr=!1);var lr=on.framebuffer,nr=!1;lr?(lr.propDep?Ir=nr=!0:lr.contextDep&&Ir&&(nr=!0),nr||ac(Mn,er,lr)):ac(Mn,er,null),on.state.viewport&&on.state.viewport.propDep&&(Ir=!0);function Er(ci){return ci.contextDep&&Ir||ci.propDep}uc(Mn,er,on),gc(Mn,er,on.state,function(ci){return!Er(ci)}),(!on.profile||!Er(on.profile))&&Co(Mn,er,on,!1,"a1"),on.contextDep=Ir,on.needsContext=wr,on.needsFramebuffer=nr;var Tn=on.shader.progVar;if(Tn.contextDep&&Ir||Tn.propDep)Ef(Mn,er,on,null);else{var Kn=Tn.append(Mn,er);if(er(Mn.shared.gl,".useProgram(",Kn,".program);"),on.shader.program)Ef(Mn,er,on,on.shader.program);else{er(Mn.shared.vao,".setVAO(null);");var xn=Mn.global.def("{}"),Tr=er.def(Kn,".id"),jr=er.def(xn,"[",Tr,"]");er(Mn.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",xn,"[",Tr,"]=",Mn.link(function(ci){return ho(Ef,Mn,on,ci,2)}),"(",Kn,");",jr,".call(this,a0,a1);"))}}Object.keys(on.state).length>0&&er(Mn.shared.current,".dirty=true;")}function Zr(Mn,on){var er=Mn.proc("scope",3);Mn.batchId="a2";var Ir=Mn.shared,wr=Ir.current;Zl(Mn,er,on.context),on.framebuffer&&on.framebuffer.append(Mn,er),Ol(Object.keys(on.state)).forEach(function(nr){var Er=on.state[nr],Tn=Er.append(Mn,er);To(Tn)?Tn.forEach(function(Kn,xn){er.set(Mn.next[nr],"["+xn+"]",Kn)}):er.set(Ir.next,"."+nr,Tn)}),Co(Mn,er,on,!0,!0),[Is,Dc,Rc,of,Yl].forEach(function(nr){var Er=on.draw[nr];!Er||er.set(Ir.draw,"."+nr,""+Er.append(Mn,er))}),Object.keys(on.uniforms).forEach(function(nr){var Er=on.uniforms[nr].append(Mn,er);Array.isArray(Er)&&(Er="["+Er.join()+"]"),er.set(Ir.uniforms,"["+_e.id(nr)+"]",Er)}),Object.keys(on.attributes).forEach(function(nr){var Er=on.attributes[nr].append(Mn,er),Tn=Mn.scopeAttrib(nr);Object.keys(new Lr).forEach(function(Kn){er.set(Tn,"."+Kn,Er[Kn])})}),on.scopeVAO&&er.set(Ir.vao,".targetVAO",on.scopeVAO.append(Mn,er));function lr(nr){var Er=on.shader[nr];Er&&er.set(Ir.shader,"."+nr,Er.append(Mn,er))}lr(ws),lr(cu),Object.keys(on.state).length>0&&(er(wr,".dirty=true;"),er.exit(wr,".dirty=true;")),er("a1(",Mn.shared.context,",a0,",Mn.batchId,");")}function Ur(Mn){if(!(typeof Mn!="object"||To(Mn))){for(var on=Object.keys(Mn),er=0;er<on.length;++er)if(ze.isDynamic(Mn[on[er]]))return!0;return!1}}function Qi(Mn,on,er){var Ir=on.static[er];if(!Ir||!Ur(Ir))return;var wr=Mn.global,lr=Object.keys(Ir),nr=!1,Er=!1,Tn=!1,Kn=Mn.global.def("{}");lr.forEach(function(Tr){var jr=Ir[Tr];if(ze.isDynamic(jr)){typeof jr=="function"&&(jr=Ir[Tr]=ze.unbox(jr));var ci=hl(jr,null);nr=nr||ci.thisDep,Tn=Tn||ci.propDep,Er=Er||ci.contextDep}else{switch(wr(Kn,".",Tr,"="),typeof jr){case"number":wr(jr);break;case"string":wr('"',jr,'"');break;case"object":Array.isArray(jr)&&wr("[",jr.join(),"]");break;default:wr(Mn.link(jr));break}wr(";")}});function xn(Tr,jr){lr.forEach(function(ci){var Kr=Ir[ci];if(!!ze.isDynamic(Kr)){var oi=Tr.invoke(jr,Kr);jr(Kn,".",ci,"=",oi,";")}})}on.dynamic[er]=new ze.DynamicVariable(Sa,{thisDep:nr,contextDep:Er,propDep:Tn,ref:Kn,append:xn}),delete on.static[er]}function Po(Mn,on,er,Ir,wr){var lr=za();lr.stats=lr.link(wr),Object.keys(on.static).forEach(function(Er){Qi(lr,on,Er)}),sh.forEach(function(Er){Qi(lr,Mn,Er)});var nr=Gl(Mn,on,er,Ir,lr);return ec(lr,nr),Zr(lr,nr),jn(lr,nr),E(lr.compile(),{destroy:function(){nr.shader.program.destroy()}})}return{next:na,current:qr,procs:function(){var Mn=za(),on=Mn.proc("poll"),er=Mn.proc("refresh"),Ir=Mn.block();on(Ir),er(Ir);var wr=Mn.shared,lr=wr.gl,nr=wr.next,Er=wr.current;Ir(Er,".dirty=false;"),ac(Mn,on),ac(Mn,er,null,!0);var Tn;di&&(Tn=Mn.link(di)),Ze.oes_vertex_array_object&&er(Mn.link(Ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Kn=0;Kn<In.maxAttributes;++Kn){var xn=er.def(wr.attributes,"[",Kn,"]"),Tr=Mn.cond(xn,".buffer");Tr.then(lr,".enableVertexAttribArray(",Kn,");",lr,".bindBuffer(",Gc,",",xn,".buffer.buffer);",lr,".vertexAttribPointer(",Kn,",",xn,".size,",xn,".type,",xn,".normalized,",xn,".stride,",xn,".offset);").else(lr,".disableVertexAttribArray(",Kn,");",lr,".vertexAttrib4f(",Kn,",",xn,".x,",xn,".y,",xn,".z,",xn,".w);",xn,".buffer=null;"),er(Tr),di&&er(Tn,".vertexAttribDivisorANGLE(",Kn,",",xn,".divisor);")}return er(Mn.shared.vao,".currentVAO=null;",Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"),Object.keys(Pi).forEach(function(jr){var ci=Pi[jr],Kr=Ir.def(nr,".",jr),oi=Mn.block();oi("if(",Kr,"){",lr,".enable(",ci,")}else{",lr,".disable(",ci,")}",Er,".",jr,"=",Kr,";"),er(oi),on("if(",Kr,"!==",Er,".",jr,"){",oi,"}")}),Object.keys(yi).forEach(function(jr){var ci=yi[jr],Kr=qr[jr],oi,Di,da=Mn.block();if(da(lr,".",ci,"("),To(Kr)){var Io=Kr.length;oi=Mn.global.def(nr,".",jr),Di=Mn.global.def(Er,".",jr),da(Te(Io,function(ua){return oi+"["+ua+"]"}),");",Te(Io,function(ua){return Di+"["+ua+"]="+oi+"["+ua+"];"}).join("")),on("if(",Te(Io,function(ua){return oi+"["+ua+"]!=="+Di+"["+ua+"]"}).join("||"),"){",da,"}")}else oi=Ir.def(nr,".",jr),Di=Ir.def(Er,".",jr),da(oi,");",Er,".",jr,"=",oi,";"),on("if(",oi,"!==",Di,"){",da,"}");er(da)}),Mn.compile()}(),compile:Po}}function mh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var wf=34918,ic=34919,Dh=35007,Nf=function(_e,Ze){if(!Ze.ext_disjoint_timer_query)return null;var In=[];function ar(){return In.pop()||Ze.ext_disjoint_timer_query.createQueryEXT()}function ur(Vi){In.push(Vi)}var sr=[];function Or(Vi){var qr=ar();Ze.ext_disjoint_timer_query.beginQueryEXT(Dh,qr),sr.push(qr),si(sr.length-1,sr.length,Vi)}function ri(){Ze.ext_disjoint_timer_query.endQueryEXT(Dh)}function Vr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ni=[];function fi(){return ni.pop()||new Vr}function Oi(Vi){ni.push(Vi)}var vi=[];function si(Vi,qr,na){var wi=fi();wi.startQueryIndex=Vi,wi.endQueryIndex=qr,wi.sum=0,wi.stats=na,vi.push(wi)}var Lr=[],_r=[];function di(){var Vi,qr,na=sr.length;if(na!==0){_r.length=Math.max(_r.length,na+1),Lr.length=Math.max(Lr.length,na+1),Lr[0]=0,_r[0]=0;var wi=0;for(Vi=0,qr=0;qr<sr.length;++qr){var Pi=sr[qr];Ze.ext_disjoint_timer_query.getQueryObjectEXT(Pi,ic)?(wi+=Ze.ext_disjoint_timer_query.getQueryObjectEXT(Pi,wf),ur(Pi)):sr[Vi++]=Pi,Lr[qr+1]=wi,_r[qr+1]=Vi}for(sr.length=Vi,Vi=0,qr=0;qr<vi.length;++qr){var yi=vi[qr],bi=yi.startQueryIndex,ra=yi.endQueryIndex;yi.sum+=Lr[ra]-Lr[bi];var ha=_r[bi],Ni=_r[ra];Ni===ha?(yi.stats.gpuTime+=yi.sum/1e6,Oi(yi)):(yi.startQueryIndex=ha,yi.endQueryIndex=Ni,vi[Vi++]=yi)}vi.length=Vi}}return{beginQuery:Or,endQuery:ri,pushScopeStats:si,update:di,getNumPendingQueries:function(){return sr.length},clear:function(){In.push.apply(In,sr);for(var qr=0;qr<In.length;qr++)Ze.ext_disjoint_timer_query.deleteQueryEXT(In[qr]);sr.length=0,In.length=0},restore:function(){sr.length=0,In.length=0}}},lh=16384,jt=256,Et=1024,tt=34962,St="webglcontextlost",Lt="webglcontextrestored",ae=1,ke=2,yn=3;function vn(ne,_e){for(var Ze=0;Ze<ne.length;++Ze)if(ne[Ze]===_e)return Ze;return-1}function Cn(ne){var _e=hi(ne);if(!_e)return null;var Ze=_e.gl,In=Ze.getContextAttributes(),ar=Ze.isContextLost(),ur=Ce(Ze,_e);if(!ur)return null;var sr=Xn(),Or=mh(),ri=ur.extensions,Vr=Nf(Ze,ri),ni=Sn(),fi=Ze.drawingBufferWidth,Oi=Ze.drawingBufferHeight,vi={tick:0,time:0,viewportWidth:fi,viewportHeight:Oi,framebufferWidth:fi,framebufferHeight:Oi,drawingBufferWidth:fi,drawingBufferHeight:Oi,pixelRatio:_e.pixelRatio},si={},Lr={elements:null,primitive:4,count:-1,offset:0,instances:-1},_r=Ne(Ze,ri),di=Ka(Ze,Or,_e,qr),Vi=Yt(Ze,ri,_r,Or,di);function qr(Ua){return Vi.destroyBuffer(Ua)}var na=Fs(Ze,ri,di,Or),wi=Ie(Ze,sr,Or,_e),Pi=Zt(Ze,ri,_r,function(){ra.procs.poll()},vi,Or,_e),yi=hn(Ze,ri,_r,Or,_e),bi=st(Ze,ri,_r,Pi,yi,Or),ra=Xc(Ze,sr,ri,_r,di,na,Pi,bi,si,Vi,wi,Lr,vi,Vr,_e),ha=kn(Ze,bi,ra.procs.poll,vi,In,ri,_r),Ni=ra.next,Ei=Ze.canvas,gi=[],za=[],$i=[],Gi=[_e.onDestroy],co=null;function qa(){if(gi.length===0){Vr&&Vr.update(),co=null;return}co=Xe.next(qa),gc();for(var Ua=gi.length-1;Ua>=0;--Ua){var ho=gi[Ua];ho&&ho(vi,null,0)}Ze.flush(),Vr&&Vr.update()}function Ao(){!co&&gi.length>0&&(co=Xe.next(qa))}function Fo(){co&&(Xe.cancel(qa),co=null)}function dl(Ua){Ua.preventDefault(),ar=!0,Fo(),za.forEach(function(ho){ho()})}function kl(Ua){Ze.getError(),ar=!1,ur.restore(),wi.restore(),di.restore(),Pi.restore(),yi.restore(),bi.restore(),Vi.restore(),Vr&&Vr.restore(),ra.procs.refresh(),Ao(),$i.forEach(function(ho){ho()})}Ei&&(Ei.addEventListener(St,dl,!1),Ei.addEventListener(Lt,kl,!1));function Vo(){gi.length=0,Fo(),Ei&&(Ei.removeEventListener(St,dl),Ei.removeEventListener(Lt,kl)),wi.clear(),bi.clear(),yi.clear(),Pi.clear(),na.clear(),di.clear(),Vi.clear(),Vr&&Vr.clear(),Gi.forEach(function(Ua){Ua()})}function vl(Ua){q(!!Ua,"invalid args to regl({...})"),q.type(Ua,"object","invalid args to regl({...})");function ho(wr){var lr=E({},wr);delete lr.uniforms,delete lr.attributes,delete lr.context,delete lr.vao,"stencil"in lr&&lr.stencil.op&&(lr.stencil.opBack=lr.stencil.opFront=lr.stencil.op,delete lr.stencil.op);function nr(Er){if(Er in lr){var Tn=lr[Er];delete lr[Er],Object.keys(Tn).forEach(function(Kn){lr[Er+"."+Kn]=Tn[Kn]})}}return nr("blend"),nr("depth"),nr("cull"),nr("stencil"),nr("polygonOffset"),nr("scissor"),nr("sample"),"vao"in wr&&(lr.vao=wr.vao),lr}function ns(wr,lr){var nr={},Er={};return Object.keys(wr).forEach(function(Tn){var Kn=wr[Tn];if(ze.isDynamic(Kn)){Er[Tn]=ze.unbox(Kn,Tn);return}else if(lr&&Array.isArray(Kn)){for(var xn=0;xn<Kn.length;++xn)if(ze.isDynamic(Kn[xn])){Er[Tn]=ze.unbox(Kn,Tn);return}}nr[Tn]=Kn}),{dynamic:Er,static:nr}}var ec=ns(Ua.context||{},!0),mc=ns(Ua.uniforms||{},!0),Ef=ns(Ua.attributes||{},!1),jn=ns(ho(Ua),!1),Zr={gpuTime:0,cpuTime:0,count:0},Ur=ra.compile(jn,Ef,mc,ec,Zr),Qi=Ur.draw,Po=Ur.batch,Mn=Ur.scope,on=[];function er(wr){for(;on.length<wr;)on.push(null);return on}function Ir(wr,lr){var nr;if(ar&&q.raise("context lost"),typeof wr=="function")return Mn.call(this,null,wr,0);if(typeof lr=="function")if(typeof wr=="number")for(nr=0;nr<wr;++nr)Mn.call(this,null,lr,nr);else if(Array.isArray(wr))for(nr=0;nr<wr.length;++nr)Mn.call(this,wr[nr],lr,nr);else return Mn.call(this,wr,lr,0);else if(typeof wr=="number"){if(wr>0)return Po.call(this,er(wr|0),wr|0)}else if(Array.isArray(wr)){if(wr.length)return Po.call(this,wr,wr.length)}else return Qi.call(this,wr)}return E(Ir,{stats:Zr,destroy:function(){Ur.destroy()}})}var Zs=bi.setFBO=vl({framebuffer:ze.define.call(null,ae,"framebuffer")});function Gl(Ua,ho){var ns=0;ra.procs.poll();var ec=ho.color;ec&&(Ze.clearColor(+ec[0]||0,+ec[1]||0,+ec[2]||0,+ec[3]||0),ns|=lh),"depth"in ho&&(Ze.clearDepth(+ho.depth),ns|=jt),"stencil"in ho&&(Ze.clearStencil(ho.stencil|0),ns|=Et),q(!!ns,"called regl.clear with no buffer specified"),Ze.clear(ns)}function Zl(Ua){if(q(typeof Ua=="object"&&Ua,"regl.clear() takes an object as input"),"framebuffer"in Ua)if(Ua.framebuffer&&Ua.framebuffer_reglType==="framebufferCube")for(var ho=0;ho<6;++ho)Zs(E({framebuffer:Ua.framebuffer.faces[ho]},Ua),Gl);else Zs(Ua,Gl);else Gl(null,Ua)}function ac(Ua){q.type(Ua,"function","regl.frame() callback must be a function"),gi.push(Ua);function ho(){var ns=vn(gi,Ua);q(ns>=0,"cannot cancel a frame twice");function ec(){var mc=vn(gi,ec);gi[mc]=gi[gi.length-1],gi.length-=1,gi.length<=0&&Fo()}gi[ns]=ec}return Ao(),{cancel:ho}}function uc(){var Ua=Ni.viewport,ho=Ni.scissor_box;Ua[0]=Ua[1]=ho[0]=ho[1]=0,vi.viewportWidth=vi.framebufferWidth=vi.drawingBufferWidth=Ua[2]=ho[2]=Ze.drawingBufferWidth,vi.viewportHeight=vi.framebufferHeight=vi.drawingBufferHeight=Ua[3]=ho[3]=Ze.drawingBufferHeight}function gc(){vi.tick+=1,vi.time=Co(),uc(),ra.procs.poll()}function Vl(){Pi.refresh(),uc(),ra.procs.refresh(),Vr&&Vr.update()}function Co(){return(Sn()-ni)/1e3}Vl();function Sc(Ua,ho){q.type(ho,"function","listener callback must be a function");var ns;switch(Ua){case"frame":return ac(ho);case"lost":ns=za;break;case"restore":ns=$i;break;case"destroy":ns=Gi;break;default:q.raise("invalid event, must be one of frame,lost,restore,destroy")}return ns.push(ho),{cancel:function(){for(var mc=0;mc<ns.length;++mc)if(ns[mc]===ho){ns[mc]=ns[ns.length-1],ns.pop();return}}}}var Ks=E(vl,{clear:Zl,prop:ze.define.bind(null,ae),context:ze.define.bind(null,ke),this:ze.define.bind(null,yn),draw:vl({}),buffer:function(ho){return di.create(ho,tt,!1,!1)},elements:function(ho){return na.create(ho,!1)},texture:Pi.create2D,cube:Pi.createCube,renderbuffer:yi.create,framebuffer:bi.create,framebufferCube:bi.createCube,vao:Vi.createVAO,attributes:In,frame:ac,on:Sc,limits:_r,hasExtension:function(ho){return _r.extensions.indexOf(ho.toLowerCase())>=0},read:ha,destroy:Vo,_gl:Ze,_refresh:Vl,poll:function(){gc(),Vr&&Vr.update()},now:Co,stats:Or});return _e.onDone(null,Ks),Ks}return Cn})},fdMe:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.map(e)),E}},fhzG:function(Oe,mt,R){"use strict";var U=R("q1tI"),E=R("lT4e");if(typeof U=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var T=new U.Component().updater;Oe.exports=E(U.Component,U.isValidElement,T)},fo6e:function(Oe,mt){var R=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function U(E){return R.test(E)}Oe.exports=U},g4R6:function(Oe,mt){function R(U,E,T){return U===U&&(T!==void 0&&(U=U<=T?U:T),E!==void 0&&(U=U>=E?U:E)),U}Oe.exports=R},gFfm:function(Oe,mt){function R(U,E){for(var T=-1,e=U==null?0:U.length;++T<e&&E(U[T],T,U)!==!1;);return U}Oe.exports=R},gMG2:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return M});var U={},E={},T=34,e=10,t=13;function l(x){return new Function("d","return {"+x.map(function(m,S){return JSON.stringify(m)+": d["+S+'] || ""'}).join(",")+"}")}function s(x,m){var S=l(x);return function(P,A){return m(S(P),A,x)}}function c(x){var m=Object.create(null),S=[];return x.forEach(function(P){for(var A in P)A in m||S.push(m[A]=A)}),S}function r(x,m){var S=x+"",P=S.length;return P<m?new Array(m-P+1).join(0)+S:S}function h(x){return x<0?"-"+r(-x,6):x>9999?"+"+r(x,6):r(x,4)}function n(x){var m=x.getUTCHours(),S=x.getUTCMinutes(),P=x.getUTCSeconds(),A=x.getUTCMilliseconds();return isNaN(x)?"Invalid Date":h(x.getUTCFullYear(),4)+"-"+r(x.getUTCMonth()+1,2)+"-"+r(x.getUTCDate(),2)+(A?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"."+r(A,3)+"Z":P?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"Z":S||m?"T"+r(m,2)+":"+r(S,2)+"Z":"")}var i=function(x){var m=new RegExp('["'+x+`
\r]`),S=x.charCodeAt(0);function P(k,Z){var X,it,ft=A(k,function(pt,ut){if(X)return X(pt,ut-1);it=pt,X=Z?s(pt,Z):l(pt)});return ft.columns=it||[],ft}function A(k,Z){var X=[],it=k.length,ft=0,pt=0,ut,It=it<=0,Nt=!1;k.charCodeAt(it-1)===e&&--it,k.charCodeAt(it-1)===t&&--it;function Rt(){if(It)return E;if(Nt)return Nt=!1,U;var bt,At=ft,rt;if(k.charCodeAt(At)===T){for(;ft++<it&&k.charCodeAt(ft)!==T||k.charCodeAt(++ft)===T;);return(bt=ft)>=it?It=!0:(rt=k.charCodeAt(ft++))===e?Nt=!0:rt===t&&(Nt=!0,k.charCodeAt(ft)===e&&++ft),k.slice(At+1,bt-1).replace(/""/g,'"')}for(;ft<it;){if((rt=k.charCodeAt(bt=ft++))===e)Nt=!0;else if(rt===t)Nt=!0,k.charCodeAt(ft)===e&&++ft;else if(rt!==S)continue;return k.slice(At,bt)}return It=!0,k.slice(At,it)}for(;(ut=Rt())!==E;){for(var Mt=[];ut!==U&&ut!==E;)Mt.push(ut),ut=Rt();Z&&(Mt=Z(Mt,pt++))==null||X.push(Mt)}return X}function O(k,Z){return k.map(function(X){return Z.map(function(it){return V(X[it])}).join(x)})}function L(k,Z){return Z==null&&(Z=c(k)),[Z.map(V).join(x)].concat(O(k,Z)).join(`
`)}function W(k,Z){return Z==null&&(Z=c(k)),O(k,Z).join(`
`)}function F(k){return k.map(K).join(`
`)}function K(k){return k.map(V).join(x)}function V(k){return k==null?"":k instanceof Date?n(k):m.test(k+="")?'"'+k.replace(/"/g,'""')+'"':k}return{parse:P,parseRows:A,format:L,formatBody:W,formatRows:F,formatRow:K,formatValue:V}},a=i(","),o=a.parse,u=a.parseRows,f=a.format,v=a.formatBody,b=a.formatRows,y=a.formatRow,g=a.formatValue,_=R("5zYK");function M(x,m){var S=o(x);return Object(_.a)(S,m)}},gQMU:function(Oe,mt,R){var U=R("0ZTe"),E=U("toUpperCase");Oe.exports=E},gzZq:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingToSyntax=void 0;var U=R("MON2"),E=R("FV85"),T=R("D9lx"),e=R("LKzl"),t=function(){function l(s){this._binding=s}return l.prototype.to=function(s){return this._binding.type=E.BindingTypeEnum.Instance,this._binding.implementationType=s,new T.BindingInWhenOnSyntax(this._binding)},l.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+U.INVALID_TO_SELF_VALUE);var s=this._binding.serviceIdentifier;return this.to(s)},l.prototype.toConstantValue=function(s){return this._binding.type=E.BindingTypeEnum.ConstantValue,this._binding.cache=s,this._binding.dynamicValue=null,this._binding.implementationType=null,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toDynamicValue=function(s){return this._binding.type=E.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=s,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},l.prototype.toConstructor=function(s){return this._binding.type=E.BindingTypeEnum.Constructor,this._binding.implementationType=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toFunction=function(s){if(typeof s!="function")throw new Error(U.INVALID_FUNCTION_BINDING);var c=this.toConstantValue(s);return this._binding.type=E.BindingTypeEnum.Function,c},l.prototype.toAutoFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=function(c){var r=function(){return c.container.get(s)};return r},new e.BindingWhenOnSyntax(this._binding)},l.prototype.toProvider=function(s){return this._binding.type=E.BindingTypeEnum.Provider,this._binding.provider=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toService=function(s){this.toDynamicValue(function(c){return c.container.get(s)})},l}();mt.BindingToSyntax=t},h1nZ:function(Oe,mt,R){"use strict";var U=R("fX6N");R.d(mt,"container",function(){return U.c}),R.d(mt,"createSceneContainer",function(){return U.b}),R.d(mt,"createLayerContainer",function(){return U.a}),R.d(mt,"lazyInject",function(){return U.d});var E=R("+em5"),T=R("bB6j");R.d(mt,"TYPES",function(){return T.a});var e=R("8/Fi"),t=R("PUg6");R.d(mt,"BlendType",function(){return t.a});var l=R("cZlC");R.d(mt,"AttributeType",function(){return l.a}),R.d(mt,"ScaleTypes",function(){return l.b}),R.d(mt,"StyleScaleType",function(){return l.c});var s=R("O1je"),c=R.n(s);R.o(s,"CameraUniform")&&R.d(mt,"CameraUniform",function(){return s.CameraUniform}),R.o(s,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return s.CityBuildingLayer}),R.o(s,"Control")&&R.d(mt,"Control",function(){return s.Control}),R.o(s,"CoordinateSystem")&&R.d(mt,"CoordinateSystem",function(){return s.CoordinateSystem}),R.o(s,"CoordinateUniform")&&R.d(mt,"CoordinateUniform",function(){return s.CoordinateUniform}),R.o(s,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return s.HeatmapLayer}),R.o(s,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return s.ImageLayer}),R.o(s,"LineLayer")&&R.d(mt,"LineLayer",function(){return s.LineLayer}),R.o(s,"Logo")&&R.d(mt,"Logo",function(){return s.Logo}),R.o(s,"MapServiceEvent")&&R.d(mt,"MapServiceEvent",function(){return s.MapServiceEvent}),R.o(s,"Marker")&&R.d(mt,"Marker",function(){return s.Marker}),R.o(s,"PointLayer")&&R.d(mt,"PointLayer",function(){return s.PointLayer}),R.o(s,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return s.PolygonLayer}),R.o(s,"Popup")&&R.d(mt,"Popup",function(){return s.Popup}),R.o(s,"PositionType")&&R.d(mt,"PositionType",function(){return s.PositionType}),R.o(s,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return s.RasterLayer}),R.o(s,"Scale")&&R.d(mt,"Scale",function(){return s.Scale}),R.o(s,"Scene")&&R.d(mt,"Scene",function(){return s.Scene}),R.o(s,"SceneEventList")&&R.d(mt,"SceneEventList",function(){return s.SceneEventList}),R.o(s,"Zoom")&&R.d(mt,"Zoom",function(){return s.Zoom}),R.o(s,"gl")&&R.d(mt,"gl",function(){return s.gl});var r=R("L56e");R.d(mt,"MapServiceEvent",function(){return r.a});var h=R("HthE");R.d(mt,"CoordinateSystem",function(){return h.a}),R.d(mt,"CoordinateUniform",function(){return h.b});var n=R("/33/"),i=R.n(n);R.o(n,"CameraUniform")&&R.d(mt,"CameraUniform",function(){return n.CameraUniform}),R.o(n,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return n.CityBuildingLayer}),R.o(n,"Control")&&R.d(mt,"Control",function(){return n.Control}),R.o(n,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return n.HeatmapLayer}),R.o(n,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return n.ImageLayer}),R.o(n,"LineLayer")&&R.d(mt,"LineLayer",function(){return n.LineLayer}),R.o(n,"Logo")&&R.d(mt,"Logo",function(){return n.Logo}),R.o(n,"Marker")&&R.d(mt,"Marker",function(){return n.Marker}),R.o(n,"PointLayer")&&R.d(mt,"PointLayer",function(){return n.PointLayer}),R.o(n,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return n.PolygonLayer}),R.o(n,"Popup")&&R.d(mt,"Popup",function(){return n.Popup}),R.o(n,"PositionType")&&R.d(mt,"PositionType",function(){return n.PositionType}),R.o(n,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return n.RasterLayer}),R.o(n,"Scale")&&R.d(mt,"Scale",function(){return n.Scale}),R.o(n,"Scene")&&R.d(mt,"Scene",function(){return n.Scene}),R.o(n,"SceneEventList")&&R.d(mt,"SceneEventList",function(){return n.SceneEventList}),R.o(n,"Zoom")&&R.d(mt,"Zoom",function(){return n.Zoom}),R.o(n,"gl")&&R.d(mt,"gl",function(){return n.gl});var a=R("EfZ0");R.d(mt,"CameraUniform",function(){return a.a});var o=R("riiI"),u=R.n(o);R.o(o,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return o.CityBuildingLayer}),R.o(o,"Control")&&R.d(mt,"Control",function(){return o.Control}),R.o(o,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return o.HeatmapLayer}),R.o(o,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return o.ImageLayer}),R.o(o,"LineLayer")&&R.d(mt,"LineLayer",function(){return o.LineLayer}),R.o(o,"Logo")&&R.d(mt,"Logo",function(){return o.Logo}),R.o(o,"Marker")&&R.d(mt,"Marker",function(){return o.Marker}),R.o(o,"PointLayer")&&R.d(mt,"PointLayer",function(){return o.PointLayer}),R.o(o,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return o.PolygonLayer}),R.o(o,"Popup")&&R.d(mt,"Popup",function(){return o.Popup}),R.o(o,"PositionType")&&R.d(mt,"PositionType",function(){return o.PositionType}),R.o(o,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return o.RasterLayer}),R.o(o,"Scale")&&R.d(mt,"Scale",function(){return o.Scale}),R.o(o,"Scene")&&R.d(mt,"Scene",function(){return o.Scene}),R.o(o,"SceneEventList")&&R.d(mt,"SceneEventList",function(){return o.SceneEventList}),R.o(o,"Zoom")&&R.d(mt,"Zoom",function(){return o.Zoom}),R.o(o,"gl")&&R.d(mt,"gl",function(){return o.gl});var f=R("eg+a");R.d(mt,"SceneEventList",function(){return f.a});var v=R("bYl4"),b=R.n(v);R.o(v,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return v.CityBuildingLayer}),R.o(v,"Control")&&R.d(mt,"Control",function(){return v.Control}),R.o(v,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return v.HeatmapLayer}),R.o(v,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return v.ImageLayer}),R.o(v,"LineLayer")&&R.d(mt,"LineLayer",function(){return v.LineLayer}),R.o(v,"Logo")&&R.d(mt,"Logo",function(){return v.Logo}),R.o(v,"Marker")&&R.d(mt,"Marker",function(){return v.Marker}),R.o(v,"PointLayer")&&R.d(mt,"PointLayer",function(){return v.PointLayer}),R.o(v,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return v.PolygonLayer}),R.o(v,"Popup")&&R.d(mt,"Popup",function(){return v.Popup}),R.o(v,"PositionType")&&R.d(mt,"PositionType",function(){return v.PositionType}),R.o(v,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return v.RasterLayer}),R.o(v,"Scale")&&R.d(mt,"Scale",function(){return v.Scale}),R.o(v,"Scene")&&R.d(mt,"Scene",function(){return v.Scene}),R.o(v,"Zoom")&&R.d(mt,"Zoom",function(){return v.Zoom}),R.o(v,"gl")&&R.d(mt,"gl",function(){return v.gl});var y=R("FI6e"),g=R.n(y);R.o(y,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return y.CityBuildingLayer}),R.o(y,"Control")&&R.d(mt,"Control",function(){return y.Control}),R.o(y,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return y.HeatmapLayer}),R.o(y,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return y.ImageLayer}),R.o(y,"LineLayer")&&R.d(mt,"LineLayer",function(){return y.LineLayer}),R.o(y,"Logo")&&R.d(mt,"Logo",function(){return y.Logo}),R.o(y,"Marker")&&R.d(mt,"Marker",function(){return y.Marker}),R.o(y,"PointLayer")&&R.d(mt,"PointLayer",function(){return y.PointLayer}),R.o(y,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return y.PolygonLayer}),R.o(y,"Popup")&&R.d(mt,"Popup",function(){return y.Popup}),R.o(y,"PositionType")&&R.d(mt,"PositionType",function(){return y.PositionType}),R.o(y,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return y.RasterLayer}),R.o(y,"Scale")&&R.d(mt,"Scale",function(){return y.Scale}),R.o(y,"Scene")&&R.d(mt,"Scene",function(){return y.Scene}),R.o(y,"Zoom")&&R.d(mt,"Zoom",function(){return y.Zoom}),R.o(y,"gl")&&R.d(mt,"gl",function(){return y.gl});var _=R("D+ow"),M=R.n(_);R.o(_,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return _.CityBuildingLayer}),R.o(_,"Control")&&R.d(mt,"Control",function(){return _.Control}),R.o(_,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return _.HeatmapLayer}),R.o(_,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return _.ImageLayer}),R.o(_,"LineLayer")&&R.d(mt,"LineLayer",function(){return _.LineLayer}),R.o(_,"Logo")&&R.d(mt,"Logo",function(){return _.Logo}),R.o(_,"Marker")&&R.d(mt,"Marker",function(){return _.Marker}),R.o(_,"PointLayer")&&R.d(mt,"PointLayer",function(){return _.PointLayer}),R.o(_,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return _.PolygonLayer}),R.o(_,"Popup")&&R.d(mt,"Popup",function(){return _.Popup}),R.o(_,"PositionType")&&R.d(mt,"PositionType",function(){return _.PositionType}),R.o(_,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return _.RasterLayer}),R.o(_,"Scale")&&R.d(mt,"Scale",function(){return _.Scale}),R.o(_,"Scene")&&R.d(mt,"Scene",function(){return _.Scene}),R.o(_,"Zoom")&&R.d(mt,"Zoom",function(){return _.Zoom}),R.o(_,"gl")&&R.d(mt,"gl",function(){return _.gl});var x=R("AFH1");R.d(mt,"PositionType",function(){return x.a});var m=R("8uyu"),S=R.n(m);R.o(m,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return m.CityBuildingLayer}),R.o(m,"Control")&&R.d(mt,"Control",function(){return m.Control}),R.o(m,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return m.HeatmapLayer}),R.o(m,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return m.ImageLayer}),R.o(m,"LineLayer")&&R.d(mt,"LineLayer",function(){return m.LineLayer}),R.o(m,"Logo")&&R.d(mt,"Logo",function(){return m.Logo}),R.o(m,"Marker")&&R.d(mt,"Marker",function(){return m.Marker}),R.o(m,"PointLayer")&&R.d(mt,"PointLayer",function(){return m.PointLayer}),R.o(m,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return m.PolygonLayer}),R.o(m,"Popup")&&R.d(mt,"Popup",function(){return m.Popup}),R.o(m,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return m.RasterLayer}),R.o(m,"Scale")&&R.d(mt,"Scale",function(){return m.Scale}),R.o(m,"Scene")&&R.d(mt,"Scene",function(){return m.Scene}),R.o(m,"Zoom")&&R.d(mt,"Zoom",function(){return m.Zoom}),R.o(m,"gl")&&R.d(mt,"gl",function(){return m.gl});var P=R("J7lC"),A=R.n(P);R.o(P,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return P.CityBuildingLayer}),R.o(P,"Control")&&R.d(mt,"Control",function(){return P.Control}),R.o(P,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return P.HeatmapLayer}),R.o(P,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return P.ImageLayer}),R.o(P,"LineLayer")&&R.d(mt,"LineLayer",function(){return P.LineLayer}),R.o(P,"Logo")&&R.d(mt,"Logo",function(){return P.Logo}),R.o(P,"Marker")&&R.d(mt,"Marker",function(){return P.Marker}),R.o(P,"PointLayer")&&R.d(mt,"PointLayer",function(){return P.PointLayer}),R.o(P,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return P.PolygonLayer}),R.o(P,"Popup")&&R.d(mt,"Popup",function(){return P.Popup}),R.o(P,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return P.RasterLayer}),R.o(P,"Scale")&&R.d(mt,"Scale",function(){return P.Scale}),R.o(P,"Scene")&&R.d(mt,"Scene",function(){return P.Scene}),R.o(P,"Zoom")&&R.d(mt,"Zoom",function(){return P.Zoom}),R.o(P,"gl")&&R.d(mt,"gl",function(){return P.gl});var O=R("QGbF"),L=R.n(O);R.o(O,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return O.CityBuildingLayer}),R.o(O,"Control")&&R.d(mt,"Control",function(){return O.Control}),R.o(O,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return O.HeatmapLayer}),R.o(O,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return O.ImageLayer}),R.o(O,"LineLayer")&&R.d(mt,"LineLayer",function(){return O.LineLayer}),R.o(O,"Logo")&&R.d(mt,"Logo",function(){return O.Logo}),R.o(O,"Marker")&&R.d(mt,"Marker",function(){return O.Marker}),R.o(O,"PointLayer")&&R.d(mt,"PointLayer",function(){return O.PointLayer}),R.o(O,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return O.PolygonLayer}),R.o(O,"Popup")&&R.d(mt,"Popup",function(){return O.Popup}),R.o(O,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return O.RasterLayer}),R.o(O,"Scale")&&R.d(mt,"Scale",function(){return O.Scale}),R.o(O,"Scene")&&R.d(mt,"Scene",function(){return O.Scene}),R.o(O,"Zoom")&&R.d(mt,"Zoom",function(){return O.Zoom}),R.o(O,"gl")&&R.d(mt,"gl",function(){return O.gl});var W=R("V1cb"),F=R("4kj+"),K=R.n(F);R.o(F,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return F.CityBuildingLayer}),R.o(F,"Control")&&R.d(mt,"Control",function(){return F.Control}),R.o(F,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return F.HeatmapLayer}),R.o(F,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return F.ImageLayer}),R.o(F,"LineLayer")&&R.d(mt,"LineLayer",function(){return F.LineLayer}),R.o(F,"Logo")&&R.d(mt,"Logo",function(){return F.Logo}),R.o(F,"Marker")&&R.d(mt,"Marker",function(){return F.Marker}),R.o(F,"PointLayer")&&R.d(mt,"PointLayer",function(){return F.PointLayer}),R.o(F,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return F.PolygonLayer}),R.o(F,"Popup")&&R.d(mt,"Popup",function(){return F.Popup}),R.o(F,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return F.RasterLayer}),R.o(F,"Scale")&&R.d(mt,"Scale",function(){return F.Scale}),R.o(F,"Scene")&&R.d(mt,"Scene",function(){return F.Scene}),R.o(F,"Zoom")&&R.d(mt,"Zoom",function(){return F.Zoom}),R.o(F,"gl")&&R.d(mt,"gl",function(){return F.gl});var V=R("bzyH"),k=R.n(V);R.o(V,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return V.CityBuildingLayer}),R.o(V,"Control")&&R.d(mt,"Control",function(){return V.Control}),R.o(V,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return V.HeatmapLayer}),R.o(V,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return V.ImageLayer}),R.o(V,"LineLayer")&&R.d(mt,"LineLayer",function(){return V.LineLayer}),R.o(V,"Logo")&&R.d(mt,"Logo",function(){return V.Logo}),R.o(V,"Marker")&&R.d(mt,"Marker",function(){return V.Marker}),R.o(V,"PointLayer")&&R.d(mt,"PointLayer",function(){return V.PointLayer}),R.o(V,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return V.PolygonLayer}),R.o(V,"Popup")&&R.d(mt,"Popup",function(){return V.Popup}),R.o(V,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return V.RasterLayer}),R.o(V,"Scale")&&R.d(mt,"Scale",function(){return V.Scale}),R.o(V,"Scene")&&R.d(mt,"Scene",function(){return V.Scene}),R.o(V,"Zoom")&&R.d(mt,"Zoom",function(){return V.Zoom}),R.o(V,"gl")&&R.d(mt,"gl",function(){return V.gl});var Z=R("0eqD"),X=R.n(Z);R.o(Z,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return Z.CityBuildingLayer}),R.o(Z,"Control")&&R.d(mt,"Control",function(){return Z.Control}),R.o(Z,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return Z.HeatmapLayer}),R.o(Z,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return Z.ImageLayer}),R.o(Z,"LineLayer")&&R.d(mt,"LineLayer",function(){return Z.LineLayer}),R.o(Z,"Logo")&&R.d(mt,"Logo",function(){return Z.Logo}),R.o(Z,"Marker")&&R.d(mt,"Marker",function(){return Z.Marker}),R.o(Z,"PointLayer")&&R.d(mt,"PointLayer",function(){return Z.PointLayer}),R.o(Z,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return Z.PolygonLayer}),R.o(Z,"Popup")&&R.d(mt,"Popup",function(){return Z.Popup}),R.o(Z,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return Z.RasterLayer}),R.o(Z,"Scale")&&R.d(mt,"Scale",function(){return Z.Scale}),R.o(Z,"Scene")&&R.d(mt,"Scene",function(){return Z.Scene}),R.o(Z,"Zoom")&&R.d(mt,"Zoom",function(){return Z.Zoom}),R.o(Z,"gl")&&R.d(mt,"gl",function(){return Z.gl});var it=R("/Uc5"),ft=R.n(it);R.o(it,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return it.CityBuildingLayer}),R.o(it,"Control")&&R.d(mt,"Control",function(){return it.Control}),R.o(it,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return it.HeatmapLayer}),R.o(it,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return it.ImageLayer}),R.o(it,"LineLayer")&&R.d(mt,"LineLayer",function(){return it.LineLayer}),R.o(it,"Logo")&&R.d(mt,"Logo",function(){return it.Logo}),R.o(it,"Marker")&&R.d(mt,"Marker",function(){return it.Marker}),R.o(it,"PointLayer")&&R.d(mt,"PointLayer",function(){return it.PointLayer}),R.o(it,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return it.PolygonLayer}),R.o(it,"Popup")&&R.d(mt,"Popup",function(){return it.Popup}),R.o(it,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return it.RasterLayer}),R.o(it,"Scale")&&R.d(mt,"Scale",function(){return it.Scale}),R.o(it,"Scene")&&R.d(mt,"Scene",function(){return it.Scene}),R.o(it,"Zoom")&&R.d(mt,"Zoom",function(){return it.Zoom}),R.o(it,"gl")&&R.d(mt,"gl",function(){return it.gl});var pt=R("RMtq"),ut=R.n(pt);R.o(pt,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return pt.CityBuildingLayer}),R.o(pt,"Control")&&R.d(mt,"Control",function(){return pt.Control}),R.o(pt,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return pt.HeatmapLayer}),R.o(pt,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return pt.ImageLayer}),R.o(pt,"LineLayer")&&R.d(mt,"LineLayer",function(){return pt.LineLayer}),R.o(pt,"Logo")&&R.d(mt,"Logo",function(){return pt.Logo}),R.o(pt,"Marker")&&R.d(mt,"Marker",function(){return pt.Marker}),R.o(pt,"PointLayer")&&R.d(mt,"PointLayer",function(){return pt.PointLayer}),R.o(pt,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return pt.PolygonLayer}),R.o(pt,"Popup")&&R.d(mt,"Popup",function(){return pt.Popup}),R.o(pt,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return pt.RasterLayer}),R.o(pt,"Scale")&&R.d(mt,"Scale",function(){return pt.Scale}),R.o(pt,"Scene")&&R.d(mt,"Scene",function(){return pt.Scene}),R.o(pt,"Zoom")&&R.d(mt,"Zoom",function(){return pt.Zoom}),R.o(pt,"gl")&&R.d(mt,"gl",function(){return pt.gl});var It=R("1jvM"),Nt=R.n(It);R.o(It,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return It.CityBuildingLayer}),R.o(It,"Control")&&R.d(mt,"Control",function(){return It.Control}),R.o(It,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return It.HeatmapLayer}),R.o(It,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return It.ImageLayer}),R.o(It,"LineLayer")&&R.d(mt,"LineLayer",function(){return It.LineLayer}),R.o(It,"Logo")&&R.d(mt,"Logo",function(){return It.Logo}),R.o(It,"Marker")&&R.d(mt,"Marker",function(){return It.Marker}),R.o(It,"PointLayer")&&R.d(mt,"PointLayer",function(){return It.PointLayer}),R.o(It,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return It.PolygonLayer}),R.o(It,"Popup")&&R.d(mt,"Popup",function(){return It.Popup}),R.o(It,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return It.RasterLayer}),R.o(It,"Scale")&&R.d(mt,"Scale",function(){return It.Scale}),R.o(It,"Scene")&&R.d(mt,"Scene",function(){return It.Scene}),R.o(It,"Zoom")&&R.d(mt,"Zoom",function(){return It.Zoom}),R.o(It,"gl")&&R.d(mt,"gl",function(){return It.gl});var Rt=R("bPkA"),Mt=R("PSsN"),bt=R.n(Mt);R.o(Mt,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return Mt.CityBuildingLayer}),R.o(Mt,"Control")&&R.d(mt,"Control",function(){return Mt.Control}),R.o(Mt,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return Mt.HeatmapLayer}),R.o(Mt,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return Mt.ImageLayer}),R.o(Mt,"LineLayer")&&R.d(mt,"LineLayer",function(){return Mt.LineLayer}),R.o(Mt,"Logo")&&R.d(mt,"Logo",function(){return Mt.Logo}),R.o(Mt,"Marker")&&R.d(mt,"Marker",function(){return Mt.Marker}),R.o(Mt,"PointLayer")&&R.d(mt,"PointLayer",function(){return Mt.PointLayer}),R.o(Mt,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return Mt.PolygonLayer}),R.o(Mt,"Popup")&&R.d(mt,"Popup",function(){return Mt.Popup}),R.o(Mt,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return Mt.RasterLayer}),R.o(Mt,"Scale")&&R.d(mt,"Scale",function(){return Mt.Scale}),R.o(Mt,"Scene")&&R.d(mt,"Scene",function(){return Mt.Scene}),R.o(Mt,"Zoom")&&R.d(mt,"Zoom",function(){return Mt.Zoom}),R.o(Mt,"gl")&&R.d(mt,"gl",function(){return Mt.gl});var At=R("6NqC"),rt=R.n(At);R.o(At,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return At.CityBuildingLayer}),R.o(At,"Control")&&R.d(mt,"Control",function(){return At.Control}),R.o(At,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return At.HeatmapLayer}),R.o(At,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return At.ImageLayer}),R.o(At,"LineLayer")&&R.d(mt,"LineLayer",function(){return At.LineLayer}),R.o(At,"Logo")&&R.d(mt,"Logo",function(){return At.Logo}),R.o(At,"Marker")&&R.d(mt,"Marker",function(){return At.Marker}),R.o(At,"PointLayer")&&R.d(mt,"PointLayer",function(){return At.PointLayer}),R.o(At,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return At.PolygonLayer}),R.o(At,"Popup")&&R.d(mt,"Popup",function(){return At.Popup}),R.o(At,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return At.RasterLayer}),R.o(At,"Scale")&&R.d(mt,"Scale",function(){return At.Scale}),R.o(At,"Scene")&&R.d(mt,"Scene",function(){return At.Scene}),R.o(At,"Zoom")&&R.d(mt,"Zoom",function(){return At.Zoom}),R.o(At,"gl")&&R.d(mt,"gl",function(){return At.gl});var Pt=R("bTtR"),z=R.n(Pt);R.o(Pt,"CityBuildingLayer")&&R.d(mt,"CityBuildingLayer",function(){return Pt.CityBuildingLayer}),R.o(Pt,"Control")&&R.d(mt,"Control",function(){return Pt.Control}),R.o(Pt,"HeatmapLayer")&&R.d(mt,"HeatmapLayer",function(){return Pt.HeatmapLayer}),R.o(Pt,"ImageLayer")&&R.d(mt,"ImageLayer",function(){return Pt.ImageLayer}),R.o(Pt,"LineLayer")&&R.d(mt,"LineLayer",function(){return Pt.LineLayer}),R.o(Pt,"Logo")&&R.d(mt,"Logo",function(){return Pt.Logo}),R.o(Pt,"Marker")&&R.d(mt,"Marker",function(){return Pt.Marker}),R.o(Pt,"PointLayer")&&R.d(mt,"PointLayer",function(){return Pt.PointLayer}),R.o(Pt,"PolygonLayer")&&R.d(mt,"PolygonLayer",function(){return Pt.PolygonLayer}),R.o(Pt,"Popup")&&R.d(mt,"Popup",function(){return Pt.Popup}),R.o(Pt,"RasterLayer")&&R.d(mt,"RasterLayer",function(){return Pt.RasterLayer}),R.o(Pt,"Scale")&&R.d(mt,"Scale",function(){return Pt.Scale}),R.o(Pt,"Scene")&&R.d(mt,"Scene",function(){return Pt.Scene}),R.o(Pt,"Zoom")&&R.d(mt,"Zoom",function(){return Pt.Zoom}),R.o(Pt,"gl")&&R.d(mt,"gl",function(){return Pt.gl});var Q=R("o+pz");R.d(mt,"gl",function(){return Q.a})},h7MG:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.getBindingDictionary=mt.createMockRequest=mt.plan=void 0;var U=R("doU7"),E=R("MON2"),T=R("FV85"),e=R("xfSm"),t=R("qK8v"),l=R("ujMp"),s=R("oy+k"),c=R("GXnB"),r=R("yMAV"),h=R("fbrv"),n=R("xiII"),i=R("dX1H");function a(_){return _._bindingDictionary}mt.getBindingDictionary=a;function o(_,M,x,m,S,P){var A=_?e.MULTI_INJECT_TAG:e.INJECT_TAG,O=new c.Metadata(A,x),L=new i.Target(M,m,x,O);if(S!==void 0){var W=new c.Metadata(S,P);L.metadata.push(W)}return L}function u(_,M,x,m,S){var P=b(x.container,S.serviceIdentifier),A=[];return P.length===U.BindingCount.NoBindingsAvailable&&x.container.options.autoBindInjectable&&typeof S.serviceIdentifier=="function"&&_.getConstructorMetadata(S.serviceIdentifier).compilerGeneratedMetadata&&(x.container.bind(S.serviceIdentifier).toSelf(),P=b(x.container,S.serviceIdentifier)),M?A=P:A=P.filter(function(O){var L=new n.Request(O.serviceIdentifier,x,m,O,S);return O.constraint(L)}),f(S.serviceIdentifier,A,S,x.container),A}function f(_,M,x,m){switch(M.length){case U.BindingCount.NoBindingsAvailable:if(x.isOptional())return M;var S=l.getServiceIdentifierAsString(_),P=E.NOT_REGISTERED;throw P+=l.listMetadataForTarget(S,x),P+=l.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P);case U.BindingCount.OnlyOneBindingAvailable:if(!x.isArray())return M;case U.BindingCount.MultipleBindingsAvailable:default:if(x.isArray())return M;var S=l.getServiceIdentifierAsString(_),P=E.AMBIGUOUS_MATCH+" "+S;throw P+=l.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P)}}function v(_,M,x,m,S,P){var A,O;if(S===null){A=u(_,M,m,null,P),O=new n.Request(x,m,null,A,P);var L=new r.Plan(m,O);m.addPlan(L)}else A=u(_,M,m,S,P),O=S.addChildRequest(P.serviceIdentifier,A,P);A.forEach(function(W){var F=null;if(P.isArray())F=O.addChildRequest(W.serviceIdentifier,W,P);else{if(W.cache)return;F=O}if(W.type===T.BindingTypeEnum.Instance&&W.implementationType!==null){var K=h.getDependencies(_,W.implementationType);if(!m.container.options.skipBaseClassChecks){var V=h.getBaseClassDependencyCount(_,W.implementationType);if(K.length<V){var k=E.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(W.implementationType));throw new Error(k)}}K.forEach(function(Z){v(_,!1,Z.serviceIdentifier,m,F,Z)})}})}function b(_,M){var x=[],m=a(_);return m.hasKey(M)?x=m.get(M):_.parent!==null&&(x=b(_.parent,M)),x}function y(_,M,x,m,S,P,A,O){O===void 0&&(O=!1);var L=new s.Context(M),W=o(x,m,S,"",P,A);try{return v(_,O,S,L,null,W),L}catch(F){throw t.isStackOverflowExeption(F)&&L.plan&&l.circularDependencyToException(L.plan.rootRequest),F}}mt.plan=y;function g(_,M,x,m){var S=new i.Target(T.TargetTypeEnum.Variable,"",M,new c.Metadata(x,m)),P=new s.Context(_),A=new n.Request(M,P,null,[],S);return A}mt.createMockRequest=g},heNW:function(Oe,mt){function R(U,E,T){switch(T.length){case 0:return U.call(E);case 1:return U.call(E,T[0]);case 2:return U.call(E,T[0],T[1]);case 3:return U.call(E,T[0],T[1],T[2])}return U.apply(E,T)}Oe.exports=R},hi0z:function(Oe,mt,R){"use strict";(function(U,E){Oe.exports=E()})(this,function(){function U(h){var n=[];return h.AMapUI&&n.push(E(h.AMapUI)),h.Loca&&n.push(T(h.Loca)),Promise.all(n)}function E(h){return new Promise(function(n,i){var a=[];if(h.plugins)for(var o=0;o<h.plugins.length;o+=1)t.AMapUI.plugins.indexOf(h.plugins[o])==-1&&a.push(h.plugins[o]);if(l.AMapUI===e.failed)i("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(l.AMapUI===e.notload){l.AMapUI=e.loading,t.AMapUI.version=h.version||t.AMapUI.version,o=t.AMapUI.version;var u=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+o+"/main.js",f.onerror=function(v){l.AMapUI=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(l.AMapUI=e.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var y=a[v].split("/").slice(-1)[0];window.AMapUI[y]=arguments[v]}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},u.appendChild(f)}else l.AMapUI===e.loaded?h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var y=a[v].split("/").slice(-1)[0];window.AMapUI[y]=arguments[v]}n()}):n():h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(v){v?i(v):a.length?window.AMapUI.loadUI(a,function(){for(var b=0,y=a.length;b<y;b++){var g=a[b].split("/").slice(-1)[0];window.AMapUI[g]=arguments[b]}n()}):n()})})}function T(h){return new Promise(function(n,i){if(t.AMap.version.startsWith("2.0"))i("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(l.Loca===e.failed)i("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(l.Loca===e.notload){l.Loca=e.loading,t.Loca.version=h.version||t.Loca.version;var a=t.Loca.version,o=t.key,u=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+a+"&key="+o,f.onerror=function(v){l.Loca=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){for(l.Loca=e.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]()},u.appendChild(f)}else l.Loca===e.loaded?h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(v){v?i(v):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(h){h.notload="notload",h.loading="loading",h.loaded="loaded",h.failed="failed"})(e||(e={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]},c=[],r=function(n){typeof n=="function"&&(l.AMap===e.loaded?n(window.AMap):c.push(n))};return{load:function(n){return new Promise(function(i,a){if(l.AMap==e.failed)a("");else if(l.AMap==e.notload){var o=n.key,u=n.version,f=n.plugins;o?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),t.key=o,t.AMap.version=u||t.AMap.version,t.AMap.plugins=f||t.AMap.plugins,l.AMap=e.loading,u=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)l.AMap=e.failed,a(b);else for(l.AMap=e.loaded,U(n).then(function(){i(window.AMap)}).catch(a);c.length;)c.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+o+"&plugin="+t.AMap.plugins.join(","),f.onerror=function(b){l.AMap=e.failed,a(b)},u.appendChild(f)):a("\u8BF7\u586B\u5199key")}else if(l.AMap==e.loaded)if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(o=[],n.plugins)for(u=0;u<n.plugins.length;u+=1)t.AMap.plugins.indexOf(n.plugins[u])==-1&&o.push(n.plugins[u]);o.length?window.AMap.plugin(o,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)}else if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(n.plugins)for(u=0;u<n.plugins.length;u+=1)t.AMap.plugins.indexOf(n.plugins[u])==-1&&v.push(n.plugins[u]);r(function(){v.length?window.AMap.plugin(v,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(Oe,mt,R){var U=R("O0oS");function E(T,e,t){e=="__proto__"&&U?U(T,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):T[e]=t}Oe.exports=E},iWIM:function(Oe,mt,R){var U=R("n3AX");function E(T,e,t){return typeof Reflect!="undefined"&&Reflect.get?(Oe.exports=E=Reflect.get,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0):(Oe.exports=E=function(s,c,r){var h=U(s,c);if(!!h){var n=Object.getOwnPropertyDescriptor(h,c);return n.get?n.get.call(r):n.value}},Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0),E(T,e,t||T)}Oe.exports=E,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},iegG:function(Oe,mt){function R(U){var E=U.target||U.srcElement;E.__resizeRAF__&&cancelAnimationFrame(E.__resizeRAF__),E.__resizeRAF__=requestAnimationFrame(function(){var T=E.__resizeTrigger__,e=T&&T.__resizeListeners__;e&&e.forEach(function(t){t.call(T,U)})})}var mt=function(E,T){var e=this,t=e.document,l,s=t.attachEvent;typeof navigator!="undefined"&&(l=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function c(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",R)}if(!E.__resizeListeners__)if(E.__resizeListeners__=[],s)E.__resizeTrigger__=E,E.attachEvent("onresize",R);else{getComputedStyle(E).position==="static"&&(E.style.position="relative");var r=E.__resizeTrigger__=t.createElement("object");r.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),r.setAttribute("class","resize-sensor"),r.setAttribute("tabindex","-1"),r.__resizeElement__=E,r.onload=c,r.type="text/html",l&&E.appendChild(r),r.data="about:blank",l||E.appendChild(r)}E.__resizeListeners__.push(T)};Oe.exports=typeof window=="undefined"?mt:mt.bind(window),Oe.exports.unbind=function(U,E){var T=document.attachEvent,e=U.__resizeListeners__||[];if(E){var t=e.indexOf(E);t!==-1&&e.splice(t,1)}else e=U.__resizeListeners__=[];if(!e.length){if(T)U.detachEvent("onresize",R);else if(U.__resizeTrigger__){var l=U.__resizeTrigger__.contentDocument,s=l&&l.defaultView;s&&(s.removeEventListener("resize",R),delete s.__resizeTrigger__),U.__resizeTrigger__=!U.removeChild(U.__resizeTrigger__)}delete U.__resizeListeners__}}},itsj:function(Oe,mt){function R(U,E){if(!(E==="constructor"&&typeof U[E]=="function")&&E!="__proto__")return U[E]}Oe.exports=R},jCWc:function(Oe,mt,R){"use strict";var U=R("cIOH"),E=R.n(U),T=R("1GLa")},"jIg/":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.multiInject=void 0;var U=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.MULTI_INJECT_TAG,t);typeof c=="number"?T.tagParameter(l,s,c,r):T.tagProperty(l,s,r)}}mt.multiInject=e},jYQm:function(Oe,mt,R){"use strict";var U=R("q1tI"),E=R.n(U),T=Object(U.createContext)({});mt.a=T},jYx5:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.optional=void 0;var U=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,l,s){var c=new E.Metadata(U.OPTIONAL_TAG,!0);typeof s=="number"?T.tagParameter(t,l,s,c):T.tagProperty(t,l,c)}}mt.optional=e},"jbM+":function(Oe,mt,R){var U=R("R/W3");function E(T,e){var t=T==null?0:T.length;return!!t&&U(T,e,0)>-1}Oe.exports=E},jeLo:function(Oe,mt,R){var U=R("juv8"),E=R("mTTR");function T(e){return U(e,E(e))}Oe.exports=T},juv8:function(Oe,mt,R){var U=R("MrPd"),E=R("hypo");function T(e,t,l,s){var c=!l;l||(l={});for(var r=-1,h=t.length;++r<h;){var n=t[r],i=s?s(l[n],e[n],n,l,e):void 0;i===void 0&&(i=e[n]),c?E(l,n,i):U(l,n,i)}return l}Oe.exports=T},"k5/I":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return M}),R.d(mt,"b",function(){return W}),R.d(mt,"e",function(){return V}),R.d(mt,"f",function(){return X}),R.d(mt,"c",function(){return It}),R.d(mt,"d",function(){return H});var U=R("lSNA"),E=R.n(U),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),l=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("h1nZ"),o=R("Hel2"),u=R("uhBA");function f(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(nt);at&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(nt,yt).enumerable})),q.push.apply(q,_t)}return q}function v(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?f(Object(q),!0).forEach(function(_t){E()(nt,_t,q[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):f(Object(q)).forEach(function(_t){Object.defineProperty(nt,_t,Object.getOwnPropertyDescriptor(q,_t))})}return nt}function b(nt){var at=y();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var g;(function(nt){nt.TOPRIGHT="topright",nt.TOPLEFT="topleft",nt.BOTTOMRIGHT="bottomright",nt.BOTTOMLEFT="bottomleft"})(g||(g={}));var _=0,M=function(nt){c()(q,nt);var at=b(q);function q(_t){var yt;return e()(this,q),yt=at.call(this),yt.controlOption=void 0,yt.container=void 0,yt.sceneContainer=void 0,yt.mapsService=void 0,yt.renderService=void 0,yt.layerService=void 0,yt.controlService=void 0,yt.isShow=void 0,yt.controlOption=v(v({},yt.getDefault()),_t||{}),yt}return l()(q,[{key:"getDefault",value:function(){return{position:g.TOPRIGHT,name:"".concat(_++)}}},{key:"setPosition",value:function(yt){var Ft=this.controlService;return Ft&&Ft.removeControl(this),this.controlOption.position=yt,Ft&&Ft.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(yt){this.mapsService=yt.get(a.TYPES.IMapService),this.renderService=yt.get(a.TYPES.IRendererService),this.layerService=yt.get(a.TYPES.ILayerService),this.controlService=yt.get(a.TYPES.IControlService),this.sceneContainer=yt,this.isShow=!0,this.container=this.onAdd();var Ft=this.container,Qt=this.controlOption.position,ee=this.controlService.controlCorners[Qt];return o.a.addClass(Ft,"l7-control"),Qt.indexOf("bottom")!==-1?ee.insertBefore(Ft,ee.firstChild):ee.appendChild(Ft),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var yt=this.container;o.a.addClass(yt,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var yt=this.container;o.a.removeClass(yt,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;o.a.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(yt){if(this.mapsService&&yt&&yt.screenX>0&&yt.screenY>0){var Ft=this.mapsService.getContainer();Ft!==null&&Ft.focus()}}}]),q}(u.EventEmitter),x=R("PJYZ"),m=R.n(x);function S(nt){var at=P();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var A=function(nt){c()(q,nt);var at=S(q);function q(_t){var yt;return e()(this,q),yt=at.call(this,_t),yt.layerControlInputs=void 0,yt.layers=void 0,yt.lastZIndex=void 0,yt.handlingClick=void 0,yt.layersLink=void 0,yt.baseLayersList=void 0,yt.separator=void 0,yt.overlaysList=void 0,yt.form=void 0,yt.layerControlInputs=[],yt.layers=[],yt.lastZIndex=0,yt.handlingClick=!1,yt.initLayers(),Object(o.i)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],m()(yt)),yt}return l()(q,[{key:"getDefault",value:function(){return{collapsed:!0,position:a.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var yt=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(Ft){Ft.layer.on("remove",yt.onLayerChange),Ft.layer.on("add",yt.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(yt,Ft){return this.addLayer(yt,Ft,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var yt=this.renderService.getViewportSize(),Ft=yt.height;o.a.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var Qt=Ft-(this.container.offsetTop+50);return Qt<this.form.clientHeight?(o.a.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=Qt+"px"):o.a.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return o.a.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var yt=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(Ft){Ft.layer.off("remove",yt.onLayerChange),Ft.layer.off("add",yt.onLayerChange)}))}},{key:"initLayout",value:function(){var yt="l7-control-layers",Ft=this.container=o.a.create("div",yt),Qt=this.controlOption.collapsed;Ft.setAttribute("aria-haspopup","true");var ee=this.form=o.a.create("form",yt+"-list");Qt&&(this.mapsService.on("click",this.collapse),Ft.addEventListener("mouseenter",this.expand),Ft.addEventListener("mouseleave",this.collapse)),this.layersLink=o.a.create("a",yt+"-toggle",Ft);var Vt=this.layersLink;Vt.title="Layers",Qt||this.expand(),this.baseLayersList=o.a.create("div",yt+"-base",ee),this.separator=o.a.create("div",yt+"-separator",ee),this.overlaysList=o.a.create("div",yt+"-overlays",ee),Ft.appendChild(ee)}},{key:"initLayers",value:function(){var yt=this,Ft=this.controlOption,Qt=Ft.baseLayers,ee=Qt===void 0?{}:Qt,Vt=Ft.overlayers,$t=Vt===void 0?{}:Vt;Object.keys(ee).forEach(function(Me,me){yt.addLayer(ee[Me],Me,!1)}),Object.keys($t).forEach(function(Me,me){yt.addLayer($t[Me],Me,!0)})}},{key:"update",value:function(){if(!this.container)return this;o.a.empty(this.baseLayersList),o.a.empty(this.overlaysList),this.layerControlInputs=[];var yt,Ft,Qt,ee,Vt=0;for(Qt=0;Qt<this.layers.length;Qt++)ee=this.layers[Qt],this.addItem(ee),Ft=Ft||ee.overlay,yt=yt||!ee.overlay,Vt+=ee.overlay?0:1;return this.controlOption.hideSingleBase&&(yt=yt&&Vt>1,this.baseLayersList.style.display=yt?"":"none"),this.separator.style.display=Ft&&yt?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var yt=this.layerControlInputs,Ft,Qt,ee=this.mapsService.getZoom(),Vt=yt.length-1;Vt>=0;Vt--)if(Ft=yt[Vt],Qt=this.layerService.getLayer(Ft.layerId),Qt&&Qt.inited){var $t=Qt.getMinZoom(),Me=Qt.getMaxZoom();Ft.disabled=ee<$t||ee>Me}}},{key:"addLayer",value:function(yt,Ft,Qt){this.mapsService&&(yt.on("add",this.onLayerChange),yt.on("remove",this.onLayerChange)),this.layers.push({layer:yt,name:Ft,overlay:Qt});var ee=this.controlOption,Vt=ee.sortLayers,$t=ee.sortFunction,Me=ee.autoZIndex;Vt&&this.layers.sort(function(me,le){return $t(me.layer,le.layer,me.name,le.name)}),Me&&yt.setZIndex&&(this.lastZIndex++,yt.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(yt){this.handlingClick||this.update();var Ft=this.layerService.getLayer(yt.target.layerId),Qt=Ft!=null&&Ft.overlay?yt.type==="add"?"overlayadd":"overlayremove":yt.type==="add"?"baselayerchange":null;Qt&&this.emit(Qt,Ft)}},{key:"createRadioElement",value:function(yt,Ft){var Qt='<input type="radio" class="l7-control-layers-selector" name="'+yt+'"'+(Ft?' checked="checked"':"")+"/>",ee=document.createElement("div");return ee.innerHTML=Qt,ee.firstChild}},{key:"addItem",value:function(yt){var Ft=document.createElement("label"),Qt=this.layerService.getLayer(yt.layer.id),ee=Qt&&Qt.inited&&yt.layer.isVisible(),Vt;yt.overlay?(Vt=document.createElement("input"),Vt.type="checkbox",Vt.className="l7-control-layers-selector",Vt.defaultChecked=ee):Vt=this.createRadioElement("l7-base-layers",ee),this.layerControlInputs.push(Vt),Vt.layerId=yt.layer.id,Vt.addEventListener("click",this.onInputClick);var $t=document.createElement("span");$t.innerHTML=" "+yt.name;var Me=document.createElement("div");Ft.appendChild(Me),Me.appendChild(Vt),Me.appendChild($t);var me=yt.overlay?this.overlaysList:this.baseLayersList;return me.appendChild(Ft),this.checkDisabledLayers(),Ft}},{key:"onInputClick",value:function(){var yt=this.layerControlInputs,Ft,Qt,ee=[],Vt=[];this.handlingClick=!0;for(var $t=yt.length-1;$t>=0;$t--)Ft=yt[$t],Qt=this.layerService.getLayer(Ft.layerId),Ft.checked?ee.push(Qt):Ft.checked||Vt.push(Qt);Vt.forEach(function(Me){Me.hide()}),ee.forEach(function(Me){Me.show()}),this.handlingClick=!1}}]),q}(M);function O(nt){var at=L();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var W=function(nt){c()(q,nt);var at=O(q);function q(){return e()(this,q),at.apply(this,arguments)}return l()(q,[{key:"getDefault",value:function(){return{position:g.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var yt="l7-control-logo",Ft=o.a.create("div",yt),Qt=o.a.create("a","l7-ctrl-logo");return Qt.target="_blank",Qt.rel="noopener nofollow",Qt.href="https://antv.alipay.com/l7",Qt.setAttribute("aria-label","AntV logo"),Qt.setAttribute("rel","noopener nofollow"),Ft.appendChild(Qt),Ft}},{key:"onRemove",value:function(){return null}}]),q}(M);function F(nt){var at=K();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var V=function(nt){c()(q,nt);var at=F(q);function q(_t){var yt;return e()(this,q),yt=at.call(this,_t),yt.mScale=void 0,yt.iScale=void 0,Object(o.i)(["update"],m()(yt)),yt}return l()(q,[{key:"getDefault",value:function(){return{position:g.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var yt="l7-control-scale",Ft=o.a.create("div",yt);this.addScales(yt+"-line",Ft);var Qt=this.controlOption.updateWhenIdle;return this.mapsService.on(Qt?"moveend":"mapmove",this.update),this.mapsService.on(Qt?"zoomend":"zoomchange",this.update),this.update(),Ft}},{key:"onRemove",value:function(){var yt=this.controlOption.updateWhenIdle;this.mapsService.off(yt?"zoomend":"zoomchange",this.update),this.mapsService.off(yt?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var yt=this.mapsService,Ft=this.controlOption.maxWidth,Qt=yt.getSize()[1]/2,ee=yt.containerToLngLat([0,Qt]),Vt=yt.containerToLngLat([Ft,Qt]),$t=Object(o.q)([ee.lng,ee.lat],[Vt.lng,Vt.lat]);this.updateScales($t)}},{key:"updateScales",value:function(yt){var Ft=this.controlOption,Qt=Ft.metric,ee=Ft.imperial;Qt&&yt&&this.updateMetric(yt),ee&&yt&&this.updateImperial(yt)}},{key:"updateMetric",value:function(yt){var Ft=this.getRoundNum(yt),Qt=Ft<1e3?Ft+" m":Ft/1e3+" km";this.updateScale(this.mScale,Qt,Ft/yt)}},{key:"updateImperial",value:function(yt){var Ft=yt*3.2808399,Qt,ee,Vt;Ft>5280?(Qt=Ft/5280,ee=this.getRoundNum(Qt),this.updateScale(this.iScale,ee+" mi",ee/Qt)):(Vt=this.getRoundNum(Ft),this.updateScale(this.iScale,Vt+" ft",Vt/Ft))}},{key:"updateScale",value:function(yt,Ft,Qt){var ee=this.controlOption.maxWidth;yt.style.width=Math.round(ee*Qt)+"px",yt.innerHTML=Ft}},{key:"getRoundNum",value:function(yt){var Ft=Math.pow(10,(Math.floor(yt)+"").length-1),Qt=yt/Ft;return Qt=Qt>=10?10:Qt>=5?5:Qt>=3?3:Qt>=2?2:1,Ft*Qt}},{key:"addScales",value:function(yt,Ft){var Qt=this.controlOption,ee=Qt.metric,Vt=Qt.imperial;ee&&(this.mScale=o.a.create("div",yt,Ft)),Vt&&(this.iScale=o.a.create("div",yt,Ft))}}]),q}(M);function k(nt){var at=Z();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var X=function(nt){c()(q,nt);var at=k(q);function q(_t){var yt;return e()(this,q),yt=at.call(this,_t),yt.disabled=void 0,yt.zoomInButton=void 0,yt.zoomOutButton=void 0,Object(o.i)(["updateDisabled","zoomIn","zoomOut"],m()(yt)),yt}return l()(q,[{key:"getDefault",value:function(){return{position:g.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var yt="l7-control-zoom",Ft=o.a.create("div",yt+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,yt+"-in",Ft,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,yt+"-out",Ft,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),Ft}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(yt,Ft,Qt,ee,Vt){var $t=o.a.create("a",Qt,ee);return $t.innerHTML=yt,$t.title=Ft,$t.href="javascript:void(0)",$t.addEventListener("click",Vt),$t}},{key:"updateDisabled",value:function(){var yt=this.mapsService,Ft="l7-disabled";o.a.removeClass(this.zoomInButton,Ft),o.a.removeClass(this.zoomOutButton,Ft),(this.disabled||yt.getZoom()<=yt.getMinZoom())&&o.a.addClass(this.zoomOutButton,Ft),(this.disabled||yt.getZoom()>=yt.getMaxZoom())&&o.a.addClass(this.zoomInButton,Ft)}}]),q}(M);function it(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(nt);at&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(nt,yt).enumerable})),q.push.apply(q,_t)}return q}function ft(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?it(Object(q),!0).forEach(function(_t){E()(nt,_t,q[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):it(Object(q)).forEach(function(_t){Object.defineProperty(nt,_t,Object.getOwnPropertyDescriptor(q,_t))})}return nt}function pt(nt){var at=ut();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var It=function(nt){c()(q,nt);var at=pt(q);function q(_t){var yt;return e()(this,q),yt=at.call(this),yt.markerOption=void 0,yt.defaultMarker=void 0,yt.popup=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.scene=void 0,yt.added=!1,yt.eventHandle=function(Ft){yt.emit(Ft.type,{target:Ft,data:yt.markerOption.extData,lngLat:yt.lngLat})},yt.markerOption=ft(ft({},yt.getDefault()),_t),Object(o.i)(["update","onMove","onUp","addDragHandler","onMapClick"],m()(yt)),yt.init(),yt}return l()(q,[{key:"getDefault",value:function(){return{element:void 0,anchor:o.f.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(yt){this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService);var Ft=this.markerOption,Qt=Ft.element,ee=Ft.draggable;return this.mapsService.getMarkerContainer().appendChild(Qt),this.registerMarkerEvent(Qt),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var yt=this.markerOption.element;return yt&&o.a.remove(yt),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(yt){var Ft=this;if(!this.added)return this.once("added",function(){Ft.setElement(yt)}),this;var Qt=this.markerOption.element;return Qt&&o.a.remove(Qt),this.markerOption.element=yt,this.init(),this.mapsService.getMarkerContainer().appendChild(yt),this.registerMarkerEvent(yt),this.update(),this}},{key:"openPopup",value:function(){var yt=this;if(!this.added)return this.once("added",function(){yt.openPopup()}),this;var Ft=this.popup;return Ft?(Ft.isOpen()||Ft.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var yt=this;this.added||this.once("added",function(){yt.closePopup()});var Ft=this.popup;return Ft&&Ft.remove(),this}},{key:"setPopup",value:function(yt){return this.popup=yt,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var yt=this.popup;if(yt)yt.isOpen()?yt.remove():yt.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(yt){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(yt){this.markerOption.extData=yt}},{key:"update",value:function(){if(!!this.mapsService){var yt=this.markerOption,Ft=yt.element,Qt=yt.anchor;this.updatePosition(),o.a.setTransform(Ft,"".concat(o.e[Qt]))}}},{key:"onMapClick",value:function(yt){var Ft=this.markerOption.element;this.popup&&Ft&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.markerOption,Ft=yt.element,Qt=yt.offsets,ee=this.lngLat,Vt=ee.lng,$t=ee.lat,Me=this.mapsService.getBounds(),me=this.mapsService.lngLatToContainer([Vt,$t]);if(Ft){Ft.style.display="block";var le=this.mapsService.getContainer(),be=0,ze=0;if(le&&(be=le.scrollWidth,ze=le.scrollHeight),Math.abs(Me[0][0])>180||Math.abs(Me[1][0])>180){if(me.x>be){var Xe=this.mapsService.lngLatToContainer([Vt-360,$t]);me.x=Xe.x}if(me.x<0){var Sn=this.mapsService.lngLatToContainer([Vt+360,$t]);me.x=Sn.x}}(me.x>be||me.x<0||me.y>ze||me.y<0)&&(Ft.style.display="none"),Ft.style.left=me.x+Qt[0]+"px",Ft.style.top=me.y-Qt[1]+"px"}}}},{key:"init",value:function(){var yt=this,Ft=this.markerOption.element,Qt=this.markerOption,ee=Qt.color,Vt=Qt.anchor;if(!Ft){this.defaultMarker=!0,Ft=o.a.create("div"),this.markerOption.element=Ft;var $t=document.createElementNS("http://www.w3.org/2000/svg","svg");$t.setAttributeNS(null,"display","block"),$t.setAttributeNS(null,"height","48px"),$t.setAttributeNS(null,"width","48px"),$t.setAttributeNS(null,"viewBox","0 0 1024 1024");var Me=document.createElementNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),Me.setAttributeNS(null,"fill",ee),$t.appendChild(Me),Ft.appendChild($t)}o.a.addClass(Ft,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(me){var le,be,ze=((le=yt.markerOption)===null||le===void 0?void 0:le.style)&&((be=yt.markerOption)===null||be===void 0?void 0:be.style[me]);Ft&&(Ft.style[me]=ze)}),Ft.addEventListener("click",function(me){yt.onMapClick(me)}),Ft.addEventListener("click",this.eventHandle),Object(o.g)(Ft,Vt,"marker")}},{key:"registerMarkerEvent",value:function(yt){yt.addEventListener("mousemove",this.eventHandle),yt.addEventListener("click",this.eventHandle),yt.addEventListener("mousedown",this.eventHandle),yt.addEventListener("mouseup",this.eventHandle),yt.addEventListener("dblclick",this.eventHandle),yt.addEventListener("contextmenu",this.eventHandle),yt.addEventListener("mouseover",this.eventHandle),yt.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var yt=this.getElement();yt.removeEventListener("mousemove",this.eventHandle),yt.removeEventListener("click",this.eventHandle),yt.removeEventListener("mousedown",this.eventHandle),yt.removeEventListener("mouseup",this.eventHandle),yt.removeEventListener("dblclick",this.eventHandle),yt.removeEventListener("contextmenu",this.eventHandle),yt.removeEventListener("mouseover",this.eventHandle),yt.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(yt){throw new Error("Method not implemented.")}},{key:"onUp",value:function(yt){throw new Error("Method not implemented.")}}]),q}(u.EventEmitter),Nt=R("QkVN"),Rt=R.n(Nt),Mt=R("mpbz"),bt=R.n(Mt);function At(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(nt);at&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(nt,yt).enumerable})),q.push.apply(q,_t)}return q}function rt(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?At(Object(q),!0).forEach(function(_t){E()(nt,_t,q[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):At(Object(q)).forEach(function(_t){Object.defineProperty(nt,_t,Object.getOwnPropertyDescriptor(q,_t))})}return nt}function Pt(nt){var at=z();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var Q=function(nt){c()(q,nt);var at=Pt(q);function q(_t){var yt,Ft;return e()(this,q),Ft=at.call(this),Ft.markers=[],Ft.markerLayerOption=void 0,Ft.clusterIndex=void 0,Ft.points=[],Ft.clusterMarkers=[],Ft.mapsService=void 0,Ft.scene=void 0,Ft.zoom=void 0,Ft.bbox=void 0,Ft.markerLayerOption=Rt()(Ft.getDefault(),_t),Object(o.i)(["update"],m()(Ft)),Ft.zoom=((yt=Ft.markerLayerOption.clusterOption)===null||yt===void 0?void 0:yt.zoom)||-99,Ft}return l()(q,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(yt){return this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(yt){var Ft=this.markerLayerOption.cluster;Ft&&this.addPoint(yt,this.markers.length),this.markers.push(yt)}},{key:"removeMarker",value:function(yt){this.markers.indexOf(yt);var Ft=this.markers.indexOf(yt);Ft>-1&&this.markers.splice(Ft,1)}},{key:"getMarkers",value:function(){var yt=this.markerLayerOption.cluster;return yt?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var yt=this;this.getMarkers().forEach(function(Ft){Ft.addTo(yt.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(yt){yt.remove()}),this.clusterMarkers.forEach(function(yt){yt.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(yt,Ft){var Qt=yt.getLnglat(),ee=Qt.lng,Vt=Qt.lat,$t={geometry:{type:"Point",coordinates:[ee,Vt]},properties:rt(rt({},yt.getExtData()),{},{marker_id:Ft})};this.points.push($t)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var yt=this.markerLayerOption.clusterOption,Ft=yt.radius,Qt=yt.minZoom,ee=Qt===void 0?0:Qt,Vt=yt.maxZoom;this.clusterIndex=new bt.a({radius:Ft,minZoom:ee,maxZoom:Vt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(yt,Ft){var Qt=this,ee=yt[0].concat(yt[1]),Vt=this.clusterIndex.getClusters(ee,Ft);this.clusterMarkers.forEach(function($t){$t.remove()}),this.clusterMarkers=[],Vt.forEach(function($t){var Me,me=Qt.markerLayerOption.clusterOption,le=me.field,be=me.method;if($t.properties&&(Me=$t.properties)!==null&&Me!==void 0&&Me.cluster_id){var ze,Xe=Qt.getLeaves((ze=$t.properties)===null||ze===void 0?void 0:ze.cluster_id);if($t.properties.clusterData=Xe,le&&be){var Sn=Xe==null?void 0:Xe.map(function(An){var Nn=E()({},le,An.properties[le]);return Nn}),Xn=o.c.getColumn(Sn,le),Hn=o.c.getSatByColumn(be,Xn),nn="point_"+be;$t.properties[nn]=Hn.toFixed(2)}}var en=Qt.clusterMarker($t);Qt.clusterMarkers.push(en),en.addTo(Qt.scene)})}},{key:"getLeaves",value:function(yt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return yt?this.clusterIndex.getLeaves(yt,Ft,Qt):null}},{key:"clusterMarker",value:function(yt){var Ft=this.markerLayerOption.clusterOption,Qt=Ft,ee=Qt.element,Vt=ee===void 0?this.generateElement.bind(this):ee,$t=new It({element:Vt(yt)}).setLnglat({lng:yt.geometry.coordinates[0],lat:yt.geometry.coordinates[1]});return $t}},{key:"normalMarker",value:function(yt){var Ft=yt.properties.marker_id;return this.markers[Ft]}},{key:"update",value:function(){var yt=this.mapsService.getZoom(),Ft=this.mapsService.getBounds();(!this.bbox||Math.abs(yt-this.zoom)>=1||!Object(o.j)(this.bbox,Ft))&&(this.bbox=Object(o.r)(Ft,.5),this.zoom=Math.floor(yt),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(yt){var Ft=o.a.create("div","l7-marker-cluster"),Qt=o.a.create("div","",Ft),ee=o.a.create("span","",Qt),Vt=this.markerLayerOption.clusterOption,$t=Vt.field,Me=Vt.method;yt.properties.point_count=yt.properties.point_count||1;var me=$t&&Me?yt.properties["point_"+Me]||yt.properties[$t]:yt.properties.point_count;return ee.textContent=me,Ft}}]),q}(u.EventEmitter);function gt(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(nt);at&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(nt,yt).enumerable})),q.push.apply(q,_t)}return q}function et(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?gt(Object(q),!0).forEach(function(_t){E()(nt,_t,q[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):gt(Object(q)).forEach(function(_t){Object.defineProperty(nt,_t,Object.getOwnPropertyDescriptor(q,_t))})}return nt}function ot(nt){var at=xt();return function(){var _t=i()(nt),yt;if(at){var Ft=i()(this).constructor;yt=Reflect.construct(_t,arguments,Ft)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function xt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var H=function(nt){c()(q,nt);var at=ot(q);function q(_t){var yt;return e()(this,q),yt=at.call(this),yt.popupOption=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.content=void 0,yt.closeButton=void 0,yt.timeoutInstance=void 0,yt.container=void 0,yt.tip=void 0,yt.scene=void 0,yt.popupOption=et(et({},yt.getdefault()),_t),Object(o.i)(["update","onClickClose","remove"],m()(yt)),yt}return l()(q,[{key:"addTo",value:function(yt){var Ft=this;return this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService),this.mapsService.on("camerachange",this.update),this.scene=yt,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){Ft.mapsService.on("click",Ft.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(yt){var Ft=window.document.createDocumentFragment(),Qt=window.document.createElement("body"),ee;for(Qt.innerHTML=yt;ee=Qt.firstChild,!!ee;)Ft.appendChild(ee);return this.setDOMContent(Ft)}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(yt){return this.setDOMContent(window.document.createTextNode(yt))}},{key:"setMaxWidth",value:function(yt){return this.popupOption.maxWidth=yt,this.update(),this}},{key:"setDOMContent",value:function(yt){return this.createContent(),this.content.appendChild(yt),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&o.a.remove(this.content),this.content=o.a.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=o.a.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(yt,Ft,Qt){var ee=window.document.createElement(yt);return Ft!==void 0&&(ee.className=Ft),Qt&&Qt.appendChild(ee),ee}},{key:"removeDom",value:function(yt){yt.parentNode&&yt.parentNode.removeChild(yt)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:o.f.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(yt){yt.stopPropagation&&yt.stopPropagation(),this.remove()}},{key:"update",value:function(){var yt=this,Ft=this.lngLat,Qt=this.popupOption,ee=Qt.className,Vt=Qt.maxWidth,$t=Qt.anchor;if(!(!this.mapsService||!Ft||!this.content)){var Me=this.mapsService.getMarkerContainer();if(!this.container&&Me){this.container=this.creatDom("div","l7-popup",Me),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),ee&&ee.split(" ").forEach(function(le){return yt.container.classList.add(le)});var me=this.popupOption.stopPropagation;me&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(le){yt.container.addEventListener(le,function(be){be.stopPropagation()})})}Vt&&this.container.style.maxWidth!==Vt&&(this.container.style.maxWidth=Vt),this.updatePosition(),o.a.setTransform(this.container,"".concat(o.e[$t])),Object(o.g)(this.container,$t,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.lngLat,Ft=yt.lng,Qt=yt.lat,ee=this.popupOption.offsets,Vt=this.mapsService.lngLatToContainer([Ft,Qt]);this.container.style.left=Vt.x+ee[0]+"px",this.container.style.top=Vt.y-ee[1]+"px"}}}]),q}(u.EventEmitter);R("BGjm")(`/* @antv/l7-component */
.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
 }

.l7-marker {
	position: absolute !important;
	top: 0;
	left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
    -webkit-flex-direction: column-reverse;
    -webkit-box-orient: vertical;
    -webkit-box-direction: reverse;
        -ms-flex-direction: column-reverse;
            flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
    -webkit-flex-direction: column;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}


.l7-popup-anchor-left {
    -webkit-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.l7-popup-anchor-right {
    -webkit-flex-direction: row-reverse;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: reverse;
        -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-flex;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-top: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-top: none;
	border-left: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-top: none;
	border-right: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-bottom: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-bottom: none;
	border-left: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-bottom: none;
	border-right: none;
	border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-left: none;
	border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-right: none;
	border-left-color: #fff;
}

.l7-popup-close-button {
	position: absolute;
	right: 0;
	top: 0;
	border: 0;
	padding: 0;
	font-size: 25px;
	line-height: 20px;
	border-radius: 0 3px 0 0;
	cursor: pointer;
	background-color: transparent;
}

.l7-popup-close-button:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
	position: relative;
	background: #fff;
	border-radius: 3px;
	-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	padding: 10px 10px 15px;
	pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
	border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
	border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
	border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
	border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
	display: none;
}

.l7-popup-track-pointer * {
	pointer-events: none;
	-webkit-user-select: none;
	   -moz-user-select: none;
	    -ms-user-select: none;
	        user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
	display: -webkit-box;
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
}

.l7-map:active .l7-popup-track-pointer {
	display: none;
}


.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.l7-bar a,
.l7-bar a:hover {
	background-color: #fff;
	width: 30px;
	height: 30px;
  font-size: 20px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: #8E9DAB;
	}
.l7-bar a,
.l7-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.l7-bar a:hover {
	background-color: #f4f4f4;
	}
.l7-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.l7-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	border-bottom: none;
	}
.l7-bar a.l7-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}


/* control positioning */

.l7-control-container {
	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.l7-control-hide {
	display: none;
}
.l7-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.l7-control {
	float: left;
	clear: both;
	}.l7-top,
  .l7-bottom {
    position: absolute;
    z-index: 1000;
    pointer-events: none;
    }
  .l7-top {
    top: 0;
    }
  .l7-right {
    right: 0;
    }
  .l7-bottom {
    bottom: 0;
    }
  .l7-left {
    left: 0;
    }

  .l7-control {
    float: left;
    clear: both;
    }
  .l7-right .l7-control {
    float: right;
    }
  .l7-top .l7-control {
    margin-top: 10px;
    }
  .l7-bottom .l7-control {
    margin-bottom: 10px;
    }
  .l7-left .l7-control {
    margin-left: 10px;
    }
  .l7-right .l7-control {
    margin-right: 10px;
    }

  /* attribution and scale controls */

.l7-control-container .l7-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.7);
	margin: 0;
	}
.l7-control-attribution,
.l7-control-scale-line {
	padding: 0 5px;
  color: #333;
	}
.l7-control-attribution a {
	text-decoration: none;
	}
.l7-control-attribution a:hover {
	text-decoration: underline;
	}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
	}
.l7-left .l7-control-scale {
	margin-left: 5px;
	}
.l7-bottom .l7-control-scale {
	margin-bottom: 5px;
	}
.l7-control-scale-line {
	border: 2px solid #000;
  border-top: none;
  color: #000;
	line-height: 1.1;
	padding: 2px 5px 1px;
	font-size: 11px;
	white-space: nowrap;
	overflow: hidden;
	-webkit-box-sizing: border-box;
	        box-sizing: border-box;

	background: #fff;
	}
.l7-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.l7-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	-webkit-box-shadow: none;
	        box-shadow: none;
	}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
  }
  /*logo */

  .l7-ctrl-logo {
    background-size: 100% 100%;
    width: 89px;
    height: 16px;
    margin: 0 0 -3px -3px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    background-repeat: no-repeat;
    cursor: pointer;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}


	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 2px;
	}
.l7-control-layers-toggle {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
	width: 30px;
  height: 30px;
  background-size: 20px 20px;
	}

.l7-touch .l7-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
	display: none;
	}
.l7-control-layers-expanded .l7-control-layers-list {
	display: block;
	position: relative;
	}
.l7-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #59626B;
	background: #fff;
	}
.l7-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.l7-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.l7-control-layers label {
  display: block;
  padding: 8px;
  }
  .l7-control-layers label input[type="radio"],
  .l7-control-layers label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
	height: 0;
	border-top: 1px solid #D8D8D8;
	margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
 }
 .amap-logo{
  display: none !important;
 }


`)},kPKH:function(Oe,mt,R){"use strict";var U=R("/kpp");mt.a=U.a},"kQ+U":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return $t});var U=R("lSNA"),E=R.n(U),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),l=R.n(t),s=R("k5/I"),c=R("h1nZ"),r=R("yXPU"),h=R.n(r),n=R("o0o1"),i=R.n(n),a=R("4cb6"),o=R("fbvF"),u=R.n(o),f=function(){function Me(me,le){e()(this,Me),this.attribute=void 0,this.buffer=void 0;var be=le.buffer,ze=le.offset,Xe=le.stride,Sn=le.normalized,Xn=le.size,Hn=le.divisor;this.buffer=be,this.attribute={buffer:be.get(),offset:ze||0,stride:Xe||0,normalized:Sn||!1,divisor:Hn||0},Xn&&(this.attribute.size=Xn)}return l()(Me,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(le){this.buffer.subData(le)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Me}(),v,b,y,g,_,M,x,m,S,P,A,O,L,W,F=(v={},E()(v,c.gl.POINTS,"points"),E()(v,c.gl.LINES,"lines"),E()(v,c.gl.LINE_LOOP,"line loop"),E()(v,c.gl.LINE_STRIP,"line strip"),E()(v,c.gl.TRIANGLES,"triangles"),E()(v,c.gl.TRIANGLE_FAN,"triangle fan"),E()(v,c.gl.TRIANGLE_STRIP,"triangle strip"),v),K=(b={},E()(b,c.gl.STATIC_DRAW,"static"),E()(b,c.gl.DYNAMIC_DRAW,"dynamic"),E()(b,c.gl.STREAM_DRAW,"stream"),b),V=(y={},E()(y,c.gl.BYTE,"int8"),E()(y,c.gl.UNSIGNED_INT,"int16"),E()(y,c.gl.INT,"int32"),E()(y,c.gl.UNSIGNED_BYTE,"uint8"),E()(y,c.gl.UNSIGNED_SHORT,"uint16"),E()(y,c.gl.UNSIGNED_INT,"uint32"),E()(y,c.gl.FLOAT,"float"),y),k=(g={},E()(g,c.gl.ALPHA,"alpha"),E()(g,c.gl.LUMINANCE,"luminance"),E()(g,c.gl.LUMINANCE_ALPHA,"luminance alpha"),E()(g,c.gl.RGB,"rgb"),E()(g,c.gl.RGBA,"rgba"),E()(g,c.gl.RGBA4,"rgba4"),E()(g,c.gl.RGB5_A1,"rgb5 a1"),E()(g,c.gl.RGB565,"rgb565"),E()(g,c.gl.DEPTH_COMPONENT,"depth"),E()(g,c.gl.DEPTH_STENCIL,"depth stencil"),g),Z=(_={},E()(_,c.gl.DONT_CARE,"dont care"),E()(_,c.gl.NICEST,"nice"),E()(_,c.gl.FASTEST,"fast"),_),X=(M={},E()(M,c.gl.NEAREST,"nearest"),E()(M,c.gl.LINEAR,"linear"),E()(M,c.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),E()(M,c.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),E()(M,c.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),E()(M,c.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),M),it=(x={},E()(x,c.gl.REPEAT,"repeat"),E()(x,c.gl.CLAMP_TO_EDGE,"clamp"),E()(x,c.gl.MIRRORED_REPEAT,"mirror"),x),ft=(m={},E()(m,c.gl.NONE,"none"),E()(m,c.gl.BROWSER_DEFAULT_WEBGL,"browser"),m),pt=(S={},E()(S,c.gl.NEVER,"never"),E()(S,c.gl.ALWAYS,"always"),E()(S,c.gl.LESS,"less"),E()(S,c.gl.LEQUAL,"lequal"),E()(S,c.gl.GREATER,"greater"),E()(S,c.gl.GEQUAL,"gequal"),E()(S,c.gl.EQUAL,"equal"),E()(S,c.gl.NOTEQUAL,"notequal"),S),ut=(P={},E()(P,c.gl.FUNC_ADD,"add"),E()(P,c.gl.MIN_EXT,"min"),E()(P,c.gl.MAX_EXT,"max"),E()(P,c.gl.FUNC_SUBTRACT,"subtract"),E()(P,c.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),P),It=(A={},E()(A,c.gl.ZERO,"zero"),E()(A,c.gl.ONE,"one"),E()(A,c.gl.SRC_COLOR,"src color"),E()(A,c.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),E()(A,c.gl.SRC_ALPHA,"src alpha"),E()(A,c.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),E()(A,c.gl.DST_COLOR,"dst color"),E()(A,c.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),E()(A,c.gl.DST_ALPHA,"dst alpha"),E()(A,c.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),E()(A,c.gl.CONSTANT_COLOR,"constant color"),E()(A,c.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),E()(A,c.gl.CONSTANT_ALPHA,"constant alpha"),E()(A,c.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),E()(A,c.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),A),Nt=(O={},E()(O,c.gl.NEVER,"never"),E()(O,c.gl.ALWAYS,"always"),E()(O,c.gl.LESS,"less"),E()(O,c.gl.LEQUAL,"lequal"),E()(O,c.gl.GREATER,"greater"),E()(O,c.gl.GEQUAL,"gequal"),E()(O,c.gl.EQUAL,"equal"),E()(O,c.gl.NOTEQUAL,"notequal"),O),Rt=(L={},E()(L,c.gl.ZERO,"zero"),E()(L,c.gl.KEEP,"keep"),E()(L,c.gl.REPLACE,"replace"),E()(L,c.gl.INVERT,"invert"),E()(L,c.gl.INCR,"increment"),E()(L,c.gl.DECR,"decrement"),E()(L,c.gl.INCR_WRAP,"increment wrap"),E()(L,c.gl.DECR_WRAP,"decrement wrap"),L),Mt=(W={},E()(W,c.gl.FRONT,"front"),E()(W,c.gl.BACK,"back"),W),bt=function(){function Me(me,le){e()(this,Me),this.buffer=void 0;var be=le.data,ze=le.usage,Xe=le.type;this.buffer=me.buffer({data:be,usage:K[ze||c.gl.STATIC_DRAW],type:V[Xe||c.gl.UNSIGNED_BYTE]})}return l()(Me,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(le){var be=le.data,ze=le.offset;this.buffer.subdata(be,ze)}}]),Me}(),At=function(){function Me(me,le){e()(this,Me),this.elements=void 0;var be=le.data,ze=le.usage,Xe=le.type,Sn=le.count;this.elements=me.elements({data:be,usage:K[ze||c.gl.STATIC_DRAW],type:V[Xe||c.gl.UNSIGNED_BYTE],count:Sn})}return l()(Me,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(le){var be=le.data;this.elements.subdata(be)}},{key:"destroy",value:function(){}}]),Me}(),rt=function(){function Me(me,le){e()(this,Me),this.framebuffer=void 0;var be=le.width,ze=le.height,Xe=le.color,Sn=le.colors,Xn=le.depth,Hn=le.stencil,nn={width:be,height:ze};Array.isArray(Sn)&&(nn.colors=Sn.map(function(en){return en.get()})),Xe&&typeof Xe!="boolean"&&(nn.color=Xe.get()),this.framebuffer=me.framebuffer(nn)}return l()(Me,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(le){var be=le.width,ze=le.height;this.framebuffer.resize(be,ze)}}]),Me}(),Pt=R("cDf5"),z=R.n(Pt),Q=R("c6wG"),gt=R.n(Q),et=R("YO3V"),ot=R.n(et);function xt(Me,me){var le=Object.keys(Me);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Me);me&&(be=be.filter(function(ze){return Object.getOwnPropertyDescriptor(Me,ze).enumerable})),le.push.apply(le,be)}return le}function H(Me){for(var me=1;me<arguments.length;me++){var le=arguments[me]!=null?arguments[me]:{};me%2?xt(Object(le),!0).forEach(function(be){E()(Me,be,le[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(le)):xt(Object(le)).forEach(function(be){Object.defineProperty(Me,be,Object.getOwnPropertyDescriptor(le,be))})}return Me}var nt=function(){function Me(me,le){e()(this,Me),this.reGl=void 0,this.destroyed=!1,this.drawCommand=void 0,this.drawParams=void 0,this.options=void 0,this.uniforms={},this.reGl=me;var be=le.vs,ze=le.fs,Xe=le.attributes,Sn=le.uniforms,Xn=le.primitive,Hn=le.count,nn=le.elements,en=le.depth,An=le.blend,Nn=le.stencil,fr=le.cull,hi=le.instances,Ce={};this.options=le,Sn&&(this.uniforms=this.extractUniforms(Sn),Object.keys(Sn).forEach(function(pe){Ce[pe]=me.prop(pe)}));var Te={};Object.keys(Xe).forEach(function(pe){Te[pe]=Xe[pe].get()});var Jt={attributes:Te,frag:ze,uniforms:Ce,vert:be,primitive:F[Xn===void 0?c.gl.TRIANGLES:Xn]};hi&&(Jt.instances=hi),Hn&&(Jt.count=Hn),nn&&(Jt.elements=nn.get()),this.initDepthDrawParams({depth:en},Jt),this.initBlendDrawParams({blend:An},Jt),this.initStencilDrawParams({stencil:Nn},Jt),this.initCullDrawParams({cull:fr},Jt),this.drawCommand=me(Jt),this.drawParams=Jt}return l()(Me,[{key:"addUniforms",value:function(le){this.uniforms=H(H({},this.uniforms),this.extractUniforms(le))}},{key:"draw",value:function(le){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var be=H(H({},this.uniforms),this.extractUniforms(le.uniforms||{})),ze={};Object.keys(be).forEach(function(Xe){var Sn=z()(be[Xe]);Sn==="boolean"||Sn==="number"||Array.isArray(be[Xe])||be[Xe].BYTES_PER_ELEMENT?ze[Xe]=be[Xe]:ze[Xe]=be[Xe].get()}),this.drawCommand(ze)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(le){le.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(le,be){var ze=le.depth;ze&&(be.depth={enable:ze.enable===void 0?!0:!!ze.enable,mask:ze.mask===void 0?!0:!!ze.mask,func:pt[ze.func||c.gl.LESS],range:ze.range||[0,1]})}},{key:"initBlendDrawParams",value:function(le,be){var ze=le.blend;if(ze){var Xe=ze.enable,Sn=ze.func,Xn=ze.equation,Hn=ze.color,nn=Hn===void 0?[0,0,0,0]:Hn;be.blend={enable:!!Xe,func:{srcRGB:It[Sn&&Sn.srcRGB||c.gl.SRC_ALPHA],srcAlpha:It[Sn&&Sn.srcAlpha||c.gl.SRC_ALPHA],dstRGB:It[Sn&&Sn.dstRGB||c.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:It[Sn&&Sn.dstAlpha||c.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ut[Xn&&Xn.rgb||c.gl.FUNC_ADD],alpha:ut[Xn&&Xn.alpha||c.gl.FUNC_ADD]},color:nn}}}},{key:"initStencilDrawParams",value:function(le,be){var ze=le.stencil;if(ze){var Xe=ze.enable,Sn=ze.mask,Xn=Sn===void 0?-1:Sn,Hn=ze.func,nn=Hn===void 0?{cmp:c.gl.ALWAYS,ref:0,mask:-1}:Hn,en=ze.opFront,An=en===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:en,Nn=ze.opBack,fr=Nn===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:Nn;be.stencil={enable:!!Xe,mask:Xn,func:H(H({},nn),{},{cmp:Nt[nn.cmp]}),opFront:{fail:Rt[An.fail],zfail:Rt[An.zfail],zpass:Rt[An.zpass]},opBack:{fail:Rt[fr.fail],zfail:Rt[fr.zfail],zpass:Rt[fr.zpass]}}}}},{key:"initCullDrawParams",value:function(le,be){var ze=le.cull;if(ze){var Xe=ze.enable,Sn=ze.face,Xn=Sn===void 0?c.gl.BACK:Sn;be.cull={enable:!!Xe,face:Mt[Xn]}}}},{key:"extractUniforms",value:function(le){var be=this,ze={};return Object.keys(le).forEach(function(Xe){be.extractUniformsRecursively(Xe,le[Xe],ze,"")}),ze}},{key:"extractUniformsRecursively",value:function(le,be,ze,Xe){var Sn=this;if(be===null||typeof be=="number"||typeof be=="boolean"||Array.isArray(be)&&typeof be[0]=="number"||gt()(be)||be===""||"resize"in be){ze["".concat(Xe&&Xe+".").concat(le)]=be;return}ot()(be)&&Object.keys(be).forEach(function(Xn){Sn.extractUniformsRecursively(Xn,be[Xn],ze,"".concat(Xe&&Xe+".").concat(le))}),Array.isArray(be)&&be.forEach(function(Xn,Hn){Object.keys(Xn).forEach(function(nn){Sn.extractUniformsRecursively(nn,Xn[nn],ze,"".concat(Xe&&Xe+".").concat(le,"[").concat(Hn,"]"))})})}}]),Me}(),at=function(){function Me(me,le){e()(this,Me),this.texture=void 0,this.width=void 0,this.height=void 0;var be=le.data,ze=le.type,Xe=ze===void 0?c.gl.UNSIGNED_BYTE:ze,Sn=le.width,Xn=le.height,Hn=le.flipY,nn=Hn===void 0?!1:Hn,en=le.format,An=en===void 0?c.gl.RGBA:en,Nn=le.mipmap,fr=Nn===void 0?!1:Nn,hi=le.wrapS,Ce=hi===void 0?c.gl.CLAMP_TO_EDGE:hi,Te=le.wrapT,Jt=Te===void 0?c.gl.CLAMP_TO_EDGE:Te,pe=le.aniso,Wt=pe===void 0?0:pe,ie=le.alignment,Ae=ie===void 0?1:ie,ue=le.premultiplyAlpha,xe=ue===void 0?!1:ue,$e=le.mag,Fn=$e===void 0?c.gl.NEAREST:$e,or=le.min,En=or===void 0?c.gl.NEAREST:or,Pn=le.colorSpace,br=Pn===void 0?c.gl.BROWSER_DEFAULT_WEBGL:Pn;this.width=Sn,this.height=Xn;var Pr={width:Sn,height:Xn,type:V[Xe],format:k[An],wrapS:it[Ce],wrapT:it[Jt],mag:X[Fn],min:X[En],alignment:Ae,flipY:nn,colorSpace:ft[br],premultiplyAlpha:xe,aniso:Wt};be&&(Pr.data=be),typeof fr=="number"?Pr.mipmap=Z[fr]:typeof fr=="boolean"&&(Pr.mipmap=fr),this.texture=me.texture(Pr)}return l()(Me,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(le)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(le){var be=le.width,ze=le.height;this.texture.resize(be,ze),this.width=be,this.height=ze}},{key:"destroy",value:function(){this.texture.destroy()}}]),Me}(),q,_t,yt,Ft=(q=Object(a.injectable)(),q(_t=(yt=function(){function Me(){var me=this;e()(this,Me),this.gl=void 0,this.$container=void 0,this.canvas=void 0,this.width=void 0,this.height=void 0,this.isDirty=void 0,this.createModel=function(le){return new nt(me.gl,le)},this.createAttribute=function(le){return new f(me.gl,le)},this.createBuffer=function(le){return new bt(me.gl,le)},this.createElements=function(le){return new At(me.gl,le)},this.createTexture2D=function(le){return new at(me.gl,le)},this.createFramebuffer=function(le){return new rt(me.gl,le)},this.useFramebuffer=function(le,be){me.gl({framebuffer:le?le.get():null})(be)},this.clear=function(le){var be=le.color,ze=le.depth,Xe=le.stencil,Sn=le.framebuffer,Xn=Sn===void 0?null:Sn,Hn={color:be,depth:ze,stencil:Xe};Hn.framebuffer=Xn===null?Xn:Xn.get(),me.gl.clear(Hn)},this.viewport=function(le){var be=le.x,ze=le.y,Xe=le.width,Sn=le.height;me.gl._gl.viewport(be,ze,Xe,Sn),me.width=Xe,me.height=Sn,me.gl._refresh()},this.readPixels=function(le){var be=le.framebuffer,ze=le.x,Xe=le.y,Sn=le.width,Xn=le.height,Hn={x:ze,y:Xe,width:Sn,height:Xn};return be&&(Hn.framebuffer=be.get()),me.gl.read(Hn)},this.getViewportSize=function(){return{width:me.gl._gl.drawingBufferWidth,height:me.gl._gl.drawingBufferHeight}},this.getContainer=function(){var le;return(le=me.canvas)===null||le===void 0?void 0:le.parentElement},this.getCanvas=function(){return me.canvas},this.getGLContext=function(){return me.gl._gl},this.destroy=function(){me.gl.destroy()}}return l()(Me,[{key:"init",value:function(){var me=h()(i.a.mark(function be(ze,Xe){var Sn=this;return i.a.wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:return this.canvas=ze,Hn.next=3,new Promise(function(nn,en){u()({canvas:Sn.canvas,attributes:{alpha:!0,antialias:Xe.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:Xe.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Nn,fr){(Nn||!fr)&&en(Nn),nn(fr)}})});case 3:this.gl=Hn.sent;case 4:case"end":return Hn.stop()}},be,this)}));function le(be,ze){return me.apply(this,arguments)}return le}()},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var le=this.getGLContext();le.disable(le.CULL_FACE)}},{key:"setDirty",value:function(le){this.isDirty=le}},{key:"getDirty",value:function(){return this.isDirty}}]),Me}(),yt))||_t),Qt=R("Hel2");function ee(Me,me){var le=Object.keys(Me);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Me);me&&(be=be.filter(function(ze){return Object.getOwnPropertyDescriptor(Me,ze).enumerable})),le.push.apply(le,be)}return le}function Vt(Me){for(var me=1;me<arguments.length;me++){var le=arguments[me]!=null?arguments[me]:{};me%2?ee(Object(le),!0).forEach(function(be){E()(Me,be,le[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(le)):ee(Object(le)).forEach(function(be){Object.defineProperty(Me,be,Object.getOwnPropertyDescriptor(le,be))})}return Me}var $t=function(){function Me(me){e()(this,Me),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var le=me.id,be=me.map,ze=Object(c.createSceneContainer)();this.container=ze,be.setContainer(ze,le),ze.bind(c.TYPES.IRendererService).to(Ft).inSingletonScope(),this.sceneService=ze.get(c.TYPES.ISceneService),this.mapService=ze.get(c.TYPES.IMapService),this.iconService=ze.get(c.TYPES.IIconService),this.fontService=ze.get(c.TYPES.IFontService),this.controlService=ze.get(c.TYPES.IControlService),this.layerService=ze.get(c.TYPES.ILayerService),this.markerService=ze.get(c.TYPES.IMarkerService),this.interactionService=ze.get(c.TYPES.IInteractionService),this.popupService=ze.get(c.TYPES.IPopupService),this.initComponent(le),this.sceneService.init(me),this.initControl()}return l()(Me,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(le){return this.sceneService.exportPng(le)}},{key:"exportMap",value:function(le){return this.sceneService.exportPng(le)}},{key:"registerRenderService",value:function(le){var be=this;if(this.sceneService.loaded){var ze=new le(this);ze.init()}else this.on("loaded",function(){var Xe=new le(be);Xe.init()})}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(le){var be=Object(c.createLayerContainer)(this.container);le.setContainer(be),this.sceneService.addLayer(le)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(le){return this.layerService.getLayer(le)}},{key:"getLayerByName",value:function(le){return this.layerService.getLayerByName(le)}},{key:"removeLayer",value:function(le){this.layerService.remove(le)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(le,be){this.iconService.addImage(le,be)}},{key:"hasImage",value:function(le){return this.iconService.hasImage(le)}},{key:"removeImage",value:function(le){this.iconService.removeImage(le)}},{key:"addIconFontGlyphs",value:function(le,be){this.fontService.addIconGlyphs(be)}},{key:"addControl",value:function(le){this.controlService.addControl(le,this.container)}},{key:"removeControl",value:function(le){this.controlService.removeControl(le)}},{key:"getControlByName",value:function(le){return this.controlService.getControlByName(le)}},{key:"addMarker",value:function(le){this.markerService.addMarker(le)}},{key:"addMarkerLayer",value:function(le){this.markerService.addMarkerLayer(le)}},{key:"removeMarkerLayer",value:function(le){this.markerService.removeMarkerLayer(le)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(le){this.popupService.addPopup(le)}},{key:"on",value:function(le,be){c.SceneEventList.indexOf(le)===-1?this.mapService.on(le,be):this.sceneService.on(le,be)}},{key:"off",value:function(le,be){c.SceneEventList.indexOf(le)===-1?this.mapService.off(le,be):this.sceneService.off(le,be)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(){return this.mapService.getCenter()}},{key:"setCenter",value:function(le){return this.mapService.setCenter(le)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(le){return this.mapService.setPitch(le)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(le){this.mapService.setRotation(le)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(le){this.mapService.panTo(le)}},{key:"panBy",value:function(le){this.mapService.panBy(le)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(le){this.mapService.setZoom(le)}},{key:"fitBounds",value:function(le,be){var ze=this.sceneService.getSceneConfig(),Xe=ze.fitBoundsOptions,Sn=ze.animate;this.mapService.fitBounds(le,be||Vt(Vt({},Xe),{},{animate:Sn}))}},{key:"setZoomAndCenter",value:function(le,be){this.mapService.setZoomAndCenter(le,be)}},{key:"setMapStyle",value:function(le){this.mapService.setMapStyle(le)}},{key:"setMapStatus",value:function(le){this.mapService.setMapStatus(le)}},{key:"pixelToLngLat",value:function(le){return this.mapService.pixelToLngLat(le)}},{key:"lngLatToPixel",value:function(le){return this.mapService.lngLatToPixel(le)}},{key:"containerToLngLat",value:function(le){return this.mapService.containerToLngLat(le)}},{key:"lngLatToContainer",value:function(le){return this.mapService.lngLatToContainer(le)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(le,be){this.container.bind(c.TYPES.IPostProcessingPass).to(le).whenTargetNamed(be)}},{key:"initComponent",value:function(le){this.controlService.init({container:Qt.a.getContainer(le)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var le=this.sceneService.getSceneConfig(),be=le.logoVisible,ze=le.logoPosition;be&&this.addControl(new s.b({position:ze}))}}]),Me}()},l94r:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return it});var U=R("lSNA"),E=R.n(U),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),l=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("JBE3"),o=R.n(a),u=R("4qC0"),f=R.n(u),v=R("lSCD"),b=R.n(v),y=R("BkRI"),g=R.n(y),_=R("xp6e"),M=R("Hel2"),x=R("uhBA"),m=R("rlAn"),S=R("qxNg");function P(ft){if(ft.length===0)throw new Error("max requires at least one data point");for(var pt=ft[0],ut=1;ut<ft.length;ut++)ft[ut]>pt&&(pt=ft[ut]);return pt}function A(ft){if(ft.length===0)throw new Error("min requires at least one data point");for(var pt=ft[0],ut=1;ut<ft.length;ut++)ft[ut]<pt&&(pt=ft[ut]);return pt}function O(ft){if(ft.length===0)return 0;for(var pt=ft[0],ut=0,It,Nt=1;Nt<ft.length;Nt++)It=pt+ft[Nt]*1,Math.abs(pt)>=Math.abs(ft[Nt])?ut+=pt-It+ft[Nt]:ut+=ft[Nt]-It+pt,pt=It;return pt+ut*1}function L(ft){if(ft.length===0)throw new Error("mean requires at least one data point");return O(ft)/ft.length}var W={min:A,max:P,mean:L,sum:O};function F(ft,pt){return ft.map(function(ut){return ut[pt]*1})}function K(ft,pt){var ut=Object.keys(ft);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(ft);pt&&(It=It.filter(function(Nt){return Object.getOwnPropertyDescriptor(ft,Nt).enumerable})),ut.push.apply(ut,It)}return ut}function V(ft){for(var pt=1;pt<arguments.length;pt++){var ut=arguments[pt]!=null?arguments[pt]:{};pt%2?K(Object(ut),!0).forEach(function(It){E()(ft,It,ut[It])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(ut)):K(Object(ut)).forEach(function(It){Object.defineProperty(ft,It,Object.getOwnPropertyDescriptor(ut,It))})}return ft}function k(ft){var pt=Z();return function(){var It=i()(ft),Nt;if(pt){var Rt=i()(this).constructor;Nt=Reflect.construct(It,arguments,Rt)}else Nt=It.apply(this,arguments);return h()(this,Nt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ft){return!1}}function X(ft,pt){if(Array.isArray(pt))return pt}var it=function(ft){c()(ut,ft);var pt=k(ut);function ut(It,Nt){var Rt;return e()(this,ut),Rt=pt.call(this),Rt.data=void 0,Rt.extent=void 0,Rt.hooks={init:new _.c},Rt.parser={type:"geojson"},Rt.transforms=[],Rt.cluster=!1,Rt.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},Rt.originData=void 0,Rt.rawData=void 0,Rt.cfg={},Rt.clusterIndex=void 0,Rt.originData=It,Rt.initCfg(Nt),Rt.hooks.init.tap("parser",function(){Rt.excuteParser()}),Rt.hooks.init.tap("cluster",function(){Rt.initCluster()}),Rt.hooks.init.tap("transform",function(){Rt.executeTrans()}),Rt.init(),Rt}return l()(ut,[{key:"setData",value:function(Nt,Rt){this.rawData=Nt,this.originData=Nt,this.initCfg(Rt),this.init(),this.emit("update")}},{key:"getClusters",value:function(Nt){return this.clusterIndex.getClusters(this.extent,Nt)}},{key:"getClustersLeaves",value:function(Nt){return this.clusterIndex.getLeaves(Nt,Infinity)}},{key:"updateClusterData",value:function(Nt){var Rt=this,Mt=this.clusterOptions,bt=Mt.method,At=bt===void 0?"sum":bt,rt=Mt.field,Pt=Object(M.r)(Object(M.h)(this.extent),2),z=this.clusterIndex.getClusters(Pt[0].concat(Pt[1]),Math.floor(Nt));this.clusterOptions.zoom=Nt,z.forEach(function(Q){Q.id||(Q.properties.point_count=1)}),(rt||b()(At))&&(z=z.map(function(Q){var gt=Q.id;if(gt){var et=Rt.clusterIndex.getLeaves(gt,Infinity),ot=et.map(function(nt){return nt.properties}),xt;if(f()(At)&&rt){var H=F(ot,rt);xt=W[At](H)}b()(At)&&(xt=At(ot)),Q.properties.stat=xt}else Q.properties.point_count=1;return Q})),this.data=Object(m.getParser)("geojson")({type:"FeatureCollection",features:z}),this.executeTrans()}},{key:"getFeatureById",value:function(Nt){var Rt=this.parser.type,Mt=Rt===void 0?"geojson":Rt;if(Mt==="geojson"&&!this.cluster){var bt=Nt<this.originData.features.length?this.originData.features[Nt]:"null",At=g()(bt);if(this.transforms.length!==0){var rt=this.data.dataArray.find(function(Pt){return Pt._id===Nt});At.properties=rt}return At}else return Nt<this.data.dataArray.length?this.data.dataArray[Nt]:"null"}},{key:"getFeatureId",value:function(Nt,Rt){var Mt=this.data.dataArray.find(function(bt){return bt[Nt]===name});return Mt==null?void 0:Mt._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"initCfg",value:function(Nt){this.cfg=o()(this.cfg,Nt,X);var Rt=this.cfg;Rt&&(Rt.parser&&(this.parser=Rt.parser),Rt.transforms&&(this.transforms=Rt.transforms),this.cluster=Rt.cluster||!1,Rt.clusterOptions&&(this.cluster=!0,this.clusterOptions=V(V({},this.clusterOptions),Rt.clusterOptions)))}},{key:"excuteParser",value:function(){var Nt=this.parser,Rt=Nt.type||"geojson",Mt=Object(m.getParser)(Rt);this.data=Mt(this.originData,Nt),this.extent=Object(M.m)(this.data.dataArray)}},{key:"executeTrans",value:function(){var Nt=this,Rt=this.transforms;Rt.forEach(function(Mt){var bt=Mt.type,At=Object(m.getTransform)(bt)(Nt.data,Mt);Object.assign(Nt.data,At)})}},{key:"initCluster",value:function(){if(!!this.cluster){var Nt=this.clusterOptions||{};this.clusterIndex=Object(S.a)(this.data,Nt)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),ut}(x.EventEmitter)},lJbI:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});function U(E,T){var e=T.extent,t=T.width,l=T.height,s=T.min,c=T.max,r={_id:1,dataArray:[{_id:1,data:Array.from(E),width:t,height:l,min:s,max:c,coordinates:[[e[0],e[1]],[e[2],e[3]]]}]};return r}},lT4e:function(Oe,mt,R){"use strict";var U=R("MgzW"),E={},T=function(i){};function e(n,i,a,o,u,f,v,b){if(T(i),!n){var y;if(i===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[a,o,u,f,v,b],_=0;y=new Error(i.replace(/%s/g,function(){return g[_++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}}var t=function(){};if(!1)var l;var s="mixins";function c(n){return n}var r;r={};function h(n,i,a){var o=[],u={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},f={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},v={displayName:function(V,k){V.displayName=k},mixins:function(V,k){if(k)for(var Z=0;Z<k.length;Z++)g(V,k[Z])},childContextTypes:function(V,k){V.childContextTypes=U({},V.childContextTypes,k)},contextTypes:function(V,k){V.contextTypes=U({},V.contextTypes,k)},getDefaultProps:function(V,k){V.getDefaultProps?V.getDefaultProps=x(V.getDefaultProps,k):V.getDefaultProps=k},propTypes:function(V,k){V.propTypes=U({},V.propTypes,k)},statics:function(V,k){_(V,k)},autobind:function(){}};function b(K,V,k){for(var Z in V)V.hasOwnProperty(Z)}function y(K,V){var k=u.hasOwnProperty(V)?u[V]:null;L.hasOwnProperty(V)&&e(k==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",V),K&&e(k==="DEFINE_MANY"||k==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",V)}function g(K,V){if(!V){if(!1)var k,Z;return}e(typeof V!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),e(!i(V),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var X=K.prototype,it=X.__reactAutoBindPairs;V.hasOwnProperty(s)&&v.mixins(K,V.mixins);for(var ft in V)if(!!V.hasOwnProperty(ft)&&ft!==s){var pt=V[ft],ut=X.hasOwnProperty(ft);if(y(ut,ft),v.hasOwnProperty(ft))v[ft](K,pt);else{var It=u.hasOwnProperty(ft),Nt=typeof pt=="function",Rt=Nt&&!It&&!ut&&V.autobind!==!1;if(Rt)it.push(ft,pt),X[ft]=pt;else if(ut){var Mt=u[ft];e(It&&(Mt==="DEFINE_MANY_MERGED"||Mt==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",Mt,ft),Mt==="DEFINE_MANY_MERGED"?X[ft]=x(X[ft],pt):Mt==="DEFINE_MANY"&&(X[ft]=m(X[ft],pt))}else X[ft]=pt}}}function _(K,V){if(!!V)for(var k in V){var Z=V[k];if(!!V.hasOwnProperty(k)){var X=k in v;e(!X,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',k);var it=k in K;if(it){var ft=f.hasOwnProperty(k)?f[k]:null;e(ft==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",k),K[k]=x(K[k],Z);return}K[k]=Z}}}function M(K,V){e(K&&V&&typeof K=="object"&&typeof V=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var k in V)V.hasOwnProperty(k)&&(e(K[k]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",k),K[k]=V[k]);return K}function x(K,V){return function(){var Z=K.apply(this,arguments),X=V.apply(this,arguments);if(Z==null)return X;if(X==null)return Z;var it={};return M(it,Z),M(it,X),it}}function m(K,V){return function(){K.apply(this,arguments),V.apply(this,arguments)}}function S(K,V){var k=V.bind(K);if(!1)var Z,X;return k}function P(K){for(var V=K.__reactAutoBindPairs,k=0;k<V.length;k+=2){var Z=V[k],X=V[k+1];K[Z]=S(K,X)}}var A={componentDidMount:function(){this.__isMounted=!0}},O={componentWillUnmount:function(){this.__isMounted=!1}},L={replaceState:function(V,k){this.updater.enqueueReplaceState(this,V,k)},isMounted:function(){return!!this.__isMounted}},W=function(){};U(W.prototype,n.prototype,L);function F(K){var V=c(function(Z,X,it){this.__reactAutoBindPairs.length&&P(this),this.props=Z,this.context=X,this.refs=E,this.updater=it||a,this.state=null;var ft=this.getInitialState?this.getInitialState():null;e(typeof ft=="object"&&!Array.isArray(ft),"%s.getInitialState(): must return an object or null",V.displayName||"ReactCompositeComponent"),this.state=ft});V.prototype=new W,V.prototype.constructor=V,V.prototype.__reactAutoBindPairs=[],o.forEach(g.bind(null,V)),g(V,A),g(V,K),g(V,O),V.getDefaultProps&&(V.defaultProps=V.getDefaultProps()),e(V.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var k in u)V.prototype[k]||(V.prototype[k]=null);return V}return F}Oe.exports=h},lnY3:function(Oe,mt,R){},lwsE:function(Oe,mt){function R(U,E){if(!(U instanceof E))throw new TypeError("Cannot call a class as a function")}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},mNvP:function(Oe,mt,R){(function(U,E){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T;(function(e){(function(t){var l=typeof E=="object"?E:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=c(e);typeof l.Reflect=="undefined"?l.Reflect=e:s=c(l.Reflect,s),t(s);function c(r,h){return function(n,i){typeof r[n]!="function"&&Object.defineProperty(r,n,{configurable:!0,writable:!0,value:i}),h&&h(n,i)}}})(function(t){var l=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",c=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",r=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",n={__proto__:[]}instanceof Array,i=!h&&!n,a={create:h?function(){return ee(Object.create(null))}:n?function(){return ee({__proto__:null})}:function(){return ee({})},has:i?function(Vt,$t){return l.call(Vt,$t)}:function(Vt,$t){return $t in Vt},get:i?function(Vt,$t){return l.call(Vt,$t)?Vt[$t]:void 0}:function(Vt,$t){return Vt[$t]}},o=Object.getPrototypeOf(Function),u=typeof U=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!u&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yt(),v=!u&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ft(),b=!u&&typeof WeakMap=="function"?WeakMap:Qt(),y=new b;function g(Vt,$t,Me,me){if(It(Me)){if(!Q(Vt))throw new TypeError;if(!et($t))throw new TypeError;return W(Vt,$t)}else{if(!Q(Vt))throw new TypeError;if(!Mt($t))throw new TypeError;if(!Mt(me)&&!It(me)&&!Nt(me))throw new TypeError;return Nt(me)&&(me=void 0),Me=z(Me),F(Vt,$t,Me,me)}}t("decorate",g);function _(Vt,$t){function Me(me,le){if(!Mt(me))throw new TypeError;if(!It(le)&&!ot(le))throw new TypeError;it(Vt,$t,me,le)}return Me}t("metadata",_);function M(Vt,$t,Me,me){if(!Mt(Me))throw new TypeError;return It(me)||(me=z(me)),it(Vt,$t,Me,me)}t("defineMetadata",M);function x(Vt,$t,Me){if(!Mt($t))throw new TypeError;return It(Me)||(Me=z(Me)),V(Vt,$t,Me)}t("hasMetadata",x);function m(Vt,$t,Me){if(!Mt($t))throw new TypeError;return It(Me)||(Me=z(Me)),k(Vt,$t,Me)}t("hasOwnMetadata",m);function S(Vt,$t,Me){if(!Mt($t))throw new TypeError;return It(Me)||(Me=z(Me)),Z(Vt,$t,Me)}t("getMetadata",S);function P(Vt,$t,Me){if(!Mt($t))throw new TypeError;return It(Me)||(Me=z(Me)),X(Vt,$t,Me)}t("getOwnMetadata",P);function A(Vt,$t){if(!Mt(Vt))throw new TypeError;return It($t)||($t=z($t)),ft(Vt,$t)}t("getMetadataKeys",A);function O(Vt,$t){if(!Mt(Vt))throw new TypeError;return It($t)||($t=z($t)),pt(Vt,$t)}t("getOwnMetadataKeys",O);function L(Vt,$t,Me){if(!Mt($t))throw new TypeError;It(Me)||(Me=z(Me));var me=K($t,Me,!1);if(It(me)||!me.delete(Vt))return!1;if(me.size>0)return!0;var le=y.get($t);return le.delete(Me),le.size>0||y.delete($t),!0}t("deleteMetadata",L);function W(Vt,$t){for(var Me=Vt.length-1;Me>=0;--Me){var me=Vt[Me],le=me($t);if(!It(le)&&!Nt(le)){if(!et(le))throw new TypeError;$t=le}}return $t}function F(Vt,$t,Me,me){for(var le=Vt.length-1;le>=0;--le){var be=Vt[le],ze=be($t,Me,me);if(!It(ze)&&!Nt(ze)){if(!Mt(ze))throw new TypeError;me=ze}}return me}function K(Vt,$t,Me){var me=y.get(Vt);if(It(me)){if(!Me)return;me=new f,y.set(Vt,me)}var le=me.get($t);if(It(le)){if(!Me)return;le=new f,me.set($t,le)}return le}function V(Vt,$t,Me){var me=k(Vt,$t,Me);if(me)return!0;var le=_t($t);return Nt(le)?!1:V(Vt,le,Me)}function k(Vt,$t,Me){var me=K($t,Me,!1);return It(me)?!1:rt(me.has(Vt))}function Z(Vt,$t,Me){var me=k(Vt,$t,Me);if(me)return X(Vt,$t,Me);var le=_t($t);if(!Nt(le))return Z(Vt,le,Me)}function X(Vt,$t,Me){var me=K($t,Me,!1);if(!It(me))return me.get(Vt)}function it(Vt,$t,Me,me){var le=K(Me,me,!0);le.set(Vt,$t)}function ft(Vt,$t){var Me=pt(Vt,$t),me=_t(Vt);if(me===null)return Me;var le=ft(me,$t);if(le.length<=0)return Me;if(Me.length<=0)return le;for(var be=new v,ze=[],Xe=0,Sn=Me;Xe<Sn.length;Xe++){var Xn=Sn[Xe],Hn=be.has(Xn);Hn||(be.add(Xn),ze.push(Xn))}for(var nn=0,en=le;nn<en.length;nn++){var Xn=en[nn],Hn=be.has(Xn);Hn||(be.add(Xn),ze.push(Xn))}return ze}function pt(Vt,$t){var Me=[],me=K(Vt,$t,!1);if(It(me))return Me;for(var le=me.keys(),be=H(le),ze=0;;){var Xe=at(be);if(!Xe)return Me.length=ze,Me;var Sn=nt(Xe);try{Me[ze]=Sn}catch(Xn){try{q(be)}finally{throw Xn}}ze++}}function ut(Vt){if(Vt===null)return 1;switch(typeof Vt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Vt===null?1:6;default:return 6}}function It(Vt){return Vt===void 0}function Nt(Vt){return Vt===null}function Rt(Vt){return typeof Vt=="symbol"}function Mt(Vt){return typeof Vt=="object"?Vt!==null:typeof Vt=="function"}function bt(Vt,$t){switch(ut(Vt)){case 0:return Vt;case 1:return Vt;case 2:return Vt;case 3:return Vt;case 4:return Vt;case 5:return Vt}var Me=$t===3?"string":$t===5?"number":"default",me=xt(Vt,c);if(me!==void 0){var le=me.call(Vt,Me);if(Mt(le))throw new TypeError;return le}return At(Vt,Me==="default"?"number":Me)}function At(Vt,$t){if($t==="string"){var Me=Vt.toString;if(gt(Me)){var me=Me.call(Vt);if(!Mt(me))return me}var le=Vt.valueOf;if(gt(le)){var me=le.call(Vt);if(!Mt(me))return me}}else{var le=Vt.valueOf;if(gt(le)){var me=le.call(Vt);if(!Mt(me))return me}var be=Vt.toString;if(gt(be)){var me=be.call(Vt);if(!Mt(me))return me}}throw new TypeError}function rt(Vt){return!!Vt}function Pt(Vt){return""+Vt}function z(Vt){var $t=bt(Vt,3);return Rt($t)?$t:Pt($t)}function Q(Vt){return Array.isArray?Array.isArray(Vt):Vt instanceof Object?Vt instanceof Array:Object.prototype.toString.call(Vt)==="[object Array]"}function gt(Vt){return typeof Vt=="function"}function et(Vt){return typeof Vt=="function"}function ot(Vt){switch(ut(Vt)){case 3:return!0;case 4:return!0;default:return!1}}function xt(Vt,$t){var Me=Vt[$t];if(Me!=null){if(!gt(Me))throw new TypeError;return Me}}function H(Vt){var $t=xt(Vt,r);if(!gt($t))throw new TypeError;var Me=$t.call(Vt);if(!Mt(Me))throw new TypeError;return Me}function nt(Vt){return Vt.value}function at(Vt){var $t=Vt.next();return $t.done?!1:$t}function q(Vt){var $t=Vt.return;$t&&$t.call(Vt)}function _t(Vt){var $t=Object.getPrototypeOf(Vt);if(typeof Vt!="function"||Vt===o||$t!==o)return $t;var Me=Vt.prototype,me=Me&&Object.getPrototypeOf(Me);if(me==null||me===Object.prototype)return $t;var le=me.constructor;return typeof le!="function"||le===Vt?$t:le}function yt(){var Vt={},$t=[],Me=function(){function ze(Xe,Sn,Xn){this._index=0,this._keys=Xe,this._values=Sn,this._selector=Xn}return ze.prototype["@@iterator"]=function(){return this},ze.prototype[r]=function(){return this},ze.prototype.next=function(){var Xe=this._index;if(Xe>=0&&Xe<this._keys.length){var Sn=this._selector(this._keys[Xe],this._values[Xe]);return Xe+1>=this._keys.length?(this._index=-1,this._keys=$t,this._values=$t):this._index++,{value:Sn,done:!1}}return{value:void 0,done:!0}},ze.prototype.throw=function(Xe){throw this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),Xe},ze.prototype.return=function(Xe){return this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),{value:Xe,done:!0}},ze}();return function(){function ze(){this._keys=[],this._values=[],this._cacheKey=Vt,this._cacheIndex=-2}return Object.defineProperty(ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ze.prototype.has=function(Xe){return this._find(Xe,!1)>=0},ze.prototype.get=function(Xe){var Sn=this._find(Xe,!1);return Sn>=0?this._values[Sn]:void 0},ze.prototype.set=function(Xe,Sn){var Xn=this._find(Xe,!0);return this._values[Xn]=Sn,this},ze.prototype.delete=function(Xe){var Sn=this._find(Xe,!1);if(Sn>=0){for(var Xn=this._keys.length,Hn=Sn+1;Hn<Xn;Hn++)this._keys[Hn-1]=this._keys[Hn],this._values[Hn-1]=this._values[Hn];return this._keys.length--,this._values.length--,Xe===this._cacheKey&&(this._cacheKey=Vt,this._cacheIndex=-2),!0}return!1},ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Vt,this._cacheIndex=-2},ze.prototype.keys=function(){return new Me(this._keys,this._values,me)},ze.prototype.values=function(){return new Me(this._keys,this._values,le)},ze.prototype.entries=function(){return new Me(this._keys,this._values,be)},ze.prototype["@@iterator"]=function(){return this.entries()},ze.prototype[r]=function(){return this.entries()},ze.prototype._find=function(Xe,Sn){return this._cacheKey!==Xe&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Xe)),this._cacheIndex<0&&Sn&&(this._cacheIndex=this._keys.length,this._keys.push(Xe),this._values.push(void 0)),this._cacheIndex},ze}();function me(ze,Xe){return ze}function le(ze,Xe){return Xe}function be(ze,Xe){return[ze,Xe]}}function Ft(){return function(){function Vt(){this._map=new f}return Object.defineProperty(Vt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Vt.prototype.has=function($t){return this._map.has($t)},Vt.prototype.add=function($t){return this._map.set($t,$t),this},Vt.prototype.delete=function($t){return this._map.delete($t)},Vt.prototype.clear=function(){this._map.clear()},Vt.prototype.keys=function(){return this._map.keys()},Vt.prototype.values=function(){return this._map.values()},Vt.prototype.entries=function(){return this._map.entries()},Vt.prototype["@@iterator"]=function(){return this.keys()},Vt.prototype[r]=function(){return this.keys()},Vt}()}function Qt(){var Vt=16,$t=a.create(),Me=me();return function(){function Sn(){this._key=me()}return Sn.prototype.has=function(Xn){var Hn=le(Xn,!1);return Hn!==void 0?a.has(Hn,this._key):!1},Sn.prototype.get=function(Xn){var Hn=le(Xn,!1);return Hn!==void 0?a.get(Hn,this._key):void 0},Sn.prototype.set=function(Xn,Hn){var nn=le(Xn,!0);return nn[this._key]=Hn,this},Sn.prototype.delete=function(Xn){var Hn=le(Xn,!1);return Hn!==void 0?delete Hn[this._key]:!1},Sn.prototype.clear=function(){this._key=me()},Sn}();function me(){var Sn;do Sn="@@WeakMap@@"+Xe();while(a.has($t,Sn));return $t[Sn]=!0,Sn}function le(Sn,Xn){if(!l.call(Sn,Me)){if(!Xn)return;Object.defineProperty(Sn,Me,{value:a.create()})}return Sn[Me]}function be(Sn,Xn){for(var Hn=0;Hn<Xn;++Hn)Sn[Hn]=Math.random()*255|0;return Sn}function ze(Sn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Sn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Sn)):be(new Uint8Array(Sn),Sn):be(new Array(Sn),Sn)}function Xe(){var Sn=ze(Vt);Sn[6]=Sn[6]&79|64,Sn[8]=Sn[8]&191|128;for(var Xn="",Hn=0;Hn<Vt;++Hn){var nn=Sn[Hn];(Hn===4||Hn===6||Hn===8)&&(Xn+="-"),nn<16&&(Xn+="0"),Xn+=nn.toString(16).toLowerCase()}return Xn}}function ee(Vt){return Vt.__=void 0,delete Vt.__,Vt}})})(T||(T={}))}).call(this,R("Q2Ig"),R("IyRk"))},mTTR:function(Oe,mt,R){var U=R("b80T"),E=R("QcOe"),T=R("MMmD");function e(t){return T(t)?U(t,!0):E(t)}Oe.exports=e},mc0g:function(Oe,mt){function R(U){return function(E,T,e){for(var t=-1,l=Object(E),s=e(E),c=s.length;c--;){var r=s[U?c:++t];if(T(l[r],r,l)===!1)break}return E}}Oe.exports=R},mhV4:function(Oe,mt,R){var U=R("ZK94");Oe.exports.geometry=E,Oe.exports.ring=e;function E(l){var s=0,c;switch(l.type){case"Polygon":return T(l.coordinates);case"MultiPolygon":for(c=0;c<l.coordinates.length;c++)s+=T(l.coordinates[c]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(c=0;c<l.geometries.length;c++)s+=E(l.geometries[c]);return s}}function T(l){var s=0;if(l&&l.length>0){s+=Math.abs(e(l[0]));for(var c=1;c<l.length;c++)s-=Math.abs(e(l[c]))}return s}function e(l){var s,c,r,h,n,i,a,o=0,u=l.length;if(u>2){for(a=0;a<u;a++)a===u-2?(h=u-2,n=u-1,i=0):a===u-1?(h=u-1,n=0,i=1):(h=a,n=a+1,i=a+2),s=l[h],c=l[n],r=l[i],o+=(t(r[0])-t(s[0]))*Math.sin(t(c[1]));o=o*U.RADIUS*U.RADIUS/2}return o}function t(l){return l*Math.PI/180}},mpbz:function(Oe,mt,R){(function(U,E){Oe.exports=E()})(this,function(){"use strict";function U(S,P,A,O,L,W){if(!(L-O<=A)){var F=O+L>>1;E(S,P,F,O,L,W%2),U(S,P,A,O,F-1,W+1),U(S,P,A,F+1,L,W+1)}}function E(S,P,A,O,L,W){for(;L>O;){if(L-O>600){var F=L-O+1,K=A-O+1,V=Math.log(F),k=.5*Math.exp(2*V/3),Z=.5*Math.sqrt(V*k*(F-k)/F)*(K-F/2<0?-1:1),X=Math.max(O,Math.floor(A-K*k/F+Z)),it=Math.min(L,Math.floor(A+(F-K)*k/F+Z));E(S,P,A,X,it,W)}var ft=P[2*A+W],pt=O,ut=L;for(T(S,P,O,A),P[2*L+W]>ft&&T(S,P,O,L);pt<ut;){for(T(S,P,pt,ut),pt++,ut--;P[2*pt+W]<ft;)pt++;for(;P[2*ut+W]>ft;)ut--}P[2*O+W]===ft?T(S,P,O,ut):(ut++,T(S,P,ut,L)),ut<=A&&(O=ut+1),A<=ut&&(L=ut-1)}}function T(S,P,A,O){e(S,A,O),e(P,2*A,2*O),e(P,2*A+1,2*O+1)}function e(S,P,A){var O=S[P];S[P]=S[A],S[A]=O}function t(S,P,A,O,L,W,F){for(var K=[0,S.length-1,0],V=[],k,Z;K.length;){var X=K.pop(),it=K.pop(),ft=K.pop();if(it-ft<=F){for(var pt=ft;pt<=it;pt++)k=P[2*pt],Z=P[2*pt+1],k>=A&&k<=L&&Z>=O&&Z<=W&&V.push(S[pt]);continue}var ut=Math.floor((ft+it)/2);k=P[2*ut],Z=P[2*ut+1],k>=A&&k<=L&&Z>=O&&Z<=W&&V.push(S[ut]);var It=(X+1)%2;(X===0?A<=k:O<=Z)&&(K.push(ft),K.push(ut-1),K.push(It)),(X===0?L>=k:W>=Z)&&(K.push(ut+1),K.push(it),K.push(It))}return V}function l(S,P,A,O,L,W){for(var F=[0,S.length-1,0],K=[],V=L*L;F.length;){var k=F.pop(),Z=F.pop(),X=F.pop();if(Z-X<=W){for(var it=X;it<=Z;it++)s(P[2*it],P[2*it+1],A,O)<=V&&K.push(S[it]);continue}var ft=Math.floor((X+Z)/2),pt=P[2*ft],ut=P[2*ft+1];s(pt,ut,A,O)<=V&&K.push(S[ft]);var It=(k+1)%2;(k===0?A-L<=pt:O-L<=ut)&&(F.push(X),F.push(ft-1),F.push(It)),(k===0?A+L>=pt:O+L>=ut)&&(F.push(ft+1),F.push(Z),F.push(It))}return K}function s(S,P,A,O){var L=S-A,W=P-O;return L*L+W*W}var c=function(P){return P[0]},r=function(P){return P[1]},h=function(P,A,O,L,W){A===void 0&&(A=c),O===void 0&&(O=r),L===void 0&&(L=64),W===void 0&&(W=Float64Array),this.nodeSize=L,this.points=P;for(var F=P.length<65536?Uint16Array:Uint32Array,K=this.ids=new F(P.length),V=this.coords=new W(P.length*2),k=0;k<P.length;k++)K[k]=k,V[2*k]=A(P[k]),V[2*k+1]=O(P[k]);U(K,V,L,0,K.length-1,0)};h.prototype.range=function(P,A,O,L){return t(this.ids,this.coords,P,A,O,L,this.nodeSize)},h.prototype.within=function(P,A,O){return l(this.ids,this.coords,P,A,O,this.nodeSize)};var n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(P){return P}},i=Math.fround||function(S){return function(P){return S[0]=+P,S[0]}}(new Float32Array(1)),a=function(P){this.options=M(Object.create(n),P),this.trees=new Array(this.options.maxZoom+1)};a.prototype.load=function(P){var A=this.options,O=A.log,L=A.minZoom,W=A.maxZoom,F=A.nodeSize;O&&console.time("total time");var K="prepare "+P.length+" points";O&&console.time(K),this.points=P;for(var V=[],k=0;k<P.length;k++)!P[k].geometry||V.push(u(P[k],k));this.trees[W+1]=new h(V,x,m,F,Float32Array),O&&console.timeEnd(K);for(var Z=W;Z>=L;Z--){var X=+Date.now();V=this._cluster(V,Z),this.trees[Z]=new h(V,x,m,F,Float32Array),O&&console.log("z%d: %d clusters in %dms",Z,V.length,+Date.now()-X)}return O&&console.timeEnd("total time"),this},a.prototype.getClusters=function(P,A){var O=((P[0]+180)%360+360)%360-180,L=Math.max(-90,Math.min(90,P[1])),W=P[2]===180?180:((P[2]+180)%360+360)%360-180,F=Math.max(-90,Math.min(90,P[3]));if(P[2]-P[0]>=360)O=-180,W=180;else if(O>W){var K=this.getClusters([O,L,180,F],A),V=this.getClusters([-180,L,W,F],A);return K.concat(V)}for(var k=this.trees[this._limitZoom(A)],Z=k.range(b(O),y(F),b(W),y(L)),X=[],it=0,ft=Z;it<ft.length;it+=1){var pt=ft[it],ut=k.points[pt];X.push(ut.numPoints?f(ut):this.points[ut.index])}return X},a.prototype.getChildren=function(P){var A=this._getOriginId(P),O=this._getOriginZoom(P),L="No cluster with the specified id.",W=this.trees[O];if(!W)throw new Error(L);var F=W.points[A];if(!F)throw new Error(L);for(var K=this.options.radius/(this.options.extent*Math.pow(2,O-1)),V=W.within(F.x,F.y,K),k=[],Z=0,X=V;Z<X.length;Z+=1){var it=X[Z],ft=W.points[it];ft.parentId===P&&k.push(ft.numPoints?f(ft):this.points[ft.index])}if(k.length===0)throw new Error(L);return k},a.prototype.getLeaves=function(P,A,O){A=A||10,O=O||0;var L=[];return this._appendLeaves(L,P,A,O,0),L},a.prototype.getTile=function(P,A,O){var L=this.trees[this._limitZoom(P)],W=Math.pow(2,P),F=this.options,K=F.extent,V=F.radius,k=V/K,Z=(O-k)/W,X=(O+1+k)/W,it={features:[]};return this._addTileFeatures(L.range((A-k)/W,Z,(A+1+k)/W,X),L.points,A,O,W,it),A===0&&this._addTileFeatures(L.range(1-k/W,Z,1,X),L.points,W,O,W,it),A===W-1&&this._addTileFeatures(L.range(0,Z,k/W,X),L.points,-1,O,W,it),it.features.length?it:null},a.prototype.getClusterExpansionZoom=function(P){for(var A=this._getOriginZoom(P)-1;A<=this.options.maxZoom;){var O=this.getChildren(P);if(A++,O.length!==1)break;P=O[0].properties.cluster_id}return A},a.prototype._appendLeaves=function(P,A,O,L,W){for(var F=this.getChildren(A),K=0,V=F;K<V.length;K+=1){var k=V[K],Z=k.properties;if(Z&&Z.cluster?W+Z.point_count<=L?W+=Z.point_count:W=this._appendLeaves(P,Z.cluster_id,O,L,W):W<L?W++:P.push(k),P.length===O)break}return W},a.prototype._addTileFeatures=function(P,A,O,L,W,F){for(var K=0,V=P;K<V.length;K+=1){var k=V[K],Z=A[k],X=Z.numPoints,it=void 0,ft=void 0,pt=void 0;if(X)it=v(Z),ft=Z.x,pt=Z.y;else{var ut=this.points[Z.index];it=ut.properties,ft=b(ut.geometry.coordinates[0]),pt=y(ut.geometry.coordinates[1])}var It={type:1,geometry:[[Math.round(this.options.extent*(ft*W-O)),Math.round(this.options.extent*(pt*W-L))]],tags:it},Nt=void 0;X?Nt=Z.id:this.options.generateId?Nt=Z.index:this.points[Z.index].id&&(Nt=this.points[Z.index].id),Nt!==void 0&&(It.id=Nt),F.features.push(It)}},a.prototype._limitZoom=function(P){return Math.max(this.options.minZoom,Math.min(+P,this.options.maxZoom+1))},a.prototype._cluster=function(P,A){for(var O=[],L=this.options,W=L.radius,F=L.extent,K=L.reduce,V=L.minPoints,k=W/(F*Math.pow(2,A)),Z=0;Z<P.length;Z++){var X=P[Z];if(!(X.zoom<=A)){X.zoom=A;for(var it=this.trees[A+1],ft=it.within(X.x,X.y,k),pt=X.numPoints||1,ut=pt,It=0,Nt=ft;It<Nt.length;It+=1){var Rt=Nt[It],Mt=it.points[Rt];Mt.zoom>A&&(ut+=Mt.numPoints||1)}if(ut>=V){for(var bt=X.x*pt,At=X.y*pt,rt=K&&pt>1?this._map(X,!0):null,Pt=(Z<<5)+(A+1)+this.points.length,z=0,Q=ft;z<Q.length;z+=1){var gt=Q[z],et=it.points[gt];if(!(et.zoom<=A)){et.zoom=A;var ot=et.numPoints||1;bt+=et.x*ot,At+=et.y*ot,et.parentId=Pt,K&&(rt||(rt=this._map(X,!0)),K(rt,this._map(et)))}}X.parentId=Pt,O.push(o(bt/ut,At/ut,Pt,ut,rt))}else if(O.push(X),ut>1)for(var xt=0,H=ft;xt<H.length;xt+=1){var nt=H[xt],at=it.points[nt];at.zoom<=A||(at.zoom=A,O.push(at))}}}return O},a.prototype._getOriginId=function(P){return P-this.points.length>>5},a.prototype._getOriginZoom=function(P){return(P-this.points.length)%32},a.prototype._map=function(P,A){if(P.numPoints)return A?M({},P.properties):P.properties;var O=this.points[P.index].properties,L=this.options.map(O);return A&&L===O?M({},L):L};function o(S,P,A,O,L){return{x:i(S),y:i(P),zoom:Infinity,id:A,parentId:-1,numPoints:O,properties:L}}function u(S,P){var A=S.geometry.coordinates,O=A[0],L=A[1];return{x:i(b(O)),y:i(y(L)),zoom:Infinity,index:P,parentId:-1}}function f(S){return{type:"Feature",id:S.id,properties:v(S),geometry:{type:"Point",coordinates:[g(S.x),_(S.y)]}}}function v(S){var P=S.numPoints,A=P>=1e4?Math.round(P/1e3)+"k":P>=1e3?Math.round(P/100)/10+"k":P;return M(M({},S.properties),{cluster:!0,cluster_id:S.id,point_count:P,point_count_abbreviated:A})}function b(S){return S/360+.5}function y(S){var P=Math.sin(S*Math.PI/180),A=.5-.25*Math.log((1+P)/(1-P))/Math.PI;return A<0?0:A>1?1:A}function g(S){return(S-.5)*360}function _(S){var P=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(P))/Math.PI-90}function M(S,P){for(var A in P)S[A]=P[A];return S}function x(S){return S.x}function m(S){return S.y}return a})},"mv/X":function(Oe,mt,R){var U=R("ljhN"),E=R("MMmD"),T=R("wJg7"),e=R("GoyQ");function t(l,s,c){if(!e(c))return!1;var r=typeof s;return(r=="number"?E(c)&&T(s,c.length):r=="string"&&s in c)?U(c[s],l):!1}Oe.exports=t},"n+fv":function(Oe,mt,R){"use strict";R.r(mt),R.d(mt,"create",function(){return E}),R.d(mt,"clone",function(){return T}),R.d(mt,"length",function(){return e}),R.d(mt,"fromValues",function(){return t}),R.d(mt,"copy",function(){return l}),R.d(mt,"set",function(){return s}),R.d(mt,"add",function(){return c}),R.d(mt,"subtract",function(){return r}),R.d(mt,"multiply",function(){return h}),R.d(mt,"divide",function(){return n}),R.d(mt,"ceil",function(){return i}),R.d(mt,"floor",function(){return a}),R.d(mt,"min",function(){return o}),R.d(mt,"max",function(){return u}),R.d(mt,"round",function(){return f}),R.d(mt,"scale",function(){return v}),R.d(mt,"scaleAndAdd",function(){return b}),R.d(mt,"distance",function(){return y}),R.d(mt,"squaredDistance",function(){return g}),R.d(mt,"squaredLength",function(){return _}),R.d(mt,"negate",function(){return M}),R.d(mt,"inverse",function(){return x}),R.d(mt,"normalize",function(){return m}),R.d(mt,"dot",function(){return S}),R.d(mt,"cross",function(){return P}),R.d(mt,"lerp",function(){return A}),R.d(mt,"hermite",function(){return O}),R.d(mt,"bezier",function(){return L}),R.d(mt,"random",function(){return W}),R.d(mt,"transformMat4",function(){return F}),R.d(mt,"transformMat3",function(){return K}),R.d(mt,"transformQuat",function(){return V}),R.d(mt,"rotateX",function(){return k}),R.d(mt,"rotateY",function(){return Z}),R.d(mt,"rotateZ",function(){return X}),R.d(mt,"angle",function(){return it}),R.d(mt,"zero",function(){return ft}),R.d(mt,"str",function(){return pt}),R.d(mt,"exactEquals",function(){return ut}),R.d(mt,"equals",function(){return It}),R.d(mt,"sub",function(){return Nt}),R.d(mt,"mul",function(){return Rt}),R.d(mt,"div",function(){return Mt}),R.d(mt,"dist",function(){return bt}),R.d(mt,"sqrDist",function(){return At}),R.d(mt,"len",function(){return rt}),R.d(mt,"sqrLen",function(){return Pt}),R.d(mt,"forEach",function(){return z});var U=R("yU0y");function E(){var Q=new U.a(3);return U.a!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0),Q}function T(Q){var gt=new U.a(3);return gt[0]=Q[0],gt[1]=Q[1],gt[2]=Q[2],gt}function e(Q){var gt=Q[0],et=Q[1],ot=Q[2];return Math.hypot(gt,et,ot)}function t(Q,gt,et){var ot=new U.a(3);return ot[0]=Q,ot[1]=gt,ot[2]=et,ot}function l(Q,gt){return Q[0]=gt[0],Q[1]=gt[1],Q[2]=gt[2],Q}function s(Q,gt,et,ot){return Q[0]=gt,Q[1]=et,Q[2]=ot,Q}function c(Q,gt,et){return Q[0]=gt[0]+et[0],Q[1]=gt[1]+et[1],Q[2]=gt[2]+et[2],Q}function r(Q,gt,et){return Q[0]=gt[0]-et[0],Q[1]=gt[1]-et[1],Q[2]=gt[2]-et[2],Q}function h(Q,gt,et){return Q[0]=gt[0]*et[0],Q[1]=gt[1]*et[1],Q[2]=gt[2]*et[2],Q}function n(Q,gt,et){return Q[0]=gt[0]/et[0],Q[1]=gt[1]/et[1],Q[2]=gt[2]/et[2],Q}function i(Q,gt){return Q[0]=Math.ceil(gt[0]),Q[1]=Math.ceil(gt[1]),Q[2]=Math.ceil(gt[2]),Q}function a(Q,gt){return Q[0]=Math.floor(gt[0]),Q[1]=Math.floor(gt[1]),Q[2]=Math.floor(gt[2]),Q}function o(Q,gt,et){return Q[0]=Math.min(gt[0],et[0]),Q[1]=Math.min(gt[1],et[1]),Q[2]=Math.min(gt[2],et[2]),Q}function u(Q,gt,et){return Q[0]=Math.max(gt[0],et[0]),Q[1]=Math.max(gt[1],et[1]),Q[2]=Math.max(gt[2],et[2]),Q}function f(Q,gt){return Q[0]=Math.round(gt[0]),Q[1]=Math.round(gt[1]),Q[2]=Math.round(gt[2]),Q}function v(Q,gt,et){return Q[0]=gt[0]*et,Q[1]=gt[1]*et,Q[2]=gt[2]*et,Q}function b(Q,gt,et,ot){return Q[0]=gt[0]+et[0]*ot,Q[1]=gt[1]+et[1]*ot,Q[2]=gt[2]+et[2]*ot,Q}function y(Q,gt){var et=gt[0]-Q[0],ot=gt[1]-Q[1],xt=gt[2]-Q[2];return Math.hypot(et,ot,xt)}function g(Q,gt){var et=gt[0]-Q[0],ot=gt[1]-Q[1],xt=gt[2]-Q[2];return et*et+ot*ot+xt*xt}function _(Q){var gt=Q[0],et=Q[1],ot=Q[2];return gt*gt+et*et+ot*ot}function M(Q,gt){return Q[0]=-gt[0],Q[1]=-gt[1],Q[2]=-gt[2],Q}function x(Q,gt){return Q[0]=1/gt[0],Q[1]=1/gt[1],Q[2]=1/gt[2],Q}function m(Q,gt){var et=gt[0],ot=gt[1],xt=gt[2],H=et*et+ot*ot+xt*xt;return H>0&&(H=1/Math.sqrt(H)),Q[0]=gt[0]*H,Q[1]=gt[1]*H,Q[2]=gt[2]*H,Q}function S(Q,gt){return Q[0]*gt[0]+Q[1]*gt[1]+Q[2]*gt[2]}function P(Q,gt,et){var ot=gt[0],xt=gt[1],H=gt[2],nt=et[0],at=et[1],q=et[2];return Q[0]=xt*q-H*at,Q[1]=H*nt-ot*q,Q[2]=ot*at-xt*nt,Q}function A(Q,gt,et,ot){var xt=gt[0],H=gt[1],nt=gt[2];return Q[0]=xt+ot*(et[0]-xt),Q[1]=H+ot*(et[1]-H),Q[2]=nt+ot*(et[2]-nt),Q}function O(Q,gt,et,ot,xt,H){var nt=H*H,at=nt*(2*H-3)+1,q=nt*(H-2)+H,_t=nt*(H-1),yt=nt*(3-2*H);return Q[0]=gt[0]*at+et[0]*q+ot[0]*_t+xt[0]*yt,Q[1]=gt[1]*at+et[1]*q+ot[1]*_t+xt[1]*yt,Q[2]=gt[2]*at+et[2]*q+ot[2]*_t+xt[2]*yt,Q}function L(Q,gt,et,ot,xt,H){var nt=1-H,at=nt*nt,q=H*H,_t=at*nt,yt=3*H*at,Ft=3*q*nt,Qt=q*H;return Q[0]=gt[0]*_t+et[0]*yt+ot[0]*Ft+xt[0]*Qt,Q[1]=gt[1]*_t+et[1]*yt+ot[1]*Ft+xt[1]*Qt,Q[2]=gt[2]*_t+et[2]*yt+ot[2]*Ft+xt[2]*Qt,Q}function W(Q,gt){gt=gt||1;var et=U.c()*2*Math.PI,ot=U.c()*2-1,xt=Math.sqrt(1-ot*ot)*gt;return Q[0]=Math.cos(et)*xt,Q[1]=Math.sin(et)*xt,Q[2]=ot*gt,Q}function F(Q,gt,et){var ot=gt[0],xt=gt[1],H=gt[2],nt=et[3]*ot+et[7]*xt+et[11]*H+et[15];return nt=nt||1,Q[0]=(et[0]*ot+et[4]*xt+et[8]*H+et[12])/nt,Q[1]=(et[1]*ot+et[5]*xt+et[9]*H+et[13])/nt,Q[2]=(et[2]*ot+et[6]*xt+et[10]*H+et[14])/nt,Q}function K(Q,gt,et){var ot=gt[0],xt=gt[1],H=gt[2];return Q[0]=ot*et[0]+xt*et[3]+H*et[6],Q[1]=ot*et[1]+xt*et[4]+H*et[7],Q[2]=ot*et[2]+xt*et[5]+H*et[8],Q}function V(Q,gt,et){var ot=et[0],xt=et[1],H=et[2],nt=et[3],at=gt[0],q=gt[1],_t=gt[2],yt=xt*_t-H*q,Ft=H*at-ot*_t,Qt=ot*q-xt*at,ee=xt*Qt-H*Ft,Vt=H*yt-ot*Qt,$t=ot*Ft-xt*yt,Me=nt*2;return yt*=Me,Ft*=Me,Qt*=Me,ee*=2,Vt*=2,$t*=2,Q[0]=at+yt+ee,Q[1]=q+Ft+Vt,Q[2]=_t+Qt+$t,Q}function k(Q,gt,et,ot){var xt=[],H=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],H[0]=xt[0],H[1]=xt[1]*Math.cos(ot)-xt[2]*Math.sin(ot),H[2]=xt[1]*Math.sin(ot)+xt[2]*Math.cos(ot),Q[0]=H[0]+et[0],Q[1]=H[1]+et[1],Q[2]=H[2]+et[2],Q}function Z(Q,gt,et,ot){var xt=[],H=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],H[0]=xt[2]*Math.sin(ot)+xt[0]*Math.cos(ot),H[1]=xt[1],H[2]=xt[2]*Math.cos(ot)-xt[0]*Math.sin(ot),Q[0]=H[0]+et[0],Q[1]=H[1]+et[1],Q[2]=H[2]+et[2],Q}function X(Q,gt,et,ot){var xt=[],H=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],H[0]=xt[0]*Math.cos(ot)-xt[1]*Math.sin(ot),H[1]=xt[0]*Math.sin(ot)+xt[1]*Math.cos(ot),H[2]=xt[2],Q[0]=H[0]+et[0],Q[1]=H[1]+et[1],Q[2]=H[2]+et[2],Q}function it(Q,gt){var et=Q[0],ot=Q[1],xt=Q[2],H=gt[0],nt=gt[1],at=gt[2],q=Math.sqrt(et*et+ot*ot+xt*xt),_t=Math.sqrt(H*H+nt*nt+at*at),yt=q*_t,Ft=yt&&S(Q,gt)/yt;return Math.acos(Math.min(Math.max(Ft,-1),1))}function ft(Q){return Q[0]=0,Q[1]=0,Q[2]=0,Q}function pt(Q){return"vec3("+Q[0]+", "+Q[1]+", "+Q[2]+")"}function ut(Q,gt){return Q[0]===gt[0]&&Q[1]===gt[1]&&Q[2]===gt[2]}function It(Q,gt){var et=Q[0],ot=Q[1],xt=Q[2],H=gt[0],nt=gt[1],at=gt[2];return Math.abs(et-H)<=U.b*Math.max(1,Math.abs(et),Math.abs(H))&&Math.abs(ot-nt)<=U.b*Math.max(1,Math.abs(ot),Math.abs(nt))&&Math.abs(xt-at)<=U.b*Math.max(1,Math.abs(xt),Math.abs(at))}var Nt=r,Rt=h,Mt=n,bt=y,At=g,rt=e,Pt=_,z=function(){var Q=E();return function(gt,et,ot,xt,H,nt){var at,q;for(et||(et=3),ot||(ot=0),xt?q=Math.min(xt*et+ot,gt.length):q=gt.length,at=ot;at<q;at+=et)Q[0]=gt[at],Q[1]=gt[at+1],Q[2]=gt[at+2],H(Q,Q,nt),gt[at]=Q[0],gt[at+1]=Q[1],gt[at+2]=Q[2];return gt}}()},n2J3:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.unmanaged=void 0;var U=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,l,s){var c=new E.Metadata(U.UNMANAGED_TAG,!0);T.tagParameter(t,l,s,c)}}mt.unmanaged=e},n3AX:function(Oe,mt,R){var U=R("Nsbk");function E(T,e){for(;!Object.prototype.hasOwnProperty.call(T,e)&&(T=U(T),T!==null););return T}Oe.exports=E,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},"o+pz":function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return U});var U;(function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(U||(U={}))},"oCl/":function(Oe,mt,R){var U=R("CH3K"),E=R("LcsW"),T=R("MvSz"),e=R("0ycA"),t=Object.getOwnPropertySymbols,l=t?function(s){for(var c=[];s;)U(c,T(s)),s=E(s);return c}:e;Oe.exports=l},oIFs:function(Oe,mt,R){},oShl:function(Oe,mt,R){var U=R("Nsbk"),E=R("SksO"),T=R("xfeJ"),e=R("sXyB");function t(l){var s=typeof Map=="function"?new Map:void 0;return Oe.exports=t=function(r){if(r===null||!T(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(r))return s.get(r);s.set(r,h)}function h(){return e(r,arguments,U(this).constructor)}return h.prototype=Object.create(r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),E(h,r)},Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0,t(l)}Oe.exports=t,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},oaX6:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.targetName=void 0;var U=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.NAME_TAG,t);T.tagParameter(l,s,c,r)}}mt.targetName=e},"otv/":function(Oe,mt,R){var U=R("nmnc"),E=U?U.prototype:void 0,T=E?E.valueOf:void 0;function e(t){return T?Object(T.call(t)):{}}Oe.exports=e},"oy+k":function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Context=void 0;var U=R("d9O0"),E=function(){function T(e){this.id=U.id(),this.container=e}return T.prototype.addPlan=function(e){this.plan=e},T.prototype.setCurrentRequest=function(e){this.currentRequest=e},T}();mt.Context=E},pFRH:function(Oe,mt,R){var U=R("cvCv"),E=R("O0oS"),T=R("zZ0H"),e=E?function(t,l){return E(t,"toString",{configurable:!0,enumerable:!1,value:U(l),writable:!0})}:T;Oe.exports=e},q4HE:function(Oe,mt){var R="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",u="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+u+o+")*",v=u+o+f,b="(?:"+[h+s+"?",s,n,i,l].join("|")+")",y=RegExp(c+"(?="+c+")|"+b+v,"g");function g(_){for(var M=y.lastIndex=0;y.test(_);)++M;return M}Oe.exports=g},qK8v:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.isStackOverflowExeption=void 0;var U=R("MON2");function E(T){return T instanceof RangeError||T.message===U.STACK_OVERFLOW}mt.isStackOverflowExeption=E},qRkn:function(Oe,mt,R){var U=R("3cYt"),E={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},T=U(E);Oe.exports=T},qd8s:function(Oe,mt,R){(function(U,E){var T=200,e="__lodash_hash_undefined__",t=800,l=16,s=9007199254740991,c="[object Arguments]",r="[object Array]",h="[object AsyncFunction]",n="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Function]",u="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Null]",y="[object Object]",g="[object Proxy]",_="[object RegExp]",M="[object Set]",x="[object String]",m="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",L="[object Float64Array]",W="[object Int8Array]",F="[object Int16Array]",K="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",Z="[object Uint16Array]",X="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ft=/^\[object .+?Constructor\]$/,pt=/^(?:0|[1-9]\d*)$/,ut={};ut[O]=ut[L]=ut[W]=ut[F]=ut[K]=ut[V]=ut[k]=ut[Z]=ut[X]=!0,ut[c]=ut[r]=ut[P]=ut[n]=ut[A]=ut[i]=ut[a]=ut[o]=ut[f]=ut[v]=ut[y]=ut[_]=ut[M]=ut[x]=ut[S]=!1;var It=typeof U=="object"&&U&&U.Object===Object&&U,Nt=typeof self=="object"&&self&&self.Object===Object&&self,Rt=It||Nt||Function("return this")(),Mt=mt&&!mt.nodeType&&mt,bt=Mt&&typeof E=="object"&&E&&!E.nodeType&&E,At=bt&&bt.exports===Mt,rt=At&&It.process,Pt=function(){try{var mn=bt&&bt.require&&bt.require("util").types;return mn||rt&&rt.binding&&rt.binding("util")}catch(hr){}}(),z=Pt&&Pt.isTypedArray;function Q(mn,hr,Gr){switch(Gr.length){case 0:return mn.call(hr);case 1:return mn.call(hr,Gr[0]);case 2:return mn.call(hr,Gr[0],Gr[1]);case 3:return mn.call(hr,Gr[0],Gr[1],Gr[2])}return mn.apply(hr,Gr)}function gt(mn,hr){for(var Gr=-1,Ui=Array(mn);++Gr<mn;)Ui[Gr]=hr(Gr);return Ui}function et(mn){return function(hr){return mn(hr)}}function ot(mn,hr){return mn==null?void 0:mn[hr]}function xt(mn,hr){return function(Gr){return mn(hr(Gr))}}var H=Array.prototype,nt=Function.prototype,at=Object.prototype,q=Rt["__core-js_shared__"],_t=nt.toString,yt=at.hasOwnProperty,Ft=function(){var mn=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return mn?"Symbol(src)_1."+mn:""}(),Qt=at.toString,ee=_t.call(Object),Vt=RegExp("^"+_t.call(yt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=At?Rt.Buffer:void 0,Me=Rt.Symbol,me=Rt.Uint8Array,le=$t?$t.allocUnsafe:void 0,be=xt(Object.getPrototypeOf,Object),ze=Object.create,Xe=at.propertyIsEnumerable,Sn=H.splice,Xn=Me?Me.toStringTag:void 0,Hn=function(){try{var mn=fu(Object,"defineProperty");return mn({},"",{}),mn}catch(hr){}}(),nn=$t?$t.isBuffer:void 0,en=Math.max,An=Date.now,Nn=fu(Rt,"Map"),fr=fu(Object,"create"),hi=function(){function mn(){}return function(hr){if(!Ja(hr))return{};if(ze)return ze(hr);mn.prototype=hr;var Gr=new mn;return mn.prototype=void 0,Gr}}();function Ce(mn){var hr=-1,Gr=mn==null?0:mn.length;for(this.clear();++hr<Gr;){var Ui=mn[hr];this.set(Ui[0],Ui[1])}}function Te(){this.__data__=fr?fr(null):{},this.size=0}function Jt(mn){var hr=this.has(mn)&&delete this.__data__[mn];return this.size-=hr?1:0,hr}function pe(mn){var hr=this.__data__;if(fr){var Gr=hr[mn];return Gr===e?void 0:Gr}return yt.call(hr,mn)?hr[mn]:void 0}function Wt(mn){var hr=this.__data__;return fr?hr[mn]!==void 0:yt.call(hr,mn)}function ie(mn,hr){var Gr=this.__data__;return this.size+=this.has(mn)?0:1,Gr[mn]=fr&&hr===void 0?e:hr,this}Ce.prototype.clear=Te,Ce.prototype.delete=Jt,Ce.prototype.get=pe,Ce.prototype.has=Wt,Ce.prototype.set=ie;function Ae(mn){var hr=-1,Gr=mn==null?0:mn.length;for(this.clear();++hr<Gr;){var Ui=mn[hr];this.set(Ui[0],Ui[1])}}function ue(){this.__data__=[],this.size=0}function xe(mn){var hr=this.__data__,Gr=ir(hr,mn);if(Gr<0)return!1;var Ui=hr.length-1;return Gr==Ui?hr.pop():Sn.call(hr,Gr,1),--this.size,!0}function $e(mn){var hr=this.__data__,Gr=ir(hr,mn);return Gr<0?void 0:hr[Gr][1]}function Fn(mn){return ir(this.__data__,mn)>-1}function or(mn,hr){var Gr=this.__data__,Ui=ir(Gr,mn);return Ui<0?(++this.size,Gr.push([mn,hr])):Gr[Ui][1]=hr,this}Ae.prototype.clear=ue,Ae.prototype.delete=xe,Ae.prototype.get=$e,Ae.prototype.has=Fn,Ae.prototype.set=or;function En(mn){var hr=-1,Gr=mn==null?0:mn.length;for(this.clear();++hr<Gr;){var Ui=mn[hr];this.set(Ui[0],Ui[1])}}function Pn(){this.size=0,this.__data__={hash:new Ce,map:new(Nn||Ae),string:new Ce}}function br(mn){var hr=Ro(this,mn).delete(mn);return this.size-=hr?1:0,hr}function Pr(mn){return Ro(this,mn).get(mn)}function ln(mn){return Ro(this,mn).has(mn)}function Cr(mn,hr){var Gr=Ro(this,mn),Ui=Gr.size;return Gr.set(mn,hr),this.size+=Gr.size==Ui?0:1,this}En.prototype.clear=Pn,En.prototype.delete=br,En.prototype.get=Pr,En.prototype.has=ln,En.prototype.set=Cr;function Ar(mn){var hr=this.__data__=new Ae(mn);this.size=hr.size}function Be(){this.__data__=new Ae,this.size=0}function We(mn){var hr=this.__data__,Gr=hr.delete(mn);return this.size=hr.size,Gr}function Ye(mn){return this.__data__.get(mn)}function fn(mn){return this.__data__.has(mn)}function gn(mn,hr){var Gr=this.__data__;if(Gr instanceof Ae){var Ui=Gr.__data__;if(!Nn||Ui.length<T-1)return Ui.push([mn,hr]),this.size=++Gr.size,this;Gr=this.__data__=new En(Ui)}return Gr.set(mn,hr),this.size=Gr.size,this}Ar.prototype.clear=Be,Ar.prototype.delete=We,Ar.prototype.get=Ye,Ar.prototype.has=fn,Ar.prototype.set=gn;function Bn(mn,hr){var Gr=Xa(mn),Ui=!Gr&&oa(mn),Ka=!Gr&&!Ui&&Ba(mn),xo=!Gr&&!Ui&&!Ka&&Do(mn),vo=Gr||Ui||Ka||xo,qi=vo?gt(mn.length,String):[],Qa=qi.length;for(var bs in mn)(hr||yt.call(mn,bs))&&!(vo&&(bs=="length"||Ka&&(bs=="offset"||bs=="parent")||xo&&(bs=="buffer"||bs=="byteLength"||bs=="byteOffset")||$s(bs,Qa)))&&qi.push(bs);return qi}function bn(mn,hr,Gr){(Gr!==void 0&&!ki(mn[hr],Gr)||Gr===void 0&&!(hr in mn))&&Yn(mn,hr,Gr)}function Ln(mn,hr,Gr){var Ui=mn[hr];(!(yt.call(mn,hr)&&ki(Ui,Gr))||Gr===void 0&&!(hr in mn))&&Yn(mn,hr,Gr)}function ir(mn,hr){for(var Gr=mn.length;Gr--;)if(ki(mn[Gr][0],hr))return Gr;return-1}function Yn(mn,hr,Gr){hr=="__proto__"&&Hn?Hn(mn,hr,{configurable:!0,enumerable:!0,value:Gr,writable:!0}):mn[hr]=Gr}var _n=zo();function Dr(mn){return mn==null?mn===void 0?m:b:Xn&&Xn in Object(mn)?Xo(mn):zn(mn)}function vr(mn){return _o(mn)&&Dr(mn)==c}function zr(mn){if(!Ja(mn)||Ht(mn))return!1;var hr=ao(mn)?Vt:ft;return hr.test(Ci(mn))}function Ai(mn){return _o(mn)&&yo(mn.length)&&!!ut[Dr(mn)]}function Aa(mn){if(!Ja(mn))return an(mn);var hr=Ee(mn),Gr=[];for(var Ui in mn)Ui=="constructor"&&(hr||!yt.call(mn,Ui))||Gr.push(Ui);return Gr}function ka(mn,hr,Gr,Ui,Ka){mn!==hr&&_n(hr,function(xo,vo){if(Ka||(Ka=new Ar),Ja(xo))eo(mn,hr,vo,Gr,ka,Ui,Ka);else{var qi=Ui?Ui(Un(mn,vo),xo,vo+"",mn,hr,Ka):void 0;qi===void 0&&(qi=xo),bn(mn,vo,qi)}},Mo)}function eo(mn,hr,Gr,Ui,Ka,xo,vo){var qi=Un(mn,Gr),Qa=Un(hr,Gr),bs=vo.get(Qa);if(bs){bn(mn,Gr,bs);return}var Es=xo?xo(qi,Qa,Gr+"",mn,hr,vo):void 0,Ga=Es===void 0;if(Ga){var Pu=Xa(Qa),Uo=!Pu&&Ba(Qa),Ps=!Pu&&!Uo&&Do(Qa);Es=Qa,Pu||Uo||Ps?Xa(qi)?Es=qi:mo(qi)?Es=So(qi):Uo?(Ga=!1,Es=so(Qa,!0)):Ps?(Ga=!1,Es=no(Qa,!0)):Es=[]:ts(Qa)||oa(Qa)?(Es=qi,oa(qi)?Es=xs(qi):(!Ja(qi)||ao(qi))&&(Es=au(Qa))):Ga=!1}Ga&&(vo.set(Qa,Es),Ka(Es,Qa,Ui,xo,vo),vo.delete(Qa)),bn(mn,Gr,Es)}function Zo(mn,hr){return Jr(qn(mn,hr,as),mn+"")}var Ea=Hn?function(mn,hr){return Hn(mn,"toString",{configurable:!0,enumerable:!1,value:Ms(hr),writable:!0})}:as;function so(mn,hr){if(hr)return mn.slice();var Gr=mn.length,Ui=le?le(Gr):new mn.constructor(Gr);return mn.copy(Ui),Ui}function Ko(mn){var hr=new mn.constructor(mn.byteLength);return new me(hr).set(new me(mn)),hr}function no(mn,hr){var Gr=hr?Ko(mn.buffer):mn.buffer;return new mn.constructor(Gr,mn.byteOffset,mn.length)}function So(mn,hr){var Gr=-1,Ui=mn.length;for(hr||(hr=Array(Ui));++Gr<Ui;)hr[Gr]=mn[Gr];return hr}function cs(mn,hr,Gr,Ui){var Ka=!Gr;Gr||(Gr={});for(var xo=-1,vo=hr.length;++xo<vo;){var qi=hr[xo],Qa=Ui?Ui(Gr[qi],mn[qi],qi,Gr,mn):void 0;Qa===void 0&&(Qa=mn[qi]),Ka?Yn(Gr,qi,Qa):Ln(Gr,qi,Qa)}return Gr}function wa(mn){return Zo(function(hr,Gr){var Ui=-1,Ka=Gr.length,xo=Ka>1?Gr[Ka-1]:void 0,vo=Ka>2?Gr[2]:void 0;for(xo=mn.length>3&&typeof xo=="function"?(Ka--,xo):void 0,vo&&Ne(Gr[0],Gr[1],vo)&&(xo=Ka<3?void 0:xo,Ka=1),hr=Object(hr);++Ui<Ka;){var qi=Gr[Ui];qi&&mn(hr,qi,Ui,xo)}return hr})}function zo(mn){return function(hr,Gr,Ui){for(var Ka=-1,xo=Object(hr),vo=Ui(hr),qi=vo.length;qi--;){var Qa=vo[mn?qi:++Ka];if(Gr(xo[Qa],Qa,xo)===!1)break}return hr}}function Ro(mn,hr){var Gr=mn.__data__;return oe(hr)?Gr[typeof hr=="string"?"string":"hash"]:Gr.map}function fu(mn,hr){var Gr=ot(mn,hr);return zr(Gr)?Gr:void 0}function Xo(mn){var hr=yt.call(mn,Xn),Gr=mn[Xn];try{mn[Xn]=void 0;var Ui=!0}catch(xo){}var Ka=Qt.call(mn);return Ui&&(hr?mn[Xn]=Gr:delete mn[Xn]),Ka}function au(mn){return typeof mn.constructor=="function"&&!Ee(mn)?hi(be(mn)):{}}function $s(mn,hr){var Gr=typeof mn;return hr=hr==null?s:hr,!!hr&&(Gr=="number"||Gr!="symbol"&&pt.test(mn))&&mn>-1&&mn%1==0&&mn<hr}function Ne(mn,hr,Gr){if(!Ja(Gr))return!1;var Ui=typeof hr;return(Ui=="number"?ma(Gr)&&$s(hr,Gr.length):Ui=="string"&&hr in Gr)?ki(Gr[hr],mn):!1}function oe(mn){var hr=typeof mn;return hr=="string"||hr=="number"||hr=="symbol"||hr=="boolean"?mn!=="__proto__":mn===null}function Ht(mn){return!!Ft&&Ft in mn}function Ee(mn){var hr=mn&&mn.constructor,Gr=typeof hr=="function"&&hr.prototype||at;return mn===Gr}function an(mn){var hr=[];if(mn!=null)for(var Gr in Object(mn))hr.push(Gr);return hr}function zn(mn){return Qt.call(mn)}function qn(mn,hr,Gr){return hr=en(hr===void 0?mn.length-1:hr,0),function(){for(var Ui=arguments,Ka=-1,xo=en(Ui.length-hr,0),vo=Array(xo);++Ka<xo;)vo[Ka]=Ui[hr+Ka];Ka=-1;for(var qi=Array(hr+1);++Ka<hr;)qi[Ka]=Ui[Ka];return qi[hr]=Gr(vo),Q(mn,this,qi)}}function Un(mn,hr){if(!(hr==="constructor"&&typeof mn[hr]=="function")&&hr!="__proto__")return mn[hr]}var Jr=Si(Ea);function Si(mn){var hr=0,Gr=0;return function(){var Ui=An(),Ka=l-(Ui-Gr);if(Gr=Ui,Ka>0){if(++hr>=t)return arguments[0]}else hr=0;return mn.apply(void 0,arguments)}}function Ci(mn){if(mn!=null){try{return _t.call(mn)}catch(hr){}try{return mn+""}catch(hr){}}return""}function ki(mn,hr){return mn===hr||mn!==mn&&hr!==hr}var oa=vr(function(){return arguments}())?vr:function(mn){return _o(mn)&&yt.call(mn,"callee")&&!Xe.call(mn,"callee")},Xa=Array.isArray;function ma(mn){return mn!=null&&yo(mn.length)&&!ao(mn)}function mo(mn){return _o(mn)&&ma(mn)}var Ba=nn||Ca;function ao(mn){if(!Ja(mn))return!1;var hr=Dr(mn);return hr==o||hr==u||hr==h||hr==g}function yo(mn){return typeof mn=="number"&&mn>-1&&mn%1==0&&mn<=s}function Ja(mn){var hr=typeof mn;return mn!=null&&(hr=="object"||hr=="function")}function _o(mn){return mn!=null&&typeof mn=="object"}function ts(mn){if(!_o(mn)||Dr(mn)!=y)return!1;var hr=be(mn);if(hr===null)return!0;var Gr=yt.call(hr,"constructor")&&hr.constructor;return typeof Gr=="function"&&Gr instanceof Gr&&_t.call(Gr)==ee}var Do=z?et(z):Ai;function xs(mn){return cs(mn,Mo(mn))}function Mo(mn){return ma(mn)?Bn(mn,!0):Aa(mn)}var $a=wa(function(mn,hr,Gr,Ui){ka(mn,hr,Gr,Ui)});function Ms(mn){return function(){return mn}}function as(mn){return mn}function Ca(){return!1}E.exports=$a}).call(this,R("IyRk"),R("hOG+")(Oe))},quyA:function(Oe,mt){var R="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+R+e+t+"]");function c(r){return s.test(r)}Oe.exports=c},qxNg:function(Oe,mt,R){"use strict";R.d(mt,"a",function(){return s});var U=R("lSNA"),E=R.n(U),T=R("mpbz"),e=R.n(T);function t(r,h){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);h&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,i)}return n}function l(r){for(var h=1;h<arguments.length;h++){var n=arguments[h]!=null?arguments[h]:{};h%2?t(Object(n),!0).forEach(function(i){E()(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function s(r,h){var n=h.radius,i=n===void 0?40:n,a=h.maxZoom,o=a===void 0?18:a,u=h.minZoom,f=u===void 0?0:u,v=h.zoom,b=v===void 0?2:v;if(r.pointIndex){var y=r.pointIndex.getClusters(r.extent,Math.floor(b));return r.dataArray=c(y),r}var g=new e.a({radius:i,minZoom:f,maxZoom:o}),_={type:"FeatureCollection",features:[]};return _.features=r.dataArray.map(function(M){return{type:"Feature",geometry:{type:"Point",coordinates:M.coordinates},properties:l({},M)}}),g.load(_.features),g}function c(r){return r.map(function(h,n){return l({coordinates:h.geometry.coordinates,_id:n+1},h.properties)})}},riiI:function(Oe,mt){},rlAn:function(Oe,mt,R){"use strict";var U=R("ISu3"),E=R("gMG2"),T=R("5gLl"),e=R("BpBL"),t=R("5zYK"),l=R("lJbI"),s=R("l94r"),c=R("qxNg"),r=R("Y8BV"),h=R("VIsB"),n=R("+VLl"),i=R("aF1E"),a=R("fdMe");R.d(mt,"getTransform",function(){return U.b}),R.d(mt,"getParser",function(){return U.a});var o=R("U1ZX"),u=R.n(o);mt.default=s.a,Object(U.c)("geojson",T.a),Object(U.c)("image",e.a),Object(U.c)("csv",E.a),Object(U.c)("json",t.a),Object(U.c)("raster",l.a),Object(U.d)("cluster",c.a),Object(U.d)("filter",r.a),Object(U.d)("join",i.a),Object(U.d)("map",a.a),Object(U.d)("grid",h.a),Object(U.d)("hexagon",n.a)},rxlC:function(Oe,mt,R){"use strict";Oe.exports=E,Oe.exports.default=E;var U=1e20;function E(s,c,r,h,n,i){this.fontSize=s||24,this.buffer=c===void 0?3:c,this.cutoff=h||.25,this.fontFamily=n||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,o=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(s,c,r,h,n,i,a){i.fill(U,0,c*r),a.fill(0,0,c*r);for(var o=(c-h)/2,u=0;u<n;u++)for(var f=0;f<h;f++){var v=(u+o)*c+f+o,b=s.data[4*(u*h+f)+3]/255;if(b===1)i[v]=0,a[v]=U;else if(b===0)i[v]=U,a[v]=0;else{var y=Math.max(0,.5-b),g=Math.max(0,b-.5);i[v]=y*y,a[v]=g*g}}}function e(s,c,r,h,n,i,a){for(var o=0;o<c*r;o++){var u=Math.sqrt(h[o])-Math.sqrt(n[o]);s[o]=Math.round(255-255*(u/i+a))}}E.prototype._draw=function(s,c){var r=this.ctx.measureText(s),h=r.width,n=2*this.buffer,i,a,o,u,f,v,b,y;c&&this.useMetrics?(f=Math.floor(r.actualBoundingBoxAscent),y=this.buffer+Math.ceil(r.actualBoundingBoxAscent),v=this.buffer,b=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),u=Math.min(this.size-v,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),i=a+n,o=u+n,this.ctx.textBaseline="alphabetic"):(i=a=this.size,o=u=this.size,f=19*this.fontSize/24,v=b=0,y=this.middle,this.ctx.textBaseline="middle");var g;a&&u&&(this.ctx.clearRect(b,v,a,u),this.ctx.fillText(s,this.buffer,y),g=this.ctx.getImageData(b,v,a,u));var _=new Uint8ClampedArray(i*o);return T(g,i,o,a,u,this.gridOuter,this.gridInner),t(this.gridOuter,i,o,this.f,this.v,this.z),t(this.gridInner,i,o,this.f,this.v,this.z),e(_,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_,metrics:{width:a,height:u,sdfWidth:i,sdfHeight:o,top:f,left:0,advance:h}}},E.prototype.draw=function(s){return this._draw(s,!1).data},E.prototype.drawWithMetrics=function(s){return this._draw(s,!0)};function t(s,c,r,h,n,i){for(var a=0;a<c;a++)l(s,a,c,r,h,n,i);for(var o=0;o<r;o++)l(s,o*c,1,c,h,n,i)}function l(s,c,r,h,n,i,a){var o,u,f,v;for(i[0]=0,a[0]=-U,a[1]=U,o=0;o<h;o++)n[o]=s[c+o*r];for(o=1,u=0,f=0;o<h;o++){do v=i[u],f=(n[o]-n[v]+o*o-v*v)/(o-v)/2;while(f<=a[u]&&--u>-1);u++,i[u]=o,a[u]=f,a[u+1]=U}for(o=0,u=0;o<h;o++){for(;a[u+1]<o;)u++;v=i[u],s[c+o*r]=n[v]+(o-v)*(o-v)}}},sGsY:function(Oe,mt,R){"use strict";var U=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),l=R("H84U"),s=R("/ezw"),c=R("B6l+"),r=R.n(c),h=function(K){var V=K.value,k=K.formatter,Z=K.precision,X=K.decimalSeparator,it=K.groupSeparator,ft=it===void 0?"":it,pt=K.prefixCls,ut;if(typeof k=="function")ut=k(V);else{var It=String(V),Nt=It.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Nt||It==="-")ut=It;else{var Rt=Nt[1],Mt=Nt[2]||"0",bt=Nt[4]||"";Mt=Mt.replace(/\B(?=(\d{3})+(?!\d))/g,ft),typeof Z=="number"&&(bt=r()(bt,Z,"0").slice(0,Z)),bt&&(bt="".concat(X).concat(bt)),ut=[T.createElement("span",{key:"int",className:"".concat(pt,"-content-value-int")},Rt,Mt),bt&&T.createElement("span",{key:"decimal",className:"".concat(pt,"-content-value-decimal")},bt)]}}return T.createElement("span",{className:"".concat(pt,"-content-value")},ut)},n=h,i=function(K){var V=K.prefixCls,k=K.className,Z=K.style,X=K.valueStyle,it=K.value,ft=it===void 0?0:it,pt=K.title,ut=K.valueRender,It=K.prefix,Nt=K.suffix,Rt=K.loading,Mt=K.direction,bt=K.onMouseEnter,At=K.onMouseLeave,rt=T.createElement(n,Object(E.a)({},K,{value:ft})),Pt=t()(V,Object(U.a)({},"".concat(V,"-rtl"),Mt==="rtl"),k);return T.createElement("div",{className:Pt,style:Z,onMouseEnter:bt,onMouseLeave:At},pt&&T.createElement("div",{className:"".concat(V,"-title")},pt),T.createElement(s.a,{paragraph:!1,loading:Rt},T.createElement("div",{style:X,className:"".concat(V,"-content")},It&&T.createElement("span",{className:"".concat(V,"-content-prefix")},It),ut?ut(rt):rt,Nt&&T.createElement("span",{className:"".concat(V,"-content-suffix")},Nt))))};i.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var a=Object(l.c)({prefixCls:"statistic"})(i),o=a,u=R("1OyB"),f=R("vuIU"),v=R("Ji7U"),b=R("LK+K"),y=R("ODXe"),g=R("QQZ/"),_=R.n(g),M=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function x(F,K){var V=F,k=/\[[^\]]*]/g,Z=(K.match(k)||[]).map(function(pt){return pt.slice(1,-1)}),X=K.replace(k,"[]"),it=M.reduce(function(pt,ut){var It=Object(y.a)(ut,2),Nt=It[0],Rt=It[1];if(pt.indexOf(Nt)!==-1){var Mt=Math.floor(V/Rt);return V-=Mt*Rt,pt.replace(new RegExp("".concat(Nt,"+"),"g"),function(bt){var At=bt.length;return _()(Mt.toString(),At,"0")})}return pt},X),ft=0;return it.replace(k,function(){var pt=Z[ft];return ft+=1,pt})}function m(F,K){var V=K.format,k=V===void 0?"":V,Z=new Date(F).getTime(),X=Date.now(),it=Math.max(Z-X,0);return x(it,k)}var S=R("0n0R"),P=1e3/30;function A(F){return new Date(F).getTime()}var O=function(F){Object(v.a)(V,F);var K=Object(b.a)(V);function V(){var k;return Object(u.a)(this,V),k=K.apply(this,arguments),k.syncTimer=function(){var Z=k.props.value,X=A(Z);X>=Date.now()?k.startTimer():k.stopTimer()},k.startTimer=function(){k.countdownId||(k.countdownId=window.setInterval(function(){k.forceUpdate()},P))},k.stopTimer=function(){var Z=k.props,X=Z.onFinish,it=Z.value;if(k.countdownId){clearInterval(k.countdownId),k.countdownId=void 0;var ft=A(it);X&&ft<Date.now()&&X()}},k.formatCountdown=function(Z,X){var it=k.props.format;return m(Z,Object(E.a)(Object(E.a)({},X),{format:it}))},k.valueRender=function(Z){return Object(S.a)(Z,{title:void 0})},k}return Object(f.a)(V,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return T.createElement(o,Object(E.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),V}(T.Component);O.defaultProps={format:"HH:mm:ss"};var L=O;o.Countdown=L;var W=mt.a=o},sKgW:function(Oe,mt){var R=9007199254740991,U=Math.floor;function E(T,e){var t="";if(!T||e<1||e>R)return t;do e%2&&(t+=T),e=U(e/2),e&&(T+=T);while(e);return t}Oe.exports=E},sXyB:function(Oe,mt,R){var U=R("SksO"),E=R("b48C");function T(e,t,l){return E()?(Oe.exports=T=Reflect.construct,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0):(Oe.exports=T=function(c,r,h){var n=[null];n.push.apply(n,r);var i=Function.bind.apply(c,n),a=new i;return h&&U(a,h.prototype),a},Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0),T.apply(null,arguments)}Oe.exports=T,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},sgoq:function(Oe,mt,R){var U=R("asDA"),E=R("TKrE"),T=R("6nK8"),e="['\u2019]",t=RegExp(e,"g");function l(s){return function(c){return U(T(E(c).replace(t,"")),s,"")}}Oe.exports=l},sxDa:function(Oe,mt,R){"use strict";R.d(mt,"e",function(){return Ys}),R.d(mt,"f",function(){return Bu}),R.d(mt,"d",function(){return ou}),R.d(mt,"a",function(){return Ro}),R.d(mt,"c",function(){return Qa}),R.d(mt,"g",function(){return ti}),R.d(mt,"b",function(){return as});var U=R("h1nZ"),E=R("lwsE"),T=R.n(E),e=R("W8MJ"),t=R.n(e),l=R("7W2i"),s=R.n(l),c=R("a1gu"),r=R.n(c),h=R("Nsbk"),n=R.n(h),i=R("QILm"),a=R.n(i),o=R("lSNA"),u=R.n(o),f=R("yG8O"),v=R.n(f),b=R("PJYZ"),y=R.n(b),g=R("U+yc"),_=R.n(g),M=R("1ABj"),x=R("GoyQ"),m=R.n(x),S=R("lSCD"),P=R.n(S),A=R("xp6e"),O=R("Hel2"),L=R("uhBA"),W=R("4U9+"),F=R.n(W),K=R("4cb6"),V,k,Z,X,it,ft;function pt(Y){return Y.map(function(vt){return typeof vt=="string"&&(vt=[vt,{}]),vt})}var ut=(V=Object(K.injectable)(),k=Object(K.inject)(U.TYPES.IGlobalConfigService),V(Z=(X=(ft=function(){function Y(){T()(this,Y),v()(this,"configService",it,this),this.enabled=void 0}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=this,Ot=lt.rendererService,kt=lt.postProcessingPassFactory,ce=lt.normalPassFactory;dt.hooks.init.tap("MultiPassRendererPlugin",function(){var Re=dt.getLayerConfig(),Qe=Re.enableMultiPassRenderer,Dn=Re.passes,rr=Dn===void 0?[]:Dn;ht.enabled=!!Qe&&dt.getLayerConfig().enableMultiPassRenderer!==!1,ht.enabled&&(dt.multiPassRenderer=ht.createMultiPassRenderer(dt,rr,kt,ce),dt.multiPassRenderer.setRenderFlag(!0))}),dt.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(dt,lt,ht,Ot){var kt=dt.multiPassRenderer,ce=dt.getLayerConfig(),Re=ce.enablePicking,Qe=ce.enableTAA;return Re&&kt.add(Ot("pixelPicking")),kt}}]),Y}(),ft),it=_()(X.prototype,"configService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X))||Z),It,Nt=(It={},u()(It,U.BlendType.additive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:1,dstAlpha:1}}),u()(It,U.BlendType.none,{enable:!1}),u()(It,U.BlendType.normal,{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),u()(It,U.BlendType.subtractive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:U.gl.ZERO,dstAlpha:U.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:U.gl.FUNC_SUBTRACT,alpha:U.gl.FUNC_SUBTRACT}}),u()(It,U.BlendType.max,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MAX_EXT}}),u()(It,U.BlendType.min,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MIN_EXT}}),It),Rt={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}},Mt,bt,At,rt,Pt,z,Q,gt;function et(Y,vt){var dt;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(dt=ot(Y))||vt&&Y&&typeof Y.length=="number"){dt&&(Y=dt);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,ce;return{s:function(){dt=Y[Symbol.iterator]()},n:function(){var Qe=dt.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,ce=Qe},f:function(){try{!Ot&&dt.return!=null&&dt.return()}finally{if(kt)throw ce}}}}function ot(Y,vt){if(!!Y){if(typeof Y=="string")return xt(Y,vt);var dt=Object.prototype.toString.call(Y).slice(8,-1);if(dt==="Object"&&Y.constructor&&(dt=Y.constructor.name),dt==="Map"||dt==="Set")return Array.from(Y);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return xt(Y,vt)}}function xt(Y,vt){(vt==null||vt>Y.length)&&(vt=Y.length);for(var dt=0,lt=new Array(vt);dt<vt;dt++)lt[dt]=Y[dt];return lt}function H(Y,vt){var dt=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);vt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),dt.push.apply(dt,lt)}return dt}function nt(Y){for(var vt=1;vt<arguments.length;vt++){var dt=arguments[vt]!=null?arguments[vt]:{};vt%2?H(Object(dt),!0).forEach(function(lt){u()(Y,lt,dt[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(dt)):H(Object(dt)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(dt,lt))})}return Y}function at(Y){var vt=q();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var _t=0,yt=(Mt=Object(U.lazyInject)(U.TYPES.ILogService),bt=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),At=Object(U.lazyInject)(U.TYPES.IShaderModuleService),rt=(gt=function(Y){s()(dt,Y);var vt=at(dt);function dt(){var lt,ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return T()(this,dt),lt=vt.call(this),lt.id="".concat(_t++),lt.name="".concat(_t),lt.type=void 0,lt.visible=!0,lt.zIndex=0,lt.minZoom=void 0,lt.maxZoom=void 0,lt.inited=!1,lt.layerModelNeedUpdate=!1,lt.pickedFeatureID=null,lt.selectedFeatureID=null,lt.styleNeedUpdate=!1,lt.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},lt.hooks={init:new A.b,afterInit:new A.b,beforeRender:new A.b,beforeRenderData:new A.d,afterRender:new A.c,beforePickingEncode:new A.c,afterPickingEncode:new A.c,beforeHighlight:new A.c(["pickedColor"]),afterHighlight:new A.c,beforeSelect:new A.c(["pickedColor"]),afterSelect:new A.c,beforeDestroy:new A.c,afterDestroy:new A.c},lt.models=[],lt.multiPassRenderer=void 0,lt.plugins=void 0,lt.sourceOption=void 0,lt.layerModel=void 0,v()(lt,"logger",Pt,y()(lt)),v()(lt,"configService",z,y()(lt)),v()(lt,"shaderModuleService",Q,y()(lt)),lt.cameraService=void 0,lt.coordinateService=void 0,lt.iconService=void 0,lt.fontService=void 0,lt.pickingService=void 0,lt.rendererService=void 0,lt.layerService=void 0,lt.interactionService=void 0,lt.mapService=void 0,lt.styleAttributeService=void 0,lt.layerSource=void 0,lt.postProcessingPassFactory=void 0,lt.normalPassFactory=void 0,lt.animateOptions={enable:!1},lt.container=void 0,lt.encodedData=void 0,lt.configSchema=void 0,lt.currentPickId=null,lt.rawConfig=void 0,lt.needUpdateConfig=void 0,lt.pendingStyleAttributes=[],lt.scaleOptions={},lt.animateStartTime=void 0,lt.aniamateStatus=!1,lt.sourceEvent=function(){lt.dataState.dataSourceNeedUpdate=!0;var Ot=lt.getLayerConfig(),kt=Ot.autoFit,ce=Ot.fitBoundsOptions;kt&&lt.fitBounds(ce),lt.emit("dataUpdate"),lt.reRender()},lt.name=ht.name||lt.id,lt.zIndex=ht.zIndex||0,lt.rawConfig=ht,lt}return t()(dt,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(ht){if(!this.inited)this.needUpdateConfig=nt(nt({},this.needUpdateConfig),ht);else{var Ot=this.container.get(U.TYPES.SceneID);this.configService.setLayerConfig(Ot,this.id,nt(nt(nt({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),ht)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(ht){this.container=ht}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(ht){return this.plugins.push(ht),this}},{key:"init",value:function(){var ht=this,Ot=this.container.get(U.TYPES.SceneID),kt=this.rawConfig.enableMultiPassRenderer,ce=kt===void 0?!1:kt;this.configService.setLayerConfig(Ot,this.id,{enableMultiPassRenderer:ce}),this.iconService=this.container.get(U.TYPES.IIconService),this.fontService=this.container.get(U.TYPES.IFontService),this.rendererService=this.container.get(U.TYPES.IRendererService),this.layerService=this.container.get(U.TYPES.ILayerService),this.interactionService=this.container.get(U.TYPES.IInteractionService),this.pickingService=this.container.get(U.TYPES.IPickingService),this.mapService=this.container.get(U.TYPES.IMapService),this.cameraService=this.container.get(U.TYPES.ICameraService),this.coordinateService=this.container.get(U.TYPES.ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(U.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(U.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(U.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(U.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(rr){var kr=rr.attributeName,ei=rr.attributeField,Fi=rr.attributeValues,Hi=rr.updateOptions;ht.styleAttributeService.updateStyleAttribute(kr,{scale:nt({field:ei},ht.splitValuesAndCallbackInAttribute(Fi,ht.getLayerConfig()[kr]))},Hi)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(U.TYPES.ILayerPlugin);var Re=et(this.plugins),Qe;try{for(Re.s();!(Qe=Re.n()).done;){var Dn=Qe.value;Dn.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(rr){Re.e(rr)}finally{Re.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(nt(nt({},this.getDefaultConfig()),this.rawConfig));var ht=this.getLayerConfig(),Ot=ht.animateOption;Ot!=null&&Ot.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(ht,Ot,kt){return this.updateStyleAttribute("color",ht,Ot,kt),this}},{key:"rotate",value:function(ht,Ot,kt){return this.updateStyleAttribute("rotate",ht,Ot,kt),this}},{key:"size",value:function(ht,Ot,kt){return this.updateStyleAttribute("size",ht,Ot,kt),this}},{key:"filter",value:function(ht,Ot,kt){return this.updateStyleAttribute("filter",ht,Ot,kt),this}},{key:"shape",value:function(ht,Ot,kt){return this.updateStyleAttribute("shape",ht,Ot,kt),this}},{key:"label",value:function(ht,Ot,kt){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:ht,attributeValues:Ot,updateOptions:kt}),this}},{key:"animate",value:function(ht){var Ot={};return m()(ht)?(Ot.enable=!0,Ot=nt(nt({},Ot),ht)):Ot.enable=ht,this.updateLayerConfig({animateOption:Ot}),this}},{key:"source",value:function(ht,Ot){return this.sourceOption={data:ht,options:Ot},this}},{key:"setData",value:function(ht,Ot){var kt=this;return this.inited?this.layerSource.setData(ht,Ot):this.on("inited",function(){kt.layerSource.setData(ht,Ot)}),this}},{key:"style",value:function(ht){var Ot=this,kt=ht.passes,ce=a()(ht,["passes"]);return kt&&pt(kt).forEach(function(Re){var Qe=Ot.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(Re[0]);Qe&&Qe.updateOptions(Re[1])}),this.rawConfig=nt(nt({},this.rawConfig),ce),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(ht,Ot){return m()(ht)?this.scaleOptions=nt(nt({},this.scaleOptions),ht):this.scaleOptions[ht]=Ot,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(ht){var Ot={};return Ot.enableHighlight=m()(ht)?!0:ht,m()(ht)?(Ot.enableHighlight=!0,ht.color&&(Ot.highlightColor=ht.color)):Ot.enableHighlight=!!ht,this.updateLayerConfig(Ot),this}},{key:"setActive",value:function(ht,Ot){var kt=this;if(m()(ht)){var ce=ht.x,Re=ce===void 0?0:ce,Qe=ht.y,Dn=Qe===void 0?0:Qe;this.updateLayerConfig({highlightColor:m()(Ot)?Ot.color:this.getLayerConfig().highlightColor}),this.pick({x:Re,y:Dn})}else this.updateLayerConfig({pickedFeatureID:ht,highlightColor:m()(Ot)?Ot.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(O.l)(ht)).then(function(){setTimeout(function(){kt.reRender()},1)})}},{key:"select",value:function(ht){var Ot={};return Ot.enableSelect=m()(ht)?!0:ht,m()(ht)?(Ot.enableSelect=!0,ht.color&&(Ot.selectColor=ht.color)):Ot.enableSelect=!!ht,this.updateLayerConfig(Ot),this}},{key:"setSelect",value:function(ht,Ot){var kt=this;if(m()(ht)){var ce=ht.x,Re=ce===void 0?0:ce,Qe=ht.y,Dn=Qe===void 0?0:Qe;this.updateLayerConfig({selectColor:m()(Ot)?Ot.color:this.getLayerConfig().selectColor}),this.pick({x:Re,y:Dn})}else this.updateLayerConfig({pickedFeatureID:ht,selectColor:m()(Ot)?Ot.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(O.l)(ht)).then(function(){setTimeout(function(){kt.reRender()},1)})}},{key:"setBlend",value:function(ht){this.updateLayerConfig({blend:ht}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(ht){return this.zIndex=ht,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(ht){this.currentPickId=ht}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(ht){this.selectedFeatureID=ht}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var ht=this.mapService.getZoom(),Ot=this.getLayerConfig(),kt=Ot.visible,ce=Ot.minZoom,Re=ce===void 0?-Infinity:ce,Qe=Ot.maxZoom,Dn=Qe===void 0?Infinity:Qe;return!!kt&&ht>=Re&&ht<=Dn}},{key:"setMinZoom",value:function(ht){return this.updateLayerConfig({minZoom:ht}),this}},{key:"getMinZoom",value:function(){var ht=this.getLayerConfig(),Ot=ht.minZoom;return Ot}},{key:"getMaxZoom",value:function(){var ht=this.getLayerConfig(),Ot=ht.maxZoom;return Ot}},{key:"get",value:function(ht){var Ot=this.getLayerConfig();return Ot[ht]}},{key:"setMaxZoom",value:function(ht){return this.updateLayerConfig({maxZoom:ht}),this}},{key:"fitBounds",value:function(ht){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var Ot=this.getSource(),kt=Ot.extent,ce=kt.some(function(Re){return Math.abs(Re)===Infinity});return ce?this:(this.mapService.fitBounds([[kt[0],kt[1]],[kt[2],kt[3]]],ht),this)}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(ht){return ht.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(ht){return ht.needRescale||ht.needRemapping||ht.needRegenerateVertices}).length}},{key:"setSource",value:function(ht){this.layerSource=ht;var Ot=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(Ot),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(ht){this.encodedData=ht}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=F()([Rt,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(ht){var Ot=this.styleAttributeService.getLayerAttributeScale(ht);if(Ot){if(Ot.ticks){var kt=Ot.ticks().map(function(Re){return u()({value:Re},ht,Ot(Re))});return kt}else if(Ot.invertExtent){var ce=Ot.range().map(function(Re){return u()({value:Ot.invertExtent(Re)},ht,Re)});return ce}}else return[]}},{key:"pick",value:function(ht){var Ot=ht.x,kt=ht.y;this.interactionService.triggerHover({x:Ot,y:kt})}},{key:"boxSelect",value:function(ht,Ot){this.pickingService.boxPickLayer(this,ht,Ot)}},{key:"buildLayerModel",value:function(ht){var Ot=ht.moduleName,kt=ht.vertexShader,ce=ht.fragmentShader,Re=ht.triangulation,Qe=a()(ht,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(Ot,{vs:kt,fs:ce});var Dn=this.shaderModuleService.getModule(Ot),rr=Dn.vs,kr=Dn.fs,ei=Dn.uniforms,Fi=this.rendererService.createModel,Hi=this.styleAttributeService.createAttributesAndIndices(this.encodedData,Re),aa=Hi.attributes,fo=Hi.elements;return Fi(nt({attributes:aa,uniforms:ei,fs:kr,vs:rr,elements:fo,blend:Nt[U.BlendType.normal]},Qe))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(ht){var Ot=this.getLayerConfig(),kt=Ot.enableHighlight,ce=kt===void 0?!0:kt,Re=Ot.enableSelect,Qe=Re===void 0?!0:Re,Dn=this.eventNames().indexOf(ht)!==-1||this.eventNames().indexOf("un"+ht)!==-1;return(ht==="click"||ht==="dblclick")&&Qe&&(Dn=!0),ht==="mousemove"&&(ce||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(Dn=!0),this.isVisible()&&Dn}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var ht=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Ot){Ot.draw({uniforms:ht.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(ht,Ot){return{values:P()(ht)?void 0:ht||Ot,callback:P()(ht)?ht:void 0}}},{key:"updateStyleAttribute",value:function(ht,Ot,kt,ce){this.inited?this.styleAttributeService.updateStyleAttribute(ht,{scale:nt({field:Ot},this.splitValuesAndCallbackInAttribute(kt,this.getLayerConfig()[Ot]))},ce):this.pendingStyleAttributes.push({attributeName:ht,attributeField:Ot,attributeValues:kt,updateOptions:ce})}}]),dt}(L.EventEmitter),gt),Pt=_()(rt.prototype,"logger",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_()(rt.prototype,"configService",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=_()(rt.prototype,"shaderModuleService",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt),Ft,Qt,ee,Vt,$t,Me,me=(Ft=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),Qt=Object(U.lazyInject)(U.TYPES.IShaderModuleService),ee=(Me=function(){function Y(vt){T()(this,Y),this.triangulation=void 0,this.layer=void 0,v()(this,"configService",Vt,this),v()(this,"shaderModuleService",$t,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=vt,this.rendererService=vt.getContainer().get(U.TYPES.IRendererService),this.styleAttributeService=vt.getContainer().get(U.TYPES.IStyleAttributeService),this.mapService=vt.getContainer().get(U.TYPES.IMapService),this.iconService=vt.getContainer().get(U.TYPES.IIconService),this.fontService=vt.getContainer().get(U.TYPES.IFontService),this.cameraService=vt.getContainer().get(U.TYPES.ICameraService),this.layerService=vt.getContainer().get(U.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return t()(Y,[{key:"getBlend",value:function(){var dt=this.layer.getLayerConfig(),lt=dt.blend,ht=lt===void 0?"normal":lt;return Nt[U.BlendType[ht]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(dt){return[dt.enable?0:1,dt.duration||4,dt.interval||.2,dt.trailLength||.1]}},{key:"startModelAnimate",value:function(){var dt=this.layer.getLayerConfig(),lt=dt.animateOption;lt.enable&&this.layer.setAnimateStartTime()}}]),Y}(),Me),Vt=_()(ee.prototype,"configService",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()(ee.prototype,"shaderModuleService",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee),le=R("J4zp"),be=R.n(le),ze=R("RIqP"),Xe=R.n(ze),Sn=R("VmRL"),Xn=R.n(Sn),Hn=R("IOcx"),nn=Hn.c.create(),en=Hn.c.create(),An=Hn.c.create(),Nn=Hn.c.create(),fr=Hn.c.create();function hi(Y,vt,dt,lt,ht){Hn.c.add(Y,dt,lt),Hn.c.normalize(Y,Y),vt=Hn.c.fromValues(-Y[1],Y[0]);var Ot=Hn.c.fromValues(-dt[1],dt[0]);return[ht/Hn.c.dot(vt,Ot),vt]}function Ce(Y,vt){return Hn.c.set(Y,-vt[1],vt[0])}function Te(Y,vt,dt){return Hn.c.sub(Y,vt,dt),Hn.c.normalize(Y,Y),Y}function Jt(Y,vt){return Y[0]===vt[0]&&Y[1]===vt[1]}function pe(Y){for(var vt=new Map,dt=0;dt<Y.length;dt++){var lt=Y[0].toString()+"-"+Y[1].toString();vt.get(lt)?(Y.splice(dt,1),dt++):vt.set(lt,lt)}return Y}var Wt=function(){function Y(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T()(this,Y),this.complex=void 0,this.join=void 0,this.cap=void 0,this.miterLimit=void 0,this.thickness=void 0,this.normal=void 0,this.lastFlip=-1,this.miter=Hn.c.fromValues(0,0),this.started=!1,this.dash=!1,this.totalDistance=0,this.join=vt.join||"miter",this.cap=vt.cap||"butt",this.miterLimit=vt.miterLimit||10,this.thickness=vt.thickness||1,this.dash=vt.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return t()(Y,[{key:"extrude",value:function(dt){var lt=this.complex;if(dt.length<=1)return lt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ht=dt.length,Ot=lt.startIndex,kt=1;kt<ht;kt++){var ce=dt[kt-1],Re=dt[kt],Qe=kt<dt.length-1?dt[kt+1]:null,Dn=this.segment(lt,Ot,ce,Re,Qe);Ot+=Dn}if(this.dash)for(var rr=0;rr<lt.positions.length/6;rr++)lt.positions[rr*6+5]=this.totalDistance;return lt.startIndex=lt.positions.length/6,lt}},{key:"segment",value:function(dt,lt,ht,Ot,kt){var ce=0,Re=dt.indices,Qe=dt.positions,Dn=dt.normals,rr=this.cap==="square",kr=this.join==="bevel",ei=Object(O.d)([Ot[0],Ot[1]]),Fi=Object(O.d)([ht[0],ht[1]]);Te(An,ei,Fi);var Hi=0;if(this.dash&&(Hi=this.lineSegmentDistance(ei,Fi),this.totalDistance+=Hi),this.normal||(this.normal=Hn.c.create(),Ce(this.normal,An)),!this.started)if(this.started=!0,rr){var aa=Hn.c.create(),fo=Hn.c.create();Hn.c.add(aa,this.normal,An),Hn.c.add(fo,this.normal,An),Dn.push(fo[0],fo[1],0),Dn.push(aa[0],aa[1],0),Qe.push(ht[0],ht[1],0,this.totalDistance-Hi,-this.thickness,0),Qe.push(ht[0],ht[1],0,this.totalDistance-Hi,this.thickness,0)}else this.extrusions(Qe,Dn,ht,this.normal,this.thickness,this.totalDistance-Hi);if(Re.push(lt+0,lt+1,lt+2),kt){var ms=Object(O.d)([kt[0],kt[1]]);Jt(ei,ms)&&Hn.c.add(ms,ei,Hn.c.normalize(ms,Hn.c.subtract(ms,ei,Fi))),Te(Nn,ms,ei);var Js=hi(fr,Hn.c.create(),An,Nn,this.thickness),xl=be()(Js,2),Lo=xl[0],bl=xl[1],Jl=Hn.c.dot(fr,this.normal)<0?-1:1,yc=kr;if(!yc&&this.join==="miter"){var Ho=Lo;Ho>this.miterLimit&&(yc=!0)}yc?(Dn.push(this.normal[0],this.normal[1],0),Dn.push(bl[0],bl[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,-this.thickness*Jl,0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness*Jl,0),Re.push.apply(Re,Xe()(this.lastFlip!==-Jl?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),Re.push(lt+2,lt+3,lt+4),Ce(nn,Nn),Hn.c.copy(this.normal,nn),Dn.push(this.normal[0],this.normal[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,-this.thickness*Jl,0),ce+=3):(this.extrusions(Qe,Dn,Ot,bl,Lo,this.totalDistance),Re.push.apply(Re,Xe()(this.lastFlip===1?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),Jl=-1,Hn.c.copy(this.normal,bl),ce+=2),this.lastFlip=Jl}else{if(Ce(this.normal,An),rr){var Wo=Hn.c.create(),iu=Hn.c.create();Hn.c.sub(iu,An,this.normal),Hn.c.add(Wo,An,this.normal),Dn.push(iu[0],iu[1],0),Dn.push(Wo[0],Wo[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness,0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Qe,Dn,Ot,this.normal,this.thickness,this.totalDistance);Re.push.apply(Re,Xe()(this.lastFlip===1?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),ce+=2}return ce}},{key:"extrusions",value:function(dt,lt,ht,Ot,kt,ce){lt.push(Ot[0],Ot[1],0),lt.push(Ot[0],Ot[1],0),dt.push(ht[0],ht[1],0,ce,-kt,0),dt.push(ht[0],ht[1],0,ce,kt,0)}},{key:"lineSegmentDistance",value:function(dt,lt){var ht=lt[0]-dt[0],Ot=lt[1]-dt[1];return Math.sqrt(ht*ht+Ot*Ot)}}]),Y}(),ie=R("UB5X"),Ae=R.n(ie);function ue(Y){if(Ae()(Y[0]))return Y;if(Ae()(Y[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Ae()(Y[0][0][0])){var vt=Y,dt=0,lt=0,ht=0;return vt.forEach(function(Ot){Ot.forEach(function(kt){dt+=kt[0],lt+=kt[1],ht++})}),[dt/ht,lt/ht,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function xe(Y){var vt=Y[0][0],dt=Y[0][Y[0].length-1];vt[0]===dt[0]&&vt[1]===dt[1]&&(Y[0]=Y[0].slice(0,Y[0].length-1));for(var lt=Y[0].length,ht=Xn.a.flatten(Y),Ot=ht.vertices,kt=ht.dimensions,ce=[],Re=[],Qe=0;Qe<Ot.length/kt;Qe++)kt===2?ce.push(Ot[Qe*2],Ot[Qe*2+1],1):ce.push(Ot[Qe*3],Ot[Qe*3+1],1);var Dn=Xn()(ht.vertices,ht.holes,ht.dimensions);Re.push.apply(Re,Xe()(Dn));for(var rr=function(Fi){var Hi=ht.vertices.slice(Fi*kt,(Fi+1)*kt),aa=ht.vertices.slice((Fi+1)*kt,(Fi+2)*kt);aa.length===0&&(aa=ht.vertices.slice(0,kt));var fo=ce.length/3;ce.push(Hi[0],Hi[1],1,aa[0],aa[1],1,Hi[0],Hi[1],0,aa[0],aa[1],0),Re.push.apply(Re,Xe()([0,2,1,2,3,1].map(function(Wo){return Wo+fo})))},kr=0;kr<lt;kr++)rr(kr);return{positions:ce,index:Re}}function $e(Y){var vt=Xn.a.flatten(Y),dt=Xn()(vt.vertices,vt.holes,vt.dimensions);return{positions:vt.vertices,index:dt}}function Fn(Y){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,dt=Y[0][0],lt=Y[0][Y[0].length-1];dt[0]===lt[0]&&dt[1]===lt[1]&&(Y[0]=Y[0].slice(0,Y[0].length-1));for(var ht=Y[0].length,Ot=Xn.a.flatten(Y),kt=Ot.vertices,ce=Ot.dimensions,Re=[],Qe=[],Dn=[],rr=0;rr<kt.length/ce;rr++)ce===2?Re.push(kt[rr*2],kt[rr*2+1],1,-1,-1):Re.push(kt[rr*3],kt[rr*3+1],1,-1,-1),Dn.push(0,0,1);var kr=Xn()(Ot.vertices,Ot.holes,Ot.dimensions);Qe.push.apply(Qe,Xe()(kr));for(var ei=function(aa){var fo=Ot.vertices.slice(aa*ce,(aa+1)*ce),Wo=Ot.vertices.slice((aa+1)*ce,(aa+2)*ce);Wo.length===0&&(Wo=Ot.vertices.slice(0,ce));var iu=Re.length/5;Re.push(fo[0],fo[1],1,0,0,Wo[0],Wo[1],1,.1,0,fo[0],fo[1],0,0,.8,Wo[0],Wo[1],0,.1,.8);var ms=or([Wo[0],Wo[1],1],[fo[0],fo[1],0],[fo[0],fo[1],1],vt);Dn.push.apply(Dn,Xe()(ms).concat(Xe()(ms),Xe()(ms),Xe()(ms))),Qe.push.apply(Qe,Xe()([1,2,0,3,2,1].map(function(Js){return Js+iu})))},Fi=0;Fi<ht;Fi++)ei(Fi);return{positions:Re,index:Qe,normals:Dn}}function or(Y,vt,dt){var lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ht=Hn.d.create(),Ot=Hn.d.create(),kt=Hn.d.create();lt&&(Y=Object(O.p)(Y),vt=Object(O.p)(vt),dt=Object(O.p)(dt));var ce=Hn.d.fromValues.apply(Hn.d,Xe()(Y)),Re=Hn.d.fromValues.apply(Hn.d,Xe()(vt)),Qe=Hn.d.fromValues.apply(Hn.d,Xe()(dt));Hn.d.sub(ht,Qe,Re),Hn.d.sub(Ot,ce,Re),Hn.d.cross(kt,ht,Ot);var Dn=Hn.d.create();return Hn.d.normalize(Dn,kt),Dn}var En,Pn;(function(Y){Y.CYLINDER="cylinder",Y.SQUARECOLUMN="squareColumn",Y.TRIANGLECOLUMN="triangleColumn",Y.HEXAGONCOLUMN="hexagonColumn",Y.PENTAGONCOLUMN="pentagonColumn"})(Pn||(Pn={}));var br;(function(Y){Y.CIRCLE="circle",Y.SQUARE="square",Y.TRIANGLE="triangle",Y.HEXAGON="hexagon",Y.PENTAGON="pentagon"})(br||(br={}));function Pr(Y){for(var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,dt=Math.PI*2/Y,lt=[],ht=0;ht<Y;ht++)lt.push(dt*ht+vt*Math.PI/12);var Ot=lt.map(function(kt){var ce=Math.sin(kt+Math.PI/4),Re=Math.cos(kt+Math.PI/4);return[ce,Re,0]});return Ot}function ln(){return Pr(30)}function Cr(){return Pr(4)}function Ar(){return Pr(3)}function Be(){return Pr(6,1)}function We(){return Pr(5)}var Ye=(En={},u()(En,br.CIRCLE,ln),u()(En,br.HEXAGON,Be),u()(En,br.TRIANGLE,Ar),u()(En,br.SQUARE,Cr),u()(En,br.PENTAGON,We),u()(En,Pn.CYLINDER,ln),u()(En,Pn.HEXAGONCOLUMN,Be),u()(En,Pn.TRIANGLECOLUMN,Ar),u()(En,Pn.SQUARECOLUMN,Cr),u()(En,Pn.PENTAGONCOLUMN,We),En),fn={};function gn(Y){var vt=ue(Y.coordinates);return{vertices:[].concat(Xe()(vt),Xe()(vt),Xe()(vt),Xe()(vt)),indices:[0,1,2,2,3,0],size:vt.length}}function Bn(Y){var vt=Y.shape,dt=Ai(vt,!1),lt=dt.positions,ht=dt.index,Ot=dt.normals;return{vertices:lt,indices:ht,normals:Ot,size:5}}function bn(Y){var vt=ue(Y.coordinates);return{vertices:Xe()(vt),indices:[0],size:vt.length}}function Ln(Y){var vt=Y.coordinates,dt=vt;Array.isArray(dt[0][0])||(dt=[vt]);var lt=new Wt({dash:!0,join:"bevel"});dt.forEach(function(Ot){lt.extrude(Ot)});var ht=lt.complex;return{vertices:ht.positions,indices:ht.indices,normals:ht.normals,size:6}}function ir(Y){var vt=Y.coordinates,dt=Xn.a.flatten(vt),lt=dt.vertices,ht=dt.dimensions,Ot=dt.holes;return{indices:Xn()(lt,Ot,ht),vertices:lt,size:ht}}function Yn(Y){var vt=Y.coordinates,dt=Fn(vt,!0),lt=dt.positions,ht=dt.index,Ot=dt.normals;return{vertices:lt,indices:ht,normals:Ot,size:5}}function _n(Y){var vt=Y.shape,dt=Zo(vt),lt=dt.positions,ht=dt.index;return{vertices:lt,indices:ht,size:3}}function Dr(Y){var vt=Y.coordinates,dt=[].concat(Xe()(vt[0]),[0,0,1,vt[1][0],vt[0][1],0,1,1],Xe()(vt[1]),[0,1,0],Xe()(vt[0]),[0,0,1],Xe()(vt[1]),[0,1,0,vt[0][0],vt[1][1],0,0,0]),lt=[0,1,2,3,4,5];return{vertices:dt,indices:lt,size:5}}function vr(Y){for(var vt=30,dt=Y.coordinates,lt=[],ht=[],Ot=function(Re){lt.push(Re,1,Re,dt[0][0],dt[0][1],dt[1][0],dt[1][1],Re,-1,Re,dt[0][0],dt[0][1],dt[1][0],dt[1][1]),Re!==vt-1&&ht.push.apply(ht,Xe()([0,1,2,1,3,2].map(function(Qe){return Re*2+Qe})))},kt=0;kt<vt;kt++)Ot(kt);return{vertices:lt,indices:ht,size:7}}function zr(Y){var vt=Y.coordinates;vt.length===2&&vt.push(0);var dt=Y.size,lt=Ea(-1,1),ht=Ea(1,1),Ot=Ea(-1,-1),kt=Ea(1,-1),ce=[].concat(Xe()(vt),Xe()(lt),Xe()(vt),Xe()(Ot),Xe()(vt),Xe()(kt),Xe()(vt),Xe()(ht)),Re=[0,1,2,3,0,2];return{vertices:ce,indices:Re,size:5}}function Ai(Y){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(fn&&fn[Y])return fn[Y];var dt=Ye[Y]?Ye[Y]():Ye.cylinder(),lt=Fn([dt],vt);return fn[Y]=lt,lt}function Aa(Y,vt){for(var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ht=new Float32Array(Y.length/dt*3),Ot,kt,ce,Re=Hn.d.create(),Qe=Hn.d.create(),Dn=Hn.d.create(),rr=0,kr=vt.length;rr<kr;rr+=3){Ot=vt[rr+0]*3,kt=vt[rr+1]*3,ce=vt[rr+2]*3;var ei=[Y[Ot],Y[Ot+1]],Fi=[Y[kt],Y[kt+1]],Hi=[Y[ce],Y[ce+1]];lt&&(ei=Object(O.p)(ei),Fi=Object(O.p)(Fi),Hi=Object(O.p)(Hi));var aa=ei,fo=be()(aa,2),Wo=fo[0],iu=fo[1],ms=Hn.d.fromValues(Wo,iu,Y[Ot+2]),Js=Fi,xl=be()(Js,2),Lo=xl[0],bl=xl[1],Jl=Hn.d.fromValues(Lo,bl,Y[kt+2]),yc=Hi,Ho=be()(yc,2),oc=Ho[0],Wl=Ho[1],ah=Hn.d.fromValues(oc,Wl,Y[ce+2]);Hn.d.sub(Re,ah,Jl),Hn.d.sub(Qe,ms,Jl),Hn.d.cross(Dn,Re,Qe),ht[Ot]+=Re[0],ht[Ot+1]+=Re[1],ht[Ot+2]+=Re[2],ht[kt]+=Re[0],ht[kt+1]+=Re[1],ht[kt+2]+=Re[2],ht[ce]+=Re[0],ht[ce+1]+=Re[1],ht[ce+2]+=Re[2]}return ka(ht),ht}function ka(Y){for(var vt=0,dt=Y.length;vt<dt;vt+=3){var lt=Hn.d.fromValues(Y[vt],Y[vt+1],Y[vt+2]),ht=Hn.d.create();Hn.d.normalize(ht,lt),Y.set(ht,vt)}}function eo(Y){var vt=Y[0][0],dt=Y[0][Y[0].length-1];return vt[0]===dt[0]&&vt[1]===dt[1]}function Zo(Y){var vt=["cylinder","triangleColumn","hexagonColumn","squareColumn"],dt=Ye[Y]?Ye[Y]():Ye.circle(),lt=vt.indexOf(Y)===-1?$e([dt]):xe([dt]);return lt}function Ea(Y,vt){var dt=(Y+1)/2,lt=(vt+1)/2;return[dt,lt]}function so(Y){var vt=Ko();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var no=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,So=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);
   v_texCoord = a_Uv;
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,cs=function(Y){s()(dt,Y);var vt=so(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,ce=ht.baseColor,Re=ce===void 0?"rgb(16,16,16)":ce,Qe=ht.brightColor,Dn=Qe===void 0?"rgb(255,176,38)":Qe,rr=ht.windowColor,kr=rr===void 0?"rgb(30,60,89)":rr,ei=ht.time,Fi=ei===void 0?0:ei;return{u_opacity:kt,u_baseColor:Object(O.s)(Re),u_brightColor:Object(O.s)(Dn),u_windowColor:Object(O.s)(kr),u_time:this.layer.getLayerAnimateTime()||Fi}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:So,fragmentShader:no,triangulation:Yn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt,ce,Re,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?10:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){var Qe=Ot.size;return[ce[3],ce[4]]}}})}}]),dt}(me);function wa(Y){var vt=zo();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function zo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ro=function(Y){s()(dt,Y);var vt=wa(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="PolygonLayer",lt}return t()(dt,[{key:"buildModels",value:function(){this.layerModel=new cs(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(ht){this.updateLayerConfig({time:ht})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),dt}(yt);function fu(Y){var vt=Xo();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Xo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var au=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
varying vec4 v_color;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,$s=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ne=function(Y){s()(dt,Y);var vt=fu(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,ce=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||.9,u_angle:ce||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:au,fragmentShader:$s,triangulation:_n,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt){var ce=Ot.coordinates;return[ce[0],ce[1],0]}}})}}]),dt}(me);function oe(Y){var vt=Ht();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ee=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);
  setPickingColor(a_PickingColor);
}
`,an=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,zn=function(Y){s()(dt,Y);var vt=oe(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,ce=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||1,u_angle:ce||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:Ee,fragmentShader:an,triangulation:Bn,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size;return Array.isArray(Qe)?[Qe[0]]:[Qe]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt,ce,Re,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt){var ce=Ot.coordinates;return[ce[0],ce[1],0]}}})}}]),dt}(me);function qn(Y,vt){for(var dt=[],lt=[],ht=[],Ot=Y+1,kt=vt+1,ce=Y/2,Re=vt/2,Qe=0;Qe<kt;Qe++)for(var Dn=Qe-Re,rr=0;rr<Ot;rr++){var kr=rr-ce;lt.push(kr/ce,-Dn/Re,0),ht.push(rr/Y),ht.push(1-Qe/vt)}for(var ei=0;ei<vt;ei++)for(var Fi=0;Fi<Y;Fi++){var Hi=Fi+Ot*ei,aa=Fi+Ot*(ei+1),fo=Fi+1+Ot*(ei+1),Wo=Fi+1+Ot*ei;dt.push(Hi,aa,Wo),dt.push(aa,fo,Wo)}return{vertices:lt,indices:dt,uvs:ht}}function Un(Y,vt){var dt=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);vt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),dt.push.apply(dt,lt)}return dt}function Jr(Y){for(var vt=1;vt<arguments.length;vt++){var dt=arguments[vt]!=null?arguments[vt]:{};vt%2?Un(Object(dt),!0).forEach(function(lt){u()(Y,lt,dt[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(dt)):Un(Object(dt)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(dt,lt))})}return Y}function Si(Y){var vt=Ci();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ci(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var ki=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,oa=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos =(a_Uv * vec2(2.0) - vec2(1.0));


  vec4 p1 = vec4(pos, 0.0, 1.0);
	vec4 p2 = vec4(pos, 1.0, 1.0);

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1;
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w;
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0, 1, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);

}
`,Xa=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,ma=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,mo=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
}
`,Ba=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,ao=function(Y){s()(dt,Y);var vt=Si(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.texture=void 0,lt.colorTexture=void 0,lt.heatmapFramerBuffer=void 0,lt.intensityModel=void 0,lt.colorModel=void 0,lt.shapeType=void 0,lt}return t()(dt,[{key:"render",value:function(){var ht=this,Ot=this.rendererService,kt=Ot.clear,ce=Ot.useFramebuffer;ce(this.heatmapFramerBuffer,function(){kt({color:[0,0,0,0],depth:1,stencil:0,framebuffer:ht.heatmapFramerBuffer}),ht.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var ht,Ot=this.rendererService,kt=Ot.createFramebuffer,ce=Ot.clear,Re=Ot.getViewportSize,Qe=Ot.createTexture2D,Dn=Ot.useFramebuffer,rr=this.styleAttributeService.getLayerStyleAttribute("shape"),kr=(rr==null||(ht=rr.scale)===null||ht===void 0?void 0:ht.field)||"heatmap";this.shapeType=kr,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=kr==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var ei=this.layer.getLayerConfig(),Fi=ei.rampColors,Hi=Object(O.n)(Fi),aa=Re(),fo=aa.width,Wo=aa.height;return this.heatmapFramerBuffer=kt({color:Qe({width:Math.floor(fo/4),height:Math.floor(Wo/4),wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.LINEAR,mag:U.gl.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:U.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){return[ce[3],ce[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?1:Qe;return[Dn]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:mo,fragmentShader:ma,triangulation:zr,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:U.gl.ONE,srcAlpha:1,dstRGB:U.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:Ba,fs:Xa});var ht=this.shaderModuleService.getModule("heatmapColor"),Ot=ht.vs,kt=ht.fs,ce=ht.uniforms,Re=this.rendererService,Qe=Re.createAttribute,Dn=Re.createElements,rr=Re.createBuffer,kr=Re.createModel;return kr({vs:Ot,fs:kt,attributes:{a_Position:Qe({buffer:rr({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:U.gl.FLOAT}),size:3}),a_Uv:Qe({buffer:rr({data:[0,1,1,1,0,0,1,0],type:U.gl.FLOAT}),size:2})},uniforms:Jr({},ce),depth:{enable:!1},blend:this.getBlend(),count:6,elements:Dn({data:[0,2,1,2,3,1],type:U.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.intensity,ce=kt===void 0?10:kt,Re=ht.radius,Qe=Re===void 0?5:Re;this.intensityModel.draw({uniforms:{u_opacity:Ot||1,u_radius:Qe,u_intensity:ce}})}},{key:"drawColorMode",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;this.colorModel.draw({uniforms:{u_opacity:Ot||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Hn.b.invert(Hn.b.create(),Hn.b.fromValues.apply(Hn.b,Xe()(this.cameraService.getViewProjectionMatrixUncentered())));this.colorModel.draw({uniforms:{u_opacity:Ot||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Xe()(kt)}})}},{key:"build3dHeatMap",value:function(){var ht=this.rendererService.getViewportSize,Ot=ht(),kt=Ot.width,ce=Ot.height,Re=qn(kt/4,ce/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:oa,fs:ki});var Qe=this.shaderModuleService.getModule("heatmap3dColor"),Dn=Qe.vs,rr=Qe.fs,kr=Qe.uniforms,ei=this.rendererService,Fi=ei.createAttribute,Hi=ei.createElements,aa=ei.createBuffer,fo=ei.createModel;return fo({vs:Dn,fs:rr,attributes:{a_Position:Fi({buffer:aa({data:Re.vertices,type:U.gl.FLOAT}),size:3}),a_Uv:Fi({buffer:aa({data:Re.uvs,type:U.gl.FLOAT}),size:2})},primitive:U.gl.TRIANGLES,uniforms:Jr({},kr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,srcAlpha:1,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Hi({data:Re.indices,type:U.gl.UNSIGNED_INT,count:Re.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var ht=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var Ot=this.layer.getLayerConfig(),kt=Ot.rampColors,ce=Object(O.n)(kt);this.colorTexture=ht({data:new Uint8Array(ce.data),width:ce.width,height:ce.height,wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.NEAREST,mag:U.gl.NEAREST,flipY:!1})}}]),dt}(me);function yo(Y){var vt=Ja();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ja(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var _o=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ts=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  setPickingColor(a_PickingColor);
}
`,Do=function(Y){s()(dt,Y);var vt=yo(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,ce=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||.9,u_angle:ce||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:ts,fragmentShader:_o,triangulation:_n,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt){var ce=Ot.coordinates;return[ce[0],ce[1],0]}}})}}]),dt}(me),xs={heatmap:ao,heatmap3d:ao,grid:Ne,grid3d:zn,hexagon:Do},Mo=xs;function $a(Y){var vt=Ms();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ms(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var as=function(Y){s()(dt,Y);var vt=$a(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="HeatMapLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new Mo[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var ht=this,Ot=this.getModelType();return Ot==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(kt){return kt.draw({uniforms:ht.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=this.getLayerConfig(),ce=kt.shape3d,Re=this.getSource(),Qe=Re.data.type,Dn=(Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field)||"heatmap";return Dn==="heatmap"||Dn==="heatmap3d"?"heatmap":Qe==="hexagon"?(ce==null?void 0:ce.indexOf(Dn))===-1?"hexagon":"grid3d":Qe==="grid"?(ce==null?void 0:ce.indexOf(Dn))===-1?"grid":"grid3d":"heatmap"}}]),dt}(yt);function Ca(Y){var vt=mn();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function mn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var hr=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,Gr=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,Ui=function(Y){s()(dt,Y);var vt=Ca(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.texture=void 0,lt}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;return{u_opacity:Ot||1,u_texture:this.texture}}},{key:"initModels",value:function(){var ht=this,Ot=this.layer.getSource(),kt=this.rendererService.createTexture2D;return this.texture=kt({height:0,width:0}),Ot.data.images.then(function(ce){ht.texture=kt({data:ce[0],width:ce[0].width,height:ce[0].height}),ht.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:Gr,fragmentShader:hr,triangulation:Dr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){return[ce[3],ce[4]]}}})}}]),dt}(me),Ka={image:Ui},xo=Ka;function vo(Y){var vt=qi();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function qi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Qa=function(Y){s()(dt,Y);var vt=vo(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="ImageLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new xo[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={image:{}};return Ot[ht]}},{key:"getModelType",value:function(){return"image"}}]),dt}(yt);function bs(Y){var vt=Es();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ga=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Pu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;
#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = a_Instance.rg;
  vec2 target =  a_Instance.ba;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  if(u_line_type == LineTypeDash) {
      v_distance_ratio = segmentIndex / segmentNumber;
      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
    }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}
`,Uo={solid:0,dash:1},Ps=function(Y){s()(dt,Y);var vt=bs(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,ce=kt===void 0?"solid":kt,Re=ht.dashArray,Qe=Re===void 0?[10,5]:Re;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:Uo[ce||"solid"],u_dash_array:Qe,u_blur:.9}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Pu,fragmentShader:Ga,triangulation:vr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?1:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Ot,kt,ce,Re){return[ce[3],ce[4],ce[5],ce[6]]}}})}}]),dt}(me);function Qs(Y){var vt=fs();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function fs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var hs=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;
varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

   if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  setPickingColor(a_PickingColor);
}
`,os=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,ds={solid:0,dash:1},Ts=function(Y){s()(dt,Y);var vt=Qs(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,ce=kt===void 0?"solid":kt,Re=ht.dashArray,Qe=Re===void 0?[10,5]:Re;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:ds[ce]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:hs,fragmentShader:os,triangulation:vr,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?1:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Ot,kt,ce,Re){return[ce[3],ce[4],ce[5],ce[6]]}}})}}]),dt}(me);function Ou(Y){var vt=Uu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var uo=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fs=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}
vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
}

void main() {
  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  setPickingColor(a_PickingColor);
}

`,ku={solid:0,dash:1},ul=function(Y){s()(dt,Y);var vt=Ou(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,ce=kt===void 0?"solid":kt,Re=ht.dashArray,Qe=Re===void 0?[10,5]:Re;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:ku[ce]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Fs,fragmentShader:uo,triangulation:vr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?1:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Ot,kt,ce,Re){return[ce[3],ce[4],ce[5],ce[6]]}}})}}]),dt}(me);function ll(Y){var vt=Qu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Qu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var To=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
varying vec4 v_color;
varying vec2 v_normal;


// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying float v_distance_ratio;
varying vec4 v_dash_array;
varying float v_side;


#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
// [animate, duration, interval, trailLength],
void main() {
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,La=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5.\uFF0C0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying vec2 v_normal;
varying float v_distance_ratio;
varying float v_side;


void main() {

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = a_Distance / a_Total_Distance;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));
  v_color = a_Color;
  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);
  v_side = a_Miter * a_Size.x;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  setPickingColor(a_PickingColor);
}
`,ya={solid:0,dash:1},wo=function(Y){s()(dt,Y);var vt=ll(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,ce=kt===void 0?"solid":kt,Re=ht.dashArray,Qe=Re===void 0?[10,5,0,0]:Re;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,u_line_type:ya[ce],u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:La,fragmentShader:To,triangulation:Ln,primitive:U.gl.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.lineType,kt=Ot===void 0?"solid":Ot;this.styleAttributeService.registerStyleAttribute({name:"distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Re,Qe,Dn,rr){return[Dn[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Re,Qe,Dn,rr){return[Dn[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Re,Qe,Dn,rr){var kr=Re.size,ei=kr===void 0?1:kr;return Array.isArray(ei)?[ei[0],ei[1]]:[ei,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Re,Qe,Dn,rr,kr){return kr}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:U.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Re,Qe,Dn,rr){return[Dn[4]]}}})}}]),dt}(me),pu={arc:Ps,arc3d:Ts,greatcircle:ul,line:wo},El=pu;function zs(Y){var vt=Ss();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ss(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var ou=function(Y){s()(dt,Y);var vt=zs(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="LineLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new El[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return Ot[ht]}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field;return kt||"line"}}]),dt}(yt);function qs(Y){var vt=Ls();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ls(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var qu=`varying vec4 v_color;
uniform float u_opacity: 1.0;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,su=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform mat4 u_ModelMatrix;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec3 size = a_Size * a_Position;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);

  float lightWeight = calc_lighting(pos);
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(pos);
  setPickingColor(a_PickingColor);
}
`,Wa=function(Y){s()(dt,Y);var vt=qs(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.offsets;return{u_opacity:Ot||1,u_offsets:kt||[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:su,fragmentShader:qu,triangulation:Bn,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt,ce,Re){var Qe=Ot.size;if(Qe){var Dn=[];return Array.isArray(Qe)&&(Dn=Qe.length===2?[Qe[0],Qe[0],Qe[1]]:Qe),Array.isArray(Qe)||(Dn=[Qe]),Dn}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt,ce,Re,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt){var ce=ue(Ot.coordinates);return[ce[0],ce[1],0]}}})}}]),dt}(me);function Sl(Y){var vt=Ql();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ql(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var _l=`#define Animate 0.0

uniform float u_blur : 0;
uniform float u_opacity : 1;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  lowp float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);
  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  // gl_FragColor = v_color * color_t;
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;
  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    gl_FragColor = vec4(gl_FragColor.xyz, intensity);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,ql=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec2 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;

uniform float u_stroke_width : 2;
uniform vec2 u_offsets;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "projection"
#pragma include "picking"

void main() {
  // unpack color(vec2)
  v_color = a_Color;
  vec2 extrude = a_Extrude;

  float shape_type = a_Shape;

  float newSize = setPickingSize(a_Size);

  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  // TODO: billboard
  // anti-alias
  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);

  // construct point coords
  v_data = vec4(extrude, antialiasblur,shape_type);

  setPickingColor(a_PickingColor);
}
`,Gu=function(Y){s()(dt,Y);var vt=Sl(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,ce=ht.stroke,Re=ce===void 0?"rgb(0,0,0,0)":ce,Qe=ht.strokeWidth,Dn=Qe===void 0?1:Qe,rr=ht.strokeOpacity,kr=rr===void 0?1:rr,ei=ht.offsets,Fi=ei===void 0?[0,0]:ei;return{u_opacity:kt,u_stroke_width:Dn,u_stroke_color:Object(O.s)(Re),u_stroke_opacity:kr,u_offsets:[-Fi[0],Fi[1]]}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),gn)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:ql,fragmentShader:_l,triangulation:gn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(ht){return[ht.enable?0:1,ht.speed||1,ht.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:U.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(kt,ce,Re,Qe){var Dn=[1,1,-1,1,-1,-1,1,-1],rr=Qe%4*2;return[Dn[rr],Dn[rr+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(kt,ce,Re,Qe){var Dn=kt.size,rr=Dn===void 0?5:Dn;return Array.isArray(rr)?[rr[0]]:[rr]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:U.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(kt,ce,Re,Qe){var Dn=kt.shape,rr=Dn===void 0?2:Dn,kr=ht.layer.getLayerConfig().shape2d,ei=kr.indexOf(rr);return[ei]}}})}}]),dt}(me);function Ha(Y){var vt=uu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ml=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,vs=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,wu=function(Y){s()(dt,Y);var vt=Ha(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.texture=void 0,lt}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;return{u_opacity:Ot||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var ht=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){ht.updateTexture(),ht.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:vs,fragmentShader:Ml,triangulation:bn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(kt,ce,Re,Qe){var Dn=kt.size;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(kt,ce,Re,Qe){var Dn=ht.fontService.mapping,rr=kt.shape,kr=ht.fontService.getGlyph(rr),ei=Dn[kr],Fi=ei.x,Hi=ei.y;return[Fi,Hi]}}})}},{key:"updateTexture",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.fontService.canvas;this.texture=ht({data:Ot,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Ot.width,height:Ot.height})}},{key:"initIconFontGlyphs",value:function(){var ht=this,Ot=this.layer.getLayerConfig(),kt=Ot.fontWeight,ce=kt===void 0?"normal":kt,Re=Ot.fontFamily,Qe=Re===void 0?"sans-serif":Re,Dn=this.layer.getEncodedData(),rr=[];Dn.forEach(function(kr){var ei=kr.shape,Fi=ei===void 0?"":ei;Fi=Fi.toString();var Hi=ht.fontService.getGlyph(Fi);rr.indexOf(Hi)===-1&&rr.push(Hi)}),this.fontService.setFontOptions({characterSet:rr,fontWeight:ce,fontFamily:Qe,fontSize:48})}}]),dt}(me);function gu(Y){var vt=Vu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Vu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ws=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,Jo=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,ss=function(Y){s()(dt,Y);var vt=gu(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.texture=void 0,lt.updateTexture=function(){var ce=lt.rendererService.createTexture2D;if(lt.texture){lt.texture.update({data:lt.iconService.getCanvas()}),lt.layer.render();return}lt.texture=ce({data:lt.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:lt.iconService.canvasHeight||128})},lt}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.offsets,ce=kt===void 0?[0,0]:kt;return this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Ot||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_offsets:[-ce[0],ce[1]]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Jo,fragmentShader:Ws,triangulation:bn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(kt,ce,Re,Qe){var Dn=kt.size,rr=Dn===void 0?5:Dn;return Array.isArray(rr)?[rr[0]]:[rr]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(kt,ce,Re,Qe){var Dn=ht.iconService.getIconMap(),rr=kt.shape,kr=Dn[rr]||{x:0,y:0},ei=kr.x,Fi=kr.y;return[ei,Fi]}}})}}]),dt}(me);function cl(Y){var vt=Rl();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Rl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var tc=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "picking"
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a =gl_FragColor.a * u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Wu=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform vec2 u_offsets;

#pragma include "projection"
#pragma include "picking"
void main() {
  v_color = a_Color;
  vec2 offset = project_pixel(u_offsets);
  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
    setPickingColor(a_PickingColor);
}
`;function tl(Y){var vt=Y.coordinates;return{vertices:Xe()(vt),indices:[0],size:vt.length}}var Iu=function(Y){s()(dt,Y);var vt=cl(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,ce=ht.stroke,Re=ce===void 0?"rgb(0,0,0,0)":ce,Qe=ht.strokeWidth,Dn=Qe===void 0?1:Qe,rr=ht.offsets,kr=rr===void 0?[0,0]:rr;return{u_opacity:kt,u_stroke_width:Dn,u_stroke_color:Object(O.s)(Re),u_offsets:[-kr[0],kr[1]]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:Wu,fragmentShader:tc,triangulation:tl,depth:{enable:!1},primitive:U.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?1:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:U.BlendType.additive}}}]),dt}(me);function Lu(Y,vt){var dt;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(dt=mu(Y))||vt&&Y&&typeof Y.length=="number"){dt&&(Y=dt);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,ce;return{s:function(){dt=Y[Symbol.iterator]()},n:function(){var Qe=dt.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,ce=Qe},f:function(){try{!Ot&&dt.return!=null&&dt.return()}finally{if(kt)throw ce}}}}function mu(Y,vt){if(!!Y){if(typeof Y=="string")return Hu(Y,vt);var dt=Object.prototype.toString.call(Y).slice(8,-1);if(dt==="Object"&&Y.constructor&&(dt=Y.constructor.name),dt==="Map"||dt==="Set")return Array.from(Y);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return Hu(Y,vt)}}function Hu(Y,vt){(vt==null||vt>Y.length)&&(vt=Y.length);for(var dt=0,lt=new Array(vt);dt<vt;dt++)lt[dt]=Y[dt];return lt}var Us=function(){function Y(vt,dt,lt){T()(this,Y),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var ht=this.boxCells;this.xCellCount=Math.ceil(vt/lt),this.yCellCount=Math.ceil(dt/lt);for(var Ot=0;Ot<this.xCellCount*this.yCellCount;Ot++)ht.push([]);this.boxKeys=[],this.bboxes=[],this.width=vt,this.height=dt,this.xScale=this.xCellCount/vt,this.yScale=this.yCellCount/dt,this.boxUid=0}return t()(Y,[{key:"insert",value:function(dt,lt,ht,Ot,kt){this.forEachCell(lt,ht,Ot,kt,this.insertBoxCell,this.boxUid++),this.boxKeys.push(dt),this.bboxes.push(lt),this.bboxes.push(ht),this.bboxes.push(Ot),this.bboxes.push(kt)}},{key:"query",value:function(dt,lt,ht,Ot,kt){return this.queryHitTest(dt,lt,ht,Ot,!1,kt)}},{key:"hitTest",value:function(dt,lt,ht,Ot,kt){return this.queryHitTest(dt,lt,ht,Ot,!0,kt)}},{key:"insertBoxCell",value:function(dt,lt,ht,Ot,kt,ce){this.boxCells[kt].push(ce)}},{key:"queryHitTest",value:function(dt,lt,ht,Ot,kt,ce){if(ht<0||dt>this.width||Ot<0||lt>this.height)return kt?!1:[];var Re=[];if(dt<=0&&lt<=0&&this.width<=ht&&this.height<=Ot){if(kt)return!0;for(var Qe=0;Qe<this.boxKeys.length;Qe++)Re.push({key:this.boxKeys[Qe],x1:this.bboxes[Qe*4],y1:this.bboxes[Qe*4+1],x2:this.bboxes[Qe*4+2],y2:this.bboxes[Qe*4+3]});return ce?Re.filter(ce):Re}var Dn={hitTest:kt,seenUids:{box:{},circle:{}}};return this.forEachCell(dt,lt,ht,Ot,this.queryCell,Re,Dn,ce),kt?Re.length>0:Re}},{key:"queryCell",value:function(dt,lt,ht,Ot,kt,ce,Re,Qe){var Dn=Re.seenUids,rr=this.boxCells[kt];if(rr!==null){var kr=this.bboxes,ei=Lu(rr),Fi;try{for(ei.s();!(Fi=ei.n()).done;){var Hi=Fi.value;if(!Dn.box[Hi]){Dn.box[Hi]=!0;var aa=Hi*4;if(dt<=kr[aa+2]&&lt<=kr[aa+3]&&ht>=kr[aa+0]&&Ot>=kr[aa+1]&&(!Qe||Qe(this.boxKeys[Hi]))){if(Re.hitTest)return ce.push(!0),!0;ce.push({key:this.boxKeys[Hi],x1:kr[aa],y1:kr[aa+1],x2:kr[aa+2],y2:kr[aa+3]})}}}}catch(fo){ei.e(fo)}finally{ei.f()}}return!1}},{key:"forEachCell",value:function(dt,lt,ht,Ot,kt,ce,Re,Qe){for(var Dn=this.convertToXCellCoord(dt),rr=this.convertToYCellCoord(lt),kr=this.convertToXCellCoord(ht),ei=this.convertToYCellCoord(Ot),Fi=Dn;Fi<=kr;Fi++)for(var Hi=rr;Hi<=ei;Hi++){var aa=this.xCellCount*Hi+Fi;if(kt.call(this,dt,lt,ht,Ot,aa,ce,Re,Qe))return}}},{key:"convertToXCellCoord",value:function(dt){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(dt*this.xScale)))}},{key:"convertToYCellCoord",value:function(dt){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(dt*this.yScale)))}}]),Y}(),Dl=Us,hc=function(){function Y(vt,dt){T()(this,Y),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=vt,this.height=dt,this.viewportPadding=Math.max(vt,dt),this.grid=new Dl(vt+this.viewportPadding,dt+this.viewportPadding,25),this.screenRightBoundary=vt+this.viewportPadding,this.screenBottomBoundary=dt+this.viewportPadding,this.gridRightBoundary=vt+2*this.viewportPadding,this.gridBottomBoundary=dt+2*this.viewportPadding}return t()(Y,[{key:"placeCollisionBox",value:function(dt){var lt=dt.x1+dt.anchorPointX+this.viewportPadding,ht=dt.y1+dt.anchorPointY+this.viewportPadding,Ot=dt.x2+dt.anchorPointX+this.viewportPadding,kt=dt.y2+dt.anchorPointY+this.viewportPadding;return!this.isInsideGrid(lt,ht,Ot,kt)||this.grid.hitTest(lt,ht,Ot,kt)?{box:[]}:{box:[lt,ht,Ot,kt]}}},{key:"insertCollisionBox",value:function(dt,lt){var ht={featureIndex:lt};this.grid.insert(ht,dt[0],dt[1],dt[2],dt[3])}},{key:"project",value:function(dt,lt,ht){var Ot=Hn.e.fromValues(lt,ht,0,1),kt=Hn.e.create(),ce=Hn.b.fromValues.apply(Hn.b,Xe()(dt));return Hn.e.transformMat4(kt,Ot,ce),{x:(kt[0]/kt[3]+1)/2*this.width+this.viewportPadding,y:(-kt[1]/kt[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(dt,lt,ht,Ot){return ht>=0&&dt<this.gridRightBoundary&&Ot>=0&&lt<this.gridBottomBoundary}}]),Y}();function Pl(Y,vt){var dt;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(dt=jl(Y))||vt&&Y&&typeof Y.length=="number"){dt&&(Y=dt);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,ce;return{s:function(){dt=Y[Symbol.iterator]()},n:function(){var Qe=dt.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,ce=Qe},f:function(){try{!Ot&&dt.return!=null&&dt.return()}finally{if(kt)throw ce}}}}function jl(Y,vt){if(!!Y){if(typeof Y=="string")return Bl(Y,vt);var dt=Object.prototype.toString.call(Y).slice(8,-1);if(dt==="Object"&&Y.constructor&&(dt=Y.constructor.name),dt==="Map"||dt==="Set")return Array.from(Y);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return Bl(Y,vt)}}function Bl(Y,vt){(vt==null||vt>Y.length)&&(vt=Y.length);for(var dt=0,lt=new Array(vt);dt<vt;dt++)lt[dt]=Y[dt];return lt}function sc(Y){var vt=.5,dt=.5;switch(Y){case"right":case"top-right":case"bottom-right":vt=1;break;case"left":case"top-left":case"bottom-left":vt=0;break;default:vt=.5}switch(Y){case"bottom":case"bottom-right":case"bottom-left":dt=1;break;case"top":case"top-right":case"top-left":dt=0;break;default:dt=.5}return{horizontalAlign:vt,verticalAlign:dt}}function el(Y,vt,dt,lt,ht){if(!!ht){var Ot=Y[lt],kt=Ot.glyph;if(kt)for(var ce=vt[kt].advance*Ot.scale,Re=(Y[lt].x+ce)*ht,Qe=dt;Qe<=lt;Qe++)Y[Qe].x-=Re}}function Tl(Y,vt,dt,lt,ht,Ot,kt){var ce=(vt-dt)*ht,Re=(-lt*kt+.5)*Ot,Qe=Pl(Y),Dn;try{for(Qe.s();!(Dn=Qe.n()).done;){var rr=Dn.value;rr.x+=ce,rr.y+=Re}}catch(kr){Qe.e(kr)}finally{Qe.f()}}function Nl(Y,vt,dt,lt,ht,Ot,kt){var ce=-8,Re=0,Qe=ce,Dn=0,rr=Y.positionedGlyphs,kr=Ot==="right"?1:Ot==="left"?0:.5,ei=rr.length;dt.forEach(function(Wo){if(Wo.split("").forEach(function(ms){var Js=vt[ms],xl=0;Js&&(rr.push({glyph:ms,x:Re,y:Qe+xl,vertical:!1,scale:1,metrics:Js}),Re+=Js.advance+kt)}),rr.length!==ei){var iu=Re-kt;Dn=Math.max(iu,Dn),el(rr,vt,ei,rr.length-1,kr)}Re=0,Qe+=lt});var Fi=sc(ht),Hi=Fi.horizontalAlign,aa=Fi.verticalAlign;Tl(rr,kr,Hi,aa,Dn,lt,dt.length);var fo=Qe-ce;Y.top+=-aa*fo,Y.bottom=Y.top+fo,Y.left+=-Hi*Dn,Y.right=Y.left+Dn}function tu(Y,vt,dt,lt,ht,Ot){var kt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],ce=Y.split(`
`),Re=[],Qe={positionedGlyphs:Re,top:kt[1],bottom:kt[1],left:kt[0],right:kt[0],lineCount:ce.length,text:Y};return Nl(Qe,vt,ce,dt,lt,ht,Ot),Re.length?Qe:!1}function po(Y){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],dt=arguments.length>2?arguments[2]:void 0,lt=Y.positionedGlyphs,ht=lt===void 0?[]:lt,Ot=[],kt=Pl(ht),ce;try{for(kt.s();!(ce=kt.n()).done;){var Re=ce.value,Qe=Re.metrics,Dn=4,rr=Qe.advance*Re.scale/2,kr=dt?[Re.x+rr,Re.y]:[0,0],ei=dt?[0,0]:[Re.x+rr+vt[0],Re.y+vt[1]],Fi=(0-Dn)*Re.scale-rr+ei[0],Hi=(0-Dn)*Re.scale+ei[1],aa=Fi+Qe.width*Re.scale,fo=Hi+Qe.height*Re.scale,Wo={x:Fi,y:Hi},iu={x:aa,y:Hi},ms={x:Fi,y:fo},Js={x:aa,y:fo};Ot.push({tl:Wo,tr:iu,bl:ms,br:Js,tex:Qe,glyphOffset:kr})}}catch(xl){kt.e(xl)}finally{kt.f()}return Ot}function pl(Y,vt){var dt;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(dt=fl(Y))||vt&&Y&&typeof Y.length=="number"){dt&&(Y=dt);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,ce;return{s:function(){dt=Y[Symbol.iterator]()},n:function(){var Qe=dt.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,ce=Qe},f:function(){try{!Ot&&dt.return!=null&&dt.return()}finally{if(kt)throw ce}}}}function fl(Y,vt){if(!!Y){if(typeof Y=="string")return Hs(Y,vt);var dt=Object.prototype.toString.call(Y).slice(8,-1);if(dt==="Object"&&Y.constructor&&(dt=Y.constructor.name),dt==="Map"||dt==="Set")return Array.from(Y);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return Hs(Y,vt)}}function Hs(Y,vt){(vt==null||vt>Y.length)&&(vt=Y.length);for(var dt=0,lt=new Array(vt);dt<vt;dt++)lt[dt]=Y[dt];return lt}function Da(Y){var vt=bo();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function bo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var ks=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform float u_stroke_opacity: 1.0;
uniform vec4 u_stroke : [0, 0, 0, 1];
uniform float u_strokeWidth : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,gl=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
   v_fontScale = fontScale;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
 highp float angle_sin = sin(a_Rotate);
 highp float angle_cos = cos(a_Rotate);
 mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  gl_Position = vec4(projected_position.xy / projected_position.w
    + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function nl(Y){var vt=this,dt=Y.id,lt=[],ht=[];if(!vt.glyphInfoMap||!vt.glyphInfoMap[dt])return{vertices:[],indices:[],size:7};var Ot=vt.glyphInfoMap[dt].centroid,kt=Ot.length===2?[Ot[0],Ot[1],0]:Ot;return vt.glyphInfoMap[dt].glyphQuads.forEach(function(ce,Re){lt.push.apply(lt,Xe()(kt).concat([ce.tex.x,ce.tex.y+ce.tex.height,ce.tl.x,ce.tl.y],Xe()(kt),[ce.tex.x+ce.tex.width,ce.tex.y+ce.tex.height,ce.tr.x,ce.tr.y],Xe()(kt),[ce.tex.x+ce.tex.width,ce.tex.y,ce.br.x,ce.br.y],Xe()(kt),[ce.tex.x,ce.tex.y,ce.bl.x,ce.bl.y])),ht.push(0+Re*4,1+Re*4,2+Re*4,2+Re*4,3+Re*4,0+Re*4)}),{vertices:lt,indices:ht,size:7}}var Yu=function(Y){s()(dt,Y);var vt=Da(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.glyphInfo=void 0,lt.glyphInfoMap={},lt.texture=void 0,lt.currentZoom=-1,lt.extent=void 0,lt.textureHeight=0,lt.textCount=0,lt.preTextStyle={},lt.buildModels=function(){return lt.initGlyph(),lt.updateTexture(),lt.filterGlyphs(),[lt.layer.buildLayerModel({moduleName:"pointText",vertexShader:gl,fragmentShader:ks,triangulation:nl.bind(y()(lt)),depth:{enable:!1},blend:lt.getBlend()})]},lt}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,ce=ht.stroke,Re=ce===void 0?"#fff":ce,Qe=ht.strokeWidth,Dn=Qe===void 0?0:Qe,rr=ht.strokeOpacity,kr=rr===void 0?1:rr,ei=ht.textAnchor,Fi=ei===void 0?"center":ei,Hi=ht.textAllowOverlap,aa=Hi===void 0?!1:Hi,fo=ht.halo,Wo=fo===void 0?.5:fo,iu=ht.gamma,ms=iu===void 0?2:iu,Js=this.fontService,xl=Js.canvas,Lo=Js.mapping;return Object.keys(Lo).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(Lo).length),this.preTextStyle={textAnchor:Fi,textAllowOverlap:aa},{u_opacity:kt,u_stroke_opacity:kr,u_sdf_map:this.texture,u_stroke:Object(O.s)(Re),u_halo_blur:Wo,u_gamma_scale:ms,u_sdf_map_size:[xl.width,xl.height],u_strokeWidth:Dn}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var ht=this.layer.getLayerConfig(),Ot=ht.textAnchor,kt=Ot===void 0?"center":Ot,ce=ht.textAllowOverlap,Re=ce===void 0?!0:ce;return this.preTextStyle={textAnchor:kt,textAllowOverlap:Re},this.buildModels()}},{key:"needUpdate",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.textAllowOverlap,kt=Ot===void 0?!1:Ot,ce=this.mapService.getZoom(),Re=this.mapService.getBounds(),Qe=Object(O.j)(this.extent,Re);return!kt&&(Math.abs(this.currentZoom-ce)>1||!Qe)||kt!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:U.AttributeType.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.rotate,Dn=Qe===void 0?0:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:U.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){return[ce[5],ce[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?12:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:U.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){return[ce[3],ce[4]]}}})}},{key:"textExtent",value:function(){var ht=this.mapService.getBounds();return Object(O.r)(ht,.5)}},{key:"initTextFont",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.fontWeight,kt=Ot===void 0?"400":Ot,ce=ht.fontFamily,Re=ce===void 0?"sans-serif":ce,Qe=this.layer.getEncodedData(),Dn=[];Qe.forEach(function(rr){var kr=rr.shape,ei=kr===void 0?"":kr;ei=ei.toString();var Fi=pl(ei),Hi;try{for(Fi.s();!(Hi=Fi.n()).done;){var aa=Hi.value;Dn.indexOf(aa)===-1&&Dn.push(aa)}}catch(fo){Fi.e(fo)}finally{Fi.f()}}),this.fontService.setFontOptions({characterSet:Dn,fontWeight:kt,fontFamily:Re})}},{key:"generateGlyphLayout",value:function(){var ht=this,Ot=this.fontService.mapping,kt=this.layer.getLayerConfig(),ce=kt.spacing,Re=ce===void 0?2:ce,Qe=kt.textAnchor,Dn=Qe===void 0?"center":Qe,rr=kt.textOffset,kr=this.layer.getEncodedData();this.glyphInfo=kr.map(function(ei){var Fi=ei.shape,Hi=Fi===void 0?"":Fi,aa=ei.coordinates,fo=ei.id,Wo=ei.size,iu=Wo===void 0?1:Wo,ms=tu(Hi.toString(),Ot,iu,Dn,"center",Re,rr),Js=po(ms,rr,!1);return ei.shaping=ms,ei.glyphQuads=Js,ei.centroid=ue(aa),ht.glyphInfoMap[fo]={shaping:ms,glyphQuads:Js,centroid:ue(aa)},ei})}},{key:"filterGlyphs",value:function(){var ht=this,Ot=this.layer.getLayerConfig(),kt=Ot.padding,ce=kt===void 0?[4,4]:kt,Re=Ot.textAllowOverlap,Qe=Re===void 0?!1:Re;if(!Qe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var Dn=this.rendererService.getViewportSize(),rr=Dn.width,kr=Dn.height,ei=new hc(rr,kr),Fi=this.glyphInfo.filter(function(Hi){var aa=Hi.shaping,fo=Hi.id,Wo=fo===void 0?0:fo,iu=Hi.centroid,ms=Hi.size,Js=ms/24,xl=ht.mapService.lngLatToContainer(iu),Lo=ei.placeCollisionBox({x1:aa.left*Js-ce[0],x2:aa.right*Js+ce[0],y1:aa.top*Js-ce[1],y2:aa.bottom*Js+ce[1],anchorPointX:xl.x,anchorPointY:xl.y}),bl=Lo.box;return bl&&bl.length?(ei.insertCollisionBox(bl,Wo),!0):!1});Fi.forEach(function(Hi){ht.glyphInfoMap[Hi.id]=Hi})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.fontService.canvas;this.textureHeight=Ot.height,this.texture&&this.texture.destroy(),this.texture=ht({data:Ot,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Ot.width,height:Ot.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:gl,fragmentShader:ks,triangulation:nl.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),dt}(me),dc={fill:Gu,image:ss,normal:Iu,extrude:Wa,text:Yu,icon:wu},As=dc;function rl(Y){var vt=lu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function lu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ys=function(Y){s()(dt,Y);var vt=rl(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="PointLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new As[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return Ot[ht]}},{key:"getModelType",value:function(){var ht=this.getEncodedData(),Ot=this.getLayerConfig(),kt=Ot.shape2d,ce=Ot.shape3d,Re=this.iconService.getIconMap(),Qe=ht.find(function(rr){return rr.hasOwnProperty("shape")});if(Qe){var Dn=Qe.shape;return Dn==="dot"?"normal":(kt==null?void 0:kt.indexOf(Dn))!==-1?"fill":(ce==null?void 0:ce.indexOf(Dn))!==-1?"extrude":Re.hasOwnProperty(Dn)?"image":this.fontService.getGlyph(Dn)!==""?"icon":"text"}else return"normal"}}]),dt}(yt);function $o(Y){var vt=eu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function eu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ru=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Qo=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,Wi=function(Y){s()(dt,Y);var vt=$o(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot;return{u_opacity:kt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:Qo,fragmentShader:Ru,triangulation:Yn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Ot,kt,ce,Re,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Ot,kt,ce,Re){var Qe=Ot.size,Dn=Qe===void 0?10:Qe;return Array.isArray(Dn)?[Dn[0]]:[Dn]}}})}}]),dt}(me);function Cs(Y){var vt=Zu();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Du=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,jo=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,Bo=function(Y){s()(dt,Y);var vt=Cs(dt);function dt(){return T()(this,dt),vt.apply(this,arguments)}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot;return{u_opacity:kt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:jo,fragmentShader:Du,triangulation:ir,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),dt}(me),Tu={fill:Bo,line:wo,extrude:Wi,text:Yu,point_fill:Gu,point_image:ss,point_normal:Iu,point_extrude:Wa},Mi=Tu;function il(Y){var vt=ju();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function ju(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Bu=function(Y){s()(dt,Y);var vt=il(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="PolygonLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new Mi[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field;return kt==="fill"?"fill":kt==="extrude"?"extrude":kt==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var ht=this.getEncodedData(),Ot=this.getLayerConfig(),kt=Ot.shape2d,ce=Ot.shape3d,Re=this.iconService.getIconMap(),Qe=ht.find(function(rr){return rr.hasOwnProperty("shape")});if(Qe){var Dn=Qe.shape;return Dn==="dot"?"point_normal":(kt==null?void 0:kt.indexOf(Dn))!==-1?"point_fill":(ce==null?void 0:ce.indexOf(Dn))!==-1?"point_extrude":Re.hasOwnProperty(Dn)?"point_image":"text"}else return"fill"}}]),dt}(yt);function nu(Y){var vt=we();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Pe=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,dn=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,tn=function(Y){s()(dt,Y);var vt=nu(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.texture=void 0,lt.colorTexture=void 0,lt}return t()(dt,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,ce=ht.clampLow,Re=ce===void 0?!0:ce,Qe=ht.clampHigh,Dn=Qe===void 0?!0:Qe,rr=ht.noDataValue,kr=rr===void 0?-9999999:rr,ei=ht.domain,Fi=ei===void 0?[0,1]:ei;return this.updateColorTexure(),{u_opacity:kt||1,u_texture:this.texture,u_domain:Fi,u_clampLow:Re,u_clampHigh:typeof Dn!="undefined"?Dn:Re,u_noDataValue:kr,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var ht=this.layer.getSource(),Ot=this.rendererService.createTexture2D,kt=ht.data.dataArray[0];this.texture=Ot({data:kt.data,width:kt.width,height:kt.height,format:U.gl.LUMINANCE,type:U.gl.FLOAT});var ce=this.layer.getLayerConfig(),Re=ce.rampColors,Qe=Object(O.n)(Re);return this.colorTexture=Ot({data:Qe.data,width:Qe.width,height:Qe.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:dn,fragmentShader:Pe,triangulation:Dr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Ot,kt,ce,Re){return[ce[3],ce[4]]}}})}},{key:"updateColorTexure",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.layer.getLayerConfig(),kt=Ot.rampColors,ce=Object(O.n)(kt);this.colorTexture=ht({data:ce.data,width:ce.width,height:ce.height,flipY:!1})}}]),dt}(me),wn={raster:tn,raster3d:tn},dr=wn;function Rr(Y){var vt=Xr();return function(){var lt=n()(Y),ht;if(vt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Xr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var ti=function(Y){s()(dt,Y);var vt=Rr(dt);function dt(){var lt;T()(this,dt);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=vt.call.apply(vt,[this].concat(Ot)),lt.type="RasterLayer",lt}return t()(dt,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new dr[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={raster:{},raster3d:{}};return Ot[ht]}},{key:"getModelType",value:function(){return"raster"}}]),dt}(yt),Fr,li,yr,Zt,te,Le,Se,Dt;function zt(Y,vt){var dt=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);vt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),dt.push.apply(dt,lt)}return dt}function se(Y){for(var vt=1;vt<arguments.length;vt++){var dt=arguments[vt]!=null?arguments[vt]:{};vt%2?zt(Object(dt),!0).forEach(function(lt){u()(Y,lt,dt[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(dt)):zt(Object(dt)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(dt,lt))})}return Y}var re=(Fr=Object(K.injectable)(),li=Object(K.inject)(U.TYPES.IGlobalConfigService),yr=Object(K.inject)(U.TYPES.ILogService),Fr(Zt=(te=(Dt=function(){function Y(){T()(this,Y),v()(this,"configService",Le,this),v()(this,"logger",Se,this)}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService;dt.hooks.init.tap("DataMappingPlugin",function(){ht.generateMaping(dt,{styleAttributeService:Ot})}),dt.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return dt.dataState.dataMappingNeedUpdate=!1,ht.generateMaping(dt,{styleAttributeService:Ot}),!0}),dt.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!dt.layerModelNeedUpdate){var kt=Ot.getLayerStyleAttributes()||[],ce=Ot.getLayerStyleAttribute("filter"),Re=dt.getSource().data.dataArray,Qe=kt.filter(function(rr){return rr.needRemapping}),Dn=Re;ce!=null&&ce.needRemapping&&ce!==null&&ce!==void 0&&ce.scale&&(Dn=Re.filter(function(rr){return ht.applyAttributeMapping(ce,rr)[0]})),Qe.length&&(ce!=null&&ce.needRemapping?(dt.setEncodedData(ht.mapping(kt,Dn)),ce.needRemapping=!1):dt.setEncodedData(ht.mapping(Qe,Dn,dt.getEncodedData())),ht.logger.debug("remapping finished"),dt.emit("remapping",null))}})}},{key:"generateMaping",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[],ce=Ot.getLayerStyleAttribute("filter"),Re=dt.getSource().data.dataArray,Qe=Re;ce!=null&&ce.scale&&(Qe=Re.filter(function(Dn){return ht.applyAttributeMapping(ce,Dn)[0]})),dt.setEncodedData(this.mapping(kt,Qe))}},{key:"mapping",value:function(dt,lt,ht){var Ot=this;return lt.map(function(kt,ce){var Re=ht?ht[ce]:{},Qe=se({id:kt._id,coordinates:kt.coordinates},Re);return dt.filter(function(Dn){return Dn.scale!==void 0}).forEach(function(Dn){var rr=Ot.applyAttributeMapping(Dn,kt);Dn.needRemapping=!1,Dn.name==="color"&&(rr=rr.map(function(kr){return Object(O.s)(kr)})),Qe[Dn.name]=Array.isArray(rr)&&rr.length===1?rr[0]:rr}),Qe})}},{key:"applyAttributeMapping",value:function(dt,lt){var ht;if(!dt.scale)return[];var Ot=(dt==null||(ht=dt.scale)===null||ht===void 0?void 0:ht.scalers)||[],kt=[];return Ot.forEach(function(ce){var Re,Qe=ce.field;(lt.hasOwnProperty(Qe)||((Re=dt.scale)===null||Re===void 0?void 0:Re.type)==="variable")&&kt.push(lt[Qe])}),dt.mapping?dt.mapping(kt):[]}}]),Y}(),Dt),Le=_()(te.prototype,"configService",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=_()(te.prototype,"logger",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te))||Zt),fe=R("rlAn"),Fe,Ke,rn,Je=(Fe=Object(K.injectable)(),Fe(Ke=(rn=function(){function Y(){T()(this,Y),this.mapService=void 0}return t()(Y,[{key:"apply",value:function(dt){var lt=this;this.mapService=dt.getContainer().get(U.TYPES.IMapService),dt.hooks.init.tap("DataSourcePlugin",function(){var ht=dt.sourceOption,Ot=ht.data,kt=ht.options;dt.setSource(new fe.default(Ot,kt)),lt.updateClusterData(dt)}),dt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var ht=lt.updateClusterData(dt),Ot=dt.dataState.dataSourceNeedUpdate;return dt.dataState.dataSourceNeedUpdate=!1,ht||Ot})}},{key:"updateClusterData",value:function(dt){var lt=dt.getSource(),ht=lt.cluster,Ot=lt.clusterOptions,kt=Ot.zoom,ce=kt===void 0?0:kt,Re=Ot.maxZoom,Qe=Re===void 0?16:Re,Dn=this.mapService.getZoom()-1;return ht&&Math.abs(ce-Dn)>1&&Qe>ce?(lt.updateClusterData(Math.floor(Dn)),!0):!1}}]),Y}(),rn))||Ke),pn=R("7tbW"),hn=R.n(pn),Jn=R("4qC0"),Vn=R.n(Jn),Zn=R("J2iB"),Wn=R.n(Zn),cr=function(Y,vt){return Y<vt?-1:Y>vt?1:Y>=vt?0:NaN},xr=function(Y){return Y.length===1&&(Y=Hr(Y)),{left:function(dt,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=dt.length);ht<Ot;){var kt=ht+Ot>>>1;Y(dt[kt],lt)<0?ht=kt+1:Ot=kt}return ht},right:function(dt,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=dt.length);ht<Ot;){var kt=ht+Ot>>>1;Y(dt[kt],lt)>0?Ot=kt:ht=kt+1}return ht}}};function Hr(Y){return function(vt,dt){return cr(Y(vt),dt)}}var mi=xr(cr),Br=mi.right,ui=mi.left,_i=Br,Zi=function(Y,vt){vt==null&&(vt=Ri);for(var dt=0,lt=Y.length-1,ht=Y[0],Ot=new Array(lt<0?0:lt);dt<lt;)Ot[dt]=vt(ht,ht=Y[++dt]);return Ot};function Ri(Y,vt){return[Y,vt]}var Ma=function(Y,vt,dt){var lt=Y.length,ht=vt.length,Ot=new Array(lt*ht),kt,ce,Re,Qe;for(dt==null&&(dt=Ri),kt=Re=0;kt<lt;++kt)for(Qe=Y[kt],ce=0;ce<ht;++ce,++Re)Ot[Re]=dt(Qe,vt[ce]);return Ot},ga=function(Y,vt){return vt<Y?-1:vt>Y?1:vt>=Y?0:NaN},la=function(Y){return Y===null?NaN:+Y},ii=function(Y,vt){var dt=Y.length,lt=0,ht=-1,Ot=0,kt,ce,Re=0;if(vt==null)for(;++ht<dt;)isNaN(kt=la(Y[ht]))||(ce=kt-Ot,Ot+=ce/++lt,Re+=ce*(kt-Ot));else for(;++ht<dt;)isNaN(kt=la(vt(Y[ht],ht,Y)))||(ce=kt-Ot,Ot+=ce/++lt,Re+=ce*(kt-Ot));if(lt>1)return Re/(lt-1)},Pa=function(Y,vt){var dt=ii(Y,vt);return dt&&Math.sqrt(dt)},Va=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot,kt;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=kt=ht;++lt<dt;)(ht=Y[lt])!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht))}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=kt=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht));return[Ot,kt]},Ya=Array.prototype,Ii=Ya.slice,Ra=Ya.map,lo=function(Y){return function(){return Y}},Rs=function(Y){return Y},Ds=function(Y,vt,dt){Y=+Y,vt=+vt,dt=(ht=arguments.length)<2?(vt=Y,Y=0,1):ht<3?1:+dt;for(var lt=-1,ht=Math.max(0,Math.ceil((vt-Y)/dt))|0,Ot=new Array(ht);++lt<ht;)Ot[lt]=Y+lt*dt;return Ot},Ku=Math.sqrt(50),hu=Math.sqrt(10),j=Math.sqrt(2),I=function(Y,vt,dt){var lt,ht=-1,Ot,kt,ce;if(vt=+vt,Y=+Y,dt=+dt,Y===vt&&dt>0)return[Y];if((lt=vt<Y)&&(Ot=Y,Y=vt,vt=Ot),(ce=w(Y,vt,dt))===0||!isFinite(ce))return[];if(ce>0)for(Y=Math.ceil(Y/ce),vt=Math.floor(vt/ce),kt=new Array(Ot=Math.ceil(vt-Y+1));++ht<Ot;)kt[ht]=(Y+ht)*ce;else for(Y=Math.floor(Y*ce),vt=Math.ceil(vt*ce),kt=new Array(Ot=Math.ceil(Y-vt+1));++ht<Ot;)kt[ht]=(Y-ht)/ce;return lt&&kt.reverse(),kt};function w(Y,vt,dt){var lt=(vt-Y)/Math.max(0,dt),ht=Math.floor(Math.log(lt)/Math.LN10),Ot=lt/Math.pow(10,ht);return ht>=0?(Ot>=Ku?10:Ot>=hu?5:Ot>=j?2:1)*Math.pow(10,ht):-Math.pow(10,-ht)/(Ot>=Ku?10:Ot>=hu?5:Ot>=j?2:1)}function B(Y,vt,dt){var lt=Math.abs(vt-Y)/Math.max(0,dt),ht=Math.pow(10,Math.floor(Math.log(lt)/Math.LN10)),Ot=lt/ht;return Ot>=Ku?ht*=10:Ot>=hu?ht*=5:Ot>=j&&(ht*=2),vt<Y?-ht:ht}var D=function(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1},G=function(){var Y=Rs,vt=Va,dt=D;function lt(ht){var Ot,kt=ht.length,ce,Re=new Array(kt);for(Ot=0;Ot<kt;++Ot)Re[Ot]=Y(ht[Ot],Ot,ht);var Qe=vt(Re),Dn=Qe[0],rr=Qe[1],kr=dt(Re,Dn,rr);Array.isArray(kr)||(kr=B(Dn,rr,kr),kr=Ds(Math.ceil(Dn/kr)*kr,rr,kr));for(var ei=kr.length;kr[0]<=Dn;)kr.shift(),--ei;for(;kr[ei-1]>rr;)kr.pop(),--ei;var Fi=new Array(ei+1),Hi;for(Ot=0;Ot<=ei;++Ot)Hi=Fi[Ot]=[],Hi.x0=Ot>0?kr[Ot-1]:Dn,Hi.x1=Ot<ei?kr[Ot]:rr;for(Ot=0;Ot<kt;++Ot)ce=Re[Ot],Dn<=ce&&ce<=rr&&Fi[_i(kr,ce,0,ei)].push(ht[Ot]);return Fi}return lt.value=function(ht){return arguments.length?(Y=typeof ht=="function"?ht:lo(ht),lt):Y},lt.domain=function(ht){return arguments.length?(vt=typeof ht=="function"?ht:lo([ht[0],ht[1]]),lt):vt},lt.thresholds=function(ht){return arguments.length?(dt=typeof ht=="function"?ht:Array.isArray(ht)?lo(Ii.call(ht)):lo(ht),lt):dt},lt},$=function(Y,vt,dt){if(dt==null&&(dt=la),!!(lt=Y.length)){if((vt=+vt)<=0||lt<2)return+dt(Y[0],0,Y);if(vt>=1)return+dt(Y[lt-1],lt-1,Y);var lt,ht=(lt-1)*vt,Ot=Math.floor(ht),kt=+dt(Y[Ot],Ot,Y),ce=+dt(Y[Ot+1],Ot+1,Y);return kt+(ce-kt)*(ht-Ot)}},st=function(Y,vt,dt){return Y=Ra.call(Y,la).sort(cr),Math.ceil((dt-vt)/(2*($(Y,.75)-$(Y,.25))*Math.pow(Y.length,-1/3)))},Ct=function(Y,vt,dt){return Math.ceil((dt-vt)/(3.5*Pa(Y)*Math.pow(Y.length,-1/3)))},wt=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=Y[lt])!=null&&ht>Ot&&(Ot=ht)}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&ht>Ot&&(Ot=ht);return Ot},Ut=function(Y,vt){var dt=Y.length,lt=dt,ht=-1,Ot,kt=0;if(vt==null)for(;++ht<dt;)isNaN(Ot=la(Y[ht]))?--lt:kt+=Ot;else for(;++ht<dt;)isNaN(Ot=la(vt(Y[ht],ht,Y)))?--lt:kt+=Ot;if(lt)return kt/lt},Yt=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot=[];if(vt==null)for(;++lt<dt;)isNaN(ht=la(Y[lt]))||Ot.push(ht);else for(;++lt<dt;)isNaN(ht=la(vt(Y[lt],lt,Y)))||Ot.push(ht);return $(Ot.sort(cr),.5)},qt=function(Y){for(var vt=Y.length,dt,lt=-1,ht=0,Ot,kt;++lt<vt;)ht+=Y[lt].length;for(Ot=new Array(ht);--vt>=0;)for(kt=Y[vt],dt=kt.length;--dt>=0;)Ot[--ht]=kt[dt];return Ot},he=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=Y[lt])!=null&&Ot>ht&&(Ot=ht)}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&Ot>ht&&(Ot=ht);return Ot},ye=function(Y,vt){for(var dt=vt.length,lt=new Array(dt);dt--;)lt[dt]=Y[vt[dt]];return lt},je=function(Y,vt){if(!!(dt=Y.length)){var dt,lt=0,ht=0,Ot,kt=Y[ht];for(vt==null&&(vt=cr);++lt<dt;)(vt(Ot=Y[lt],kt)<0||vt(kt,kt)!==0)&&(kt=Ot,ht=lt);if(vt(kt,kt)===0)return ht}},Ie=function(Y,vt,dt){for(var lt=(dt==null?Y.length:dt)-(vt=vt==null?0:+vt),ht,Ot;lt;)Ot=Math.random()*lt--|0,ht=Y[lt+vt],Y[lt+vt]=Y[Ot+vt],Y[Ot+vt]=ht;return Y},Ve=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot=0;if(vt==null)for(;++lt<dt;)(ht=+Y[lt])&&(Ot+=ht);else for(;++lt<dt;)(ht=+vt(Y[lt],lt,Y))&&(Ot+=ht);return Ot},qe=function(Y){if(!(Ot=Y.length))return[];for(var vt=-1,dt=he(Y,sn),lt=new Array(dt);++vt<dt;)for(var ht=-1,Ot,kt=lt[vt]=new Array(Ot);++ht<Ot;)kt[ht]=Y[ht][vt];return lt};function sn(Y){return Y.length}var tr=function(){return qe(arguments)},kn=function(Y,vt){return Y<vt?-1:Y>vt?1:Y>=vt?0:NaN},pr=function(Y){return Y.length===1&&(Y=Mr(Y)),{left:function(dt,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=dt.length);ht<Ot;){var kt=ht+Ot>>>1;Y(dt[kt],lt)<0?ht=kt+1:Ot=kt}return ht},right:function(dt,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=dt.length);ht<Ot;){var kt=ht+Ot>>>1;Y(dt[kt],lt)>0?Ot=kt:ht=kt+1}return ht}}};function Mr(Y){return function(vt,dt){return kn(Y(vt),dt)}}var $r=pr(kn),Yr=$r.right,Ti=$r.left,Li=Yr,Ki=function(Y,vt){vt==null&&(vt=Xi);for(var dt=0,lt=Y.length-1,ht=Y[0],Ot=new Array(lt<0?0:lt);dt<lt;)Ot[dt]=vt(ht,ht=Y[++dt]);return Ot};function Xi(Y,vt){return[Y,vt]}var Oa=function(Y,vt,dt){var lt=Y.length,ht=vt.length,Ot=new Array(lt*ht),kt,ce,Re,Qe;for(dt==null&&(dt=Xi),kt=Re=0;kt<lt;++kt)for(Qe=Y[kt],ce=0;ce<ht;++ce,++Re)Ot[Re]=dt(Qe,vt[ce]);return Ot},Na=function(Y,vt){return vt<Y?-1:vt>Y?1:vt>=Y?0:NaN},ji=function(Y){return Y===null?NaN:+Y},Sa=function(Y,vt){var dt=Y.length,lt=0,ht=-1,Ot=0,kt,ce,Re=0;if(vt==null)for(;++ht<dt;)isNaN(kt=ji(Y[ht]))||(ce=kt-Ot,Ot+=ce/++lt,Re+=ce*(kt-Ot));else for(;++ht<dt;)isNaN(kt=ji(vt(Y[ht],ht,Y)))||(ce=kt-Ot,Ot+=ce/++lt,Re+=ce*(kt-Ot));if(lt>1)return Re/(lt-1)},xa=function(Y,vt){var dt=Sa(Y,vt);return dt&&Math.sqrt(dt)},Yi=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot,kt;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=kt=ht;++lt<dt;)(ht=Y[lt])!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht))}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=kt=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht));return[Ot,kt]},_a=Array.prototype,sa=_a.slice,Ia=_a.map,Fa=function(Y){return function(){return Y}},_s=function(Y){return Y},us=function(Y,vt,dt){Y=+Y,vt=+vt,dt=(ht=arguments.length)<2?(vt=Y,Y=0,1):ht<3?1:+dt;for(var lt=-1,ht=Math.max(0,Math.ceil((vt-Y)/dt))|0,Ot=new Array(ht);++lt<ht;)Ot[lt]=Y+lt*dt;return Ot},Os=Math.sqrt(50),es=Math.sqrt(10),js=Math.sqrt(2),ml=function(Y,vt,dt){var lt,ht=-1,Ot,kt,ce;if(vt=+vt,Y=+Y,dt=+dt,Y===vt&&dt>0)return[Y];if((lt=vt<Y)&&(Ot=Y,Y=vt,vt=Ot),(ce=yu(Y,vt,dt))===0||!isFinite(ce))return[];if(ce>0)for(Y=Math.ceil(Y/ce),vt=Math.floor(vt/ce),kt=new Array(Ot=Math.ceil(vt-Y+1));++ht<Ot;)kt[ht]=(Y+ht)*ce;else for(Y=Math.floor(Y*ce),vt=Math.ceil(vt*ce),kt=new Array(Ot=Math.ceil(Y-vt+1));++ht<Ot;)kt[ht]=(Y-ht)/ce;return lt&&kt.reverse(),kt};function yu(Y,vt,dt){var lt=(vt-Y)/Math.max(0,dt),ht=Math.floor(Math.log(lt)/Math.LN10),Ot=lt/Math.pow(10,ht);return ht>=0?(Ot>=Os?10:Ot>=es?5:Ot>=js?2:1)*Math.pow(10,ht):-Math.pow(10,-ht)/(Ot>=Os?10:Ot>=es?5:Ot>=js?2:1)}function Fl(Y,vt,dt){var lt=Math.abs(vt-Y)/Math.max(0,dt),ht=Math.pow(10,Math.floor(Math.log(lt)/Math.LN10)),Ot=lt/ht;return Ot>=Os?ht*=10:Ot>=es?ht*=5:Ot>=js&&(ht*=2),vt<Y?-ht:ht}var xc=function(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1},zl=function(){var Y=_s,vt=Yi,dt=xc;function lt(ht){var Ot,kt=ht.length,ce,Re=new Array(kt);for(Ot=0;Ot<kt;++Ot)Re[Ot]=Y(ht[Ot],Ot,ht);var Qe=vt(Re),Dn=Qe[0],rr=Qe[1],kr=dt(Re,Dn,rr);Array.isArray(kr)||(kr=Fl(Dn,rr,kr),kr=us(Math.ceil(Dn/kr)*kr,rr,kr));for(var ei=kr.length;kr[0]<=Dn;)kr.shift(),--ei;for(;kr[ei-1]>rr;)kr.pop(),--ei;var Fi=new Array(ei+1),Hi;for(Ot=0;Ot<=ei;++Ot)Hi=Fi[Ot]=[],Hi.x0=Ot>0?kr[Ot-1]:Dn,Hi.x1=Ot<ei?kr[Ot]:rr;for(Ot=0;Ot<kt;++Ot)ce=Re[Ot],Dn<=ce&&ce<=rr&&Fi[Li(kr,ce,0,ei)].push(ht[Ot]);return Fi}return lt.value=function(ht){return arguments.length?(Y=typeof ht=="function"?ht:Fa(ht),lt):Y},lt.domain=function(ht){return arguments.length?(vt=typeof ht=="function"?ht:Fa([ht[0],ht[1]]),lt):vt},lt.thresholds=function(ht){return arguments.length?(dt=typeof ht=="function"?ht:Array.isArray(ht)?Fa(sa.call(ht)):Fa(ht),lt):dt},lt},Al=function(Y,vt,dt){if(dt==null&&(dt=ji),!!(lt=Y.length)){if((vt=+vt)<=0||lt<2)return+dt(Y[0],0,Y);if(vt>=1)return+dt(Y[lt-1],lt-1,Y);var lt,ht=(lt-1)*vt,Ot=Math.floor(ht),kt=+dt(Y[Ot],Ot,Y),ce=+dt(Y[Ot+1],Ot+1,Y);return kt+(ce-kt)*(ht-Ot)}},Nc=function(Y,vt,dt){return Y=Ia.call(Y,ji).sort(kn),Math.ceil((dt-vt)/(2*(Al(Y,.75)-Al(Y,.25))*Math.pow(Y.length,-1/3)))},Hc=function(Y,vt,dt){return Math.ceil((dt-vt)/(3.5*xa(Y)*Math.pow(Y.length,-1/3)))},Tc=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=Y[lt])!=null&&ht>Ot&&(Ot=ht)}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&ht>Ot&&(Ot=ht);return Ot},kc=function(Y,vt){var dt=Y.length,lt=dt,ht=-1,Ot,kt=0;if(vt==null)for(;++ht<dt;)isNaN(Ot=ji(Y[ht]))?--lt:kt+=Ot;else for(;++ht<dt;)isNaN(Ot=ji(vt(Y[ht],ht,Y)))?--lt:kt+=Ot;if(lt)return kt/lt},Yc=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot=[];if(vt==null)for(;++lt<dt;)isNaN(ht=ji(Y[lt]))||Ot.push(ht);else for(;++lt<dt;)isNaN(ht=ji(vt(Y[lt],lt,Y)))||Ot.push(ht);return Al(Ot.sort(kn),.5)},Lc=function(Y){for(var vt=Y.length,dt,lt=-1,ht=0,Ot,kt;++lt<vt;)ht+=Y[lt].length;for(Ot=new Array(ht);--vt>=0;)for(kt=Y[vt],dt=kt.length;--dt>=0;)Ot[--ht]=kt[dt];return Ot},Zc=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot;if(vt==null){for(;++lt<dt;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=Y[lt])!=null&&Ot>ht&&(Ot=ht)}else for(;++lt<dt;)if((ht=vt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<dt;)(ht=vt(Y[lt],lt,Y))!=null&&Ot>ht&&(Ot=ht);return Ot},bc=function(Y,vt){for(var dt=vt.length,lt=new Array(dt);dt--;)lt[dt]=Y[vt[dt]];return lt},Au=function(Y,vt){if(!!(dt=Y.length)){var dt,lt=0,ht=0,Ot,kt=Y[ht];for(vt==null&&(vt=kn);++lt<dt;)(vt(Ot=Y[lt],kt)<0||vt(kt,kt)!==0)&&(kt=Ot,ht=lt);if(vt(kt,kt)===0)return ht}},Ec=function(Y,vt,dt){for(var lt=(dt==null?Y.length:dt)-(vt=vt==null?0:+vt),ht,Ot;lt;)Ot=Math.random()*lt--|0,ht=Y[lt+vt],Y[lt+vt]=Y[Ot+vt],Y[Ot+vt]=ht;return Y},Kc=function(Y,vt){var dt=Y.length,lt=-1,ht,Ot=0;if(vt==null)for(;++lt<dt;)(ht=+Y[lt])&&(Ot+=ht);else for(;++lt<dt;)(ht=+vt(Y[lt],lt,Y))&&(Ot+=ht);return Ot},Hl=function(Y){if(!(Ot=Y.length))return[];for(var vt=-1,dt=Zc(Y,al),lt=new Array(dt);++vt<dt;)for(var ht=-1,Ot,kt=lt[vt]=new Array(Ot);++ht<Ot;)kt[ht]=Y[ht][vt];return lt};function al(Y){return Y.length}var Cl=function(){return Hl(arguments)};function ws(Y,vt){switch(arguments.length){case 0:break;case 1:this.range(Y);break;default:this.range(vt).domain(Y);break}return this}function cu(Y,vt){switch(arguments.length){case 0:break;case 1:this.interpolator(Y);break;default:this.interpolator(vt).domain(Y);break}return this}var Is="$";function Yl(){}Yl.prototype=Rc.prototype={constructor:Yl,has:function(vt){return Is+vt in this},get:function(vt){return this[Is+vt]},set:function(vt,dt){return this[Is+vt]=dt,this},remove:function(vt){var dt=Is+vt;return dt in this&&delete this[dt]},clear:function(){for(var vt in this)vt[0]===Is&&delete this[vt]},keys:function(){var vt=[];for(var dt in this)dt[0]===Is&&vt.push(dt.slice(1));return vt},values:function(){var vt=[];for(var dt in this)dt[0]===Is&&vt.push(this[dt]);return vt},entries:function(){var vt=[];for(var dt in this)dt[0]===Is&&vt.push({key:dt.slice(1),value:this[dt]});return vt},size:function(){var vt=0;for(var dt in this)dt[0]===Is&&++vt;return vt},empty:function(){for(var vt in this)if(vt[0]===Is)return!1;return!0},each:function(vt){for(var dt in this)dt[0]===Is&&vt(this[dt],dt.slice(1),this)}};function Rc(Y,vt){var dt=new Yl;if(Y instanceof Yl)Y.each(function(ce,Re){dt.set(Re,ce)});else if(Array.isArray(Y)){var lt=-1,ht=Y.length,Ot;if(vt==null)for(;++lt<ht;)dt.set(lt,Y[lt]);else for(;++lt<ht;)dt.set(vt(Ot=Y[lt],lt,Y),Ot)}else if(Y)for(var kt in Y)dt.set(kt,Y[kt]);return dt}var Dc=Rc,of=function(){var Y=[],vt=[],dt,lt,ht;function Ot(ce,Re,Qe,Dn){if(Re>=Y.length)return dt!=null&&ce.sort(dt),lt!=null?lt(ce):ce;for(var rr=-1,kr=ce.length,ei=Y[Re++],Fi,Hi,aa=Dc(),fo,Wo=Qe();++rr<kr;)(fo=aa.get(Fi=ei(Hi=ce[rr])+""))?fo.push(Hi):aa.set(Fi,[Hi]);return aa.each(function(iu,ms){Dn(Wo,ms,Ot(iu,Re,Qe,Dn))}),Wo}function kt(ce,Re){if(++Re>Y.length)return ce;var Qe,Dn=vt[Re-1];return lt!=null&&Re>=Y.length?Qe=ce.entries():(Qe=[],ce.each(function(rr,kr){Qe.push({key:kr,values:kt(rr,Re)})})),Dn!=null?Qe.sort(function(rr,kr){return Dn(rr.key,kr.key)}):Qe}return ht={object:function(Re){return Ot(Re,0,Ac,tf)},map:function(Re){return Ot(Re,0,jc,Ul)},entries:function(Re){return kt(Ot(Re,0,jc,Ul),0)},key:function(Re){return Y.push(Re),ht},sortKeys:function(Re){return vt[Y.length-1]=Re,ht},sortValues:function(Re){return dt=Re,ht},rollup:function(Re){return lt=Re,ht}}};function Ac(){return{}}function tf(Y,vt,dt){Y[vt]=dt}function jc(){return Dc()}function Ul(Y,vt,dt){Y.set(vt,dt)}function Nu(){}var Cc=Dc.prototype;Nu.prototype=Tf.prototype={constructor:Nu,has:Cc.has,add:function(vt){return vt+="",this[Is+vt]=vt,this},remove:Cc.remove,clear:Cc.clear,values:Cc.keys,size:Cc.size,empty:Cc.empty,each:Cc.each};function Tf(Y,vt){var dt=new Nu;if(Y instanceof Nu)Y.each(function(Ot){dt.add(Ot)});else if(Y){var lt=-1,ht=Y.length;if(vt==null)for(;++lt<ht;)dt.add(Y[lt]);else for(;++lt<ht;)dt.add(vt(Y[lt],lt,Y))}return dt}var Zf=Tf,oh=function(Y){var vt=[];for(var dt in Y)vt.push(dt);return vt},Kf=function(Y){var vt=[];for(var dt in Y)vt.push(Y[dt]);return vt},sh=function(Y){var vt=[];for(var dt in Y)vt.push({key:dt,value:Y[dt]});return vt},Gc=Array.prototype,Af=Gc.map,Fc=Gc.slice,Cf={name:"implicit"};function vc(){var Y=Dc(),vt=[],dt=[],lt=Cf;function ht(Ot){var kt=Ot+"",ce=Y.get(kt);if(!ce){if(lt!==Cf)return lt;Y.set(kt,ce=vt.push(Ot))}return dt[(ce-1)%dt.length]}return ht.domain=function(Ot){if(!arguments.length)return vt.slice();vt=[],Y=Dc();for(var kt=-1,ce=Ot.length,Re,Qe;++kt<ce;)Y.has(Qe=(Re=Ot[kt])+"")||Y.set(Qe,vt.push(Re));return ht},ht.range=function(Ot){return arguments.length?(dt=Fc.call(Ot),ht):dt.slice()},ht.unknown=function(Ot){return arguments.length?(lt=Ot,ht):lt},ht.copy=function(){return vc(vt,dt).unknown(lt)},ws.apply(ht,arguments),ht}function ef(){var Y=vc().unknown(void 0),vt=Y.domain,dt=Y.range,lt=[0,1],ht,Ot,kt=!1,ce=0,Re=0,Qe=.5;delete Y.unknown;function Dn(){var rr=vt().length,kr=lt[1]<lt[0],ei=lt[kr-0],Fi=lt[1-kr];ht=(Fi-ei)/Math.max(1,rr-ce+Re*2),kt&&(ht=Math.floor(ht)),ei+=(Fi-ei-ht*(rr-ce))*Qe,Ot=ht*(1-ce),kt&&(ei=Math.round(ei),Ot=Math.round(Ot));var Hi=us(rr).map(function(aa){return ei+ht*aa});return dt(kr?Hi.reverse():Hi)}return Y.domain=function(rr){return arguments.length?(vt(rr),Dn()):vt()},Y.range=function(rr){return arguments.length?(lt=[+rr[0],+rr[1]],Dn()):lt.slice()},Y.rangeRound=function(rr){return lt=[+rr[0],+rr[1]],kt=!0,Dn()},Y.bandwidth=function(){return Ot},Y.step=function(){return ht},Y.round=function(rr){return arguments.length?(kt=!!rr,Dn()):kt},Y.padding=function(rr){return arguments.length?(ce=Math.min(1,Re=+rr),Dn()):ce},Y.paddingInner=function(rr){return arguments.length?(ce=Math.min(1,rr),Dn()):ce},Y.paddingOuter=function(rr){return arguments.length?(Re=+rr,Dn()):Re},Y.align=function(rr){return arguments.length?(Qe=Math.max(0,Math.min(1,rr)),Dn()):Qe},Y.copy=function(){return ef(vt(),lt).round(kt).paddingInner(ce).paddingOuter(Re).align(Qe)},ws.apply(Dn(),arguments)}function Df(Y){var vt=Y.copy;return Y.padding=Y.paddingOuter,delete Y.paddingInner,delete Y.paddingOuter,Y.copy=function(){return Df(vt())},Y}function jf(){return Df(ef.apply(null,arguments).paddingInner(1))}var sf=R("FmoU");function Bf(Y,vt,dt,lt,ht){var Ot=Y*Y,kt=Ot*Y;return((1-3*Y+3*Ot-kt)*vt+(4-6*Ot+3*kt)*dt+(1+3*Y+3*Ot-3*kt)*lt+kt*ht)/6}var Xf=function(Y){var vt=Y.length-1;return function(dt){var lt=dt<=0?dt=0:dt>=1?(dt=1,vt-1):Math.floor(dt*vt),ht=Y[lt],Ot=Y[lt+1],kt=lt>0?Y[lt-1]:2*ht-Ot,ce=lt<vt-1?Y[lt+2]:2*Ot-ht;return Bf((dt-lt/vt)*vt,kt,ht,Ot,ce)}},Jf=function(Y){var vt=Y.length;return function(dt){var lt=Math.floor(((dt%=1)<0?++dt:dt)*vt),ht=Y[(lt+vt-1)%vt],Ot=Y[lt%vt],kt=Y[(lt+1)%vt],ce=Y[(lt+2)%vt];return Bf((dt-lt/vt)*vt,ht,Ot,kt,ce)}},pf=function(Y){return function(){return Y}};function Of(Y,vt){return function(dt){return Y+dt*vt}}function uh(Y,vt,dt){return Y=Math.pow(Y,dt),vt=Math.pow(vt,dt)-Y,dt=1/dt,function(lt){return Math.pow(Y+lt*vt,dt)}}function nf(Y,vt){var dt=vt-Y;return dt?Of(Y,dt>180||dt<-180?dt-360*Math.round(dt/360):dt):pf(isNaN(Y)?vt:Y)}function gf(Y){return(Y=+Y)==1?xu:function(vt,dt){return dt-vt?uh(vt,dt,Y):pf(isNaN(vt)?dt:vt)}}function xu(Y,vt){var dt=vt-Y;return dt?Of(Y,dt):pf(isNaN(Y)?vt:Y)}var Vc=function Y(vt){var dt=gf(vt);function lt(ht,Ot){var kt=dt((ht=Object(sf.b)(ht)).r,(Ot=Object(sf.b)(Ot)).r),ce=dt(ht.g,Ot.g),Re=dt(ht.b,Ot.b),Qe=xu(ht.opacity,Ot.opacity);return function(Dn){return ht.r=kt(Dn),ht.g=ce(Dn),ht.b=Re(Dn),ht.opacity=Qe(Dn),ht+""}}return lt.gamma=Y,lt}(1);function uf(Y){return function(vt){var dt=vt.length,lt=new Array(dt),ht=new Array(dt),Ot=new Array(dt),kt,ce;for(kt=0;kt<dt;++kt)ce=Object(sf.b)(vt[kt]),lt[kt]=ce.r||0,ht[kt]=ce.g||0,Ot[kt]=ce.b||0;return lt=Y(lt),ht=Y(ht),Ot=Y(Ot),ce.opacity=1,function(Re){return ce.r=lt(Re),ce.g=ht(Re),ce.b=Ot(Re),ce+""}}}var lf=uf(Xf),Oc=uf(Jf),pc=function(Y,vt){vt||(vt=[]);var dt=Y?Math.min(vt.length,Y.length):0,lt=vt.slice(),ht;return function(Ot){for(ht=0;ht<dt;++ht)lt[ht]=Y[ht]*(1-Ot)+vt[ht]*Ot;return lt}};function mf(Y){return ArrayBuffer.isView(Y)&&!(Y instanceof DataView)}var Wc=function(Y,vt){return(mf(vt)?pc:rf)(Y,vt)};function rf(Y,vt){var dt=vt?vt.length:0,lt=Y?Math.min(dt,Y.length):0,ht=new Array(lt),Ot=new Array(dt),kt;for(kt=0;kt<lt;++kt)ht[kt]=un(Y[kt],vt[kt]);for(;kt<dt;++kt)Ot[kt]=vt[kt];return function(ce){for(kt=0;kt<lt;++kt)Ot[kt]=ht[kt](ce);return Ot}}var yf=function(Y,vt){var dt=new Date;return Y=+Y,vt=+vt,function(lt){return dt.setTime(Y*(1-lt)+vt*lt),dt}},zc=function(Y,vt){return Y=+Y,vt=+vt,function(dt){return Y*(1-dt)+vt*dt}},xf=function(Y,vt){var dt={},lt={},ht;(Y===null||typeof Y!="object")&&(Y={}),(vt===null||typeof vt!="object")&&(vt={});for(ht in vt)ht in Y?dt[ht]=un(Y[ht],vt[ht]):lt[ht]=vt[ht];return function(Ot){for(ht in dt)lt[ht]=dt[ht](Ot);return lt}},ve=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ge=new RegExp(ve.source,"g");function Gt(Y){return function(){return Y}}function Kt(Y){return function(vt){return Y(vt)+""}}var Ue=function(Y,vt){var dt=ve.lastIndex=ge.lastIndex=0,lt,ht,Ot,kt=-1,ce=[],Re=[];for(Y=Y+"",vt=vt+"";(lt=ve.exec(Y))&&(ht=ge.exec(vt));)(Ot=ht.index)>dt&&(Ot=vt.slice(dt,Ot),ce[kt]?ce[kt]+=Ot:ce[++kt]=Ot),(lt=lt[0])===(ht=ht[0])?ce[kt]?ce[kt]+=ht:ce[++kt]=ht:(ce[++kt]=null,Re.push({i:kt,x:zc(lt,ht)})),dt=ge.lastIndex;return dt<vt.length&&(Ot=vt.slice(dt),ce[kt]?ce[kt]+=Ot:ce[++kt]=Ot),ce.length<2?Re[0]?Kt(Re[0].x):Gt(vt):(vt=Re.length,function(Qe){for(var Dn=0,rr;Dn<vt;++Dn)ce[(rr=Re[Dn]).i]=rr.x(Qe);return ce.join("")})},un=function(Y,vt){var dt=typeof vt,lt;return vt==null||dt==="boolean"?pf(vt):(dt==="number"?zc:dt==="string"?(lt=Object(sf.a)(vt))?(vt=lt,Vc):Ue:vt instanceof sf.a?Vc:vt instanceof Date?yf:mf(vt)?pc:Array.isArray(vt)?rf:typeof vt.valueOf!="function"&&typeof vt.toString!="function"||isNaN(vt)?xf:zc)(Y,vt)},Gn=function(Y,vt){return Y=+Y,vt=+vt,function(dt){return Math.round(Y*(1-dt)+vt*dt)}},mr=function(Y){return function(){return Y}},gr=function(Y){return+Y},Qr=[0,1];function xi(Y){return Y}function Ji(Y,vt){return(vt-=Y=+Y)?function(dt){return(dt-Y)/vt}:mr(isNaN(vt)?NaN:.5)}function fa(Y){var vt=Y[0],dt=Y[Y.length-1],lt;return vt>dt&&(lt=vt,vt=dt,dt=lt),function(ht){return Math.max(vt,Math.min(dt,ht))}}function ba(Y,vt,dt){var lt=Y[0],ht=Y[1],Ot=vt[0],kt=vt[1];return ht<lt?(lt=Ji(ht,lt),Ot=dt(kt,Ot)):(lt=Ji(lt,ht),Ot=dt(Ot,kt)),function(ce){return Ot(lt(ce))}}function oo(Y,vt,dt){var lt=Math.min(Y.length,vt.length)-1,ht=new Array(lt),Ot=new Array(lt),kt=-1;for(Y[lt]<Y[0]&&(Y=Y.slice().reverse(),vt=vt.slice().reverse());++kt<lt;)ht[kt]=Ji(Y[kt],Y[kt+1]),Ot[kt]=dt(vt[kt],vt[kt+1]);return function(ce){var Re=Li(Y,ce,1,lt)-1;return Ot[Re](ht[Re](ce))}}function ro(Y,vt){return vt.domain(Y.domain()).range(Y.range()).interpolate(Y.interpolate()).clamp(Y.clamp()).unknown(Y.unknown())}function No(){var Y=Qr,vt=Qr,dt=un,lt,ht,Ot,kt=xi,ce,Re,Qe;function Dn(){return ce=Math.min(Y.length,vt.length)>2?oo:ba,Re=Qe=null,rr}function rr(kr){return isNaN(kr=+kr)?Ot:(Re||(Re=ce(Y.map(lt),vt,dt)))(lt(kt(kr)))}return rr.invert=function(kr){return kt(ht((Qe||(Qe=ce(vt,Y.map(lt),zc)))(kr)))},rr.domain=function(kr){return arguments.length?(Y=Af.call(kr,gr),kt===xi||(kt=fa(Y)),Dn()):Y.slice()},rr.range=function(kr){return arguments.length?(vt=Fc.call(kr),Dn()):vt.slice()},rr.rangeRound=function(kr){return vt=Fc.call(kr),dt=Gn,Dn()},rr.clamp=function(kr){return arguments.length?(kt=kr?fa(Y):xi,rr):kt!==xi},rr.interpolate=function(kr){return arguments.length?(dt=kr,Dn()):dt},rr.unknown=function(kr){return arguments.length?(Ot=kr,rr):Ot},function(kr,ei){return lt=kr,ht=ei,Dn()}}function ko(Y,vt){return No()(Y,vt)}var Gs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bs(Y){if(!(vt=Gs.exec(Y)))throw new Error("invalid format: "+Y);var vt;return new bu({fill:vt[1],align:vt[2],sign:vt[3],symbol:vt[4],zero:vt[5],width:vt[6],comma:vt[7],precision:vt[8]&&vt[8].slice(1),trim:vt[9],type:vt[10]})}Bs.prototype=bu.prototype;function bu(Y){this.fill=Y.fill===void 0?" ":Y.fill+"",this.align=Y.align===void 0?">":Y.align+"",this.sign=Y.sign===void 0?"-":Y.sign+"",this.symbol=Y.symbol===void 0?"":Y.symbol+"",this.zero=!!Y.zero,this.width=Y.width===void 0?void 0:+Y.width,this.comma=!!Y.comma,this.precision=Y.precision===void 0?void 0:+Y.precision,this.trim=!!Y.trim,this.type=Y.type===void 0?"":Y.type+""}bu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var Ns=function(Y){return Math.abs(Y=Math.round(Y))>=1e21?Y.toLocaleString("en").replace(/,/g,""):Y.toString(10)};function ru(Y,vt){if((dt=(Y=vt?Y.toExponential(vt-1):Y.toExponential()).indexOf("e"))<0)return null;var dt,lt=Y.slice(0,dt);return[lt.length>1?lt[0]+lt.slice(2):lt,+Y.slice(dt+1)]}var io=function(Y){return Y=ru(Math.abs(Y)),Y?Y[1]:NaN},Eu=function(Y,vt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(io(vt)/3)))*3-io(Math.abs(Y)))},Ol=function(Y,vt){return function(dt,lt){for(var ht=dt.length,Ot=[],kt=0,ce=Y[0],Re=0;ht>0&&ce>0&&(Re+ce+1>lt&&(ce=Math.max(1,lt-Re)),Ot.push(dt.substring(ht-=ce,ht+ce)),!((Re+=ce+1)>lt));)ce=Y[kt=(kt+1)%Y.length];return Ot.reverse().join(vt)}},ps=function(Y){return function(vt){return vt.replace(/[0-9]/g,function(dt){return Y[+dt]})}},Vs=function(Y){t:for(var vt=Y.length,dt=1,lt=-1,ht;dt<vt;++dt)switch(Y[dt]){case".":lt=ht=dt;break;case"0":lt===0&&(lt=dt),ht=dt;break;default:if(!+Y[dt])break t;lt>0&&(lt=0);break}return lt>0?Y.slice(0,lt)+Y.slice(ht+1):Y},Go,hl=function(Y,vt){var dt=ru(Y,vt);if(!dt)return Y+"";var lt=dt[0],ht=dt[1],Ot=ht-(Go=Math.max(-8,Math.min(8,Math.floor(ht/3)))*3)+1,kt=lt.length;return Ot===kt?lt:Ot>kt?lt+new Array(Ot-kt+1).join("0"):Ot>0?lt.slice(0,Ot)+"."+lt.slice(Ot):"0."+new Array(1-Ot).join("0")+ru(Y,Math.max(0,vt+Ot-1))[0]},bf=function(Y,vt){var dt=ru(Y,vt);if(!dt)return Y+"";var lt=dt[0],ht=dt[1];return ht<0?"0."+new Array(-ht).join("0")+lt:lt.length>ht+1?lt.slice(0,ht+1)+"."+lt.slice(ht+1):lt+new Array(ht-lt.length+2).join("0")},Xc={"%":function(vt,dt){return(vt*100).toFixed(dt)},b:function(vt){return Math.round(vt).toString(2)},c:function(vt){return vt+""},d:Ns,e:function(vt,dt){return vt.toExponential(dt)},f:function(vt,dt){return vt.toFixed(dt)},g:function(vt,dt){return vt.toPrecision(dt)},o:function(vt){return Math.round(vt).toString(8)},p:function(vt,dt){return bf(vt*100,dt)},r:bf,s:hl,X:function(vt){return Math.round(vt).toString(16).toUpperCase()},x:function(vt){return Math.round(vt).toString(16)}},mh=function(Y){return Y},wf=Array.prototype.map,ic=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],Dh=function(Y){var vt=Y.grouping===void 0||Y.thousands===void 0?mh:Ol(wf.call(Y.grouping,Number),Y.thousands+""),dt=Y.currency===void 0?"":Y.currency[0]+"",lt=Y.currency===void 0?"":Y.currency[1]+"",ht=Y.decimal===void 0?".":Y.decimal+"",Ot=Y.numerals===void 0?mh:ps(wf.call(Y.numerals,String)),kt=Y.percent===void 0?"%":Y.percent+"",ce=Y.minus===void 0?"-":Y.minus+"",Re=Y.nan===void 0?"NaN":Y.nan+"";function Qe(rr){rr=Bs(rr);var kr=rr.fill,ei=rr.align,Fi=rr.sign,Hi=rr.symbol,aa=rr.zero,fo=rr.width,Wo=rr.comma,iu=rr.precision,ms=rr.trim,Js=rr.type;Js==="n"?(Wo=!0,Js="g"):Xc[Js]||(iu===void 0&&(iu=12),ms=!0,Js="g"),(aa||kr==="0"&&ei==="=")&&(aa=!0,kr="0",ei="=");var xl=Hi==="$"?dt:Hi==="#"&&/[boxX]/.test(Js)?"0"+Js.toLowerCase():"",Lo=Hi==="$"?lt:/[%p]/.test(Js)?kt:"",bl=Xc[Js],Jl=/[defgprs%]/.test(Js);iu=iu===void 0?6:/[gprs]/.test(Js)?Math.max(1,Math.min(21,iu)):Math.max(0,Math.min(20,iu));function yc(Ho){var oc=xl,Wl=Lo,ah,Kd,hd;if(Js==="c")Wl=bl(Ho)+Wl,Ho="";else{Ho=+Ho;var dd=Ho<0||1/Ho<0;if(Ho=isNaN(Ho)?Re:bl(Math.abs(Ho),iu),ms&&(Ho=Vs(Ho)),dd&&+Ho==0&&Fi!=="+"&&(dd=!1),oc=(dd?Fi==="("?Fi:ce:Fi==="-"||Fi==="("?"":Fi)+oc,Wl=(Js==="s"?ic[8+Go/3]:"")+Wl+(dd&&Fi==="("?")":""),Jl){for(ah=-1,Kd=Ho.length;++ah<Kd;)if(hd=Ho.charCodeAt(ah),48>hd||hd>57){Wl=(hd===46?ht+Ho.slice(ah+1):Ho.slice(ah))+Wl,Ho=Ho.slice(0,ah);break}}}Wo&&!aa&&(Ho=vt(Ho,Infinity));var vd=oc.length+Ho.length+Wl.length,Yf=vd<fo?new Array(fo-vd+1).join(kr):"";switch(Wo&&aa&&(Ho=vt(Yf+Ho,Yf.length?fo-Wl.length:Infinity),Yf=""),ei){case"<":Ho=oc+Ho+Wl+Yf;break;case"=":Ho=oc+Yf+Ho+Wl;break;case"^":Ho=Yf.slice(0,vd=Yf.length>>1)+oc+Ho+Wl+Yf.slice(vd);break;default:Ho=Yf+oc+Ho+Wl;break}return Ot(Ho)}return yc.toString=function(){return rr+""},yc}function Dn(rr,kr){var ei=Qe((rr=Bs(rr),rr.type="f",rr)),Fi=Math.max(-8,Math.min(8,Math.floor(io(kr)/3)))*3,Hi=Math.pow(10,-Fi),aa=ic[8+Fi/3];return function(fo){return ei(Hi*fo)+aa}}return{format:Qe,formatPrefix:Dn}},Nf,lh,jt;Et({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Et(Y){return Nf=Dh(Y),lh=Nf.format,jt=Nf.formatPrefix,Nf}var tt=function(Y,vt){return Y=Math.abs(Y),vt=Math.abs(vt)-Y,Math.max(0,io(vt)-io(Y))+1},St=function(Y){return Math.max(0,-io(Math.abs(Y)))},Lt=function(Y,vt,dt,lt){var ht=Fl(Y,vt,dt),Ot;switch(lt=Bs(lt==null?",f":lt),lt.type){case"s":{var kt=Math.max(Math.abs(Y),Math.abs(vt));return lt.precision==null&&!isNaN(Ot=Eu(ht,kt))&&(lt.precision=Ot),jt(lt,kt)}case"":case"e":case"g":case"p":case"r":{lt.precision==null&&!isNaN(Ot=tt(ht,Math.max(Math.abs(Y),Math.abs(vt))))&&(lt.precision=Ot-(lt.type==="e"));break}case"f":case"%":{lt.precision==null&&!isNaN(Ot=St(ht))&&(lt.precision=Ot-(lt.type==="%")*2);break}}return lh(lt)};function ae(Y){var vt=Y.domain;return Y.ticks=function(dt){var lt=vt();return ml(lt[0],lt[lt.length-1],dt==null?10:dt)},Y.tickFormat=function(dt,lt){var ht=vt();return Lt(ht[0],ht[ht.length-1],dt==null?10:dt,lt)},Y.nice=function(dt){dt==null&&(dt=10);var lt=vt(),ht=0,Ot=lt.length-1,kt=lt[ht],ce=lt[Ot],Re;return ce<kt&&(Re=kt,kt=ce,ce=Re,Re=ht,ht=Ot,Ot=Re),Re=yu(kt,ce,dt),Re>0?(kt=Math.floor(kt/Re)*Re,ce=Math.ceil(ce/Re)*Re,Re=yu(kt,ce,dt)):Re<0&&(kt=Math.ceil(kt*Re)/Re,ce=Math.floor(ce*Re)/Re,Re=yu(kt,ce,dt)),Re>0?(lt[ht]=Math.floor(kt/Re)*Re,lt[Ot]=Math.ceil(ce/Re)*Re,vt(lt)):Re<0&&(lt[ht]=Math.ceil(kt*Re)/Re,lt[Ot]=Math.floor(ce*Re)/Re,vt(lt)),Y},Y}function ke(){var Y=ko(xi,xi);return Y.copy=function(){return ro(Y,ke())},ws.apply(Y,arguments),ae(Y)}function yn(Y){var vt;function dt(lt){return isNaN(lt=+lt)?vt:lt}return dt.invert=dt,dt.domain=dt.range=function(lt){return arguments.length?(Y=Af.call(lt,gr),dt):Y.slice()},dt.unknown=function(lt){return arguments.length?(vt=lt,dt):vt},dt.copy=function(){return yn(Y).unknown(vt)},Y=arguments.length?Af.call(Y,gr):[0,1],ae(dt)}var vn=function(Y,vt){Y=Y.slice();var dt=0,lt=Y.length-1,ht=Y[dt],Ot=Y[lt],kt;return Ot<ht&&(kt=dt,dt=lt,lt=kt,kt=ht,ht=Ot,Ot=kt),Y[dt]=vt.floor(ht),Y[lt]=vt.ceil(Ot),Y};function Cn(Y){return Math.log(Y)}function ne(Y){return Math.exp(Y)}function _e(Y){return-Math.log(-Y)}function Ze(Y){return-Math.exp(-Y)}function In(Y){return isFinite(Y)?+("1e"+Y):Y<0?0:Y}function ar(Y){return Y===10?In:Y===Math.E?Math.exp:function(vt){return Math.pow(Y,vt)}}function ur(Y){return Y===Math.E?Math.log:Y===10&&Math.log10||Y===2&&Math.log2||(Y=Math.log(Y),function(vt){return Math.log(vt)/Y})}function sr(Y){return function(vt){return-Y(-vt)}}function Or(Y){var vt=Y(Cn,ne),dt=vt.domain,lt=10,ht,Ot;function kt(){return ht=ur(lt),Ot=ar(lt),dt()[0]<0?(ht=sr(ht),Ot=sr(Ot),Y(_e,Ze)):Y(Cn,ne),vt}return vt.base=function(ce){return arguments.length?(lt=+ce,kt()):lt},vt.domain=function(ce){return arguments.length?(dt(ce),kt()):dt()},vt.ticks=function(ce){var Re=dt(),Qe=Re[0],Dn=Re[Re.length-1],rr;(rr=Dn<Qe)&&(kr=Qe,Qe=Dn,Dn=kr);var kr=ht(Qe),ei=ht(Dn),Fi,Hi,aa,fo=ce==null?10:+ce,Wo=[];if(!(lt%1)&&ei-kr<fo){if(kr=Math.round(kr)-1,ei=Math.round(ei)+1,Qe>0){for(;kr<ei;++kr)for(Hi=1,Fi=Ot(kr);Hi<lt;++Hi)if(aa=Fi*Hi,!(aa<Qe)){if(aa>Dn)break;Wo.push(aa)}}else for(;kr<ei;++kr)for(Hi=lt-1,Fi=Ot(kr);Hi>=1;--Hi)if(aa=Fi*Hi,!(aa<Qe)){if(aa>Dn)break;Wo.push(aa)}}else Wo=ml(kr,ei,Math.min(ei-kr,fo)).map(Ot);return rr?Wo.reverse():Wo},vt.tickFormat=function(ce,Re){if(Re==null&&(Re=lt===10?".0e":","),typeof Re!="function"&&(Re=lh(Re)),ce===Infinity)return Re;ce==null&&(ce=10);var Qe=Math.max(1,lt*ce/vt.ticks().length);return function(Dn){var rr=Dn/Ot(Math.round(ht(Dn)));return rr*lt<lt-.5&&(rr*=lt),rr<=Qe?Re(Dn):""}},vt.nice=function(){return dt(vn(dt(),{floor:function(Re){return Ot(Math.floor(ht(Re)))},ceil:function(Re){return Ot(Math.ceil(ht(Re)))}}))},vt}function ri(){var Y=Or(No()).domain([1,10]);return Y.copy=function(){return ro(Y,ri()).base(Y.base())},ws.apply(Y,arguments),Y}function Vr(Y){return function(vt){return Math.sign(vt)*Math.log1p(Math.abs(vt/Y))}}function ni(Y){return function(vt){return Math.sign(vt)*Math.expm1(Math.abs(vt))*Y}}function fi(Y){var vt=1,dt=Y(Vr(vt),ni(vt));return dt.constant=function(lt){return arguments.length?Y(Vr(vt=+lt),ni(vt)):vt},ae(dt)}function Oi(){var Y=fi(No());return Y.copy=function(){return ro(Y,Oi()).constant(Y.constant())},ws.apply(Y,arguments)}function vi(Y){return function(vt){return vt<0?-Math.pow(-vt,Y):Math.pow(vt,Y)}}function si(Y){return Y<0?-Math.sqrt(-Y):Math.sqrt(Y)}function Lr(Y){return Y<0?-Y*Y:Y*Y}function _r(Y){var vt=Y(xi,xi),dt=1;function lt(){return dt===1?Y(xi,xi):dt===.5?Y(si,Lr):Y(vi(dt),vi(1/dt))}return vt.exponent=function(ht){return arguments.length?(dt=+ht,lt()):dt},ae(vt)}function di(){var Y=_r(No());return Y.copy=function(){return ro(Y,di()).exponent(Y.exponent())},ws.apply(Y,arguments),Y}function Vi(){return di.apply(null,arguments).exponent(.5)}function qr(){var Y=[],vt=[],dt=[],lt;function ht(){var kt=0,ce=Math.max(1,vt.length);for(dt=new Array(ce-1);++kt<ce;)dt[kt-1]=Al(Y,kt/ce);return Ot}function Ot(kt){return isNaN(kt=+kt)?lt:vt[Li(dt,kt)]}return Ot.invertExtent=function(kt){var ce=vt.indexOf(kt);return ce<0?[NaN,NaN]:[ce>0?dt[ce-1]:Y[0],ce<dt.length?dt[ce]:Y[Y.length-1]]},Ot.domain=function(kt){if(!arguments.length)return Y.slice();Y=[];for(var ce=0,Re=kt.length,Qe;ce<Re;++ce)Qe=kt[ce],Qe!=null&&!isNaN(Qe=+Qe)&&Y.push(Qe);return Y.sort(kn),ht()},Ot.range=function(kt){return arguments.length?(vt=Fc.call(kt),ht()):vt.slice()},Ot.unknown=function(kt){return arguments.length?(lt=kt,Ot):lt},Ot.quantiles=function(){return dt.slice()},Ot.copy=function(){return qr().domain(Y).range(vt).unknown(lt)},ws.apply(Ot,arguments)}function na(){var Y=0,vt=1,dt=1,lt=[.5],ht=[0,1],Ot;function kt(Re){return Re<=Re?ht[Li(lt,Re,0,dt)]:Ot}function ce(){var Re=-1;for(lt=new Array(dt);++Re<dt;)lt[Re]=((Re+1)*vt-(Re-dt)*Y)/(dt+1);return kt}return kt.domain=function(Re){return arguments.length?(Y=+Re[0],vt=+Re[1],ce()):[Y,vt]},kt.range=function(Re){return arguments.length?(dt=(ht=Fc.call(Re)).length-1,ce()):ht.slice()},kt.invertExtent=function(Re){var Qe=ht.indexOf(Re);return Qe<0?[NaN,NaN]:Qe<1?[Y,lt[0]]:Qe>=dt?[lt[dt-1],vt]:[lt[Qe-1],lt[Qe]]},kt.unknown=function(Re){return arguments.length&&(Ot=Re),kt},kt.thresholds=function(){return lt.slice()},kt.copy=function(){return na().domain([Y,vt]).range(ht).unknown(Ot)},ws.apply(ae(kt),arguments)}function wi(){var Y=[.5],vt=[0,1],dt,lt=1;function ht(Ot){return Ot<=Ot?vt[Li(Y,Ot,0,lt)]:dt}return ht.domain=function(Ot){return arguments.length?(Y=Fc.call(Ot),lt=Math.min(Y.length,vt.length-1),ht):Y.slice()},ht.range=function(Ot){return arguments.length?(vt=Fc.call(Ot),lt=Math.min(Y.length,vt.length-1),ht):vt.slice()},ht.invertExtent=function(Ot){var kt=vt.indexOf(Ot);return[Y[kt-1],Y[kt]]},ht.unknown=function(Ot){return arguments.length?(dt=Ot,ht):dt},ht.copy=function(){return wi().domain(Y).range(vt).unknown(dt)},ws.apply(ht,arguments)}var Pi=new Date,yi=new Date;function bi(Y,vt,dt,lt){function ht(Ot){return Y(Ot=arguments.length===0?new Date:new Date(+Ot)),Ot}return ht.floor=function(Ot){return Y(Ot=new Date(+Ot)),Ot},ht.ceil=function(Ot){return Y(Ot=new Date(Ot-1)),vt(Ot,1),Y(Ot),Ot},ht.round=function(Ot){var kt=ht(Ot),ce=ht.ceil(Ot);return Ot-kt<ce-Ot?kt:ce},ht.offset=function(Ot,kt){return vt(Ot=new Date(+Ot),kt==null?1:Math.floor(kt)),Ot},ht.range=function(Ot,kt,ce){var Re=[],Qe;if(Ot=ht.ceil(Ot),ce=ce==null?1:Math.floor(ce),!(Ot<kt)||!(ce>0))return Re;do Re.push(Qe=new Date(+Ot)),vt(Ot,ce),Y(Ot);while(Qe<Ot&&Ot<kt);return Re},ht.filter=function(Ot){return bi(function(kt){if(kt>=kt)for(;Y(kt),!Ot(kt);)kt.setTime(kt-1)},function(kt,ce){if(kt>=kt)if(ce<0)for(;++ce<=0;)for(;vt(kt,-1),!Ot(kt););else for(;--ce>=0;)for(;vt(kt,1),!Ot(kt););})},dt&&(ht.count=function(Ot,kt){return Pi.setTime(+Ot),yi.setTime(+kt),Y(Pi),Y(yi),Math.floor(dt(Pi,yi))},ht.every=function(Ot){return Ot=Math.floor(Ot),!isFinite(Ot)||!(Ot>0)?null:Ot>1?ht.filter(lt?function(kt){return lt(kt)%Ot==0}:function(kt){return ht.count(0,kt)%Ot==0}):ht}),ht}var ra=bi(function(Y){Y.setMonth(0,1),Y.setHours(0,0,0,0)},function(Y,vt){Y.setFullYear(Y.getFullYear()+vt)},function(Y,vt){return vt.getFullYear()-Y.getFullYear()},function(Y){return Y.getFullYear()});ra.every=function(Y){return!isFinite(Y=Math.floor(Y))||!(Y>0)?null:bi(function(vt){vt.setFullYear(Math.floor(vt.getFullYear()/Y)*Y),vt.setMonth(0,1),vt.setHours(0,0,0,0)},function(vt,dt){vt.setFullYear(vt.getFullYear()+dt*Y)})};var ha=ra,Ni=ra.range,Ei=bi(function(Y){Y.setDate(1),Y.setHours(0,0,0,0)},function(Y,vt){Y.setMonth(Y.getMonth()+vt)},function(Y,vt){return vt.getMonth()-Y.getMonth()+(vt.getFullYear()-Y.getFullYear())*12},function(Y){return Y.getMonth()}),gi=Ei,za=Ei.range,$i=1e3,Gi=6e4,co=36e5,qa=864e5,Ao=6048e5;function Fo(Y){return bi(function(vt){vt.setDate(vt.getDate()-(vt.getDay()+7-Y)%7),vt.setHours(0,0,0,0)},function(vt,dt){vt.setDate(vt.getDate()+dt*7)},function(vt,dt){return(dt-vt-(dt.getTimezoneOffset()-vt.getTimezoneOffset())*Gi)/Ao})}var dl=Fo(0),kl=Fo(1),Vo=Fo(2),vl=Fo(3),Zs=Fo(4),Gl=Fo(5),Zl=Fo(6),ac=dl.range,uc=kl.range,gc=Vo.range,Vl=vl.range,Co=Zs.range,Sc=Gl.range,Ks=Zl.range,Ua=bi(function(Y){Y.setHours(0,0,0,0)},function(Y,vt){Y.setDate(Y.getDate()+vt)},function(Y,vt){return(vt-Y-(vt.getTimezoneOffset()-Y.getTimezoneOffset())*Gi)/qa},function(Y){return Y.getDate()-1}),ho=Ua,ns=Ua.range,ec=bi(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*$i-Y.getMinutes()*Gi)},function(Y,vt){Y.setTime(+Y+vt*co)},function(Y,vt){return(vt-Y)/co},function(Y){return Y.getHours()}),mc=ec,Ef=ec.range,jn=bi(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*$i)},function(Y,vt){Y.setTime(+Y+vt*Gi)},function(Y,vt){return(vt-Y)/Gi},function(Y){return Y.getMinutes()}),Zr=jn,Ur=jn.range,Qi=bi(function(Y){Y.setTime(Y-Y.getMilliseconds())},function(Y,vt){Y.setTime(+Y+vt*$i)},function(Y,vt){return(vt-Y)/$i},function(Y){return Y.getUTCSeconds()}),Po=Qi,Mn=Qi.range,on=bi(function(){},function(Y,vt){Y.setTime(+Y+vt)},function(Y,vt){return vt-Y});on.every=function(Y){return Y=Math.floor(Y),!isFinite(Y)||!(Y>0)?null:Y>1?bi(function(vt){vt.setTime(Math.floor(vt/Y)*Y)},function(vt,dt){vt.setTime(+vt+dt*Y)},function(vt,dt){return(dt-vt)/Y}):on};var er=on,Ir=on.range;function wr(Y){return bi(function(vt){vt.setUTCDate(vt.getUTCDate()-(vt.getUTCDay()+7-Y)%7),vt.setUTCHours(0,0,0,0)},function(vt,dt){vt.setUTCDate(vt.getUTCDate()+dt*7)},function(vt,dt){return(dt-vt)/Ao})}var lr=wr(0),nr=wr(1),Er=wr(2),Tn=wr(3),Kn=wr(4),xn=wr(5),Tr=wr(6),jr=lr.range,ci=nr.range,Kr=Er.range,oi=Tn.range,Di=Kn.range,da=xn.range,Io=Tr.range,ua=bi(function(Y){Y.setUTCHours(0,0,0,0)},function(Y,vt){Y.setUTCDate(Y.getUTCDate()+vt)},function(Y,vt){return(vt-Y)/qa},function(Y){return Y.getUTCDate()-1}),ja=ua,Eo=ua.range,gs=bi(function(Y){Y.setUTCMonth(0,1),Y.setUTCHours(0,0,0,0)},function(Y,vt){Y.setUTCFullYear(Y.getUTCFullYear()+vt)},function(Y,vt){return vt.getUTCFullYear()-Y.getUTCFullYear()},function(Y){return Y.getUTCFullYear()});gs.every=function(Y){return!isFinite(Y=Math.floor(Y))||!(Y>0)?null:bi(function(vt){vt.setUTCFullYear(Math.floor(vt.getUTCFullYear()/Y)*Y),vt.setUTCMonth(0,1),vt.setUTCHours(0,0,0,0)},function(vt,dt){vt.setUTCFullYear(vt.getUTCFullYear()+dt*Y)})};var Fu=gs,Uc=gs.range;function $f(Y){if(0<=Y.y&&Y.y<100){var vt=new Date(-1,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L);return vt.setFullYear(Y.y),vt}return new Date(Y.y,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L)}function Bc(Y){if(0<=Y.y&&Y.y<100){var vt=new Date(Date.UTC(-1,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L));return vt.setUTCFullYear(Y.y),vt}return new Date(Date.UTC(Y.y,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L))}function Ff(Y,vt,dt){return{y:Y,m:vt,d:dt,H:0,M:0,S:0,L:0}}function Jc(Y){var vt=Y.dateTime,dt=Y.date,lt=Y.time,ht=Y.periods,Ot=Y.days,kt=Y.shortDays,ce=Y.months,Re=Y.shortMonths,Qe=_u(ht),Dn=xh(ht),rr=_u(Ot),kr=xh(Ot),ei=_u(kt),Fi=xh(kt),Hi=_u(ce),aa=xh(ce),fo=_u(Re),Wo=xh(Re),iu={a:dd,A:vd,b:Yf,B:tv,c:null,d:Uf,e:Uf,f:N,g:Rn,G:$n,H:Ud,I:d,j:p,L:C,m:J,M:ct,p:ev,q:nv,Q:ol,s:sl,S:Tt,u:Bt,U:Xt,V:De,w:Ge,W:He,x:null,X:null,y:cn,Y:On,Z:Qn,"%":Cu},ms={a:rv,A:iv,b:av,B:ov,c:null,d:Sr,e:Sr,f:Bi,g:Xs,G:rs,H:Nr,I:Wr,j:pi,L:ai,m:zi,M:ia,p:sv,q:uv,Q:ol,s:sl,S:va,u:ca,U:ta,V:Ta,w:pa,W:Yo,x:null,X:null,y:go,Y:Za,Z:Xu,"%":Cu},Js={a:yc,A:Ho,b:oc,B:Wl,c:ah,d:If,e:If,f:Fd,g:th,G:qf,H:Bh,I:Bh,j:Jh,L:zf,m:jh,M:md,p:Jl,q:rc,Q:Xd,s:lc,S:bh,u:Dd,U:jd,V:Bd,w:Rd,W:gd,x:Kd,X:hd,y:th,Y:qf,Z:Nd,"%":zd};iu.x=xl(dt,iu),iu.X=xl(lt,iu),iu.c=xl(vt,iu),ms.x=xl(dt,ms),ms.X=xl(lt,ms),ms.c=xl(vt,ms);function xl(Oo,vu){return function(ys){var ea=[],vf=-1,$l=0,Mf=Oo.length,Pf,Xh,qd;for(ys instanceof Date||(ys=new Date(+ys));++vf<Mf;)Oo.charCodeAt(vf)===37&&(ea.push(Oo.slice($l,vf)),(Xh=Qf[Pf=Oo.charAt(++vf)])!=null?Pf=Oo.charAt(++vf):Xh=Pf==="e"?" ":"0",(qd=vu[Pf])&&(Pf=qd(ys,Xh)),ea.push(Pf),$l=vf+1);return ea.push(Oo.slice($l,vf)),ea.join("")}}function Lo(Oo,vu){return function(ys){var ea=Ff(1900,void 0,1),vf=bl(ea,Oo,ys+="",0),$l,Mf;if(vf!=ys.length)return null;if("Q"in ea)return new Date(ea.Q);if("s"in ea)return new Date(ea.s*1e3+("L"in ea?ea.L:0));if(vu&&!("Z"in ea)&&(ea.Z=0),"p"in ea&&(ea.H=ea.H%12+ea.p*12),ea.m===void 0&&(ea.m="q"in ea?ea.q:0),"V"in ea){if(ea.V<1||ea.V>53)return null;"w"in ea||(ea.w=1),"Z"in ea?($l=Bc(Ff(ea.y,0,1)),Mf=$l.getUTCDay(),$l=Mf>4||Mf===0?nr.ceil($l):nr($l),$l=ja.offset($l,(ea.V-1)*7),ea.y=$l.getUTCFullYear(),ea.m=$l.getUTCMonth(),ea.d=$l.getUTCDate()+(ea.w+6)%7):($l=$f(Ff(ea.y,0,1)),Mf=$l.getDay(),$l=Mf>4||Mf===0?kl.ceil($l):kl($l),$l=ho.offset($l,(ea.V-1)*7),ea.y=$l.getFullYear(),ea.m=$l.getMonth(),ea.d=$l.getDate()+(ea.w+6)%7)}else("W"in ea||"U"in ea)&&("w"in ea||(ea.w="u"in ea?ea.u%7:"W"in ea?1:0),Mf="Z"in ea?Bc(Ff(ea.y,0,1)).getUTCDay():$f(Ff(ea.y,0,1)).getDay(),ea.m=0,ea.d="W"in ea?(ea.w+6)%7+ea.W*7-(Mf+5)%7:ea.w+ea.U*7-(Mf+6)%7);return"Z"in ea?(ea.H+=ea.Z/100|0,ea.M+=ea.Z%100,Bc(ea)):$f(ea)}}function bl(Oo,vu,ys,ea){for(var vf=0,$l=vu.length,Mf=ys.length,Pf,Xh;vf<$l;){if(ea>=Mf)return-1;if(Pf=vu.charCodeAt(vf++),Pf===37){if(Pf=vu.charAt(vf++),Xh=Js[Pf in Qf?vu.charAt(vf++):Pf],!Xh||(ea=Xh(Oo,ys,ea))<0)return-1}else if(Pf!=ys.charCodeAt(ea++))return-1}return ea}function Jl(Oo,vu,ys){var ea=Qe.exec(vu.slice(ys));return ea?(Oo.p=Dn[ea[0].toLowerCase()],ys+ea[0].length):-1}function yc(Oo,vu,ys){var ea=ei.exec(vu.slice(ys));return ea?(Oo.w=Fi[ea[0].toLowerCase()],ys+ea[0].length):-1}function Ho(Oo,vu,ys){var ea=rr.exec(vu.slice(ys));return ea?(Oo.w=kr[ea[0].toLowerCase()],ys+ea[0].length):-1}function oc(Oo,vu,ys){var ea=fo.exec(vu.slice(ys));return ea?(Oo.m=Wo[ea[0].toLowerCase()],ys+ea[0].length):-1}function Wl(Oo,vu,ys){var ea=Hi.exec(vu.slice(ys));return ea?(Oo.m=aa[ea[0].toLowerCase()],ys+ea[0].length):-1}function ah(Oo,vu,ys){return bl(Oo,vt,vu,ys)}function Kd(Oo,vu,ys){return bl(Oo,dt,vu,ys)}function hd(Oo,vu,ys){return bl(Oo,lt,vu,ys)}function dd(Oo){return kt[Oo.getDay()]}function vd(Oo){return Ot[Oo.getDay()]}function Yf(Oo){return Re[Oo.getMonth()]}function tv(Oo){return ce[Oo.getMonth()]}function ev(Oo){return ht[+(Oo.getHours()>=12)]}function nv(Oo){return 1+~~(Oo.getMonth()/3)}function rv(Oo){return kt[Oo.getUTCDay()]}function iv(Oo){return Ot[Oo.getUTCDay()]}function av(Oo){return Re[Oo.getUTCMonth()]}function ov(Oo){return ce[Oo.getUTCMonth()]}function sv(Oo){return ht[+(Oo.getUTCHours()>=12)]}function uv(Oo){return 1+~~(Oo.getUTCMonth()/3)}return{format:function(vu){var ys=xl(vu+="",iu);return ys.toString=function(){return vu},ys},parse:function(vu){var ys=Lo(vu+="",!1);return ys.toString=function(){return vu},ys},utcFormat:function(vu){var ys=xl(vu+="",ms);return ys.toString=function(){return vu},ys},utcParse:function(vu){var ys=Lo(vu+="",!0);return ys.toString=function(){return vu},ys}}}var Qf={"-":"",_:" ","0":"0"},Kl=/^\s*\d+/,pd=/^%/,yh=/[\\^$*+?|[\]().{}]/g;function Su(Y,vt,dt){var lt=Y<0?"-":"",ht=(lt?-Y:Y)+"",Ot=ht.length;return lt+(Ot<dt?new Array(dt-Ot+1).join(vt)+ht:ht)}function nc(Y){return Y.replace(yh,"\\$&")}function _u(Y){return new RegExp("^(?:"+Y.map(nc).join("|")+")","i")}function xh(Y){for(var vt={},dt=-1,lt=Y.length;++dt<lt;)vt[Y[dt].toLowerCase()]=dt;return vt}function Rd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+1));return lt?(Y.w=+lt[0],dt+lt[0].length):-1}function Dd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+1));return lt?(Y.u=+lt[0],dt+lt[0].length):-1}function jd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.U=+lt[0],dt+lt[0].length):-1}function Bd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.V=+lt[0],dt+lt[0].length):-1}function gd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.W=+lt[0],dt+lt[0].length):-1}function qf(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+4));return lt?(Y.y=+lt[0],dt+lt[0].length):-1}function th(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.y=+lt[0]+(+lt[0]>68?1900:2e3),dt+lt[0].length):-1}function Nd(Y,vt,dt){var lt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(vt.slice(dt,dt+6));return lt?(Y.Z=lt[1]?0:-(lt[2]+(lt[3]||"00")),dt+lt[0].length):-1}function rc(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+1));return lt?(Y.q=lt[0]*3-3,dt+lt[0].length):-1}function jh(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.m=lt[0]-1,dt+lt[0].length):-1}function If(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.d=+lt[0],dt+lt[0].length):-1}function Jh(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+3));return lt?(Y.m=0,Y.d=+lt[0],dt+lt[0].length):-1}function Bh(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.H=+lt[0],dt+lt[0].length):-1}function md(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.M=+lt[0],dt+lt[0].length):-1}function bh(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+2));return lt?(Y.S=+lt[0],dt+lt[0].length):-1}function zf(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+3));return lt?(Y.L=+lt[0],dt+lt[0].length):-1}function Fd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt,dt+6));return lt?(Y.L=Math.floor(lt[0]/1e3),dt+lt[0].length):-1}function zd(Y,vt,dt){var lt=pd.exec(vt.slice(dt,dt+1));return lt?dt+lt[0].length:-1}function Xd(Y,vt,dt){var lt=Kl.exec(vt.slice(dt));return lt?(Y.Q=+lt[0],dt+lt[0].length):-1}function lc(Y,vt,dt){var lt=Kl.exec(vt.slice(dt));return lt?(Y.s=+lt[0],dt+lt[0].length):-1}function Uf(Y,vt){return Su(Y.getDate(),vt,2)}function Ud(Y,vt){return Su(Y.getHours(),vt,2)}function d(Y,vt){return Su(Y.getHours()%12||12,vt,2)}function p(Y,vt){return Su(1+ho.count(ha(Y),Y),vt,3)}function C(Y,vt){return Su(Y.getMilliseconds(),vt,3)}function N(Y,vt){return C(Y,vt)+"000"}function J(Y,vt){return Su(Y.getMonth()+1,vt,2)}function ct(Y,vt){return Su(Y.getMinutes(),vt,2)}function Tt(Y,vt){return Su(Y.getSeconds(),vt,2)}function Bt(Y){var vt=Y.getDay();return vt===0?7:vt}function Xt(Y,vt){return Su(dl.count(ha(Y)-1,Y),vt,2)}function de(Y){var vt=Y.getDay();return vt>=4||vt===0?Zs(Y):Zs.ceil(Y)}function De(Y,vt){return Y=de(Y),Su(Zs.count(ha(Y),Y)+(ha(Y).getDay()===4),vt,2)}function Ge(Y){return Y.getDay()}function He(Y,vt){return Su(kl.count(ha(Y)-1,Y),vt,2)}function cn(Y,vt){return Su(Y.getFullYear()%100,vt,2)}function Rn(Y,vt){return Y=de(Y),Su(Y.getFullYear()%100,vt,2)}function On(Y,vt){return Su(Y.getFullYear()%1e4,vt,4)}function $n(Y,vt){var dt=Y.getDay();return Y=dt>=4||dt===0?Zs(Y):Zs.ceil(Y),Su(Y.getFullYear()%1e4,vt,4)}function Qn(Y){var vt=Y.getTimezoneOffset();return(vt>0?"-":(vt*=-1,"+"))+Su(vt/60|0,"0",2)+Su(vt%60,"0",2)}function Sr(Y,vt){return Su(Y.getUTCDate(),vt,2)}function Nr(Y,vt){return Su(Y.getUTCHours(),vt,2)}function Wr(Y,vt){return Su(Y.getUTCHours()%12||12,vt,2)}function pi(Y,vt){return Su(1+ja.count(Fu(Y),Y),vt,3)}function ai(Y,vt){return Su(Y.getUTCMilliseconds(),vt,3)}function Bi(Y,vt){return ai(Y,vt)+"000"}function zi(Y,vt){return Su(Y.getUTCMonth()+1,vt,2)}function ia(Y,vt){return Su(Y.getUTCMinutes(),vt,2)}function va(Y,vt){return Su(Y.getUTCSeconds(),vt,2)}function ca(Y){var vt=Y.getUTCDay();return vt===0?7:vt}function ta(Y,vt){return Su(lr.count(Fu(Y)-1,Y),vt,2)}function to(Y){var vt=Y.getUTCDay();return vt>=4||vt===0?Kn(Y):Kn.ceil(Y)}function Ta(Y,vt){return Y=to(Y),Su(Kn.count(Fu(Y),Y)+(Fu(Y).getUTCDay()===4),vt,2)}function pa(Y){return Y.getUTCDay()}function Yo(Y,vt){return Su(nr.count(Fu(Y)-1,Y),vt,2)}function go(Y,vt){return Su(Y.getUTCFullYear()%100,vt,2)}function Xs(Y,vt){return Y=to(Y),Su(Y.getUTCFullYear()%100,vt,2)}function Za(Y,vt){return Su(Y.getUTCFullYear()%1e4,vt,4)}function rs(Y,vt){var dt=Y.getUTCDay();return Y=dt>=4||dt===0?Kn(Y):Kn.ceil(Y),Su(Y.getUTCFullYear()%1e4,vt,4)}function Xu(){return"+0000"}function Cu(){return"%"}function ol(Y){return+Y}function sl(Y){return Math.floor(+Y/1e3)}var zu,cc,Xl,_c,fc;wc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wc(Y){return zu=Jc(Y),cc=zu.format,Xl=zu.parse,_c=zu.utcFormat,fc=zu.utcParse,zu}var wl=1e3,yl=wl*60,Il=yl*60,qo=Il*24,is=qo*7,du=qo*30,Mu=qo*365;function Ic(Y){return new Date(Y)}function Ju(Y){return Y instanceof Date?+Y:+new Date(+Y)}function $u(Y,vt,dt,lt,ht,Ot,kt,ce,Re){var Qe=ko(xi,xi),Dn=Qe.invert,rr=Qe.domain,kr=Re(".%L"),ei=Re(":%S"),Fi=Re("%I:%M"),Hi=Re("%I %p"),aa=Re("%a %d"),fo=Re("%b %d"),Wo=Re("%B"),iu=Re("%Y"),ms=[[kt,1,wl],[kt,5,5*wl],[kt,15,15*wl],[kt,30,30*wl],[Ot,1,yl],[Ot,5,5*yl],[Ot,15,15*yl],[Ot,30,30*yl],[ht,1,Il],[ht,3,3*Il],[ht,6,6*Il],[ht,12,12*Il],[lt,1,qo],[lt,2,2*qo],[dt,1,is],[vt,1,du],[vt,3,3*du],[Y,1,Mu]];function Js(Lo){return(kt(Lo)<Lo?kr:Ot(Lo)<Lo?ei:ht(Lo)<Lo?Fi:lt(Lo)<Lo?Hi:vt(Lo)<Lo?dt(Lo)<Lo?aa:fo:Y(Lo)<Lo?Wo:iu)(Lo)}function xl(Lo,bl,Jl,yc){if(Lo==null&&(Lo=10),typeof Lo=="number"){var Ho=Math.abs(Jl-bl)/Lo,oc=pr(function(Wl){return Wl[2]}).right(ms,Ho);oc===ms.length?(yc=Fl(bl/Mu,Jl/Mu,Lo),Lo=Y):oc?(oc=ms[Ho/ms[oc-1][2]<ms[oc][2]/Ho?oc-1:oc],yc=oc[1],Lo=oc[0]):(yc=Math.max(Fl(bl,Jl,Lo),1),Lo=ce)}return yc==null?Lo:Lo.every(yc)}return Qe.invert=function(Lo){return new Date(Dn(Lo))},Qe.domain=function(Lo){return arguments.length?rr(Af.call(Lo,Ju)):rr().map(Ic)},Qe.ticks=function(Lo,bl){var Jl=rr(),yc=Jl[0],Ho=Jl[Jl.length-1],oc=Ho<yc,Wl;return oc&&(Wl=yc,yc=Ho,Ho=Wl),Wl=xl(Lo,yc,Ho,bl),Wl=Wl?Wl.range(yc,Ho+1):[],oc?Wl.reverse():Wl},Qe.tickFormat=function(Lo,bl){return bl==null?Js:Re(bl)},Qe.nice=function(Lo,bl){var Jl=rr();return(Lo=xl(Lo,Jl[0],Jl[Jl.length-1],bl))?rr(vn(Jl,Lo)):Qe},Qe.copy=function(){return ro(Qe,$u(Y,vt,dt,lt,ht,Ot,kt,ce,Re))},Qe}var Mc=function(){return ws.apply($u(ha,gi,dl,ho,mc,Zr,Po,er,cc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},ls=bi(function(Y){Y.setUTCDate(1),Y.setUTCHours(0,0,0,0)},function(Y,vt){Y.setUTCMonth(Y.getUTCMonth()+vt)},function(Y,vt){return vt.getUTCMonth()-Y.getUTCMonth()+(vt.getUTCFullYear()-Y.getUTCFullYear())*12},function(Y){return Y.getUTCMonth()}),kf=ls,cf=ls.range,ff=bi(function(Y){Y.setUTCMinutes(0,0,0)},function(Y,vt){Y.setTime(+Y+vt*co)},function(Y,vt){return(vt-Y)/co},function(Y){return Y.getUTCHours()}),$c=ff,Pc=ff.range,Lf=bi(function(Y){Y.setUTCSeconds(0,0)},function(Y,vt){Y.setTime(+Y+vt*Gi)},function(Y,vt){return(vt-Y)/Gi},function(Y){return Y.getUTCMinutes()}),Gf=Lf,eh=Lf.range,$h=function(){return ws.apply($u(Fu,kf,lr,ja,$c,Gf,Po,er,_c).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function af(){var Y=0,vt=1,dt,lt,ht,Ot,kt=xi,ce=!1,Re;function Qe(Dn){return isNaN(Dn=+Dn)?Re:kt(ht===0?.5:(Dn=(Ot(Dn)-dt)*ht,ce?Math.max(0,Math.min(1,Dn)):Dn))}return Qe.domain=function(Dn){return arguments.length?(dt=Ot(Y=+Dn[0]),lt=Ot(vt=+Dn[1]),ht=dt===lt?0:1/(lt-dt),Qe):[Y,vt]},Qe.clamp=function(Dn){return arguments.length?(ce=!!Dn,Qe):ce},Qe.interpolator=function(Dn){return arguments.length?(kt=Dn,Qe):kt},Qe.unknown=function(Dn){return arguments.length?(Re=Dn,Qe):Re},function(Dn){return Ot=Dn,dt=Dn(Y),lt=Dn(vt),ht=dt===lt?0:1/(lt-dt),Qe}}function hf(Y,vt){return vt.domain(Y.domain()).interpolator(Y.interpolator()).clamp(Y.clamp()).unknown(Y.unknown())}function Nh(){var Y=ae(af()(xi));return Y.copy=function(){return hf(Y,Nh())},cu.apply(Y,arguments)}function Eh(){var Y=Or(af()).domain([1,10]);return Y.copy=function(){return hf(Y,Eh()).base(Y.base())},cu.apply(Y,arguments)}function Qh(){var Y=fi(af());return Y.copy=function(){return hf(Y,Qh()).constant(Y.constant())},cu.apply(Y,arguments)}function Sh(){var Y=_r(af());return Y.copy=function(){return hf(Y,Sh()).exponent(Y.exponent())},cu.apply(Y,arguments)}function yd(){return Sh.apply(null,arguments).exponent(.5)}function nh(){var Y=[],vt=xi;function dt(lt){if(!isNaN(lt=+lt))return vt((Li(Y,lt)-1)/(Y.length-1))}return dt.domain=function(lt){if(!arguments.length)return Y.slice();Y=[];for(var ht=0,Ot=lt.length,kt;ht<Ot;++ht)kt=lt[ht],kt!=null&&!isNaN(kt=+kt)&&Y.push(kt);return Y.sort(kn),dt},dt.interpolator=function(lt){return arguments.length?(vt=lt,dt):vt},dt.copy=function(){return nh(vt).domain(Y)},cu.apply(dt,arguments)}function Vf(){var Y=0,vt=.5,dt=1,lt,ht,Ot,kt,ce,Re=xi,Qe,Dn=!1,rr;function kr(ei){return isNaN(ei=+ei)?rr:(ei=.5+((ei=+Qe(ei))-ht)*(ei<ht?kt:ce),Re(Dn?Math.max(0,Math.min(1,ei)):ei))}return kr.domain=function(ei){return arguments.length?(lt=Qe(Y=+ei[0]),ht=Qe(vt=+ei[1]),Ot=Qe(dt=+ei[2]),kt=lt===ht?0:.5/(ht-lt),ce=ht===Ot?0:.5/(Ot-ht),kr):[Y,vt,dt]},kr.clamp=function(ei){return arguments.length?(Dn=!!ei,kr):Dn},kr.interpolator=function(ei){return arguments.length?(Re=ei,kr):Re},kr.unknown=function(ei){return arguments.length?(rr=ei,kr):rr},function(ei){return Qe=ei,lt=ei(Y),ht=ei(vt),Ot=ei(dt),kt=lt===ht?0:.5/(ht-lt),ce=ht===Ot?0:.5/(Ot-ht),kr}}function qh(){var Y=ae(Vf()(xi));return Y.copy=function(){return hf(Y,qh())},cu.apply(Y,arguments)}function _h(){var Y=Or(Vf()).domain([.1,1,10]);return Y.copy=function(){return hf(Y,_h()).base(Y.base())},cu.apply(Y,arguments)}function rh(){var Y=fi(Vf());return Y.copy=function(){return hf(Y,rh()).constant(Y.constant())},cu.apply(Y,arguments)}function Mh(){var Y=_r(Vf());return Y.copy=function(){return hf(Y,Mh()).exponent(Y.exponent())},cu.apply(Y,arguments)}function xd(){return Mh.apply(null,arguments).exponent(.5)}var Qc,ch,Fh,zh,fh,hh,Ph,Th,Ah,Ch=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Uh=(Qc={},u()(Qc,U.ScaleTypes.LINEAR,ke),u()(Qc,U.ScaleTypes.POWER,di),u()(Qc,U.ScaleTypes.LOG,ri),u()(Qc,U.ScaleTypes.IDENTITY,yn),u()(Qc,U.ScaleTypes.TIME,Mc),u()(Qc,U.ScaleTypes.QUANTILE,qr),u()(Qc,U.ScaleTypes.QUANTIZE,na),u()(Qc,U.ScaleTypes.THRESHOLD,wi),u()(Qc,U.ScaleTypes.CAT,vc),Qc),Oh=(ch=Object(K.injectable)(),Fh=Object(K.inject)(U.TYPES.IGlobalConfigService),zh=Object(K.inject)(U.TYPES.ILogService),ch(fh=(hh=(Ah=function(){function Y(){T()(this,Y),v()(this,"configService",Ph,this),v()(this,"logger",Th,this),this.scaleCache={},this.scaleOptions={}}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService;dt.hooks.init.tap("FeatureScalePlugin",function(){ht.scaleOptions=dt.getScaleOptions();var kt=Ot.getLayerStyleAttributes(),ce=dt.getSource().data.dataArray;ce.length!==0&&ht.caculateScalesForAttributes(kt||[],ce)}),dt.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){ht.scaleOptions=dt.getScaleOptions();var kt=Ot.getLayerStyleAttributes(),ce=dt.getSource().data.dataArray;return ht.caculateScalesForAttributes(kt||[],ce),dt.layerModelNeedUpdate=!0,!0}),dt.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!dt.layerModelNeedUpdate){ht.scaleOptions=dt.getScaleOptions();var kt=Ot.getLayerStyleAttributes();if(kt){var ce=dt.getSource().data.dataArray;if(ce.length===0)return;var Re=kt.filter(function(Qe){return Qe.needRescale});Re.length&&(ht.caculateScalesForAttributes(Re,ce),ht.logger.debug("rescale finished"))}}})}},{key:"isNumber",value:function(dt){return!isNaN(parseFloat(dt))&&isFinite(dt)}},{key:"caculateScalesForAttributes",value:function(dt,lt){var ht=this;this.scaleCache={},dt.forEach(function(Ot){if(Ot.scale){var kt=Ot.scale,ce=Ot.name;kt.names=ht.parseFields(Ot.scale.field||[]);var Re=[];kt.names.forEach(function(Qe){Re.push(ht.getOrCreateScale(Qe,Ot,lt))}),Re.some(function(Qe){return Qe.type===U.StyleScaleType.VARIABLE})?(kt.type=U.StyleScaleType.VARIABLE,Re.forEach(function(Qe){if(!kt.callback){var Dn;if(kt.values&&kt.values!=="text"){var rr;if(((rr=Qe.option)===null||rr===void 0?void 0:rr.type)==="linear"&&kt.values.length>2){var kr=Qe.scale.ticks(kt.values.length);ce==="color"&&Qe.scale.domain(kr)}Qe.scale.range(kt.values)}else((Dn=Qe.option)===null||Dn===void 0?void 0:Dn.type)==="cat"&&Qe.scale.range(Qe.option.domain)}})):(kt.type=U.StyleScaleType.CONSTANT,kt.defaultValues=Re.map(function(Qe,Dn){return Qe.scale(kt.names[Dn])})),kt.scalers=Re.map(function(Qe){return{field:Qe.field,func:Qe.scale,option:Qe.option}}),Ot.needRescale=!1}})}},{key:"getOrCreateScale",value:function(dt,lt,ht){var Ot,kt=[dt,lt.name].join("_"),ce=(Ot=lt.scale)===null||Ot===void 0?void 0:Ot.values,Re=this.createScale(dt,lt.name,ce,ht);return Re}},{key:"parseFields",value:function(dt){return Array.isArray(dt)?dt:Vn()(dt)?dt.split("*"):[dt]}},{key:"createScale",value:function(dt,lt,ht,Ot){var kt,ce=this.scaleOptions[lt]&&this.scaleOptions[lt].field===dt?this.scaleOptions[lt]:this.scaleOptions[dt],Re={field:dt,scale:void 0,type:U.StyleScaleType.VARIABLE,option:ce};if(!Ot||!Ot.length)return ce&&ce.type?Re.scale=this.createDefaultScale(ce):(Re.scale=vc([dt]),Re.type=U.StyleScaleType.CONSTANT),Re;var Qe=(kt=Ot.find(function(kr){return!Wn()(kr[dt])}))===null||kt===void 0?void 0:kt[dt];if(this.isNumber(dt)||Wn()(Qe)&&!ce)Re.scale=vc([dt]),Re.type=U.StyleScaleType.CONSTANT;else{var Dn=ce&&ce.type||this.getDefaultType(Qe);ht==="text"&&(Dn=U.ScaleTypes.CAT);var rr=this.createDefaultScaleConfig(Dn,dt,Ot);Object.assign(rr,ce),Re.scale=this.createDefaultScale(rr),Re.option=rr}return Re}},{key:"getDefaultType",value:function(dt){var lt=U.ScaleTypes.LINEAR;return typeof dt=="string"&&(lt=Ch.test(dt)?U.ScaleTypes.TIME:U.ScaleTypes.CAT),lt}},{key:"createDefaultScaleConfig",value:function(dt,lt,ht){var Ot={type:dt},kt=(ht==null?void 0:ht.map(function(ce){return ce[lt]}))||[];return dt!==U.ScaleTypes.CAT&&dt!==U.ScaleTypes.QUANTILE?Ot.domain=Va(kt):dt===U.ScaleTypes.CAT?Ot.domain=hn()(kt):dt===U.ScaleTypes.QUANTILE&&(Ot.domain=kt),Ot}},{key:"createDefaultScale",value:function(dt){var lt=dt.type,ht=dt.domain,Ot=Uh[lt]();return ht&&Ot.domain(ht),Ot}}]),Y}(),Ah),Ph=_()(hh.prototype,"configService",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Th=_()(hh.prototype,"logger",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hh))||fh),dh,wh,td,ed,kh,nd,bd,rd;function Jd(Y,vt){var dt=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);vt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),dt.push.apply(dt,lt)}return dt}function $d(Y){for(var vt=1;vt<arguments.length;vt++){var dt=arguments[vt]!=null?arguments[vt]:{};vt%2?Jd(Object(dt),!0).forEach(function(lt){u()(Y,lt,dt[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(dt)):Jd(Object(dt)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(dt,lt))})}return Y}var Gh=(dh=Object(K.injectable)(),wh=Object(K.inject)(U.TYPES.ICameraService),td=Object(K.inject)(U.TYPES.IRendererService),dh(ed=(kh=(rd=function(){function Y(){T()(this,Y),v()(this,"cameraService",nd,this),v()(this,"rendererService",bd,this)}return t()(Y,[{key:"apply",value:function(dt){dt.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){dt.models.forEach(function(lt){lt.addUniforms($d({},dt.layerModel.getAnimateUniforms()))})})}}]),Y}(),rd),nd=_()(kh.prototype,"cameraService",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bd=_()(kh.prototype,"rendererService",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kh))||ed),Ll,df,Qd=(Ll=Object(K.injectable)(),Ll(df=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(dt){dt.hooks.init.tap("LayerModelPlugin",function(){dt.prepareBuildModel(),dt.buildModels(),dt.styleNeedUpdate=!1}),dt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return dt.prepareBuildModel(),dt.clearModels(),dt.buildModels(),dt.layerModelNeedUpdate=!1,!1})}}]),Y}())||df),Wf,id,kd=(Wf=Object(K.injectable)(),Wf(id=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(dt){dt.hooks.afterInit.tap("LayerStylePlugin",function(){dt.updateLayerConfig({});var lt=dt.getLayerConfig(),ht=lt.autoFit,Ot=lt.fitBoundsOptions;ht&&setTimeout(function(){dt.fitBounds(Ot)},100)})}}]),Y}())||id),Vh,Sf;function Wh(Y,vt){var dt=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);vt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),dt.push.apply(dt,lt)}return dt}function Hf(Y){for(var vt=1;vt<arguments.length;vt++){var dt=arguments[vt]!=null?arguments[vt]:{};vt%2?Wh(Object(dt),!0).forEach(function(lt){u()(Y,lt,dt[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(dt)):Wh(Object(dt)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(dt,lt))})}return Y}var Hh={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},ad={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Ed={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Gd={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},od=["ambient","diffuse","specular"];function Vd(Y){var vt={u_DirectionalLights:new Array(3).fill(Hf({},Ed)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Hf({},Gd)),u_NumOfSpotLights:0};return(!Y||!Y.length)&&(Y=[ad]),Y.forEach(function(dt,lt){var ht=dt.type,Ot=ht===void 0?"directional":ht,kt=a()(dt,["type"]),ce=Hh[Ot].lights,Re=Hh[Ot].num,Qe=vt[Re];vt[ce][Qe]=Hf(Hf({},vt[ce][Qe]),kt),vt[Re]++}),vt}var Wd=(Vh=Object(K.injectable)(),Vh(Sf=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(dt){dt.hooks.beforeRender.tap("LightingPlugin",function(){var lt=dt.getLayerConfig(),ht=lt.enableLighting;ht&&dt.models.forEach(function(Ot){return Ot.addUniforms(Hf({},Vd()))})})}}]),Y}())||Sf),Sd,_d,Yh={NONE:0,ENCODE:1,HIGHLIGHT:2},qc=(Sd=Object(K.injectable)(),Sd(_d=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=lt.rendererService,Ot=lt.styleAttributeService;dt.hooks.init.tap("PixelPickingPlugin",function(){var kt=dt.getLayerConfig(),ce=kt.enablePicking;Ot.registerStyleAttribute({name:"pickingColor",type:U.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(Qe,Dn){var rr=Qe.id;return ce?Object(O.l)(rr):[0,0,0]}}})}),dt.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var kt=dt.getLayerConfig(),ce=kt.enablePicking;ce&&dt.isVisible()&&dt.models.forEach(function(Re){return Re.addUniforms({u_PickingStage:Yh.ENCODE})})}),dt.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var kt=dt.getLayerConfig(),ce=kt.enablePicking;ce&&dt.isVisible()&&dt.models.forEach(function(Re){return Re.addUniforms({u_PickingStage:Yh.HIGHLIGHT})})}),dt.hooks.beforeHighlight.tap("PixelPickingPlugin",function(kt){var ce=dt.getLayerConfig(),Re=ce.highlightColor,Qe=typeof Re=="string"?Object(O.s)(Re):Re||[1,0,0,1];dt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(kt))}),dt.models.forEach(function(Dn){return Dn.addUniforms({u_PickingStage:Yh.HIGHLIGHT,u_PickingColor:kt,u_HighlightColor:Qe.map(function(rr){return rr*255})})})}),dt.hooks.beforeSelect.tap("PixelPickingPlugin",function(kt){var ce=dt.getLayerConfig(),Re=ce.selectColor,Qe=typeof Re=="string"?Object(O.s)(Re):Re||[1,0,0,1];dt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(kt))}),dt.models.forEach(function(Dn){return Dn.addUniforms({u_PickingStage:Yh.HIGHLIGHT,u_PickingColor:kt,u_HighlightColor:Qe.map(function(rr){return rr*255})})})})}}]),Y}())||_d),Zh,Md,_f,Pd,Td,ih,Ih=(Zh=Object(K.injectable)(),Md=Object(K.inject)(U.TYPES.ILogService),Zh(_f=(Pd=(ih=function(){function Y(){T()(this,Y),v()(this,"logger",Td,this)}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService;dt.hooks.init.tap("RegisterStyleAttributePlugin",function(){ht.registerBuiltinAttributes(Ot)})}},{key:"registerBuiltinAttributes",value:function(dt){dt.registerStyleAttribute({name:"position",type:U.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(ht,Ot,kt){return kt.length===2?[kt[0],kt[1],0]:[kt[0],kt[1],kt[2]]}}}),dt.registerStyleAttribute({name:"filter",type:U.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(ht,Ot){var kt=ht.filter;return kt?[1]:[0]}}}),dt.registerStyleAttribute({name:"color",type:U.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(ht,Ot){var kt=ht.color;return!kt||!kt.length?[1,1,1,1]:kt}}})}}]),Y}(),ih),Td=_()(Pd.prototype,"logger",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd))||_f),vh,ph,gh,Ad,Cd,Lh,Od,sd,ud,Rf,Hd=(vh=Object(K.injectable)(),ph=Object(K.inject)(U.TYPES.ICameraService),gh=Object(K.inject)(U.TYPES.ICoordinateSystemService),Ad=Object(K.inject)(U.TYPES.IRendererService),vh(Cd=(Lh=(Rf=function(){function Y(){T()(this,Y),v()(this,"cameraService",Od,this),v()(this,"coordinateSystemService",sd,this),v()(this,"rendererService",ud,this)}return t()(Y,[{key:"apply",value:function(dt){var lt=this;dt.hooks.beforeRender.tap("ShaderUniformPlugin",function(){lt.coordinateSystemService.refresh();var ht=lt.rendererService.getViewportSize(),Ot=ht.width,kt=ht.height;dt.models.forEach(function(ce){var Re;return ce.addUniforms((Re={},u()(Re,U.CameraUniform.ProjectionMatrix,lt.cameraService.getProjectionMatrix()),u()(Re,U.CameraUniform.ViewMatrix,lt.cameraService.getViewMatrix()),u()(Re,U.CameraUniform.ViewProjectionMatrix,lt.cameraService.getViewProjectionMatrix()),u()(Re,U.CameraUniform.Zoom,lt.cameraService.getZoom()),u()(Re,U.CameraUniform.ZoomScale,lt.cameraService.getZoomScale()),u()(Re,U.CameraUniform.FocalDistance,lt.cameraService.getFocalDistance()),u()(Re,U.CameraUniform.CameraPosition,lt.cameraService.getCameraPosition()),u()(Re,U.CoordinateUniform.CoordinateSystem,lt.coordinateSystemService.getCoordinateSystem()),u()(Re,U.CoordinateUniform.ViewportCenter,lt.coordinateSystemService.getViewportCenter()),u()(Re,U.CoordinateUniform.ViewportCenterProjection,lt.coordinateSystemService.getViewportCenterProjection()),u()(Re,U.CoordinateUniform.PixelsPerDegree,lt.coordinateSystemService.getPixelsPerDegree()),u()(Re,U.CoordinateUniform.PixelsPerDegree2,lt.coordinateSystemService.getPixelsPerDegree2()),u()(Re,U.CoordinateUniform.PixelsPerMeter,lt.coordinateSystemService.getPixelsPerMeter()),u()(Re,"u_ViewportSize",[Ot,kt]),u()(Re,"u_DevicePixelRatio",window.devicePixelRatio),u()(Re,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u()(Re,"u_PickingBuffer",dt.getLayerConfig().pickingBuffer||0),Re))})})}}]),Y}(),Rf),Od=_()(Lh.prototype,"cameraService",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sd=_()(Lh.prototype,"coordinateSystemService",[gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ud=_()(Lh.prototype,"rendererService",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lh))||Cd),ld,cd,Yd=(ld=Object(K.injectable)(),ld(cd=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(dt){dt.hooks.beforeRender.tap("UpdateModelPlugin",function(){dt.layerModel&&dt.layerModel.needUpdate()})}}]),Y}())||cd),fd,wd,Id,Kh,Ld,Rh,Zd=(fd=Object(K.injectable)(),wd=Object(K.inject)(U.TYPES.ILogService),fd(Id=(Kh=(Rh=function(){function Y(){T()(this,Y),v()(this,"logger",Ld,this)}return t()(Y,[{key:"apply",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService;dt.hooks.init.tap("UpdateStyleAttributePlugin",function(){ht.initStyleAttribute(dt,{styleAttributeService:Ot})}),dt.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){dt.layerModelNeedUpdate||ht.updateStyleAtrribute(dt,{styleAttributeService:Ot})})}},{key:"updateStyleAtrribute",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[],ce=Ot.getLayerStyleAttribute("filter"),Re=Ot.getLayerStyleAttribute("shape");if(ce&&ce.needRegenerateVertices||Re&&Re.needRegenerateVertices){dt.layerModelNeedUpdate=!0,kt.forEach(function(Qe){return Qe.needRegenerateVertices=!1});return}kt.filter(function(Qe){return Qe.needRegenerateVertices}).forEach(function(Qe){Ot.updateAttributeByFeatureRange(Qe.name,dt.getEncodedData(),Qe.featureRange.startIndex,Qe.featureRange.endIndex),Qe.needRegenerateVertices=!1,ht.logger.debug("regenerate vertex attributes: ".concat(Qe.name," finished"))})}},{key:"initStyleAttribute",value:function(dt,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[];kt.filter(function(ce){return ce.needRegenerateVertices}).forEach(function(ce){Ot.updateAttributeByFeatureRange(ce.name,dt.getEncodedData(),ce.featureRange.startIndex,ce.featureRange.endIndex),ce.needRegenerateVertices=!1,ht.logger.debug("init vertex attributes: ".concat(ce.name," finished"))})}}]),Y}(),Rh),Ld=_()(Kh.prototype,"logger",[wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh))||Id);U.container.bind(U.TYPES.ILayerPlugin).to(Je).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Ih).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Oh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(re).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(kd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Zd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Yd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(ut).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Hd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Gh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Wd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(qc).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Qd).inRequestScope()},t2Dn:function(Oe,mt,R){var U=R("hypo"),E=R("ljhN");function T(e,t,l){(l!==void 0&&!E(e[t],l)||l===void 0&&!(t in e))&&U(e,t,l)}Oe.exports=T},u6S6:function(Oe,mt,R){var U=R("6acW"),E=R("sgoq"),T=E(function(e,t,l){return t=t.toLowerCase(),e+(l?U(t):t)});Oe.exports=T},uhBA:function(Oe,mt,R){"use strict";var U=Object.prototype.hasOwnProperty,E="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(E=!1));function e(c,r,h){this.fn=c,this.context=r,this.once=h||!1}function t(c,r,h,n,i){if(typeof h!="function")throw new TypeError("The listener must be a function");var a=new e(h,n||c,i),o=E?E+r:r;return c._events[o]?c._events[o].fn?c._events[o]=[c._events[o],a]:c._events[o].push(a):(c._events[o]=a,c._eventsCount++),c}function l(c,r){--c._eventsCount==0?c._events=new T:delete c._events[r]}function s(){this._events=new T,this._eventsCount=0}s.prototype.eventNames=function(){var r=[],h,n;if(this._eventsCount===0)return r;for(n in h=this._events)U.call(h,n)&&r.push(E?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(h)):r},s.prototype.listeners=function(r){var h=E?E+r:r,n=this._events[h];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(r){var h=E?E+r:r,n=this._events[h];return n?n.fn?1:n.length:0},s.prototype.emit=function(r,h,n,i,a,o){var u=E?E+r:r;if(!this._events[u])return!1;var f=this._events[u],v=arguments.length,b,y;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,n),!0;case 4:return f.fn.call(f.context,h,n,i),!0;case 5:return f.fn.call(f.context,h,n,i,a),!0;case 6:return f.fn.call(f.context,h,n,i,a,o),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];f.fn.apply(f.context,b)}else{var g=f.length,_;for(y=0;y<g;y++)switch(f[y].once&&this.removeListener(r,f[y].fn,void 0,!0),v){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,h);break;case 3:f[y].fn.call(f[y].context,h,n);break;case 4:f[y].fn.call(f[y].context,h,n,i);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];f[y].fn.apply(f[y].context,b)}}return!0},s.prototype.on=function(r,h,n){return t(this,r,h,n,!1)},s.prototype.once=function(r,h,n){return t(this,r,h,n,!0)},s.prototype.removeListener=function(r,h,n,i){var a=E?E+r:r;if(!this._events[a])return this;if(!h)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn===h&&(!i||o.once)&&(!n||o.context===n)&&l(this,a);else{for(var u=0,f=[],v=o.length;u<v;u++)(o[u].fn!==h||i&&!o[u].once||n&&o[u].context!==n)&&f.push(o[u]);f.length?this._events[a]=f.length===1?f[0]:f:l(this,a)}return this},s.prototype.removeAllListeners=function(r){var h;return r?(h=E?E+r:r,this._events[h]&&l(this,h)):(this._events=new T,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,Oe.exports=s},ujMp:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.circularDependencyToException=mt.listMetadataForTarget=mt.listRegisteredBindingsForServiceIdentifier=mt.getServiceIdentifierAsString=mt.getFunctionName=void 0;var U=R("MON2");function E(r){if(typeof r=="function"){var h=r;return h.name}else{if(typeof r=="symbol")return r.toString();var h=r;return h}}mt.getServiceIdentifierAsString=E;function T(r,h,n){var i="",a=n(r,h);return a.length!==0&&(i=`
Registered bindings:`,a.forEach(function(o){var u="Object";o.implementationType!==null&&(u=c(o.implementationType)),i=i+`
 `+u,o.constraint.metaData&&(i=i+" - "+o.constraint.metaData)})),i}mt.listRegisteredBindingsForServiceIdentifier=T;function e(r,h){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===h?!0:e(r.parentRequest,h)}function t(r){function h(i,a){a===void 0&&(a=[]);var o=E(i.serviceIdentifier);return a.push(o),i.parentRequest!==null?h(i.parentRequest,a):a}var n=h(r);return n.reverse().join(" --> ")}function l(r){r.childRequests.forEach(function(h){if(e(h,h.serviceIdentifier)){var n=t(h);throw new Error(U.CIRCULAR_DEPENDENCY+" "+n)}else l(h)})}mt.circularDependencyToException=l;function s(r,h){if(h.isTagged()||h.isNamed()){var n="",i=h.getNamedTag(),a=h.getCustomTags();return i!==null&&(n+=i.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+r+`
 `+r+" - "+n}else return" "+r}mt.listMetadataForTarget=s;function c(r){if(r.name)return r.name;var h=r.toString(),n=h.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+h}mt.getFunctionName=c},"vN+2":function(Oe,mt){function R(){}Oe.exports=R},"w/wX":function(Oe,mt,R){var U=R("QqLw"),E=R("ExA7"),T="[object Set]";function e(t){return E(t)&&U(t)==T}Oe.exports=e},w26f:function(Oe,mt,R){(function(U){var E=200,T="__lodash_hash_undefined__",e=1/0,t="[object Function]",l="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,r=typeof U=="object"&&U&&U.Object===Object&&U,h=typeof self=="object"&&self&&self.Object===Object&&self,n=r||h||Function("return this")();function i(be,ze){var Xe=be?be.length:0;return!!Xe&&u(be,ze,0)>-1}function a(be,ze,Xe){for(var Sn=-1,Xn=be?be.length:0;++Sn<Xn;)if(Xe(ze,be[Sn]))return!0;return!1}function o(be,ze,Xe,Sn){for(var Xn=be.length,Hn=Xe+(Sn?1:-1);Sn?Hn--:++Hn<Xn;)if(ze(be[Hn],Hn,be))return Hn;return-1}function u(be,ze,Xe){if(ze!==ze)return o(be,f,Xe);for(var Sn=Xe-1,Xn=be.length;++Sn<Xn;)if(be[Sn]===ze)return Sn;return-1}function f(be){return be!==be}function v(be,ze){return be.has(ze)}function b(be,ze){return be==null?void 0:be[ze]}function y(be){var ze=!1;if(be!=null&&typeof be.toString!="function")try{ze=!!(be+"")}catch(Xe){}return ze}function g(be){var ze=-1,Xe=Array(be.size);return be.forEach(function(Sn){Xe[++ze]=Sn}),Xe}var _=Array.prototype,M=Function.prototype,x=Object.prototype,m=n["__core-js_shared__"],S=function(){var be=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return be?"Symbol(src)_1."+be:""}(),P=M.toString,A=x.hasOwnProperty,O=x.toString,L=RegExp("^"+P.call(A).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=_.splice,F=yt(n,"Map"),K=yt(n,"Set"),V=yt(Object,"create");function k(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var Sn=be[ze];this.set(Sn[0],Sn[1])}}function Z(){this.__data__=V?V(null):{}}function X(be){return this.has(be)&&delete this.__data__[be]}function it(be){var ze=this.__data__;if(V){var Xe=ze[be];return Xe===T?void 0:Xe}return A.call(ze,be)?ze[be]:void 0}function ft(be){var ze=this.__data__;return V?ze[be]!==void 0:A.call(ze,be)}function pt(be,ze){var Xe=this.__data__;return Xe[be]=V&&ze===void 0?T:ze,this}k.prototype.clear=Z,k.prototype.delete=X,k.prototype.get=it,k.prototype.has=ft,k.prototype.set=pt;function ut(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var Sn=be[ze];this.set(Sn[0],Sn[1])}}function It(){this.__data__=[]}function Nt(be){var ze=this.__data__,Xe=H(ze,be);if(Xe<0)return!1;var Sn=ze.length-1;return Xe==Sn?ze.pop():W.call(ze,Xe,1),!0}function Rt(be){var ze=this.__data__,Xe=H(ze,be);return Xe<0?void 0:ze[Xe][1]}function Mt(be){return H(this.__data__,be)>-1}function bt(be,ze){var Xe=this.__data__,Sn=H(Xe,be);return Sn<0?Xe.push([be,ze]):Xe[Sn][1]=ze,this}ut.prototype.clear=It,ut.prototype.delete=Nt,ut.prototype.get=Rt,ut.prototype.has=Mt,ut.prototype.set=bt;function At(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var Sn=be[ze];this.set(Sn[0],Sn[1])}}function rt(){this.__data__={hash:new k,map:new(F||ut),string:new k}}function Pt(be){return _t(this,be).delete(be)}function z(be){return _t(this,be).get(be)}function Q(be){return _t(this,be).has(be)}function gt(be,ze){return _t(this,be).set(be,ze),this}At.prototype.clear=rt,At.prototype.delete=Pt,At.prototype.get=z,At.prototype.has=Q,At.prototype.set=gt;function et(be){var ze=-1,Xe=be?be.length:0;for(this.__data__=new At;++ze<Xe;)this.add(be[ze])}function ot(be){return this.__data__.set(be,T),this}function xt(be){return this.__data__.has(be)}et.prototype.add=et.prototype.push=ot,et.prototype.has=xt;function H(be,ze){for(var Xe=be.length;Xe--;)if($t(be[Xe][0],ze))return Xe;return-1}function nt(be){if(!me(be)||Qt(be))return!1;var ze=Me(be)||y(be)?L:c;return ze.test(ee(be))}function at(be,ze,Xe){var Sn=-1,Xn=i,Hn=be.length,nn=!0,en=[],An=en;if(Xe)nn=!1,Xn=a;else if(Hn>=E){var Nn=ze?null:q(be);if(Nn)return g(Nn);nn=!1,Xn=v,An=new et}else An=ze?[]:en;t:for(;++Sn<Hn;){var fr=be[Sn],hi=ze?ze(fr):fr;if(fr=Xe||fr!==0?fr:0,nn&&hi===hi){for(var Ce=An.length;Ce--;)if(An[Ce]===hi)continue t;ze&&An.push(hi),en.push(fr)}else Xn(An,hi,Xe)||(An!==en&&An.push(hi),en.push(fr))}return en}var q=K&&1/g(new K([,-0]))[1]==e?function(be){return new K(be)}:le;function _t(be,ze){var Xe=be.__data__;return Ft(ze)?Xe[typeof ze=="string"?"string":"hash"]:Xe.map}function yt(be,ze){var Xe=b(be,ze);return nt(Xe)?Xe:void 0}function Ft(be){var ze=typeof be;return ze=="string"||ze=="number"||ze=="symbol"||ze=="boolean"?be!=="__proto__":be===null}function Qt(be){return!!S&&S in be}function ee(be){if(be!=null){try{return P.call(be)}catch(ze){}try{return be+""}catch(ze){}}return""}function Vt(be){return be&&be.length?at(be):[]}function $t(be,ze){return be===ze||be!==be&&ze!==ze}function Me(be){var ze=me(be)?O.call(be):"";return ze==t||ze==l}function me(be){var ze=typeof be;return!!be&&(ze=="object"||ze=="function")}function le(){}Oe.exports=Vt}).call(this,R("IyRk"))},wclG:function(Oe,mt,R){var U=R("pFRH"),E=R("88Gu"),T=E(U);Oe.exports=T},wnjb:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.MetadataReader=void 0;var U=R("xfSm"),E=function(){function T(){}return T.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(U.PARAM_TYPES,e),l=Reflect.getMetadata(U.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:l||{}}},T.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(U.TAGGED_PROP,e)||[];return t},T}();mt.MetadataReader=E},wrZu:function(Oe,mt,R){var U=R("+K+b"),E=R("XYm9"),T=R("b2z7"),e=R("otv/"),t=R("yP5f"),l="[object Boolean]",s="[object Date]",c="[object Map]",r="[object Number]",h="[object RegExp]",n="[object Set]",i="[object String]",a="[object Symbol]",o="[object ArrayBuffer]",u="[object DataView]",f="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",y="[object Int16Array]",g="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",x="[object Uint16Array]",m="[object Uint32Array]";function S(P,A,O){var L=P.constructor;switch(A){case o:return U(P);case l:case s:return new L(+P);case u:return E(P,O);case f:case v:case b:case y:case g:case _:case M:case x:case m:return t(P,O);case c:return new L;case r:case i:return new L(P);case h:return T(P);case n:return new L;case a:return e(P)}}Oe.exports=S},wy8a:function(Oe,mt,R){var U=R("KxBF");function E(T,e,t){var l=T.length;return t=t===void 0?l:t,!e&&t>=l?T:U(T,e,t)}Oe.exports=E},xfSm:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.POST_CONSTRUCT=mt.DESIGN_PARAM_TYPES=mt.PARAM_TYPES=mt.TAGGED_PROP=mt.TAGGED=mt.MULTI_INJECT_TAG=mt.INJECT_TAG=mt.OPTIONAL_TAG=mt.UNMANAGED_TAG=mt.NAME_TAG=mt.NAMED_TAG=void 0,mt.NAMED_TAG="named",mt.NAME_TAG="name",mt.UNMANAGED_TAG="unmanaged",mt.OPTIONAL_TAG="optional",mt.INJECT_TAG="inject",mt.MULTI_INJECT_TAG="multi_inject",mt.TAGGED="inversify:tagged",mt.TAGGED_PROP="inversify:tagged_props",mt.PARAM_TYPES="inversify:paramtypes",mt.DESIGN_PARAM_TYPES="design:paramtypes",mt.POST_CONSTRUCT="post_construct"},xfeJ:function(Oe,mt){function R(U){return Function.toString.call(U).indexOf("[native code]")!==-1}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},xiII:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Request=void 0;var U=R("d9O0"),E=function(){function T(e,t,l,s,c){this.id=U.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=l,this.target=c,this.childRequests=[],this.bindings=Array.isArray(s)?s:[s],this.requestScope=l===null?new Map:null}return T.prototype.addChildRequest=function(e,t,l){var s=new T(e,this.parentContext,this,t,l);return this.childRequests.push(s),s},T}();mt.Request=E},xp6e:function(Oe,mt,R){"use strict";(function(U){R.d(mt,"a",function(){return it}),R.d(mt,"b",function(){return It}),R.d(mt,"c",function(){return V}),R.d(mt,"d",function(){return ut});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function E(Nt,Rt,Mt,bt){function At(rt){return rt instanceof Mt?rt:new Mt(function(Pt){Pt(rt)})}return new(Mt||(Mt=Promise))(function(rt,Pt){function z(et){try{gt(bt.next(et))}catch(ot){Pt(ot)}}function Q(et){try{gt(bt.throw(et))}catch(ot){Pt(ot)}}function gt(et){et.done?rt(et.value):At(et.value).then(z,Q)}gt((bt=bt.apply(Nt,Rt||[])).next())})}function T(Nt,Rt){var Mt={label:0,sent:function(){if(rt[0]&1)throw rt[1];return rt[1]},trys:[],ops:[]},bt,At,rt,Pt;return Pt={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(Pt[Symbol.iterator]=function(){return this}),Pt;function z(gt){return function(et){return Q([gt,et])}}function Q(gt){if(bt)throw new TypeError("Generator is already executing.");for(;Mt;)try{if(bt=1,At&&(rt=gt[0]&2?At.return:gt[0]?At.throw||((rt=At.return)&&rt.call(At),0):At.next)&&!(rt=rt.call(At,gt[1])).done)return rt;switch(At=0,rt&&(gt=[gt[0]&2,rt.value]),gt[0]){case 0:case 1:rt=gt;break;case 4:return Mt.label++,{value:gt[1],done:!1};case 5:Mt.label++,At=gt[1],gt=[0];continue;case 7:gt=Mt.ops.pop(),Mt.trys.pop();continue;default:if(rt=Mt.trys,!(rt=rt.length>0&&rt[rt.length-1])&&(gt[0]===6||gt[0]===2)){Mt=0;continue}if(gt[0]===3&&(!rt||gt[1]>rt[0]&&gt[1]<rt[3])){Mt.label=gt[1];break}if(gt[0]===6&&Mt.label<rt[1]){Mt.label=rt[1],rt=gt;break}if(rt&&Mt.label<rt[2]){Mt.label=rt[2],Mt.ops.push(gt);break}rt[2]&&Mt.ops.pop(),Mt.trys.pop();continue}gt=Rt.call(Nt,Mt)}catch(et){gt=[6,et],At=0}finally{bt=rt=0}if(gt[0]&5)throw gt[1];return{value:gt[0]?gt[1]:void 0,done:!0}}}function e(Nt,Rt){var Mt=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!Mt)return Nt;var bt=Mt.call(Nt),At,rt=[],Pt;try{for(;(Rt===void 0||Rt-- >0)&&!(At=bt.next()).done;)rt.push(At.value)}catch(z){Pt={error:z}}finally{try{At&&!At.done&&(Mt=bt.return)&&Mt.call(bt)}finally{if(Pt)throw Pt.error}}return rt}function t(){for(var Nt=[],Rt=0;Rt<arguments.length;Rt++)Nt=Nt.concat(e(arguments[Rt]));return Nt}function l(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}function s(Nt,Rt){return Rt={exports:{}},Nt(Rt,Rt.exports),Rt.exports}var c=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Mt;function Mt(bt){return bt&&typeof bt.length=="number"&&bt.length>=0&&bt.length%1==0}Nt.exports=Rt.default});l(c);var r=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=function(Mt){return function(){for(var bt=[],At=arguments.length;At--;)bt[At]=arguments[At];var rt=bt.pop();return Mt.call(this,bt,rt)}},Nt.exports=Rt.default});l(r);var h=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.fallback=At,Rt.wrap=rt;var Mt=Rt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,bt=Rt.hasNextTick=typeof U=="object"&&typeof U.nextTick=="function";function At(z){setTimeout(z,0)}function rt(z){return function(Q){for(var gt=[],et=arguments.length-1;et-- >0;)gt[et]=arguments[et+1];return z(function(){return Q.apply(void 0,gt)})}}var Pt;Mt?Pt=setImmediate:bt?Pt=U.nextTick:Pt=At,Rt.default=rt(Pt)});l(h);var n=h.fallback,i=h.wrap,a=h.hasSetImmediate,o=h.hasNextTick,u=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=rt;var Mt=At(r),bt=At(h);function At(Q){return Q&&Q.__esModule?Q:{default:Q}}function rt(Q){return(0,f.isAsync)(Q)?function(){for(var gt=[],et=arguments.length;et--;)gt[et]=arguments[et];var ot=gt.pop(),xt=Q.apply(this,gt);return Pt(xt,ot)}:(0,Mt.default)(function(gt,et){var ot;try{ot=Q.apply(this,gt)}catch(xt){return et(xt)}if(ot&&typeof ot.then=="function")return Pt(ot,et);et(null,ot)})}function Pt(Q,gt){return Q.then(function(et){z(gt,null,et)},function(et){z(gt,et&&et.message?et:new Error(et))})}function z(Q,gt,et){try{Q(gt,et)}catch(ot){(0,bt.default)(function(xt){throw xt},ot)}}Nt.exports=Rt.default});l(u);var f=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.isAsyncIterable=Rt.isAsyncGenerator=Rt.isAsync=void 0;var Mt=bt(u);function bt(Q){return Q&&Q.__esModule?Q:{default:Q}}function At(Q){return Q[Symbol.toStringTag]==="AsyncFunction"}function rt(Q){return Q[Symbol.toStringTag]==="AsyncGenerator"}function Pt(Q){return typeof Q[Symbol.asyncIterator]=="function"}function z(Q){if(typeof Q!="function")throw new Error("expected a function");return At(Q)?(0,Mt.default)(Q):Q}Rt.default=z,Rt.isAsync=At,Rt.isAsyncGenerator=rt,Rt.isAsyncIterable=Pt});l(f);var v=f.isAsyncIterable,b=f.isAsyncGenerator,y=f.isAsync,g=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Mt;function Mt(bt,At){if(At===void 0&&(At=bt.length),!At)throw new Error("arity is undefined");function rt(){for(var Pt=this,z=[],Q=arguments.length;Q--;)z[Q]=arguments[Q];return typeof z[At-1]=="function"?bt.apply(this,z):new Promise(function(gt,et){z[At-1]=function(ot){for(var xt=[],H=arguments.length-1;H-- >0;)xt[H]=arguments[H+1];if(ot)return et(ot);gt(xt.length>1?xt:xt[0])},bt.apply(Pt,z)})}return Object.defineProperty(rt,"name",{configurable:!0,value:"awaitable("+bt.name+")"}),rt}Nt.exports=Rt.default});l(g);var _=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=rt(c),bt=rt(f),At=rt(g);function rt(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}Rt.default=(0,At.default)(function(Pt,z,Q){var gt=(0,Mt.default)(z)?[]:{};Pt(z,function(et,ot,xt){(0,bt.default)(et)(function(H){for(var nt,at=[],q=arguments.length-1;q-- >0;)at[q]=arguments[q+1];at.length<2&&(nt=at,at=nt[0]),gt[ot]=at,xt(H)})},function(et){return Q(et,gt)})},3),Nt.exports=Rt.default});l(_);var M=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Mt;function Mt(bt){function At(){for(var rt=[],Pt=arguments.length;Pt--;)rt[Pt]=arguments[Pt];if(bt!==null){var z=bt;bt=null,z.apply(this,rt)}}return Object.assign(At,bt),At}Nt.exports=Rt.default});l(M);var x=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=function(Mt){return Mt[Symbol.iterator]&&Mt[Symbol.iterator]()},Nt.exports=Rt.default});l(x);var m=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Q;var Mt=At(c),bt=At(x);function At(gt){return gt&&gt.__esModule?gt:{default:gt}}function rt(gt){var et=-1,ot=gt.length;return function(){return++et<ot?{value:gt[et],key:et}:null}}function Pt(gt){var et=-1;return function(){var xt=gt.next();return xt.done?null:(et++,{value:xt.value,key:et})}}function z(gt){var et=gt?Object.keys(gt):[],ot=-1,xt=et.length;return function(){var nt=et[++ot];return ot<xt?{value:gt[nt],key:nt}:null}}function Q(gt){if((0,Mt.default)(gt))return rt(gt);var et=(0,bt.default)(gt);return et?Pt(et):z(gt)}Nt.exports=Rt.default});l(m);var S=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Mt;function Mt(bt){return function(){for(var At=[],rt=arguments.length;rt--;)At[rt]=arguments[rt];if(bt===null)throw new Error("Callback was already called.");var Pt=bt;bt=null,Pt.apply(this,At)}}Nt.exports=Rt.default});l(S);var P=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt={};Rt.default=Mt,Nt.exports=Rt.default});l(P);var A=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=At;var Mt=bt(P);function bt(rt){return rt&&rt.__esModule?rt:{default:rt}}function At(rt,Pt,z,Q){var gt=!1,et=!1,ot=!1,xt=0,H=0;function nt(){xt>=Pt||ot||gt||(ot=!0,rt.next().then(function(_t){var yt=_t.value,Ft=_t.done;if(!(et||gt)){if(ot=!1,Ft){gt=!0,xt<=0&&Q(null);return}xt++,z(yt,H,at),H++,nt()}}).catch(q))}function at(_t,yt){if(xt-=1,!et){if(_t)return q(_t);if(_t===!1){gt=!0,et=!0;return}if(yt===Mt.default||gt&&xt<=0)return gt=!0,Q(null);nt()}}function q(_t){et||(ot=!1,gt=!0,Q(_t))}nt()}Nt.exports=Rt.default});l(A);var O=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=z(M),bt=z(m),At=z(S),rt=z(A),Pt=z(P);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}Rt.default=function(Q){return function(gt,et,ot){if(ot=(0,Mt.default)(ot),Q<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!gt)return ot(null);if((0,f.isAsyncGenerator)(gt))return(0,rt.default)(gt,Q,et,ot);if((0,f.isAsyncIterable)(gt))return(0,rt.default)(gt[Symbol.asyncIterator](),Q,et,ot);var xt=(0,bt.default)(gt),H=!1,nt=!1,at=0,q=!1;function _t(Ft,Qt){if(!nt)if(at-=1,Ft)H=!0,ot(Ft);else if(Ft===!1)H=!0,nt=!0;else{if(Qt===Pt.default||H&&at<=0)return H=!0,ot(null);q||yt()}}function yt(){for(q=!0;at<Q&&!H;){var Ft=xt();if(Ft===null){H=!0,at<=0&&ot(null);return}at+=1,et(Ft.value,Ft.key,(0,At.default)(_t))}q=!1}yt()}},Nt.exports=Rt.default});l(O);var L=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=rt(O),bt=rt(f),At=rt(g);function rt(z){return z&&z.__esModule?z:{default:z}}function Pt(z,Q,gt,et){return(0,Mt.default)(Q)(z,(0,bt.default)(gt),et)}Rt.default=(0,At.default)(Pt,4),Nt.exports=Rt.default});l(L);var W=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=At(L),bt=At(g);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function rt(Pt,z,Q){return(0,Mt.default)(Pt,1,z,Q)}Rt.default=(0,bt.default)(rt,3),Nt.exports=Rt.default});l(W);var F=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=rt;var Mt=At(_),bt=At(W);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function rt(Pt,z){return(0,Mt.default)(bt.default,Pt,z)}Nt.exports=Rt.default}),K=l(F),V=function(){function Nt(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];this.args=[],this.tasks=[]}return Nt.prototype.call=function(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];return this.args=Mt,K(this.tasks)},Nt.prototype.tap=function(Rt,Mt){var bt=this;this.tasks.push(function(At){Mt.apply(void 0,t(bt.args)),At(null,Rt)})},Nt}(),k=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=gt(c),bt=gt(P),At=gt(L),rt=gt(M),Pt=gt(S),z=gt(f),Q=gt(g);function gt(H){return H&&H.__esModule?H:{default:H}}function et(H,nt,at){at=(0,rt.default)(at);var q=0,_t=0,yt=H.length,Ft=!1;yt===0&&at(null);function Qt(ee,Vt){ee===!1&&(Ft=!0),Ft!==!0&&(ee?at(ee):(++_t===yt||Vt===bt.default)&&at(null))}for(;q<yt;q++)nt(H[q],q,(0,Pt.default)(Qt))}function ot(H,nt,at){return(0,At.default)(H,Infinity,nt,at)}function xt(H,nt,at){var q=(0,Mt.default)(H)?et:ot;return q(H,(0,z.default)(nt),at)}Rt.default=(0,Q.default)(xt,3),Nt.exports=Rt.default});l(k);var Z=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=rt;var Mt=At(k),bt=At(_);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function rt(Pt,z){return(0,bt.default)(Mt.default,Pt,z)}Nt.exports=Rt.default}),X=l(Z),it=function(){function Nt(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];this.tasks=[]}return Nt.prototype.promise=function(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];return X(this.tasks)},Nt.prototype.tapPromise=function(Rt,Mt){var bt=this;this.tasks.push(function(At){return E(bt,void 0,void 0,function(){return T(this,function(rt){switch(rt.label){case 0:return[4,Mt()];case 1:return rt.sent(),At(null,Rt),[2]}})})})},Nt}(),ft=s(function(Nt,Rt){Object.defineProperty(Rt,"__esModule",{value:!0});var Mt=Pt(M),bt=Pt(S),At=Pt(f),rt=Pt(g);function Pt(Q){return Q&&Q.__esModule?Q:{default:Q}}function z(Q,gt){if(gt=(0,Mt.default)(gt),!Array.isArray(Q))return gt(new Error("First argument to waterfall must be an array of functions"));if(!Q.length)return gt();var et=0;function ot(H){var nt=(0,At.default)(Q[et++]);nt.apply(void 0,H.concat([(0,bt.default)(xt)]))}function xt(H){for(var nt=[],at=arguments.length-1;at-- >0;)nt[at]=arguments[at+1];if(H!==!1){if(H||et===Q.length)return gt.apply(void 0,[H].concat(nt));ot(nt)}}ot([])}Rt.default=(0,rt.default)(z),Nt.exports=Rt.default}),pt=l(ft),ut=function(){function Nt(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];this.tasks=[]}return Nt.prototype.call=function(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];return pt(this.tasks)},Nt.prototype.tap=function(Rt,Mt){this.tasks.length===0?this.tasks.push(function(bt){var At=Mt();bt(At?null:!1,At)}):this.tasks.push(function(bt,At){var rt=Mt();At(rt?null:!1,Rt)})},Nt}(),It=function(){function Nt(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];this.tasks=[]}return Nt.prototype.call=function(){for(var Rt=arguments,Mt=[],bt=0;bt<arguments.length;bt++)Mt[bt]=Rt[bt];return K(this.tasks)},Nt.prototype.tap=function(Rt,Mt){this.tasks.push(function(bt){var At=Mt();bt(At,Rt)})},Nt}()}).call(this,R("Q2Ig"))},yG8O:function(Oe,mt){function R(U,E,T,e){!T||Object.defineProperty(U,E,{enumerable:T.enumerable,configurable:T.configurable,writable:T.writable,value:T.initializer?T.initializer.call(e):void 0})}Oe.exports=R,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},yHx3:function(Oe,mt){var R=Object.prototype,U=R.hasOwnProperty;function E(T){var e=T.length,t=new T.constructor(e);return e&&typeof T[0]=="string"&&U.call(T,"index")&&(t.index=T.index,t.input=T.input),t}Oe.exports=E},yLV6:function(Oe,mt,R){var U;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(E,T,e,t){"use strict";var l=["","webkit","Moz","MS","ms","o"],s=T.createElement("div"),c="function",r=Math.round,h=Math.abs,n=Date.now;function i(oe,Ht,Ee){return setTimeout(g(oe,Ee),Ht)}function a(oe,Ht,Ee){return Array.isArray(oe)?(o(oe,Ee[Ht],Ee),!0):!1}function o(oe,Ht,Ee){var an;if(!!oe)if(oe.forEach)oe.forEach(Ht,Ee);else if(oe.length!==t)for(an=0;an<oe.length;)Ht.call(Ee,oe[an],an,oe),an++;else for(an in oe)oe.hasOwnProperty(an)&&Ht.call(Ee,oe[an],an,oe)}function u(oe,Ht,Ee){var an="DEPRECATED METHOD: "+Ht+`
`+Ee+` AT 
`;return function(){var zn=new Error("get-stack-trace"),qn=zn&&zn.stack?zn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Un=E.console&&(E.console.warn||E.console.log);return Un&&Un.call(E.console,an,qn),oe.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(Ht){if(Ht===t||Ht===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ee=Object(Ht),an=1;an<arguments.length;an++){var zn=arguments[an];if(zn!==t&&zn!==null)for(var qn in zn)zn.hasOwnProperty(qn)&&(Ee[qn]=zn[qn])}return Ee}:f=Object.assign;var v=u(function(Ht,Ee,an){for(var zn=Object.keys(Ee),qn=0;qn<zn.length;)(!an||an&&Ht[zn[qn]]===t)&&(Ht[zn[qn]]=Ee[zn[qn]]),qn++;return Ht},"extend","Use `assign`."),b=u(function(Ht,Ee){return v(Ht,Ee,!0)},"merge","Use `assign`.");function y(oe,Ht,Ee){var an=Ht.prototype,zn;zn=oe.prototype=Object.create(an),zn.constructor=oe,zn._super=an,Ee&&f(zn,Ee)}function g(oe,Ht){return function(){return oe.apply(Ht,arguments)}}function _(oe,Ht){return typeof oe==c?oe.apply(Ht&&Ht[0]||t,Ht):oe}function M(oe,Ht){return oe===t?Ht:oe}function x(oe,Ht,Ee){o(A(Ht),function(an){oe.addEventListener(an,Ee,!1)})}function m(oe,Ht,Ee){o(A(Ht),function(an){oe.removeEventListener(an,Ee,!1)})}function S(oe,Ht){for(;oe;){if(oe==Ht)return!0;oe=oe.parentNode}return!1}function P(oe,Ht){return oe.indexOf(Ht)>-1}function A(oe){return oe.trim().split(/\s+/g)}function O(oe,Ht,Ee){if(oe.indexOf&&!Ee)return oe.indexOf(Ht);for(var an=0;an<oe.length;){if(Ee&&oe[an][Ee]==Ht||!Ee&&oe[an]===Ht)return an;an++}return-1}function L(oe){return Array.prototype.slice.call(oe,0)}function W(oe,Ht,Ee){for(var an=[],zn=[],qn=0;qn<oe.length;){var Un=Ht?oe[qn][Ht]:oe[qn];O(zn,Un)<0&&an.push(oe[qn]),zn[qn]=Un,qn++}return Ee&&(Ht?an=an.sort(function(Si,Ci){return Si[Ht]>Ci[Ht]}):an=an.sort()),an}function F(oe,Ht){for(var Ee,an,zn=Ht[0].toUpperCase()+Ht.slice(1),qn=0;qn<l.length;){if(Ee=l[qn],an=Ee?Ee+zn:Ht,an in oe)return an;qn++}return t}var K=1;function V(){return K++}function k(oe){var Ht=oe.ownerDocument||oe;return Ht.defaultView||Ht.parentWindow||E}var Z=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in E,it=F(E,"PointerEvent")!==t,ft=X&&Z.test(navigator.userAgent),pt="touch",ut="pen",It="mouse",Nt="kinect",Rt=25,Mt=1,bt=2,At=4,rt=8,Pt=1,z=2,Q=4,gt=8,et=16,ot=z|Q,xt=gt|et,H=ot|xt,nt=["x","y"],at=["clientX","clientY"];function q(oe,Ht){var Ee=this;this.manager=oe,this.callback=Ht,this.element=oe.element,this.target=oe.options.inputTarget,this.domHandler=function(an){_(oe.options.enable,[oe])&&Ee.handler(an)},this.init()}q.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(k(this.element),this.evWin,this.domHandler)}};function _t(oe){var Ht,Ee=oe.options.inputClass;return Ee?Ht=Ee:it?Ht=hi:ft?Ht=ue:X?Ht=or:Ht=nn,new Ht(oe,yt)}function yt(oe,Ht,Ee){var an=Ee.pointers.length,zn=Ee.changedPointers.length,qn=Ht&Mt&&an-zn==0,Un=Ht&(At|rt)&&an-zn==0;Ee.isFirst=!!qn,Ee.isFinal=!!Un,qn&&(oe.session={}),Ee.eventType=Ht,Ft(oe,Ee),oe.emit("hammer.input",Ee),oe.recognize(Ee),oe.session.prevInput=Ee}function Ft(oe,Ht){var Ee=oe.session,an=Ht.pointers,zn=an.length;Ee.firstInput||(Ee.firstInput=Vt(Ht)),zn>1&&!Ee.firstMultiple?Ee.firstMultiple=Vt(Ht):zn===1&&(Ee.firstMultiple=!1);var qn=Ee.firstInput,Un=Ee.firstMultiple,Jr=Un?Un.center:qn.center,Si=Ht.center=$t(an);Ht.timeStamp=n(),Ht.deltaTime=Ht.timeStamp-qn.timeStamp,Ht.angle=be(Jr,Si),Ht.distance=le(Jr,Si),Qt(Ee,Ht),Ht.offsetDirection=me(Ht.deltaX,Ht.deltaY);var Ci=Me(Ht.deltaTime,Ht.deltaX,Ht.deltaY);Ht.overallVelocityX=Ci.x,Ht.overallVelocityY=Ci.y,Ht.overallVelocity=h(Ci.x)>h(Ci.y)?Ci.x:Ci.y,Ht.scale=Un?Xe(Un.pointers,an):1,Ht.rotation=Un?ze(Un.pointers,an):0,Ht.maxPointers=Ee.prevInput?Ht.pointers.length>Ee.prevInput.maxPointers?Ht.pointers.length:Ee.prevInput.maxPointers:Ht.pointers.length,ee(Ee,Ht);var ki=oe.element;S(Ht.srcEvent.target,ki)&&(ki=Ht.srcEvent.target),Ht.target=ki}function Qt(oe,Ht){var Ee=Ht.center,an=oe.offsetDelta||{},zn=oe.prevDelta||{},qn=oe.prevInput||{};(Ht.eventType===Mt||qn.eventType===At)&&(zn=oe.prevDelta={x:qn.deltaX||0,y:qn.deltaY||0},an=oe.offsetDelta={x:Ee.x,y:Ee.y}),Ht.deltaX=zn.x+(Ee.x-an.x),Ht.deltaY=zn.y+(Ee.y-an.y)}function ee(oe,Ht){var Ee=oe.lastInterval||Ht,an=Ht.timeStamp-Ee.timeStamp,zn,qn,Un,Jr;if(Ht.eventType!=rt&&(an>Rt||Ee.velocity===t)){var Si=Ht.deltaX-Ee.deltaX,Ci=Ht.deltaY-Ee.deltaY,ki=Me(an,Si,Ci);qn=ki.x,Un=ki.y,zn=h(ki.x)>h(ki.y)?ki.x:ki.y,Jr=me(Si,Ci),oe.lastInterval=Ht}else zn=Ee.velocity,qn=Ee.velocityX,Un=Ee.velocityY,Jr=Ee.direction;Ht.velocity=zn,Ht.velocityX=qn,Ht.velocityY=Un,Ht.direction=Jr}function Vt(oe){for(var Ht=[],Ee=0;Ee<oe.pointers.length;)Ht[Ee]={clientX:r(oe.pointers[Ee].clientX),clientY:r(oe.pointers[Ee].clientY)},Ee++;return{timeStamp:n(),pointers:Ht,center:$t(Ht),deltaX:oe.deltaX,deltaY:oe.deltaY}}function $t(oe){var Ht=oe.length;if(Ht===1)return{x:r(oe[0].clientX),y:r(oe[0].clientY)};for(var Ee=0,an=0,zn=0;zn<Ht;)Ee+=oe[zn].clientX,an+=oe[zn].clientY,zn++;return{x:r(Ee/Ht),y:r(an/Ht)}}function Me(oe,Ht,Ee){return{x:Ht/oe||0,y:Ee/oe||0}}function me(oe,Ht){return oe===Ht?Pt:h(oe)>=h(Ht)?oe<0?z:Q:Ht<0?gt:et}function le(oe,Ht,Ee){Ee||(Ee=nt);var an=Ht[Ee[0]]-oe[Ee[0]],zn=Ht[Ee[1]]-oe[Ee[1]];return Math.sqrt(an*an+zn*zn)}function be(oe,Ht,Ee){Ee||(Ee=nt);var an=Ht[Ee[0]]-oe[Ee[0]],zn=Ht[Ee[1]]-oe[Ee[1]];return Math.atan2(zn,an)*180/Math.PI}function ze(oe,Ht){return be(Ht[1],Ht[0],at)+be(oe[1],oe[0],at)}function Xe(oe,Ht){return le(Ht[0],Ht[1],at)/le(oe[0],oe[1],at)}var Sn={mousedown:Mt,mousemove:bt,mouseup:At},Xn="mousedown",Hn="mousemove mouseup";function nn(){this.evEl=Xn,this.evWin=Hn,this.pressed=!1,q.apply(this,arguments)}y(nn,q,{handler:function(Ht){var Ee=Sn[Ht.type];Ee&Mt&&Ht.button===0&&(this.pressed=!0),Ee&bt&&Ht.which!==1&&(Ee=At),!!this.pressed&&(Ee&At&&(this.pressed=!1),this.callback(this.manager,Ee,{pointers:[Ht],changedPointers:[Ht],pointerType:It,srcEvent:Ht}))}});var en={pointerdown:Mt,pointermove:bt,pointerup:At,pointercancel:rt,pointerout:rt},An={2:pt,3:ut,4:It,5:Nt},Nn="pointerdown",fr="pointermove pointerup pointercancel";E.MSPointerEvent&&!E.PointerEvent&&(Nn="MSPointerDown",fr="MSPointerMove MSPointerUp MSPointerCancel");function hi(){this.evEl=Nn,this.evWin=fr,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(hi,q,{handler:function(Ht){var Ee=this.store,an=!1,zn=Ht.type.toLowerCase().replace("ms",""),qn=en[zn],Un=An[Ht.pointerType]||Ht.pointerType,Jr=Un==pt,Si=O(Ee,Ht.pointerId,"pointerId");qn&Mt&&(Ht.button===0||Jr)?Si<0&&(Ee.push(Ht),Si=Ee.length-1):qn&(At|rt)&&(an=!0),!(Si<0)&&(Ee[Si]=Ht,this.callback(this.manager,qn,{pointers:Ee,changedPointers:[Ht],pointerType:Un,srcEvent:Ht}),an&&Ee.splice(Si,1))}});var Ce={touchstart:Mt,touchmove:bt,touchend:At,touchcancel:rt},Te="touchstart",Jt="touchstart touchmove touchend touchcancel";function pe(){this.evTarget=Te,this.evWin=Jt,this.started=!1,q.apply(this,arguments)}y(pe,q,{handler:function(Ht){var Ee=Ce[Ht.type];if(Ee===Mt&&(this.started=!0),!!this.started){var an=Wt.call(this,Ht,Ee);Ee&(At|rt)&&an[0].length-an[1].length==0&&(this.started=!1),this.callback(this.manager,Ee,{pointers:an[0],changedPointers:an[1],pointerType:pt,srcEvent:Ht})}}});function Wt(oe,Ht){var Ee=L(oe.touches),an=L(oe.changedTouches);return Ht&(At|rt)&&(Ee=W(Ee.concat(an),"identifier",!0)),[Ee,an]}var ie={touchstart:Mt,touchmove:bt,touchend:At,touchcancel:rt},Ae="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=Ae,this.targetIds={},q.apply(this,arguments)}y(ue,q,{handler:function(Ht){var Ee=ie[Ht.type],an=xe.call(this,Ht,Ee);!an||this.callback(this.manager,Ee,{pointers:an[0],changedPointers:an[1],pointerType:pt,srcEvent:Ht})}});function xe(oe,Ht){var Ee=L(oe.touches),an=this.targetIds;if(Ht&(Mt|bt)&&Ee.length===1)return an[Ee[0].identifier]=!0,[Ee,Ee];var zn,qn,Un=L(oe.changedTouches),Jr=[],Si=this.target;if(qn=Ee.filter(function(Ci){return S(Ci.target,Si)}),Ht===Mt)for(zn=0;zn<qn.length;)an[qn[zn].identifier]=!0,zn++;for(zn=0;zn<Un.length;)an[Un[zn].identifier]&&Jr.push(Un[zn]),Ht&(At|rt)&&delete an[Un[zn].identifier],zn++;if(!!Jr.length)return[W(qn.concat(Jr),"identifier",!0),Jr]}var $e=2500,Fn=25;function or(){q.apply(this,arguments);var oe=g(this.handler,this);this.touch=new ue(this.manager,oe),this.mouse=new nn(this.manager,oe),this.primaryTouch=null,this.lastTouches=[]}y(or,q,{handler:function(Ht,Ee,an){var zn=an.pointerType==pt,qn=an.pointerType==It;if(!(qn&&an.sourceCapabilities&&an.sourceCapabilities.firesTouchEvents)){if(zn)En.call(this,Ee,an);else if(qn&&br.call(this,an))return;this.callback(Ht,Ee,an)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function En(oe,Ht){oe&Mt?(this.primaryTouch=Ht.changedPointers[0].identifier,Pn.call(this,Ht)):oe&(At|rt)&&Pn.call(this,Ht)}function Pn(oe){var Ht=oe.changedPointers[0];if(Ht.identifier===this.primaryTouch){var Ee={x:Ht.clientX,y:Ht.clientY};this.lastTouches.push(Ee);var an=this.lastTouches,zn=function(){var Un=an.indexOf(Ee);Un>-1&&an.splice(Un,1)};setTimeout(zn,$e)}}function br(oe){for(var Ht=oe.srcEvent.clientX,Ee=oe.srcEvent.clientY,an=0;an<this.lastTouches.length;an++){var zn=this.lastTouches[an],qn=Math.abs(Ht-zn.x),Un=Math.abs(Ee-zn.y);if(qn<=Fn&&Un<=Fn)return!0}return!1}var Pr=F(s.style,"touchAction"),ln=Pr!==t,Cr="compute",Ar="auto",Be="manipulation",We="none",Ye="pan-x",fn="pan-y",gn=Ln();function Bn(oe,Ht){this.manager=oe,this.set(Ht)}Bn.prototype={set:function(Ht){Ht==Cr&&(Ht=this.compute()),ln&&this.manager.element.style&&gn[Ht]&&(this.manager.element.style[Pr]=Ht),this.actions=Ht.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ht=[];return o(this.manager.recognizers,function(Ee){_(Ee.options.enable,[Ee])&&(Ht=Ht.concat(Ee.getTouchAction()))}),bn(Ht.join(" "))},preventDefaults:function(Ht){var Ee=Ht.srcEvent,an=Ht.offsetDirection;if(this.manager.session.prevented){Ee.preventDefault();return}var zn=this.actions,qn=P(zn,We)&&!gn[We],Un=P(zn,fn)&&!gn[fn],Jr=P(zn,Ye)&&!gn[Ye];if(qn){var Si=Ht.pointers.length===1,Ci=Ht.distance<2,ki=Ht.deltaTime<250;if(Si&&Ci&&ki)return}if(!(Jr&&Un)&&(qn||Un&&an&ot||Jr&&an&xt))return this.preventSrc(Ee)},preventSrc:function(Ht){this.manager.session.prevented=!0,Ht.preventDefault()}};function bn(oe){if(P(oe,We))return We;var Ht=P(oe,Ye),Ee=P(oe,fn);return Ht&&Ee?We:Ht||Ee?Ht?Ye:fn:P(oe,Be)?Be:Ar}function Ln(){if(!ln)return!1;var oe={},Ht=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ee){oe[Ee]=Ht?E.CSS.supports("touch-action",Ee):!0}),oe}var ir=1,Yn=2,_n=4,Dr=8,vr=Dr,zr=16,Ai=32;function Aa(oe){this.options=f({},this.defaults,oe||{}),this.id=V(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=ir,this.simultaneous={},this.requireFail=[]}Aa.prototype={defaults:{},set:function(Ht){return f(this.options,Ht),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ht){if(a(Ht,"recognizeWith",this))return this;var Ee=this.simultaneous;return Ht=Zo(Ht,this),Ee[Ht.id]||(Ee[Ht.id]=Ht,Ht.recognizeWith(this)),this},dropRecognizeWith:function(Ht){return a(Ht,"dropRecognizeWith",this)?this:(Ht=Zo(Ht,this),delete this.simultaneous[Ht.id],this)},requireFailure:function(Ht){if(a(Ht,"requireFailure",this))return this;var Ee=this.requireFail;return Ht=Zo(Ht,this),O(Ee,Ht)===-1&&(Ee.push(Ht),Ht.requireFailure(this)),this},dropRequireFailure:function(Ht){if(a(Ht,"dropRequireFailure",this))return this;Ht=Zo(Ht,this);var Ee=O(this.requireFail,Ht);return Ee>-1&&this.requireFail.splice(Ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ht){return!!this.simultaneous[Ht.id]},emit:function(Ht){var Ee=this,an=this.state;function zn(qn){Ee.manager.emit(qn,Ht)}an<Dr&&zn(Ee.options.event+ka(an)),zn(Ee.options.event),Ht.additionalEvent&&zn(Ht.additionalEvent),an>=Dr&&zn(Ee.options.event+ka(an))},tryEmit:function(Ht){if(this.canEmit())return this.emit(Ht);this.state=Ai},canEmit:function(){for(var Ht=0;Ht<this.requireFail.length;){if(!(this.requireFail[Ht].state&(Ai|ir)))return!1;Ht++}return!0},recognize:function(Ht){var Ee=f({},Ht);if(!_(this.options.enable,[this,Ee])){this.reset(),this.state=Ai;return}this.state&(vr|zr|Ai)&&(this.state=ir),this.state=this.process(Ee),this.state&(Yn|_n|Dr|zr)&&this.tryEmit(Ee)},process:function(Ht){},getTouchAction:function(){},reset:function(){}};function ka(oe){return oe&zr?"cancel":oe&Dr?"end":oe&_n?"move":oe&Yn?"start":""}function eo(oe){return oe==et?"down":oe==gt?"up":oe==z?"left":oe==Q?"right":""}function Zo(oe,Ht){var Ee=Ht.manager;return Ee?Ee.get(oe):oe}function Ea(){Aa.apply(this,arguments)}y(Ea,Aa,{defaults:{pointers:1},attrTest:function(Ht){var Ee=this.options.pointers;return Ee===0||Ht.pointers.length===Ee},process:function(Ht){var Ee=this.state,an=Ht.eventType,zn=Ee&(Yn|_n),qn=this.attrTest(Ht);return zn&&(an&rt||!qn)?Ee|zr:zn||qn?an&At?Ee|Dr:Ee&Yn?Ee|_n:Yn:Ai}});function so(){Ea.apply(this,arguments),this.pX=null,this.pY=null}y(so,Ea,{defaults:{event:"pan",threshold:10,pointers:1,direction:H},getTouchAction:function(){var Ht=this.options.direction,Ee=[];return Ht&ot&&Ee.push(fn),Ht&xt&&Ee.push(Ye),Ee},directionTest:function(Ht){var Ee=this.options,an=!0,zn=Ht.distance,qn=Ht.direction,Un=Ht.deltaX,Jr=Ht.deltaY;return qn&Ee.direction||(Ee.direction&ot?(qn=Un===0?Pt:Un<0?z:Q,an=Un!=this.pX,zn=Math.abs(Ht.deltaX)):(qn=Jr===0?Pt:Jr<0?gt:et,an=Jr!=this.pY,zn=Math.abs(Ht.deltaY))),Ht.direction=qn,an&&zn>Ee.threshold&&qn&Ee.direction},attrTest:function(Ht){return Ea.prototype.attrTest.call(this,Ht)&&(this.state&Yn||!(this.state&Yn)&&this.directionTest(Ht))},emit:function(Ht){this.pX=Ht.deltaX,this.pY=Ht.deltaY;var Ee=eo(Ht.direction);Ee&&(Ht.additionalEvent=this.options.event+Ee),this._super.emit.call(this,Ht)}});function Ko(){Ea.apply(this,arguments)}y(Ko,Ea,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Ht){return this._super.attrTest.call(this,Ht)&&(Math.abs(Ht.scale-1)>this.options.threshold||this.state&Yn)},emit:function(Ht){if(Ht.scale!==1){var Ee=Ht.scale<1?"in":"out";Ht.additionalEvent=this.options.event+Ee}this._super.emit.call(this,Ht)}});function no(){Aa.apply(this,arguments),this._timer=null,this._input=null}y(no,Aa,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ar]},process:function(Ht){var Ee=this.options,an=Ht.pointers.length===Ee.pointers,zn=Ht.distance<Ee.threshold,qn=Ht.deltaTime>Ee.time;if(this._input=Ht,!zn||!an||Ht.eventType&(At|rt)&&!qn)this.reset();else if(Ht.eventType&Mt)this.reset(),this._timer=i(function(){this.state=vr,this.tryEmit()},Ee.time,this);else if(Ht.eventType&At)return vr;return Ai},reset:function(){clearTimeout(this._timer)},emit:function(Ht){this.state===vr&&(Ht&&Ht.eventType&At?this.manager.emit(this.options.event+"up",Ht):(this._input.timeStamp=n(),this.manager.emit(this.options.event,this._input)))}});function So(){Ea.apply(this,arguments)}y(So,Ea,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Ht){return this._super.attrTest.call(this,Ht)&&(Math.abs(Ht.rotation)>this.options.threshold||this.state&Yn)}});function cs(){Ea.apply(this,arguments)}y(cs,Ea,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ot|xt,pointers:1},getTouchAction:function(){return so.prototype.getTouchAction.call(this)},attrTest:function(Ht){var Ee=this.options.direction,an;return Ee&(ot|xt)?an=Ht.overallVelocity:Ee&ot?an=Ht.overallVelocityX:Ee&xt&&(an=Ht.overallVelocityY),this._super.attrTest.call(this,Ht)&&Ee&Ht.offsetDirection&&Ht.distance>this.options.threshold&&Ht.maxPointers==this.options.pointers&&h(an)>this.options.velocity&&Ht.eventType&At},emit:function(Ht){var Ee=eo(Ht.offsetDirection);Ee&&this.manager.emit(this.options.event+Ee,Ht),this.manager.emit(this.options.event,Ht)}});function wa(){Aa.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(wa,Aa,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Be]},process:function(Ht){var Ee=this.options,an=Ht.pointers.length===Ee.pointers,zn=Ht.distance<Ee.threshold,qn=Ht.deltaTime<Ee.time;if(this.reset(),Ht.eventType&Mt&&this.count===0)return this.failTimeout();if(zn&&qn&&an){if(Ht.eventType!=At)return this.failTimeout();var Un=this.pTime?Ht.timeStamp-this.pTime<Ee.interval:!0,Jr=!this.pCenter||le(this.pCenter,Ht.center)<Ee.posThreshold;this.pTime=Ht.timeStamp,this.pCenter=Ht.center,!Jr||!Un?this.count=1:this.count+=1,this._input=Ht;var Si=this.count%Ee.taps;if(Si===0)return this.hasRequireFailures()?(this._timer=i(function(){this.state=vr,this.tryEmit()},Ee.interval,this),Yn):vr}return Ai},failTimeout:function(){return this._timer=i(function(){this.state=Ai},this.options.interval,this),Ai},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function zo(oe,Ht){return Ht=Ht||{},Ht.recognizers=M(Ht.recognizers,zo.defaults.preset),new Xo(oe,Ht)}zo.VERSION="2.0.7",zo.defaults={domEvents:!1,touchAction:Cr,enable:!0,inputTarget:null,inputClass:null,preset:[[So,{enable:!1}],[Ko,{enable:!1},["rotate"]],[cs,{direction:ot}],[so,{direction:ot},["swipe"]],[wa],[wa,{event:"doubletap",taps:2},["tap"]],[no]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ro=1,fu=2;function Xo(oe,Ht){this.options=f({},zo.defaults,Ht||{}),this.options.inputTarget=this.options.inputTarget||oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=oe,this.input=_t(this),this.touchAction=new Bn(this,this.options.touchAction),au(this,!0),o(this.options.recognizers,function(Ee){var an=this.add(new Ee[0](Ee[1]));Ee[2]&&an.recognizeWith(Ee[2]),Ee[3]&&an.requireFailure(Ee[3])},this)}Xo.prototype={set:function(Ht){return f(this.options,Ht),Ht.touchAction&&this.touchAction.update(),Ht.inputTarget&&(this.input.destroy(),this.input.target=Ht.inputTarget,this.input.init()),this},stop:function(Ht){this.session.stopped=Ht?fu:Ro},recognize:function(Ht){var Ee=this.session;if(!Ee.stopped){this.touchAction.preventDefaults(Ht);var an,zn=this.recognizers,qn=Ee.curRecognizer;(!qn||qn&&qn.state&vr)&&(qn=Ee.curRecognizer=null);for(var Un=0;Un<zn.length;)an=zn[Un],Ee.stopped!==fu&&(!qn||an==qn||an.canRecognizeWith(qn))?an.recognize(Ht):an.reset(),!qn&&an.state&(Yn|_n|Dr)&&(qn=Ee.curRecognizer=an),Un++}},get:function(Ht){if(Ht instanceof Aa)return Ht;for(var Ee=this.recognizers,an=0;an<Ee.length;an++)if(Ee[an].options.event==Ht)return Ee[an];return null},add:function(Ht){if(a(Ht,"add",this))return this;var Ee=this.get(Ht.options.event);return Ee&&this.remove(Ee),this.recognizers.push(Ht),Ht.manager=this,this.touchAction.update(),Ht},remove:function(Ht){if(a(Ht,"remove",this))return this;if(Ht=this.get(Ht),Ht){var Ee=this.recognizers,an=O(Ee,Ht);an!==-1&&(Ee.splice(an,1),this.touchAction.update())}return this},on:function(Ht,Ee){if(Ht!==t&&Ee!==t){var an=this.handlers;return o(A(Ht),function(zn){an[zn]=an[zn]||[],an[zn].push(Ee)}),this}},off:function(Ht,Ee){if(Ht!==t){var an=this.handlers;return o(A(Ht),function(zn){Ee?an[zn]&&an[zn].splice(O(an[zn],Ee),1):delete an[zn]}),this}},emit:function(Ht,Ee){this.options.domEvents&&$s(Ht,Ee);var an=this.handlers[Ht]&&this.handlers[Ht].slice();if(!(!an||!an.length)){Ee.type=Ht,Ee.preventDefault=function(){Ee.srcEvent.preventDefault()};for(var zn=0;zn<an.length;)an[zn](Ee),zn++}},destroy:function(){this.element&&au(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function au(oe,Ht){var Ee=oe.element;if(!!Ee.style){var an;o(oe.options.cssProps,function(zn,qn){an=F(Ee.style,qn),Ht?(oe.oldCssProps[an]=Ee.style[an],Ee.style[an]=zn):Ee.style[an]=oe.oldCssProps[an]||""}),Ht||(oe.oldCssProps={})}}function $s(oe,Ht){var Ee=T.createEvent("Event");Ee.initEvent(oe,!0,!0),Ee.gesture=Ht,Ht.target.dispatchEvent(Ee)}f(zo,{INPUT_START:Mt,INPUT_MOVE:bt,INPUT_END:At,INPUT_CANCEL:rt,STATE_POSSIBLE:ir,STATE_BEGAN:Yn,STATE_CHANGED:_n,STATE_ENDED:Dr,STATE_RECOGNIZED:vr,STATE_CANCELLED:zr,STATE_FAILED:Ai,DIRECTION_NONE:Pt,DIRECTION_LEFT:z,DIRECTION_RIGHT:Q,DIRECTION_UP:gt,DIRECTION_DOWN:et,DIRECTION_HORIZONTAL:ot,DIRECTION_VERTICAL:xt,DIRECTION_ALL:H,Manager:Xo,Input:q,TouchAction:Bn,TouchInput:ue,MouseInput:nn,PointerEventInput:hi,TouchMouseInput:or,SingleTouchInput:pe,Recognizer:Aa,AttrRecognizer:Ea,Tap:wa,Pan:so,Swipe:cs,Pinch:Ko,Rotate:So,Press:no,on:x,off:m,each:o,merge:b,extend:v,assign:f,inherit:y,bindFn:g,prefixed:F});var Ne=typeof E!="undefined"?E:typeof self!="undefined"?self:{};Ne.Hammer=zo,U=function(){return zo}.call(mt,R,mt,Oe),U!==t&&(Oe.exports=U)})(window,document,"Hammer")},yMAV:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.Plan=void 0;var U=function(){function E(T,e){this.parentContext=T,this.rootRequest=e}return E}();mt.Plan=U},yP5f:function(Oe,mt,R){var U=R("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.length)}Oe.exports=E},"yP6+":function(Oe,mt,R){(function(E,T){Oe.exports=T(R("q1tI"))})(this,function(U){return function(E){var T={};function e(t){if(T[t])return T[t].exports;var l=T[t]={i:t,l:!1,exports:{}};return E[t].call(l.exports,l,l.exports,e),l.l=!0,l.exports}return e.m=E,e.c=T,e.i=function(t){return t},e.d=function(t,l,s){e.o(t,l)||Object.defineProperty(t,l,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,"a",l),l},e.o=function(t,l){return Object.prototype.hasOwnProperty.call(t,l)},e.p="",e(e.s=546)}([function(E,T,e){var t=e(166),l=e(16),s=t.mix({},t,{assign:t.mix,merge:t.deepMix,cloneDeep:t.clone,isFinite,isNaN,snapEqual:t.isNumberEqual,remove:t.pull,inArray:t.contains,toAllPadding:function(r){var h=0,n=0,i=0,a=0;return s.isNumber(r)||s.isString(r)?h=n=i=a=r:s.isArray(r)?(h=r[0],i=s.isNil(r[1])?r[0]:r[1],a=s.isNil(r[2])?r[0]:r[2],n=s.isNil(r[3])?i:r[3]):s.isObject(r)&&(h=r.top||0,i=r.right||0,a=r.bottom||0,n=r.left||0),[h,i,a,n]},getClipByRange:function(r){var h=r.tl,n=r.br,i=new l.Rect({attrs:{x:h.x,y:h.y,width:n.x-h.x,height:n.y-h.y}});return i}});s.Array={groupToMap:t.groupToMap,group:t.group,merge:t.merge,values:t.valuesOfKey,getRange:t.getRange,firstValue:t.firstValue,remove:t.pull},E.exports=s},function(E,T,e){var t=e(150),l={};t.merge(l,t,{mixin:function(c,r){var h=c.CFG?"CFG":"ATTRS";if(c&&r){c._mixins=r,c[h]=c[h]||{};var n={};l.each(r,function(i){l.augment(c,i);var a=i[h];a&&l.merge(n,a)}),c[h]=l.merge(n,c[h])}}}),E.exports=l},function(E,T,e){var t=e(39),l=e(4),s=function(r,h){if(!!r){var n=void 0;if(l(r))for(var i=0,a=r.length;i<a&&(n=h(r[i],i),n!==!1);i++);else if(t(r)){for(var o in r)if(r.hasOwnProperty(o)&&(n=h(r[o],o),n===!1))break}}};E.exports=s},function(E,T,e){var t=e(31),l=e(166),s=l.mix({assign:l.mix,isFinite,isNaN,Group:t.Group,Event:t.Event},l);E.exports=s},function(E,T,e){var t=e(17),l=Array.isArray?Array.isArray:function(s){return t(s,"Array")};E.exports=l},function(E,T,e){var t=e(0),l=e(132),s={version:"3.5.15",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(r,h){l[r]=h},setTheme:function(r){var h={};t.isObject(r)?h=r:t.indexOf(Object.keys(l),r)!==-1?h=l[r]:h=l.default,t.deepMix(s,h)}};s.setTheme("default"),E.exports=s},function(E,T){var e=function(l){return l==null};E.exports=e},function(E,T,e){var t=e(1),l=e(331),s=e(133),c=e(76),r=function i(a){i.superclass.constructor.call(this,a)};r.ATTRS={},t.extend(r,s);var h={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function n(i){for(var a=[],o=0;o<i.length;o++)t.isArray(i[o])?a.push([].concat(i[o])):a.push(i[o]);return a}t.augment(r,l,{isShape:!0,drawInner:function(a){var o=this,u=o._attrs;o.createPath(a);var f=a.globalAlpha;if(o.hasFill()){var v=u.fillOpacity;!t.isNil(v)&&v!==1?(a.globalAlpha=v,a.fill(),a.globalAlpha=f):a.fill()}if(o.hasStroke()){var b=o._attrs.lineWidth;if(b>0){var y=u.strokeOpacity;!t.isNil(y)&&y!==1&&(a.globalAlpha=y),a.stroke()}}o.afterPath(a)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(a,o){var u=this,f=[a,o,1];if(u.invert(f),u.isHitBox()){var v=u.getBBox();if(v&&!c.box(v.minX,v.maxX,v.minY,v.maxY,f[0],f[1]))return!1}var b=u._attrs.clip;if(b){if(b.invert(f,u.get("canvas")),b.isPointInPath(f[0],f[1]))return u.isPointInPath(f[0],f[1])}else return u.isPointInPath(f[0],f[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var a=this._attrs,o=a.lineAppendWidth||0,u=a.lineWidth||0;return u+o},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var a=this._cfg.box;return a||(a=this.calculateBox(),a&&(a.x=a.minX,a.y=a.minY,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY),this._cfg.box=a),a},clone:function(){var a=this,o=null,u=a._attrs,f={};return t.each(u,function(v,b){h[b]&&t.isArray(u[b])?f[b]=n(u[b]):f[b]=u[b]}),o=new a.constructor({attrs:f}),o._cfg.zIndex=a._cfg.zIndex,o}}),E.exports=r},function(E,T,e){function t(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function l(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var s=e(65),c=e(227),r=e(120),h=e(0),n=e(5),i=e(294),a=e(9),o=e(300),u=e(298),f=e(299),v=e(313),b=["color","shape","size"],y="_origin";function g(M){return(h.isString(M)||h.isPlainObject(M))&&(M=[M]),h.each(M,function(x,m){h.isObject(x)||(M[m]={type:x})}),M}var _=function(M){l(m,M);var x=m.prototype;x.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function m(S){var P;return P=M.call(this,S)||this,P.viewTheme=P.get("viewTheme"),h.assign(t(P),o,u,f),P.get("container")&&P._initContainer(),P._initOptions(),P}return x._initOptions=function(){var P=this.get("adjusts");P&&(P=g(P),this.set("adjusts",P))},x._createScale=function(P,A){var O=this.get("scales"),L=O[P];return L||(L=this.get("view").createScale(P,A),O[P]=L),L},x._setAttrOptions=function(P,A){var O=this.get("attrOptions");O[P]=A},x._createAttrOption=function(P,A,O,L){var W={};W.field=A,O?h.isFunction(O)?W.callback=O:W.values=O:P!=="color"&&(W.values=L),this._setAttrOptions(P,W)},x.position=function(P){return this._setAttrOptions("position",{field:P}),this},x.color=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("color",P,A,O.colors),this},x.size=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("size",P,A,O.sizes),this},x.shape=function(P,A){var O=this.viewTheme||n,L=this.get("type"),W=O.shapes[L]||[];return this._createAttrOption("shape",P,A,W),this},x.opacity=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("opacity",P,A,O.opacities),this},x.style=function(P,A){var O=this.get("styleOptions");O||(O={},this.set("styleOptions",O)),h.isObject(P)&&(A=P,P=null);var L;return P&&(L=v(P)),O.fields=L,O.style=A,this},x.label=function(P,A,O){var L=this,W=L.get("labelCfg");W||(W={},L.set("labelCfg",W));var F;return P&&(F=v(P)),W.fields=F,h.isFunction(A)?(O||(O={}),W.callback=A):h.isObject(A)&&(O=A),W.globalCfg=O,this},x.tooltip=function(P,A){var O=this.get("tooltipCfg");if(O||(O={}),P===!1)this.set("tooltipCfg",!1);else{var L;P&&(L=v(P)),O.fields=L,O.cfg=A}return this.set("tooltipCfg",O),this},x.animate=function(P){return this.set("animateCfg",P),this},x.active=function(P,A){return P===!1?this.set("allowActive",!1):h.isObject(P)?(this.set("allowActive",!0),this.set("activedOptions",P)):(this.set("allowActive",!0),this.set("activedOptions",A)),this},x.adjust=function(P){return this.get("hasDefaultAdjust")||(P&&(P=g(P)),this.set("adjusts",P)),this},x.select=function(P,A){return P===!1?this.set("allowSelect",!1):h.isObject(P)?(this.set("allowSelect",!0),this.set("selectedOptions",P)):(this.set("allowSelect",!0),this.set("selectedOptions",A)),this},x.hasAdjust=function(P){var A=this,O=A.get("adjusts");if(!P)return!1;var L=!1;return h.each(O,function(W){if(W.type===P)return L=!0,!1}),L},x.hasStack=function(){var P=this.get("isStacked");return h.isNil(P)&&(P=this.hasAdjust("stack"),this.set("isStacked",P)),P},x.isInCircle=function(){var P=this.get("coord");return P&&P.isPolar},x._initContainer=function(){var P=this,A=P.get("shapeContainer");if(!A){var O=P.get("container"),L=P.get("view"),W=L&&L.get("_id");A=O.addGroup({viewId:W,visible:P.get("visible")}),P.set("shapeContainer",A)}},x.init=function(){var P=this;if(P._initContainer(),P._initAttrs(),P.get("tooltipCfg")&&P.get("tooltipCfg").fields){var A=P.get("tooltipCfg").fields;h.each(A,function(L){P._createScale(L)})}var O=P._processData();P.get("adjusts")&&P._adjust(O),P.set("dataArray",O)},x._initAttrs=function(){var P=this,A=P.get("attrs"),O=P.get("attrOptions"),L=P.get("coord"),W=P.viewTheme||n,F=!1;for(var K in O)if(O.hasOwnProperty(K)){var V=O[K],k=h.upperFirst(K),Z=v(V.field);K==="position"&&(V.coord=L,Z.length===1&&L.type==="theta"&&(Z.unshift("1"),F=!0));for(var X=[],it=0;it<Z.length;it++){var ft=Z[it],pt=P._createScale(ft);K==="color"&&h.isNil(V.values)&&(pt.values.length<=8?V.values=F?W.colors_pie:W.colors:pt.values.length<=16?V.values=F?W.colors_pie_16:W.colors_16:V.values=W.colors_24,h.isNil(V.values)&&(V.values=W.colors)),X.push(pt)}if(L.type==="theta"&&K==="position"&&X.length>1){var ut=X[1],It=0,Nt=Math.max.apply(null,ut.values);isFinite(Nt)||(Nt=1),ut.change({nice:!1,min:It,max:Nt})}V.scales=X;var Rt=new s[k](V);A[K]=Rt}},x._processData=function(){for(var P=this,A=this.get("data"),O=[],L=this._groupData(A),W=0;W<L.length;W++){var F=L[W],K=P._saveOrigin(F);O.push(P._numberic(K))}return O},x._groupData=function(P){var A=this._getGroupScales(),O=A.map(function(L){return L.field});return h.Array.group(P,O)},x._saveOrigin=function(P){for(var A=[],O=0;O<P.length;O++){var L=P[O],W={};for(var F in L)W[F]=L[F];W[y]=L,A.push(W)}return A},x._numberic=function(P){for(var A=this.getAttr("position"),O=A.scales,L=[],W=0;W<P.length;W++){for(var F=P[W],K=!0,V=0;V<Math.min(2,O.length);V++){var k=O[V];if(k.isCategory){var Z=k.field;F[Z]=k.translate(F[Z]),Number.isNaN(F[Z])&&(K=!1)}}K&&L.push(F)}return L},x._getGroupScales=function(){var P=this,A=P.get("groupScales");if(!A){A=[];var O=P.get("attrs");h.each(O,function(L){if(b.includes(L.type)){var W=L.scales;h.each(W,function(F){F.isCategory&&h.indexOf(A,F)===-1&&A.push(F)})}}),P.set("groupScales",A)}return A},x._updateStackRange=function(P,A,O){for(var L=h.Array.merge(O),W=A.min,F=A.max,K=0;K<L.length;K++){var V=L[K];if(!!h.isArray(V[P])){var k=Math.min.apply(null,V[P]),Z=Math.max.apply(null,V[P]);k<W&&(W=k),Z>F&&(F=Z)}}(W<A.min||F>A.max)&&A.change({min:W,max:F})},x._adjust=function(P){if(!(!P||!P.length)){var A=this,O=A.get("adjusts"),L=this.viewTheme||n,W=A.getYScale(),F=A.getXScale(),K=F.field,V=W?W.field:null;h.each(O,function(k){var Z=h.mix({xField:K,yField:V},k),X=h.upperFirst(k.type);if(X==="Dodge"){var it=[];if(F.isCategory||F.isIdentity)it.push("x");else if(!W)it.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Z.adjustNames=it,Z.dodgeRatio=Z.dodgeRatio||L.widthRatio.column}else if(X==="Stack"){var ft=A.get("coord");if(!W){Z.height=ft.getHeight();var pt=A.getDefaultValue("size")||3;Z.size=pt}!ft.isTransposed&&h.isNil(Z.reverseOrder)&&(Z.reverseOrder=!0)}var ut=new c[X](Z);ut.processAdjust(P),X==="Stack"&&W&&A._updateStackRange(V,W,P)})}},x.setCoord=function(P){this.set("coord",P);var A=this.getAttr("position"),O=this.get("shapeContainer");O.setMatrix(P.matrix),A&&(A.coord=P)},x.paint=function(){var P=this,A=P.get("dataArray"),O=[],L=P.getShapeFactory();L.setCoord(P.get("coord")),P.set("shapeFactory",L);var W=P.get("shapeContainer");P._beforeMapping(A);for(var F=0;F<A.length;F++){var K=A[F],V=F;K=P._mapping(K),O.push(K),P.draw(K,W,L,V)}P.get("labelCfg")&&P._addLabels(h.union.apply(null,O),W.get("children")),P.get("sortable")?P.set("dataArray",O):P._sort(O)},x._sort=function(P){var A=this,O=A.getXScale(),L=O.field;h.each(P,function(W){W.sort(function(F,K){return O.translate(F[y][L])-O.translate(K[y][L])})}),A.set("dataArray",P)},x._beforeMapping=function(P){var A=this;if(A.get("sortable")){var O=A.getXScale(),L=O.field;h.each(P,function(W){W.sort(function(F,K){return O.translate(F[L])-O.translate(K[L])})})}A.get("generatePoints")&&(h.each(P,function(W){A._generatePoints(W)}),h.each(P,function(W,F){var K=P[F+1];K&&(W[0].nextPoints=K[0].points)}))},x._addLabels=function(P,A){var O=this,L=O.get("type"),W=O.get("viewTheme")||n,F=O.get("coord"),K=i.getLabelsClass(F.type,L),V=O.get("container"),k=h.map(O.get("labelCfg").fields,function(X){return O._createScale(X)}),Z=V.addGroup(K,{_id:this.get("_id"),labelCfg:h.mix({scales:k},O.get("labelCfg")),coord:F,geom:O,geomType:L,yScale:O.getYScale(),viewTheme:W,visible:O.get("visible")});Z.showLabels(P,A),O.set("labelContainer",Z)},x.getShapeFactory=function(){var P=this.get("shapeFactory");if(!P){var A=this.get("shapeType");P=a.getShapeFactory(A),this.set("shapeFactory",P)}return P},x._generatePoints=function(P){for(var A=this,O=A.getShapeFactory(),L=A.getAttr("shape"),W=0;W<P.length;W++){var F=P[W],K=A.createShapePointsCfg(F),V=L?A._getAttrValues(L,F):null,k=O.getShapePoints(V,K);F.points=k}},x.createShapePointsCfg=function(P){var A=this.getXScale(),O=this.getYScale(),L=this._normalizeValues(P[A.field],A),W;return O?W=this._normalizeValues(P[O.field],O):W=P.y?P.y:.1,{x:L,y:W,y0:O?O.scale(this.getYMinValue()):void 0}},x.getYMinValue=function(){var P=this.getYScale(),A=P.min,O=P.max,L;return A>=0?L=A:O<=0?L=O:L=0,L},x._normalizeValues=function(P,A){var O=[];if(h.isArray(P))for(var L=0;L<P.length;L++){var W=P[L];O.push(A.scale(W))}else O=A.scale(P);return O},x._mapping=function(P){for(var A=this,O=A.get("attrs"),L=[],W=0;W<P.length;W++){var F=P[W],K={};K[y]=F[y],K.points=F.points,K.nextPoints=F.nextPoints;for(var V in O)if(O.hasOwnProperty(V)){var k=O[V],Z=k.names,X=A._getAttrValues(k,F);if(Z.length>1)for(var it=0;it<X.length;it++){var ft=X[it],pt=Z[it];K[pt]=h.isArray(ft)&&ft.length===1?ft[0]:ft}else K[Z[0]]=X.length===1?X[0]:X}L.push(K)}return L},x._getAttrValues=function(P,A){for(var O=P.scales,L=[],W=0;W<O.length;W++){var F=O[W],K=F.field;F.type==="identity"?L.push(F.value):L.push(A[K])}var V=P.mapping.apply(P,L);return V},x.getAttrValue=function(P,A){var O=this.getAttr(P),L=null;if(O){var W=this._getAttrValues(O,A);L=W[0]}return L},x.getDefaultValue=function(P){var A=this.get(P),O=this.getAttr(P);if(O){var L=O.getScale(P);L.type==="identity"&&(A=L.value)}return A},x.draw=function(P,A,O,L){for(var W=this,F=0;F<P.length;F++){var K=P[F];W.drawPoint(K,A,O,L+F)}},x.getCallbackCfg=function(P,A,O){if(!P)return A;var L={},W=P.map(function(F){return O[F]});return h.each(A,function(F,K){h.isFunction(F)?L[K]=F.apply(null,W):L[K]=F}),L},x._getShapeId=function(P){var A=this.get("_id"),O=this.get("keyFields");if(O&&O.length>0)h.each(O,function(it){A+="-"+P[it]});else{var L=this.get("type"),W=this.getXScale(),F=this.getYScale(),K=W.field||"x",V=F.field||"y",k=P[V],Z;W.isIdentity?Z=W.value:Z=P[K],L==="interval"||L==="schema"?A+="-"+Z:L==="line"||L==="area"||L==="path"?A+="-"+L:A+="-"+Z+"-"+k;var X=this._getGroupScales();h.isEmpty(X)||h.each(X,function(it){var ft=it.field;it.type!=="identity"&&(A+="-"+P[ft])})}return A},x.getDrawCfg=function(P){var A=this,O={origin:P,x:P.x,y:P.y,color:P.color,size:P.size,shape:P.shape,isInCircle:A.isInCircle(),opacity:P.opacity},L=A.get("styleOptions");return L&&L.style&&(O.style=A.getCallbackCfg(L.fields,L.style,P[y])),A.get("generatePoints")&&(O.points=P.points,O.nextPoints=P.nextPoints),A.get("animate")&&(O._id=A._getShapeId(P[y])),O},x.appendShapeInfo=function(P,A){P&&(P.setSilent("index",A),P.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&P.setSilent("animateCfg",this.get("animateCfg")))},x._applyViewThemeShapeStyle=function(P,A,O){var L=this,W=L.viewTheme||n,F=O.name;A?A&&(A.indexOf("hollow")>-1||A.indexOf("liquid")>-1)&&(F="hollow"+h.upperFirst(F)):O.defaultShapeType.indexOf("hollow")>-1&&(F="hollow"+h.upperFirst(F));var K=W.shape[F]||{};P.style=h.mix({},K,P.style)},x.drawPoint=function(P,A,O,L){var W=this,F=P.shape,K=W.getDrawCfg(P);W._applyViewThemeShapeStyle(K,F,O);var V=O.drawShape(F,K,A);W.appendShapeInfo(V,L)},x.getAttr=function(P){return this.get("attrs")[P]},x.getXScale=function(){return this.getAttr("position").scales[0]},x.getYScale=function(){return this.getAttr("position").scales[1]},x.getShapes=function(){var P=[],A=this.get("shapeContainer"),O=A.get("children");return h.each(O,function(L){L.get("origin")&&P.push(L)}),P},x.getAttrsForLegend=function(){var P=this.get("attrs"),A=[];return h.each(P,function(O){b.includes(O.type)&&A.push(O)}),A},x.getFieldsForLegend=function(){var P=[],A=this.get("attrOptions");return h.each(b,function(O){var L=A[O];L&&L.field&&h.isString(L.field)&&(P=P.concat(L.field.split("*")))}),h.uniq(P)},x.changeVisible=function(P,A){var O=this;O.set("visible",P);var L=this.get("shapeContainer");L&&L.set("visible",P);var W=this.get("labelContainer");if(W&&W.set("visible",P),!A&&L){var F=L.get("canvas");F.draw()}},x.reset=function(){this.set("attrOptions",{}),this.clearInner()},x.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var P=this.get("shapeContainer");P&&P.clear();var A=this.get("labelContainer");A&&A.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},x.clear=function(){this.clearInner(),this.set("scales",{})},x.destroy=function(){this.clear();var P=this.get("shapeContainer");P&&P.remove(),this.offEvents(),M.prototype.destroy.call(this)},x.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},x.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},m}(r);E.exports=_},function(E,T,e){var t=e(0),l=e(25),s=t.PathUtil,c={},r={_coord:null,draw:function(i,a){return this.drawShape?this.drawShape(i,a):null},setCoord:function(i){this._coord=i},parsePath:function(i,a){var o=this._coord;return i=s.parsePathString(i),o.isPolar&&a!==!1?i=l.convertPolarPath(o,i):i=l.convertNormalPath(o,i),i},parsePoint:function(i){var a=this._coord;return a.convertPoint(i)},parsePoints:function(i){var a=this._coord,o=[];return t.each(i,function(u){o.push(a.convertPoint(u))}),o}},h={defaultShapeType:null,setCoord:function(i){this._coord=i},getShape:function(i){var a=this;t.isArray(i)&&(i=i[0]);var o=a[i]||a[a.defaultShapeType];return o._coord=a._coord,o},getShapePoints:function(i,a){var o=this.getShape(i),u=o.getPoints||o.getShapePoints||this.getDefaultPoints,f=u(a);return f},getDefaultPoints:function(){return[]},getMarkerCfg:function(i,a){var o=this.getShape(i);if(!o.getMarkerCfg){var u=this.defaultShapeType;o=this.getShape(u)}return o.getMarkerCfg(a)},getSelectedCfg:function(){return{}},drawShape:function(i,a,o){var u=this.getShape(i),f=u.draw(a,o);return f&&(f.setSilent("origin",a.origin),f._id=a.yIndex?a._id+a.yIndex:a._id,f.name=this.name),f}};c.registerFactory=function(n,i){var a=t.upperFirst(n),o=t.assign({},h,i);return c[a]=o,o.name=n,o},c.registerShape=function(n,i,a){var o=t.upperFirst(n),u=c[o],f=t.assign({},r,a);return u[i]=f,f},c.getShapeFactory=function(n){var i=this;n=n||"point";var a=t.upperFirst(n);return i[a]},E.exports=c},function(E,T){function e(l,s){for(var c in s)s.hasOwnProperty(c)&&c!=="constructor"&&s[c]!==void 0&&(l[c]=s[c])}var t=function(s,c,r,h){return c&&e(s,c),r&&e(s,r),h&&e(s,h),s};E.exports=t},function(E,T,e){var t=e(17),l=function(c){return t(c,"Number")};E.exports=l},function(E,T,e){"use strict";var t=e(89);e.d(T,"f",function(){return t.h}),e.d(T,"e",function(){return t.g}),e.d(T,"d",function(){return t.f});var l=e(440);e.d(T,"c",function(){return l.b}),e.d(T,"b",function(){return l.a});var s=e(439);e.d(T,"a",function(){return s.a})},function(E,T,e){"use strict";e.d(T,"d",function(){return h}),e.d(T,"a",function(){return n}),e.d(T,"b",function(){return o}),e.d(T,"c",function(){return u}),T.g=f,T.e=v,T.f=b;var t=e(442),l=e(103),s=e.i(t.a)("start","end","cancel","interrupt"),c=[],r=0,h=1,n=2,i=3,a=4,o=5,u=6;T.h=function(g,_,M,x,m,S){var P=g.__transition;if(!P)g.__transition={};else if(M in P)return;y(g,M,{name:_,index:x,group:m,on:s,tween:c,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:r})};function f(g,_){var M=b(g,_);if(M.state>r)throw new Error("too late; already scheduled");return M}function v(g,_){var M=b(g,_);if(M.state>i)throw new Error("too late; already running");return M}function b(g,_){var M=g.__transition;if(!M||!(M=M[_]))throw new Error("transition not found");return M}function y(g,_,M){var x=g.__transition,m;x[_]=M,M.timer=e.i(l.timer)(S,0,M.time);function S(L){M.state=h,M.timer.restart(P,M.delay,M.time),M.delay<=L&&P(L-M.delay)}function P(L){var W,F,K,V;if(M.state!==h)return O();for(W in x)if(V=x[W],V.name===M.name){if(V.state===i)return e.i(l.timeout)(P);V.state===a?(V.state=u,V.timer.stop(),V.on.call("interrupt",g,g.__data__,V.index,V.group),delete x[W]):+W<_&&(V.state=u,V.timer.stop(),V.on.call("cancel",g,g.__data__,V.index,V.group),delete x[W])}if(e.i(l.timeout)(function(){M.state===i&&(M.state=a,M.timer.restart(A,M.delay,M.time),A(L))}),M.state=n,M.on.call("start",g,g.__data__,M.index,M.group),M.state===n){for(M.state=i,m=new Array(K=M.tween.length),W=0,F=-1;W<K;++W)(V=M.tween[W].value.call(g,g.__data__,M.index,M.group))&&(m[++F]=V);m.length=F+1}}function A(L){for(var W=L<M.duration?M.ease.call(null,L/M.duration):(M.timer.restart(O),M.state=o,1),F=-1,K=m.length;++F<K;)m[F].call(g,W);M.state===o&&(M.on.call("end",g,g.__data__,M.index,M.group),O())}function O(){M.state=u,M.timer.stop(),delete x[_];for(var L in x)return;delete g.__transition}}},function(E,T,e){var t=e(17),l=function(c){return t(c,"Function")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"String")};E.exports=l},function(E,T,e){var t=e(31);E.exports=t},function(E,T){var e={}.toString,t=function(s,c){return e.call(s)==="[object "+c+"]"};E.exports=t},function(E,T,e){"use strict";e.d(T,"c",function(){return X}),T.b=it;var t=e(505),l=e(506),s=e(493),c=e(487),r=e(216),h=e(492),n=e(496),i=e(498),a=e(501),o=e(508),u=e(484),f=e(500),v=e(499),b=e(507),y=e(491),g=e(490),_=e(483),M=e(218),x=e(502),m=e(485),S=e(509),P=e(494),A=e(503),O=e(497),L=e(482),W=e(495),F=e(504),K=e(486),V=e(488),k=e(99),Z=e(489),X=[null];function it(pt,ut){this._groups=pt,this._parents=ut}function ft(){return new it([[document.documentElement]],X)}it.prototype=ft.prototype={constructor:it,select:t.a,selectAll:l.a,filter:s.a,data:c.a,enter:r.a,exit:h.a,join:n.a,merge:i.a,order:a.a,sort:o.a,call:u.a,nodes:f.a,node:v.a,size:b.a,empty:y.a,each:g.a,attr:_.a,style:M.b,property:x.a,classed:m.a,text:S.a,html:P.a,raise:A.a,lower:O.a,append:L.a,insert:W.a,remove:F.a,clone:K.a,datum:V.a,on:k.c,dispatch:Z.a},T.a=ft},function(E,T){E.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(109),a=e(36),o=["min","max","median","start","end"],u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return n.mix({},_,{xScales:null,yScales:null,el:null})},y.render=function(){},y.clear=function(){var _=this,M=_.get("el");M&&M.remove(),this.set("el",null)},y.destroy=function(){this.clear(),f.prototype.destroy.call(this)},y.changeVisible=function(_){var M=this;M.set("visible",_);var x=M.get("el");!x||(x.set?x.set("visible",_):x.style.display=_?"":"none")},y.parsePoint=function(_,M){var x=this,m=x.get("xScales"),S=x.get("yScales");n.isFunction(M)&&(M=M(m,S));var P,A;if(n.isArray(M)&&n.isString(M[0])&&M[0].indexOf("%")!==-1)return this._parsePercentPoint(_,M);if(n.isArray(M))P=x._getNormalizedValue(M[0],i.getFirstScale(m)),A=x._getNormalizedValue(M[1],i.getFirstScale(S));else for(var O in M){var L=M[O];m[O]&&(P=x._getNormalizedValue(L,m[O])),S[O]&&(A=x._getNormalizedValue(L,S[O],"y"))}return!n.isNil(P)&&!n.isNil(A)&&!isNaN(P)&&!isNaN(A)?_.convert({x:P,y:A}):null},y._getNormalizedValue=function(_,M){var x;if(n.indexOf(o,_)!==-1){var m;_==="start"?x=0:_==="end"?x=1:_==="median"?(m=M.isCategory?(M.values.length-1)/2:(M.min+M.max)/2,x=M.scale(m)):(M.isCategory?m=_==="min"?0:M.values.length-1:m=M[_],x=M.scale(m))}else x=M.scale(_);return x},y._parsePercentPoint=function(_,M){var x=parseFloat(M[0])/100,m=parseFloat(M[1])/100,S=_.start,P=_.end,A={x:Math.min(S.x,P.x),y:Math.min(S.y,P.y)},O=_.width*x+A.x,L=_.height*m+A.y;return{x:O,y:L}},b}(a);E.exports=u},function(E,T){var e=function(l){return l!==null&&typeof l!="function"&&isFinite(l.length)};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(478);e.d(T,"create",function(){return t.a});var l=e(61);e.d(T,"creator",function(){return l.a});var s=e(479);e.d(T,"local",function(){return s.a});var c=e(214);e.d(T,"matcher",function(){return c.a});var r=e(480);e.d(T,"mouse",function(){return r.a});var h=e(97);e.d(T,"namespace",function(){return h.a});var n=e(98);e.d(T,"namespaces",function(){return n.a});var i=e(62);e.d(T,"clientPoint",function(){return i.a});var a=e(215);e.d(T,"select",function(){return a.a});var o=e(481);e.d(T,"selectAll",function(){return o.a});var u=e(18);e.d(T,"selection",function(){return u.a});var f=e(100);e.d(T,"selector",function(){return f.a});var v=e(219);e.d(T,"selectorAll",function(){return v.a});var b=e(218);e.d(T,"style",function(){return b.a});var y=e(510);e.d(T,"touch",function(){return y.a});var g=e(511);e.d(T,"touches",function(){return g.a});var _=e(102);e.d(T,"window",function(){return _.a});var M=e(99);e.d(T,"event",function(){return M.a}),e.d(T,"customEvent",function(){return M.b})},function(E,T,e){var t=e(0),l={splitPoints:function(c){var r=[],h=c.x,n=c.y;return n=t.isArray(n)?n:[n],t.each(n,function(i,a){var o={x:t.isArray(h)?h[a]:h,y:i};r.push(o)}),r},addFillAttrs:function(c,r){r.color&&(c.fill=r.color),t.isNumber(r.opacity)&&(c.opacity=c.fillOpacity=r.opacity)},addStrokeAttrs:function(c,r){r.color&&(c.stroke=r.color),t.isNumber(r.opacity)&&(c.opacity=c.strokeOpacity=r.opacity)}};E.exports=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function f(v,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,b,y){return b&&f(v.prototype,b),y&&f(v,y),v}}(),l=e(42),s=h(l),c=e(29),r=h(c);function h(f){return f&&f.__esModule?f:{default:f}}function n(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function i(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function a(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var o=function(f){a(v,f);function v(b,y){n(this,v);var g=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return g.getParentInfo=function(){return{id:g.id,name:g.name}},g.name=y,g}return t(v,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var y=this.context;this.id=y.createId(),y.addElement(this.name,this.id,this.props,y.getParentInfo(),y.getViewId())}},{key:"componentWillReceiveProps",value:function(y){this.context.updateElement(this.name,this.id,y,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var y=this.props.children;return y?y.length&&(y=s.default.createElement("div",null,y)):y=null,y}}]),v}(l.Component);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func};function u(f){var v=function(b){a(y,b);function y(g){return n(this,y),i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,g,f))}return t(y,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),y}(o);return v.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.displayName=f,v}o.generateBaseTypedComponent=u,T.default=o},function(E,T,e){var t=e(0),l=e(314);function s(a,o){if(!a.length)return[];for(var u=[],f=0,v=a.length;f<v;f++){var b=a[f];f===0?u.push(["M",b.x,b.y]):u.push(["L",b.x,b.y])}return o&&u.push(["Z"]),u}function c(a,o){var u=a.getCenter(),f=Math.sqrt(Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2));return f}function r(a,o){for(var u=a.length,f=[a[0]],v=1;v<u;v=v+2){var b=o.convertPoint({x:a[v],y:a[v+1]});f.push(b.x,b.y)}return f}function h(a,o,u){var f=u.isTransposed,v=u.startAngle,b=u.endAngle,y={x:a[1],y:a[2]},g={x:o[1],y:o[2]},_=[],M=f?"y":"x",x=Math.abs(g[M]-y[M])*(b-v),m=g[M]>=y[M]?1:0,S=x>Math.PI?1:0,P=u.convertPoint(g),A=c(u,P);if(A>=.5)if(x===Math.PI*2){var O={x:(g.x+y.x)/2,y:(g.y+y.y)/2},L=u.convertPoint(O);_.push(["A",A,A,0,S,m,L.x,L.y]),_.push(["A",A,A,0,S,m,P.x,P.y])}else _.push(["A",A,A,0,S,m,P.x,P.y]);return _}function n(a){t.each(a,function(o,u){var f=o;if(f[0].toLowerCase()==="a"){var v=a[u-1],b=a[u+1];b&&b[0].toLowerCase()==="a"?v&&v[0].toLowerCase()==="l"&&(v[0]="M"):v&&v[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var i={getLinePath:function(o,u){return s(o,u)},getSplinePath:function(o,u,f){var v=[],b=o[0],y=null;if(o.length<=2)return i.getLinePath(o,u);t.each(o,function(_){(!y||!(y.x===_.x&&y.y===_.y))&&(v.push(_.x),v.push(_.y),y=_)}),f=f||[[0,0],[1,1]];var g=l.catmullRom2bezier(v,u,f);return g.unshift(["M",b.x,b.y]),g},getPointRadius:function(o,u){var f=c(o,u);return f},getPointAngle:function(o,u){var f=o.getCenter(),v=Math.atan2(u.y-f.y,u.x-f.x);return v},convertNormalPath:function(o,u){var f=[];return t.each(u,function(v){var b=v[0];switch(b.toLowerCase()){case"m":case"l":case"c":f.push(r(v,o));break;case"z":default:f.push(v);break}}),f},convertPolarPath:function(o,u){var f=[],v,b,y,g;return t.each(u,function(_,M){var x=_[0];switch(x.toLowerCase()){case"m":case"c":case"q":f.push(r(_,o));break;case"l":v=u[M-1],b=_,y=o.isTransposed,g=y?v[v.length-2]===b[1]:v[v.length-1]===b[2],g?f=f.concat(h(v,b,o)):f.push(r(_,o));break;case"z":default:f.push(_);break}}),n(f),f}};E.exports=i},function(E,T,e){var t=e(10),l=e(2),s=e(39),c=e(6),r=function(){var h=n.prototype;h._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function n(i){this._initDefaultCfg(),t(this,i),this.init()}return h.init=function(){},h.getTicks=function(){var a=this,o=a.ticks,u=[];return l(o,function(f){var v;s(f)?v=f:v={text:a.getText(f),tickValue:f,value:a.scale(f)},u.push(v)}),u},h.getText=function(a,o){var u=this.formatter;return a=u?u(a,o):a,(c(a)||!a.toString)&&(a=""),a.toString()},h.rangeMin=function(){return this.range[0]},h.rangeMax=function(){var a=this.range;return a[a.length-1]},h.invert=function(a){return a},h.translate=function(a){return a},h.scale=function(a){return a},h.clone=function(){var a=this,o=a.constructor,u={};return l(a,function(f,v){u[v]=a[v]}),new o(u)},h.change=function(a){return this.ticks=null,t(this,a),this.init(),this},n}();E.exports=r},function(E,T,e){"use strict";T.b=P,T.a=A,T.c=O;var t=e(22),l=e(519),s=e(520),c=e(521),r=e(522),h=e(523),n=e(525),i=e(526),a=e(527),o=e(528),u=e(529),f=e(530),v=e(531),b=e(532),y=e(533),g=e(534),_=e(535),M=e(536),x=e(63),m=e(524),S=0;function P(W,F,K,V){this._groups=W,this._parents=F,this._name=K,this._id=V}function A(W){return e.i(t.selection)().transition(W)}function O(){return++S}var L=t.selection.prototype;P.prototype=A.prototype={constructor:P,select:u.a,selectAll:f.a,filter:n.a,merge:i.a,selection:v.a,transition:M.a,call:L.call,nodes:L.nodes,node:L.node,size:L.size,empty:L.empty,each:L.each,on:a.a,attr:l.a,attrTween:s.a,style:b.a,styleTween:y.a,text:g.a,textTween:_.a,remove:o.a,tween:x.a,delay:c.a,duration:r.a,ease:h.a,end:m.a}},function(E,T,e){var t=e(0),l=t.DomUtil,s=["start","process","end","reset"],c=function(){var r=h.prototype;r.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},r._start=function(i){var a=this;a.preStart&&a.preStart(i),a.start(i),a.onStart&&a.onStart(i)},r._process=function(i){var a=this;a.preProcess&&a.preProcess(i),a.process(i),a.onProcess&&a.onProcess(i)},r._end=function(i){var a=this;a.preEnd&&a.preEnd(i),a.end(i),a.onEnd&&a.onEnd(i)},r._reset=function(i){var a=this;a.preReset&&a.preReset(i),a.reset(i),a.onReset&&a.onReset(i)},r.start=function(){},r.process=function(){},r.end=function(){},r.reset=function(){};function h(n,i){var a=this,o=a.getDefaultCfg();t.assign(a,o,n),a.view=a.chart=i,a.canvas=i.get("canvas"),a._bindEvents()}return r._bindEvents=function(){var i=this,a=i.canvas,o=a.get("canvasDOM");i._clearEvents(),t.each(s,function(u){var f=t.upperFirst(u);i["_on"+f+"Listener"]=l.addEventListener(o,i[u+"Event"],t.wrapBehavior(i,"_"+u))})},r._clearEvents=function(){var i=this;t.each(s,function(a){var o="_on"+t.upperFirst(a)+"Listener";i[o]&&i[o].remove()})},r.destroy=function(){this._clearEvents()},h}();E.exports=c},function(E,T,e){var t=e(224),l=!0;E.exports=e(541)(t.isElement,l)},function(E,T,e){E.exports={Axis:e(240),Component:e(66),Guide:e(248),Label:e(252),Legend:e(258),Tooltip:e(263)}},function(E,T,e){E.exports={Canvas:e(328),Group:e(134),Shape:e(7),Arc:e(136),Circle:e(137),Dom:e(138),Ellipse:e(139),Fan:e(140),Image:e(141),Line:e(142),Marker:e(74),Path:e(145),Polygon:e(146),Polyline:e(147),Rect:e(148),Text:e(149),PathSegment:e(50),PathUtil:e(77),Event:e(135),version:"3.3.6"}},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(209);function l(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?l(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?l(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T,e){var t=e(10),l=function(){var s=c.prototype;s._initDefaultCfg=function(){this.adjustNames=["x","y"]};function c(r){this._initDefaultCfg(),t(this,r)}return s.processAdjust=function(){},c}();E.exports=l},function(E,T,e){var t=e(15),l=e(4),s=e(6),c=e(10),r=e(2);function h(i,a){return t(a)?a:i.invert(i.scale(a))}var n=function(){function i(o){var u=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var f=null,v=this.callback;if(o.callback){var b=o.callback;f=function(){for(var g=arguments.length,_=new Array(g),M=0;M<g;M++)_[M]=arguments[M];var x=b.apply(void 0,_);return s(x)&&(x=v.apply(u,_)),x}}c(this,o),f&&c(this,{callback:f})}var a=i.prototype;return a._getAttrValue=function(u,f){var v=this.values;if(u.isCategory&&!this.linear){var b=u.translate(f);return v[b%v.length]}var y=u.scale(f);return this.getLinearValue(y)},a.getLinearValue=function(u){var f=this.values,v=f.length-1,b=Math.floor(v*u),y=v*u-b,g=f[b],_=b===v?g:f[b+1],M=g+(_-g)*y;return M},a.callback=function(u){var f=this,v=f.scales[0],b=null;return v.type==="identity"?b=v.value:b=f._getAttrValue(v,u),b},a.getNames=function(){for(var u=this.scales,f=this.names,v=Math.min(u.length,f.length),b=[],y=0;y<v;y++)b.push(f[y]);return b},a.getFields=function(){var u=this.scales,f=[];return r(u,function(v){f.push(v.field)}),f},a.getScale=function(u){var f=this.scales,v=this.names,b=v.indexOf(u);return f[b]},a.mapping=function(){for(var u=this.scales,f=this.callback,v=arguments.length,b=new Array(v),y=0;y<v;y++)b[y]=arguments[y];var g=b;if(f){for(var _=0,M=b.length;_<M;_++)b[_]=this._toOriginParam(b[_],u[_]);g=f.apply(this,b)}return g=[].concat(g),g},a._toOriginParam=function(u,f){var v=u;if(!f.isLinear)if(l(u)){v=[];for(var b=0,y=u.length;b<y;b++)v.push(h(f,u[b]))}else v=h(f,u);return v},i}();E.exports=n},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(36),i=e(3),a=e(108),o=e(110),u=e(19),f=u.FONT_FAMILY,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return i.mix({},x,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},_.beforeRender=function(){var x=this,m=x.get("title"),S=x.get("label"),P=x.get("grid");m&&x.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f,textAlign:"center"},offset:48},m)),S&&x.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f},offset:10},S)),P&&x.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},P))},_.render=function(){var x=this;x.beforeRender();var m=x.get("label");m&&x.renderLabels(),x.get("autoPaint")&&x.paint(),i.isNil(x.get("title"))||x.renderTitle(),x.get("group").sort()},_.renderLabels=function(){var x=this,m=x.get("group"),S=x.get("label"),P=new o({name:"axis-label"});x.set("labelRenderer",P),P.set("labelCfg",S);var A=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];i.each(A,function(O){S[O]&&P.set(O,S[O])}),P.set("coord",x.get("coord")),P.set("group",m.addGroup()),P.set("canvas",x.get("canvas"))},_._parseTicks=function(x){x=x||[];for(var m=x.length,S=0;S<m;S++){var P=x[S];i.isObject(P)||(x[S]=this.parseTick(P,S,m))}return this.set("ticks",x),x},_._addTickItem=function(x,m,S,P){P===void 0&&(P="");var A=this.get("tickItems"),O=this.get("subTickItems"),L=this.getTickEnd(m,S,x),W={x1:m.x,y1:m.y,x2:L.x,y2:L.y};A||(A=[]),O||(O=[]),P==="sub"?O.push(W):A.push(W),this.set("tickItems",A),this.set("subTickItems",O)},_._renderLine=function(){var x=this,m=x.get("line"),S;if(m){S=x.getLinePath(),m=i.mix({path:S},m);var P=x.get("group"),A=P.addShape("path",{attrs:m});A.name="axis-line",x.get("appendInfo")&&A.setSilent("appendInfo",x.get("appendInfo")),x.set("lineShape",A)}},_._processCatTicks=function(){var x=this,m=x.get("label"),S=x.get("tickLine"),P=x.get("ticks");P=x._parseTicks(P);for(var A=x._getNormalizedTicks(P),O=0;O<A.length;O+=3){var L=x.getTickPoint(A[O]),W=x.getTickPoint(A[O+1]),F=x.getTickPoint(A[O+2]),K=Math.floor(O/3),V=P[K];S&&(K===0&&x._addTickItem(K,W,S.length),x._addTickItem(K,F,S.length)),m&&x.addLabel(V,L,K)}},_._getNormalizedTicks=function(x){var m=0;x.length>1&&(m=(x[1].value-x[0].value)/2);for(var S=[],P=0;P<x.length;P++){var A=x[P],O=A.value,L=A.value-m,W=A.value+m;S.push(O,L,W)}var F=i.arrayUtil.getRange(S);return S.map(function(K){var V=(K-F.min)/(F.max-F.min);return V})},_.addLabel=function(x,m,S){var P=this,A=P.get("labelItems"),O=P.get("labelRenderer"),L=i.deepMix({},P.get("label")),W;if(O){var F=P.get("_labelOffset");i.isNil(P.get("label").offset)||(F=P.get("label").offset);var K=P.getSideVector(F,m,S);m={x:m.x+K[0]+L.offsetX,y:m.y+K[1]+L.offsetY},L.text=x.text,L.x=m.x,L.y=m.y,L.point=m,L.textAlign=P.getTextAnchor(K),m.rotate&&(L.rotate=m.rotate),A.push(L)}return W},_._processTicks=function(){var x=this,m=x.get("label"),S=x.get("subTickCount"),P=x.get("tickLine"),A=x.get("ticks");if(A=x._parseTicks(A),i.each(A,function(L,W){var F=x.getTickPoint(L.value,W);P&&x._addTickItem(W,F,P.length),m&&x.addLabel(L,F,W)}),S){var O=x.get("subTickLine");i.each(A,function(L,W){if(W>0){var F=L.value-A[W-1].value;F=F/(x.get("subTickCount")+1);for(var K=1;K<=S;K++){var V={text:"",value:W?A[W-1].value+K*F:K*F},k=x.getTickPoint(V.value),Z=void 0;O&&O.length?Z=O.length:Z=parseInt(P.length*(3/5),10),x._addTickItem(K-1,k,Z,"sub")}}})}},_._addTickLine=function(x,m){var S=this,P=i.mix({},m),A=[];i.each(x,function(W){A.push(["M",W.x1,W.y1]),A.push(["L",W.x2,W.y2])}),delete P.length,P.path=A;var O=S.get("group"),L=O.addShape("path",{attrs:P});L.name="axis-ticks",L._id=S.get("_id")+"-ticks",L.set("coord",S.get("coord")),S.get("appendInfo")&&L.setSilent("appendInfo",S.get("appendInfo"))},_._renderTicks=function(){var x=this,m=x.get("tickItems"),S=x.get("subTickItems");if(!i.isEmpty(m)){var P=x.get("tickLine");x._addTickLine(m,P)}if(!i.isEmpty(S)){var A=x.get("subTickLine")||x.get("tickLine");x._addTickLine(S,A)}},_._renderGrid=function(){var x=this.get("grid");if(!!x){x.coord=this.get("coord"),x.appendInfo=this.get("appendInfo");var m=this.get("group");this.set("gridGroup",m.addGroup(a,x))}},_._renderLabels=function(){var x=this,m=x.get("labelRenderer"),S=x.get("labelItems");m&&(m.set("items",S),m._dryDraw())},_.paint=function(){var x=this,m=x.get("tickLine"),S=!0;m&&m.hasOwnProperty("alignWithLabel")&&(S=m.alignWithLabel),x._renderLine();var P=x.get("type"),A=P==="cat"||P==="timeCat";A&&S===!1?x._processCatTicks():x._processTicks(),x._renderTicks(),x._renderGrid(),x._renderLabels();var O=this.get("label");O&&O.autoRotate&&x.autoRotateLabels(),O&&O.autoHide&&x.autoHideLabels()},_.parseTick=function(x,m,S){return{text:x,value:m/(S-1)}},_.getTextAnchor=function(x){var m=Math.abs(x[1]/x[0]),S;return m>=1?S="center":x[0]>0?S="start":S="end",S},_.getMaxLabelWidth=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.width;S<O&&(S=O)}),S},_.getMaxLabelHeight=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.height;S<O&&(S=O)}),S},_.destroy=function(){var x=this;if(!x.destroyed){var m=x.get("gridGroup");m&&m.remove();var S=this.get("labelRenderer");S&&S.destroy();var P=x.get("group");P.destroy(),b.prototype.destroy.call(this)}},_.clear=function(){var x=this,m=x.get("group");if(!m.get("destroyed")&&m.get("children").length){var S=x.get("gridGroup");S&&S.clear();var P=this.get("labelRenderer");P&&P.clear();var A=x.get("group");A.clear()}},_.autoRotateLabels=function(){},_.autoHideLabels=function(){},_.renderTitle=function(){},_.getLinePath=function(){},_.getTickPoint=function(){},_.getTickEnd=function(){},_.getSideVector=function(){},g}(n);E.exports=v},function(E,T,e){function t(a){return function(){var o=r(a),u;if(c()){var f=r(this).constructor;u=Reflect.construct(o,arguments,f)}else u=o.apply(this,arguments);return l(this,u)}}function l(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:s(a)}function s(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},r(a)}function h(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var n=e(66),i=function(a){h(u,a);var o=t(u);function u(){return a.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},f._init=function(){},f.clear=function(){},f.destroy=function(){a.prototype.destroy.call(this)},f.beforeRender=function(){},f.render=function(){},f.afterRender=function(){},f.beforeDraw=function(){},f.draw=function(){},f.afterDraw=function(){},f.show=function(){},f.hide=function(){},f.setOffset=function(){},f.setPosition=function(){},f.setVisible=function(){},f.setZIndex=function(){},u}(n);E.exports=i},function(E,T,e){var t=e(1),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c={};E.exports={parseRadius:function(h){var n=0,i=0,a=0,o=0;return t.isArray(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}},parsePath:function(h){if(h=h||[],t.isArray(h))return h;if(t.isString(h))return h=h.match(l),t.each(h,function(n,i){if(n=n.match(s),n[0].length>1){var a=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=a}t.each(n,function(o,u){isNaN(o)||(n[u]=+o)}),h[i]=n}),h},numberToColor:function(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}}},function(E,T,e){var t=e(6);function l(s){return t(s)?"":s.toString()}E.exports=l},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t=function(s){var c=typeof s=="undefined"?"undefined":e(s);return s!==null&&c==="object"||c==="function"};E.exports=t},function(E,T,e){var t=e(86),l=e(17),s=function(r){if(!t(r)||!l(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};E.exports=s},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(202);function l(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?l(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?l(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T){E.exports=U},function(E,T,e){"use strict";function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function l(a,o){for(var u=0;u<o.length;u++){var f=o[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function s(a,o,u){return o&&l(a.prototype,o),u&&l(a,u),a}var c=e(56),r=e(10),h=c.mat3,n=c.vec3,i=function(){s(a,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function a(o){t(this,a);var u=this.getDefaultCfg();r(this,u,o),this.init()}return s(a,[{key:"init",value:function(){var u=this.start,f=this.end,v={x:(u.x+f.x)/2,y:(u.y+f.y)/2};this.center=v,this.width=Math.abs(f.x-u.x),this.height=Math.abs(f.y-u.y)}},{key:"_swapDim",value:function(u){var f=this[u];if(f){var v=f.start;f.start=f.end,f.end=v}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(u,f){var v=this[f],b=v.start,y=v.end;return b+u*(y-b)}},{key:"invertDim",value:function(u,f){var v=this[f],b=v.start,y=v.end;return(u-b)/(y-b)}},{key:"convertPoint",value:function(u){return u}},{key:"invertPoint",value:function(u){return u}},{key:"applyMatrix",value:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,y=[u,f,v];return n.transformMat3(y,y,b),y}},{key:"invertMatrix",value:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,y=h.invert([],b),g=[u,f,v];return n.transformMat3(g,g,y),g}},{key:"convert",value:function(u){var f=this.convertPoint(u),v=f.x,b=f.y,y=this.applyMatrix(v,b,1);return{x:y[0],y:y[1]}}},{key:"invert",value:function(u){var f=this.invertMatrix(u.x,u.y,1);return this.invertPoint({x:f[0],y:f[1]})}},{key:"rotate",value:function(u){var f=this.matrix,v=this.center;return h.translate(f,f,[-v.x,-v.y]),h.rotate(f,f,u),h.translate(f,f,[v.x,v.y]),this}},{key:"reflect",value:function(u){switch(u){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(u,f){var v=this.matrix,b=this.center;return h.translate(v,v,[-b.x,-b.y]),h.scale(v,v,[u,f]),h.translate(v,v,[b.x,b.y]),this}},{key:"translate",value:function(u,f){var v=this.matrix;return h.translate(v,v,[u,f]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),a}();E.exports=i},function(E,T,e){function t(_,M){_.prototype=Object.create(M.prototype),_.prototype.constructor=_,_.__proto__=M}var l=e(0),s=e(279),c=e(16),r=c.Canvas,h=l.DomUtil,n=e(5),i=e(283),a=e(121),o=e(123),u=e(122),f=e(124),v="auto";function b(_,M){var x=!1;return l.each(_,function(m){var S=[].concat(m.values),P=[].concat(M.values);if(m.type===M.type&&m.field===M.field&&S.sort().toString()===P.sort().toString()){x=!0;return}}),x}function y(_,M){return l.isEqualWith(_,M,function(x,m){return x===m})}var g=function(_){t(M,_);function M(){return _.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=_.prototype.getDefaultCfg.call(this);return l.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:n.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:n.renderer,views:[]})},x.init=function(){var S=this,P=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),_.prototype.init.call(this);var A=new a.Tooltip({chart:S,viewTheme:P,options:{}});S.set("tooltipController",A);var O=new a.Legend({chart:S,viewTheme:P});S.set("legendController",O),S.set("_id","chart"),S.emit("afterinit")},x._isAutoPadding=function(){var S=this.get("padding");return l.isArray(S)?S.includes(v):S===v},x._getAutoPadding=function(){for(var S=this.get("padding"),P=this.get("frontPlot"),A=P.getBBox(),O=this.get("backPlot"),L=u(O,f(this.get("plotRange"))),W=o(A,L),F=[0-W.minY,W.maxX-this.get("width"),W.maxY-this.get("height"),0-W.minX],K=l.toAllPadding(S),V=0;V<K.length;V++)if(K[V]===v){var k=Math.max(0,F[V]);K[V]=k+this.get("autoPaddingAppend")}return K},x._initCanvas=function(){var S=this.get("container"),P=this.get("id");!S&&P&&(S=P,this.set("container",P));var A=this.get("width"),O=this.get("height");if(l.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var L=h.createDom('<div style="position:relative;"></div>');S.appendChild(L),this.set("wrapperEl",L),this.get("forceFit")&&(A=h.getWidth(S,A),this.set("width",A));var W=this.get("renderer"),F=new r({containerDOM:L,width:A,height:O,pixelRatio:W==="svg"?1:this.get("pixelRatio"),renderer:W});this.set("canvas",F)},x._initPlot=function(){var S=this;S._initPlotBack();var P=S.get("canvas"),A=P.addGroup({zIndex:1}),O=P.addGroup({zIndex:0}),L=P.addGroup({zIndex:3});S.set("backPlot",A),S.set("middlePlot",O),S.set("frontPlot",L)},x._initPlotBack=function(){var S=this,P=S.get("canvas"),A=S.get("viewTheme"),O=P.addGroup(i,{padding:this.get("padding"),plotBackground:l.mix({},A.plotBackground,S.get("plotBackground")),background:l.mix({},A.background,S.get("background"))});S.set("plot",O),S.set("plotRange",O.get("plotRange"))},x._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",l.wrapBehavior(this,"_initForceFitEvent"))},x._initForceFitEvent=function(){var S=setTimeout(l.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},x._renderLegends=function(){var S=this.get("options"),P=S.legends;if(l.isNil(P)||P!==!1){var A=this.get("legendController");if(A.options=P||{},A.plotRange=this.get("plotRange"),P&&P.custom)A.addCustomLegend();else{var O=this.getAllGeoms(),L=[];l.each(O,function(F){var K=F.get("view"),V=F.getAttrsForLegend();l.each(V,function(k){var Z=k.type,X=k.getScale(Z);if(X.field&&X.type!=="identity"&&!b(L,X)){L.push(X);var it=K.getFilteredOutValues(X.field);A.addLegend(X,k,F,it)}})});var W=this.getYScales();L.length===0&&W.length>1&&A.addMixedLegend(W,O)}A.alignLegends()}},x._renderTooltips=function(){var S=this.get("options");if(l.isNil(S.tooltip)||S.tooltip!==!1){var P=this.get("tooltipController");P.options=S.tooltip||{},P.renderTooltip()}},x.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var P=this.get("views");return l.each(P,function(A){S=S.concat(A.get("geoms"))}),S},x.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var P=S.get("container"),A=S.get("width"),O=h.getWidth(P,A);if(O!==0&&O!==A){var L=S.get("height");S.changeSize(O,L)}return S}},x.resetPlot=function(){var S=this.get("plot"),P=this.get("padding");y(P,S.get("padding"))||(S.set("padding",P),S.repaint())},x.changeSize=function(S,P){var A=this,O=A.get("canvas");O.changeSize(S,P);var L=this.get("plot");return A.set("width",S),A.set("height",P),L.repaint(),this.set("keepPadding",!0),A.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),A},x.changeWidth=function(S){return this.changeSize(S,this.get("height"))},x.changeHeight=function(S){return this.changeSize(this.get("width"),S)},x.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),l.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=l.mix({},this._getSharedOptions(),S.options);var P=new s(S);return P.set("_id","view"+this.get("views").length),this.get("views").push(P),this.emit("addview",{view:P}),P},x.removeView=function(S){var P=this.get("views");l.Array.remove(P,S),S.destroy()},x._getSharedOptions=function(){var S=this.get("options"),P={};return l.each(["scales","coord","axes"],function(A){P[A]=l.cloneDeep(S[A])}),P},x.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},x.legend=function(S,P){var A=this.get("options");A.legends||(A.legends={});var O={};return S===!1?A.legends=!1:l.isObject(S)?O=S:l.isString(S)?O[S]=P:O=P,l.mix(A.legends,O),this},x.tooltip=function(S,P){var A=this.get("options");return A.tooltip||(A.tooltip={}),S===!1?A.tooltip=!1:l.isObject(S)?l.mix(A.tooltip,S):l.mix(A.tooltip,P),this},x.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var P=S.shift();P.destroy()}_.prototype.clear.call(this);var A=this.get("canvas");return this.resetPlot(),A.draw(),this.emit("afterclear"),this},x.clearInner=function(){var S=this.get("views");l.each(S,function(O){O.clearInner()});var P=this.get("tooltipController");if(P&&P.clear(),!this.get("keepLegend")){var A=this.get("legendController");A&&A.clear()}_.prototype.clearInner.call(this)},x.drawComponents=function(){_.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},x.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var P=S._getAutoPadding(),A=S.get("plot");y(A.get("padding"),P)||(A.set("padding",P),A.repaint())}var O=S.get("middlePlot");if(S.get("limitInPlot")&&!O.attr("clip")){var L=l.getClipByRange(S.get("plotRange"));O.attr("clip",L)}_.prototype.render.call(this),S._renderTooltips()},x.repaint=function(){this.get("keepPadding")||this.resetPlot(),_.prototype.repaint.call(this)},x.changeVisible=function(S){var P=this.get("wrapperEl"),A=S?"":"none";P.style.display=A},x.toDataURL=function(){var S=this,P=S.get("canvas"),A=S.get("renderer"),O=P.get("el"),L="";if(A==="svg"){var W=O.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),K=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F);K.replaceChild(W,K.documentElement);var V=new XMLSerializer().serializeToString(K);L="data:image/svg+xml;charset=utf8,"+encodeURIComponent(V)}else A==="canvas"&&(L=O.toDataURL("image/png"));return L},x.downloadImage=function(S){var P=this,A=document.createElement("a"),O=P.get("renderer"),L=(S||"chart")+(O==="svg"?".svg":".png"),W=P.get("canvas");W.get("timeline").stopAllAnimations(),setTimeout(function(){var F=P.toDataURL();if(window.Blob&&window.URL&&O!=="svg"){for(var K=F.split(","),V=K[0].match(/:(.*?);/)[1],k=atob(K[1]),Z=k.length,X=new Uint8Array(Z);Z--;)X[Z]=k.charCodeAt(Z);var it=new Blob([X],{type:V});window.navigator.msSaveBlob?window.navigator.msSaveBlob(it,L):A.addEventListener("click",function(){A.download=L,A.href=window.URL.createObjectURL(it)})}else A.addEventListener("click",function(){A.download=L,A.href=F});var ft=document.createEvent("MouseEvents");ft.initEvent("click",!1,!1),A.dispatchEvent(ft)},16)},x.showTooltip=function(S){var P=this.getViewsByPoint(S);if(P.length){var A=this.get("tooltipController");A.showTooltip(S,P)}return this},x.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},x.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},x.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},x.getTooltipItems=function(S){var P=this,A=P.getViewsByPoint(S),O=[];return l.each(A,function(L){var W=L.get("geoms");l.each(W,function(F){var K=F.get("dataArray"),V=[];l.each(K,function(k){var Z=F.findPoint(S,k);if(Z){var X=F.getTipItems(Z);V=V.concat(X)}}),O=O.concat(V)})}),O},x.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),P=this.get("wrapperEl");P.parentNode.removeChild(P),_.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",l.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},M}(s);E.exports=g},function(E,T,e){var t=e(154),l=e(16),s=e(119),c=e(44),r=e(5),h=e(9),n=e(0),i={version:r.version,Animate:s,Chart:c,Global:r,Scale:t,Shape:h,Util:n,G:l,DomUtil:n.DomUtil,MatrixUtil:n.MatrixUtil,PathUtil:n.PathUtil};i.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+i.version+"'s reference is 'window.G2_3'"):window.G2=i),E.exports=i},function(E,T,e){var t=e(5),l=e(0),s=l.assign,c=l.isNil,r=l.isArray,h=l.cloneDeep,n=l.wrapBehavior,i=l.getWrapBehavior,a=function(){var o=u.prototype;o.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:t.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:t.fontFamily}}}};function u(f){var v=this.getDefaultCfg();s(this,v,f),this.init()}return o.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},o.initContainer=function(){var v=this.chart,b=v.get("frontPlot"),y=b.addGroup();this.group=y},o.initViews=function(){for(var v=this.chart,b=v.get("data"),y=this.eachView,g=this.generateFacets(b),_=0;_<g.length;_++){var M=g[_],x=M.region,m=v.view({start:x.start,end:x.end,padding:this.padding});m.source(M.data),this.beforeProcessView(m,M),y&&y(m,M),this.afterProcessView(m,M),M.view=m}this.facets=g},o.beforeProcessView=function(){},o.afterProcessView=function(v,b){this.autoSetAxis&&this.processAxis(v,b)},o.processAxis=function(v,b){var y=v.get("options"),g=v.get("geoms");if((!y.coord.type||y.coord.type==="rect")&&g.length){var _=g[0].get("attrOptions").position.field,M=r(_)?_:_.split("*").map(function(P){return P.trim()}),x=M[0],m=M[1];c(y.axes)&&(y.axes={});var S=y.axes;S!==!1&&(x&&S[x]!==!1&&(S[x]=S[x]||{},this.setXAxis(x,S,b)),m&&S[m]!==!1&&(S[m]=S[m]||{},this.setYAxis(m,S,b)))}},o.setXAxis=function(){},o.setYAxis=function(){},o.renderTitle=function(v,b){this.drawColTitle(v,b)},o.getScaleText=function(v,b,y){var g;if(v){var _=y.get("scales"),M=_[v];M||(M=y.createScale(v)),g=M.getText(b)}else g=b;return g},o.drawColTitle=function(v,b){var y=this.getScaleText(b.colField,b.colValue,v),g=s({position:["50%","0%"],content:y},this.colTitle);v.guide().text(g)},o.drawRowTitle=function(v,b){var y=this.getScaleText(b.rowField,b.rowValue,v),g=s({position:["100%","50%"],content:y},h(this.rowTitle));v.guide().text(g)},o.getFilter=function(v){var b=function(g){var _=!0;return v.forEach(function(M){var x=M.field,m=M.value,S=!0;!c(m)&&x&&(S=g[x]===m),_=_&&S}),_};return b},o.getFieldValues=function(v,b){for(var y=[],g={},_=0;_<b.length;_++){var M=b[_],x=M[v];!c(x)&&!g[x]&&(y.push(x),g[x]=!0)}return y},o.getRegion=function(v,b,y,g){var _=1/b,M=1/v,x={x:_*y,y:M*g},m={x:x.x+_,y:x.y+M};return{start:x,end:m}},o.generateFacets=function(){return[]},o._bindEvent=function(){var v=this.chart;v.on("afterchangedata",n(this,"onDataChange")),v.on("beforeclear",n(this,"onClear")),v.on("beforedestroy",n(this,"destroy")),v.on("beforepaint",n(this,"onPaint")),v.on("setdata",n(this,"onDataChange"))},o._clearEvent=function(){var v=this.chart;v&&(v.off("afterchangedata",i(this,"onDataChange")),v.off("beforeclear",i(this,"onClear")),v.off("beforedestroy",i(this,"destroy")),v.off("beforepaint",i(this,"onPaint")),v.off("setdata",i(this,"onDataChange")))},o._clearFacets=function(){var v=this.facets,b=this.chart;if(v)for(var y=0;y<v.length;y++){var g=v[y];b.removeView(g.view)}this.facets=null},o.onClear=function(){this.onRemove()},o.onPaint=function(){if(this.showTitle)for(var v=this.facets,b=0;b<v.length;b++){var y=v[b],g=y.view;this.renderTitle(g,y)}},o.onDataChange=function(){this._clearFacets(),this.initViews()},o.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},o.destroy=function(){this.onRemove(),this.destroyed=!0},u}();E.exports=a},function(E,T,e){var t=e(1);function l(n,i,a,o){return{x:Math.cos(o)*a+n,y:Math.sin(o)*a+i}}function s(n,i,a,o){var u,f;return o?n<i?(u=i-n,f=Math.PI*2-a+n):n>a&&(u=Math.PI*2-n+i,f=n-a):(u=n-i,f=a-n),u>f?a:i}function c(n,i,a,o){var u=0;return a-i>=Math.PI*2&&(u=Math.PI*2),i=t.mod(i,Math.PI*2),a=t.mod(a,Math.PI*2)+u,n=t.mod(n,Math.PI*2),o?i>=a?n>a&&n<i?n:s(n,a,i,!0):n<i||n>a?n:s(n,i,a):i<=a?i<n&&n<a?n:s(n,i,a,!0):n>i||n<a?n:s(n,a,i)}function r(n,i,a,o,u,f,v,b,y){var g=[v,b],_=[n,i],M=[1,0],x=t.vec2.subtract([],g,_),m=t.vec2.angleTo(M,x);m=c(m,o,u,f);var S=[a*Math.cos(m)+n,a*Math.sin(m)+i];y&&(y.x=S[0],y.y=S[1]);var P=t.vec2.distance(S,g);return P}function h(n,i,a,o,u,f){var v=0,b=Math.PI/2,y=Math.PI,g=Math.PI*3/2,_=[],M=c(v,o,u,f);M===v&&_.push(l(n,i,a,v)),M=c(b,o,u,f),M===b&&_.push(l(n,i,a,b)),M=c(y,o,u,f),M===y&&_.push(l(n,i,a,y)),M=c(g,o,u,f),M===g&&_.push(l(n,i,a,g)),_.push(l(n,i,a,o)),_.push(l(n,i,a,u));var x=Infinity,m=-Infinity,S=Infinity,P=-Infinity;return t.each(_,function(A){x>A.x&&(x=A.x),m<A.x&&(m=A.x),S>A.y&&(S=A.y),P<A.y&&(P=A.y)}),{minX:x,minY:S,maxX:m,maxY:P}}E.exports={nearAngle:c,projectPoint:function(i,a,o,u,f,v,b,y){var g={};return r(i,a,o,u,f,v,b,y,g),g},pointDistance:r,box:h}},function(E,T,e){var t=e(1).vec2;E.exports={at:function(s,c,r){return(c-s)*r+s},pointDistance:function(s,c,r,h,n,i){var a=[r-s,h-c];if(t.exactEquals(a,[0,0]))return NaN;var o=[-a[1],a[0]];t.normalize(o,o);var u=[n-s,i-c];return Math.abs(t.dot(u,o))},box:function(s,c,r,h,n){var i=n/2,a=Math.min(s,r),o=Math.max(s,r),u=Math.min(c,h),f=Math.max(c,h);return{minX:a-i,minY:u-i,maxX:o+i,maxY:f+i}},len:function(s,c,r,h){return Math.sqrt((r-s)*(r-s)+(h-c)*(h-c))}}},function(E,T,e){var t=e(37),l=e(50),s=Math.PI,c=Math.sin,r=Math.cos,h=Math.atan2,n=10,i=s/3;function a(f,v,b,y,g,_,M){var x,m,S,P,A,O,L;if(!v.fill){var W=v.arrowLength||n,F=v.arrowAngle?v.arrowAngle*s/180:i;L=h(y-_,b-g),A=Math.abs(v.lineWidth*r(L))/2,O=Math.abs(v.lineWidth*c(L))/2,M&&(A=-A,O=-O),x=g+W*r(L+F/2),m=_+W*c(L+F/2),S=g+W*r(L-F/2),P=_+W*c(L-F/2),f.beginPath(),f.moveTo(x-A,m-O),f.lineTo(g-A,_-O),f.lineTo(S-A,P-O),f.moveTo(g-A,_-O),f.lineTo(g+A,_+O),f.moveTo(g,_),f.stroke()}}function o(f){var v=[],b=t.parsePath(f.path),y;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var g=b.length,_=0;_<b.length;_++){var M=b[_];y=new l(M,y,_===g-1),v.push(y)}return v}function u(f,v,b,y,g,_,M){var x=M?v.startArrow:v.endArrow,m=x.d,S=0,P=g-b,A=_-y,O=Math.atan(P/A);A===0&&P<0?S=Math.PI:P>0&&A>0?S=Math.PI/2-O:P<0&&A<0?S=-Math.PI/2-O:P>=0&&A<0?S=-O-Math.PI/2:P<=0&&A>0&&(S=Math.PI/2-O);var L=o(x);if(!!L){m&&(M?(g=g+Math.sin(Math.abs(O))*m,_=_+Math.cos(Math.abs(O))*m-.5*f.lineWidth):(g=g-Math.sin(Math.abs(O))*m,_=_-Math.cos(Math.abs(O))*m+.5*f.lineWidth)),f.save(),f.beginPath(),f.translate(g,_),f.rotate(S);for(var W=0;W<L.length;W++)L[W].draw(f);f.setTransform(1,0,0,1,0,0),f.fillStyle=f.strokeStyle,f.fill(),f.restore()}}E.exports={addStartArrow:function(v,b,y,g,_,M){typeof b.startArrow=="object"?u(v,b,y,g,_,M,!0):b.startArrow&&a(v,b,y,g,_,M,!0)},addEndArrow:function(v,b,y,g,_,M){typeof b.endArrow=="object"?u(v,b,y,g,_,M,!1):b.endArrow&&a(v,b,y,g,_,M,!1)}}},function(E,T,e){var t=e(1),l=e(76),s=e(75),c=e(144),r=e(143),h=t.vec3,n=t.mat3,i=["m","l","c","a","q","h","v","t","s","z"];function a(g,_,M){return{x:M.x+g,y:M.y+_}}function o(g,_){return{x:_.x+(_.x-g.x),y:_.y+(_.y-g.y)}}function u(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function f(g,_){return(g[0]*_[0]+g[1]*_[1])/(u(g)*u(_))}function v(g,_){return(g[0]*_[1]<g[1]*_[0]?-1:1)*Math.acos(f(g,_))}function b(g,_,M,x,m,S,P){var A=t.mod(t.toRadian(P),Math.PI*2),O=g.x,L=g.y,W=_.x,F=_.y,K=Math.cos(A)*(O-W)/2+Math.sin(A)*(L-F)/2,V=-1*Math.sin(A)*(O-W)/2+Math.cos(A)*(L-F)/2,k=K*K/(m*m)+V*V/(S*S);k>1&&(m*=Math.sqrt(k),S*=Math.sqrt(k));var Z=m*m*(V*V)+S*S*(K*K),X=Math.sqrt((m*m*(S*S)-Z)/Z);M===x&&(X*=-1),isNaN(X)&&(X=0);var it=X*m*V/S,ft=X*-S*K/m,pt=(O+W)/2+Math.cos(A)*it-Math.sin(A)*ft,ut=(L+F)/2+Math.sin(A)*it+Math.cos(A)*ft,It=v([1,0],[(K-it)/m,(V-ft)/S]),Nt=[(K-it)/m,(V-ft)/S],Rt=[(-1*K-it)/m,(-1*V-ft)/S],Mt=v(Nt,Rt);return f(Nt,Rt)<=-1&&(Mt=Math.PI),f(Nt,Rt)>=1&&(Mt=0),x===0&&Mt>0&&(Mt=Mt-2*Math.PI),x===1&&Mt<0&&(Mt=Mt+2*Math.PI),[g,pt,ut,m,S,It,Mt,A,x]}var y=function(_,M,x){this.preSegment=M,this.isLast=x,this.init(_,M)};t.augment(y,{init:function(_,M){var x=_[0];M=M||{endPoint:{x:0,y:0}};var m=i.indexOf(x)>=0,S=m?x.toUpperCase():x,P=_,A,O,L,W,F=M.endPoint,K=P[1],V=P[2];switch(S){default:break;case"M":m?W=a(K,V,F):W={x:K,y:V},this.command="M",this.params=[F,W],this.subStart=W,this.endPoint=W;break;case"L":m?W=a(K,V,F):W={x:K,y:V},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"H":m?W=a(K,0,F):W={x:K,y:F.y},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"V":m?W=a(0,K,F):W={x:F.x,y:K},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"Q":m?(A=a(K,V,F),O=a(P[3],P[4],F)):(A={x:K,y:V},O={x:P[3],y:P[4]}),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"T":m?O=a(K,V,F):O={x:K,y:V},M.command==="Q"?(A=o(M.params[1],F),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="TL",this.params=[F,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-F.x,O.y-F.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"C":m?(A=a(K,V,F),O=a(P[3],P[4],F),L=a(P[5],P[6],F)):(A={x:K,y:V},O={x:P[3],y:P[4]},L={x:P[5],y:P[6]}),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"S":m?(O=a(K,V,F),L=a(P[3],P[4],F)):(O={x:K,y:V},L={x:P[3],y:P[4]}),M.command==="C"?(A=o(M.params[2],F),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="SQ",this.params=[F,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"A":{var k=K,Z=V,X=P[3],it=P[4],ft=P[5];m?W=a(P[6],P[7],F):W={x:P[6],y:P[7]},this.command="A";var pt=b(F,W,it,ft,k,Z,X);this.params=pt;var ut=M.subStart;this.subStart=ut,this.endPoint=W;var It=pt[5]%(Math.PI*2);t.isNumberEqual(It,Math.PI*2)&&(It=0);var Nt=pt[6]%(Math.PI*2);t.isNumberEqual(Nt,Math.PI*2)&&(Nt=0);var Rt=.001;this.startTangent=function(){ft===0&&(Rt*=-1);var Mt=pt[3]*Math.cos(It-Rt)+pt[1],bt=pt[4]*Math.sin(It-Rt)+pt[2];return[Mt-ut.x,bt-ut.y]},this.endTangent=function(){var Mt=pt[6];Mt-Math.PI*2<1e-4&&(Mt=0);var bt=pt[3]*Math.cos(It+Mt+Rt)+pt[1],At=pt[4]*Math.sin(It+Mt-Rt)+pt[2];return[F.x-bt,F.y-At]};break}case"Z":this.command="Z",this.params=[F,M.subStart],this.subStart=M.subStart,this.endPoint=M.subStart}},isInside:function(_,M,x){var m=this,S=m.command,P=m.params,A=m.box;if(A&&!l.box(A.minX,A.maxX,A.minY,A.maxY,_,M))return!1;switch(S){default:break;case"M":return!1;case"TL":case"L":case"Z":return l.line(P[0].x,P[0].y,P[1].x,P[1].y,x,_,M);case"SQ":case"Q":return l.quadraticline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,x,_,M);case"C":return l.cubicline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,P[3].x,P[3].y,x,_,M);case"A":{var O=P,L=O[1],W=O[2],F=O[3],K=O[4],V=O[5],k=O[6],Z=O[7],X=O[8],it=F>K?F:K,ft=F>K?1:F/K,pt=F>K?K/F:1;O=[_,M,1];var ut=[1,0,0,0,1,0,0,0,1];return n.translate(ut,ut,[-L,-W]),n.rotate(ut,ut,-Z),n.scale(ut,ut,[1/ft,1/pt]),h.transformMat3(O,O,ut),l.arcline(0,0,it,V,V+k,1-X,x,O[0],O[1])}}return!1},draw:function(_){var M=this.command,x=this.params,m,S,P;switch(M){default:break;case"M":_.moveTo(x[1].x,x[1].y);break;case"TL":case"L":_.lineTo(x[1].x,x[1].y);break;case"SQ":case"Q":m=x[1],S=x[2],_.quadraticCurveTo(m.x,m.y,S.x,S.y);break;case"C":m=x[1],S=x[2],P=x[3],_.bezierCurveTo(m.x,m.y,S.x,S.y,P.x,P.y);break;case"A":{var A=x,O=A[1],L=A[2],W=O,F=L,K=A[3],V=A[4],k=A[5],Z=A[6],X=A[7],it=A[8],ft=K>V?K:V,pt=K>V?1:K/V,ut=K>V?V/K:1;_.translate(W,F),_.rotate(X),_.scale(pt,ut),_.arc(0,0,ft,k,k+Z,1-it),_.scale(1/pt,1/ut),_.rotate(-X),_.translate(-W,-F);break}case"Z":_.closePath();break}},getBBox:function(_){var M=_/2,x=this.params,m,S,P,A;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(x[0].x,x[1].x)-M,maxX:Math.max(x[0].x,x[1].x)+M,minY:Math.min(x[0].y,x[1].y)-M,maxY:Math.max(x[0].y,x[1].y)+M};break;case"SQ":case"Q":for(S=c.extrema(x[0].x,x[1].x,x[2].x),P=0,A=S.length;P<A;P++)S[P]=c.at(x[0].x,x[1].x,x[2].x,S[P]);for(S.push(x[0].x,x[2].x),m=c.extrema(x[0].y,x[1].y,x[2].y),P=0,A=m.length;P<A;P++)m[P]=c.at(x[0].y,x[1].y,x[2].y,m);m.push(x[0].y,x[2].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"C":for(S=s.extrema(x[0].x,x[1].x,x[2].x,x[3].x),P=0,A=S.length;P<A;P++)S[P]=s.at(x[0].x,x[1].x,x[2].x,x[3].x,S[P]);for(m=s.extrema(x[0].y,x[1].y,x[2].y,x[3].y),P=0,A=m.length;P<A;P++)m[P]=s.at(x[0].y,x[1].y,x[2].y,x[3].y,m[P]);S.push(x[0].x,x[3].x),m.push(x[0].y,x[3].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"A":{var O=x,L=O[1],W=O[2],F=O[3],K=O[4],V=O[5],k=O[6],Z=O[7],X=O[8],it=V,ft=V+k,pt=r.xExtrema(Z,F,K),ut=Infinity,It=-Infinity,Nt=[it,ft];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var Rt=pt+P;X===1?it<Rt&&Rt<ft&&Nt.push(Rt):ft<Rt&&Rt<it&&Nt.push(Rt)}for(P=0,A=Nt.length;P<A;P++){var Mt=r.xAt(Z,F,K,L,Nt[P]);Mt<ut&&(ut=Mt),Mt>It&&(It=Mt)}var bt=r.yExtrema(Z,F,K),At=Infinity,rt=-Infinity,Pt=[it,ft];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var z=bt+P;X===1?it<z&&z<ft&&Pt.push(z):ft<z&&z<it&&Pt.push(z)}for(P=0,A=Pt.length;P<A;P++){var Q=r.yAt(Z,F,K,W,Pt[P]);Q<At&&(At=Q),Q>rt&&(rt=Q)}this.box={minX:ut-M,maxX:It+M,minY:At-M,maxY:rt+M};break}}}}),E.exports=y},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(6),s=e(2),c=e(26),r=e(351),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this);var u=this;u.type="linear",u.isLinear=!0,u.nice=!1,u.min=null,u.minLimit=null,u.max=null,u.maxLimit=null,u.tickCount=null,u.tickInterval=null,u.minTickInterval=null,u.snapArray=null},a.init=function(){var u=this;if(!u.ticks)u.min=u.translate(u.min),u.max=u.translate(u.max),u.initTicks();else{var f=u.ticks,v=u.translate(f[0]),b=u.translate(f[f.length-1]);(l(u.min)||u.min>v)&&(u.min=v),(l(u.max)||u.max<b)&&(u.max=b)}},a.calculateTicks=function(){var u=this.min,f=this.max,v=this.minLimit,b=this.maxLimit,y=this.tickCount,g=this.tickInterval,_=this.minTickInterval,M=this.snapArray;if(y===1)throw new Error("linear scale'tickCount should not be 1");if(f<u)throw new Error("max: "+f+" should not be less than min: "+u);var x=r({min:u,max:f,minLimit:v,maxLimit:b,minCount:y,maxCount:y,interval:g,minTickInterval:_,snapArray:M});return x.ticks},a.initTicks=function(){var u=this,f=u.calculateTicks();if(u.nice)u.ticks=f,u.min=f[0],u.max=f[f.length-1];else{var v=[];s(f,function(b){b>=u.min&&b<=u.max&&v.push(b)}),v.length||(v.push(u.min),v.push(u.max)),u.ticks=v}},a.scale=function(u){if(l(u))return NaN;var f=this.max,v=this.min;if(f===v)return 0;var b=(u-v)/(f-v),y=this.rangeMin(),g=this.rangeMax();return y+b*(g-y)},a.invert=function(u){var f=(u-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+f*(this.max-this.min)},i}(c);c.Linear=h,E.exports=h},function(E,T,e){var t=e(15),l=e(192);E.exports={toTimeStamp:function(c){return t(c)&&(c.indexOf("T")>0?c=new Date(c).getTime():c=new Date(c.replace(/-/ig,"/")).getTime()),l(c)&&(c=c.getTime()),c}}},function(E,T,e){var t=e(21),l=Array.prototype.indexOf,s=function(r,h){return t(r)?l.call(r,h)>-1:!1};E.exports=s},function(E,T){var e=function(l){for(var s=[],c=0;c<l.length;c++)s=s.concat(l[c]);return s};E.exports=e},function(E,T){var e=1e-5;E.exports=function(l,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Math.abs(l-s)<c}},function(E,T,e){E.exports={mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(21);function l(s){return t(s)?Array.prototype.slice.call(s):[]}E.exports=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l=e(45);function s(r,h){return r===h?r!==0||h!==0||1/r==1/h:r!==r&&h!==h}function c(r){return l.Util.isArray(r)?r.length:l.Util.isObject(r)?Object.keys(r).length:0}T.default=l.Util.mix({},l.Util,{shallowEqual:function(h,n){if(s(h,n))return!0;if((typeof h=="undefined"?"undefined":t(h))!=="object"||h===null||(typeof n=="undefined"?"undefined":t(n))!=="object"||n===null||l.Util.isArray(h)!==l.Util.isArray(n)||c(h)!==c(n))return!1;var i=!0;return l.Util.each(h,function(a,o){return s(a,n[o])?!0:(i=!1,i)}),i},without:function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i={};return l.Util.each(h,function(a,o){l.Util.indexOf(n,o)===-1&&(i[o]=a)}),i},length:c})},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l-=t,function(s){return t+l*s}}},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l=+l,function(s){return t*(1-s)+l*s}}},function(E,T,e){"use strict";var t=e(97),l=e(98);function s(r){return function(){var h=this.ownerDocument,n=this.namespaceURI;return n===l.b&&h.documentElement.namespaceURI===l.b?h.createElement(r):h.createElementNS(n,r)}}function c(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}T.a=function(r){var h=e.i(t.a)(r);return(h.local?c:s)(h)}},function(E,T,e){"use strict";T.a=function(t,l){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var c=s.createSVGPoint();return c.x=l.clientX,c.y=l.clientY,c=c.matrixTransform(t.getScreenCTM().inverse()),[c.x,c.y]}var r=t.getBoundingClientRect();return[l.clientX-r.left-t.clientLeft,l.clientY-r.top-t.clientTop]}},function(E,T,e){"use strict";T.b=c;var t=e(13);function l(r,h){var n,i;return function(){var a=e.i(t.e)(this,r),o=a.tween;if(o!==n){i=n=o;for(var u=0,f=i.length;u<f;++u)if(i[u].name===h){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function s(r,h,n){var i,a;if(typeof n!="function")throw new Error;return function(){var o=e.i(t.e)(this,r),u=o.tween;if(u!==i){a=(i=u).slice();for(var f={name:h,value:n},v=0,b=a.length;v<b;++v)if(a[v].name===h){a[v]=f;break}v===b&&a.push(f)}o.tween=a}}T.a=function(r,h){var n=this._id;if(r+="",arguments.length<2){for(var i=e.i(t.f)(this.node(),n).tween,a=0,o=i.length,u;a<o;++a)if((u=i[a]).name===r)return u.value;return null}return this.each((h==null?l:s)(n,r,h))};function c(r,h,n){var i=r._id;return r.each(function(){var a=e.i(t.e)(this,i);(a.value||(a.value={}))[h]=n.apply(this,arguments)}),function(a){return e.i(t.f)(a,i).value[h]}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setTheme=T.track=T.Interactions=T.PathUtil=T.Animate=T.Shape=T.Util=T.G2=T.Facet=T.Label=T.Guide=T.View=T.Geom=T.Tooltip=T.Legend=T.Axis=T.Coord=T.Chart=void 0;var t=e(422);Object.defineProperty(T,"Chart",{enumerable:!0,get:function(){return x(t).default}});var l=e(424);Object.defineProperty(T,"Coord",{enumerable:!0,get:function(){return x(l).default}});var s=e(420);Object.defineProperty(T,"Axis",{enumerable:!0,get:function(){return x(s).default}});var c=e(430);Object.defineProperty(T,"Legend",{enumerable:!0,get:function(){return x(c).default}});var r=e(431);Object.defineProperty(T,"Tooltip",{enumerable:!0,get:function(){return x(r).default}});var h=e(427);Object.defineProperty(T,"Geom",{enumerable:!0,get:function(){return x(h).default}});var n=e(432);Object.defineProperty(T,"View",{enumerable:!0,get:function(){return x(n).default}});var i=e(428);Object.defineProperty(T,"Guide",{enumerable:!0,get:function(){return x(i).default}});var a=e(429);Object.defineProperty(T,"Label",{enumerable:!0,get:function(){return x(a).default}});var o=e(426);Object.defineProperty(T,"Facet",{enumerable:!0,get:function(){return x(o).default}});var u=e(45),f=x(u),v=e(322),b=x(v),y=e(58),g=x(y),_=e(438),M=x(_);function x(A){return A&&A.__esModule?A:{default:A}}T.G2=f.default,T.Util=g.default,T.Shape=u.Shape,T.Animate=u.Animate,T.PathUtil=u.PathUtil,T.Interactions=b.default;var m=T.track=function(){},S=T.setTheme=function(O){var L=O;typeof O=="string"&&M.default[O]&&(L=M.default[O]),f.default.Global.setTheme(L)},P={G2:f.default,Util:g.default,Shape:u.Shape,Animate:u.Animate,PathUtil:u.PathUtil,track:m,setTheme:S,Interactions:b.default};T.default=P},function(E,T,e){E.exports={Position:e(235),Color:e(233),Shape:e(236),Size:e(237),Opacity:e(234),ColorUtil:e(107)}},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(105),i=e(3),a=function(o){h(v,o);var u=t(v),f=v.prototype;f.getDefaultCfg=function(){return{}};function v(b){var y;y=o.call(this)||this;var g=s(y),_={visible:!0},M=g.getDefaultCfg();return g._attrs=_,i.deepMix(_,M,b),y}return f.get=function(y){return this._attrs[y]},f.set=function(y,g){this._attrs[y]=g},f.changeVisible=function(){},f.destroy=function(){var y=this;y._attrs={},y.removeAllListeners(),y.destroyed=!0},v}(n);E.exports=a},function(E,T,e){function t(g){return function(){var _=r(g),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return l(this,M)}}function l(g,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(g)}function h(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var n=e(3),i=e(112),a=e(261),o=e(19),u=o.FONT_FAMILY,f=8,v=n.Event,b=n.Group,y=function(g){h(M,g);var _=t(M);function M(){return g.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=g.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:u},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},x._calStartPoint=function(){var S={x:10,y:this.get("titleGap")-f},P=this.get("titleShape");if(P){var A=P.getBBox();S.y+=A.height}return S},x.beforeRender=function(){var S=this.get("items");!n.isArray(S)||n.isEmpty(S)||(g.prototype.beforeRender.call(this),this.set("firstItem",S[0]),this.set("lastItem",S[S.length-1]))},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x.render=function(){g.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},x._renderSlider=function(){var S=new b,P=new b,A=new b,O=this._calStartPoint(),L=this.get("group"),W=L.addGroup(a,{minHandleElement:S,maxHandleElement:P,backgroundElement:A,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});W.translate(O.x,O.y),this.set("slider",W);var F=this._renderSliderShape();F.attr("clip",W.get("middleHandleElement")),this._renderTrigger()},x._addMiddleBar=function(S,P,A){return S.addShape(P,{attrs:n.mix({},A,this.get("middleBackgroundStyle"))}),S.addShape(P,{attrs:A})},x._renderTrigger=function(){var S=this.get("firstItem"),P=this.get("lastItem"),A=this.get("layout"),O=this.get("textStyle"),L=this.get("triggerAttr"),W=n.mix({},L),F=n.mix({},L),K=n.mix({text:this._formatItemValue(S.value)+""},O),V=n.mix({text:this._formatItemValue(P.value)+""},O);A==="vertical"?(this._addVerticalTrigger("min",W,K),this._addVerticalTrigger("max",F,V)):(this._addHorizontalTrigger("min",W,K),this._addHorizontalTrigger("max",F,V))},x._addVerticalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),W=this.get("width"),F=L.addShape("rect",{attrs:n.mix({x:W/2-f-2,y:S==="min"?0:-f,width:2*f+2,height:f},P)}),K=L.addShape("text",{attrs:n.mix(A,{x:W+this.get("textOffset"),y:S==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),V=this.get("layout"),k=V==="vertical"?"ns-resize":"ew-resize";F.attr("cursor",k),K.attr("cursor",k),this.set(S+"ButtonElement",F),this.set(S+"TextElement",K)},x._addHorizontalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),W=L.addShape("rect",{attrs:n.mix({x:S==="min"?-f:0,y:-f-this.get("height")/2,width:f,height:2*f},P)}),F=L.addShape("text",{attrs:n.mix(A,{x:S==="min"?-f-4:f+4,y:f/2+this.get("textOffset")+10,textAlign:S==="min"?"end":"start",textBaseline:"middle"})}),K=this.get("layout"),V=K==="vertical"?"ns-resize":"ew-resize";W.attr("cursor",V),F.attr("cursor",V),this.set(S+"ButtonElement",W),this.set(S+"TextElement",F)},x._bindEvents=function(){var S=this;if(this.get("slidable")){var P=this.get("slider");P.on("sliderchange",function(A){var O=A.range,L=S.get("firstItem").value,W=S.get("lastItem").value,F=L+O[0]/100*(W-L),K=L+O[1]/100*(W-L);S._updateElement(F,K);var V=new v("itemfilter",A,!0,!0);V.range=[F,K],S.emit("itemfilter",V)})}this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseLeave")))},x._updateElement=function(S,P){var A=this.get("minTextElement"),O=this.get("maxTextElement");P>1&&(S=parseInt(S,10),P=parseInt(P,10)),A.attr("text",this._formatItemValue(S)+""),O.attr("text",this._formatItemValue(P)+"")},x._onMouseLeave=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},x._onMouseMove=function(S){var P=this.get("height"),A=this.get("width"),O=this.get("items"),L=this.get("canvas").get("el"),W=L.getBoundingClientRect(),F=this.get("group").getBBox(),K;if(this.get("layout")==="vertical"){var V=5;this.get("type")==="color-legend"&&(V=30);var k=this.get("titleGap"),Z=this.get("titleShape");Z&&(k+=Z.getBBox().maxY-Z.getBBox().minY);var X=S.clientY||S.event.clientY;X=X-W.y-this.get("group").attr("matrix")[7]+F.y-V+k,K=O[0].value+(1-X/P)*(O[O.length-1].value-O[0].value)}else{var it=S.clientX||S.event.clientX;it=it-W.x-this.get("group").attr("matrix")[6],K=O[0].value+it/A*(O[O.length-1].value-O[0].value)}K=K.toFixed(2),this.activate(K),this.emit("mousehover",{value:K})},x.activate=function(S){if(!!S){var P=this.get("group").findById("hoverPointer"),A=this.get("group").findById("hoverText"),O=this.get("items");if(!(S<O[0].value||S>O[O.length-1].value)){var L=this.get("height"),W=this.get("width"),F=this.get("titleShape"),K=this.get("titleGap"),V=[],k=(S-O[0].value)/(O[O.length-1].value-O[0].value),Z;if(this.get("layout")==="vertical"){var X=0,it=0;this.get("type")==="color-legend"&&(X=K,F&&(X+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?X-=13:(X=K-15,F&&(X+=F.getBBox().height)),it+=10),k=(1-k)*L,V=[[it,k+X],[it-10,k+X-5],[it-10,k+X+5]],Z=n.mix({},{x:W+this.get("textOffset")/2+it,y:k+X,text:this._formatItemValue(S)+""},this.get("textStyle"),{textAlign:"start"})}else{var ft=0,pt=0;this.get("type")==="color-legend"&&(ft=K,F&&(ft+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?ft-=7:(ft=K,F||(ft-=7)),pt+=10),k*=W,V=[[k+pt,ft],[k+pt-5,ft-10],[k+pt+5,ft-10]],Z=n.mix({},{x:k-5,y:L+this.get("textOffset")+ft,text:this._formatItemValue(S)+""},this.get("textStyle"))}var ut=n.mix(Z,this.get("hoverTextStyle"));A?A.attr(ut):(A=this.get("group").addShape("text",{attrs:ut}),A.set("id","hoverText")),P?P.attr(n.mix({points:V},this.get("pointerStyle"))):(P=this.get("group").addShape("Polygon",{attrs:n.mix({points:V},this.get("pointerStyle"))}),P.set("id","hoverPointer")),this.get("canvas").draw()}}},x.deactivate=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},M}(i);E.exports=y},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(66),i=e(3),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return i.mix({},y,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},v.isContentChange=function(y,g){var _=this.get("titleContent"),M=this.get("items"),x=!(y===_&&M.length===g.length);return x||i.each(g,function(m,S){var P=M[S];for(var A in m)if(m.hasOwnProperty(A)&&!i.isObject(m[A])&&m[A]!==P[A]){x=!0;break}if(x)return!1}),x},v.setContent=function(y,g){var _=new Date().valueOf();return this.set("items",g),this.set("titleContent",y),this.set("timeStamp",_),this.render(),this},v.setPosition=function(y,g){this.set("x",y),this.set("y",g)},v.render=function(){},v.clear=function(){},v.show=function(){this.set("visible",!0)},v.hide=function(){this.set("visible",!1)},f}(n);E.exports=a},function(E,T,e){var t=e(16),l=t.Group,s=e(30),c=s.Label,r=e(5),h=e(0),n=["line","point","path"],i="_origin";function a(f){var v=0;return h.each(f,function(b){v+=b}),v/f.length}function o(f,v){if(h.isNumber(f)&&h.isNumber(v))return[f,v];for(var b=-1,y=0,g=0,_,M=f.length-1,x,m=0;++b<f.length;)_=M,M=b,m+=x=f[_]*v[M]-f[M]*v[_],y+=(f[_]+f[M])*x,g+=(v[_]+v[M])*x;return m*=3,[y/m,g/m]}var u=function f(v){f.superclass.constructor.call(this,v)};h.extend(u,l),h.augment(u,{getDefaultCfg:function(){return{label:r.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){u.superclass._renderUI.call(this),this.initLabelsCfg();var v=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),y=this.get("labelRenderer");this.set("labelsGroup",v),this.set("lineGroup",b),this.get("labelRenderer").set("group",v),y.set("group",v),y.set("lineGroup",b)},initLabelsCfg:function(){var v=this,b=new c,y=v.getDefaultLabelCfg(),g=v.get("labelCfg");h.deepMix(y,g.globalCfg||g.cfg),b.set("config",!1),y.labelLine&&b.set("labelLine",y.labelLine),b.set("coord",v.get("coord")),this.set("labelRenderer",b),v.set("label",y)},getDefaultLabelCfg:function(){var v=this,b=v.get("labelCfg").cfg||v.get("labelCfg").globalCfg,y=v.get("geomType"),g=v.get("viewTheme")||r;return y==="polygon"||b&&b.offset<0&&h.indexOf(n,y)===-1?h.deepMix({},v.get("label"),g.innerLabels,b):h.deepMix({},v.get("label"),g.label,b)},getLabelsItems:function(v,b){var y=this,g=[],_=y.get("geom"),M=y.get("coord");y._getLabelCfgs(v,b);var x=y.get("labelItemCfgs");return h.each(v,function(m,S){var P=m[i],A=x[S];if(!A){g.push(null);return}h.isArray(A.text)||(A.text=[A.text]);var O=A.text.length;h.each(A.text,function(L,W){if(h.isNil(L)||L===""){g.push(null);return}var F=y.getLabelPoint(A,m,W);F=h.mix({},A,F),F.textAlign||(F.textAlign=y.getLabelAlign(F,W,O)),_&&(F._id=_._getShapeId(P)+"-glabel-"+W+"-"+F.text),F.coord=M,g.push(F)})}),g},adjustItems:function(v){return h.each(v,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),v},drawLines:function(v){var b=this;h.each(v,function(y){!y||y.offset>0&&b.lineToLabel(y)})},lineToLabel:function(){},getLabelPoint:function(v,b,y){var g=this,_=g.get("coord"),M=v.text.length;function x(O,L){return h.isArray(O)&&(v.text.length===1?O.length<=2?O=O[O.length-1]:O=a(O):O=O[L]),O}var m={text:v.text[y]};if(b&&this.get("geomType")==="polygon"){var S=o(b.x,b.y);m.x=S[0],m.y=S[1]}else m.x=x(b.x,y),m.y=x(b.y,y);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var P=-Infinity;b.nextPoints.forEach(function(O){O=_.convert(O),O.x>P&&(P=O.x)}),m.x=(m.x+P)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(O){O=_.convert(O),(h.isArray(O.x)&&!b.x.includes(O.x)||h.isNumber(O.x)&&b.x!==O.x)&&(m.x=(m.x+O.x)/2)}),v.position&&g.setLabelPosition(m,b,y,v.position);var A=g.getLabelOffset(v,y,M);return v.offsetX&&(A.x+=v.offsetX),v.offsetY&&(A.y+=v.offsetY),g.transLabelPoint(m),m.start={x:m.x,y:m.y},m.x+=A.x,m.y+=A.y,m.color=b.color,m},setLabelPosition:function(){},transLabelPoint:function(v){var b=this,y=b.get("coord"),g=y.applyMatrix(v.x,v.y,1);v.x=g[0],v.y=g[1]},getOffsetVector:function(v){var b=this,y=v.offset||0,g=b.get("coord"),_;return g.isTransposed?_=g.applyMatrix(y,0):_=g.applyMatrix(0,y),_},getDefaultOffset:function(v){var b=this,y=0,g=b.get("coord"),_=b.getOffsetVector(v);g.isTransposed?y=_[0]:y=_[1];var M=this.get("yScale");if(M&&v.point){var x=v.point[M.field];x<0&&(y=y*-1)}return y},getLabelOffset:function(v,b,y){var g=this,_=g.getDefaultOffset(v),M=g.get("coord"),x=M.isTransposed,m=x?"x":"y",S=x?1:-1,P={x:0,y:0};return b>0||y===1?P[m]=_*S:P[m]=_*S*-1,P},getLabelAlign:function(v,b,y){var g=this,_="center",M=g.get("coord");if(M.isTransposed){var x=g.getDefaultOffset(v);x<0?_="right":x===0?_="center":_="left",y>1&&b===0&&(_==="right"?_="left":_==="left"&&(_="right"))}return _},_getLabelValue:function(v,b){h.isArray(b)||(b=[b]);var y=[];return h.each(b,function(g){var _=v[g.field];if(h.isArray(_)){var M=[];h.each(_,function(x){M.push(g.getText(x))}),_=M}else _=g.getText(_);(h.isNil(_)||_==="")&&y.push(null),y.push(_)}),y},_getLabelCfgs:function(v){var b=this,y=this.get("labelCfg"),g=y.scales,_=this.get("label"),M=b.get("viewTheme")||r,x=[];y.globalCfg&&y.globalCfg.type&&b.set("type",y.globalCfg.type),h.each(v,function(m,S){var P={},A=m[i],O=b._getLabelValue(A,g);if(y.callback){var L=g.map(function(K){return A[K.field]});P=y.callback.apply(null,[].concat(L,[m,S]))}if(!P&&P!==0){x.push(null);return}if(h.isString(P)||h.isNumber(P)?P={text:P}:(P.text=P.content||O[0],delete P.content),P=h.mix({},_,y.globalCfg||{},P),m.point=A,P.point=A,P.htmlTemplate&&(P.useHtml=!0,P.text=P.htmlTemplate.call(null,P.text,m,S),delete P.htmlTemplate),P.formatter&&(P.text=P.formatter.call(null,P.text,m,S),delete P.formatter),P.label){var W=P.label;delete P.label,P=h.mix(P,W)}if(P.textStyle){delete P.textStyle.offset;var F=P.textStyle;h.isFunction(F)&&(P.textStyle=F.call(null,P.text,m,S))}P.labelLine&&(P.labelLine=h.mix({},_.labelLine,P.labelLine)),P.textStyle=h.mix({},_.textStyle,M.label.textStyle,P.textStyle),delete P.items,x.push(P)}),this.set("labelItemCfgs",x)},showLabels:function(v,b){var y=this,g=y.get("labelRenderer"),_=y.getLabelsItems(v,b);b=[].concat(b);var M=y.get("type");_=y.adjustItems(_,b),y.drawLines(_),g.set("items",_.filter(function(x,m){return x?!0:(b.splice(m,1),!1)})),M&&(g.set("shapes",b),g.set("type",M),g.set("points",v)),g.set("canvas",this.get("canvas")),g.draw()},destroy:function(){this.get("labelRenderer").destroy(),u.superclass.destroy.call(this)}}),E.exports=u},function(E,T,e){var t=e(5),l=e(0);function s(r,h){var n=r.length;l.isString(r[0])&&(r=r.map(function(u){return h.translate(u)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}var c={getDefaultSize:function(){var h=this.get("defaultSize"),n=this.get("viewTheme")||t;if(!h){var i=this.get("coord"),a=this.getXScale(),o=a.values,u=this.get("dataArray"),f;if(a.isLinear&&o.length>1){o.sort();var v=s(o,a);f=(a.max-a.min)/v,o.length>f&&(f=o.length)}else f=o.length;var b=a.range,y=1/f,g=1;if(this.isInCircle()?i.isTransposed&&f>1?g=n.widthRatio.multiplePie:g=n.widthRatio.rose:(a.isLinear&&(y*=b[1]-b[0]),g=n.widthRatio.column),y*=g,this.hasAdjust("dodge")){var _=this._getDodgeCfg(u),M=_.dodgeCount,x=_.dodgeRatio;y=y/M,x>0&&(y=x*y/g)}h=y,this.set("defaultSize",h)}return h},_getDodgeCfg:function(h){var n=this.get("adjusts"),i,a,o=h.length;if(l.each(n,function(v){v.type==="dodge"&&(i=v.dodgeBy,a=v.dodgeRatio)}),i){var u=l.Array.merge(h),f=l.Array.values(u,i);o=f.length}return{dodgeCount:o,dodgeRatio:a}},getDimWidth:function(h){var n=this.get("coord"),i=n.convertPoint({x:0,y:0}),a=n.convertPoint({x:h==="x"?1:0,y:h==="x"?0:1}),o=0;return i&&a&&(o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),o},_getWidth:function(){var h=this.get("coord"),n;return this.isInCircle()&&!h.isTransposed?n=(h.endAngle-h.startAngle)*h.radius:n=this.getDimWidth("x"),n},_toNormalizedSize:function(h){var n=this._getWidth();return h/n},_toCoordSize:function(h){var n=this._getWidth();return n*h},getNormalizedSize:function(h){var n=this.getAttrValue("size",h);return l.isNil(n)?n=this.getDefaultSize():n=this._toNormalizedSize(n),n},getSize:function(h){var n=this.getAttrValue("size",h);if(l.isNil(n)){var i=this.getDefaultSize();n=this._toCoordSize(i)}return n}};E.exports=c},function(E,T,e){var t=e(72);E.exports=function(l,s){var c=t(l);if(c&&c[s])return c[s]}},function(E,T){E.exports=function(e){var t=e.get("scaleController")||{};return t.defs}},function(E,T,e){var t=e(0),l=e(52);E.exports=function(s,c){var r,h=c.field,n=c.type,i=t.Array.values(s,h);return n==="linear"?(r=t.Array.getRange(i),c.min<r.min&&(r.min=c.min),c.max>r.max&&(r.max=c.max)):(n==="timeCat"&&(t.each(i,function(a,o){i[o]=l.toTimeStamp(a)}),i.sort(function(a,o){return a-o})),r=i),r}},function(E,T,e){var t=e(1),l=e(7),s=e(37),c=e(50),r=function h(n){h.superclass.constructor.call(this,n)};r.Symbols={circle:function(n,i,a){return[["M",n,i],["m",-a,0],["a",a,a,0,1,0,a*2,0],["a",a,a,0,1,0,-a*2,0]]},square:function(n,i,a){return[["M",n-a,i-a],["L",n+a,i-a],["L",n+a,i+a],["L",n-a,i+a],["Z"]]},diamond:function(n,i,a){return[["M",n-a,i],["L",n,i-a],["L",n+a,i],["L",n,i+a],["Z"]]},triangle:function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i+o],["L",n,i-o],["L",n+a,i+o],["z"]]},"triangle-down":function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i-o],["L",n+a,i-o],["L",n,i+o],["Z"]]}},r.ATTRS={path:null,lineWidth:1},t.extend(r,l),t.augment(r,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius,u=this.getHitLineWidth(),f=u/2+o;return{minX:i-f,minY:a-f,maxX:i+f,maxY:a+f}},_getPath:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,u=n.symbol||"circle",f;return t.isFunction(u)?f=u:f=r.Symbols[u],f?f(i,a,o):(console.warn(u+" marker is not supported."),null)},createPath:function(n){var i=this._cfg.segments;if(i&&!this._cfg.hasUpdate){n.beginPath();for(var a=0;a<i.length;a++)i[a].draw(n);return}var o=s.parsePath(this._getPath());n.beginPath();var u;i=[];for(var f=0;f<o.length;f++){var v=o[f];u=new c(v,u,f===o.length-1),i.push(u),u.draw(n)}this._cfg.segments=i,this._cfg.hasUpdate=!1}}),E.exports=r},function(E,T,e){var t=e(1),l=t.vec2;function s(a,o,u,f,v){var b=1-v;return b*b*(b*f+3*v*u)+v*v*(v*a+3*b*o)}function c(a,o,u,f,v){var b=1-v;return 3*(((o-a)*b+2*(u-o)*v)*b+(f-u)*v*v)}function r(a,o,u,f,v,b,y,g,_,M,x){var m,S=.005,P=Infinity,A,O,L,W,F,K,V,k=1e-4,Z=[_,M];for(A=0;A<1;A+=.05)O=[s(a,u,v,y,A),s(o,f,b,g,A)],L=l.squaredDistance(Z,O),L<P&&(m=A,P=L);P=Infinity;for(var X=0;X<32&&!(S<k);X++)K=m-S,V=m+S,O=[s(a,u,v,y,K),s(o,f,b,g,K)],L=l.squaredDistance(Z,O),K>=0&&L<P?(m=K,P=L):(F=[s(a,u,v,y,V),s(o,f,b,g,V)],W=l.squaredDistance(Z,F),V<=1&&W<P?(m=V,P=W):S*=.5);return x&&(x.x=s(a,u,v,y,m),x.y=s(o,f,b,g,m)),Math.sqrt(P)}function h(a,o,u,f){var v=3*a-9*o+9*u-3*f,b=6*o-12*u+6*f,y=3*u-3*f,g=[],_,M,x;if(t.isNumberEqual(v,0))t.isNumberEqual(b,0)||(_=-y/b,_>=0&&_<=1&&g.push(_));else{var m=b*b-4*v*y;t.isNumberEqual(m,0)?g.push(-b/(2*v)):m>0&&(x=Math.sqrt(m),_=(-b+x)/(2*v),M=(-b-x)/(2*v),_>=0&&_<=1&&g.push(_),M>=0&&M<=1&&g.push(M))}return g}function n(a,o,u,f,v){var b=-3*o+9*u-9*f+3*v,y=a*b+6*o-12*u+6*f;return a*y-3*o+3*u}function i(a,o,u,f,v,b,y,g,_){t.isNil(_)&&(_=1),_=_>1?1:_<0?0:_;for(var M=_/2,x=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],S=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,A=0;A<x;A++){var O=M*m[A]+M,L=n(O,a,u,v,y),W=n(O,o,f,b,g),F=L*L+W*W;P+=S[A]*Math.sqrt(F)}return M*P}E.exports={at:s,derivativeAt:c,projectPoint:function(o,u,f,v,b,y,g,_,M,x){var m={};return r(o,u,f,v,b,y,g,_,M,x,m),m},pointDistance:r,extrema:h,len:i}},function(E,T,e){var t=e(48),l=e(144),s=e(75),c=e(47);E.exports={line:function(h,n,i,a,o,u,f){var v=t.box(h,n,i,a,o);if(!this.box(v.minX,v.maxX,v.minY,v.maxY,u,f))return!1;var b=t.pointDistance(h,n,i,a,u,f);return isNaN(b)?!1:b<=o/2},polyline:function(h,n,i,a){var o=h.length-1;if(o<1)return!1;for(var u=0;u<o;u++){var f=h[u][0],v=h[u][1],b=h[u+1][0],y=h[u+1][1];if(this.line(f,v,b,y,n,i,a))return!0}return!1},cubicline:function(h,n,i,a,o,u,f,v,b,y,g){return s.pointDistance(h,n,i,a,o,u,f,v,y,g)<=b/2},quadraticline:function(h,n,i,a,o,u,f,v,b){return l.pointDistance(h,n,i,a,o,u,v,b)<=f/2},arcline:function(h,n,i,a,o,u,f,v,b){return c.pointDistance(h,n,i,a,o,u,v,b)<=f/2},rect:function(h,n,i,a,o,u){return h<=o&&o<=h+i&&n<=u&&u<=n+a},circle:function(h,n,i,a,o){return Math.pow(a-h,2)+Math.pow(o-n,2)<=Math.pow(i,2)},box:function(h,n,i,a,o,u){return h<=o&&o<=n&&i<=u&&u<=a}}},function(E,T,e){var t=e(150),l=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,s=new RegExp("([a-z])["+l+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+l+"]*,?["+l+"]*)+)","ig"),c=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+l+"]*,?["+l+"]*","ig"),r=function(Mt){if(!Mt)return null;if(typeof Mt==typeof[])return Mt;var bt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},At=[];return String(Mt).replace(s,function(rt,Pt,z){var Q=[],gt=Pt.toLowerCase();if(z.replace(c,function(et,ot){ot&&Q.push(+ot)}),gt==="m"&&Q.length>2&&(At.push([Pt].concat(Q.splice(0,2))),gt="l",Pt=Pt==="m"?"l":"L"),gt==="o"&&Q.length===1&&At.push([Pt,Q[0]]),gt==="r")At.push([Pt].concat(Q));else for(;Q.length>=bt[gt]&&(At.push([Pt].concat(Q.splice(0,bt[gt]))),!!bt[gt]););}),At},h=function(Mt,bt){for(var At=[],rt=0,Pt=Mt.length;Pt-2*!bt>rt;rt+=2){var z=[{x:+Mt[rt-2],y:+Mt[rt-1]},{x:+Mt[rt],y:+Mt[rt+1]},{x:+Mt[rt+2],y:+Mt[rt+3]},{x:+Mt[rt+4],y:+Mt[rt+5]}];bt?rt?Pt-4===rt?z[3]={x:+Mt[0],y:+Mt[1]}:Pt-2===rt&&(z[2]={x:+Mt[0],y:+Mt[1]},z[3]={x:+Mt[2],y:+Mt[3]}):z[0]={x:+Mt[Pt-2],y:+Mt[Pt-1]}:Pt-4===rt?z[3]=z[2]:rt||(z[0]={x:+Mt[rt],y:+Mt[rt+1]}),At.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return At},n=function(Mt,bt,At,rt,Pt){var z=[];if(Pt===null&&rt===null&&(rt=At),Mt=+Mt,bt=+bt,At=+At,rt=+rt,Pt!==null){var Q=Math.PI/180,gt=Mt+At*Math.cos(-rt*Q),et=Mt+At*Math.cos(-Pt*Q),ot=bt+At*Math.sin(-rt*Q),xt=bt+At*Math.sin(-Pt*Q);z=[["M",gt,ot],["A",At,At,0,+(Pt-rt>180),0,et,xt]]}else z=[["M",Mt,bt],["m",0,-rt],["a",At,rt,0,1,1,0,2*rt],["a",At,rt,0,1,1,0,-2*rt],["z"]];return z},i=function(Mt){if(Mt=r(Mt),!Mt||!Mt.length)return[["M",0,0]];var bt=[],At=0,rt=0,Pt=0,z=0,Q=0,gt,et;Mt[0][0]==="M"&&(At=+Mt[0][1],rt=+Mt[0][2],Pt=At,z=rt,Q++,bt[0]=["M",At,rt]);for(var ot=Mt.length===3&&Mt[0][0]==="M"&&Mt[1][0].toUpperCase()==="R"&&Mt[2][0].toUpperCase()==="Z",xt,H,nt=Q,at=Mt.length;nt<at;nt++){if(bt.push(xt=[]),H=Mt[nt],gt=H[0],gt!==gt.toUpperCase())switch(xt[0]=gt.toUpperCase(),xt[0]){case"A":xt[1]=H[1],xt[2]=H[2],xt[3]=H[3],xt[4]=H[4],xt[5]=H[5],xt[6]=+H[6]+At,xt[7]=+H[7]+rt;break;case"V":xt[1]=+H[1]+rt;break;case"H":xt[1]=+H[1]+At;break;case"R":et=[At,rt].concat(H.slice(1));for(var q=2,_t=et.length;q<_t;q++)et[q]=+et[q]+At,et[++q]=+et[q]+rt;bt.pop(),bt=bt.concat(h(et,ot));break;case"O":bt.pop(),et=n(At,rt,H[1],H[2]),et.push(et[0]),bt=bt.concat(et);break;case"U":bt.pop(),bt=bt.concat(n(At,rt,H[1],H[2],H[3])),xt=["U"].concat(bt[bt.length-1].slice(-2));break;case"M":Pt=+H[1]+At,z=+H[2]+rt;break;default:for(var yt=1,Ft=H.length;yt<Ft;yt++)xt[yt]=+H[yt]+(yt%2?At:rt)}else if(gt==="R")et=[At,rt].concat(H.slice(1)),bt.pop(),bt=bt.concat(h(et,ot)),xt=["R"].concat(H.slice(-2));else if(gt==="O")bt.pop(),et=n(At,rt,H[1],H[2]),et.push(et[0]),bt=bt.concat(et);else if(gt==="U")bt.pop(),bt=bt.concat(n(At,rt,H[1],H[2],H[3])),xt=["U"].concat(bt[bt.length-1].slice(-2));else for(var Qt=0,ee=H.length;Qt<ee;Qt++)xt[Qt]=H[Qt];if(gt=gt.toUpperCase(),gt!=="O")switch(xt[0]){case"Z":At=+Pt,rt=+z;break;case"H":At=xt[1];break;case"V":rt=xt[1];break;case"M":Pt=xt[xt.length-2],z=xt[xt.length-1];break;default:At=xt[xt.length-2],rt=xt[xt.length-1]}}return bt},a=function(Mt,bt,At,rt){return[Mt,bt,At,rt,At,rt]},o=function(Mt,bt,At,rt,Pt,z){var Q=1/3,gt=2/3;return[Q*Mt+gt*At,Q*bt+gt*rt,Q*Pt+gt*At,Q*z+gt*rt,Pt,z]},u=function Rt(Mt,bt,At,rt,Pt,z,Q,gt,et,ot){At===rt&&(At+=1);var xt=Math.PI*120/180,H=Math.PI/180*(+Pt||0),nt=[],at,q,_t,yt,Ft,Qt=function(ue,xe,$e){var Fn=ue*Math.cos($e)-xe*Math.sin($e),or=ue*Math.sin($e)+xe*Math.cos($e);return{x:Fn,y:or}};if(ot)q=ot[0],_t=ot[1],yt=ot[2],Ft=ot[3];else{at=Qt(Mt,bt,-H),Mt=at.x,bt=at.y,at=Qt(gt,et,-H),gt=at.x,et=at.y,Mt===gt&&bt===et&&(gt+=1,et+=1);var ee=(Mt-gt)/2,Vt=(bt-et)/2,$t=ee*ee/(At*At)+Vt*Vt/(rt*rt);$t>1&&($t=Math.sqrt($t),At=$t*At,rt=$t*rt);var Me=At*At,me=rt*rt,le=(z===Q?-1:1)*Math.sqrt(Math.abs((Me*me-Me*Vt*Vt-me*ee*ee)/(Me*Vt*Vt+me*ee*ee)));yt=le*At*Vt/rt+(Mt+gt)/2,Ft=le*-rt*ee/At+(bt+et)/2,q=Math.asin(((bt-Ft)/rt).toFixed(9)),_t=Math.asin(((et-Ft)/rt).toFixed(9)),q=Mt<yt?Math.PI-q:q,_t=gt<yt?Math.PI-_t:_t,q<0&&(q=Math.PI*2+q),_t<0&&(_t=Math.PI*2+_t),Q&&q>_t&&(q=q-Math.PI*2),!Q&&_t>q&&(_t=_t-Math.PI*2)}var be=_t-q;if(Math.abs(be)>xt){var ze=_t,Xe=gt,Sn=et;_t=q+xt*(Q&&_t>q?1:-1),gt=yt+At*Math.cos(_t),et=Ft+rt*Math.sin(_t),nt=Rt(gt,et,At,rt,Pt,0,Q,Xe,Sn,[_t,ze,yt,Ft])}be=_t-q;var Xn=Math.cos(q),Hn=Math.sin(q),nn=Math.cos(_t),en=Math.sin(_t),An=Math.tan(be/4),Nn=4/3*At*An,fr=4/3*rt*An,hi=[Mt,bt],Ce=[Mt+Nn*Hn,bt-fr*Xn],Te=[gt+Nn*en,et-fr*nn],Jt=[gt,et];if(Ce[0]=2*hi[0]-Ce[0],Ce[1]=2*hi[1]-Ce[1],ot)return[Ce,Te,Jt].concat(nt);nt=[Ce,Te,Jt].concat(nt).join().split(",");for(var pe=[],Wt=0,ie=nt.length;Wt<ie;Wt++)pe[Wt]=Wt%2?Qt(nt[Wt-1],nt[Wt],H).y:Qt(nt[Wt],nt[Wt+1],H).x;return pe},f=function(Mt,bt){var At=i(Mt),rt=bt&&i(bt),Pt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],gt=[],et="",ot="",xt,H=function(Vt,$t,Me){var me,le;if(!Vt)return["C",$t.x,$t.y,$t.x,$t.y,$t.x,$t.y];switch(!(Vt[0]in{T:1,Q:1})&&($t.qx=$t.qy=null),Vt[0]){case"M":$t.X=Vt[1],$t.Y=Vt[2];break;case"A":Vt=["C"].concat(u.apply(0,[$t.x,$t.y].concat(Vt.slice(1))));break;case"S":Me==="C"||Me==="S"?(me=$t.x*2-$t.bx,le=$t.y*2-$t.by):(me=$t.x,le=$t.y),Vt=["C",me,le].concat(Vt.slice(1));break;case"T":Me==="Q"||Me==="T"?($t.qx=$t.x*2-$t.qx,$t.qy=$t.y*2-$t.qy):($t.qx=$t.x,$t.qy=$t.y),Vt=["C"].concat(o($t.x,$t.y,$t.qx,$t.qy,Vt[1],Vt[2]));break;case"Q":$t.qx=Vt[1],$t.qy=Vt[2],Vt=["C"].concat(o($t.x,$t.y,Vt[1],Vt[2],Vt[3],Vt[4]));break;case"L":Vt=["C"].concat(a($t.x,$t.y,Vt[1],Vt[2]));break;case"H":Vt=["C"].concat(a($t.x,$t.y,Vt[1],$t.y));break;case"V":Vt=["C"].concat(a($t.x,$t.y,$t.x,Vt[1]));break;case"Z":Vt=["C"].concat(a($t.x,$t.y,$t.X,$t.Y));break;default:break}return Vt},nt=function(Vt,$t){if(Vt[$t].length>7){Vt[$t].shift();for(var Me=Vt[$t];Me.length;)Q[$t]="A",rt&&(gt[$t]="A"),Vt.splice($t++,0,["C"].concat(Me.splice(0,6)));Vt.splice($t,1),xt=Math.max(At.length,rt&&rt.length||0)}},at=function(Vt,$t,Me,me,le){Vt&&$t&&Vt[le][0]==="M"&&$t[le][0]!=="M"&&($t.splice(le,0,["M",me.x,me.y]),Me.bx=0,Me.by=0,Me.x=Vt[le][1],Me.y=Vt[le][2],xt=Math.max(At.length,rt&&rt.length||0))};xt=Math.max(At.length,rt&&rt.length||0);for(var q=0;q<xt;q++){At[q]&&(et=At[q][0]),et!=="C"&&(Q[q]=et,q&&(ot=Q[q-1])),At[q]=H(At[q],Pt,ot),Q[q]!=="A"&&et==="C"&&(Q[q]="C"),nt(At,q),rt&&(rt[q]&&(et=rt[q][0]),et!=="C"&&(gt[q]=et,q&&(ot=gt[q-1])),rt[q]=H(rt[q],z,ot),gt[q]!=="A"&&et==="C"&&(gt[q]="C"),nt(rt,q)),at(At,rt,Pt,z,q),at(rt,At,z,Pt,q);var _t=At[q],yt=rt&&rt[q],Ft=_t.length,Qt=rt&&yt.length;Pt.x=_t[Ft-2],Pt.y=_t[Ft-1],Pt.bx=parseFloat(_t[Ft-4])||Pt.x,Pt.by=parseFloat(_t[Ft-3])||Pt.y,z.bx=rt&&(parseFloat(yt[Qt-4])||z.x),z.by=rt&&(parseFloat(yt[Qt-3])||z.y),z.x=rt&&yt[Qt-2],z.y=rt&&yt[Qt-1]}return rt?[At,rt]:At},v=/,?([a-z]),?/gi,b=function(Mt){return Mt.join(",").replace(v,"$1")},y=function(Mt,bt,At,rt,Pt){var z=-3*bt+9*At-9*rt+3*Pt,Q=Mt*z+6*bt-12*At+6*rt;return Mt*Q-3*bt+3*At},g=function(Mt,bt,At,rt,Pt,z,Q,gt,et){et===null&&(et=1),et=et>1?1:et<0?0:et;for(var ot=et/2,xt=12,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],nt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],at=0,q=0;q<xt;q++){var _t=ot*H[q]+ot,yt=y(_t,Mt,At,Pt,Q),Ft=y(_t,bt,rt,z,gt),Qt=yt*yt+Ft*Ft;at+=nt[q]*Math.sqrt(Qt)}return ot*at},_=function(Mt,bt,At,rt,Pt,z,Q,gt){for(var et=[],ot=[[],[]],xt,H,nt,at,q=0;q<2;++q){if(q===0?(H=6*Mt-12*At+6*Pt,xt=-3*Mt+9*At-9*Pt+3*Q,nt=3*At-3*Mt):(H=6*bt-12*rt+6*z,xt=-3*bt+9*rt-9*z+3*gt,nt=3*rt-3*bt),Math.abs(xt)<1e-12){if(Math.abs(H)<1e-12)continue;at=-nt/H,at>0&&at<1&&et.push(at);continue}var _t=H*H-4*nt*xt,yt=Math.sqrt(_t);if(!(_t<0)){var Ft=(-H+yt)/(2*xt);Ft>0&&Ft<1&&et.push(Ft);var Qt=(-H-yt)/(2*xt);Qt>0&&Qt<1&&et.push(Qt)}}for(var ee=et.length,Vt=ee,$t;ee--;)at=et[ee],$t=1-at,ot[0][ee]=$t*$t*$t*Mt+3*$t*$t*at*At+3*$t*at*at*Pt+at*at*at*Q,ot[1][ee]=$t*$t*$t*bt+3*$t*$t*at*rt+3*$t*at*at*z+at*at*at*gt;return ot[0][Vt]=Mt,ot[1][Vt]=bt,ot[0][Vt+1]=Q,ot[1][Vt+1]=gt,ot[0].length=ot[1].length=Vt+2,{min:{x:Math.min.apply(0,ot[0]),y:Math.min.apply(0,ot[1])},max:{x:Math.max.apply(0,ot[0]),y:Math.max.apply(0,ot[1])}}},M=function(Mt,bt,At,rt,Pt,z,Q,gt){if(!(Math.max(Mt,At)<Math.min(Pt,Q)||Math.min(Mt,At)>Math.max(Pt,Q)||Math.max(bt,rt)<Math.min(z,gt)||Math.min(bt,rt)>Math.max(z,gt))){var et=(Mt*rt-bt*At)*(Pt-Q)-(Mt-At)*(Pt*gt-z*Q),ot=(Mt*rt-bt*At)*(z-gt)-(bt-rt)*(Pt*gt-z*Q),xt=(Mt-At)*(z-gt)-(bt-rt)*(Pt-Q);if(!!xt){var H=et/xt,nt=ot/xt,at=+H.toFixed(2),q=+nt.toFixed(2);if(!(at<+Math.min(Mt,At).toFixed(2)||at>+Math.max(Mt,At).toFixed(2)||at<+Math.min(Pt,Q).toFixed(2)||at>+Math.max(Pt,Q).toFixed(2)||q<+Math.min(bt,rt).toFixed(2)||q>+Math.max(bt,rt).toFixed(2)||q<+Math.min(z,gt).toFixed(2)||q>+Math.max(z,gt).toFixed(2)))return{x:H,y:nt}}}},x=function(Mt,bt,At){return bt>=Mt.x&&bt<=Mt.x+Mt.width&&At>=Mt.y&&At<=Mt.y+Mt.height},m=function(Mt,bt,At,rt,Pt){if(Pt)return[["M",+Mt+ +Pt,bt],["l",At-Pt*2,0],["a",Pt,Pt,0,0,1,Pt,Pt],["l",0,rt-Pt*2],["a",Pt,Pt,0,0,1,-Pt,Pt],["l",Pt*2-At,0],["a",Pt,Pt,0,0,1,-Pt,-Pt],["l",0,Pt*2-rt],["a",Pt,Pt,0,0,1,Pt,-Pt],["z"]];var z=[["M",Mt,bt],["l",At,0],["l",0,rt],["l",-At,0],["z"]];return z.parsePathArray=b,z},S=function(Mt,bt,At,rt){return Mt===null&&(Mt=bt=At=rt=0),bt===null&&(bt=Mt.y,At=Mt.width,rt=Mt.height,Mt=Mt.x),{x:Mt,y:bt,width:At,w:At,height:rt,h:rt,x2:Mt+At,y2:bt+rt,cx:Mt+At/2,cy:bt+rt/2,r1:Math.min(At,rt)/2,r2:Math.max(At,rt)/2,r0:Math.sqrt(At*At+rt*rt)/2,path:m(Mt,bt,At,rt),vb:[Mt,bt,At,rt].join(" ")}},P=function(Mt,bt){return Mt=S(Mt),bt=S(bt),x(bt,Mt.x,Mt.y)||x(bt,Mt.x2,Mt.y)||x(bt,Mt.x,Mt.y2)||x(bt,Mt.x2,Mt.y2)||x(Mt,bt.x,bt.y)||x(Mt,bt.x2,bt.y)||x(Mt,bt.x,bt.y2)||x(Mt,bt.x2,bt.y2)||(Mt.x<bt.x2&&Mt.x>bt.x||bt.x<Mt.x2&&bt.x>Mt.x)&&(Mt.y<bt.y2&&Mt.y>bt.y||bt.y<Mt.y2&&bt.y>Mt.y)},A=function(Mt,bt,At,rt,Pt,z,Q,gt){t.isArray(Mt)||(Mt=[Mt,bt,At,rt,Pt,z,Q,gt]);var et=_.apply(null,Mt);return S(et.min.x,et.min.y,et.max.x-et.min.x,et.max.y-et.min.y)},O=function(Mt,bt,At,rt,Pt,z,Q,gt,et){var ot=1-et,xt=Math.pow(ot,3),H=Math.pow(ot,2),nt=et*et,at=nt*et,q=xt*Mt+H*3*et*At+ot*3*et*et*Pt+at*Q,_t=xt*bt+H*3*et*rt+ot*3*et*et*z+at*gt,yt=Mt+2*et*(At-Mt)+nt*(Pt-2*At+Mt),Ft=bt+2*et*(rt-bt)+nt*(z-2*rt+bt),Qt=At+2*et*(Pt-At)+nt*(Q-2*Pt+At),ee=rt+2*et*(z-rt)+nt*(gt-2*z+rt),Vt=ot*Mt+et*At,$t=ot*bt+et*rt,Me=ot*Pt+et*Q,me=ot*z+et*gt,le=90-Math.atan2(yt-Qt,Ft-ee)*180/Math.PI;return{x:q,y:_t,m:{x:yt,y:Ft},n:{x:Qt,y:ee},start:{x:Vt,y:$t},end:{x:Me,y:me},alpha:le}},L=function(Mt,bt,At){var rt=A(Mt),Pt=A(bt);if(!P(rt,Pt))return At?0:[];for(var z=g.apply(0,Mt),Q=g.apply(0,bt),gt=~~(z/8),et=~~(Q/8),ot=[],xt=[],H={},nt=At?0:[],at=0;at<gt+1;at++){var q=O.apply(0,Mt.concat(at/gt));ot.push({x:q.x,y:q.y,t:at/gt})}for(var _t=0;_t<et+1;_t++){var yt=O.apply(0,bt.concat(_t/et));xt.push({x:yt.x,y:yt.y,t:_t/et})}for(var Ft=0;Ft<gt;Ft++)for(var Qt=0;Qt<et;Qt++){var ee=ot[Ft],Vt=ot[Ft+1],$t=xt[Qt],Me=xt[Qt+1],me=Math.abs(Vt.x-ee.x)<.001?"y":"x",le=Math.abs(Me.x-$t.x)<.001?"y":"x",be=M(ee.x,ee.y,Vt.x,Vt.y,$t.x,$t.y,Me.x,Me.y);if(be){if(H[be.x.toFixed(4)]===be.y.toFixed(4))continue;H[be.x.toFixed(4)]=be.y.toFixed(4);var ze=ee.t+Math.abs((be[me]-ee[me])/(Vt[me]-ee[me]))*(Vt.t-ee.t),Xe=$t.t+Math.abs((be[le]-$t[le])/(Me[le]-$t[le]))*(Me.t-$t.t);ze>=0&&ze<=1&&Xe>=0&&Xe<=1&&(At?nt++:nt.push({x:be.x,y:be.y,t1:ze,t2:Xe}))}}return nt},W=function(Mt,bt,At){Mt=f(Mt),bt=f(bt);for(var rt,Pt,z,Q,gt,et,ot,xt,H,nt,at=At?0:[],q=0,_t=Mt.length;q<_t;q++){var yt=Mt[q];if(yt[0]==="M")rt=gt=yt[1],Pt=et=yt[2];else{yt[0]==="C"?(H=[rt,Pt].concat(yt.slice(1)),rt=H[6],Pt=H[7]):(H=[rt,Pt,rt,Pt,gt,et,gt,et],rt=gt,Pt=et);for(var Ft=0,Qt=bt.length;Ft<Qt;Ft++){var ee=bt[Ft];if(ee[0]==="M")z=ot=ee[1],Q=xt=ee[2];else{ee[0]==="C"?(nt=[z,Q].concat(ee.slice(1)),z=nt[6],Q=nt[7]):(nt=[z,Q,z,Q,ot,xt,ot,xt],z=ot,Q=xt);var Vt=L(H,nt,At);if(At)at+=Vt;else{for(var $t=0,Me=Vt.length;$t<Me;$t++)Vt[$t].segment1=q,Vt[$t].segment2=Ft,Vt[$t].bez1=H,Vt[$t].bez2=nt;at=at.concat(Vt)}}}}}return at},F=function(Mt,bt){return W(Mt,bt)};function K(Rt,Mt){var bt=[],At=[];function rt(Pt,z){if(Pt.length===1)bt.push(Pt[0]),At.push(Pt[0]);else{for(var Q=[],gt=0;gt<Pt.length-1;gt++)gt===0&&bt.push(Pt[0]),gt===Pt.length-2&&At.push(Pt[gt+1]),Q[gt]=[(1-z)*Pt[gt][0]+z*Pt[gt+1][0],(1-z)*Pt[gt][1]+z*Pt[gt+1][1]];rt(Q,z)}}return Rt.length&&rt(Rt,Mt),{left:bt,right:At.reverse()}}function V(Rt,Mt,bt){var At=[[Rt[1],Rt[2]]];bt=bt||2;var rt=[];Mt[0]==="A"?(At.push(Mt[6]),At.push(Mt[7])):Mt[0]==="C"?(At.push([Mt[1],Mt[2]]),At.push([Mt[3],Mt[4]]),At.push([Mt[5],Mt[6]])):Mt[0]==="S"||Mt[0]==="Q"?(At.push([Mt[1],Mt[2]]),At.push([Mt[3],Mt[4]])):At.push([Mt[1],Mt[2]]);for(var Pt=At,z=1/bt,Q=0;Q<bt-1;Q++){var gt=z/(1-z*Q),et=K(Pt,gt);rt.push(et.left),Pt=et.right}rt.push(Pt);var ot=rt.map(function(xt){var H=[];return xt.length===4&&(H.push("C"),H=H.concat(xt[2])),xt.length>=3&&(xt.length===3&&H.push("Q"),H=H.concat(xt[1])),xt.length===2&&H.push("L"),H=H.concat(xt[xt.length-1]),H});return ot}var k=function(Mt,bt,At){if(At===1)return[[].concat(Mt)];var rt=[];if(bt[0]==="L"||bt[0]==="C"||bt[0]==="Q")rt=rt.concat(V(Mt,bt,At));else{var Pt=[].concat(Mt);Pt[0]==="M"&&(Pt[0]="L");for(var z=0;z<=At-1;z++)rt.push(Pt)}return rt},Z=function(Mt,bt){if(Mt.length===1)return Mt;var At=Mt.length-1,rt=bt.length-1,Pt=At/rt,z=[];if(Mt.length===1&&Mt[0][0]==="M"){for(var Q=0;Q<rt-At;Q++)Mt.push(Mt[0]);return Mt}for(var gt=0;gt<rt;gt++){var et=Math.floor(Pt*gt);z[et]=(z[et]||0)+1}var ot=z.reduce(function(xt,H,nt){return nt===At?xt.concat(Mt[At]):xt.concat(k(Mt[nt],Mt[nt+1],H))},[]);return ot.unshift(Mt[0]),(bt[rt]==="Z"||bt[rt]==="z")&&ot.push("Z"),ot},X=function(Mt,bt){if(Mt.length!==bt.length)return!1;var At=!0;return t.each(Mt,function(rt,Pt){if(rt!==bt[Pt])return At=!1,!1}),At};function it(Rt,Mt,bt){var At=null,rt=bt;return Mt<rt&&(rt=Mt,At="add"),Rt<rt&&(rt=Rt,At="del"),{type:At,min:rt}}var ft=function(Mt,bt){var At=Mt.length,rt=bt.length,Pt,z,Q=0;if(At===0||rt===0)return null;for(var gt=[],et=0;et<=At;et++)gt[et]=[],gt[et][0]={min:et};for(var ot=0;ot<=rt;ot++)gt[0][ot]={min:ot};for(var xt=1;xt<=At;xt++){Pt=Mt[xt-1];for(var H=1;H<=rt;H++){z=bt[H-1],X(Pt,z)?Q=0:Q=1;var nt=gt[xt-1][H].min+1,at=gt[xt][H-1].min+1,q=gt[xt-1][H-1].min+Q;gt[xt][H]=it(nt,at,q)}}return gt},pt=function(Mt,bt){var At=ft(Mt,bt),rt=Mt.length,Pt=bt.length,z=[],Q=1,gt=1;if(At[rt][Pt]!==rt){for(var et=1;et<=rt;et++){var ot=At[et][et].min;gt=et;for(var xt=Q;xt<=Pt;xt++)At[et][xt].min<ot&&(ot=At[et][xt].min,gt=xt);Q=gt,At[et][Q].type&&z.push({index:et-1,type:At[et][Q].type})}for(var H=z.length-1;H>=0;H--)Q=z[H].index,z[H].type==="add"?Mt.splice(Q,0,[].concat(Mt[Q])):Mt.splice(Q,1)}rt=Mt.length;var nt=Pt-rt;if(rt<Pt)for(var at=0;at<nt;at++)Mt[rt-1][0]==="z"||Mt[rt-1][0]==="Z"?Mt.splice(rt-2,0,Mt[rt-2]):Mt.push(Mt[rt-1]),rt+=1;return Mt};function ut(Rt,Mt,bt){for(var At=[].concat(Rt),rt,Pt=1/(bt+1),z=It(Mt)[0],Q=1;Q<=bt;Q++)Pt*=Q,rt=Math.floor(Rt.length*Pt),rt===0?At.unshift([z[0]*Pt+Rt[rt][0]*(1-Pt),z[1]*Pt+Rt[rt][1]*(1-Pt)]):At.splice(rt,0,[z[0]*Pt+Rt[rt][0]*(1-Pt),z[1]*Pt+Rt[rt][1]*(1-Pt)]);return At}function It(Rt){var Mt=[];switch(Rt[0]){case"M":Mt.push([Rt[1],Rt[2]]);break;case"L":Mt.push([Rt[1],Rt[2]]);break;case"A":Mt.push([Rt[6],Rt[7]]);break;case"Q":Mt.push([Rt[3],Rt[4]]),Mt.push([Rt[1],Rt[2]]);break;case"T":Mt.push([Rt[1],Rt[2]]);break;case"C":Mt.push([Rt[5],Rt[6]]),Mt.push([Rt[1],Rt[2]]),Mt.push([Rt[3],Rt[4]]);break;case"S":Mt.push([Rt[3],Rt[4]]),Mt.push([Rt[1],Rt[2]]);break;case"H":Mt.push([Rt[1],Rt[1]]);break;case"V":Mt.push([Rt[1],Rt[1]]);break;default:}return Mt}var Nt=function(Mt,bt){if(Mt.length<=1)return Mt;for(var At,rt=0;rt<bt.length;rt++)if(Mt[rt][0]!==bt[rt][0])switch(At=It(Mt[rt]),bt[rt][0]){case"M":Mt[rt]=["M"].concat(At[0]);break;case"L":Mt[rt]=["L"].concat(At[0]);break;case"A":Mt[rt]=[].concat(bt[rt]),Mt[rt][6]=At[0][0],Mt[rt][7]=At[0][1];break;case"Q":if(At.length<2)if(rt>0)At=ut(At,Mt[rt-1],1);else{Mt[rt]=bt[rt];break}Mt[rt]=["Q"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;case"T":Mt[rt]=["T"].concat(At[0]);break;case"C":if(At.length<3)if(rt>0)At=ut(At,Mt[rt-1],2);else{Mt[rt]=bt[rt];break}Mt[rt]=["C"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;case"S":if(At.length<2)if(rt>0)At=ut(At,Mt[rt-1],1);else{Mt[rt]=bt[rt];break}Mt[rt]=["S"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;default:Mt[rt]=bt[rt]}return Mt};E.exports={parsePathString:r,parsePathArray:b,pathTocurve:f,pathToAbsolute:i,catmullRomToBezier:h,rectPath:m,fillPath:Z,fillPathByDiff:pt,formatPath:Nt,intersection:F}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=c,T.toRadian=h,T.equals=n;var t=T.EPSILON=1e-6,l=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,s=T.RANDOM=Math.random;function c(i){T.ARRAY_TYPE=l=i}var r=Math.PI/180;function h(i){return i*r}function n(i,a){return Math.abs(i-a)<=t*Math.max(1,Math.abs(i),Math.abs(a))}},function(E,T,e){var t=e(6),l=e(4),s=e(2);E.exports=function(r,h){for(var n=[],i={},a=0;a<r.length;a++){var o=r[a],u=o[h];t(u)||(l(u)||(u=[u]),s(u,function(f){i[f]||(n.push(f),i[f]=!0)}))}return n}},function(E,T,e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},l=e(4),s=function c(r){if((typeof r=="undefined"?"undefined":t(r))!=="object"||r===null)return r;var h=void 0;if(l(r)){h=[];for(var n=0,i=r.length;n<i;n++)t(r[n])==="object"&&r[n]!=null?h[n]=c(r[n]):h[n]=r[n]}else{h={};for(var a in r)t(r[a])==="object"&&r[a]!=null?h[a]=c(r[a]):h[a]=r[a]}return h};E.exports=s},function(E,T,e){var t=e(40),l=e(4),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u!==null&&t(u)?(t(h[o])||(h[o]={}),i<a?c(h[o],u,i+1,a):h[o]=n[o]):l(u)?(h[o]=[],h[o]=h[o].concat(u)):u!==void 0&&(h[o]=u)}}var r=function(){for(var n=new Array(arguments.length),i=n.length,a=0;a<i;a++)n[a]=arguments[a];for(var o=n[0],u=1;u<i;u++)c(o,n[u]);return o};E.exports=r},function(E,T,e){var t=e(2),l=e(21),s=function(r,h){if(!l(r))return r;var n=[];return t(r,function(i,a){h(i,a)&&n.push(i)}),n};E.exports=s},function(E,T,e){var t=e(86),l=e(21),s=e(15),c=function r(h,n){if(h===n)return!0;if(!h||!n||s(h)||s(n))return!1;if(l(h)||l(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t(h)||t(n)){var o=Object.keys(h),u=Object.keys(n);if(o.length!==u.length)return!1;for(var f=!0,v=0;v<o.length&&(f=r(h[o[v]],n[o[v]]),!!f);v++);return f}return!1};E.exports=c},function(E,T){var e=function(l,s,c){return l<s?s:l>c?c:l};E.exports=e},function(E,T,e){var t=e(348);t.translate=function(l,s,c){var r=new Array(9);return t.fromTranslation(r,c),t.multiply(l,r,s)},t.rotate=function(l,s,c){var r=new Array(9);return t.fromRotation(r,c),t.multiply(l,r,s)},t.scale=function(l,s,c){var r=new Array(9);return t.fromScaling(r,c),t.multiply(l,r,s)},E.exports=t},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t=function(s){return(typeof s=="undefined"?"undefined":e(s))==="object"&&s!==null};E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},l={merge:function(c,r,h,n){this.mergeDelete(c,r,h),this.mergeUpdate(c,n)},mergeDelete:function(c,r,h){var n=this;Object.keys(r).forEach(function(i){var a=t[h[i].name],o=c;h[i].viewId&&(o=c.views[h[i].viewId]),n[a]&&n[a](o,i,h[i].parentInfo.id)})},deleteAxis:function(c,r){!c||delete c.axises[r]},deleteTooltip:function(c){!c||delete c.tooltip},deleteCoord:function(c){!c||delete c.coord},deleteLegend:function(c,r){!c||delete c.legends[r]},deleteGuide:function(c){!c||delete c.guide},deleteGeom:function(c,r){!c||!c.geoms||delete c.geoms[r]},deleteLabel:function(c,r,h){!c||!c.geoms||!c.geoms[h]||delete c.geoms[h].label},deleteFacet:function(c){!c||delete c.facet},deleteTypedGuide:function(c,r){!c||!c.guide||delete c.guide.elements[r]},deleteView:function(c,r){!c||delete c.views[r]},mergeUpdate:function(c,r){this.mergeChart(c,r),this.mergeAxises(c,r),this.mergeCoord(c,r),this.mergeGeoms(c.geoms,r),this.mergeLegends(c.legends,r),this.mergeTooltip(c,r),this.mergeViews(c.views,r),this.mergeGuide(c.guide,r)},mergeChart:function(c,r){c.chart&&c.chart.updateProps&&(c.chart.props=c.chart.updateProps),r&&delete c.chart.g2Instance},mergeAxises:function(c,r){var h=c.axises;if(!h!=null)for(var n in h)h[n]&&h[n].updateProps&&(h[n].props=h[n].updateProps),r&&delete h[n].g2Instance},mergeTooltip:function(c,r){!c.tooltip||(r&&delete c.tooltip.g2Instance,c.tooltip.updateProps&&(c.tooltip.props=c.tooltip.updateProps))},mergeCoord:function(c,r){!c.coord||(r&&delete c.coord.g2Instance,c.coord.updateProps&&(c.coord.props=c.coord.updateProps))},mergeLegends:function(c,r){if(!!c){for(var h in c)if(c[h]){var n=c[h];r&&delete n.g2Instance,n.updateProps&&(n.props=n.updateProps)}}},mergeGeoms:function(c,r){if(c!=null)for(var h in c)c[h]&&(r&&(delete c[h].g2Instance,c[h].label&&c[h].label.g2Instance&&(c[h].label.updateProps&&(c[h].label.props=c[h].label.updateProps),delete c[h].label.g2Instance)),c[h].updateProps&&(c[h].props=c[h].updateProps))},mergeGuide:function(c,r){if(c!=null){var h=c.elements;for(var n in h)h[n]&&(r&&delete h[n].g2Instance,h[n].updateProps&&(h[n].props=h[n].updateProps))}},mergeView:function(c,r){!c||(r&&c.g2Instance&&delete c.g2Instance,c.updateProps&&(c.props=c.updateProps),this.mergeCoord(c,r),this.mergeAxises(c,r),this.mergeGeoms(c.geoms,r),this.mergeGuide(c.guide,r))},mergeViews:function(c,r){if(c!=null)for(var h in c)c[h]&&this.mergeView(c[h],r)}};T.default=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Prop=T.Util=void 0;var t=e(58),l=r(t),s=e(437),c=r(s);function r(h){return h&&h.__esModule?h:{default:h}}T.Util=l.default,T.Prop=c.default},function(E,T,e){"use strict";T.c=l,e.d(T,"e",function(){return s}),e.d(T,"d",function(){return c}),T.h=x,T.b=P,T.g=A,T.a=O,T.f=k;var t=e(90);function l(){}var s=.7,c=1/s,r="\\s*([+-]?\\d+)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),u=new RegExp("^rgba\\("+[r,r,r,h]+"\\)$"),f=new RegExp("^rgba\\("+[n,n,n,h]+"\\)$"),v=new RegExp("^hsl\\("+[h,n,n]+"\\)$"),b=new RegExp("^hsla\\("+[h,n,n,h]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.i(t.a)(l,x,{copy:function(it){return Object.assign(new this.constructor,this,it)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:_,formatRgb:M,toString:M});function g(){return this.rgb().formatHex()}function _(){return V(this).formatHsl()}function M(){return this.rgb().formatRgb()}function x(it){var ft,pt;return it=(it+"").trim().toLowerCase(),(ft=i.exec(it))?(pt=ft[1].length,ft=parseInt(ft[1],16),pt===6?m(ft):pt===3?new O(ft>>8&15|ft>>4&240,ft>>4&15|ft&240,(ft&15)<<4|ft&15,1):pt===8?S(ft>>24&255,ft>>16&255,ft>>8&255,(ft&255)/255):pt===4?S(ft>>12&15|ft>>8&240,ft>>8&15|ft>>4&240,ft>>4&15|ft&240,((ft&15)<<4|ft&15)/255):null):(ft=a.exec(it))?new O(ft[1],ft[2],ft[3],1):(ft=o.exec(it))?new O(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,1):(ft=u.exec(it))?S(ft[1],ft[2],ft[3],ft[4]):(ft=f.exec(it))?S(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,ft[4]):(ft=v.exec(it))?K(ft[1],ft[2]/100,ft[3]/100,1):(ft=b.exec(it))?K(ft[1],ft[2]/100,ft[3]/100,ft[4]):y.hasOwnProperty(it)?m(y[it]):it==="transparent"?new O(NaN,NaN,NaN,0):null}function m(it){return new O(it>>16&255,it>>8&255,it&255,1)}function S(it,ft,pt,ut){return ut<=0&&(it=ft=pt=NaN),new O(it,ft,pt,ut)}function P(it){return it instanceof l||(it=x(it)),it?(it=it.rgb(),new O(it.r,it.g,it.b,it.opacity)):new O}function A(it,ft,pt,ut){return arguments.length===1?P(it):new O(it,ft,pt,ut==null?1:ut)}function O(it,ft,pt,ut){this.r=+it,this.g=+ft,this.b=+pt,this.opacity=+ut}e.i(t.a)(O,A,e.i(t.b)(l,{brighter:function(it){return it=it==null?c:Math.pow(c,it),new O(this.r*it,this.g*it,this.b*it,this.opacity)},darker:function(it){return it=it==null?s:Math.pow(s,it),new O(this.r*it,this.g*it,this.b*it,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L,formatHex:L,formatRgb:W,toString:W}));function L(){return"#"+F(this.r)+F(this.g)+F(this.b)}function W(){var it=this.opacity;return it=isNaN(it)?1:Math.max(0,Math.min(1,it)),(it===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(it===1?")":", "+it+")")}function F(it){return it=Math.max(0,Math.min(255,Math.round(it)||0)),(it<16?"0":"")+it.toString(16)}function K(it,ft,pt,ut){return ut<=0?it=ft=pt=NaN:pt<=0||pt>=1?it=ft=NaN:ft<=0&&(it=NaN),new Z(it,ft,pt,ut)}function V(it){if(it instanceof Z)return new Z(it.h,it.s,it.l,it.opacity);if(it instanceof l||(it=x(it)),!it)return new Z;if(it instanceof Z)return it;it=it.rgb();var ft=it.r/255,pt=it.g/255,ut=it.b/255,It=Math.min(ft,pt,ut),Nt=Math.max(ft,pt,ut),Rt=NaN,Mt=Nt-It,bt=(Nt+It)/2;return Mt?(ft===Nt?Rt=(pt-ut)/Mt+(pt<ut)*6:pt===Nt?Rt=(ut-ft)/Mt+2:Rt=(ft-pt)/Mt+4,Mt/=bt<.5?Nt+It:2-Nt-It,Rt*=60):Mt=bt>0&&bt<1?0:Rt,new Z(Rt,Mt,bt,it.opacity)}function k(it,ft,pt,ut){return arguments.length===1?V(it):new Z(it,ft,pt,ut==null?1:ut)}function Z(it,ft,pt,ut){this.h=+it,this.s=+ft,this.l=+pt,this.opacity=+ut}e.i(t.a)(Z,k,e.i(t.b)(l,{brighter:function(it){return it=it==null?c:Math.pow(c,it),new Z(this.h,this.s,this.l*it,this.opacity)},darker:function(it){return it=it==null?s:Math.pow(s,it),new Z(this.h,this.s,this.l*it,this.opacity)},rgb:function(){var it=this.h%360+(this.h<0)*360,ft=isNaN(it)||isNaN(this.s)?0:this.s,pt=this.l,ut=pt+(pt<.5?pt:1-pt)*ft,It=2*pt-ut;return new O(X(it>=240?it-240:it+120,It,ut),X(it,It,ut),X(it<120?it+240:it-120,It,ut),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var it=this.opacity;return it=isNaN(it)?1:Math.max(0,Math.min(1,it)),(it===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(it===1?")":", "+it+")")}}));function X(it,ft,pt){return(it<60?ft+(pt-ft)*it/60:it<180?pt:it<240?ft+(pt-ft)*(240-it)/60:ft)*255}},function(E,T,e){"use strict";T.b=t,T.a=function(l,s,c){l.prototype=s.prototype=c,c.constructor=l};function t(l,s){var c=Object.create(l.prototype);for(var r in s)c[r]=s[r];return c}},function(E,T,e){"use strict";T.b=t;function t(l,s,c,r,h){var n=l*l,i=n*l;return((1-3*l+3*n-i)*s+(4-6*n+3*i)*c+(1+3*l+3*n-3*i)*r+i*h)/6}T.a=function(l){var s=l.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=l[r],n=l[r+1],i=r>0?l[r-1]:2*h-n,a=r<s-1?l[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(12),l=e(205),s=e(200),c=e(203),r=e(59),h=e(204),n=e(206),i=e(202);T.a=function(a,o){var u=typeof o,f;return o==null||u==="boolean"?e.i(i.a)(o):(u==="number"?r.a:u==="string"?(f=e.i(t.f)(o))?(o=f,l.a):n.a:o instanceof t.f?l.a:o instanceof Date?c.a:Array.isArray(o)?s.a:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?h.a:r.a)(a,o)}},function(E,T,e){"use strict";T.b=t;function t(l,s,c,r,h){var n=l*l,i=n*l;return((1-3*l+3*n-i)*s+(4-6*n+3*i)*c+(1+3*l+3*n-3*i)*r+i*h)/6}T.a=function(l){var s=l.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=l[r],n=l[r+1],i=r>0?l[r-1]:2*h-n,a=r<s-1?l[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(96),l=e(207),s=e(93),c=e(208),r=e(210),h=e(465),n=e(468),i=e(60);e.d(T,"b",function(){return i.a});var a=e(95),o=e(211),u=e(472),f=e(213);e.d(T,"d",function(){return f.a});var v=e(474);e.d(T,"a",function(){return v.a}),e.d(T,"e",function(){return v.b});var b=e(476),y=e(212);e.d(T,"c",function(){return y.a});var g=e(467),_=e(469),M=e(466),x=e(464),m=e(470),S=e(471)},function(E,T,e){"use strict";T.a=t,T.b=function(l,s){s||(s=[]);var c=l?Math.min(s.length,l.length):0,r=s.slice(),h;return function(n){for(h=0;h<c;++h)r[h]=l[h]*(1-n)+s[h]*n;return r}};function t(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}},function(E,T,e){"use strict";var t=e(12),l=e(212),s=e(207),c=e(210),r=e(60),h=e(211),n=e(213),i=e(209),a=e(95);T.a=function(o,u){var f=typeof u,v;return u==null||f==="boolean"?e.i(i.a)(u):(f==="number"?r.a:f==="string"?(v=e.i(t.f)(u))?(u=v,l.a):n.a:u instanceof t.f?l.a:u instanceof Date?c.a:e.i(a.a)(u)?a.b:Array.isArray(u)?s.a:typeof u.valueOf!="function"&&typeof u.toString!="function"||isNaN(u)?h.a:r.a)(o,u)}},function(E,T,e){"use strict";var t=e(98);T.a=function(l){var s=l+="",c=s.indexOf(":");return c>=0&&(s=l.slice(0,c))!=="xmlns"&&(l=l.slice(c+1)),t.a.hasOwnProperty(s)?{space:t.a[s],local:l}:l}},function(E,T,e){"use strict";e.d(T,"b",function(){return t});var t="http://www.w3.org/1999/xhtml";T.a={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(E,T,e){"use strict";e.d(T,"a",function(){return l}),T.b=a;var t={},l=null;if(typeof document!="undefined"){var s=document.documentElement;"onmouseenter"in s||(t={mouseenter:"mouseover",mouseleave:"mouseout"})}function c(o,u,f){return o=r(o,u,f),function(v){var b=v.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&o.call(this,v)}}function r(o,u,f){return function(v){var b=l;l=v;try{o.call(this,this.__data__,u,f)}finally{l=b}}}function h(o){return o.trim().split(/^|\s+/).map(function(u){var f="",v=u.indexOf(".");return v>=0&&(f=u.slice(v+1),u=u.slice(0,v)),{type:u,name:f}})}function n(o){return function(){var u=this.__on;if(!!u){for(var f=0,v=-1,b=u.length,y;f<b;++f)y=u[f],(!o.type||y.type===o.type)&&y.name===o.name?this.removeEventListener(y.type,y.listener,y.capture):u[++v]=y;++v?u.length=v:delete this.__on}}}function i(o,u,f){var v=t.hasOwnProperty(o.type)?c:r;return function(b,y,g){var _=this.__on,M,x=v(u,y,g);if(_){for(var m=0,S=_.length;m<S;++m)if((M=_[m]).type===o.type&&M.name===o.name){this.removeEventListener(M.type,M.listener,M.capture),this.addEventListener(M.type,M.listener=x,M.capture=f),M.value=u;return}}this.addEventListener(o.type,x,f),M={type:o.type,name:o.name,value:u,listener:x,capture:f},_?_.push(M):this.__on=[M]}}T.c=function(o,u,f){var v=h(o+""),b,y=v.length,g;if(arguments.length<2){var _=this.node().__on;if(_){for(var M=0,x=_.length,m;M<x;++M)for(b=0,m=_[M];b<y;++b)if((g=v[b]).type===m.type&&g.name===m.name)return m.value}return}for(_=u?i:n,f==null&&(f=!1),b=0;b<y;++b)this.each(_(v[b],u,f));return this};function a(o,u,f,v){var b=l;o.sourceEvent=l,l=o;try{return u.apply(f,v)}finally{l=b}}},function(E,T,e){"use strict";function t(){}T.a=function(l){return l==null?t:function(){return this.querySelector(l)}}},function(E,T,e){"use strict";var t=e(99);T.a=function(){for(var l=t.a,s;s=l.sourceEvent;)l=s;return l}},function(E,T,e){"use strict";T.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(104);e.d(T,"now",function(){return t.a}),e.d(T,"timer",function(){return t.b}),e.d(T,"timerFlush",function(){return t.c});var l=e(513);e.d(T,"timeout",function(){return l.a});var s=e(512);e.d(T,"interval",function(){return s.a})},function(E,T,e){"use strict";T.a=f,T.d=b,T.b=y,T.c=g;var t=0,l=0,s=0,c=1e3,r,h,n=0,i=0,a=0,o=typeof performance=="object"&&performance.now?performance:Date,u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(S){setTimeout(S,17)};function f(){return i||(u(v),i=o.now()+a)}function v(){i=0}function b(){this._call=this._time=this._next=null}b.prototype=y.prototype={constructor:b,restart:function(S,P,A){if(typeof S!="function")throw new TypeError("callback is not a function");A=(A==null?f():+A)+(P==null?0:+P),!this._next&&h!==this&&(h?h._next=this:r=this,h=this),this._call=S,this._time=A,m()},stop:function(){this._call&&(this._call=null,this._time=Infinity,m())}};function y(S,P,A){var O=new b;return O.restart(S,P,A),O}function g(){f(),++t;for(var S=r,P;S;)(P=i-S._time)>=0&&S._call.call(null,P),S=S._next;--t}function _(){i=(n=o.now())+a,t=l=0;try{g()}finally{t=0,x(),i=0}}function M(){var S=o.now(),P=S-n;P>c&&(a-=P,n=S)}function x(){for(var S,P=r,A,O=Infinity;P;)P._call?(O>P._time&&(O=P._time),S=P,P=P._next):(A=P._next,P._next=null,P=S?S._next=A:r=A);h=S,m(O)}function m(S){if(!t){l&&(l=clearTimeout(l));var P=S-i;P>24?(S<Infinity&&(l=setTimeout(_,S-o.now()-a)),s&&(s=clearInterval(s))):(s||(n=o.now(),s=setInterval(M,c)),t=1,u(_))}}},function(E,T,e){var t;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(l){"use strict";function s(){}var c=s.prototype,r=l.EventEmitter;function h(a,o){for(var u=a.length;u--;)if(a[u].listener===o)return u;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var u=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in u)u.hasOwnProperty(v)&&o.test(v)&&(f[v]=u[v])}else f=u[o]||(u[o]=[]);return f},c.flattenListeners=function(o){var u=[],f;for(f=0;f<o.length;f+=1)u.push(o[f].listener);return u},c.getListenersAsObject=function(o){var u=this.getListeners(o),f;return u instanceof Array&&(f={},f[o]=u),f||u};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,u){if(!i(u))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof u=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],u)===-1&&f[b].push(v?u:{listener:u,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,u){return this.addListener(o,{listener:u,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var u=0;u<o.length;u+=1)this.defineEvent(o[u]);return this},c.removeListener=function(o,u){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],u),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,u){return this.manipulateListeners(!1,o,u)},c.removeListeners=function(o,u){return this.manipulateListeners(!0,o,u)},c.manipulateListeners=function(o,u,f){var v,b,y=o?this.removeListener:this.addListener,g=o?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(v in u)u.hasOwnProperty(v)&&(b=u[v])&&(typeof b=="function"?y.call(this,v,b):g.call(this,v,b));else for(v=f.length;v--;)y.call(this,u,f[v]);return this},c.removeEvent=function(o){var u=typeof o,f=this._getEvents(),v;if(u==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,u){var f=this.getListenersAsObject(o),v,b,y,g,_;for(g in f)if(f.hasOwnProperty(g))for(v=f[g].slice(0),y=0;y<v.length;y++)b=v[y],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,u||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,u)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return l.EventEmitter=r,s},t=function(){return s}.call(l,e,l,E),t!==void 0&&(E.exports=t)})(this||{})},function(E,T,e){var t=0,l=e(2),s={values:e(79)};E.exports={isAdjust:function(r){return this.adjustNames.indexOf(r)>=0},_getDimValues:function(r){var h=this,n={},i=[];if(h.xField&&h.isAdjust("x")&&i.push(h.xField),h.yField&&h.isAdjust("y")&&i.push(h.yField),l(i,function(u){var f=s.values(r,u);f.sort(function(v,b){return v-b}),n[u]=f}),!h.yField&&h.isAdjust("y")){var a="y",o=[t,1];n[a]=o}return n},adjustData:function(r,h){var n=this,i=n._getDimValues(h);l(r,function(a,o){l(i,function(u,f){n.adjustDim(f,u,a,r.length,o)})})},getAdjustRange:function(r,h,n){var i=this,a=n.indexOf(h),o=n.length,u,f;return!i.yField&&i.isAdjust("y")?(u=0,f=1):o>1?(u=a===0?n[0]:n[a-1],f=a===o-1?n[o-1]:n[a+1],a!==0?u+=(h-u)/2:u-=(f-h)/2,a!==o-1?f-=(f-h)/2:f+=(h-n[o-2])/2):(u=h===0?0:h-.5,f=h===0?1:h+.5),{pre:u,next:f}},groupData:function(r,h){var n={};return l(r,function(i){var a=i[h];a===void 0&&(a=i[h]=t),n[a]||(n[a]=[]),n[a].push(i)}),n}}},function(E,T,e){var t=e(11),l=e(15),s=e(2),c=/rgba?\(([\s.,0-9]+)\)/;function r(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function h(b,y,g,_){var M=b[_]+(y[_]-b[_])*g;return M}function n(b){return"#"+i(b[0])+i(b[1])+i(b[2])}function i(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function a(b,y){(isNaN(y)||!t(y)||y<0)&&(y=0),y>1&&(y=1);var g=b.length-1,_=Math.floor(g*y),M=g*y-_,x=b[_],m=_===g?x:b[_+1],S=n([h(x,m,M,0),h(x,m,M,1),h(x,m,M,2)]);return S}function o(b){var y=[];return y.push(parseInt(b.substr(1,2),16)),y.push(parseInt(b.substr(3,2),16)),y.push(parseInt(b.substr(5,2),16)),y}var u={},f=null,v={toRGB:function(y){if(y[0]==="#"&&y.length===7)return y;f||(f=r());var g;if(u[y])g=u[y];else{f.style.color=y,g=document.defaultView.getComputedStyle(f,"").getPropertyValue("color");var _=c.exec(g),M=_[1].split(/\s*,\s*/);g=n(M),u[y]=g}return g},rgb2arr:o,gradient:function(y){var g=[];return l(y)&&(y=y.split("-")),s(y,function(_){_.indexOf("#")===-1&&(_=v.toRGB(_)),g.push(o(_))}),function(_){return a(g,_)}}};E.exports=v},function(E,T,e){var t=e(31),l=t.Group,s=e(3),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,l),s.augment(c,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){c.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var h=this,n=h.get("lineStyle"),i=h.get("items");i&&i.length&&(h._precessItems(i),h._drawGridLines(i,n))},_precessItems:function(h){var n=this,i;s.each(h,function(a,o){i&&n.get("alternateColor")&&n._drawAlternativeBg(a,i,o),i=a})},_drawGridLines:function(h,n){var i=this,a=this.get("type"),o,u,f,v,b=h.length;a==="line"||a==="polygon"?s.each(h,function(y,g){i.get("hideFirstLine")&&g===0||i.get("hideLastLine")&&g===b-1||(v=y.points,u=[],a==="line"?(u.push(["M",v[0].x,v[0].y]),u.push(["L",v[v.length-1].x,v[v.length-1].y])):s.each(v,function(_,M){M===0?u.push(["M",_.x,_.y]):u.push(["L",_.x,_.y])}),i._drawZeroLine(a,g)?f=s.mix({},i.get("zeroLineStyle"),{path:u}):f=s.mix({},n,{path:u}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=y._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))}):s.each(h,function(y,g){i.get("hideFirstLine")&&g===0||i.get("hideLastLine")&&g===b-1||(v=y.points,u=[],s.each(v,function(_,M){var x=_.radius;M===0?u.push(["M",_.x,_.y]):u.push(["A",x,x,0,0,_.flag,_.x,_.y])}),f=s.mix({},n,{path:u}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=y._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))})},_drawZeroLine:function(h,n){var i=this,a=i.get("tickValues");return!!(h==="line"&&a&&a[n]===0&&i.get("hightLightZero"))},_drawAlternativeBg:function(h,n,i){var a=this,o=a.get("alternateColor"),u,f,v;s.isString(o)?f=o:s.isArray(o)&&(f=o[0],v=o[1]),i%2==0?v&&(u=a._getBackItem(n.points,h.points,v)):f&&(u=a._getBackItem(n.points,h.points,f));var b=a.addShape("Path",{attrs:u});b.name="axis-grid-rect",b._id=h._id&&h._id.replace("grid","grid-rect"),b.set("coord",a.get("coord")),a.get("appendInfo")&&b.setSilent("appendInfo",a.get("appendInfo"))},_getBackItem:function(h,n,i){var a=[],o=this.get("type");if(o==="line")a.push(["M",h[0].x,h[0].y]),a.push(["L",h[h.length-1].x,h[h.length-1].y]),a.push(["L",n[n.length-1].x,n[n.length-1].y]),a.push(["L",n[0].x,n[0].y]),a.push(["Z"]);else if(o==="polygon"){s.each(h,function(g,_){_===0?a.push(["M",g.x,g.y]):a.push(["L",g.x,g.y])});for(var u=n.length-1;u>=0;u--)a.push(["L",n[u].x,n[u].y]);a.push(["Z"])}else{var f=h[0].flag;s.each(h,function(g,_){var M=g.radius;_===0?a.push(["M",g.x,g.y]):a.push(["A",M,M,0,0,g.flag,g.x,g.y])});for(var v=n.length-1;v>=0;v--){var b=n[v],y=b.radius;v===n.length-1?a.push(["M",b.x,b.y]):a.push(["A",y,y,0,0,f===1?0:1,b.x,b.y])}}return{fill:i,path:a}}}),E.exports=c},function(E,T,e){var t=e(3);E.exports={getFirstScale:function(s){var c;return t.each(s,function(r){if(r)return c=r,!1}),c}}},function(E,T,e){function t(y){return function(){var g=r(y),_;if(c()){var M=r(this).constructor;_=Reflect.construct(g,arguments,M)}else _=g.apply(this,arguments);return l(this,_)}}function l(y,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},r(y)}function h(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var n=e(3),i=n.DomUtil,a=e(36),o=e(254),u=e(255),f=e(253),v={scatter:o,map:u,treemap:f},b=function(y){h(_,y);var g=t(_);function _(){return y.apply(this,arguments)||this}var M=_.prototype;return M.getDefaultCfg=function(){var m=y.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},M.clear=function(){var m=this.get("group"),S=this.get("container");m&&!m.get("destroyed")&&m.clear(),S&&(S.innerHTML=""),y.prototype.clear.call(this)},M.destroy=function(){var m=this.get("group"),S=this.get("container");m.destroy||m.destroy(),S&&S.parentNode&&S.parentNode.removeChild(S),y.prototype.destroy.call(this)},M.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},M._dryDraw=function(){var m=this,S=m.get("items"),P=m.getLabels(),A=P.length;n.each(S,function(L,W){if(W<A){var F=P[W];m.changeLabel(F,L)}else{var K=m._addLabel(L,W);K&&(K._id=L._id,K.set("coord",L.coord))}});for(var O=A-1;O>=S.length;O--)P[O].remove();m._adjustLabels(),(m.get("labelLine")||!m.get("config"))&&m.drawLines()},M.draw=function(){this._dryDraw(),this.get("canvas").draw()},M.changeLabel=function(m,S){if(!!m)if(m.tagName){var P=this._createDom(S);m.innerHTML=P.innerHTML,this._setCustomPosition(S,m)}else m._id=S._id,m.attr("text",S.text),(m.attr("x")!==S.x||m.attr("y")!==S.y)&&(m.resetMatrix(),S.textStyle.rotate&&(m.rotateAtStart(S.textStyle.rotate),delete S.textStyle.rotate),m.attr(S))},M.show=function(){var m=this.get("group"),S=this.get("container");m&&m.show(),S&&(S.style.opacity=1)},M.hide=function(){var m=this.get("group"),S=this.get("container");m&&m.hide(),S&&(S.style.opacity=0)},M.drawLines=function(){var m=this,S=m.get("labelLine");typeof S=="boolean"&&m.set("labelLine",{});var P=m.get("lineGroup");!P||P.get("destroyed")?(P=m.get("group").addGroup({elCls:"x-line-group"}),m.set("lineGroup",P)):P.clear(),n.each(m.get("items"),function(A){m.lineToLabel(A,P)})},M.lineToLabel=function(m,S){var P=this;if(!(!P.get("config")&&!m.labelLine)){var A=m.labelLine||P.get("labelLine"),O=typeof m.capture=="undefined"?P.get("capture"):m.capture,L=A.path;if(L&&n.isFunction(A.path)&&(L=A.path(m)),!L){var W=m.start||{x:m.x-m._offset.x,y:m.y-m._offset.y};L=[["M",W.x,W.y],["L",m.x,m.y]]}var F=m.color;F||(m.textStyle&&m.textStyle.fill?F=m.textStyle.fill:F="#000");var K=S.addShape("path",{attrs:n.mix({path:L,fill:null,stroke:F},A),capture:O});K.name=P.get("name"),K._id=m._id&&m._id.replace("glabel","glabelline"),K.set("coord",P.get("coord"))}},M._adjustLabels=function(){var m=this,S=m.get("type"),P=m.getLabels(),A=m.get("shapes"),O=v[S];S==="default"||!O||O(P,A)},M.getLabels=function(){var m=this.get("container");return m?n.toArray(m.childNodes):this.get("group").get("children")},M._addLabel=function(m,S){var P=m;return this.get("config")&&(P=this._getLabelCfg(m,S)),this._createText(P)},M._getLabelCfg=function(m,S){var P=this.get("textStyle")||{},A=this.get("formatter"),O=this.get("htmlTemplate");if(!n.isObject(m)){var L=m;m={},m.text=L}n.isFunction(P)&&(P=P(m.text,m,S)),A&&(m.text=A(m.text,m,S)),O&&(m.useHtml=!0,n.isFunction(O)&&(m.text=O(m.text,m,S))),n.isNil(m.text)&&(m.text=""),m.text=m.text+"";var W=n.mix({},m,{textStyle:P},{x:m.x||0,y:m.y||0});return W},M._init=function(){if(!this.get("group")){var m=this.get("canvas").addGroup({id:"label-group"});this.set("group",m)}},M.initHtmlContainer=function(){var m=this.get("container");if(m)n.isString(m)&&(m=document.getElementById(m),m&&this.set("container",m));else{var S=this.get("containerTpl"),P=this.get("canvas").get("el").parentNode;m=i.createDom(S),P.style.position="relative",P.appendChild(m),this.set("container",m)}return m},M._createText=function(m){var S=n.deepMix({},m),P=this.get("container"),A=typeof S.capture=="undefined"?this.get("capture"):S.capture,O;if(S.useHtml||S.htmlTemplate){P||(P=this.initHtmlContainer());var L=this._createDom(S);P.appendChild(L),this._setCustomPosition(S,L)}else{var W=this.get("name"),F=S.point,K=this.get("group");delete S.point;var V=S.rotate;return S.textStyle&&(S.textStyle.rotate&&(V=S.textStyle.rotate,delete S.textStyle.rotate),S=n.mix({x:S.x,y:S.y,textAlign:S.textAlign,text:S.text},S.textStyle)),O=K.addShape("text",{attrs:S,capture:A}),V&&(Math.abs(V)>Math.PI*2&&(V=V/180*Math.PI),O.transform([["t",-S.x,-S.y],["r",V],["t",S.x,S.y]])),O.setSilent("origin",F||S),O.name=W,this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo")),O}},M._createDom=function(m){var S=this.get("itemTpl"),P=n.substitute(S,{text:m.text});return i.createDom(P)},M._setCustomPosition=function(m,S){var P=m.textAlign||"left",A=m.y,O=m.x,L=i.getOuterWidth(S),W=i.getOuterHeight(S);A=A-W/2,P==="center"?O=O-L/2:P==="right"&&(O=O-L),S.style.top=parseInt(A,10)+"px",S.style.left=parseInt(O,10)+"px"},_}(a);E.exports=b},function(E,T){var e=function(){function t(){this.bitmap=[]}var l=t.prototype;return l.hasGap=function(c){for(var r=!0,h=this.bitmap,n=Math.floor(c.minX),i=Math.ceil(c.maxX),a=Math.floor(c.minY),o=Math.ceil(c.maxY)-1,u=n;u<i;u++){if(!h[u]){h[u]=[];continue}if(u===n||u===i-1){for(var f=a;f<=o;f++)if(h[u][f]){r=!1;break}}else if(h[u][a]||h[u][o]){r=!1;break}}return r},l.fillGap=function(c){for(var r=this.bitmap,h=Math.floor(c.minX),n=Math.ceil(c.maxX)-1,i=Math.floor(c.minY),a=Math.ceil(c.maxY)-1,o=h;o<=n;o++){for(var u=i;u<a;u+=8)r[o]||(r[o]=[]),r[o][u]=!0;r[o][a]=!0}for(var f=i;f<=a;f++)r[h][f]=!0,r[n][f]=!0},t}();E.exports=e},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(36),a=e(19),o=a.FONT_FAMILY,u=function(f){h(y,f);var v=t(y),b=y.prototype;b.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function y(g){var _;return _=f.call(this,g)||this,_._init(),_.beforeRender(),_.render(),_._adjustPositionOffset(),_._bindEvents(),_}return b._init=function(){var _=this.get("group"),M=this.get("container");this.set("canvas",M.get("canvas"));var x=this.get("position");_||(_=M.addGroup({x:0-x[0],y:0-x[1]})),this.set("group",_)},b._adjustPositionOffset=function(){var _=this.get("position"),M=this.get("offset"),x=this.get("offsetX"),m=this.get("offsetY");if(!n.isArray(M)){var S=this.get("layout");M=S==="vertical"?[M,0]:[0,M]}x&&(M[0]=x),m&&(M[1]=m);var P=this.get("group").getBBox();this.move(-P.minX+_[0]+M[0],-P.minY+_[1]+M[1])},b.beforeRender=function(){var _=this.get("group"),M=_.addGroup();this.set("itemsGroup",M)},b.render=function(){this._renderTitle()},b._renderTitle=function(){var _=this.get("title"),M=this.get("titleGap");if(M=M||0,_&&_.text){var x=this.get("group"),m=x.addShape("text",{attrs:n.mix({x:0,y:0-M,fill:"#333",textBaseline:"middle",fontFamily:o},_)});m.name="legend-title",this.get("appendInfo")&&m.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",m)}},b.getCheckedCount=function(){var _=this.get("itemsGroup"),M=_.get("children"),x=n.filter(M,function(m){return m.get("checked")});return x.length},b.setItems=function(_){this.set("items",_),this.clear(),this.render()},b.addItem=function(_){var M=this.get("items");M.push(_),this.clear(),this.render()},b.clear=function(){var _=this.get("itemsGroup");_.clear();var M=this.get("group");M.clear(),this.beforeRender()},b.destroy=function(){var _=this.get("group");_&&_.destroy(),this._attrs={},this.removeAllListeners(),f.prototype.destroy.call(this)},b.getWidth=function(){var _=this.get("group").getBBox();return _.width},b.getHeight=function(){var _=this.get("group").getBBox();return _.height},b.move=function(_,M){this.get("group").move(_,M)},b.draw=function(){this.get("canvas").draw()},y}(i);E.exports=u},function(E,T,e){function t(A){return function(){var O=r(A),L;if(c()){var W=r(this).constructor;L=Reflect.construct(O,arguments,W)}else L=O.apply(this,arguments);return l(this,L)}}function l(A,O){return O&&(typeof O=="object"||typeof O=="function")?O:s(A)}function s(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}function r(A){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},r(A)}function h(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,A.__proto__=O}var n=e(3),i=e(114),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f=n.Group,v="g2-legend",b="g2-legend-title",y="g2-legend-list",g="g2-legend-list-item",_="g2-legend-text",M="g2-legend-marker";function x(A,O){return A.getElementsByClassName(O)[0]}function m(A,O){var L=A.className;return n.isNil(L)||(L=L.split(" "),L.indexOf(O)>-1)?A:A.parentNode?A.parentNode.className===v?A.parentNode:m(A.parentNode,O):null}function S(A,O){var L=null,W=O instanceof f?O.get("value"):O;return n.each(A,function(F){if(F.value===W)return L=F,!1}),L}var P=function(A){h(L,A);var O=t(L);function L(){return A.apply(this,arguments)||this}var W=L.prototype;return W.getDefaultCfg=function(){var K=A.prototype.getDefaultCfg.call(this);return n.mix({},K,{type:"category-legend",container:null,containerTpl:'<div class="'+v+'"><h4 class="'+b+'"></h4><ul class="'+y+'"></ul></div>',itemTpl:'<li class="'+g+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+M+'" style="background-color:{color};"></i><span class="'+_+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:o},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},W._init=function(){},W.beforeRender=function(){},W.render=function(){this._renderHTML()},W._bindEvents=function(){var K=this,V=this.get("legendWrapper"),k=x(V,y);this.get("hoverable")&&(k.onmousemove=function(Z){return K._onMousemove(Z)},k.onmouseout=function(Z){return K._onMouseleave(Z)}),this.get("clickable")&&(k.onclick=function(Z){return K._onClick(Z)})},W._onMousemove=function(K){var V=this.get("items"),k=K.target,Z=k.className;if(Z=Z.split(" "),!(Z.indexOf(v)>-1||Z.indexOf(y)>-1)){var X=m(k,g),it=S(V,X.getAttribute("data-value"));it?(this.deactivate(),this.activate(X.getAttribute("data-value")),this.emit("itemhover",{item:it,currentTarget:X,checked:it.checked})):it||(this.deactivate(),this.emit("itemunhover",K))}},W._onMouseleave=function(K){this.deactivate(),this.emit("itemunhover",K)},W._onClick=function(K){var V=this,k=this.get("legendWrapper"),Z=x(k,y),X=this.get("unCheckColor"),it=this.get("items"),ft=this.get("selectedMode"),pt=Z.childNodes,ut=K.target,It=ut.className;if(It=It.split(" "),!(It.indexOf(v)>-1||It.indexOf(y)>-1)){var Nt=m(ut,g),Rt=x(Nt,_),Mt=x(Nt,M),bt=S(it,Nt.getAttribute("data-value"));if(!!bt){var At=Nt.className,rt=Nt.getAttribute("data-color");if(ft==="single")bt.checked=!0,n.each(pt,function(Q){if(Q!==Nt){var gt=x(Q,M);gt.style.backgroundColor=X,Q.className=Q.className.replace("checked","unChecked"),Q.style.color=X;var et=S(it,Q.getAttribute("data-value"));et.checked=!1}else Rt&&(Rt.style.color=V.get("textStyle").fill),Mt&&(Mt.style.backgroundColor=rt),Nt.className=At.replace("unChecked","checked")});else{var Pt=At.indexOf("checked")!==-1,z=0;if(n.each(pt,function(Q){Q.className.indexOf("checked")!==-1&&z++}),!this.get("allowAllCanceled")&&Pt&&z===1){this.emit("clicklastitem",{item:bt,currentTarget:Nt,checked:ft==="single"?!0:bt.checked});return}bt.checked=!bt.checked,Pt?(Mt&&(Mt.style.backgroundColor=X),Nt.className=At.replace("checked","unChecked"),Nt.style.color=X):(Mt&&(Mt.style.backgroundColor=rt),Nt.className=At.replace("unChecked","checked"),Nt.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:bt,currentTarget:Nt,checked:ft==="single"?!0:bt.checked})}}},W.activate=function(K){var V=this,k=this,Z=k.get("items"),X=S(Z,K),it=k.get("legendWrapper"),ft=x(it,y),pt=ft.childNodes;pt.forEach(function(ut){var It=x(ut,M),Nt=S(Z,ut.getAttribute("data-value"));if(V.get("highlight")){if(Nt===X&&Nt.checked){It.style.border="1px solid #333";return}}else Nt===X?It.style.opacity=k.get("activeOpacity"):Nt.checked&&(It.style.opacity=k.get("inactiveOpacity"))})},W.deactivate=function(){var K=this,V=this,k=V.get("legendWrapper"),Z=x(k,y),X=Z.childNodes;X.forEach(function(it){var ft=x(it,M);K.get("highlight")?ft.style.border="1px solid #fff":ft.style.opacity=V.get("inactiveOpacity")})},W._renderHTML=function(){var K=this,V=this.get("container"),k=this.get("title"),Z=this.get("containerTpl"),X=u.createDom(Z),it=x(X,b),ft=x(X,y),pt=this.get("unCheckColor"),ut=n.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:o,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:o},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(V)||typeof V=="string"&&V.constructor===String){var It=V.replace("#","");V=document.getElementById(It),V.appendChild(X)}else{var Nt=this.get("position"),Rt={};Nt==="left"||Nt==="right"?Rt={maxHeight:(this.get("maxLength")||V.offsetHeight)+"px"}:Rt={maxWidth:(this.get("maxLength")||V.offsetWidth)+"px"},u.modifyCSS(X,n.mix({},ut.CONTAINER_CLASS,Rt,this.get(v))),V.appendChild(X)}u.modifyCSS(ft,n.mix({},ut.LIST_CLASS,this.get(y))),it&&(k&&k.text?(it.innerHTML=k.text,u.modifyCSS(it,n.mix({},ut.TITLE_CLASS,this.get(b),k))):X.removeChild(it));var Mt=this.get("items"),bt=this.get("itemTpl"),At=this.get("position"),rt=this.get("layout"),Pt=At==="right"||At==="left"||rt==="vertical"?"block":"inline-block",z=n.mix({},ut.LIST_ITEM_CLASS,{display:Pt},this.get(g)),Q=n.mix({},ut.MARKER_CLASS,this.get(M));if(n.each(Mt,function(xt,H){var nt=xt.checked,at=K._formatItemValue(xt.value),q=xt.marker.fill||xt.marker.stroke,_t=nt?q:pt,yt;n.isFunction(bt)?yt=bt(at,_t,nt,H):yt=bt;var Ft=n.substitute(yt,n.mix({},xt,{index:H,checked:nt?"checked":"unChecked",value:at,color:_t,originColor:q,originValue:xt.value.replace(/\"/g,"&quot;")})),Qt=u.createDom(Ft);Qt.style.color=K.get("textStyle").fill;var ee=x(Qt,M),Vt=x(Qt,_);if(u.modifyCSS(Qt,z),ee&&u.modifyCSS(ee,Q),nt||(Qt.style.color=pt,ee&&(ee.style.backgroundColor=pt)),ft.appendChild(Qt),K.get("abridgeText")){var $t=at,Me=Qt.offsetWidth,me=K.get("textStyle").fontSize;isNaN(me)&&(me.indexOf("pt")!==-1?me=parseFloat(me.substr(0,me.length-2))*1/72*96:me.indexOf("px")!==-1&&(me=parseFloat(me.substr(0,me.length-2))));var le=me*$t.length,be=Math.floor(Me/me);Me<2*me?$t="":Me<le&&be>1&&($t=$t.substr(0,be-1)+"..."),Vt.innerText=$t,Qt.addEventListener("mouseover",function(){var ze=x(X.parentNode,"textTip");ze.style.display="block",ze.style.left=Qt.offsetLeft+Qt.offsetWidth+"px",ze.style.top=Qt.offsetTop+15+"px",ze.innerText=at}),Qt.addEventListener("mouseout",function(){var ze=x(X.parentNode,"textTip");ze.style.display="none"})}}),this.get("abridgeText")){var gt=this.get("tipTpl"),et=u.createDom(gt),ot=this.get("tipStyle");u.modifyCSS(et,ot),X.parentNode.appendChild(et),et.addEventListener("mouseover",function(){et.style.display="none"})}this.set("legendWrapper",X)},W._adjustPositionOffset=function(){var K=this.get("autoPosition");if(K!==!1){var V=this.get("position"),k=this.get("offset"),Z=this.get("offsetX"),X=this.get("offsetY");Z&&(k[0]=Z),X&&(k[1]=X);var it=this.get("legendWrapper");it.style.left=V[0]+"px",it.style.top=V[1]+"px",it.style.marginLeft=k[0]+"px",it.style.marginTop=k[1]+"px"}},W.getWidth=function(){return u.getOuterWidth(this.get("legendWrapper"))},W.getHeight=function(){return u.getOuterHeight(this.get("legendWrapper"))},W.move=function(K,V){/^\#/.test(this.get("container"))?A.prototype.move.call(this,K,V):(u.modifyCSS(this.get("legendWrapper"),{left:K+"px",top:V+"px"}),this.set("x",K),this.set("y",V))},W.destroy=function(){var K=this.get("legendWrapper");K&&K.parentNode&&K.parentNode.removeChild(K),A.prototype.destroy.call(this)},L}(i);E.exports=P},function(E,T,e){function t(g){return function(){var _=r(g),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return l(this,M)}}function l(g,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(g)}function h(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var n=e(3),i=e(112),a=e(19),o=a.FONT_FAMILY,u=n.Event,f=n.Group;function v(g,_){var M=null,x=_ instanceof f||_.name==="legendGroup"?_.get("value"):_;return n.each(g,function(m){if(m.value===x)return M=m,!1}),M}function b(g,_){return g.findBy(function(M){return M.name===_})}var y=function(g){h(M,g);var _=t(M);function M(){return g.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=g.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},x.render=function(){g.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},x._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",n.wrapBehavior(this,"_onClick"))},x._getLegendItem=function(S){var P=S.get("parent");return P&&P.name==="legendGroup"?P:null},x.activate=function(S){var P=this,A=this,O=A.get("itemsGroup"),L=O.get("children"),W=void 0;L.forEach(function(F){if(W=b(F,"legend-marker"),!!W){var K=F.get("checked");P.get("highlight")?F.get("value")===S&&K?W.attr("stroke","#333"):W.attr("stroke",null):F.get("value")===S&&W.attr("fillOpacity",A.get("activeOpacity"))}}),this.get("canvas").draw()},x.deactivate=function(){var S=this,P=this,A=P.get("itemsGroup"),O=A.get("children"),L=void 0,W=this.get("unCheckColor");O.forEach(function(F){if(L=b(F,"legend-marker"),!!L)if(S.get("highlight")){var K=L.get("oriStroke"),V=F.get("checked");K&&!V?K=W:K="",L.attr("stroke",K)}else L.attr("fillOpacity",P.get("inactiveOpacity"))}),this.get("canvas").draw()},x._onMousemove=function(S){var P=this._getLegendItem(S.currentTarget);if(P&&P.get("checked")){var A=this.get("items"),O=new u("itemhover",S,!0,!0);O.item=v(A,P),O.checked=P.get("checked"),O.currentTarget=S.currentTarget,this.deactivate(),this.activate(P.get("value")),this.emit("itemhover",O)}else this.deactivate(),this.emit("itemunhover",S);this.get("canvas").draw()},x._onMouseleave=function(S){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",S)},x._onClick=function(S){var P=this._getLegendItem(S.currentTarget),A=this.get("items");if(P&&!P.get("destroyed")){var O=P.get("checked"),L=this.get("selectedMode"),W=v(A,P),F=new u("itemclick",S,!0,!0);if(F.item=W,F.currentTarget=P,F.appendInfo=S.currentTarget.get("appendInfo"),F.checked=L==="single"?!0:!O,!this.get("allowAllCanceled")&&O&&this.getCheckedCount()===1){this.emit("clicklastitem",F);return}var K=this.get("unCheckColor"),V=this.get("textStyle").fill,k=void 0,Z=void 0,X=void 0;if(L==="single"){var it=this.get("itemsGroup"),ft=it.get("children");n.each(ft,function(pt){k=b(pt,"legend-marker"),Z=b(pt,"legend-text"),X=b(pt,"legend-item"),pt!==P?(k.attr("fill")&&k.attr("fill",K),k.attr("stroke")&&k.attr("stroke",K),Z.attr("fill",K),k.setSilent("checked",!1),Z.setSilent("checked",!1),X.setSilent("checked",!1),pt.setSilent("checked",!1)):(k.attr("fill")&&W&&W.marker&&k.attr("fill",W.marker.fill),k.attr("stroke")&&W&&W.marker&&k.attr("stroke",W.marker.stroke),Z.attr("fill",V),k.setSilent("checked",!0),Z.setSilent("checked",!0),X.setSilent("checked",!0),pt.setSilent("checked",!0))})}else k=b(P,"legend-marker"),Z=b(P,"legend-text"),X=b(P,"legend-item"),k.attr("fill")&&W&&W.marker&&k.attr("fill",O?K:W.marker.fill),k.attr("stroke")&&W&&W.marker&&k.attr("stroke",O?K:W.marker.stroke),Z.attr("fill",O?K:V),P.setSilent("checked",!O),k.setSilent("checked",!O),Z.setSilent("checked",!O),X.setSilent("checked",!O);this.emit("itemclick",F)}this.get("canvas").draw()},x._renderItems=function(){var S=this,P=this.get("items");if(this.get("reversed")&&P.reverse(),n.each(P,function(W,F){S._addItem(W,F)}),this.get("highlight")){var A=this.get("itemsGroup"),O=A.get("children"),L=void 0;O.forEach(function(W){L=b(W,"legend-marker");var F=L.get("oriStroke");F||(L.attr("stroke")?L.set("oriStroke",L.attr("stroke")):L.set("oriStroke",""))})}},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x._getNextX=function(){var S=this.get("layout"),P=this.get("itemGap"),A=this.get("itemsGroup"),O=this.get("itemWidth"),L=A.get("children"),W=0;return S==="horizontal"&&n.each(L,function(F){W+=(O||F.getBBox().width)+P}),W},x._getNextY=function(){var S=this.get("itemMarginBottom"),P=this.get("titleShape")?this.get("titleGap"):0,A=this.get("layout"),O=this.get("itemsGroup"),L=this.get("titleShape"),W=O.get("children"),F=P;return L&&(F+=L.getBBox().height),A==="vertical"&&n.each(W,function(K){F+=K.getBBox().height+S}),F},x._addItem=function(S){var P=this.get("itemsGroup"),A=this._getNextX(),O=this._getNextY(),L=this.get("unCheckColor"),W=P.addGroup({x:A,y:O,value:S.value,checked:S.checked});W.set("viewId",this.get("viewId"));var F=this.get("textStyle"),K=this.get("_wordSpaceing"),V=0;if(S.marker){var k=n.mix({},S.marker,{x:S.marker.radius+A,y:O});S.checked||(k.fill&&(k.fill=L),k.stroke&&(k.stroke=L));var Z=W.addShape("marker",{type:"marker",attrs:k});Z.attr("cursor","pointer"),Z.name="legend-marker",V+=Z.getBBox().width+K}var X=n.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},F,{x:V+A,y:O,text:this._formatItemValue(S.value)});S.checked||n.mix(X,{fill:L});var it=W.addShape("text",{attrs:X});it.attr("cursor","pointer"),it.name="legend-text",this.get("appendInfo")&&it.setSilent("appendInfo",this.get("appendInfo"));var ft=W.getBBox(),pt=this.get("itemWidth"),ut=W.addShape("rect",{attrs:{x:A,y:O-ft.height/2,fill:"#fff",fillOpacity:0,width:pt||ft.width,height:ft.height}});return ut.attr("cursor","pointer"),ut.setSilent("origin",S),ut.name="legend-item",this.get("appendInfo")&&ut.setSilent("appendInfo",this.get("appendInfo")),W.name="legendGroup",W},x._adjustHorizontal=function(){var S=this.get("itemsGroup"),P=S.get("children"),A=this.get("maxLength"),O=this.get("itemGap"),L=this.get("itemMarginBottom"),W=this.get("titleShape")?this.get("titleGap"):0,F=0,K=0,V=void 0,k=void 0,Z=void 0,X=this.get("itemWidth");S.getBBox().width>A&&n.each(P,function(it){Z=it.getBBox(),V=X||Z.width,k=Z.height+L,A-K<V&&(F++,K=0),it.move(K,F*k+W),K+=V+O})},x._adjustVertical=function(){var S=this.get("itemsGroup"),P=this.get("titleShape"),A=S.get("children"),O=this.get("maxLength"),L=this.get("itemGap"),W=this.get("itemMarginBottom"),F=this.get("titleGap"),K=P?P.getBBox().height+F:0,V=this.get("itemWidth"),k=K,Z=void 0,X=void 0,it=void 0,ft=0,pt=0;S.getBBox().height>O&&n.each(A,function(ut){it=ut.getBBox(),Z=it.width,X=it.height,V?ft=V+L:Z>ft&&(ft=Z+L),O-k<X?(k=K,pt+=ft,ut.move(pt,K)):ut.move(pt,k),k+=X+W})},x._adjustItems=function(){var S=this.get("layout");S==="horizontal"?this._adjustHorizontal():this._adjustVertical()},x.getWidth=function(){return g.prototype.getWidth.call(this)},x.getHeight=function(){return g.prototype.getHeight.call(this)},x.move=function(S,P){g.prototype.move.call(this,S,P)},M}(i);E.exports=y},function(E,T,e){function t(M){return function(){var x=r(M),m;if(c()){var S=r(this).constructor;m=Reflect.construct(x,arguments,S)}else m=x.apply(this,arguments);return l(this,m)}}function l(M,x){return x&&(typeof x=="object"||typeof x=="function")?x:s(M)}function s(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}function r(M){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(M)}function h(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var n=e(31),i=e(116),a=e(117),o=e(118),u=e(68),f=e(3),v=e(19),b=v.FONT_FAMILY,y=f.DomUtil,g=f.MatrixUtil,_=function(M){h(S,M);var x=t(S),m=S.prototype;m.getDefaultCfg=function(){var A=M.prototype.getDefaultCfg.call(this);return f.mix({},A,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:b,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function S(P){var A;A=M.call(this,P)||this,f.assign(s(A),o),f.assign(s(A),a);var O=A.get("crosshairs");if(O){var L=O.type==="rect"?A.get("backPlot"):A.get("frontPlot"),W=new i(f.mix({plot:L,plotRange:A.get("plotRange"),canvas:A.get("canvas")},A.get("crosshairs")));W.hide(),A.set("crosshairGroup",W)}return A._init_(),A.get("items")&&A.render(),A}return m._init_=function(){var A=this,O=A.get("padding"),L=A.get("frontPlot"),W=L.addGroup({capture:!1});A.set("markerGroup",W);var F=L.addGroup();F.hide(),A.set("container",F);var K=F.addShape("rect",{attrs:f.mix({},A.get("boardStyle"))});A.set("board",K);var V=A.get("titleStyle");if(A.get("showTitle")){var k=F.addShape("text",{attrs:f.mix({x:O.left,y:O.top},V)});A.set("titleShape",k),k.name="tooltip-title"}var Z=F.addGroup();Z.move(O.left,O.top+V.lineHeight+V.padding),A.set("itemsGroup",Z)},m.render=function(){var A=this;A.clear();var O=A.get("container"),L=A.get("board"),W=A.get("showTitle"),F=A.get("titleContent"),K=this.get("titleShape"),V=this.get("itemsGroup"),k=A.get("items"),Z=A.get("padding");if(K&&W&&K.attr("text",F),V){var X=A.get("itemGap"),it=0,ft=0;f.each(k,function(Nt){var Rt=A._addItem(Nt);Rt.move(it,ft),V.add(Rt);var Mt=Rt.getBBox().height;ft+=Mt+X})}var pt=O.getBBox(),ut=pt.width+Z.right,It=pt.height+Z.bottom;L.attr("width",ut),L.attr("height",It),A._alignToRight(ut)},m.clear=function(){var A=this.get("titleShape"),O=this.get("itemsGroup"),L=this.get("board");A.text="",O.clear(),L.attr("width",0),L.attr("height",0)},m.show=function(){var A=this.get("container");A.show();var O=this.get("crosshairGroup");O&&O.show();var L=this.get("markerGroup");L&&L.show(),M.prototype.show.call(this),this.get("canvas").draw()},m.hide=function(){var A=this.get("container");A.hide();var O=this.get("crosshairGroup");O&&O.hide();var L=this.get("markerGroup");L&&L.hide(),M.prototype.hide.call(this),this.get("canvas").draw()},m.destroy=function(){var A=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var L=this.get("markerGroup");L&&L.remove(),M.prototype.destroy.call(this),A.remove()},m.setPosition=function(A,O,L){var W=this.get("container"),F=this.get("canvas").get("el"),K=y.getWidth(F),V=y.getHeight(F),k=W.getBBox(),Z=k.width,X=k.height,it=A,ft=O,pt;if(this.get("position")){var ut=k.width,It=k.height;pt=this._calcTooltipPosition(A,O,this.get("position"),ut,It,L),A=pt[0],O=pt[1]}else pt=this._constraintPositionInBoundary(A,O,Z,X,K,V),A=pt[0],O=pt[1];if(this.get("inPlot")){var Nt=this.get("plotRange");pt=this._constraintPositionInPlot(A,O,Z,X,Nt,this.get("enterable")),A=pt[0],O=pt[1]}var Rt=this.get("markerItems");f.isEmpty(Rt)||(it=Rt[0].x,ft=Rt[0].y);var Mt=[1,0,0,0,1,0,0,0,1],bt=g.transform(Mt,[["t",A,O]]);W.stopAnimate(),W.animate({matrix:bt},this.get("animationDuration"));var At=this.get("crosshairGroup");if(At){var rt=this.get("items");At.setPosition(it,ft,rt)}M.prototype.setPosition.call(this,A,O)},m._addItem=function(A){var O=new n.Group,L=this.get("markerStyle").radius;if(A.marker){var W=f.mix({},A.marker,{x:A.marker.radius/2,y:0,symbol:A.marker.activeSymbol||A.marker.symbol});O.addShape("marker",{attrs:W}),L=A.marker.radius}var F=this.get("nameStyle");O.addShape("text",{attrs:f.mix({x:L+F.padding,y:0,text:A.name},F)});var K=this.get("valueStyle");return O.addShape("text",{attrs:f.mix({x:O.getBBox().width+K.padding,y:0,text:A.value},K)}),O},m._alignToRight=function(A){var O=this,L=this.get("itemsGroup"),W=L.get("children");f.each(W,function(F){var K=F.get("children"),V=K[2],k=V.getBBox().width,Z=A-k-O.get("padding").right*2;V.attr("x",Z)})},S}(u);E.exports=_},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(36),i=e(3),a=function(o){h(v,o);var u=t(v),f=v.prototype;f.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return i.mix({},y,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function v(b){var y;return y=o.call(this,b)||this,y._init_(),y.render(),y}return f._init_=function(){var y=this,g=y.get("plot"),_;y.type==="rect"?_=g.addGroup({zIndex:0}):_=g.addGroup(),this.set("container",_)},f._addLineShape=function(y,g){var _=this.get("container"),M=_.addShape("line",{capture:!1,attrs:y});return this.set("crossLineShape"+g,M),M},f._renderHorizontalLine=function(y,g){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:g?g.bl.x:y.get("width"),y1:0,x2:g?g.br.x:0,y2:0},_);this._addLineShape(M,"X")},f._renderVerticalLine=function(y,g){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:0,y1:g?g.bl.y:y.get("height"),x2:0,y2:g?g.tl.y:0},_);this._addLineShape(M,"Y")},f._renderBackground=function(y,g){var _=i.mix(this.get("rectStyle"),this.get("style")),M=this.get("container"),x=i.mix({x:g?g.tl.x:0,y:g?g.tl.y:y.get("height"),width:g?g.br.x-g.bl.x:y.get("width"),height:g?Math.abs(g.tl.y-g.bl.y):y.get("height")},_),m=M.addShape("rect",{attrs:x,capture:!1});return this.set("crosshairsRectShape",m),m},f._updateRectShape=function(y){var g,_=this.get("crosshairsRectShape"),M=this.get("isTransposed"),x=y[0],m=y[y.length-1],S=M?"y":"x",P=M?"height":"width",A=x[S];if(y.length>1&&x[S]>m[S]&&(A=m[S]),this.get("width"))_.attr(S,A-this.get("crosshairs").width/2),_.attr(P,this.get("width"));else if(i.isArray(x.point[S])&&!x.size){var O=x.point[S][1]-x.point[S][0];_.attr(S,x.point[S][0]),_.attr(P,O)}else g=3*x.size/4,_.attr(S,A-g),y.length===1?_.attr(P,3*x.size/2):_.attr(P,Math.abs(m[S]-x[S])+2*g)},f.render=function(){var y=this.get("canvas"),g=this.get("plotRange"),_=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(y,g);break;case"y":this._renderVerticalLine(y,g);break;case"cross":this._renderHorizontalLine(y,g),this._renderVerticalLine(y,g);break;case"rect":this._renderBackground(y,g);break;default:_?this._renderHorizontalLine(y,g):this._renderVerticalLine(y,g)}},f.show=function(){var y=this.get("container");o.prototype.show.call(this),y.show()},f.hide=function(){var y=this.get("container");o.prototype.hide.call(this),y.hide()},f.clear=function(){var y=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),o.prototype.clear.call(this),y.clear()},f.destroy=function(){var y=this.get("container");o.prototype.destroy.call(this),y.remove()},f.setPosition=function(y,g,_){var M=this.get("crossLineShapeX"),x=this.get("crossLineShapeY"),m=this.get("crosshairsRectShape");x&&!x.get("destroyed")&&x.move(y,0),M&&!M.get("destroyed")&&M.move(0,g),m&&!m.get("destroyed")&&this._updateRectShape(_)},v}(n);E.exports=a},function(E,T,e){var t=e(3),l={setMarkers:function(c,r){var h=this,n=h.get("markerGroup"),i=h.get("frontPlot");n?n.clear():(n=i.addGroup({zIndex:1,capture:!1}),h.set("markerGroup",n)),t.each(c,function(a){var o=t.mix({fill:a.color,symbol:"circle",shadowColor:a.color},r,{x:a.x,y:a.y});a.marker&&a.marker.activeSymbol&&(o.symbol=a.marker.activeSymbol),n.addShape("marker",{color:a.color,attrs:o})}),this.set("markerItems",c)},clearMarkers:function(){var c=this.get("markerGroup");c&&c.clear()}};E.exports=l},function(E,T){var e=20,t={_calcTooltipPosition:function(s,c,r,h,n,i){var a=0,o=0,u=20;if(i){var f=i.getBBox();a=f.width,o=f.height,s=f.x,c=f.y,u=5}switch(r){case"inside":s=s+a/2-h/2,c=c+o/2-n/2;break;case"top":s=s+a/2-h/2,c=c-n-u;break;case"left":s=s-h-u,c=c+o/2-n/2;break;case"right":s=s+a+u,c=c+o/2-n/2;break;case"bottom":default:s=s+a/2-h/2,c=c+o+u;break}return[s,c]},_constraintPositionInBoundary:function(s,c,r,h,n,i){return s+r+e>n?(s-=r+e,s=s<0?0:s):s+e<0?s=e:s+=e,c+h+e>i?(c-=h+e,c=c<0?0:c):c+e<0?c=e:c+=e,[s,c]},_constraintPositionInPlot:function(s,c,r,h,n,i){return s+r>n.tr.x&&(i?s-=r+1:s-=r+2*e),s<n.tl.x&&(s=n.tl.x),i||(c+h>n.bl.y&&(c-=h+2*e),c<n.tl.y&&(c=n.tl.y)),[s,c]}};E.exports=t},function(E,T,e){var t=e(0),l=e(270),s={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},c={line:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},path:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},area:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.fadeIn},leave:function(){return l.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return l.appear.zoomIn},enter:function(){return l.enter.zoomIn},leave:function(){return l.leave.zoomOut}},edge:{appear:function(){return l.appear.pathIn},enter:function(){return l.enter.pathIn},leave:function(){return l.leave.pathOut}},interval:{appear:function(h){var n;return h.isPolar?(n=l.appear.zoomIn,(h.isTransposed||h.type==="theta")&&(n=l.appear.fanIn)):h.isRect?n=h.isTransposed?l.appear.scaleInX:l.appear.scaleInY:n=l.appear.zoomIn,n},enter:function(h){return h.isRect||h.isTransposed||h.type==="theta"?l.enter.fadeIn:l.enter.zoomIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.type==="theta")return l.update.fanIn}},point:{appear:function(){return l.appear.zoomIn},enter:function(){return l.enter.zoomIn},leave:function(){return l.leave.zoomOut}},schema:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return l.appear.fadeIn},enter:function(){return l.enter.fadeIn},leave:function(){return l.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-ticks":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-grid":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-grid-rect":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(){return l.leave.fadeIn}},labelLine:{appear:function(){return l.appear.pathIn},enter:function(){return l.enter.pathIn},leave:function(){return l.leave.pathOut}}};c.Action=l,c.defaultCfg=s,c.getAnimation=function(r,h,n){var i=this[r];if(i){var a=i[n];if(t.isFunction(a))return a(h)}return!1},c.getAnimateCfg=function(r,h){var n=s[h];return this[r]&&this[r].cfg&&this[r].cfg[h]?t.deepMix({},n,this[r].cfg[h]):n},c.registerAnimation=function(r,h,n){this.Action[r]||(this.Action[r]={}),this.Action[r][h]=n},E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(105),s=e(0),c=function(r){t(n,r);var h=n.prototype;h.getDefaultCfg=function(){return{}};function n(i){var a;a=r.call(this)||this;var o={visible:!0},u=a.getDefaultCfg();return a._attrs=o,s.assign(o,u,i),a}return h.get=function(a){return this._attrs[a]},h.set=function(a,o){this._attrs[a]=o},h.show=function(){var a=this.get("visible");a||(this.set("visible",!0),this.changeVisible(!0))},h.hide=function(){var a=this.get("visible");a&&(this.set("visible",!1),this.changeVisible(!1))},h.changeVisible=function(){},h.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},n}(l);E.exports=c},function(E,T,e){E.exports={Scale:e(277),Coord:e(273),Axis:e(272),Guide:e(275),Legend:e(276),Tooltip:e(278),Event:e(274)}},function(E,T,e){var t=e(16),l=e(0),s=e(123);function c(h,n,i){i===void 0&&(i=1);var a=[h.x,h.y,i];return l.vec3.transformMat3(a,a,n),{x:a[0],y:a[1]}}function r(h){var n=h.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY},o=h.attr("matrix");return i=c(i,o),a=c(a,o),{minX:i.x,minY:i.y,maxX:a.x,maxY:a.y}}E.exports=function(n,i){var a=i;return l.each(n.get("children"),function(o){o instanceof t.Group&&l.each(o.get("children"),function(u){if(u instanceof t.Group&&u.get("children").length||u instanceof t.Path)a=s(a,u.getBBox());else if(u instanceof t.Text){var f=r(u);a=s(a,f)}})}),a}},function(E,T){E.exports=function(t,l){return{minX:Math.min(t.minX,l.minX),minY:Math.min(t.minY,l.minY),maxX:Math.max(t.maxX,l.maxX),maxY:Math.max(t.maxY,l.maxY)}}},function(E,T){E.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}}},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="list",i.cols=null,i},h.generateFacets=function(i){var a=this,o=a.fields,u=o[0];if(!u)throw"Please specify for the field for facet!";var f=a.getFieldValues(u,i),v=f.length,b=a.cols||v,y=parseInt((v+b-1)/b),g=[];return f.forEach(function(_,M){var x=parseInt(M/b),m=M%b,S=[{field:u,value:_,values:f}],P=a.getFilter(S),A=i.filter(P),O={type:a.type,count:v,colValue:_,colField:u,rowField:null,rowValue:_,colIndex:m,rowIndex:x,cols:b,rows:y,data:A,region:a.getRegion(y,b,m,x)};g.push(O)}),g},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&o.cols*o.rowIndex+o.colIndex+1+o.cols<=o.count&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="rect",i},h.generateFacets=function(i){var a=this,o=a.fields,u=[],f=1,v=1,b=o[0],y=o[1],g=[""],_=[""];return b&&(g=a.getFieldValues(b,i),v=g.length),y&&(_=a.getFieldValues(y,i),f=_.length),g.forEach(function(M,x){_.forEach(function(m,S){var P=[{field:b,value:M,values:g},{field:y,value:m,values:_}],A=a.getFilter(P),O=i.filter(A),L={type:a.type,colValue:M,rowValue:m,colField:b,rowField:y,colIndex:x,rowIndex:S,cols:v,rows:f,data:O,region:a.getRegion(f,v,x,S)};u.push(L)})}),u},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1?(a[i].title=null,a[i].label=null):o.colIndex!==parseInt((o.cols-1)/2)&&(a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0?(a[i].title=null,a[i].label=null):o.rowIndex!==parseInt((o.rows-1)/2)&&(a[i].title=null)},h.renderTitle=function(i,a){a.rowIndex===0&&this.drawColTitle(i,a),a.colIndex===a.cols-1&&this.drawRowTitle(i,a)},r}(l);E.exports=s},function(E,T,e){var t=e(69),l=e(25),s=e(0),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,t),s.augment(c,{getPointRauis:function(h,n){return l.getPointRadius(h,n)},getCirclePoint:function(h,n,i){var a=this,o=a.get("coord"),u=o.getCenter(),f=a._isEmitLabels(),v=a.getPointRauis(o,i);if(v===0)return null;if(o.isTransposed&&v>n&&!f){var b=Math.asin(n/(2*v));h=h+b*2}else v=v+n;return{x:u.x+v*Math.cos(h),y:u.y+v*Math.sin(h),angle:h,r:v}},getArcPoint:function(h,n){var i=this,a;return n=n||0,s.isArray(h.x)||s.isArray(h.y)?a={x:s.isArray(h.x)?h.x[n]:h.x,y:s.isArray(h.y)?h.y[n]:h.y}:a=h,i.transLabelPoint(a),a},getPointAngle:function(h){var n=this,i=n.get("coord");return l.getPointAngle(i,h)},getMiddlePoint:function(h){var n=this,i=n.get("coord"),a=h.length,o={x:0,y:0};return s.each(h,function(u){o.x+=u.x,o.y+=u.y}),o.x/=a,o.y/=a,o=i.convert(o),o},_isToMiddle:function(h){return h.x.length>2},getLabelPoint:function(h,n,i){var a=this,o=h.text[i],u=1,f;a._isToMiddle(n)?f=a.getMiddlePoint(n.points):(h.text.length===1&&i===0?i=1:i===0&&(u=-1),f=a.getArcPoint(n,i));var v=a.getDefaultOffset(h);v=v*u;var b=a.getPointAngle(f),y=a.getCirclePoint(b,v,f);if(y?(y.text=o,y.angle=b,y.color=n.color):y={text:""},h.autoRotate||typeof h.autoRotate=="undefined"){var g=y.textStyle?y.textStyle.rotate:null;g||(g=y.rotate||a.getLabelRotate(b,v,n)),y.rotate=g}return y.start={x:f.x,y:f.y},y},_isEmitLabels:function(){var h=this.get("label");return h.labelEmit},getLabelRotate:function(h){var n=this,i;return i=h*180/Math.PI,i+=90,n._isEmitLabels()&&(i-=90),i&&(i>90?i=i-180:i<-90&&(i=i+180)),i/180*Math.PI},getLabelAlign:function(h){var n=this,i=n.get("coord"),a;if(n._isEmitLabels())h.angle<=Math.PI/2&&h.angle>-Math.PI/2?a="left":a="right";else if(!i.isTransposed)a="center";else{var o=i.getCenter(),u=n.getDefaultOffset(h);Math.abs(h.x-o.x)<1?a="center":h.angle>Math.PI||h.angle<=0?u>0?a="left":a="right":u>0?a="right":a="left"}return a}}),E.exports=c},function(E,T,e){var t=e(0),l=e(5);E.exports={splitData:function(c){var r=this.get("viewTheme")||l;if(!c.length)return[];var h=[],n=[],i=this.getYScale(),a=i.field,o;return t.each(c,function(u){o=u._origin?u._origin[a]:u[a],r.connectNulls?t.isNil(o)||n.push(u):t.isArray(o)&&t.isNil(o[0])||t.isNil(o)?n.length&&(h.push(n),n=[]):n.push(u)}),n.length&&h.push(n),h}}},function(E,T){E.exports={toFront:function(t){var l=t.get("parent"),s=l.get("children").indexOf(t);t.set("_originIndex",s),t.toFront()},resetZIndex:function(t){var l=t.get("parent"),s=t.get("_originIndex"),c=l.get("children"),r=c.indexOf(t);s>=0&&s!==r&&(c.splice(r,1),c.splice(s,0,t))}}},function(E,T,e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var s=e(8),c=e(128),r=e(0),h=function(n){l(a,n);var i=a.prototype;i.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.type="path",u.shapeType="line",u};function a(o){var u;return u=n.call(this,o)||this,r.assign(t(u),c),u}return i.getDrawCfg=function(u){var f=n.prototype.getDrawCfg.call(this,u);return f.isStack=this.hasStack(),f},i.draw=function(u,f,v,b){var y=this,g=this.splitData(u),_=this.getDrawCfg(u[0]);y._applyViewThemeShapeStyle(_,_.shape,v),_.origin=u,r.each(g,function(M,x){if(!r.isEmpty(M)){_.splitedIndex=x,_.points=M;var m=v.drawShape(_.shape,_,f);y.appendShapeInfo(m,b+x)}})},a}(s);s.Path=h,E.exports=h},function(E,T){var e,t,l="#1890FF",s=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],c=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],r=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],h=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],n=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a="g2-tooltip",o="g2-tooltip-title",u="g2-tooltip-list",f="g2-tooltip-list-item",v="g2-tooltip-marker",b="g2-tooltip-value",y="g2-legend",g="g2-legend-title",_="g2-legend-list",M="g2-legend-list-item",x="g2-legend-marker",m={defaultColor:l,plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:s,colors_16:c,colors_24:r,colors_pie:h,colors_pie_16:n,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(e={},e[""+y]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},e[""+g]={marginBottom:"4px"},e[""+_]={listStyleType:"none",margin:0,padding:0},e[""+M]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},e[""+x]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},e),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(t={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},t[""+a]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+o]={marginBottom:"4px"},t[""+u]={margin:0,listStyleType:"none",padding:0},t[""+f]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},t[""+v]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},t[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},t),tooltipMarker:{symbol:function(P,A,O){return[["M",P,A],["m",-O,0],["a",O,O,0,1,0,O*2,0],["a",O,O,0,1,0,-O*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:l,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:l,radius:3},interval:{lineWidth:0,fill:l,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:l,fillOpacity:.6},polygon:{lineWidth:0,fill:l,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},line:{stroke:l,lineWidth:2,fill:null},edge:{stroke:l,lineWidth:1,fill:null},schema:{stroke:l,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:i,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};E.exports=m},function(E,T,e){var t={default:e(131),dark:e(327)};E.exports=t},function(E,T,e){var t=e(1),l=e(330),s=e(333),c=e(329),r=e(105),h=function(i){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),i),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(h,l,s,r,c,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(i,a){return i==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(a),i==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(a),this._cfg[i]=a,this},setSilent:function(i,a){this._cfg[i]=a},get:function(i){return this._cfg[i]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(i,a){var o=this._cfg,u=o.parent,f=o.el;return u&&t.remove(u.get("children"),this),f&&(a?u&&u._cfg.tobeRemoved.push(f):f.parentNode.removeChild(f)),(i||i===void 0)&&this.destroy(),this},destroy:function(){var i=this.get("destroyed");i||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,u=i.el,f=o.indexOf(this);o.splice(f,1),o.push(this),u&&(u.parentNode.removeChild(u),i.el=null)}},toBack:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,u=i.el,f=o.indexOf(this);if(o.splice(f,1),o.unshift(this),u){var v=u.parentNode;v.removeChild(u),v.insertBefore(u,v.firstChild)}}},_beforeSetZIndex:function(i){var a=this._cfg.parent;this._cfg.zIndex=i,t.isNil(a)||a.sort();var o=this._cfg.el;if(o){var u=a._cfg.children,f=u.indexOf(this),v=o.parentNode;v.removeChild(o),f===u.length-1?v.appendChild(o):v.insertBefore(o,v.childNodes[f])}return i},_setAttrs:function(i){return this.attr(i),i},setZIndex:function(i){return this._cfg.zIndex=i,this._beforeSetZIndex(i)},clone:function(){return t.clone(this)},getBBox:function(){}}),E.exports=h},function(E,T,e){var t=e(1),l=e(133),s=e(347),c={},r="_INDEX";function h(o){return function(u,f){var v=o(u,f);return v===0?u[r]-f[r]:v}}function n(o,u,f){for(var v,b=o.length-1;b>=0;b--){var y=o[b];if(y._cfg.visible&&y._cfg.capture&&(y.isGroup?v=y.getShape(u,f):y.isHit(u,f)&&(v=y)),v)break}return v}var i=function o(u){o.superclass.constructor.call(this,u),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function a(o){if(!(o._cfg||o===i)){var u=o.superclass.constructor;u&&!u._cfg&&a(u),o._cfg={},t.merge(o._cfg,u._cfg),t.merge(o._cfg,o.CFG)}}t.extend(i,l),t.augment(i,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return a(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(u,f){var v=this.get("canvas");f=f||{};var b=c[u];if(b||(b=t.upperFirst(u),c[u]=b),f.attrs&&v){var y=f.attrs;if(u==="text"){var g=v.get("fontFamily");g&&(y.fontFamily=y.fontFamily?y.fontFamily:g)}}f.canvas=v,f.type=u;var _=new s[b](f);return this.add(_),_},addGroup:function(u,f){var v=this.get("canvas"),b;if(f=t.merge({},f),t.isFunction(u))f?(f.canvas=v,f.parent=this,b=new u(f)):b=new u({canvas:v,parent:this}),this.add(b);else if(t.isObject(u))u.canvas=v,b=new i(u),this.add(b);else if(u===void 0)b=new i,this.add(b);else return!1;return b},renderBack:function(u,f){var v=this.get("backShape"),b=this.getBBox();return t.merge(f,{x:b.minX-u[3],y:b.minY-u[0],width:b.width+u[1]+u[3],height:b.height+u[0]+u[2]}),v?v.attr(f):v=this.addShape("rect",{zIndex:-1,attrs:f}),this.set("backShape",v),this.sort(),v},removeChild:function(u,f){if(arguments.length>=2)this.contain(u)&&u.remove(f);else{if(arguments.length===1)if(t.isBoolean(u))f=u;else return this.contain(u)&&u.remove(!0),this;arguments.length===0&&(f=!0),i.superclass.remove.call(this,f)}return this},add:function(u){var f=this,v=f.get("children");if(t.isArray(u))t.each(u,function(g){var _=g.get("parent");_&&_.removeChild(g,!1),f._setCfgProperty(g)}),f._cfg.children=v.concat(u);else{var b=u,y=b.get("parent");y&&y.removeChild(b,!1),f._setCfgProperty(b),v.push(b)}return f},_setCfgProperty:function(u){var f=this._cfg;u.set("parent",this),u.set("canvas",f.canvas),f.timeline&&u.set("timeline",f.timeline)},contain:function(u){var f=this.get("children");return f.indexOf(u)>-1},getChildByIndex:function(u){var f=this.get("children");return f[u]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var u=this.get("children").length-1;return this.getChildByIndex(u)},getBBox:function(){var u=this,f=Infinity,v=-Infinity,b=Infinity,y=-Infinity,g=u.get("children");g.length>0?t.each(g,function(M){if(M.get("visible")){if(M.isGroup&&M.get("children").length===0)return;var x=M.getBBox();if(!x)return!0;var m=[x.minX,x.minY,1],S=[x.minX,x.maxY,1],P=[x.maxX,x.minY,1],A=[x.maxX,x.maxY,1];M.apply(m),M.apply(S),M.apply(P),M.apply(A);var O=Math.min(m[0],S[0],P[0],A[0]),L=Math.max(m[0],S[0],P[0],A[0]),W=Math.min(m[1],S[1],P[1],A[1]),F=Math.max(m[1],S[1],P[1],A[1]);O<f&&(f=O),L>v&&(v=L),W<b&&(b=W),F>y&&(y=F)}}):(f=0,v=0,b=0,y=0);var _={minX:f,minY:b,maxX:v,maxY:y};return _.x=_.minX,_.y=_.minY,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY,_},getCount:function(){return this.get("children").length},sort:function(){var u=this.get("children");return t.each(u,function(f,v){return f[r]=v,f}),u.sort(h(function(f,v){return f.get("zIndex")-v.get("zIndex")})),this},findById:function(u){return this.find(function(f){return f.get("id")===u})},find:function(u){if(t.isString(u))return this.findById(u);var f=this.get("children"),v=null;return t.each(f,function(b){if(u(b)?v=b:b.find&&(v=b.find(u)),v)return!1}),v},findAll:function(u){var f=this.get("children"),v=[],b=[];return t.each(f,function(y){u(y)&&v.push(y),y.findAllBy&&(b=y.findAllBy(u),v=v.concat(b))}),v},findBy:function(u){var f=this.get("children"),v=null;return t.each(f,function(b){if(u(b)?v=b:b.findBy&&(v=b.findBy(u)),v)return!1}),v},findAllBy:function(u){var f=this.get("children"),v=[],b=[];return t.each(f,function(y){u(y)&&v.push(y),y.findAllBy&&(b=y.findAllBy(u),v=v.concat(b))}),v},getShape:function(u,f){var v=this,b=v._attrs.clip,y=v._cfg.children,g;if(b){var _=[u,f,1];b.invert(_,v.get("canvas")),b.isPointInPath(_[0],_[1])&&(g=n(y,u,f))}else g=n(y,u,f);return g},clearTotalMatrix:function(){var u=this.get("totalMatrix");if(u){this.setSilent("totalMatrix",null);for(var f=this._cfg.children,v=0;v<f.length;v++){var b=f[v];b.clearTotalMatrix()}}},clear:function(u){for(var f=this._cfg.children,v=f.length-1;v>=0;v--)f[v].remove(!0,u);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),i.superclass.destroy.call(this))},clone:function(){var u=this,f=u._cfg.children,v=new i;return t.each(f,function(b){v.add(b.clone())}),v}}),E.exports=i},function(E,T,e){var t=e(1),l=function(c,r,h,n){this.type=c,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=r};t.augment(l,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),E.exports=l},function(E,T,e){var t=e(1),l=e(7),s=e(47),c=e(49);function r(i,a,o){return i+a*Math.cos(o)}function h(i,a,o){return i+a*Math.sin(o)}var n=function i(a){i.superclass.constructor.call(this,a)};n.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(n,l),t.augment(n,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var a=this._attrs,o=a.x,u=a.y,f=a.r,v=a.startAngle,b=a.endAngle,y=a.clockwise,g=this.getHitLineWidth(),_=g/2,M=s.box(o,u,f,v,b,y);return M.minX-=_,M.minY-=_,M.maxX+=_,M.maxY+=_,M},getStartTangent:function(){var a=this._attrs,o=a.x,u=a.y,f=a.startAngle,v=a.r,b=a.clockwise,y=Math.PI/180;b&&(y*=-1);var g=[],_=r(o,v,f+y),M=h(u,v,f+y),x=r(o,v,f),m=h(u,v,f);return g.push([_,M]),g.push([x,m]),g},getEndTangent:function(){var a=this._attrs,o=a.x,u=a.y,f=a.endAngle,v=a.r,b=a.clockwise,y=Math.PI/180,g=[];b&&(y*=-1);var _=r(o,v,f+y),M=h(u,v,f+y),x=r(o,v,f),m=h(u,v,f);return g.push([x,m]),g.push([_,M]),g},createPath:function(a){var o=this._attrs,u=o.x,f=o.y,v=o.r,b=o.startAngle,y=o.endAngle,g=o.clockwise;a=a||self.get("context"),a.beginPath(),a.arc(u,f,v,b,y,g)},afterPath:function(a){var o=this._attrs;if(a=a||this.get("context"),o.startArrow){var u=this.getStartTangent();c.addStartArrow(a,o,u[0][0],u[0][1],u[1][0],u[1][1])}if(o.endArrow){var f=this.getEndTangent();c.addEndArrow(a,o,f[0][0],f[0][1],f[1][0],f[1][1])}}}),E.exports=n},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.r,a=this.getHitLineWidth(),o=a/2+i;return{minX:h-o,minY:n-o,maxX:h+o,maxY:n+o}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.r;r.beginPath(),r.arc(n,i,a,0,Math.PI*2,!1),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var r=this,h=r._attrs,n=h.x,i=h.y,a=h.width,o=h.height,u=this.getHitLineWidth(),f=u/2;return{minX:n-f,minY:i-f,maxX:n+a+f,maxY:i+o+f}}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.rx,a=r.ry,o=this.getHitLineWidth(),u=i+o/2,f=a+o/2;return{minX:h-u,minY:n-f,maxX:h+u,maxY:n+f}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.rx,o=h.ry;r=r||self.get("context");var u=a>o?a:o,f=a>o?1:a/o,v=a>o?o/a:1,b=[1,0,0,0,1,0,0,0,1];t.mat3.scale(b,b,[f,v]),t.mat3.translate(b,b,[n,i]),r.beginPath(),r.save(),r.transform(b[0],b[1],b[3],b[4],b[6],b[7]),r.arc(0,0,u,0,Math.PI*2),r.restore(),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(47),c=function r(h){r.superclass.constructor.call(this,h)};c.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(c,l),t.augment(c,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,n=h._attrs,i=n.x,a=n.y,o=n.rs,u=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,y=this.getHitLineWidth(),g=s.box(i,a,o,f,v,b),_=s.box(i,a,u,f,v,b),M=Math.min(g.minX,_.minX),x=Math.min(g.minY,_.minY),m=Math.max(g.maxX,_.maxX),S=Math.max(g.maxY,_.maxY),P=y/2;return{minX:M-P,minY:x-P,maxX:m+P,maxY:S+P}},createPath:function(h){var n=this._attrs,i=n.x,a=n.y,o=n.rs,u=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,y={x:Math.cos(f)*o+i,y:Math.sin(f)*o+a},g={x:Math.cos(f)*u+i,y:Math.sin(f)*u+a},_={x:Math.cos(v)*o+i,y:Math.sin(v)*o+a};h=h||self.get("context"),h.beginPath(),h.moveTo(y.x,y.y),h.lineTo(g.x,g.y),h.arc(i,a,u,f,v,b),h.lineTo(_.x,_.y),h.arc(i,a,o,v,f,!b),h.closePath()}}),E.exports=c},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(s,l),t.augment(s,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var r=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==r.img)&&this._setAttrImg();var h=r.x,n=r.y,i=r.width,a=r.height;return{minX:h,minY:n,maxX:h+i,maxY:n+a}},_beforeSetLoading:function(r){var h=this.get("canvas");return r===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),r},_setAttrImg:function(){var r=this,h=r._attrs,n=h.img;if(t.isString(n)){var i=new Image;i.onload=function(){if(r.get("destroyed"))return!1;r.attr("imgSrc",n),r.attr("img",i);var a=r.get("callback");a&&a.call(r),r.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",r.set("loading",!0)}else return n instanceof Image?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):n instanceof HTMLElement&&t.isString(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"?(h.width||r.attr("width",Number(n.getAttribute("width"))),h.height||r.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):null},drawInner:function(r){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(r),this._cfg.hasUpdate=!1},_drawImage:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.img,o=h.width,u=h.height,f=h.sx,v=h.sy,b=h.swidth,y=h.sheight;this.set("toDraw",!1);var g=a;if(g instanceof ImageData&&(g=new Image,g.src=a),g instanceof Image||g instanceof HTMLElement&&t.isString(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS"){if(t.isNil(f)||t.isNil(v)||t.isNil(b)||t.isNil(y)){r.drawImage(g,n,i,o,u);return}if(!t.isNil(f)&&!t.isNil(v)&&!t.isNil(b)&&!t.isNil(y)){r.drawImage(g,f,v,b,y,n,i,o,u);return}}}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(r,l),t.augment(r,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,u=n.y2,f=this.getHitLineWidth();return c.box(i,a,o,u,f)},createPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,u=i.x2,f=i.y2;n=n||self.get("context"),n.beginPath(),n.moveTo(a,o),n.lineTo(u,f)},afterPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,u=i.x2,f=i.y2;n=n||this.get("context"),i.startArrow&&s.addStartArrow(n,i,u,f,a,o),i.endArrow&&s.addEndArrow(n,i,a,o,u,f)},getPoint:function(n){var i=this._attrs;return{x:c.at(i.x1,i.x2,n),y:c.at(i.y1,i.y2,n)}}}),E.exports=r},function(E,T){E.exports={xAt:function(t,l,s,c,r){return l*Math.cos(t)*Math.cos(r)-s*Math.sin(t)*Math.sin(r)+c},yAt:function(t,l,s,c,r){return l*Math.sin(t)*Math.cos(r)+s*Math.cos(t)*Math.sin(r)+c},xExtrema:function(t,l,s){return Math.atan(-s/l*Math.tan(t))},yExtrema:function(t,l,s){return Math.atan(s/(l*Math.tan(t)))}}},function(E,T,e){var t=e(1),l=t.vec2;function s(h,n,i,a){var o=1-a;return o*(o*h+2*a*n)+a*a*i}function c(h,n,i,a,o,u,f,v,b){var y,g=.005,_=Infinity,M,x,m,S,P,A,O=1e-4,L=[f,v];for(S=0;S<1;S+=.05)x=[s(h,i,o,S),s(n,a,u,S)],M=l.squaredDistance(L,x),M<_&&(y=S,_=M);for(_=Infinity,A=0;A<32&&!(g<O);A++){var W=y-g,F=y+g;x=[s(h,i,o,W),s(n,a,u,W)],M=l.squaredDistance(L,x),W>=0&&M<_?(y=W,_=M):(m=[s(h,i,o,F),s(n,a,u,F)],P=l.squaredDistance(L,m),F<=1&&P<_?(y=F,_=P):g*=.5)}return b&&(b.x=s(h,i,o,y),b.y=s(n,a,u,y)),Math.sqrt(_)}function r(h,n,i){var a=h+i-2*n;if(t.isNumberEqual(a,0))return[.5];var o=(h-n)/a;return o<=1&&o>=0?[o]:[]}E.exports={at:s,projectPoint:function(n,i,a,o,u,f,v,b){var y={};return c(n,i,a,o,u,f,v,b,y),y},pointDistance:c,extrema:r}},function(E,T,e){var t=e(1),l=e(7),s=e(50),c=e(37),r=e(49),h=e(77),n=e(75),i=function a(o){a.superclass.constructor.call(this,o)};i.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(i,l),t.augment(i,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(o){var u=this;if(t.isNil(o)){u.setSilent("segments",null),u.setSilent("box",void 0);return}var f=c.parsePath(o),v,b=[];if(!(!t.isArray(f)||f.length===0||f[0][0]!=="M"&&f[0][0]!=="m")){for(var y=f.length,g=0;g<f.length;g++){var _=f[g];v=new s(_,v,g===y-1),b.push(v)}u.setSilent("segments",b),u.setSilent("tCache",null),u.setSilent("box",null)}},calculateBox:function(){var o=this,u=o.get("segments");if(!u)return null;var f=this.getHitLineWidth(),v=Infinity,b=-Infinity,y=Infinity,g=-Infinity;return t.each(u,function(_){_.getBBox(f);var M=_.box;M&&(M.minX<v&&(v=M.minX),M.maxX>b&&(b=M.maxX),M.minY<y&&(y=M.minY),M.maxY>g&&(g=M.maxY))}),v===Infinity||y===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:v,minY:y,maxX:b,maxY:g}},_setTcache:function(){var o=0,u=0,f=[],v,b,y,g,_=this._cfg.curve;!_||(t.each(_,function(M,x){y=_[x+1],g=M.length,y&&(o+=n.len(M[g-2],M[g-1],y[1],y[2],y[3],y[4],y[5],y[6]))}),t.each(_,function(M,x){y=_[x+1],g=M.length,y&&(v=[],v[0]=u/o,b=n.len(M[g-2],M[g-1],y[1],y[2],y[3],y[4],y[5],y[6]),u+=b,v[1]=u/o,f.push(v))}),this._cfg.tCache=f)},_calculateCurve:function(){var o=this,u=o._attrs,f=u.path;this._cfg.curve=h.pathTocurve(f)},getStartTangent:function(){var o=this.get("segments"),u,f,v,b;if(o.length>1)if(u=o[0].endPoint,f=o[1].endPoint,v=o[1].startTangent,b=[],t.isFunction(v)){var y=v();b.push([u.x-y[0],u.y-y[1]]),b.push([u.x,u.y])}else b.push([f.x,f.y]),b.push([u.x,u.y]);return b},getEndTangent:function(){var o=this.get("segments"),u=o.length,f,v,b,y;if(u>1)if(f=o[u-2].endPoint,v=o[u-1].endPoint,b=o[u-1].endTangent,y=[],t.isFunction(b)){var g=b();y.push([v.x-g[0],v.y-g[1]]),y.push([v.x,v.y])}else y.push([f.x,f.y]),y.push([v.x,v.y]);return y},getPoint:function(o){var u=this._cfg.tCache,f,v;u||(this._calculateCurve(),this._setTcache(),u=this._cfg.tCache);var b=this._cfg.curve;if(!u)return b?{x:b[0][1],y:b[0][2]}:null;t.each(u,function(M,x){o>=M[0]&&o<=M[1]&&(f=(o-M[0])/(M[1]-M[0]),v=x)});var y=b[v];if(t.isNil(y)||t.isNil(v))return null;var g=y.length,_=b[v+1];return{x:n.at(y[g-2],_[1],_[3],_[5],1-f),y:n.at(y[g-1],_[2],_[4],_[6],1-f)}},createPath:function(o){var u=this,f=u.get("segments");if(!!t.isArray(f)){o=o||u.get("context"),o.beginPath();for(var v=f.length,b=0;b<v;b++)f[b].draw(o)}},afterPath:function(o){var u=this,f=u._attrs,v=u.get("segments"),b=f.path;if(o=o||u.get("context"),!!t.isArray(v)&&v.length!==1&&!(!f.startArrow&&!f.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||f.fill)){var y=u.getStartTangent();r.addStartArrow(o,f,y[0][0],y[0][1],y[1][0],y[1][1]);var g=u.getEndTangent();r.addEndArrow(o,f,g[0][0],g[0][1],g[1][0],g[1][1])}}}),E.exports=i},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={points:null,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this,h=r._attrs,n=h.points,i=this.getHitLineWidth();if(!n||n.length===0)return null;var a=Infinity,o=Infinity,u=-Infinity,f=-Infinity;t.each(n,function(b){var y=b[0],g=b[1];y<a&&(a=y),y>u&&(u=y),g<o&&(o=g),g>f&&(f=g)});var v=i/2;return{minX:a-v,minY:o-v,maxX:u+v,maxY:f+v}},createPath:function(r){var h=this,n=h._attrs,i=n.points;i.length<2||(r=r||h.get("context"),r.beginPath(),t.each(i,function(a,o){o===0?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1])}),r.closePath())}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(r,l),t.augment(r,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this,i=n._attrs,a=this.getHitLineWidth(),o=i.points;if(!o||o.length===0)return null;var u=Infinity,f=Infinity,v=-Infinity,b=-Infinity;t.each(o,function(g){var _=g[0],M=g[1];_<u&&(u=_),_>v&&(v=_),M<f&&(f=M),M>b&&(b=M)});var y=a/2;return{minX:u-y,minY:f-y,maxX:v+y,maxY:b+y}},_setTcache:function(){var n=this,i=n._attrs,a=i.points,o=0,u=0,f=[],v,b;!a||a.length===0||(t.each(a,function(y,g){a[g+1]&&(o+=c.len(y[0],y[1],a[g+1][0],a[g+1][1]))}),!(o<=0)&&(t.each(a,function(y,g){a[g+1]&&(v=[],v[0]=u/o,b=c.len(y[0],y[1],a[g+1][0],a[g+1][1]),u+=b,v[1]=u/o,f.push(v))}),this.tCache=f))},createPath:function(n){var i=this,a=i._attrs,o=a.points,u,f;if(!(o.length<2)){for(n=n||i.get("context"),n.beginPath(),n.moveTo(o[0][0],o[0][1]),f=1,u=o.length-1;f<u;f++)n.lineTo(o[f][0],o[f][1]);n.lineTo(o[u][0],o[u][1])}},getStartTangent:function(){var n=this.__attrs.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i},getEndTangent:function(){var n=this.__attrs.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a},afterPath:function(n){var i=this,a=i._attrs,o=a.points,u=o.length-1;n=n||i.get("context"),a.startArrow&&s.addStartArrow(n,a,o[1][0],o[1][1],o[0][0],o[0][1]),a.endArrow&&s.addEndArrow(n,a,o[u-1][0],o[u-1][1],o[u][0],o[u][1])},getPoint:function(n){var i=this._attrs,a=i.points,o=this.tCache,u,f;return o||(this._setTcache(),o=this.tCache),t.each(o,function(v,b){n>=v[0]&&n<=v[1]&&(u=(n-v[0])/(v[1]-v[0]),f=b)}),{x:c.at(a[f][0],a[f+1][0],u),y:c.at(a[f][1],a[f+1][1],u)}}}),E.exports=r},function(E,T,e){var t=e(1),l=e(37),s=l.parseRadius,c=e(7),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},t.extend(r,c),t.augment(r,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var n=this,i=n._attrs,a=i.x,o=i.y,u=i.width,f=i.height,v=this.getHitLineWidth(),b=v/2;return{minX:a-b,minY:o-b,maxX:a+u+b,maxY:o+f+b}},createPath:function(n){var i=this,a=i._attrs,o=a.x,u=a.y,f=a.width,v=a.height,b=a.radius;if(n=n||i.get("context"),n.beginPath(),b===0)n.rect(o,u,f,v);else{var y=s(b);n.moveTo(o+y.r1,u),n.lineTo(o+f-y.r2,u),y.r2!==0&&n.arc(o+f-y.r2,u+y.r2,y.r2,-Math.PI/2,0),n.lineTo(o+f,u+v-y.r3),y.r3!==0&&n.arc(o+f-y.r3,u+v-y.r3,y.r3,0,Math.PI/2),n.lineTo(o+y.r4,u+v),y.r4!==0&&n.arc(o+y.r4,u+v-y.r4,y.r4,Math.PI/2,Math.PI),n.lineTo(o,u+y.r1),y.r1!==0&&n.arc(o+y.r1,u+y.r1,y.r1,Math.PI,Math.PI*1.5),n.closePath()}}}),E.exports=r},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var r=this._attrs.fontSize;r&&+r<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+r/12,+r/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var r=this._attrs,h=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;r.font=[a,o,i,h+"px",n].join(" ")},_setAttrText:function(){var r=this._attrs,h=r.text,n=null;if(t.isString(h)&&h.indexOf(`
`)!==-1){n=h.split(`
`);var i=n.length;r.lineCount=i}r.textArr=n},_getTextHeight:function(){var r=this._attrs,h=r.lineCount,n=r.fontSize*1;if(h>1){var i=this._getSpaceingY();return n*h+i*(h-1)}return n},isHitBox:function(){return!1},calculateBox:function(){var r=this,h=r._attrs,n=this._cfg;(!n.attrs||n.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var i=h.x,a=h.y,o=r.measureText();if(!o)return{minX:i,minY:a,maxX:i,maxY:a};var u=r._getTextHeight(),f=h.textAlign,v=h.textBaseline,b=r.getHitLineWidth(),y={x:i,y:a-u};f&&(f==="end"||f==="right"?y.x-=o:f==="center"&&(y.x-=o/2)),v&&(v==="top"?y.y+=u:v==="middle"&&(y.y+=u/2)),this.set("startPoint",y);var g=b/2;return{minX:y.x-g,minY:y.y-g,maxX:y.x+o+g,maxY:y.y+u+g}},_getSpaceingY:function(){var r=this._attrs,h=r.lineHeight,n=r.fontSize*1;return h?h-n:n*.14},drawInner:function(r){var h=this,n=h._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),r.font=n.font;var a=n.text;if(!!a){var o=n.textArr,u=n.x,f=n.y;if(r.beginPath(),h.hasStroke()){var v=n.strokeOpacity;!t.isNil(v)&&v!==1&&(r.globalAlpha=v),o?h._drawTextArr(r,!1):r.strokeText(a,u,f),r.globalAlpha=1}if(h.hasFill()){var b=n.fillOpacity;!t.isNil(b)&&b!==1&&(r.globalAlpha=b),o?h._drawTextArr(r,!0):r.fillText(a,u,f)}i.hasUpdate=!1}},_drawTextArr:function(r,h){var n=this._attrs.textArr,i=this._attrs.textBaseline,a=this._attrs.fontSize*1,o=this._getSpaceingY(),u=this._attrs.x,f=this._attrs.y,v=this.getBBox(),b=v.maxY-v.minY,y;t.each(n,function(g,_){y=f+_*(o+a)-b+a,i==="middle"&&(y+=b-a-(b-a)/2),i==="top"&&(y+=b-a),h?r.fillText(g,u,y):r.strokeText(g,u,y)})},measureText:function(){var r=this,h=r._attrs,n=h.text,i=h.font,a=h.textArr,o,u=0;if(!t.isNil(n)){var f=document.createElement("canvas").getContext("2d");return f.save(),f.font=i,a?t.each(a,function(v){o=f.measureText(v).width,u<o&&(u=o),f.restore()}):(u=f.measureText(n).width,f.restore()),u}}}),E.exports=s},function(E,T,e){E.exports={isFunction:e(14),isObject:e(39),isBoolean:e(191),isNil:e(6),isString:e(15),isArray:e(4),isNumber:e(11),isEmpty:e(167),uniqueId:e(194),clone:e(80),deepMix:e(81),assign:e(10),merge:e(81),upperFirst:e(189),each:e(2),isEqual:e(83),toArray:e(57),extend:e(162),augment:e(158),remove:e(156),isNumberEqual:e(55),toRadian:e(172),toDegree:e(170),mod:e(169),clamp:e(84),createDom:e(159),modifyCSS:e(160),requestAnimationFrame:e(161),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(2),l=8,s=4;function c(h){var n=[];return t(h,function(i){n=n.concat(i)}),n}function r(h,n){var i;for(i=n;i>0&&h%i!=0;i--);if(i===1)for(i=n;i>0&&(h-1)%i!=0;i--);return i}E.exports=function(h){var n={},i=[],a=h.isRounding,o=c(h.data),u=o.length,f=h.maxCount||l,v;if(a?(v=r(u-1,f-1)+1,v===2?v=f:v<f-s&&(v=f-s)):v=f,!a&&u<=v+v/2)i=[].concat(o);else{for(var b=parseInt(u/(v-1),10),y=o.map(function(x,m){return m%b==0?o.slice(m,m+b):null}).filter(function(x){return x}),g=1,_=y.length;g<_&&(a?g*b<u-b:g<v-1);g++)i.push(y[g][0]);if(o.length){i.unshift(o[0]);var M=o[u-1];i.indexOf(M)===-1&&i.push(M)}}return n.categories=o,n.ticks=i,n}},function(E,T){var e=12;function t(r){var h=1;if(r===Infinity||r===-Infinity)throw new Error("Not support Infinity!");if(r<1){for(var n=0;r<1;)h=h/10,r=r*10,n++;h.toString().length>e&&(h=parseFloat(h.toFixed(n)))}else for(;r>10;)h=h*10,r=r/10;return h}function l(r,h){var n=r.length;if(n===0)return NaN;var i=r[0];if(h<r[0])return NaN;if(h>=r[n-1])return r[n-1];for(var a=1;a<r.length&&!(h<r[a]);a++)i=r[a];return i}function s(r,h){var n=r.length;if(n===0)return NaN;var i;if(h>r[n-1])return NaN;if(h<r[0])return r[0];for(var a=1;a<r.length;a++)if(h<=r[a]){i=r[a];break}return i}var c={snapFactorTo:function(h,n,i){if(isNaN(h))return NaN;var a=1;if(h!==0){h<0&&(a=-1),h=h*a;var o=t(h);a=a*o,h=h/o}i==="floor"?h=c.snapFloor(n,h):i==="ceil"?h=c.snapCeiling(n,h):h=c.snapTo(n,h);var u=parseFloat((h*a).toPrecision(e));if(Math.abs(a)<1&&u.toString().length>e){var f=parseInt(1/a),v=a>0?1:-1;u=h/f*v}return u},snapMultiple:function(h,n,i){var a;return i==="ceil"?a=Math.ceil(h/n):i==="floor"?a=Math.floor(h/n):a=Math.round(h/n),a*n},snapTo:function(h,n){var i=l(h,n),a=s(h,n);if(isNaN(i)||isNaN(a)){if(h[0]>=n)return h[0];var o=h[h.length-1];if(o<=n)return o}return Math.abs(n-i)<Math.abs(a-n)?i:a},snapFloor:function(h,n){return l(h,n)},snapCeiling:function(h,n){return s(h,n)},fixedBase:function(h,n){var i=n.toString(),a=i.indexOf("."),o=i.indexOf("e-");if(a<0&&o<0)return Math.round(h);var u=o>=0?parseInt(i.substr(o+2),10):i.substr(a+1).length;return u>20&&(u=20),parseFloat(h.toFixed(u))}};E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(26),s=e(151),c=e(2),r=e(11),h=e(15),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},o.init=function(){var f=this,v=f.values,b=f.tickCount;if(c(v,function(_,M){v[M]=_.toString()}),!f.ticks){var y=v;if(b){var g=s({maxCount:b,data:v,isRounding:f.isRounding});y=g.ticks}this.ticks=y}},o.getText=function(f){return this.values.indexOf(f)===-1&&r(f)&&(f=this.values[Math.round(f)]),i.prototype.getText.call(this,f)},o.translate=function(f){var v=this.values.indexOf(f);return v===-1&&r(f)?v=f:v===-1&&(v=NaN),v},o.scale=function(f){var v=this.rangeMin(),b=this.rangeMax(),y;return(h(f)||this.values.indexOf(f)!==-1)&&(f=this.translate(f)),this.values.length>1?y=f/(this.values.length-1):y=f,v+y*(b-v)},o.invert=function(f){if(h(f))return f;var v=this.rangeMin(),b=this.rangeMax();f<v&&(f=v),f>b&&(f=b);var y=(f-v)/(b-v),g=Math.round(y*(this.values.length-1))%this.values.length;return g=g||0,this.values[g]},a}(l);l.Cat=n,E.exports=n},function(E,T,e){var t=e(187),l=e(26);l.Linear=e(51),l.Identity=e(353),l.Cat=e(153),l.Time=e(357),l.TimeCat=e(356),l.Log=e(354),l.Pow=e(355);var s=function(n){if(l.hasOwnProperty(n)){var i=t(n);l[i]=function(a){return new l[n](a)}}};for(var c in l)s(c);var r=["cat","timeCat"];l.isCategory=function(h){return r.indexOf(h)>=0},E.exports=l},function(E,T,e){var t=e(21),l=Array.prototype.splice,s=function(r,h){if(!t(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,l.call(r,o,1))}return r};E.exports=s},function(E,T){var e=Array.prototype,t=e.splice,l=e.indexOf,s=e.slice,c=function(h){for(var n=s.call(arguments,1),i=0;i<n.length;i++)for(var a=n[i],o=-1;(o=l.call(h,a))>-1;)t.call(h,o,1);return h};E.exports=c},function(E,T,e){var t=e(2),l=e(53),s=function(r){var h=[];return t(r,function(n){l(h,n)||h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(14),l=e(57),s=e(10),c=function(h){for(var n=l(arguments),i=1;i<n.length;i++){var a=n[i];t(a)&&(a=a.prototype),s(h.prototype,a)}};E.exports=c},function(E,T){var e=document.createElement("table"),t=document.createElement("tr"),l=/^\s*<(\w+|!)[^>]*>/,s={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};E.exports=function(r){var h=l.test(r)&&RegExp.$1;h in s||(h="*");var n=s[h];r=r.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+r;var i=n.childNodes[0];return n.removeChild(i),i}},function(E,T){E.exports=function(t,l){if(t)for(var s in l)l.hasOwnProperty(s)&&(t.style[s]=l[s]);return t}},function(E,T){E.exports=function(t){var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(s){return setTimeout(s,16)};return l(t)}},function(E,T,e){var t=e(14),l=e(10),s=function(r,h,n,i){t(h)||(n=h,h=r,r=function(){});var a=Object.create?function(u,f){return Object.create(u,{constructor:{value:f}})}:function(u,f){function v(){}v.prototype=u;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=l(o,r.prototype),r.superclass=a(h.prototype,h),l(o,n),l(r,i),r};E.exports=s},function(E,T,e){var t=e(2),l=e(4),s=Object.prototype.hasOwnProperty,c=function(h,n){if(!n||!l(h))return h;var i={},a=null;return t(h,function(o){a=n(o),s.call(i,a)?i[a].push(o):i[a]=[o]}),i};E.exports=c},function(E,T,e){var t=e(14),l=e(4),s=e(163),c=function(h,n){if(!n)return{0:h};if(!t(n)){var i=l(n)?n:n.replace(/\s+/g,"").split("*");n=function(u){for(var f="_",v=0,b=i.length;v<b;v++)f+=u[i[v]]&&u[i[v]].toString();return f}}var a=s(h,n);return a};E.exports=c},function(E,T,e){var t=e(164),l=function(c,r){if(!r)return[c];var h=t(c,r),n=[];for(var i in h)n.push(h[i]);return n};E.exports=l},function(E,T,e){var t=e(2),l=e(10),s=e(378),c=e(364),r=e(380),h=e(382),n=e(390),i=e(56),a=e(401),o=e(405),u=e(409),f=e(414),v={DOMUtil:s,DomUtil:s,MatrixUtil:i,PathUtil:o,arrayUtil:c,domUtil:s,eventUtil:r,formatUtil:h,mathUtil:n,matrixUtil:i,objectUtil:a,stringUtil:u,pathUtil:o,typeUtil:f,augment:e(158),clone:e(80),debounce:e(369),deepMix:e(81),each:t,extend:e(162),filter:e(82),group:e(165),groupBy:e(163),groupToMap:e(164),indexOf:e(386),isEmpty:e(167),isEqual:e(83),isEqualWith:e(387),map:e(388),mix:l,pick:e(408),throttle:e(413),toArray:e(57),toString:e(38),uniqueId:e(194)};t([s,c,r,h,n,i,a,o,u,f],function(b){l(v,b)}),E.exports=v},function(E,T,e){var t=e(6),l=e(21),s=e(190),c=e(193),r=Object.prototype.hasOwnProperty;function h(n){if(t(n))return!0;if(l(n))return!n.length;var i=s(n);if(i==="Map"||i==="Set")return!n.size;if(c(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}E.exports=h},function(E,T,e){var t=e(4),l=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;l(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(u){l(n)?o=n(u):o=u[n],o>a&&(i=u,a=o)}),i}};E.exports=c},function(E,T){var e=function(l,s){return(l%s+s)%s};E.exports=e},function(E,T){var e=180/Math.PI,t=function(s){return e*s};E.exports=t},function(E,T){E.exports=parseInt},function(E,T){var e=Math.PI/180,t=function(s){return e*s};E.exports=t},function(E,T,e){var t=e(80),l=e(2),s=e(85);E.exports=function(r,h){return r=t(r),l(h,function(n){switch(n[0]){case"t":s.translate(r,r,[n[1],n[2]]);break;case"s":s.scale(r,r,[n[1],n[2]]);break;case"r":s.rotate(r,r,n[1]);break;case"m":s.multiply(r,r,n[1]);break;default:return!1}}),r}},function(E,T,e){var t=e(349),l=e(84);t.angle=function(s,c){var r=t.dot(s,c)/(t.length(s)*t.length(c));return Math.acos(l(r,-1,1))},t.direction=function(s,c){return s[0]*c[1]-c[0]*s[1]},t.angleTo=function(s,c,r){var h=t.angle(s,c),n=t.direction(s,c)>=0;return r?n?Math.PI*2-h:h:n?h:Math.PI*2-h},t.vertical=function(s,c,r){return r?(s[0]=c[1],s[1]=-1*c[0]):(s[0]=-1*c[1],s[1]=c[0]),s},E.exports=t},function(E,T,e){var t=e(350);E.exports=t},function(E,T){E.exports=function(e,t){return e.hasOwnProperty(t)}},function(E,T,e){var t=e(178),l=e(6);function s(c,r){var h=t(r),n=h.length;if(l(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}E.exports=s},function(E,T,e){var t=e(2),l=e(14),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t(c,function(h,n){l(c)&&n==="prototype"||r.push(n)}),r};E.exports=s},function(E,T,e){var t=e(2),l=e(14),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t(c,function(h,n){l(c)&&n==="prototype"||r.push(h)}),r};E.exports=s},function(E,T){E.exports=function(t,l){for(var s=[],c=0,r=t.length;r-2*!l>c;c+=2){var h=[{x:+t[c-2],y:+t[c-1]},{x:+t[c],y:+t[c+1]},{x:+t[c+2],y:+t[c+3]},{x:+t[c+4],y:+t[c+5]}];l?c?r-4===c?h[3]={x:+t[0],y:+t[1]}:r-2===c&&(h[2]={x:+t[0],y:+t[1]},h[3]={x:+t[2],y:+t[3]}):h[0]={x:+t[r-2],y:+t[r-1]}:r-4===c?h[3]=h[2]:c||(h[0]={x:+t[c],y:+t[c+1]}),s.push(["C",(-h[0].x+6*h[1].x+h[2].x)/6,(-h[0].y+6*h[1].y+h[2].y)/6,(h[1].x+6*h[2].x-h[3].x)/6,(h[1].y+6*h[2].y-h[3].y)/6,h[2].x,h[2].y])}return s}},function(E,T){var e=/,?([a-z]),?/gi;E.exports=function(l){return l.join(",").replace(e,"$1")}},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,l=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");E.exports=function(r){if(!r)return null;if((typeof r=="undefined"?"undefined":e(r))===e([]))return r;var h={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(r).replace(l,function(i,a,o){var u=[],f=a.toLowerCase();if(o.replace(s,function(v,b){b&&u.push(+b)}),f==="m"&&u.length>2&&(n.push([a].concat(u.splice(0,2))),f="l",a=a==="m"?"l":"L"),f==="o"&&u.length===1&&n.push([a,u[0]]),f==="r")n.push([a].concat(u));else for(;u.length>=h[f]&&(n.push([a].concat(u.splice(0,h[f]))),!!h[f]););}),n}},function(E,T,e){var t=e(182),l=e(180);function s(c,r,h,n,i){var a=[];if(i===null&&n===null&&(n=h),c=+c,r=+r,h=+h,n=+n,i!==null){var o=Math.PI/180,u=c+h*Math.cos(-n*o),f=c+h*Math.cos(-i*o),v=r+h*Math.sin(-n*o),b=r+h*Math.sin(-i*o);a=[["M",u,v],["A",h,h,0,+(i-n>180),0,f,b]]}else a=[["M",c,r],["m",0,-n],["a",h,n,0,1,1,0,2*n],["a",h,n,0,1,1,0,-2*n],["z"]];return a}E.exports=function(r){if(r=t(r),!r||!r.length)return[["M",0,0]];var h=[],n=0,i=0,a=0,o=0,u=0,f=void 0,v=void 0;r[0][0]==="M"&&(n=+r[0][1],i=+r[0][2],a=n,o=i,u++,h[0]=["M",n,i]);for(var b=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",y,g,_=u,M=r.length;_<M;_++){if(h.push(y=[]),g=r[_],f=g[0],f!==f.toUpperCase())switch(y[0]=f.toUpperCase(),y[0]){case"A":y[1]=g[1],y[2]=g[2],y[3]=g[3],y[4]=g[4],y[5]=g[5],y[6]=+g[6]+n,y[7]=+g[7]+i;break;case"V":y[1]=+g[1]+i;break;case"H":y[1]=+g[1]+n;break;case"R":v=[n,i].concat(g.slice(1));for(var x=2,m=v.length;x<m;x++)v[x]=+v[x]+n,v[++x]=+v[x]+i;h.pop(),h=h.concat(l(v,b));break;case"O":h.pop(),v=s(n,i,g[1],g[2]),v.push(v[0]),h=h.concat(v);break;case"U":h.pop(),h=h.concat(s(n,i,g[1],g[2],g[3])),y=["U"].concat(h[h.length-1].slice(-2));break;case"M":a=+g[1]+n,o=+g[2]+i;break;default:for(var S=1,P=g.length;S<P;S++)y[S]=+g[S]+(S%2?n:i)}else if(f==="R")v=[n,i].concat(g.slice(1)),h.pop(),h=h.concat(l(v,b)),y=["R"].concat(g.slice(-2));else if(f==="O")h.pop(),v=s(n,i,g[1],g[2]),v.push(v[0]),h=h.concat(v);else if(f==="U")h.pop(),h=h.concat(s(n,i,g[1],g[2],g[3])),y=["U"].concat(h[h.length-1].slice(-2));else for(var A=0,O=g.length;A<O;A++)y[A]=g[A];if(f=f.toUpperCase(),f!=="O")switch(y[0]){case"Z":n=+a,i=+o;break;case"H":n=y[1];break;case"V":i=y[1];break;case"M":a=y[y.length-2],o=y[y.length-1];break;default:n=y[y.length-2],i=y[y.length-1]}}return h}},function(E,T,e){var t=e(183),l=function r(h,n,i,a,o,u,f,v,b,y){i===a&&(i+=1);var g=Math.PI*120/180,_=Math.PI/180*(+o||0),M=[],x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=function(xt,H,nt){var at=xt*Math.cos(nt)-H*Math.sin(nt),q=xt*Math.sin(nt)+H*Math.cos(nt);return{x:at,y:q}};if(y)m=y[0],S=y[1],P=y[2],A=y[3];else{x=O(h,n,-_),h=x.x,n=x.y,x=O(v,b,-_),v=x.x,b=x.y,h===v&&n===b&&(v+=1,b+=1);var L=(h-v)/2,W=(n-b)/2,F=L*L/(i*i)+W*W/(a*a);F>1&&(F=Math.sqrt(F),i=F*i,a=F*a);var K=i*i,V=a*a,k=(u===f?-1:1)*Math.sqrt(Math.abs((K*V-K*W*W-V*L*L)/(K*W*W+V*L*L)));P=k*i*W/a+(h+v)/2,A=k*-a*L/i+(n+b)/2,m=Math.asin(((n-A)/a).toFixed(9)),S=Math.asin(((b-A)/a).toFixed(9)),m=h<P?Math.PI-m:m,S=v<P?Math.PI-S:S,m<0&&(m=Math.PI*2+m),S<0&&(S=Math.PI*2+S),f&&m>S&&(m=m-Math.PI*2),!f&&S>m&&(S=S-Math.PI*2)}var Z=S-m;if(Math.abs(Z)>g){var X=S,it=v,ft=b;S=m+g*(f&&S>m?1:-1),v=P+i*Math.cos(S),b=A+a*Math.sin(S),M=r(v,b,i,a,o,0,f,it,ft,[S,X,P,A])}Z=S-m;var pt=Math.cos(m),ut=Math.sin(m),It=Math.cos(S),Nt=Math.sin(S),Rt=Math.tan(Z/4),Mt=4/3*i*Rt,bt=4/3*a*Rt,At=[h,n],rt=[h+Mt*ut,n-bt*pt],Pt=[v+Mt*Nt,b-bt*It],z=[v,b];if(rt[0]=2*At[0]-rt[0],rt[1]=2*At[1]-rt[1],y)return[rt,Pt,z].concat(M);M=[rt,Pt,z].concat(M).join().split(",");for(var Q=[],gt=0,et=M.length;gt<et;gt++)Q[gt]=gt%2?O(M[gt-1],M[gt],_).y:O(M[gt],M[gt+1],_).x;return Q},s=function(h,n,i,a){return[h,n,i,a,i,a]},c=function(h,n,i,a,o,u){var f=1/3,v=2/3;return[f*h+v*i,f*n+v*a,f*o+v*i,f*u+v*a,o,u]};E.exports=function(h,n){var i=t(h),a=n&&t(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],v=[],b="",y="",g=void 0,_=function(W,F,K){var V=void 0,k=void 0;if(!W)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(!(W[0]in{T:1,Q:1})&&(F.qx=F.qy=null),W[0]){case"M":F.X=W[1],F.Y=W[2];break;case"A":W=["C"].concat(l.apply(0,[F.x,F.y].concat(W.slice(1))));break;case"S":K==="C"||K==="S"?(V=F.x*2-F.bx,k=F.y*2-F.by):(V=F.x,k=F.y),W=["C",V,k].concat(W.slice(1));break;case"T":K==="Q"||K==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),W=["C"].concat(c(F.x,F.y,F.qx,F.qy,W[1],W[2]));break;case"Q":F.qx=W[1],F.qy=W[2],W=["C"].concat(c(F.x,F.y,W[1],W[2],W[3],W[4]));break;case"L":W=["C"].concat(s(F.x,F.y,W[1],W[2]));break;case"H":W=["C"].concat(s(F.x,F.y,W[1],F.y));break;case"V":W=["C"].concat(s(F.x,F.y,F.x,W[1]));break;case"Z":W=["C"].concat(s(F.x,F.y,F.X,F.Y));break;default:break}return W},M=function(W,F){if(W[F].length>7){W[F].shift();for(var K=W[F];K.length;)f[F]="A",a&&(v[F]="A"),W.splice(F++,0,["C"].concat(K.splice(0,6)));W.splice(F,1),g=Math.max(i.length,a&&a.length||0)}},x=function(W,F,K,V,k){W&&F&&W[k][0]==="M"&&F[k][0]!=="M"&&(F.splice(k,0,["M",V.x,V.y]),K.bx=0,K.by=0,K.x=W[k][1],K.y=W[k][2],g=Math.max(i.length,a&&a.length||0))};g=Math.max(i.length,a&&a.length||0);for(var m=0;m<g;m++){i[m]&&(b=i[m][0]),b!=="C"&&(f[m]=b,m&&(y=f[m-1])),i[m]=_(i[m],o,y),f[m]!=="A"&&b==="C"&&(f[m]="C"),M(i,m),a&&(a[m]&&(b=a[m][0]),b!=="C"&&(v[m]=b,m&&(y=v[m-1])),a[m]=_(a[m],u,y),v[m]!=="A"&&b==="C"&&(v[m]="C"),M(a,m)),x(i,a,o,u,m),x(a,i,u,o,m);var S=i[m],P=a&&a[m],A=S.length,O=a&&P.length;o.x=S[A-2],o.y=S[A-1],o.bx=parseFloat(S[A-4])||o.x,o.by=parseFloat(S[A-3])||o.y,u.bx=a&&(parseFloat(P[O-4])||u.x),u.by=a&&(parseFloat(P[O-3])||u.y),u.x=a&&P[O-2],u.y=a&&P[O-1]}return a?[i,a]:i}},function(E,T,e){var t=e(181);E.exports=function(s,c,r,h,n){if(n)return[["M",+s+ +n,c],["l",r-n*2,0],["a",n,n,0,0,1,n,n],["l",0,h-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-r,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-h],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",s,c],["l",r,0],["l",0,h],["l",-r,0],["z"]];return i.parsePathArray=t,i}},function(E,T,e){var t=e(38),l=function(c){return t(c).toLowerCase()};E.exports=l},function(E,T,e){var t=e(38),l=function(c){var r=t(c);return r.charAt(0).toLowerCase()+r.substring(1)};E.exports=l},function(E,T,e){var t=e(38),l=function(c){return t(c).toUpperCase()};E.exports=l},function(E,T,e){var t=e(38),l=function(c){var r=t(c);return r.charAt(0).toUpperCase()+r.substring(1)};E.exports=l},function(E,T){var e={}.toString,t=function(s){return e.call(s).replace(/^\[object /,"").replace(/\]$/,"")};E.exports=t},function(E,T,e){var t=e(17),l=function(c){return t(c,"Boolean")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Date")};E.exports=l},function(E,T){var e=Object.prototype,t=function(s){var c=s&&s.constructor,r=typeof c=="function"&&c.prototype||e;return s===r};E.exports=t},function(E,T){var e=function(){var t={};return function(l){return l=l||"g",t[l]?t[l]+=1:t[l]=1,l+t[l]}}();E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(29),l=r(t),s=e(58),c=r(s);function r(W){return W&&W.__esModule?W:{default:W}}for(var h=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],n=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],i=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],a=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],o=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],u=[],f=0;f<a.length;f+=1)for(var v=0;v<n.length;v+=1)u.push({prop:""+o[f]+i[v],event:a[f]+":"+n[v]});var b=h.concat(u);function y(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function g(W){var F=y();return c.default.map(F,function(K){var V=K.event;return K.event=W+":"+V,K}),F}var _=y(),M={onMouseEnter:l.default.object,onMouseMove:l.default.object,onMouseLeave:l.default.object,onClick:l.default.oneOfType([l.default.object,l.default.func]),onDblClick:l.default.object,onMouseDown:l.default.object,onMouseUp:l.default.object,onTouchStart:l.default.object,onTouchMove:l.default.object,onTouchEnd:l.default.object},x={onMouseEnter:l.default.func,onMouseMove:l.default.func,onMouseLeave:l.default.func,onClick:l.default.func,onDblClick:l.default.func,onMouseDown:l.default.func,onMouseUp:l.default.func,onTouchStart:l.default.func,onTouchMove:l.default.func,onTouchEnd:l.default.func};function m(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];c.default.each(F,function(V){var k=V.prop,Z=V.event,X=K[k];if(c.default.isFunction(X))W.on(Z,X);else if(c.default.isObject(X))for(var it in X)X[it]!==void 0&&W.on(it+":"+Z,X[it])})}function S(W,F){m(W,_,F)}function P(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2],V=arguments[3];c.default.each(F,function(k){var Z=k.prop,X=k.event,it=K[Z],ft=V[Z],pt=void 0;if(!c.default.shallowEqual(it,ft)){if(c.default.isFunction(it)&&c.default.isFunction(ft))W.off(X,it),W.on(X,ft);else if(c.default.isObject(it)&&c.default.isObject(ft)){for(pt in it)Object.prototype.hasOwnProperty.call(it,pt)&&W.off(pt+":"+X,it[pt]);for(pt in ft)Object.prototype.hasOwnProperty.call(ft,pt)&&W.on(pt+":"+X,ft[pt])}}})}function A(W,F,K){P(W,_,F,K)}function O(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];c.default.each(F,function(V){var k=V.prop,Z=V.event,X=K[k];if(c.default.isFunction(X))W.off(Z,X);else if(c.default.isObject(X))for(var it in X)Object.prototype.hasOwnProperty.call(X,it)&&W.off(it+":"+Z,X[it])})}function L(W,F){O(W,_,F)}T.default={baseEventObjectTypes:M,baseEventFuncTypes:x,genBaseEvents:y,genItemBaseEvents:g,bindEvents:m,bindBaseEvents:S,updateEvents:P,updateBaseEvents:A,unbindEvents:O,unbindBaseEvents:L,chartEvents:b}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},l=e(45),s=f(l),c=e(88),r=e(195),h=u(r),n=e(196),i=u(n),a=e(87),o=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function f(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(M[x]=_[x]);return M.default=_,M}function v(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function b(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var y=h.default.COORD_FUNC_PROPS,g=h.default.GEOM_FUNC_PROPS;T.default={createChart:function(M){var x=M.chart,m=x.props.forceFit;x.props.forceFit=!1;var S=new s.Chart(x.props);return x.props.afterChartInitialized&&x.props.afterChartInitialized(S),m&&S.forceFit(),x.g2Instance=S,S},executeChartConfig:function(M,x){var m=x.chart,S=m.props;M.coord("rect",{}),M.source(S.data,S.scale),(!x.facet&&!S.axis||!x.facet||S.axis===!1)&&M.axis(!1),M.legend(!1),M.tooltip(!1),S.filter&&S.filter.forEach(function(P){M.filter(P[0],P[1])}),i.default.bindEvents(M,i.default.chartEvents,S),i.default.bindBaseEvents(M,S)},coord:function(M,x){var m=x.coord;if(!(!m||m.g2Instance)){var S=m.props,P=S.type,A=b(S,["type"]),O=M.coord(P||"rect",c.Util.without(A,y));c.Prop.init(y,A,function(L,W){W==="reflect"?c.Util.each(L,function(F){return O[W](F)}):W==="transpose"?L[0]===!0&&O[W].apply(O,v(L)):O[W].apply(O,v(L))}),m.g2Instance=O}},createLabel:function(M,x){if(!(!x||x.g2Instance)){var m=x.props,S=m.content,P=b(m,["content"]);S&&(c.Util.isArray(S)?x.g2Instance=M.label(S[0],S[1],P):x.g2Instance=M.label(S,P))}},createGeom:function(M,x){if(x.g2Instance){x.label&&this.createLabel(x.g2Instance,x.label);return}var m=x.props,S=M[m.type||"interval"]();m.adjust&&S.adjust(m.adjust),c.Prop.init(g,m,function(P,A){S[A].apply(S,v(P))}),x.g2Instance=S,this.createLabel(S,x.label)},geoms:function(M,x){var m=x.geoms;if(!!m)for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&this.createGeom(M,m[S])},legends:function(M,x){var m=x.legends;for(var S in m)if(m[S]){var P=m[S];if(P.g2Instance)return;var A=P.props,O=A.name,L=A.visible,W=b(A,["name","visible"]),F=L;Object.prototype.hasOwnProperty.call(P.props,"visible")||(F=!0);var K=F&&W;P.g2Instance=M.legend.apply(M,v(O?[O,K]:[K]))}},tooltip:function(M,x){var m=x.tooltip;!m||m.g2Instance||(m.g2Instance=M.tooltip(t({},m.props)))},createAxis:function(M,x){if(!x.g2Instance){var m=x.props,S=m.name,P=m.visible,A=b(m,["name","visible"]);P||!Object.prototype.hasOwnProperty.call(x.props,"visible")?x.g2Instance=M.axis(S,A):x.g2Instance=M.axis(S,!1)}},axises:function(M,x){var m=x.axises;for(var S in m)m[S]&&this.createAxis(M,m[S])},views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.createView(M,m[S])},createView:function(M,x){if(x.parentInfo.name!=="Facet"){if(x.g2Instance){x.filter&&x.filter.forEach(function(V){x.g2Instance.filter(V[0],V[1])}),this.coord(x.g2Instance,x),this.axises(x.g2Instance,x),this.geoms(x.g2Instance,x),this.guide(x.g2Instance,x.guide);return}var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,L=m.filter,W=m.geoms,F=b(m,["scale","data","instance","axis","filter","geoms"]),K=void 0;A?K=A:K=M.view(t({},F)),P&&K.source(P,S),S&&K.scale(S),L&&L.forEach(function(V){K.filter(V[0],V[1])}),O===!0||A||K.axis(!1),x.g2Instance=K,this.coord(K,x),this.axises(K,x),this.geoms(K,x),this.guide(K,x.guide)}},facetView:function(M,x){var m=x.props,S=m.scale,P=m.data,A=m.axis,O=m.geoms,L=b(m,["scale","data","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),A===!1&&M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide),o.default.mergeView(x,!0)},guide:function(M,x){if(!!x){var m=x.elements;for(var S in m)if(m[S]){var P=m[S];if(!P.g2Instance){var A=P.props,O=A.type,L=b(A,["type"]);P.g2Instance=M.guide()[P.type](L)}}}},facet:function(M,x){var m=this,S=x.facet;if(!(!S||S.g2Instance)){var P=S.props,A=P.children,O=P.type,L=b(P,["children","type"]);if(!A){M.facet(O,L);return}var W=x.views,F=null;for(var K in W)if(W[K]&&W[K].parentInfo.name==="Facet"&&W[K].parentInfo.id===S.id){F=W[K];break}F&&(o.default.mergeView(F,!0),L.eachView=function(V){m.facetView(V,F)},M.facet(O,L))}},synchronizeG2Add:function(M,x){this.coord(M,x),this.axises(M,x),this.legends(M,x),this.tooltip(M,x),this.geoms(M,x),this.facet(M,x),this.views(M,x),this.guide(M,x.guide)},synchronizeG2Views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.synchronizeG2View(m[S].g2Instance,m[S])},synchronizeG2View:function(M,x){M.clear(),this.clearViewG2Instance(x);var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,L=m.geoms,W=b(m,["scale","data","instance","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),O===!0||A||M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide)},clearViewG2Instance:function(M){M.coord&&delete M.coord.g2Instance,M.axises&&Object.keys(M.axises).forEach(function(x){delete M.axises[x].g2Instance}),M.geoms&&Object.keys(M.geoms).forEach(function(x){delete M.geoms[x].g2Instance,M.geoms[x].label&&delete M.geoms[x].label.g2Instance}),M.guide&&M.guide.elements&&Object.keys(M.guide.elements).forEach(function(x){delete M.guide.elements[x].g2Instance})}}},function(E,T,e){"use strict";e.d(T,"b",function(){return t}),e.d(T,"a",function(){return l});var t=Math.PI/180,l=180/Math.PI},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(449);e.d(T,"easeLinear",function(){return t.a});var l=e(451);e.d(T,"easeQuad",function(){return l.a}),e.d(T,"easeQuadIn",function(){return l.b}),e.d(T,"easeQuadOut",function(){return l.c}),e.d(T,"easeQuadInOut",function(){return l.a});var s=e(446);e.d(T,"easeCubic",function(){return s.a}),e.d(T,"easeCubicIn",function(){return s.b}),e.d(T,"easeCubicOut",function(){return s.c}),e.d(T,"easeCubicInOut",function(){return s.a});var c=e(450);e.d(T,"easePoly",function(){return c.a}),e.d(T,"easePolyIn",function(){return c.b}),e.d(T,"easePolyOut",function(){return c.c}),e.d(T,"easePolyInOut",function(){return c.a});var r=e(452);e.d(T,"easeSin",function(){return r.a}),e.d(T,"easeSinIn",function(){return r.b}),e.d(T,"easeSinOut",function(){return r.c}),e.d(T,"easeSinInOut",function(){return r.a});var h=e(448);e.d(T,"easeExp",function(){return h.a}),e.d(T,"easeExpIn",function(){return h.b}),e.d(T,"easeExpOut",function(){return h.c}),e.d(T,"easeExpInOut",function(){return h.a});var n=e(445);e.d(T,"easeCircle",function(){return n.a}),e.d(T,"easeCircleIn",function(){return n.b}),e.d(T,"easeCircleOut",function(){return n.c}),e.d(T,"easeCircleInOut",function(){return n.a});var i=e(444);e.d(T,"easeBounce",function(){return i.a}),e.d(T,"easeBounceIn",function(){return i.b}),e.d(T,"easeBounceOut",function(){return i.a}),e.d(T,"easeBounceInOut",function(){return i.c});var a=e(443);e.d(T,"easeBack",function(){return a.a}),e.d(T,"easeBackIn",function(){return a.b}),e.d(T,"easeBackOut",function(){return a.c}),e.d(T,"easeBackInOut",function(){return a.a});var o=e(447);e.d(T,"easeElastic",function(){return o.a}),e.d(T,"easeElasticIn",function(){return o.b}),e.d(T,"easeElasticOut",function(){return o.a}),e.d(T,"easeElasticInOut",function(){return o.c})},function(E,T,e){"use strict";var t=e(92);T.a=function(l,s){var c=s?s.length:0,r=l?Math.min(c,l.length):0,h=new Array(r),n=new Array(c),i;for(i=0;i<r;++i)h[i]=e.i(t.a)(l[i],s[i]);for(;i<c;++i)n[i]=s[i];return function(a){for(i=0;i<r;++i)n[i]=h[i](a);return n}}},function(E,T,e){"use strict";var t=e(91);T.a=function(l){var s=l.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=l[(r+s-1)%s],n=l[r%s],i=l[(r+1)%s],a=l[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,l){var s=new Date;return t=+t,l-=t,function(c){return s.setTime(t+l*c),s}}},function(E,T,e){"use strict";var t=e(92);T.a=function(l,s){var c={},r={},h;(l===null||typeof l!="object")&&(l={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in l?c[h]=e.i(t.a)(l[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";e.d(T,"b",function(){return h}),e.d(T,"c",function(){return n});var t=e(12),l=e(91),s=e(201),c=e(41);T.a=function i(a){var o=e.i(c.c)(a);function u(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),y=o(f.g,v.g),g=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=y(M),f.b=g(M),f.opacity=_(M),f+""}}return u.gamma=i,u}(1);function r(i){return function(a){var o=a.length,u=new Array(o),f=new Array(o),v=new Array(o),b,y;for(b=0;b<o;++b)y=e.i(t.e)(a[b]),u[b]=y.r||0,f[b]=y.g||0,v[b]=y.b||0;return u=i(u),f=i(f),v=i(v),y.opacity=1,function(g){return y.r=u(g),y.g=f(g),y.b=v(g),y+""}}}var h=r(l.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(59),l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(l.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=l.lastIndex=s.lastIndex=0,a,o,u,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=l.exec(h))&&(o=s.exec(n));)(u=o.index)>i&&(u=n.slice(i,u),v[f]?v[f]+=u:v[++f]=u),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(u=n.slice(i),v[f]?v[f]+=u:v[++f]=u),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(y){for(var g=0,_;g<n;++g)v[(_=b[g]).i]=_.x(y);return v.join("")})}},function(E,T,e){"use strict";T.a=c;var t=e(96),l=e(95),s=function(r,h){return(e.i(l.a)(h)?l.b:c)(r,h)};function c(r,h){var n=h?h.length:0,i=r?Math.min(n,r.length):0,a=new Array(i),o=new Array(n),u;for(u=0;u<i;++u)a[u]=e.i(t.a)(r[u],h[u]);for(;u<n;++u)o[u]=h[u];return function(f){for(u=0;u<i;++u)o[u]=a[u](f);return o}}},function(E,T,e){"use strict";var t=e(93);T.a=function(l){var s=l.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=l[(r+s-1)%s],n=l[r%s],i=l[(r+1)%s],a=l[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,l){var s=new Date;return t=+t,l=+l,function(c){return s.setTime(t*(1-c)+l*c),s}}},function(E,T,e){"use strict";var t=e(96);T.a=function(l,s){var c={},r={},h;(l===null||typeof l!="object")&&(l={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in l?c[h]=e.i(t.a)(l[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";var t=e(12),l=e(93),s=e(208),c=e(32);T.a=function i(a){var o=e.i(c.c)(a);function u(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),y=o(f.g,v.g),g=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=y(M),f.b=g(M),f.opacity=_(M),f+""}}return u.gamma=i,u}(1);function r(i){return function(a){var o=a.length,u=new Array(o),f=new Array(o),v=new Array(o),b,y;for(b=0;b<o;++b)y=e.i(t.e)(a[b]),u[b]=y.r||0,f[b]=y.g||0,v[b]=y.b||0;return u=i(u),f=i(f),v=i(v),y.opacity=1,function(g){return y.r=u(g),y.g=f(g),y.b=v(g),y+""}}}var h=r(l.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(60),l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(l.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=l.lastIndex=s.lastIndex=0,a,o,u,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=l.exec(h))&&(o=s.exec(n));)(u=o.index)>i&&(u=n.slice(i,u),v[f]?v[f]+=u:v[++f]=u),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(u=n.slice(i),v[f]?v[f]+=u:v[++f]=u),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(y){for(var g=0,_;g<n;++g)v[(_=b[g]).i]=_.x(y);return v.join("")})}},function(E,T,e){"use strict";T.a=function(t){return function(){return this.matches(t)}}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){return typeof l=="string"?new t.b([[document.querySelector(l)]],[document.documentElement]):new t.b([[l]],t.c)}},function(E,T,e){"use strict";T.b=s;var t=e(217),l=e(18);T.a=function(){return new l.b(this._enter||this._groups.map(t.a),this._parents)};function s(c,r){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=r}s.prototype={constructor:s,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,r){return this._parent.insertBefore(c,r)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}}},function(E,T,e){"use strict";T.a=function(t){return new Array(t.length)}},function(E,T,e){"use strict";T.a=r;var t=e(102);function l(h){return function(){this.style.removeProperty(h)}}function s(h,n,i){return function(){this.style.setProperty(h,n,i)}}function c(h,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(h):this.style.setProperty(h,a,i)}}T.b=function(h,n,i){return arguments.length>1?this.each((n==null?l:typeof n=="function"?c:s)(h,n,i==null?"":i)):r(this.node(),h)};function r(h,n){return h.style.getPropertyValue(n)||e.i(t.a)(h).getComputedStyle(h,null).getPropertyValue(n)}},function(E,T,e){"use strict";function t(){return[]}T.a=function(l){return l==null?t:function(){return this.querySelectorAll(l)}}},function(E,T,e){"use strict";var t=e(13);T.a=function(l,s){var c=l.__transition,r,h,n=!0,i;if(!!c){s=s==null?null:s+"";for(i in c){if((r=c[i]).name!==s){n=!1;continue}h=r.state>t.a&&r.state<t.b,r.state=t.c,r.timer.stop(),r.on.call(h?"interrupt":"cancel",l,l.__data__,r.index,r.group),delete c[i]}n&&delete l.__transition}}},function(E,T,e){"use strict";var t=e(12),l=e(94);T.a=function(s,c){var r;return(typeof c=="number"?l.b:c instanceof t.f?l.c:(r=e.i(t.f)(c))?(c=r,l.c):l.d)(s,c)}},function(E,T,e){var t;(function(l){"use strict";var s={},c=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=/\d\d?/,h=/\d{3}/,n=/\d{4}/,i=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,o=function(){};function u(m,S){for(var P=[],A=0,O=m.length;A<O;A++)P.push(m[A].substr(0,S));return P}function f(m){return function(S,P,A){var O=A[m].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~O&&(S.month=O)}}function v(m,S){for(m=String(m),S=S||2;m.length<S;)m="0"+m;return m}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],g=u(y,3),_=u(b,3);s.i18n={dayNamesShort:_,dayNames:b,monthNamesShort:g,monthNames:y,amPm:["am","pm"],DoFn:function(S){return S+["th","st","nd","rd"][S%10>3?0:(S-S%10!=10)*S%10]}};var M={D:function(m){return m.getDate()},DD:function(m){return v(m.getDate())},Do:function(m,S){return S.DoFn(m.getDate())},d:function(m){return m.getDay()},dd:function(m){return v(m.getDay())},ddd:function(m,S){return S.dayNamesShort[m.getDay()]},dddd:function(m,S){return S.dayNames[m.getDay()]},M:function(m){return m.getMonth()+1},MM:function(m){return v(m.getMonth()+1)},MMM:function(m,S){return S.monthNamesShort[m.getMonth()]},MMMM:function(m,S){return S.monthNames[m.getMonth()]},YY:function(m){return String(m.getFullYear()).substr(2)},YYYY:function(m){return v(m.getFullYear(),4)},h:function(m){return m.getHours()%12||12},hh:function(m){return v(m.getHours()%12||12)},H:function(m){return m.getHours()},HH:function(m){return v(m.getHours())},m:function(m){return m.getMinutes()},mm:function(m){return v(m.getMinutes())},s:function(m){return m.getSeconds()},ss:function(m){return v(m.getSeconds())},S:function(m){return Math.round(m.getMilliseconds()/100)},SS:function(m){return v(Math.round(m.getMilliseconds()/10),2)},SSS:function(m){return v(m.getMilliseconds(),3)},a:function(m,S){return m.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(m,S){return m.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(m){var S=m.getTimezoneOffset();return(S>0?"-":"+")+v(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)}},x={D:[r,function(m,S){m.day=S}],Do:[new RegExp(r.source+i.source),function(m,S){m.day=parseInt(S,10)}],M:[r,function(m,S){m.month=S-1}],YY:[r,function(m,S){var P=new Date,A=+(""+P.getFullYear()).substr(0,2);m.year=""+(S>68?A-1:A)+S}],h:[r,function(m,S){m.hour=S}],m:[r,function(m,S){m.minute=S}],s:[r,function(m,S){m.second=S}],YYYY:[n,function(m,S){m.year=S}],S:[/\d/,function(m,S){m.millisecond=S*100}],SS:[/\d{2}/,function(m,S){m.millisecond=S*10}],SSS:[h,function(m,S){m.millisecond=S}],d:[r,o],ddd:[i,o],MMM:[i,f("monthNamesShort")],MMMM:[i,f("monthNames")],a:[i,function(m,S,P){var A=S.toLowerCase();A===P.amPm[0]?m.isPm=!1:A===P.amPm[1]&&(m.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(m,S){S==="Z"&&(S="+00:00");var P=(S+"").match(/([\+\-]|\d\d)/gi),A;P&&(A=+(P[1]*60)+parseInt(P[2],10),m.timezoneOffset=P[0]==="+"?A:-A)}]};x.dd=x.d,x.dddd=x.ddd,x.DD=x.D,x.mm=x.m,x.hh=x.H=x.HH=x.h,x.MM=x.M,x.ss=x.s,x.A=x.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(m,S,P){var A=P||s.i18n;if(typeof m=="number"&&(m=new Date(m)),Object.prototype.toString.call(m)!=="[object Date]"||isNaN(m.getTime()))throw new Error("Invalid Date in fecha.format");S=s.masks[S]||S||s.masks.default;var O=[];return S=S.replace(a,function(L,W){return O.push(W),"??"}),S=S.replace(c,function(L){return L in M?M[L](m,A):L.slice(1,L.length-1)}),S.replace(/\?\?/g,function(){return O.shift()})},s.parse=function(m,S,P){var A=P||s.i18n;if(typeof S!="string")throw new Error("Invalid format in fecha.parse");if(S=s.masks[S]||S,m.length>1e3)return!1;var O=!0,L={};if(S.replace(c,function(K){if(x[K]){var V=x[K],k=m.search(V[0]);~k?m.replace(V[0],function(Z){return V[1](L,Z,A),m=m.substr(k+Z.length),Z}):O=!1}return x[K]?"":K.slice(1,K.length-1)}),!O)return!1;var W=new Date;L.isPm===!0&&L.hour!=null&&+L.hour!=12?L.hour=+L.hour+12:L.isPm===!1&&+L.hour==12&&(L.hour=0);var F;return L.timezoneOffset!=null?(L.minute=+(L.minute||0)-+L.timezoneOffset,F=new Date(Date.UTC(L.year||W.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0))):F=new Date(L.year||W.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0),F},typeof E!="undefined"&&E.exports?E.exports=s:(t=function(){return s}.call(T,e,T,E),t!==void 0&&(E.exports=t))})(this)},function(E,T,e){"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";E.exports=t},function(E,T,e){"use strict";E.exports=e(542)},function(E,T){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){typeof window=="object"&&(e=window)}E.exports=e},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(33),s=e(2),c=1/2,r=1/2,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){this.marginRatio=c,this.dodgeRatio=r,this.adjustNames=["x","y"]},a.getDodgeOffset=function(u,f,v){var b=this,y=u.pre,g=u.next,_=g-y,M=_*b.dodgeRatio/v,x=b.marginRatio*M,m=1/2*(_-v*M-(v-1)*x)+((f+1)*M+f*x)-1/2*M-1/2*_;return(y+g)/2+m},a.processAdjust=function(u){var f=this,v=u.length,b=f.xField;s(u,function(y,g){for(var _=0,M=y.length;_<M;_++){var x=y[_],m=x[b],S={pre:M===1?m-1:m-.5,next:M===1?m+1:m+.5},P=f.getDodgeOffset(S,g,v);x[b]=P}})},i}(l);l.Dodge=h,E.exports=h},function(E,T,e){var t=e(10),l=e(33),s=e(226),c=e(231),r=e(106),h=e(229),n=e(230);t(l.prototype,r),t(s.prototype,r,h),t(c.prototype,n),l.Jitter=e(228),l.Symmetric=e(232),l.Dodge=s,l.Stack=c,E.exports=l},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(2),s=e(10),c={merge:e(54)},r=e(33),h=e(106),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},o.processAdjust=function(f){var v=this,b=c.merge(f);v.adjDataArray=f,v.mergeData=b,v.adjustData(f,b),v.adjFrames=null,v.mergeData=null},o.getAdjustOffset=function(f,v){var b=Math.random(),y=v-f,g=y*.05;return f+g+y*.9*b},o._adjustGroup=function(f,v,b,y){var g=this,_=g.getAdjustRange(v,b,y);l(f,function(M){M[v]=g.getAdjustOffset(_.pre,_.next)})},o.adjustDim=function(f,v,b){var y=this,g=y.groupData(b,f);l(g,function(_,M){M=parseFloat(M),y._adjustGroup(_,f,M,v)})},a}(r);s(n.prototype,h),r.Jitter=n,E.exports=n},function(E,T,e){var t={merge:e(54),values:e(79)},l=e(165),s=e(2);E.exports={processAdjust:function(r){var h=this,n=t.merge(r),i=h.dodgeBy,a=r;i&&(a=l(n,i)),h.cacheMap={},h.adjDataArray=a,h.mergeData=n,h.adjustData(a,n),h.adjDataArray=null,h.mergeData=null},getDistribution:function(r){var h=this,n=h.adjDataArray,i=h.cacheMap,a=i[r];return a||(a={},s(n,function(o,u){var f=t.values(o,r);f.length||f.push(0),s(f,function(v){a[v]||(a[v]=[]),a[v].push(u)})}),i[r]=a),a},adjustDim:function(r,h,n,i,a){var o=this,u=o.getDistribution(r),f=o.groupData(n,r);s(f,function(v,b){b=parseFloat(b);var y;h.length===1?y={pre:h[0]-1,next:h[0]+1}:y=o.getAdjustRange(r,b,h),s(v,function(g){var _=g[r],M=u[_],x=M.indexOf(a);g[r]=o.getDodgeOffset(y,x,M.length)})})}}},function(E,T){E.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var l=this,s=l.xField,c=l.yField||"y",r=l.height,h={};l.reverseOrder&&(t=t.slice(0).reverse());for(var n=0,i=t.length;n<i;n++)for(var a=t[n],o=0,u=a.length;o<u;o++){var f=a[o],v=f.size||l.size,b=v*2/r,y=f[s];h[y]||(h[y]=b/2),f[c]=h[y],h[y]+=b}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(4),s=e(6),c=e(33),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){this.xField=null,this.yField=null},i.processAdjust=function(o){this.processStack(o)},i.processStack=function(o){var u=this,f=u.xField,v=u.yField,b=o.length,y={positive:{},negative:{}};u.reverseOrder&&(o=o.slice(0).reverse());for(var g=0;g<b;g++)for(var _=o[g],M=0,x=_.length;M<x;M++){var m=_[M],S=m[f]||0,P=m[v],A=S.toString();if(P=l(P)?P[1]:P,!s(P)){var O=P>=0?"positive":"negative";y[O][A]||(y[O][A]=0),m[v]=[y[O][A],P+y[O][A]],y[O][A]+=P}}},n}(c);c.Stack=r,E.exports=r},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(2),s=e(168),c=e(4),r={merge:e(54)},h=e(33),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},o._getMax=function(f){var v=this,b=v.mergeData,y=s(b,function(M){var x=M[f];return c(x)?Math.max.apply(null,x):x}),g=y[f],_=c(g)?Math.max.apply(null,g):g;return _},o._getXValuesMax=function(){var f=this,v=f.yField,b=f.xField,y={},g=f.mergeData;return l(g,function(_){var M=_[b],x=_[v],m=c(x)?Math.max.apply(null,x):x;y[M]=y[M]||0,y[M]<m&&(y[M]=m)}),y},o.processAdjust=function(f){var v=this,b=r.merge(f);v.mergeData=b,v._processSymmetric(f),v.mergeData=null},o._processSymmetric=function(f){var v=this,b=v.xField,y=v.yField,g=v._getMax(y),_=f[0][0],M;_&&c(_[y])&&(M=v._getXValuesMax()),l(f,function(x){l(x,function(m){var S=m[y],P;if(c(S)){var A=m[b],O=M[A];P=(g-O)/2;var L=[];l(S,function(W){L.push(P+W)}),m[y]=L}else P=(g-S)/2,m[y]=[P,S+P]})})},a}(h);h.Symmetric=n,E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(15),s=e(107),c=e(34),r=function(h){t(n,h);function n(a){var o;return o=h.call(this,a)||this,o.names=["color"],o.type="color",o.gradient=null,l(o.values)&&(o.linear=!0),o}var i=n.prototype;return i.getLinearValue=function(o){var u=this.gradient;if(!u){var f=this.values;u=s.gradient(f),this.gradient=u}return u(o)},n}(c);E.exports=r},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["opacity"],n.type="opacity",n.gradient=null,n}return r}(l);E.exports=s},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(6),s=e(4),c=e(2),r=e(34),h=function(n){t(i,n);function i(o){var u;return u=n.call(this,o)||this,u.names=["x","y"],u.type="position",u}var a=i.prototype;return a.mapping=function(u,f){var v=this.scales,b=this.coord,y=v[0],g=v[1],_,M,x;if(l(u)||l(f))return[];if(s(f)&&s(u)){_=[],M=[];for(var m=0,S=0,P=u.length,A=f.length;m<P&&S<A;m++,S++)x=b.convertPoint({x:y.scale(u[m]),y:g.scale(f[S])}),_.push(x.x),M.push(x.y)}else if(s(f))u=y.scale(u),M=[],c(f,function(L){L=g.scale(L),x=b.convertPoint({x:u,y:L}),_&&_!==x.x?(s(_)||(_=[_]),_.push(x.x)):_=x.x,M.push(x.y)});else if(s(u))f=g.scale(f),_=[],c(u,function(L){L=y.scale(L),x=b.convertPoint({x:L,y:f}),M&&M!==x.y?(s(M)||(M=[M]),M.push(x.y)):M=x.y,_.push(x.x)});else{u=y.scale(u),f=g.scale(f);var O=b.convertPoint({x:u,y:f});_=O.x,M=O.y}return[_,M]},i}(r);E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(n){var i;return i=c.call(this,n)||this,i.names=["shape"],i.type="shape",i.gradient=null,i}var h=r.prototype;return h.getLinearValue=function(i){var a=this.values,o=Math.round((a.length-1)*i);return a[o]},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["size"],n.type="size",n.gradient=null,n}return r}(l);E.exports=s},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=e(35),a=n.MatrixUtil.vec2,o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},b.parseTick=function(g,_,M){return{text:g,value:_/M}},b._getCirclePoint=function(g,_){var M=this,x=M.get("center");return _=_||M.get("radius"),{x:x.x+Math.cos(g)*_,y:x.y+Math.sin(g)*_}},b.getTickPoint=function(g){var _=this,M=_.get("startAngle"),x=_.get("endAngle"),m=M+(x-M)*g;return _._getCirclePoint(m)},b.getSideVector=function(g,_){var M=this,x=M.get("center"),m=[_.x-x.x,_.y-x.y];if(!n.isNil(g)){var S=a.length(m);a.scale(m,m,g/S)}return m},b.getSidePoint=function(g,_){var M=this,x=M.getSideVector(_,g);return{x:g.x+x[0],y:g.y+x[1]}},b.getTickEnd=function(g,_){var M=this,x=M.get("tickLine");return _=_||x.length,M.getSidePoint(g,_)},b.getTextAnchor=function(g){var _;return n.snapEqual(g[0],0)?_="center":g[0]>0?_="left":g[0]<0&&(_="right"),_},b.getLinePath=function(){var g=this,_=g.get("center"),M=_.x,x=_.y,m=g.get("radius"),S=m,P=g.get("startAngle"),A=g.get("endAngle"),O=g.get("inner"),L=[];if(Math.abs(A-P)===Math.PI*2)L=[["M",M,x],["m",0,-S],["a",m,S,0,1,1,0,2*S],["a",m,S,0,1,1,0,-2*S],["z"]];else{var W=g._getCirclePoint(P),F=g._getCirclePoint(A),K=Math.abs(A-P)>Math.PI?1:0,V=P>A?0:1;if(!O)L=[["M",M,x],["L",W.x,W.y],["A",m,S,0,K,V,F.x,F.y],["L",M,x]];else{var k=g.getSideVector(O*m,W),Z=g.getSideVector(O*m,F),X={x:k[0]+M,y:k[1]+x},it={x:Z[0]+M,y:Z[1]+x};L=[["M",X.x,X.y],["L",W.x,W.y],["A",m,S,0,K,V,F.x,F.y],["L",it.x,it.y],["A",m*O,S*O,0,K,Math.abs(V-1),X.x,X.y]]}}return L},b.addLabel=function(g,_,M){var x=this,m=x.get("label").offset||x.get("_labelOffset")||.001;_=x.getSidePoint(_,m),u.prototype.addLabel.call(this,g,_,M)},b.autoRotateLabels=function(){var g=this,_=g.get("ticks"),M=g.get("labelRenderer");if(M&&_.length>12){var x=g.get("radius"),m=g.get("startAngle"),S=g.get("endAngle"),P=S-m,A=P/(_.length-1),O=Math.sin(A/2)*x*2,L=g.getMaxLabelWidth(M);n.each(M.get("group").get("children"),function(W,F){var K=_[F],V=K.value*P+m,k=V%(Math.PI*2);L<O?(k<=0&&(V=V+Math.PI),k>Math.PI&&(V=V-Math.PI),V=V-Math.PI/2,W.attr("textAlign","center")):k>Math.PI/2?V=V-Math.PI:k<Math.PI/2*-1&&(V=V+Math.PI),W.rotateAtStart(V)})}},v}(i);E.exports=o},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,u=a.vec2,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},g.getLinePath=function(){var M=this,x=M.get("crp"),m=M.get("axisStart"),S=o.catmullRomToBezier(x);return S.unshift(["M",m.x,m.y]),S},g.getTickPoint=function(M){var x=this,m=x.get("startAngle"),S=x.get("endAngle"),P=m+(S-m)*M;return x._getHelixPoint(P)},g._getHelixPoint=function(M){var x=this,m=x.get("center"),S=x.get("a"),P=S*M+x.get("inner");return{x:m.x+Math.cos(M)*P,y:m.y+Math.sin(M)*P}},g.getSideVector=function(M,x){var m=this,S=m.get("center"),P=[x.x-S.x,x.y-S.y];if(M){var A=u.length(P);u.scale(P,P,M/A)}return P},g.getSidePoint=function(M,x){var m=this,S=m.getSideVector(x,M);return{x:M.x+S[0],y:M.y+S[1]}},g.getTickEnd=function(M,x){var m=this,S=m.get("tickLine");return x=x||S.length,m.getSidePoint(M,x)},y}(i);E.exports=f},function(E,T,e){var t=e(35);t.Base=t,t.Circle=e(238),t.Grid=e(108),t.Helix=e(239),t.Line=e(241),t.Polyline=e(242),E.exports=t},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(35),i=e(3),a=i.MatrixUtil,o=a.vec2,u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return i.mix({},_,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},y._getAvgLabelLength=function(_){var M=_.get("group").get("children");return M[1].attr("x")-M[0].attr("x")},y._getAvgLabelHeightSpace=function(_){var M=_.get("group").get("children");return M[1].attr("y")-M[0].attr("y")},y.getSideVector=function(_){var M=this,x=M.get("isVertical"),m=M.get("factor");if(!i.isNumber(_))return[0,0];var S=M.get("start"),P=M.get("end"),A=M.getAxisVector(),O=o.normalize([],A),L=!1;(x&&S.y<P.y||!x&&S.x>P.x)&&(L=!0);var W=o.vertical([],O,L);return o.scale([],W,_*m)},y.getAxisVector=function(){var _=this.get("start"),M=this.get("end");return[M.x-_.x,M.y-_.y]},y.getLinePath=function(){var _=this,M=_.get("start"),x=_.get("end"),m=[];return m.push(["M",M.x,M.y]),m.push(["L",x.x,x.y]),m},y.getTickEnd=function(_,M){var x=this,m=x.getSideVector(M);return{x:_.x+m[0],y:_.y+m[1]}},y.getTickPoint=function(_){var M=this,x=M.get("start"),m=M.get("end"),S=m.x-x.x,P=m.y-x.y;return{x:x.x+S*_,y:x.y+P*_}},y.renderTitle=function(){var _=this,M=_.get("title"),x=_.getTickPoint(.5),m=M.offset;if(i.isNil(m)){m=20;var S=_.get("labelsGroup");if(S){var P=_.getMaxLabelWidth(S),A=_.get("label").offset||_.get("_labelOffset");m+=P+A}}var O=M.textStyle,L=i.mix({},O);if(M.text){var W=_.getAxisVector();if(M.autoRotate&&i.isNil(O.rotate)){var F=0;if(!i.snapEqual(W[1],0)){var K=[1,0],V=[W[0],W[1]];F=o.angleTo(V,K,!0)}L.rotate=F*(180/Math.PI)}else i.isNil(O.rotate)||(L.rotate=O.rotate/180*Math.PI);var k=_.getSideVector(m),Z,X=M.position;X==="start"?Z={x:this.get("start").x+k[0],y:this.get("start").y+k[1]}:X==="end"?Z={x:this.get("end").x+k[0],y:this.get("end").y+k[1]}:Z={x:x.x+k[0],y:x.y+k[1]},L.x=Z.x,L.y=Z.y,L.text=M.text;var it=_.get("group"),ft=it.addShape("Text",{zIndex:2,attrs:L});ft.name="axis-title",_.get("appendInfo")&&ft.setSilent("appendInfo",_.get("appendInfo"))}},y.autoRotateLabels=function(){var _=this,M=_.get("labelRenderer"),x=_.get("title");if(M){var m=M.get("group"),S=m.get("children"),P=_.get("label").offset,A=12,O=x?x.offset:48;if(O<0)return;var L=_.getAxisVector(),W,F;if(i.snapEqual(L[0],0)&&x&&x.text)F=_.getMaxLabelWidth(M),F>O-P-A&&(W=Math.acos((O-P-A)/F)*-1);else if(i.snapEqual(L[1],0)&&S.length>1){var K=Math.abs(_._getAvgLabelLength(M));F=_.getMaxLabelWidth(M),F>K&&(W=Math.asin((O-P-A)*1.25/F))}if(W){var V=_.get("factor");i.each(S,function(k){k.rotateAtStart(W),i.snapEqual(L[1],0)&&(V>0?k.attr("textAlign","left"):k.attr("textAlign","right"))})}}},y.autoHideLabels=function(){var _=this,M=_.get("labelRenderer"),x,m,S=8;if(M){var P=M.get("group"),A=P.get("children"),O=_.getAxisVector();if(A.length<2)return;if(i.snapEqual(O[0],0)){var L=_.getMaxLabelHeight(M)+S,W=Math.abs(_._getAvgLabelHeightSpace(M));L>W&&(x=L,m=W)}else if(i.snapEqual(O[1],0)&&A.length>1){var F=_.getMaxLabelWidth(M)+S,K=Math.abs(_._getAvgLabelLength(M));F>K&&(x=F,m=K)}if(x&&m){var V=Math.ceil(x/m);i.each(A,function(k,Z){Z%V!=0&&k.attr("text","")})}}},b}(n);E.exports=u},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,u=a.vec2,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{type:"polyline"})},g.getLinePath=function(){var M=this,x=M.get("tickPoints"),m=M.get("start"),S=M.get("end"),P=[];P.push(m.x),P.push(m.y),n.each(x,function(O){P.push(O.x),P.push(O.y)}),P.push(S.x),P.push(S.y);var A=o.catmullRomToBezier(P);return A.unshift(["M",m.x,m.y]),A},g.getTickPoint=function(M,x){var m=this.get("tickPoints");return m[x]},g.getTickEnd=function(M,x,m){var S=this,P=S.get("tickLine"),A=x||P.length,O=S.getSideVector(A,M,m);return{x:M.x+O[0],y:M.y+O[1]}},g.getSideVector=function(M,x,m){var S=this,P;if(m===0){if(P=S.get("start"),P.x===x.x&&P.y===x.y)return[0,0]}else{var A=S.get("tickPoints");P=A[m-1]}var O=[x.x-P.x,x.y-P.y],L=u.normalize([],O),W=u.vertical([],L,!1);return u.scale([],W,M)},y}(i);E.exports=f},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=Math.PI,o=Math.atan;function u(v,b){var y=v.x-b.x,g=v.y-b.y,_;return g===0?y<0?_=a/2:_=270*a/180:y>=0&&g>0?_=a*2-o(y/g):y<=0&&g<0?_=a-o(y/g):y>0&&g<0?_=a+o(-y/g):y<0&&g>0&&(_=o(y/-g)),_}var f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},g.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=M.getCenter(),O=Math.sqrt((S.x-A.x)*(S.x-A.x)+(S.y-A.y)*(S.y-A.y)),L,W=u(S,A),F=u(P,A);if(F<W&&(F+=a*2),n.isNumberEqual(S.x,P.x)&&n.isNumberEqual(S.y,P.y)&&(m.get("start")[0]!==m.get("end")[0]||m.get("start")[1]!==m.get("end")[1]))L=[["M",S.x,S.y],["A",O,O,0,1,1,2*A.x-S.x,2*A.y-S.y],["A",O,O,0,1,1,S.x,S.y]];else{var K=(F-W)%(a*2),V=K>a?1:0;L=[["M",S.x,S.y],["A",O,O,0,V,1,P.x,P.y]]}var k=x.addShape("path",{zIndex:m.get("zIndex"),attrs:n.mix({path:L},m.get("style"))});k.name="guide-arc",m.get("appendInfo")&&k.setSilent("appendInfo",m.get("appendInfo")),m.set("el",k)}},y}(i);E.exports=f},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("position"));if(!!M){var x=g.addGroup();x.name="guide-data-marker";var m=_._getElementPosition(M),S=_.get("display"),P,A;if(S.line){var O=m.line;P=_._drawLine(O,x)}if(S.text&&_.get("content")){var L=m.text;A=_._drawText(L,x)}if(S.point){var W=m.point;_._drawPoint(W,x)}if(_.get("autoAdjust")){var F=x.getBBox(),K=F.minX,V=F.minY,k=F.maxX,Z=F.maxY,X=y.start,it=y.end;if(A){K<=X.x&&A.attr("textAlign","start"),k>=it.x&&A.attr("textAlign","end");var ft=_.get("direction");if(ft==="upward"&&V<=it.y||ft!=="upward"&&Z>=X.y){var pt,ut;ft==="upward"&&V<=it.y?(pt="top",ut=1):(pt="bottom",ut=-1),A.attr("textBaseline",pt);var It=0;if(_.get("display").line){It=_.get("lineLength");var Nt=[["M",M.x,M.y],["L",M.x,M.y+It*ut]];P.attr("path",Nt)}var Rt=M.y+(It+2)*ut;A.attr("y",Rt)}}}_.get("appendInfo")&&x.setSilent("appendInfo",_.get("appendInfo")),_.set("el",x)}},v._getElementPosition=function(y){var g=this,_=y.x,M=y.y,x=g.get("display").line?g.get("lineLength"):0,m=g.get("direction"),S=g.get("style").text;S.textBaseline=m==="upward"?"bottom":"top";var P=m==="upward"?-1:1,A={x:_,y:M},O={x:_,y:M},L={x:_,y:x*P+M},W={x:_,y:(x+2)*P+M};return{point:A,line:[O,L],text:W}},v._drawLine=function(y,g){var _=this,M=_.get("style").line,x=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y]],m=g.addShape("path",{attrs:n.mix({path:x},M)});return m},v._drawText=function(y,g){var _=this,M=this.get("style").text,x=g.addShape("text",{attrs:n.mix({text:_.get("content")},M,y)});return x},v._drawPoint=function(y,g){var _=this,M=_.get("style").point,x=g.addShape("circle",{attrs:n.mix({},M,y)});return x},f}(i);E.exports=a},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=e(109),a=e(20),o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},b.render=function(g,_,M){var x=this,m=x.get("lineLength")||0,S=x._getRegionData(g,M);if(!!S.length){var P=x._getBBox(S),A=[];A.push(["M",S[0].x,P.yMin-m]);for(var O=0,L=S.length;O<L;O++){var W=["L",S[O].x,S[O].y];A.push(W)}A.push(["L",S[S.length-1].x,P.yMin-m]);var F=x.get("style"),K=F.region,V=F.text,k=_.addGroup();k.name="guide-data-region",k.addShape("path",{attrs:n.mix({path:A},K)});var Z=x.get("content");Z&&k.addShape("Text",{attrs:n.mix({x:(P.xMin+P.xMax)/2,y:P.yMin-m,text:Z},V)}),x.get("appendInfo")&&k.setSilent("appendInfo",x.get("appendInfo")),x.set("el",k)}},b._getRegionData=function(g,_){for(var M=this,x=M.get("start"),m=M.get("end"),S=i.getFirstScale(M.get("xScales")).field,P=i.getFirstScale(M.get("yScales")).field,A=n.isArray(x)?x[0]:x[S],O=n.isArray(m)?m[0]:m[S],L,W=[],F=0,K=_.length;F<K;F++){var V=_[F];if(V[S]===A&&(L=F),F>=L){var k=M.parsePoint(g,[V[S],V[P]]);k&&W.push(k)}if(V[S]===O)break}return W},b._getBBox=function(g){for(var _=[],M=[],x=0;x<g.length;x++)_.push(g[x].x),M.push(g[x].y);var m=n.arrayUtil.getRange(_),S=n.arrayUtil.getRange(M);return{xMin:m.min,xMax:m.max,yMin:S.min,yMax:S.max}},v}(a);E.exports=o},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=n.DomUtil,a=e(20),o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},b.render=function(g,_){var M=this,x=M.parsePoint(g,M.get("position"));if(!!x){var m=_.get("canvas").get("el").parentNode,S=i.createDom('<div class="g-guide"></div>');m.appendChild(S);var P=M.get("htmlContent")||M.get("html");if(n.isFunction(P)){var A=M.get("xScales"),O=M.get("yScales");P=P(A,O)}var L=i.createDom(P);S.appendChild(L),i.modifyCSS(S,{position:"absolute"}),M._setDomPosition(S,L,x),M.set("el",S)}},b._setDomPosition=function(g,_,M){var x=this,m=x.get("alignX"),S=x.get("alignY"),P=i.getOuterWidth(_),A=i.getOuterHeight(_),O={x:M.x,y:M.y};m==="middle"&&S==="top"?O.x-=Math.round(P/2):m==="middle"&&S==="bottom"?(O.x-=Math.round(P/2),O.y-=Math.round(A)):m==="left"&&S==="bottom"?O.y-=Math.round(A):m==="left"&&S==="middle"?O.y-=Math.round(A/2):m==="left"&&S==="top"?(O.x=M.x,O.y=M.y):m==="right"&&S==="bottom"?(O.x-=Math.round(P),O.y-=Math.round(A)):m==="right"&&S==="middle"?(O.x-=Math.round(P),O.y-=Math.round(A/2)):m==="right"&&S==="top"?O.x-=Math.round(P):(O.x-=Math.round(P/2),O.y-=Math.round(A/2));var L=x.get("offsetX");L&&(O.x+=L);var W=x.get("offsetY");W&&(O.y+=W),i.modifyCSS(g,{top:Math.round(O.y)+"px",left:Math.round(O.x)+"px",visibility:"visible",zIndex:x.get("zIndex")})},b.clear=function(){var g=this,_=g.get("el");_&&_.parentNode&&_.parentNode.removeChild(_)},v}(a);E.exports=o},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("start"));if(!!M){var x={x:M.x,y:M.y};if(x.img=_.get("src"),!_.get("end"))x.width=_.get("width")||32,x.height=_.get("height")||32;else{var m=_.parsePoint(y,_.get("end"));if(!m)return;x.width=m.x-M.x,x.height=m.y-M.y}_.get("offsetX")&&(x.x+=_.get("offsetX")),_.get("offsetY")&&(x.y+=_.get("offsetY"));var S=g.addShape("Image",{zIndex:1,attrs:x});S.name="guide-image",_.get("appendInfo")&&S.setSilent("appendInfo",_.get("appendInfo")),_.set("el",S)}},f}(i);E.exports=a},function(E,T,e){E.exports={Guide:e(20),Arc:e(243),DataMarker:e(244),DataRegion:e(245),Html:e(246),Image:e(247),Line:e(249),Region:e(250),Text:e(251)}},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=n.MatrixUtil.vec2,o=e(19),u=o.FONT_FAMILY,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:u},content:null}})},g.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=x.addGroup({viewId:x.get("viewId")});m._drawLines(S,P,A);var O=m.get("text");O&&O.content&&m._drawText(S,P,A),m.set("el",A)}},g._drawLines=function(M,x,m){var S=[["M",M.x,M.y],["L",x.x,x.y]],P=m.addShape("Path",{attrs:n.mix({path:S},this.get("lineStyle"))});P.name="guide-line",this.get("appendInfo")&&P.setSilent("appendInfo",this.get("appendInfo"))},g._drawText=function(M,x,m){var S=this.get("text"),P=S.position,A=S.style||{},O;P==="start"?O=0:P==="center"?O=.5:n.isString(P)&&P.indexOf("%")!==-1?O=parseInt(P,10)/100:n.isNumber(P)?O=P:O=1,(O>1||O<0)&&(O=1);var L={x:M.x+(x.x-M.x)*O,y:M.y+(x.y-M.y)*O};if(S.offsetX&&(L.x+=S.offsetX),S.offsetY&&(L.y+=S.offsetY),L.text=S.content,L=n.mix({},L,A),S.autoRotate&&n.isNil(A.rotate)){var W=a.angleTo([x.x-M.x,x.y-M.y],[1,0],1);L.rotate=W}else n.isNil(A.rotate)||(L.rotate=A.rotate*Math.PI/180);var F=m.addShape("Text",{attrs:L});F.name="guide-line-text",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo"))},y}(i);E.exports=f},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},v.render=function(y,g){var _=this,M=_.get("style"),x=_._getPath(y);if(!!x.length){var m=g.addShape("path",{zIndex:_.get("zIndex"),attrs:n.mix({path:x},M)});m.name="guide-region",_.get("appendInfo")&&m.setSilent("appendInfo",_.get("appendInfo")),_.set("el",m)}},v._getPath=function(y){var g=this,_=g.parsePoint(y,g.get("start")),M=g.parsePoint(y,g.get("end"));if(!_||!M)return[];var x=[["M",_.x,_.y],["L",M.x,_.y],["L",M.x,M.y],["L",_.x,M.y],["z"]];return x},f}(i);E.exports=a},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("position"));if(!!M){var x=n.mix({},_.get("style")),m=_.get("offsetX"),S=_.get("offsetY");m&&(M.x+=m),S&&(M.y+=S),x.rotate&&(x.rotate=x.rotate*Math.PI/180);var P=g.addShape("Text",{zIndex:_.get("zIndex"),attrs:n.mix({text:_.get("content")},x,M)});P.name="guide-text",_.get("appendInfo")&&P.setSilent("appendInfo",_.get("appendInfo")),_.set("el",P)}},f}(i);E.exports=a},function(E,T,e){var t=e(110);E.exports=t},function(E,T){E.exports=function(t,l){for(var s,c,r=[],h=0;h<t.length;h++)s=t[h].getBBox(),c=l[h].getBBox(),(s.width>c.width||s.height>c.height||s.width*s.height>c.width*c.height)&&r.push(t[h]);for(var n=0;n<r.length;n++)r[n].remove()}},function(E,T,e){var t=e(111);function l(s,c,r,h){var n=s.getBBox(),i=n.width,a=n.height,o={x:c,y:r,textAlign:"center"};switch(h){case 0:o.y-=a/2,o.textAlign="left";break;case 1:o.y-=a/2,o.textAlign="right";break;case 2:o.y+=a/2,o.textAlign="right";break;case 3:o.y+=a/2,o.textAlign="left";break;case 5:o.y-=a/2;break;case 6:o.y+=a/2;break;case 7:o.x+=i/2,o.textAlign="left";break;case 8:o.x-=i/2,o.textAlign="right";break;default:break}return s.attr(o),s.getBBox()}E.exports=function(s){for(var c=new t,r=[],h,n,i,a,o,u=0;u<s.length;u++){n=s[u],i=n.attr("x"),a=n.attr("y"),o=!1;for(var f=0;f<8;f++)if(h=l(n,i,a,f),c.hasGap(h)){c.fillGap(h),o=!0;break}o||r.push(n)}for(var v=0;v<r.length;v++)r[v].remove();return o}},function(E,T,e){var t=e(111),l=20;function s(c,r){var h=-1,n=c.attr("x"),i=c.attr("y"),a=c.getBBox(),o=Math.sqrt(a.width*a.width+a.height*a.height),u,f=-h,v=0,b=0,y=function(x){return[(x*=.1)*Math.cos(x),x*Math.sin(x)]};if(r.hasGap(a))return r.fillGap(a),!0;for(var g=!1,_=0;Math.min(Math.abs(v),Math.abs(b))<o&&_<l;)if(u=y(f+=h),v=~~u[0],b=~~u[1],c.attr({x:n+v,y:i+b}),_++,r.hasGap(c.getBBox())){r.fillGap(a),g=!0;break}return g}E.exports=function(c){for(var r,h=new t,n=[],i=0;i<c.length;i++)r=c[i],s(r,h)||n.push(r);for(var a=0;a<n.length;a++)n[a].remove()}},function(E,T,e){function t(m){return function(){var S=r(m),P;if(c()){var A=r(this).constructor;P=Reflect.construct(S,arguments,A)}else P=S.apply(this,arguments);return l(this,P)}}function l(m,S){return S&&(typeof S=="object"||typeof S=="function")?S:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},r(m)}function h(m,S){m.prototype=Object.create(S.prototype),m.prototype.constructor=m,m.__proto__=S}var n=e(3),i=e(113),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f="g2-legend-list",v="g2-slip",b="g2-caret-up",y="g2-caret-down",g="rgba(0,0,0,0.65)",_="rgba(0,0,0,0.25)";function M(m,S){return m.getElementsByClassName(S)[0]}var x=function(m){h(P,m);var S=t(P);function P(){return m.apply(this,arguments)||this}var A=P.prototype;return A.getDefaultCfg=function(){var L=m.prototype.getDefaultCfg.call(this);return n.mix({},L,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:o,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+v+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},A.render=function(){m.prototype._renderHTML.call(this),this._renderFlipPage()},A._renderFlipPage=function(){var L=this.get("legendWrapper"),W=M(L,f),F=this.get("position"),K=this.get("layout"),V=F==="right"||F==="left"||K==="vertical",k=V?"block":"inline-block",Z=L.offsetHeight;if(L.scrollHeight>Z){var X=this.get("slipTpl"),it=u.createDom(X),ft=M(it,b),pt=M(it,y);u.modifyCSS(ft,this.get("caretStyle")),u.modifyCSS(ft,{fill:"rgba(0,0,0,0.25)"}),u.modifyCSS(pt,this.get("caretStyle"));var ut=M(it,"cur-pagenum"),It=M(it,"next-pagenum"),Nt=this.get("pageNumStyle");if(u.modifyCSS(ut,n.mix({},Nt,{paddingLeft:"10px"})),u.modifyCSS(It,n.mix({},Nt,{opacity:.3,paddingRight:"10px"})),u.modifyCSS(it,n.mix({},this.get("slipDomStyle"),V?{top:Z+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),L.style.overflow=this.get("legendOverflow"),L.appendChild(it),!V){var Rt=Math.max(L.offsetWidth-10-it.offsetWidth,0);u.modifyCSS(W,{maxWidth:Rt+"px"})}for(var Mt=W.childNodes,bt=0,At=1,rt=[],Pt=0;Pt<Mt.length;Pt++)Mt[Pt].style.display=k,bt=Mt[Pt].offsetTop+Mt[Pt].offsetHeight,bt>Z&&(At++,rt.forEach(function(z){z.style.display="none"}),rt=[]),rt.push(Mt[Pt]);It.innerText="/"+At,Mt.forEach(function(z){z.style.display=k,bt=z.offsetTop+z.offsetHeight,bt>Z&&(z.style.display="none")}),ft.addEventListener("click",function(){if(Mt[0].style.display!==k){var z=-1;Mt.forEach(function(et,ot){et.style.display===k&&(z=z===-1?ot:z,et.style.display="none")});for(var Q=z-1;Q>=0&&(Mt[Q].style.display=k,bt=Mt[z-1].offsetTop+Mt[z-1].offsetHeight,Mt[Q].style.display="none",bt<=Z);Q--)Mt[Q].style.display=k;var gt=Number.parseInt(ut.innerText,10)-1;gt===1?ft.style.fill=_:ft.style.fill=g,pt.style.fill=g,ut.innerText=gt}}),pt.addEventListener("click",function(){if(Mt[Mt.length-1].style.display!==k){var z=-1;Mt.forEach(function(et,ot){et.style.display===k&&(z=ot,et.style.display="none")});for(var Q=z+1;Q<Mt.length&&(Mt[Q].style.display=k,bt=Mt[Q].offsetTop+Mt[Q].offsetHeight,Mt[Q].style.display="none",bt<=Z);Q++)Mt[Q].style.display=k;var gt=Number.parseInt(ut.innerText,10)+1;gt===At?pt.style.fill=_:pt.style.fill=g,ft.style.fill=g,ut.innerText=gt}}),this.set("slipDom",it)}},A.destroy=function(){var L=this.get("slipDom");L&&L.parentNode&&L.parentNode.removeChild(L),m.prototype.destroy.call(this)},P}(i);E.exports=x},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(65),i=n.ColorUtil,a=e(3),o=e(67),u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return a.mix({},_,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},y._setPercentage=function(){var _=this.get("items");if(!_[0].percentage){var M=_[0].value,x=_[_.length-1].value;a.each(_,function(m){m.percentage=(m.value-M)/(x-M)})}},y._renderSliderShape=function(){this._setPercentage();var _=this.get("slider"),M=_.get("backgroundElement"),x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O;return S==="vertical"?(A+="l (90) ",a.each(P,function(L){O=i.toRGB(L.color),A+=1-L.percentage+":"+O+" "})):(A+="l (0) ",a.each(P,function(L){O=i.toRGB(L.color),A+=L.percentage+":"+O+" "})),this._addMiddleBar(M,"Rect",{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0})},y._renderUnslidable=function(){this._setPercentage();var _=this.get("titleShape"),M=this.get("titleGap");M=_?_.getBBox().height+M:M;var x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O,L=[],W=this.get("group"),F=W.addGroup(),K=P.length;if(S==="vertical"){A+="l (90) ";for(var V=0;V<K;V+=1){if(V!==0&&V!==K-1&&(L.push(["M",0,m-P[V].percentage*m]),L.push(["L",x,m-P[V].percentage*m])),O=i.toRGB(P[V].color),A+=1-P[V].percentage+":"+O+" ",this.get("isSegment")&&V>0){var k=i.toRGB(P[V-1].color);A+=1-P[V].percentage+":"+k+" "}F.addShape("text",{attrs:a.mix({},{x:x+this.get("textOffset")/2,y:m-P[V].percentage*m,text:this._formatItemValue(P[V].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{A+="l (0) ";for(var Z=0;Z<K;Z+=1){if(Z!==0&&Z!==K-1&&(L.push(["M",P[Z].percentage*x,0]),L.push(["L",P[Z].percentage*x,m])),O=i.toRGB(P[Z].color),this.get("isSegment")&&Z>0){var X=i.toRGB(P[Z-1].color);A+=P[Z].percentage+":"+X+" "}A+=P[Z].percentage+":"+O+" ",F.addShape("text",{attrs:a.mix({},{x:P[Z].percentage*x,y:m+5+this.get("textOffset"),text:this._formatItemValue(P[Z].value)+""},this.get("textStyle"))})}}F.addShape("rect",{attrs:{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0}}),F.addShape("path",{attrs:a.mix({path:L},this.get("lineStyle"))}),F.move(0,M)},b}(o);E.exports=u},function(E,T,e){E.exports={Category:e(114),CatHtml:e(113),CatPageHtml:e(256),Color:e(257),Size:e(260),CircleSize:e(259)}},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(3),i=e(67),a=2,o=16,u=16,f=5,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},_._renderSliderShape=function(){var x=f,m=this.get("slider"),S=m.get("backgroundElement"),P=this.get("layout"),A=P==="vertical"?a:this.get("width"),O=P==="vertical"?this.get("height"):a,L=x,W=this.get("height")/2,F=this.get("frontMiddleBarStyle"),K=P==="vertical"?[[0,0],[A,0],[A,O],[0,O]]:[[0,W+O],[0,W-O],[L+A-4,W-O],[L+A-4,W+O]];return this._addMiddleBar(S,"Polygon",n.mix({points:K},F))},_._addHorizontalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=-this.get("height")/2,W=O.addShape("circle",{attrs:n.mix({x:0,y:L,r:P},m)}),F=O.addShape("text",{attrs:n.mix(S,{x:0,y:L+P+10,textAlign:"center",textBaseline:"middle"})}),K=this.get("layout"),V=K==="vertical"?"ns-resize":"ew-resize";W.attr("cursor",V),F.attr("cursor",V),this.set(x+"ButtonElement",W),this.set(x+"TextElement",F)},_._addVerticalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=O.addShape("circle",{attrs:n.mix({x:0,y:0,r:P},m)}),W=O.addShape("text",{attrs:n.mix(S,{x:P+10,y:0,textAlign:"start",textBaseline:"middle"})}),F=this.get("layout"),K=F==="vertical"?"ns-resize":"ew-resize";L.attr("cursor",K),W.attr("cursor",K),this.set(x+"ButtonElement",L),this.set(x+"TextElement",W)},_._renderTrigger=function(){var x=this.get("firstItem"),m=this.get("lastItem"),S=this.get("layout"),P=this.get("textStyle"),A=this.get("triggerAttr"),O=n.mix({},A),L=n.mix({},A),W=f,F=u,K=n.mix({text:this._formatItemValue(x.value)+""},P),V=n.mix({text:this._formatItemValue(m.value)+""},P);S==="vertical"?(this._addVerticalTrigger("min",O,K,W),this._addVerticalTrigger("max",L,V,F)):(this._addHorizontalTrigger("min",O,K,W),this._addHorizontalTrigger("max",L,V,F))},_._bindEvents=function(){var x=this;if(this.get("slidable")){var m=this.get("slider");m.on("sliderchange",function(S){var P=S.range,A=x.get("firstItem").value,O=x.get("lastItem").value,L=A+P[0]/100*(O-A),W=A+P[1]/100*(O-A),F=f+P[0]/100*(u-f),K=f+P[1]/100*(u-f);x._updateElement(L,W,F,K);var V=new Event("itemfilter",S,!0,!0);V.range=[L,W],x.emit("itemfilter",V)})}},_._updateElement=function(x,m,S,P){b.prototype._updateElement.call(this,x,m);var A=this.get("minTextElement"),O=this.get("maxTextElement"),L=this.get("minButtonElement"),W=this.get("maxButtonElement");L.attr("r",S),W.attr("r",P);var F=this.get("layout");if(F==="vertical")A.attr("x",S+10),O.attr("x",P+10);else{var K=-this.get("height")/2;A.attr("y",K+S+10),O.attr("y",K+P+10)}},_._addCircle=function(x,m,S,P,A){var O=this.get("group"),L=O.addGroup(),W=this.get("_unslidableCircleStyle"),F=this.get("textStyle"),K=this.get("titleShape"),V=this.get("titleGap");K&&(V+=K.getBBox().height),L.addShape("circle",{attrs:n.mix({x,y:m+V,r:S===0?1:S},W)}),this.get("layout")==="vertical"?L.addShape("text",{attrs:n.mix({x:A+20+this.get("textOffset"),y:m+V,text:P===0?"0":P},F)}):L.addShape("text",{attrs:n.mix({x,y:m+V+A+13+this.get("textOffset"),text:P===0?"0":P},F)})},_._renderUnslidable=function(){var x=this.get("firstItem").value,m=this.get("lastItem").value;if(x>m){var S=m;m=x,x=S}var P=this._formatItemValue(x),A=this._formatItemValue(m),O=x<f?f:x,L=m>u?u:m;O>L&&(O=f,L=u),this.get("layout")==="vertical"?(this._addCircle(L,L,O,P,2*L),this._addCircle(L,L*2+o+O,L,A,2*L)):(this._addCircle(L,L,O,P,2*L),this._addCircle(L*2+o+O,L,L,A,2*L))},_.activate=function(x){!this.get("slidable")||b.prototype.activate.call(this,x)},g}(i);E.exports=v},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(67),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},v._renderSliderShape=function(){var y=this.get("slider"),g=y.get("backgroundElement"),_=this.get("layout"),M=this.get("width"),x=this.get("height"),m=this.get("height")/2,S=this.get("frontMiddleBarStyle"),P=_==="vertical"?[[0,0],[M,0],[M,x],[M-4,x]]:[[0,m+x/2],[0,m+x/2-4],[M,m-x/2],[M,m+x/2]];return this._addMiddleBar(g,"Polygon",n.mix({points:P},S))},v._renderUnslidable=function(){var y=this.get("layout"),g=this.get("width"),_=this.get("height"),M=this.get("frontMiddleBarStyle"),x=y==="vertical"?[[0,0],[g,0],[g,_],[g-4,_]]:[[0,_],[0,_-4],[g,0],[g,_]],m=this.get("group"),S=m.addGroup();S.addShape("Polygon",{attrs:n.mix({points:x},M)});var P=this._formatItemValue(this.get("firstItem").value),A=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(g+10,_-3,P),this._addText(g+10,3,A)):(this._addText(0,_,P),this._addText(g,_,A))},v._addText=function(y,g,_){var M=this.get("group"),x=M.addGroup(),m=this.get("textStyle"),S=this.get("titleShape"),P=this.get("titleGap");S&&(P+=S.getBBox().height),this.get("layout")==="vertical"?x.addShape("text",{attrs:n.mix({x:y+this.get("textOffset"),y:g,text:_===0?"0":_},m)}):(g+=P+this.get("textOffset")-20,S||(g+=10),x.addShape("text",{attrs:n.mix({x:y,y:g,text:_===0?"0":_},m)}))},f}(i);E.exports=a},function(E,T,e){var t=e(3),l=t.DomUtil,s=t.Group,c=function r(h){r.superclass.constructor.call(this,h)};t.extend(c,s),t.augment(c,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var h=this.get("layout"),n=this.get("backgroundElement"),i=this.get("minHandleElement"),a=this.get("maxHandleElement"),o=this.addShape("rect",{attrs:this.get("middleAttr")}),u=h==="vertical"?"ns-resize":"ew-resize";this.add([n,i,a]),this.set("middleHandleElement",o),n.set("zIndex",0),o.set("zIndex",1),i.set("zIndex",2),a.set("zIndex",2),o.attr("cursor","move"),i.attr("cursor",u),a.attr("cursor",u),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(h){var n=this.get("range"),i=n[0]/100,a=n[1]/100,o=this.get("width"),u=this.get("height"),f=this.get("minHandleElement"),v=this.get("maxHandleElement"),b=this.get("middleHandleElement");f.resetMatrix(),v.resetMatrix(),h==="horizontal"?(b.attr({x:o*i,y:0,width:(a-i)*o,height:u}),f.translate(i*o,u),v.translate(a*o,u)):(b.attr({x:0,y:u*(1-a),width:o,height:(a-i)*u}),f.translate(1,(1-i)*u),v.translate(1,(1-a)*u))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(h,n){var i=this.get(n);if(h===i)return!0;if(i.isGroup){var a=i.get("children");return a.indexOf(h)>-1}return!1},_getRange:function(h,n){var i=h+n;return i=i>100?100:i,i=i<0?0:i,i},_updateStatus:function(h,n){var i=h==="x"?this.get("width"):this.get("height");h=t.upperFirst(h);var a=this.get("range"),o=this.get("page"+h),u=this.get("currentTarget"),f=this.get("rangeStash"),v=this.get("layout"),b=v==="vertical"?-1:1,y=n["page"+h],g=y-o,_=g/i*100*b,M;a[1]<=a[0]?(this._isElement(u,"minHandleElement")||this._isElement(u,"maxHandleElement"))&&(a[0]=this._getRange(_,a[0]),a[1]=this._getRange(_,a[0])):(this._isElement(u,"minHandleElement")&&(a[0]=this._getRange(_,a[0])),this._isElement(u,"maxHandleElement")&&(a[1]=this._getRange(_,a[1]))),this._isElement(u,"middleHandleElement")&&(M=f[1]-f[0],a[0]=this._getRange(_,a[0]),a[1]=a[0]+M,a[1]>100&&(a[1]=100,a[0]=a[1]-M)),this.emit("sliderchange",{range:a}),this.set("page"+h,y),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(h){var n=h.currentTarget,i=h.event,a=this.get("range");i.stopPropagation(),i.preventDefault(),this.set("pageX",i.pageX),this.set("pageY",i.pageY),this.set("currentTarget",n),this.set("rangeStash",[a[0],a[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var h=this.get("canvas").get("containerDOM");this.onMouseMoveListener=l.addEventListener(h,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=l.addEventListener(h,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=l.addEventListener(h,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(h){if(!this._mouseOutArea(h)){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",h):this._updateStatus("y",h)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(h){var n=this.get("canvas").get("el"),i=n.getBoundingClientRect(),a=this.get("parent"),o=a.getBBox(),u=a.attr("matrix")[6],f=a.attr("matrix")[7],v=u+o.width,b=f+o.height,y=h.clientX-i.x,g=h.clientY-i.y;return y<u||y>v||g<f||g>b}}),E.exports=c},function(E,T,e){function t(){return t=Object.assign||function(F){for(var K=1;K<arguments.length;K++){var V=arguments[K];for(var k in V)Object.prototype.hasOwnProperty.call(V,k)&&(F[k]=V[k])}return F},t.apply(this,arguments)}function l(F){return function(){var K=h(F),V;if(r()){var k=h(this).constructor;V=Reflect.construct(K,arguments,k)}else V=K.apply(this,arguments);return s(this,V)}}function s(F,K){return K&&(typeof K=="object"||typeof K=="function")?K:c(F)}function c(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function h(F){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)},h(F)}function n(F,K){F.prototype=Object.create(K.prototype),F.prototype.constructor=F,F.__proto__=K}var i=e(31),a=e(68),o=e(3),u=o.DomUtil,f=e(265),v=e(116),b=e(118),y=e(117),g="g2-tooltip",_="g2-tooltip-title",M="g2-tooltip-list",x="g2-tooltip-marker",m="g2-tooltip-value",S="g2-tooltip-list-item",P=5,A=i.Marker;function O(F,K){return F.getElementsByClassName(K)[0]}function L(F,K){return Object.keys(F).forEach(function(V){K[V]&&(F[V]=o.mix(F[V],K[V]))}),F}var W=function(F){n(k,F);var K=l(k),V=k.prototype;V.getDefaultCfg=function(){var X=F.prototype.getDefaultCfg.call(this);return o.mix({},X,{containerTpl:' <div class="'+g+'"> <div class="'+_+'"></div><ul class="'+M+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+P+" "+P+'" class="'+x+`"></svg>
      {name}<span class="`+m+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function k(Z){var X;X=F.call(this,Z)||this,o.assign(c(X),b),o.assign(c(X),y);var it=f;X.style=L(it,Z),X._init_(),X.get("items")&&X.render();var ft=X.get("crosshairs");if(ft){var pt=ft.type==="rect"?X.get("backPlot"):X.get("frontPlot"),ut=new v(o.mix({plot:pt,plotRange:X.get("plotRange"),canvas:X.get("canvas")},X.get("crosshairs")));ut.hide(),X.set("crosshairGroup",ut)}return X}return V._init_=function(){var X=this,it=X.get("containerTpl"),ft=X.get("canvas").get("el").parentNode,pt;if(!this.get("htmlContent")){if(/^\#/.test(it)){var ut=it.replace("#","");pt=document.getElementById(ut)}else pt=u.createDom(it),u.modifyCSS(pt,X.style[g]),ft.appendChild(pt),ft.style.position="relative";X.set("container",pt)}},V.render=function(){var X=this;if(X.clear(),X.get("htmlContent")){var it=X.get("canvas").get("el").parentNode,ft=X._getHtmlContent();it.appendChild(ft),X.set("container",ft)}else X._renderTpl()},V._renderTpl=function(){var X=this,it=X.get("showTitle"),ft=X.get("titleContent"),pt=X.get("container"),ut=O(pt,_),It=O(pt,M),Nt=X.get("items");ut&&it&&(u.modifyCSS(ut,X.style[_]),ut.innerHTML=ft),It&&(u.modifyCSS(It,X.style[M]),o.each(Nt,function(Rt,Mt){It.appendChild(X._addItem(Rt,Mt))}))},V.clear=function(){var X=this.get("container");if(this.get("htmlContent"))X&&X.remove();else{var it=O(X,_),ft=O(X,M);it&&(it.innerHTML=""),ft&&(ft.innerHTML="")}},V.show=function(){var X=this.get("container");if(!(!X||this.destroyed)){X.style.visibility="visible",X.style.display="block";var it=this.get("crosshairGroup");it&&it.show();var ft=this.get("markerGroup");ft&&ft.show(),F.prototype.show.call(this),this.get("canvas").draw()}},V.hide=function(){var X=this.get("container");if(!(!X||this.destroyed)){X.style.visibility="hidden",X.style.display="none";var it=this.get("crosshairGroup");it&&it.hide();var ft=this.get("markerGroup");ft&&ft.hide(),F.prototype.hide.call(this),this.get("canvas").draw()}},V.destroy=function(){var X=this,it=X.get("container"),ft=X.get("containerTpl");it&&!/^\#/.test(ft)&&it.parentNode.removeChild(it);var pt=this.get("crosshairGroup");pt&&pt.destroy();var ut=this.get("markerGroup");ut&&ut.remove(),F.prototype.destroy.call(this)},V._getMarkerSvg=function(X){var it=X.marker||{},ft=it.activeSymbol||it.symbol,pt;o.isFunction(ft)?pt=ft:o.isString(ft)&&(pt=A.Symbols[ft]),pt=o.isFunction(pt)?pt:A.Symbols.circle;var ut=pt(P/2,P/2,P/2),It=ut.reduce(function(Nt,Rt){return""+Nt+Rt[0]+Rt.slice(1).join(",")},"");return'<path d="'+It+'" fill="'+(it.fill||"none")+'" stroke="'+(it.stroke||"none")+'" />'},V._addItem=function(X,it){var ft=this.get("itemTpl"),pt=o.substitute(ft,o.mix({index:it},X)),ut=u.createDom(pt);u.modifyCSS(ut,this.style[S]);var It=O(ut,x);if(It){u.modifyCSS(It,t({},this.style[x],{borderRadius:"unset"}));var Nt=this._getMarkerSvg(X);It.innerHTML=Nt}var Rt=O(ut,m);return Rt&&u.modifyCSS(Rt,this.style[m]),ut},V._getHtmlContent=function(){var X=this.get("htmlContent"),it=this.get("titleContent"),ft=this.get("items"),pt=X(it,ft),ut=u.createDom(pt);return ut},V.setPosition=function(X,it,ft){var pt=this.get("container"),ut=this.get("canvas").get("el"),It=u.getWidth(ut),Nt=u.getHeight(ut),Rt=pt.clientWidth,Mt=pt.clientHeight,bt=X,At=it,rt,Pt=this.get("prePosition")||{x:0,y:0};if(Rt||(pt.style.display="block",Rt=pt.clientWidth,Mt=pt.clientHeight,pt.style.display="none"),this.get("enterable")?(it=it-pt.clientHeight/2,rt=[X,it],Pt&&X-Pt.x>0?X-=pt.clientWidth+1:X+=1):this.get("position")?(rt=this._calcTooltipPosition(X,it,this.get("position"),Rt,Mt,ft),X=rt[0],it=rt[1]):(rt=this._constraintPositionInBoundary(X,it,Rt,Mt,It,Nt),X=rt[0],it=rt[1]),this.get("inPlot")){var z=this.get("plotRange");rt=this._constraintPositionInPlot(X,it,Rt,Mt,z,this.get("enterable")),X=rt[0],it=rt[1]}var Q=this.get("markerItems");o.isEmpty(Q)||(bt=Q[0].x,At=Q[0].y),this.set("prePosition",rt);var gt=this.get("follow");gt&&(pt.style.left=X+"px",pt.style.top=it+"px");var et=this.get("crosshairGroup");if(et){var ot=this.get("items");et.setPosition(bt,At,ot)}F.prototype.setPosition.call(this,X,it)},k}(a);E.exports=W},function(E,T,e){var t=e(68);t.Html=e(262),t.Canvas=e(115),t.Mini=e(264),E.exports=t},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(3),i=e(115),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f=n.MatrixUtil,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:o,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},_._init_=function(){var x=this,m=x.get("padding"),S=x.get("frontPlot"),P=S.addGroup();x.set("container",P);var A=P.addShape("rect",{attrs:n.mix({},x.get("boardStyle"))});x.set("board",A);var O=P.addShape("path",{attrs:{fill:x.get("boardStyle").fill}});x.set("triangleShape",O);var L=P.addGroup();L.move(m.left,m.top);var W=L.addShape("text",{attrs:n.mix({},x.get("valueStyle"))});x.set("valueShape",W)},_.render=function(){var x=this;x.clear();var m=x.get("board"),S=x.get("valueShape"),P=x.get("padding"),A=x.get("items")[0];S&&S.attr("text",A.value);var O=S?S.getBBox():{width:80,height:30},L=P.left+O.width+P.right,W=P.top+O.height+P.bottom;m.attr("width",L),m.attr("height",W),x._centerTriangleShape()},_.clear=function(){var x=this.get("valueShape");x.attr("text","")},_.setPosition=function(x,m,S){var P=this,A=P.get("container"),O=P.get("plotRange"),L=A.getBBox(),W=L.width,F=L.height;if(x-=W/2,S&&(S.name==="point"||S.name==="interval")){var K=S.getBBox().y;m=K}if(m-=F,this.get("inPlot"))x<O.tl.x?(x=O.tl.x,P._leftTriangleShape()):x+W/2>O.tr.x?(x=O.tr.x-W,P._rightTriangleShape()):P._centerTriangleShape(),m<O.tl.y?m=O.tl.y:m+F>O.bl.y&&(m=O.bl.y-F);else{var V=this.get("canvas").get("el"),k=u.getWidth(V),Z=u.getHeight(V);x<0?(x=0,P._leftTriangleShape()):x+W/2>k?(x=k-W,P._rightTriangleShape()):P._centerTriangleShape(),m<0?m=0:m+F>Z&&(m=Z-F)}var X=[1,0,0,0,1,0,0,0,1],it=f.transform(X,[["t",x,m]]);A.stopAnimate(),A.animate({matrix:it},this.get("animationDuration"))},_._centerTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",m,0],["L",m/2,S],["L",0,0],["Z"]];x.attr("path",L),x.move(A/2-m/2,O-1)},_._leftTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.height,O=[["M",0,0],["L",m,0],["L",0,S+3],["L",0,0],["Z"]];x.attr("path",O),x.move(0,A-3)},_._rightTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",m,0],["L",m,S+4],["L",0,0],["Z"]];x.attr("path",L),x.move(A-m-1,O-4)},g}(i);E.exports=v},function(E,T,e){var t,l=e(19),s=l.FONT_FAMILY,c="g2-tooltip",r="g2-tooltip-title",h="g2-tooltip-list",n="g2-tooltip-list-item",i="g2-tooltip-marker",a="g2-tooltip-value",o=(t={crosshairs:!1,offset:15},t[""+c]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:s,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+r]={marginBottom:"4px"},t[""+h]={margin:0,listStyleType:"none",padding:0},t[""+n]={marginBottom:"4px"},t[""+i]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+a]={display:"inline-block",float:"right",marginLeft:"30px"},t);E.exports=o},function(E,T,e){"use strict";function t(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(y)}function l(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function s(y,g){return g&&(t(g)==="object"||typeof g=="function")?g:c(y)}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function r(y,g){for(var _=0;_<g.length;_++){var M=g[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(y,M.key,M)}}function h(y,g,_){return g&&r(y.prototype,g),_&&r(y,_),y}function n(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&i(y,g)}function i(y,g){return i=Object.setPrototypeOf||function(M,x){return M.__proto__=x,M},i(y,g)}function a(y,g,_){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(x,m,S){var P=o(x,m);if(!!P){var A=Object.getOwnPropertyDescriptor(P,m);return A.get?A.get.call(S):A.value}},a(y,g,_||y)}function o(y,g){for(;!Object.prototype.hasOwnProperty.call(y,g)&&(y=u(y),y!==null););return y}function u(y){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},u(y)}var f=e(10),v=e(43),b=function(y){n(g,y),h(g,[{key:"getDefaultCfg",value:function(){var M=a(u(g.prototype),"getDefaultCfg",this).call(this);return f({},M,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function g(_){var M;return l(this,g),M=s(this,u(g).call(this,_)),M._init(),M}return h(g,[{key:"_init",value:function(){var M=this.start,x=this.end,m={start:M.x,end:x.x},S={start:M.y,end:x.y};this.x=m,this.y=S}},{key:"convertPoint",value:function(M){var x,m;return this.isTransposed?(x=M.y,m=M.x):(x=M.x,m=M.y),{x:this.convertDim(x,"x"),y:this.convertDim(m,"y")}}},{key:"invertPoint",value:function(M){var x=this.invertDim(M.x,"x"),m=this.invertDim(M.y,"y");return this.isTransposed?{x:m,y:x}:{x,y:m}}}]),g}(v);E.exports=b},function(E,T,e){"use strict";function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(m){return typeof m}:t=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},t(M)}function l(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function s(M,x){return x&&(t(x)==="object"||typeof x=="function")?x:c(M)}function c(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function r(M,x){for(var m=0;m<x.length;m++){var S=x[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}function h(M,x,m){return x&&r(M.prototype,x),m&&r(M,m),M}function n(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&i(M,x)}function i(M,x){return i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},i(M,x)}function a(M,x,m){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(P,A,O){var L=o(P,A);if(!!L){var W=Object.getOwnPropertyDescriptor(L,A);return W.get?W.get.call(O):W.value}},a(M,x,m||M)}function o(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&(M=u(M),M!==null););return M}function u(M){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},u(M)}var f=e(56),v=e(55),b=e(10),y=e(43),g=f.vec2,_=function(M){n(x,M),h(x,[{key:"getDefaultCfg",value:function(){var S=a(u(x.prototype),"getDefaultCfg",this).call(this);return b({},S,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function x(m){var S;return l(this,x),S=s(this,u(x).call(this,m)),S._init(),S}return h(x,[{key:"_init",value:function(){var S=this.width,P=this.height,A=this.radius,O=this.innerRadius,L=this.startAngle,W=this.endAngle,F=(W-L)/(2*Math.PI)+1,K=Math.min(S,P)/2;A&&A>=0&&A<=1&&(K=K*A);var V=Math.floor(K*(1-O)/F),k=V/(Math.PI*2),Z={start:L,end:W},X={start:O*K,end:O*K+V*.99};this.a=k,this.d=V,this.x=Z,this.y=X}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(S){var P=this.a,A=this.center,O,L;this.isTransposed?(O=S.y,L=S.x):(O=S.x,L=S.y);var W=this.convertDim(O,"x"),F=P*W,K=this.convertDim(L,"y");return{x:A.x+Math.cos(W)*(F+K),y:A.y+Math.sin(W)*(F+K)}}},{key:"invertPoint",value:function(S){var P=this.center,A=this.a,O=this.d+this.y.start,L=g.subtract([],[S.x,S.y],[P.x,P.y]),W=g.angleTo(L,[1,0],!0),F=W*A;g.length(L)<F&&(F=g.length(L));var K=Math.floor((g.length(L)-F)/O);W=2*K*Math.PI+W;var V=A*W,k=g.length(L)-V;k=v(k,0)?0:k;var Z=this.invertDim(W,"x"),X=this.invertDim(k,"y");Z=v(Z,0)?0:Z,X=v(X,0)?0:X;var it={};return it.x=this.isTransposed?X:Z,it.y=this.isTransposed?Z:X,it}}]),x}(y);E.exports=_},function(E,T,e){"use strict";var t=e(43);t.Cartesian=e(266),t.Rect=t.Cartesian,t.Polar=e(269),t.Helix=e(267),E.exports=t},function(E,T,e){"use strict";function t(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(m)}function l(m,S){if(!(m instanceof S))throw new TypeError("Cannot call a class as a function")}function s(m,S){return S&&(t(S)==="object"||typeof S=="function")?S:c(m)}function c(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function r(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}function h(m,S,P){return S&&r(m.prototype,S),P&&r(m,P),m}function n(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(S&&S.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),S&&i(m,S)}function i(m,S){return i=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A},i(m,S)}function a(m,S,P){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(O,L,W){var F=o(O,L);if(!!F){var K=Object.getOwnPropertyDescriptor(F,L);return K.get?K.get.call(W):K.value}},a(m,S,P||m)}function o(m,S){for(;!Object.prototype.hasOwnProperty.call(m,S)&&(m=u(m),m!==null););return m}function u(m){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},u(m)}var f=e(56),v=e(55),b=e(10),y=e(43),g=f.mat3,_=f.vec2,M=f.vec3,x=function(m){n(S,m),h(S,[{key:"getDefaultCfg",value:function(){var A=a(u(S.prototype),"getDefaultCfg",this).call(this);return b({},A,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function S(P){var A;return l(this,S),A=s(this,u(S).call(this,P)),A._init(),A}return h(S,[{key:"_init",value:function(){for(var A=this.radius,O=this.innerRadius,L=this.center,W=this.startAngle,F=this.endAngle;F<W;)F+=Math.PI*2;this.endAngle=F;var K=this.getOneBox(),V=K.maxX-K.minX,k=K.maxY-K.minY,Z=Math.abs(K.minX)/V,X=Math.abs(K.minY)/k,it=this.width,ft=this.height,pt,ut;ft/k>it/V?(pt=it/V,ut={x:L.x-(.5-Z)*it,y:L.y-(.5-X)*pt*k}):(pt=ft/k,ut={x:L.x-(.5-Z)*pt*V,y:L.y-(.5-X)*ft}),A?A>0&&A<=1?A=pt*A:(A<=0||A>pt)&&(A=pt):A=pt;var It={start:W,end:F},Nt={start:O*A,end:A};this.x=It,this.y=Nt,this.radius=A,this.circleCentre=ut,this.center=ut}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var A=this.startAngle,O=this.endAngle;if(Math.abs(O-A)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var L=[0,Math.cos(A),Math.cos(O)],W=[0,Math.sin(A),Math.sin(O)],F=Math.min(A,O);F<Math.max(A,O);F+=Math.PI/18)L.push(Math.cos(F)),W.push(Math.sin(F));return{minX:Math.min.apply(Math,L),maxX:Math.max.apply(Math,L),minY:Math.min.apply(Math,W),maxY:Math.max.apply(Math,W)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(A){var O=this.getCenter(),L=this.isTransposed?A.y:A.x,W=this.isTransposed?A.x:A.y;return L=this.convertDim(L,"x"),W=this.convertDim(W,"y"),{x:O.x+Math.cos(L)*W,y:O.y+Math.sin(L)*W}}},{key:"invertPoint",value:function(A){var O=this.getCenter(),L=[A.x-O.x,A.y-O.y],W=this.x,F=[1,0,0,0,1,0,0,0,1];g.rotate(F,F,W.start);var K=[1,0,0];M.transformMat3(K,K,F),K=[K[0],K[1]];var V=_.angleTo(K,L,W.end<W.start);v(V,Math.PI*2)&&(V=0);var k=_.length(L),Z=V/(W.end-W.start);Z=W.end-W.start>0?Z:-Z;var X=this.invertDim(k,"y"),it={};return it.x=this.isTransposed?X:Z,it.y=this.isTransposed?Z:X,it}}]),S}(y);E.exports=x},function(E,T,e){var t=e(0),l=e(16),s=t.PathUtil;function c(S){var P=S.start,A=S.end,O=S.getWidth(),L=S.getHeight(),W=200,F,K,V,k,Z;return S.isPolar?(k=S.getRadius(),V=S.getCenter(),F=S.startAngle,K=S.endAngle,Z=new l.Fan({attrs:{x:V.x,y:V.y,rs:0,re:k+W,startAngle:F,endAngle:F}}),Z.endState={endAngle:K}):(Z=new l.Rect({attrs:{x:P.x-W,y:A.y-W,width:S.isTransposed?O+W*2:0,height:S.isTransposed?0:L+W*2}}),S.isTransposed?Z.endState={height:L+W*2}:Z.endState={width:O+W*2}),Z.isClip=!0,Z}function r(S){if(t.isEmpty(S))return null;var P=S[0].x,A=S[0].x,O=S[0].y,L=S[0].y;return t.each(S,function(W){P=P>W.x?W.x:P,A=A<W.x?W.x:A,O=O>W.y?W.y:O,L=L<W.y?W.y:L}),{minX:P,maxX:A,minY:O,maxY:L,centerX:(P+A)/2,centerY:(O+L)/2}}function h(S,P){var A=S.points||S.get("origin").points,O=r(A),L,W,F=P.startAngle,K=P.endAngle,V=K-F;return P.isTransposed?(L=O.maxY*V,W=O.minY*V):(L=O.maxX*V,W=O.minX*V),L+=F,W+=F,{startAngle:W,endAngle:L}}function n(S,P,A){var O={};return S.delay&&(O.delay=t.isFunction(S.delay)?S.delay(P,A):S.delay),O.easing=t.isFunction(S.easing)?S.easing(P,A):S.easing,O.duration=t.isFunction(S.duration)?S.duration(P,A):S.duration,O.callback=S.callback,O}function i(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),W=S.get("origin").points,F=(L.minX+L.maxX)/2,K;W[0].y-W[1].y<=0?K=L.maxY:K=L.minY;var V=[F,K,1];S.apply(V),S.attr("transform",[["t",-F,-K],["s",1,.01],["t",F,K]]);var k={transform:[["t",-F,-K],["s",1,100],["t",F,K]]},Z=n(P,O,A,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function a(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),W=S.get("origin").points,F,K=(L.minY+L.maxY)/2;W[0].y-W[1].y>0?F=L.maxX:F=L.minX;var V=[F,K,1];S.apply(V),S.attr({transform:[["t",-F,-K],["s",.01,1],["t",F,K]]});var k={transform:[["t",-F,-K],["s",100,1],["t",F,K]]},Z=n(P,O,A,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function o(S,P){var A={lineWidth:0,opacity:0},O=S._id,L=S.get("index"),W=n(P,L,O,A);S.animate(A,W.duration,W.easing,function(){S.remove()},W.delay)}function u(S,P,A){var O=S._id,L=S.get("index"),W,F;if(A.isPolar&&S.name!=="point")W=A.getCenter().x,F=A.getCenter().y;else{var K=S.getBBox();W=(K.minX+K.maxX)/2,F=(K.minY+K.maxY)/2}var V=[W,F,1];S.apply(V),S.attr({transform:[["t",-W,-F],["s",.01,.01],["t",W,F]]});var k={transform:[["t",-W,-F],["s",100,100],["t",W,F]]},Z=n(P,L,O,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function f(S,P,A){var O=S._id,L=S.get("index"),W,F;if(A.isPolar&&S.name!=="point")W=A.getCenter().x,F=A.getCenter().y;else{var K=S.getBBox();W=(K.minX+K.maxX)/2,F=(K.minY+K.maxY)/2}var V=[W,F,1];S.apply(V);var k={transform:[["t",-W,-F],["s",.01,.01],["t",W,F]]},Z=n(P,L,O,k);S.animate(k,Z.duration,Z.easing,function(){S.remove()},Z.delay)}function v(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path"));S.attr("path",[L[0]]);var W={path:L},F=n(P,O,A,W);S.animate(W,F.duration,F.easing,F.callback,F.delay)}}function b(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path")),W={path:[L[0]]},F=n(P,O,A,W);S.animate(W,F.duration,F.easing,function(){S.remove()},F.delay)}}function y(S,P,A,O,L){var W=c(A),F=S.get("canvas"),K=S._id,V=S.get("index"),k;O?(W.attr("startAngle",O),W.attr("endAngle",O),k={endAngle:L}):k=W.endState,W.set("canvas",F),S.attr("clip",W),S.setSilent("animating",!0);var Z=n(P,V,K,k);W.animate(k,Z.duration,Z.easing,function(){S&&!S.get("destroyed")&&(S.attr("clip",null),S.setSilent("cacheShape",null),S.setSilent("animating",!1),W.remove())},Z.delay)}function g(S,P){var A=S._id,O=S.get("index"),L=t.isNil(S.attr("fillOpacity"))?1:S.attr("fillOpacity"),W=t.isNil(S.attr("strokeOpacity"))?1:S.attr("strokeOpacity");S.attr("fillOpacity",0),S.attr("strokeOpacity",0);var F={fillOpacity:L,strokeOpacity:W},K=n(P,O,A,F);S.animate(F,K.duration,K.easing,K.callback,K.delay)}function _(S,P){var A=S._id,O=S.get("index"),L={fillOpacity:0,strokeOpacity:0},W=n(P,O,A,L);S.animate(L,W.duration,W.easing,function(){S.remove()},W.delay)}function M(S,P,A){var O=h(S,A),L=O.endAngle,W=O.startAngle;y(S,P,A,W,L)}function x(S,P,A){if(S.name==="line"){var O=S.get("canvas"),L=S.get("cacheShape"),W=S._id,F=S.get("index"),K=new l.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var V=s.pathToAbsolute(L.attrs.path),k=s.pathToAbsolute(S.attr("path")),Z=V[1][1]-V[0][1],X=V[V.length-1][1]+Z,it=k[k.length-1][2],ft=V.concat([["L",X,it]]),pt=[0,0,1];S.apply(pt),S.attr("clip",K),S.attr("path",ft);var ut={transform:[["t",-Z,0]]},It=n(P,F,W,ut);S.animate(ut,It.duration,It.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},It.delay)}}function m(S,P,A){if(S.name==="area"){var O=S.get("canvas"),L=S.get("cacheShape"),W=S._id,F=S.get("index"),K=new l.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var V=s.pathToAbsolute(L.attrs.path),k=s.pathToAbsolute(S.attr("path")),Z=V[1][1]-V[0][1],X=Math.floor(V.length/2),it=V[X-1][1]+Z,ft=k[X-1][2],pt=[].concat(V.slice(0,X),[["L",it,ft],["L",it,k[X][2]]],V.slice(X)),ut=[0,0,1];S.apply(ut),S.attr("clip",K),S.attr("path",pt);var It={transform:[["t",-Z,0]]},Nt=n(P,F,W,It);S.animate(It,Nt.duration,Nt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},Nt.delay)}}E.exports={enter:{clipIn:y,zoomIn:u,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:g},leave:{lineWidthOut:o,zoomOut:f,pathOut:b,fadeOut:_},appear:{clipIn:y,zoomIn:u,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:g},update:{fadeIn:g,fanIn:M,lineSlideLeft:x,areaSlideLeft:m}}},function(E,T,e){var t=e(0),l=e(119),s=t.MatrixUtil,c=s.mat3;function r(o,u){var f=[];if(o.get("animate")===!1)return[];var v=o.get("children");return t.each(v,function(b){if(b.isGroup)f=f.concat(r(b,u));else if(b.isShape&&b._id){var y=b._id;y=y.split("-")[0],y===u&&f.push(b)}}),f}function h(o){var u={};return t.each(o,function(f){if(!(!f._id||f.isClip)){var v=f._id;u[v]={_id:v,type:f.get("type"),attrs:t.cloneDeep(f.attr()),name:f.name,index:f.get("index"),animateCfg:f.get("animateCfg"),coord:f.get("coord")}}}),u}function n(o,u,f,v){var b;return v?b=l.Action[f][v]:b=l.getAnimation(o,u,f),b}function i(o,u,f){var v=l.getAnimateCfg(o,u);return f&&f[u]?t.deepMix({},v,f[u]):v}function a(o,u,f,v){var b,y,g=!1;if(v){var _=[],M=[];t.each(u,function(x){var m=o[x._id];m?(x.setSilent("cacheShape",m),_.push(x),delete o[x._id]):M.push(x)}),t.each(o,function(x){var m=x.name,S=x.coord,P=x._id,A=x.attrs,O=x.index,L=x.type;if(y=i(m,"leave",x.animateCfg),b=n(m,S,"leave",y.animation),t.isFunction(b)){var W=f.addShape(L,{attrs:A,index:O});if(W._id=P,W.name=m,S&&m!=="label"){var F=W.getMatrix(),K=c.multiply([],F,S.matrix);W.setMatrix(K)}g=!0,b(W,y,S)}}),t.each(_,function(x){var m=x.name,S=x.get("coord"),P=x.get("cacheShape").attrs;if(!t.isEqual(P,x.attr())){if(y=i(m,"update",x.get("animateCfg")),b=n(m,S,"update",y.animation),t.isFunction(b))b(x,y,S);else{var A=t.cloneDeep(x.attr());x.attr(P),x.animate(A,y.duration,y.easing,function(){x.setSilent("cacheShape",null)})}g=!0}}),t.each(M,function(x){var m=x.name,S=x.get("coord");y=i(m,"enter",x.get("animateCfg")),b=n(m,S,"enter",y.animation),t.isFunction(b)&&(b(x,y,S),g=!0)})}else t.each(u,function(x){var m=x.name,S=x.get("coord");y=i(m,"appear",x.get("animateCfg")),b=n(m,S,"appear",y.animation),t.isFunction(b)&&(b(x,y,S),g=!0)});return g}E.exports={execAnimation:function(u,f){var v=u.get("middlePlot"),b=u.get("backPlot"),y=u.get("_id"),g=u.get("canvas"),_=g.get(y+"caches")||[];_.length===0&&(f=!1);var M=r(v,y),x=r(b,y),m=M.concat(x);g.setSilent(y+"caches",h(m));var S;f?S=a(_,m,g,f):S=a(_,M,g,f),S||g.draw()}}},function(E,T,e){var t=e(0),l=e(30),s=l.Axis,c=t.MatrixUtil.vec2;function r(a){var o=[];if(a.length>0){o=a.slice(0);var u=o[0],f=o[o.length-1];u.value!==0&&o.unshift({value:0}),f.value!==1&&o.push({value:1})}return o}function h(a,o,u){var f=[];return a.length<1||(a.length>=2&&o&&u&&f.push({text:"",tickValue:"",value:0}),a[0].value!==0&&f.push({text:"",tickValue:"",value:0}),f=f.concat(a),f[f.length-1].value!==1&&f.push({text:"",tickValue:"",value:1})),f}function n(a,o){return o===void 0&&(o=0),a==="middle"&&(o=.5),a.includes("%")&&(o=parseInt(a,10)/100),o}var i=function(){function a(u){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],t.mix(this,u)}var o=a.prototype;return o._isHide=function(f){var v=this.options;return!!(v&&v[f]===!1)},o._getMiddleValue=function(f,v,b,y){if(f===0&&!y)return 0;if(f===1)return 1;var g=v[b+1].value;return!y&&g===1?1:(f+g)/2},o._getLineRange=function(f,v,b,y){var g,_,M,x=v.field,m=this.options,S="";if(m[x]&&m[x].position&&(S=m[x].position),b==="x"){var P=S==="top"?1:0;P=n(S,P),g={x:0,y:P},_={x:1,y:P},M=!1}else{if(y){var A=S==="left"?0:1;A=n(S,A),g={x:A,y:0},_={x:A,y:1}}else{var O=S==="right"?1:0;O=n(S,O),g={x:O,y:0},_={x:O,y:1}}M=!0}return g=f.convert(g),_=f.convert(_),{start:g,end:_,isVertical:M}},o._getLineCfg=function(f,v,b,y){var g,_=this._getLineRange(f,v,b,y),M=_.isVertical,x=_.start,m=_.end,S=f.center;return f.isTransposed&&(M=!M),M&&x.x>S.x||!M&&x.y>S.y?g=1:g=-1,{isVertical:M,factor:g,start:x,end:m}},o._getCircleCfg=function(f){var v={},b=f.x,y=f.y,g=y.start>y.end,_;f.isTransposed?_={x:g?0:1,y:0}:_={x:0,y:g?0:1},_=f.convert(_);var M=f.circleCentre,x=[_.x-M.x,_.y-M.y],m=[1,0],S;_.y>M.y?S=c.angle(x,m):S=c.angle(x,m)*-1;var P=S+(b.end-b.start);return v.startAngle=S,v.endAngle=P,v.center=M,v.radius=Math.sqrt(Math.pow(_.x-M.x,2)+Math.pow(_.y-M.y,2)),v.inner=f.innerRadius||0,v},o._getRadiusCfg=function(f){var v=f.x.start,b=v<0?-1:1,y,g;return f.isTransposed?(y={x:0,y:0},g={x:1,y:0}):(y={x:0,y:0},g={x:0,y:1}),{factor:b,start:f.convert(y),end:f.convert(g)}},o._getAxisPosition=function(f,v,b,y){var g="",_=this.options;if(_[y]&&_[y].position)g=_[y].position;else{var M=f.type;f.isRect?v==="x"?g="bottom":v==="y"&&(b?g="right":g="left"):M==="helix"?g="helix":v==="x"?g=f.isTransposed?"radius":"circle":g=f.isTransposed?"circle":"radius"}return g},o._getAxisDefaultCfg=function(f,v,b,y){var g=this,_=g.viewTheme,M={},x=g.options,m=v.field;if(M=t.deepMix({},_.axis[y],M,x[m]),M.viewTheme=_,M.title){var S=t.isPlainObject(M.title)?M.title:{};S.text=S.text||v.alias||m,t.deepMix(M,{title:S})}return M.ticks=v.getTicks(),f.isPolar&&!v.isCategory&&b==="x"&&Math.abs(f.endAngle-f.startAngle)===Math.PI*2&&M.ticks.pop(),M.coord=f,M.label&&t.isNil(M.label.autoRotate)&&(M.label.autoRotate=!0),x.hasOwnProperty("xField")&&x.xField.hasOwnProperty("grid")&&M.position==="left"&&t.deepMix(M,x.xField),M},o._getAxisCfg=function(f,v,b,y,g,_){g===void 0&&(g="");var M=this,x=M._getAxisPosition(f,y,g,v.field),m=M._getAxisDefaultCfg(f,v,y,x);if(!t.isEmpty(m.grid)&&b){var S=[],P=[],A=r(b.getTicks());if(A.length){var O=h(m.ticks,v.isLinear,m.grid.align==="center");t.each(O,function(L,W){P.push(L.tickValue);var F=[],K=L.value;if(m.grid.align==="center"&&(K=M._getMiddleValue(K,O,W,v.isLinear)),!t.isNil(K)){var V=f.x,k=f.y;t.each(A,function(Z){var X=y==="x"?K:Z.value,it=y==="x"?Z.value:K,ft=f.convert({x:X,y:it});if(f.isPolar){var pt=f.circleCentre;k.start>k.end&&(it=1-it),ft.flag=V.start>V.end?0:1,ft.radius=Math.sqrt(Math.pow(ft.x-pt.x,2)+Math.pow(ft.y-pt.y,2))}F.push(ft)}),S.push({_id:_+"-"+y+g+"-grid-"+L.tickValue,points:F})}})}m.grid.items=S,m.grid.tickValues=P}return m.type=v.type,m},o._getHelixCfg=function(f){for(var v={},b=f.a,y=f.startAngle,g=f.endAngle,_=100,M=[],x=0;x<=_;x++){var m=f.convert({x:x/100,y:0});M.push(m.x),M.push(m.y)}var S=f.convert({x:0,y:0});return v.a=b,v.startAngle=y,v.endAngle=g,v.crp=M,v.axisStart=S,v.center=f.center,v.inner=f.y.start,v},o._drawAxis=function(f,v,b,y,g,_,M){var x=this.container,m=this.canvas,S,P;f.type==="cartesian"?(S=s.Line,P=this._getLineCfg(f,v,y,M)):f.type==="helix"&&y==="x"?(S=s.Helix,P=this._getHelixCfg(f)):y==="x"?(S=s.Circle,P=this._getCircleCfg(f)):(S=s.Line,P=this._getRadiusCfg(f));var A=this._getAxisCfg(f,v,b,y,M,g);A=t.mix({},A,P),y==="y"&&_&&_.get("type")==="circle"&&(A.circle=_),A._id=g+"-"+y,t.isNil(M)||(A._id=g+"-"+y+M),t.mix(A,{canvas:m,group:x.addGroup({viewId:g})});var O=new S(A);return O.render(),this.axes.push(O),O},o.createAxis=function(f,v,b){var y=this,g=this.coord,_=g.type;if(_!=="theta"&&!(_==="polar"&&g.isTransposed)){var M;f&&!y._isHide(f.field)&&(M=y._drawAxis(g,f,v[0],"x",b)),!t.isEmpty(v)&&_!=="helix"&&t.each(v,function(x,m){y._isHide(x.field)||y._drawAxis(g,x,f,"y",b,M,m)})}},o.changeVisible=function(f){var v=this.axes;t.each(v,function(b){b.set("visible",f)})},o.clear=function(){var f=this,v=f.axes;t.each(v,function(b){b.destroy()}),f.axes=[]},a}();E.exports=i},function(E,T,e){var t=e(0),l=e(268),s=function(){function c(h){this.type="rect",this.actions=[],this.cfg={},t.mix(this,h),this.option=h||{}}var r=c.prototype;return r.reset=function(n){return this.actions=n.actions||[],this.type=n.type,this.cfg=n.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},r._execActions=function(n){var i=this.actions;t.each(i,function(a){var o=a[0];n[o](a[1],a[2])})},r.hasAction=function(n){var i=this.actions,a=!1;return t.each(i,function(o){if(n===o[0])return a=!0,!1}),a},r.createCoord=function(n,i){var a=this,o=a.type,u=a.cfg,f,v,b=t.mix({start:n,end:i},u);return o==="theta"?(f=l.Polar,a.hasAction("transpose")||a.transpose(),v=new f(b),v.type=o):(f=l[t.upperFirst(o||"")]||l.Rect,v=new f(b)),a._execActions(v),v},r.rotate=function(n){return n=n*Math.PI/180,this.actions.push(["rotate",n]),this},r.reflect=function(n){return this.actions.push(["reflect",n]),this},r.scale=function(n,i){return this.actions.push(["scale",n,i]),this},r.transpose=function(){return this.actions.push(["transpose"]),this},c}();E.exports=s},function(E,T,e){var t=e(0);function l(r,h){if(t.isNil(r)||t.isNil(h))return!1;var n=r.get("origin"),i=h.get("origin");return t.isNil(n)&&t.isNil(i)?t.isEqual(r,h):t.isEqual(n,i)}function s(r){r.shape&&r.shape.get("origin")&&(r.data=r.shape.get("origin"))}var c=function(){function r(n){this.view=null,this.canvas=null,t.assign(this,n),this._init()}var h=r.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(i){return{x:i.x/this.pixelRatio,y:i.y/this.pixelRatio,target:i.target,toElement:i.event.toElement||i.event.relatedTarget}},h._getShape=function(i,a){var o=this.view,u=o.get("canvas");return u.getShape(i,a)},h._getPointInfo=function(i){var a=this.view,o={x:i.x/this.pixelRatio,y:i.y/this.pixelRatio},u=a.getViewsByPoint(o);return o.views=u,o},h._getEventObj=function(i,a,o){return{x:a.x,y:a.y,target:i.target,toElement:i.event.toElement||i.event.relatedTarget,views:o}},h.bindEvents=function(){var i=this.canvas;i.on("mousedown",t.wrapBehavior(this,"onDown")),i.on("mousemove",t.wrapBehavior(this,"onMove")),i.on("mouseleave",t.wrapBehavior(this,"onOut")),i.on("mouseup",t.wrapBehavior(this,"onUp")),i.on("click",t.wrapBehavior(this,"onClick")),i.on("dblclick",t.wrapBehavior(this,"onClick")),i.on("touchstart",t.wrapBehavior(this,"onTouchstart")),i.on("touchmove",t.wrapBehavior(this,"onTouchmove")),i.on("touchend",t.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(i,a,o){if(i&&i.name&&!i.get("destroyed")){var u=this.view;if(u.isShapeInView(i)){var f=i.name+":"+a;o.view=u,o.appendInfo=i.get("appendInfo"),u.emit(f,o);var v=u.get("parent");v&&v.emit(f,o)}}},h.onDown=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("mousedown",o),this._triggerShapeEvent(this.currentShape,"mousedown",o)},h.onMove=function(i){var a=this,o=a.view,u=a.currentShape;u&&u.get("destroyed")&&(u=null,a.currentShape=null);var f=a._getShape(i.x,i.y)||i.currentTarget,v=a._getShapeEventObj(i);if(v.shape=f,s(v),o.emit("mousemove",v),a._triggerShapeEvent(f,"mousemove",v),u&&!l(u,f)){var b=a._getShapeEventObj(i);b.shape=u,b.toShape=f,s(b),a._triggerShapeEvent(u,"mouseleave",b)}if(f&&!l(u,f)){var y=a._getShapeEventObj(i);y.shape=f,y.fromShape=u,s(y),a._triggerShapeEvent(f,"mouseenter",y)}a.currentShape=f;var g=a._getPointInfo(i),_=a.curViews||[];_.length===0&&g.views.length&&o.emit("plotenter",a._getEventObj(i,g,g.views)),_.length&&g.views.length===0&&o.emit("plotleave",a._getEventObj(i,g,_)),g.views.length&&(v=a._getEventObj(i,g,g.views),v.shape=f,s(v),o.emit("plotmove",v)),a.curViews=g.views},h.onOut=function(i){var a=this,o=a.view,u=a._getPointInfo(i),f=a.curViews||[],v=a._getEventObj(i,u,f);a.curViews&&a.curViews.length!==0&&(!v.toElement||v.toElement.tagName!=="CANVAS")&&(o.emit("plotleave",v),a.curViews=[])},h.onUp=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,a.emit("mouseup",o),this._triggerShapeEvent(this.currentShape,"mouseup",o)},h.onClick=function(i){var a=this,o=a.view,u=a._getShape(i.x,i.y)||i.currentTarget,f=a._getShapeEventObj(i);f.shape=u,s(f),o.emit("click",f),a._triggerShapeEvent(u,i.type,f),a.currentShape=u;var v=a._getPointInfo(i),b=v.views;if(!t.isEmpty(b)){var y=a._getEventObj(i,v,b);if(a.currentShape){var g=a.currentShape;y.shape=g,s(y)}i.type==="dblclick"?(o.emit("plotdblclick",y),o.emit("dblclick",f)):o.emit("plotclick",y)}},h.onTouchstart=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,u=this._getShapeEventObj(i);u.shape=o,s(u),a.emit("touchstart",u),this._triggerShapeEvent(o,"touchstart",u),this.currentShape=o},h.onTouchmove=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,u=this._getShapeEventObj(i);u.shape=o,s(u),a.emit("touchmove",u),this._triggerShapeEvent(o,"touchmove",u),this.currentShape=o},h.onTouchend=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("touchend",o),this._triggerShapeEvent(this.currentShape,"touchend",o)},h.clearEvents=function(){var i=this.canvas;i.off("mousemove",t.getWrapBehavior(this,"onMove")),i.off("mouseleave",t.getWrapBehavior(this,"onOut")),i.off("mousedown",t.getWrapBehavior(this,"onDown")),i.off("mouseup",t.getWrapBehavior(this,"onUp")),i.off("click",t.getWrapBehavior(this,"onClick")),i.off("dblclick",t.getWrapBehavior(this,"onClick")),i.off("touchstart",t.getWrapBehavior(this,"onTouchstart")),i.off("touchmove",t.getWrapBehavior(this,"onTouchmove")),i.off("touchend",t.getWrapBehavior(this,"onTouchend"))},r}();E.exports=c},function(E,T,e){var t=e(0),l=e(280),s=function(){function c(h){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,t.mix(this,h)}var r=c.prototype;return r._creatGuides=function(){var n=this,i=this.options,a=this.xScales,o=this.yScales,u=this.view,f=this.viewTheme;return this.backContainer&&u&&(this.backGroup=this.backContainer.addGroup({viewId:u.get("_id")})),this.frontContainer&&u&&(this.frontGroup=this.frontContainer.addGroup({viewId:u.get("_id")})),i.forEach(function(v){var b=v.type,y=t.deepMix({xScales:a,yScales:o,viewTheme:f},f?f.guide[b]:{},v);b=t.upperFirst(b);var g=new l[b](y);n.guides.push(g)}),n.guides},r.line=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"line"},n)),this},r.arc=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"arc"},n)),this},r.text=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"text"},n)),this},r.image=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"image"},n)),this},r.region=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"region"},n)),this},r.regionFilter=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"regionFilter"},n)),this},r.dataMarker=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataMarker"},n)),this},r.dataRegion=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataRegion"},n)),this},r.html=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"html"},n)),this},r.render=function(n){var i=this,a=i.view,o=a&&a.get("data"),u=i._creatGuides();t.each(u,function(f){var v;f.get("top")?v=i.frontGroup||i.frontContainer:v=i.backGroup||i.backContainer,f.render(n,v,o,a)})},r.clear=function(){this.options=[],this.reset()},r.changeVisible=function(n){var i=this.guides;t.each(i,function(a){a.changeVisible(n)})},r.reset=function(){var n=this.guides;t.each(n,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},c}();E.exports=s},function(E,T,e){function t(){return t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},t.apply(this,arguments)}var l=e(0),s=e(30),c=s.Legend,r=e(282),h=e(9),n=e(122),i=e(124),a=e(5),o="_origin",u=4.5,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(_,M,x){var m;return l.isNil(x)?!1:(_=x.translate(_),M=x.translate(M),x.isCategory?m=_===M:m=Math.abs(_-M)<=1,m)}function y(_,M){var x;return l.each(_,function(m){if(m.get("visible")){var S=m.getYScale();if(S.field===M){x=m;return}}}),x}var g=function(){function _(x){var m=this;m.options={},l.mix(m,x),m.clear();var S=m.chart;m.container=S.get("frontPlot"),m.plotRange=S.get("plotRange")}var M=_.prototype;return M.clear=function(){var m=this.legends;this.backRange=null,l.each(m,function(S){l.each(S,function(P){P.destroy()})}),this.legends={}},M.getBackRange=function(){var m=this.backRange;if(!m){var S=this.chart.get("backPlot");m=n(S,i(this.chart.get("plotRange")));var P=this.plotRange;m.maxX-m.minX<P.br.x-P.tl.x&&m.maxY-m.minY<P.br.y-P.tl.y&&(m={minX:P.tl.x,minY:P.tl.y,maxX:P.br.x,maxY:P.br.y}),this.backRange=m}return m},M._isFieldInView=function(m,S,P){var A=!1,O=P.get("scales"),L=O[m];return L&&L.values&&(A=l.inArray(L.values,S)),A},M._bindClickEvent=function(m,S,P){var A=this,O=A.chart,L=O.get("views"),W=S.field,F=A.options;m.on("itemclick",function(K){if(F.onClick&&F.defaultClickHandlerEnabled!==!0)F.onClick(K);else{var V=K.item,k=K.checked,Z=m.get("selectedMode")==="single",X=V.dataValue;k?(l.Array.remove(P,X),A._isFieldInView(W,X,O)&&O.filter(W,function(it){return Z?it===X:!l.inArray(P,it)}),l.each(L,function(it){A._isFieldInView(W,X,it)&&it.filter(W,function(ft){return Z?ft===X:!l.inArray(P,ft)})})):Z||(P.push(X),A._isFieldInView(W,X,O)&&O.filter(W,function(it){return!l.inArray(P,it)}),l.each(L,function(it){A._isFieldInView(W,X,it)&&it.filter(W,function(ft){return!l.inArray(P,ft)})})),F.onClick&&F.onClick(K),O.set("keepLegend",!0),O.set("keepPadding",!0),O.repaint(),O.set("keepPadding",!1),O.set("keepLegend",!1)}})},M._bindClickEventForMix=function(m){var S=this,P=S.chart,A=P.getAllGeoms();m.on("itemclick",function(O){var L=O.item.field,W=O.checked;W?l.each(A,function(F){var K=F.getYScale().field;K===L&&F.show()}):l.each(A,function(F){var K=F.getYScale().field;K===L&&F.hide()})})},M._filterLabels=function(m,S,P){if(m.get("gLabel"))m.get("gLabel").set("visible",P);else{var A=S.get("labelCfg");if(A&&A.fields&&A.fields.length>0){var O=S.getXScale(),L=S.getYScale(),W=O.field,F=L.field,K=m.get("origin")._origin,V=S.get("labelContainer"),k=V.get("labelsGroup").get("children");l.each(k,function(Z){var X=Z.get("origin")||[];X[W]===K[W]&&X[F]===K[F]&&(Z.set("visible",P),m.set("gLabel",Z))})}}},M._bindFilterEvent=function(m,S){var P=this,A=this.chart,O=S.field;m.on("itemfilter",function(L){var W=L.range;A.filterShape(function(k,Z,X){if(!l.isNil(k[O])){var it=k[O]>=W[0]&&k[O]<=W[1];return P._filterLabels(Z,X,it),it}return!0});for(var F=A.getAllGeoms()||[],K=function(Z){var X=F[Z];X.get("type")==="heatmap"&&f(function(){X.drawWithRange(W)})},V=0;V<F.length;V++)K(V)})},M._getShapeData=function(m){var S=m.get("origin");return l.isArray(S)&&(S=S[0]),S[o]},M._bindHoverEvent=function(m,S){var P=this,A=P.chart,O=A.getAllGeoms(),L=P.options,W=A.get("canvas");m.on("itemhover",function(F){var K=F.item.value,V=P.pre;if(!V)l.each(O,function(k){var Z=k.get("shapeContainer"),X=k.getShapes(),it=[];if(S){var ft=k.get("scales")[S];l.each(X,function(pt){var ut=P._getShapeData(pt);ut&&b(ut[S],K,ft)&&it.push(pt)})}else k.getYScale().field===K&&(it=X);l.isEmpty(it)||(F.shapes=it,F.geom=k,L.onHover?(L.onHover(F),Z.sort(),W.draw()):k.setShapesActived(it))}),P.pre=K;else if(V===K)return}),m.on("itemunhover",function(F){P.pre=null,L.onUnhover&&L.onUnhover(F),l.each(O,function(K){K.get("activeShapes")&&(K.clearActivedShapes(),W.draw())})})},M._isFiltered=function(m,S,P){if(!m.isCategory)return!0;var A=!0;return P=m.invert(P),l.each(S,function(O){if(m.getText(O)===m.getText(P))return A=!1,!1}),A},M._alignLegend=function(m,S,P,A){var O=this,L=O.viewTheme,W=O.container,F=W.get("canvas"),K=F.get("width"),V=F.get("height"),k=O.totalRegion,Z=O.plotRange,X=O.getBackRange(),it=m.get("offset")[0]||0,ft=m.get("offset")[1]||0,pt=m.getHeight(),ut=m.getWidth(),It=L.legend.margin,Nt=L.legend.legendMargin,Rt=O.legends[A].length,Mt=A.split("-"),bt=0,At=0,rt=Rt>1?k:P;if(Mt[0]==="left"||Mt[0]==="right")V=Z.br.y,bt=O._getXAlign(Mt[0],K,P,X,ut,It),S?At=(S.get("y")||S.get("group").get("y"))+S.getHeight()+Nt:At=O._getYAlignVertical(Mt[1],V,rt,X,0,It,F.get("height"));else if(Mt[0]==="top"||Mt[0]==="bottom")if(At=O._getYAlignHorizontal(Mt[0],V,P,X,pt,It),S){var Pt=S.getWidth();bt=(S.get("x")||S.get("group").get("x"))+Pt+Nt}else bt=O._getXAlign(Mt[1],K,rt,X,0,It),Mt[1]==="right"&&(bt=Z.br.x-rt.totalWidth);m.move(bt+it,At+ft)},M._getXAlign=function(m,S,P,A,O,L){var W=A.minX-O-L[3]<0?0:A.minX-O-L[3],F=m==="left"?W:A.maxX+L[1];return m==="center"&&(F=(S-P.totalWidth)/2),F},M._getYAlignHorizontal=function(m,S,P,A,O,L){var W=m==="top"?A.minY-O-L[0]:A.maxY+L[2];return W},M._getYAlignVertical=function(m,S,P,A,O,L,W){var F=m==="top"?A.minY-O-L[0]:S-P.totalHeight;return m==="center"&&(F=(W-P.totalHeight)/2),F},M._getSubRegion=function(m){var S=0,P=0,A=0,O=0;return l.each(m,function(L){var W=L.getWidth(),F=L.getHeight();S<W&&(S=W),A+=W,P<F&&(P=F),O+=F}),{maxWidth:S,totalWidth:A,maxHeight:P,totalHeight:O}},M._getRegion=function(){var m=this,S=m.viewTheme,P=m.legends,A=S.legend.legendMargin,O=[],L=0,W=0;return l.each(P,function(F){var K=m._getSubRegion(F);O.push(K),L+=K.totalWidth+A,W+=K.totalHeight+A}),{totalWidth:L,totalHeight:W,subs:O}},M._addCategoryLegend=function(m,S,P,A,O){var L=this,W=m.field,F=L.options,K=F[W];K&&(F=K);var V=L.legends;V[O]=V[O]||[];var k=L.container,Z=[],X=m.getTicks(),it=!0,ft=P.get("shapeType")||"point",pt=P.getDefaultValue("shape")||"circle";F[W]&&F[W].marker?(pt=F[W].marker,ft="point",it=!1):F.marker&&(pt=F.marker,ft="point",it=!1);var ut=L.chart,It=L.viewTheme,Nt=ut.get("canvas"),Rt=L.plotRange,Mt=O.split("-"),bt=Mt[0]==="right"||Mt[0]==="left"?Rt.bl.y-Rt.tr.y:Nt.get("width");l.each(X,function(Q){var gt=Q.text,et=gt,ot=Q.value,xt=m.invert(ot),H={isInCircle:P.isInCircle()},nt=A?L._isFiltered(m,A,ot):!0,at=P.getAttr("color"),q=P.getAttr("shape");if(at)if(at.callback&&at.callback.length>1){var _t=Array(at.callback.length-1).fill("");H.color=at.mapping.apply(at,[xt].concat(_t)).join("")||It.defaultColor}else H.color=at.mapping(xt).join("")||It.defaultColor;if(it&&q)if(q.callback&&q.callback.length>1){var yt=Array(q.callback.length-1).fill("");pt=q.mapping.apply(q,[xt].concat(yt)).join("")}else pt=q.mapping(xt).join("");var Ft=h.getShapeFactory(ft),Qt=Ft.getMarkerCfg(pt,H);a.legendMarkerRadius&&(Qt.radius=a.legendMarkerRadius),l.isFunction(pt)&&(Qt.symbol=pt),Z.push({value:et,dataValue:xt,checked:nt,marker:Qt})});var At=l.deepMix({},It.legend[Mt[0]],F[W]||F,{viewId:ut.get("_id"),maxLength:bt,items:Z,container:k,position:[0,0]});At.title&&l.deepMix(At,{title:{text:m.alias||m.field}});var rt;if(L._isTailLegend(F,P))At.chart=L.chart,At.geom=P,rt=new r(At);else if(F.useHtml){var Pt=k.get("canvas").get("el");if(k=F.container,l.isString(k)&&/^\#/.test(k)){var z=k.replace("#","");k=document.getElementById(z)}k||(k=Pt.parentNode),At.container=k,At.legendStyle===void 0&&(At.legendStyle={}),At.legendStyle.CONTAINER_CLASS=t({},At.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":Pt.style.zIndex===""?1:parseInt(Pt.style.zIndex,10)+1}),F.flipPage?(At.legendStyle.CONTAINER_CLASS.height=Mt[0]==="right"||Mt[0]==="left"?bt+"px":"auto",At.legendStyle.CONTAINER_CLASS.width=Mt[0]==="right"||Mt[0]==="left"?"auto":bt+"px",rt=new c.CatPageHtml(At)):rt=new c.CatHtml(At)}else rt=new c.Category(At);return L._bindClickEvent(rt,m,A),V[O].push(rt),rt},M._bindChartMove=function(m){var S=this.chart,P=this.legends;S.on("plotmove",function(A){var O=!1;if(A.target){var L=A.target.get("origin");if(L){var W=L[o]||L[0][o],F=m.field;if(W){var K=W[F];l.each(P,function(V){l.each(V,function(k){O=!0,!k.destroyed&&k.activate(K)})})}}}O||l.each(P,function(V){l.each(V,function(k){!k.destroyed&&k.deactivate()})})})},M._addContinuousLegend=function(m,S,P){var A=this,O=A.legends;O[P]=O[P]||[];var L=A.container,W=m.field,F=m.getTicks(),K=[],V,k,Z,X=A.viewTheme;l.each(F,function(It){var Nt=It.value,Rt=m.invert(Nt),Mt=S.mapping(Rt).join("");K.push({value:It.tickValue,attrValue:Mt,color:Mt,scaleValue:Nt}),Nt===0&&(k=!0),Nt===1&&(Z=!0)}),k||K.push({value:m.min,attrValue:S.mapping(0).join(""),color:S.mapping(0).join(""),scaleValue:0}),Z||K.push({value:m.max,attrValue:S.mapping(1).join(""),color:S.mapping(1).join(""),scaleValue:1});var it=A.options,ft=P.split("-"),pt=X.legend[ft[0]];(it&&it.slidable===!1||it[W]&&it[W].slidable===!1)&&(pt=l.mix({},pt,X.legend.gradient));var ut=l.deepMix({},pt,it[W]||it,{items:K,attr:S,formatter:m.formatter,container:L,position:[0,0]});if(ut.title&&l.deepMix(ut,{title:{text:m.alias||m.field}}),S.type==="color")V=new c.Color(ut);else if(S.type==="size")it&&it.sizeType==="circle"?V=new c.CircleSize(ut):V=new c.Size(ut);else return;return A._bindFilterEvent(V,m),O[P].push(V),V},M._isTailLegend=function(m,S){if(m.hasOwnProperty("attachLast")&&m.attachLast){var P=S.get("type");if(P==="line"||P==="lineStack"||P==="area"||P==="areaStack")return!0}return!1},M._adjustPosition=function(m,S){var P;if(S)P="right-top";else if(l.isArray(m))P=String(m[0])+"-"+String(m[1]);else{var A=m.split("-");A.length===1?(A[0]==="left"&&(P="left-bottom"),A[0]==="right"&&(P="right-bottom"),A[0]==="top"&&(P="top-center"),A[0]==="bottom"&&(P="bottom-center")):P=m}return P},M.addLegend=function(m,S,P,A){var O=this,L=O.options,W=m.field,F=L[W],K=O.viewTheme;if(F===!1)return null;if(F&&F.custom)O.addCustomLegend(W);else{var V=L.position||K.defaultLegendPosition;V=O._adjustPosition(V,O._isTailLegend(L,P)),F&&F.position&&(V=O._adjustPosition(F.position,O._isTailLegend(F,P)));var k;m.isLinear?k=O._addContinuousLegend(m,S,V):k=O._addCategoryLegend(m,S,P,A,V),k&&(O._bindHoverEvent(k,W),L.reactive&&O._bindChartMove(m))}},M.addCustomLegend=function(m){var S=this,P=S.chart,A=S.viewTheme,O=S.container,L=S.options;m&&(L=L[m]);var W=L.position||A.defaultLegendPosition;W=S._adjustPosition(W);var F=S.legends;F[W]=F[W]||[];var K=L.items;if(!!K){var V=P.getAllGeoms();l.each(K,function(Nt){var Rt=y(V,Nt.value);l.isPlainObject(Nt.marker)?Nt.marker.radius=Nt.marker.radius||a.legendMarkerRadius||u:(Nt.marker={symbol:Nt.marker||"circle",radius:a.legendMarkerRadius||u},l.indexOf(v,Nt.marker.symbol)!==-1?Nt.marker.stroke=Nt.fill:Nt.marker.fill=Nt.fill);var Mt=Nt.marker.symbol;l.isString(Mt)&&Mt.indexOf("hollow")!==-1&&(Nt.marker.symbol=l.lowerFirst(Mt.substr(6))),Nt.checked=l.isNil(Nt.checked)?!0:Nt.checked,Nt.geom=Rt});var k=P.get("canvas"),Z=S.plotRange,X=W.split("-"),it=X[0]==="right"||X[0]==="left"?Z.bl.y-Z.tr.y:k.get("width"),ft=l.deepMix({},A.legend[X[0]],L,{maxLength:it,items:K,container:O,position:[0,0]}),pt;if(L.useHtml){var ut=L.container;if(/^\#/.test(O)){var It=ut.replace("#","");ut=document.getElementById(It)}else ut||(ut=O.get("canvas").get("el").parentNode);ft.container=ut,ft.legendStyle===void 0&&(ft.legendStyle={}),ft.legendStyle.CONTAINER_CLASS||(ft.legendStyle.CONTAINER_CLASS={height:X[0]==="right"||X[0]==="left"?it+"px":"auto",width:X[0]==="right"||X[0]==="left"?"auto":it+"px",position:"absolute",overflow:"auto"}),L.flipPage?pt=new c.CatPageHtml(ft):pt=new c.CatHtml(ft)}else pt=new c.Category(ft);return F[W].push(pt),pt.on("itemclick",function(Nt){L.onClick&&L.onClick(Nt)}),S._bindHoverEvent(pt),pt}},M.addMixedLegend=function(m,S){var P=this,A=P.options,O=[];l.each(m,function(F){var K=F.alias||F.field,V=A[F.field];l.each(S,function(k){if(k.getYScale()===F&&F.values&&F.values.length>0&&V!==!1){var Z=k.get("shapeType")||"point",X=k.getDefaultValue("shape")||"circle",it=h.getShapeFactory(Z),ft={color:k.getDefaultValue("color")},pt=it.getMarkerCfg(X,ft);a.legendMarkerRadius&&(pt.radius=a.legendMarkerRadius);var ut={value:K,marker:pt,field:F.field};O.push(ut)}})});var L={custom:!0,items:O};P.options=l.deepMix({},L,P.options);var W=P.addCustomLegend();P._bindClickEventForMix(W)},M.alignLegends=function(){var m=this,S=m.legends,P=m._getRegion(S);m.totalRegion=P;var A=0;return l.each(S,function(O,L){var W=P.subs[A];l.each(O,function(F,K){var V=O[K-1];F.get("useHtml")&&!F.get("autoPosition")||m._alignLegend(F,V,W,L)}),A++}),this},_}();E.exports=g},function(E,T,e){var t=e(154),l=e(0),s=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,c={LINEAR:"linear",CAT:"cat",TIME:"time"},r=function(){function h(i){this.defs={},this.viewTheme={scales:{}},this.filters={},l.assign(this,i)}var n=h.prototype;return n._getDef=function(a){var o=this.defs,u=this.viewTheme,f=null;return(u.scales[a]||o[a])&&(f=l.mix({},u.scales[a]),l.each(o[a],function(v,b){l.isNil(v)?delete f[b]:f[b]=v}),this.filters[a]&&(delete f.min,delete f.max)),f},n._getDefaultType=function(a,o){var u=c.LINEAR,f=l.Array.firstValue(o,a);return l.isArray(f)&&(f=f[0]),s.test(f)?u=c.TIME:l.isString(f)&&(u=c.CAT),u},n._getScaleCfg=function(a,o,u){var f={field:o},v=l.Array.values(u,o);if(f.values=v,!t.isCategory(a)&&a!=="time"){var b=l.Array.getRange(v);f.min=b.min,f.max=b.max,f.nice=!0}return a==="time"&&(f.nice=!1),f},n.createScale=function(a,o){var u=this,f=u._getDef(a),v,b=o||[],y=l.Array.firstValue(b,a);if(l.isNumber(a)||l.isNil(y)&&!f)v=t.identity({value:a,field:a.toString(),values:[a]});else{var g;f&&(g=f.type),g=g||u._getDefaultType(a,b);var _=u._getScaleCfg(g,a,b);f&&l.mix(_,f),v=t[g](_)}return v},h}();E.exports=r},function(E,T,e){function t(){return t=Object.assign||function(g){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(g[x]=M[x])}return g},t.apply(this,arguments)}var l=e(0),s=e(9),c=e(30),r=c.Tooltip,h=l.MatrixUtil,n=h.vec2,i=["line","area","path","areaStack"],a=["line","area","point"],o=["marker","showMarker"];function u(g,_){var M=-1;return l.each(g,function(x,m){var S=!0;for(var P in _)if(_.hasOwnProperty(P)&&!o.includes(P)&&!l.isObject(_[P])&&_[P]!==x[P]){S=!1;break}if(S)return M=m,!1}),M}function f(g,_){if(!g)return!1;var M="";return g.className?(l.isNil(g.className.baseVal)?M=g.className:M=g.className.baseVal,M.includes(_)):!1}function v(g,_){for(var M=g.parentNode,x=!1;M&&M!==document.body;){if(f(M,_)){x=!0;break}M=M.parentNode}return x}function b(g){var _=[];return l.each(g,function(M){var x=u(_,M);x===-1?_.push(M):_[x]=M}),_}var y=function(){function g(M){l.assign(this,M),this.timeStamp=0,this.locked=!1}var _=g.prototype;return _._normalizeEvent=function(x){var m=this.chart,S=this._getCanvas(),P=S.getPointByClient(x.clientX,x.clientY),A=S.get("pixelRatio");P.x=P.x/A,P.y=P.y/A;var O=m.getViewsByPoint(P);return P.views=O,P},_._getCanvas=function(){return this.chart.get("canvas")},_._getTriggerEvent=function(){var x=this.options,m=x.triggerOn,S;return!m||m==="mousemove"?S="plotmove":m==="click"?S="plotclick":m==="none"&&(S=null),S},_._getDefaultTooltipCfg=function(){var x=this,m=x.chart,S=x.viewTheme,P=x.options,A=l.mix({},S.tooltip),O=m.getAllGeoms().filter(function(k){return k.get("visible")}),L=[];l.each(O,function(k){var Z=k.get("type"),X=k.get("adjusts"),it=!1;X&&l.each(X,function(ft){if(ft.type==="symmetric"||ft.type==="Symmetric")return it=!0,!1}),l.indexOf(L,Z)===-1&&!it&&L.push(Z)});var W=O.length&&O[0].get("coord")?O[0].get("coord").isTransposed:!1,F;if(O.length&&O[0].get("coord")&&O[0].get("coord").type==="cartesian"){if(L[0]==="interval"&&P.shared!==!1){var K=l.mix({},S.tooltipCrosshairsRect);K.isTransposed=W,F={zIndex:0,crosshairs:K}}else if(l.indexOf(a,L[0])>-1){var V=l.mix({},S.tooltipCrosshairsLine);V.isTransposed=W,F={crosshairs:V}}}return l.mix(A,F,{})},_._bindEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.on(m,l.wrapBehavior(this,"onMouseMove")),x.on("plotleave",l.wrapBehavior(this,"onMouseOut")))},_._offEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.off(m,l.getWrapBehavior(this,"onMouseMove")),x.off("plotleave",l.getWrapBehavior(this,"onMouseOut")))},_._setTooltip=function(x,m,S,P){var A=this,O=A.tooltip,L=A.prePoint;if(!L||L.x!==x.x||L.y!==x.y){m=b(m),A.prePoint=x;var W=A.chart,F=A.viewTheme,K=l.isArray(x.x)?x.x[x.x.length-1]:x.x,V=l.isArray(x.y)?x.y[x.y.length-1]:x.y;O.get("visible")||W.emit("tooltip:show",{x:K,y:V,tooltip:O});var k=m[0],Z=k.title||k.name;O.isContentChange(Z,m)&&(W.emit("tooltip:change",{tooltip:O,x:K,y:V,items:m}),Z=m[0].title||m[0].name,O.setContent(Z,m),l.isEmpty(S)?(O.clearMarkers(),O.set("markerItems",[])):A.options.hideMarkers===!0?O.set("markerItems",S):O.setMarkers(S,F.tooltipMarker));var X=this._getCanvas();P===X&&O.get("type")==="mini"?O.hide():(O.setPosition(K,V,P),O.show())}},_.hideTooltip=function(){var x=this.tooltip,m=this.chart,S=this._getCanvas();this.prePoint=null,x.hide(),m.emit("tooltip:hide",{tooltip:x}),S.draw()},_.onMouseMove=function(x){if(!(l.isEmpty(x.views)||this.locked)){var m=this.timeStamp,S=+new Date,P={x:x.x,y:x.y};S-m>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(P,x.views,x.shape),this.timeStamp=S)}},_.onMouseOut=function(x){var m=this.tooltip;!m.get("visible")||!m.get("follow")||this.locked||x&&x.toElement&&(f(x.toElement,"g2-tooltip")||v(x.toElement,"g2-tooltip"))||this.hideTooltip()},_.renderTooltip=function(){var x=this;if(!x.tooltip){var m=x.chart,S=x.viewTheme,P=x._getCanvas(),A=x._getDefaultTooltipCfg(),O=x.options;O=l.deepMix({plotRange:m.get("plotRange"),capture:!1,canvas:P,frontPlot:m.get("frontPlot"),viewTheme:S.tooltip,backPlot:m.get("backPlot")},A,O),O.crosshairs&&O.crosshairs.type==="rect"&&(O.zIndex=0),O.visible=!1;var L;O.type==="mini"?(O.crosshairs=!1,O.position="top",L=new r.Mini(O)):O.useHtml?L=new r.Html(O):L=new r.Canvas(O),x.tooltip=L;var W=x._getTriggerEvent(),F=L.get("container");!L.get("enterable")&&W==="plotmove"&&F&&(F.onmousemove=function(K){var V=x._normalizeEvent(K);m.emit(W,V)}),F&&(F.onmouseleave=function(){x.locked||x.hideTooltip()}),x._bindEvent()}},_._formatMarkerOfItem=function(x,m,S){var P=this,A=P.options,O=S.point;if(O&&O.x&&O.y){var L=l.isArray(O.x)?O.x[O.x.length-1]:O.x,W=l.isArray(O.y)?O.y[O.y.length-1]:O.y;O=x.applyMatrix(L,W,1),S.x=O[0],S.y=O[1],S.showMarker=!0,S.color.substring(0,2)==="l("&&(!A.hasOwnProperty("useHtml")||A.useHtml)&&(S.color=S.color.split(" ")[1].substring(2));var F=P._getItemMarker(m,S);if(S.marker=F,l.indexOf(i,m.get("type"))!==-1)return S}return null},_.lockTooltip=function(){this.locked=!0},_.unlockTooltip=function(){this.locked=!1},_.showTooltip=function(x,m,S){var P=this,A=this;if(!(l.isEmpty(m)||!x)){this.tooltip||this.renderTooltip();var O=A.options,L=[],W=[];if(l.each(m,function(X){if(!X.get("tooltipEnable"))return!0;var it=X.get("geoms"),ft=X.get("coord");l.each(it,function(pt){var ut=pt.get("type");if(pt.get("visible")&&pt.get("tooltipCfg")!==!1){var It=pt.get("dataArray");if(pt.isShareTooltip()||O.shared===!1&&l.inArray(["area","line","path","polygon"],ut)){var Nt=pt.getXScale(),Rt=pt.getAttr("color"),Mt=Rt?Rt.field:void 0;if(ut==="interval"&&Nt.field===Mt&&pt.hasAdjust("dodge")){var bt=l.find(It,function(Q){return!!pt.findPoint(x,Q)});l.each(bt,function(Q){var gt=pt.getTipItems(Q,O.title);l.each(gt,function(et){var ot=A._formatMarkerOfItem(ft,pt,et);ot&&L.push(ot)}),W=W.concat(gt)})}else l.each(It,function(Q){var gt=pt.findPoint(x,Q);if(gt){var et=pt.getTipItems(gt,O.title);l.each(et,function(ot){var xt=A._formatMarkerOfItem(ft,pt,ot);xt&&L.push(xt)}),W=W.concat(et)}})}else{var At=pt.get("shapeContainer"),rt=At.get("canvas"),Pt=rt.get("pixelRatio"),z=At.getShape(x.x*Pt,x.y*Pt);z&&z.get("visible")&&z.get("origin")&&(W=pt.getTipItems(z.get("origin"),O.title)),l.each(W,function(Q){var gt=P._formatMarkerOfItem(ft,pt,Q);gt&&L.push(gt)})}}}),l.each(W,function(pt){var ut=pt.point,It=l.isArray(ut.x)?ut.x[ut.x.length-1]:ut.x,Nt=l.isArray(ut.y)?ut.y[ut.y.length-1]:ut.y;ut=ft.applyMatrix(It,Nt,1),pt.x=ut[0],pt.y=ut[1]})}),W.length){var F=W[0];if(!W.every(function(X){return X.title===F.title})){var K=F,V=Infinity;W.forEach(function(X){var it=n.distance([x.x,x.y],[X.x,X.y]);it<V&&(V=it,K=X)}),W=W.filter(function(X){return X.title===K.title}),L=L.filter(function(X){return X.title===K.title})}if(O.shared===!1&&W.length>1){var k=W[0],Z=Math.abs(x.y-k.y);l.each(W,function(X){Math.abs(x.y-X.y)<=Z&&(k=X,Z=Math.abs(x.y-X.y))}),k&&k.x&&k.y&&(L=[k]),W=[k]}A._setTooltip(x,W,L,S)}else A.hideTooltip()}},_.clear=function(){var x=this.tooltip;x&&x.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},_._getItemMarker=function(x,m){var S=this.options,P=S.marker||this.viewTheme.tooltip.marker;if(l.isFunction(P)){var A=x.get("shapeType")||"point",O=x.getDefaultValue("shape")||"circle",L=s.getShapeFactory(A),W={color:m.color},F=L.getMarkerCfg(O,W);return P(F,m)}return t({fill:m.color},P)},g}();E.exports=y},function(E,T,e){function t(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function l(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var s=e(120),c=e(8),r=e(0),h=e(121),n=e(5),i=e(132),a="_origin",o=e(271);function u(g){var _=g.startAngle,M=g.endAngle;return!(!r.isNil(_)&&!r.isNil(M)&&M-_<Math.PI*2)}function f(g,_,M){var x=(g-_)/(M-_);return x>=0&&x<=1}function v(g,_){var M=!1;if(g){var x=g.type;if(x==="theta"){var m=g.start,S=g.end;M=f(_.x,m.x,S.x)&&f(_.y,m.y,S.y)}else{var P=g.invert(_);M=P.x>=0&&P.y>=0&&P.x<=1&&P.y<=1}}return M}var b={};r.each(c,function(g,_){var M=r.lowerFirst(_);b[M]=function(x){var m=new g(x);return this.addGeom(m),m}});var y=function(g){l(M,g);var _=M.prototype;_.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:n.animate,visible:!0}};function M(x){var m;m=g.call(this,x)||this;var S=t(m);return S._setTheme(),r.each(c,function(P,A){var O=r.lowerFirst(A);S[O]=function(L){L===void 0&&(L={}),L.viewTheme=S.get("viewTheme");var W=new P(L);return S.addGeom(W),W}}),S.init(),m}return _._setTheme=function(){var m=this,S=m.get("theme"),P={},A={};r.isObject(S)?A=S:r.indexOf(Object.keys(i),S)!==-1&&(A=i[S]),r.deepMix(P,n,A),m.set("viewTheme",P)},_.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},_._initOptions=function(){var m=this,S=r.mix({},m.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||r.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&r.each(S.geoms,function(O){m._createGeom(O)});var P=m.get("scaleController");P&&(P.defs=S.scales);var A=m.get("coordController");A&&A.reset(S.coord),this.set("options",S)},_._createGeom=function(m){var S=m.type,P;this[S]&&(P=this[S](),r.each(m,function(A,O){if(P[O])if(r.isObject(A)&&A.field)if(A==="label")P[O](A.field,A.callback,A.cfg);else{var L;r.each(A,function(W,F){F!=="field"&&(L=W)}),P[O](A.field,L)}else P[O](A)}))},_._initControllers=function(){var m=this,S=m.get("options"),P=m.get("viewTheme"),A=m.get("canvas"),O=new h.Scale({viewTheme:P,defs:S.scales}),L=new h.Coord(S.coord);this.set("scaleController",O),this.set("coordController",L);var W=new h.Axis({canvas:A,viewTheme:P});this.set("axisController",W);var F=new h.Guide({viewTheme:P,options:S.guides||[]});this.set("guideController",F)},_._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},_._initGeoms=function(){for(var m=this.get("geoms"),S=this.get("filteredData"),P=this.get("coord"),A=this.get("_id"),O=0;O<m.length;O++){var L=m[O];L.set("data",S),L.set("coord",P),L.set("_id",A+"-geom"+O),L.set("keyFields",this.get("keyFields")),L.init()}},_._clearGeoms=function(){for(var m=this,S=m.get("geoms"),P=0;P<S.length;P++){var A=S[P];A.clear()}},_._removeGeoms=function(){for(var m=this,S=m.get("geoms");S.length>0;){var P=S.shift();P.destroy()}},_._drawGeoms=function(){this.emit("beforedrawgeoms");for(var m=this.get("geoms"),S=this.get("coord"),P=0;P<m.length;P++){var A=m[P];A.setCoord(S),A.paint()}this.emit("afterdrawgeoms")},_.isShapeInView=function(m){var S=this.get("_id"),P=m._id;if(P)return P.split("-")[0]===S;for(var A=m;A;){if(A.get("viewId")===S)return!0;A=A.get("parent")}return!1},_.getViewRegion=function(){var m=this,S=m.get("parent"),P,A;if(S){var O=S.getViewRegion(),L=m._getViewRegion(O.start,O.end);P=L.start,A=L.end}else P=m.get("start"),A=m.get("end");return{start:P,end:A}},_._getViewRegion=function(m,S){var P=this.get("start"),A=this.get("end"),O=P.x,L=1-A.y,W=A.x,F=1-P.y,K=this.get("padding"),V=r.toAllPadding(K),k=V[0],Z=V[1],X=V[2],it=V[3],ft={x:O*(S.x-m.x)+m.x+it,y:L*(S.y-m.y)+m.y-X},pt={x:W*(S.x-m.x)+m.x-Z,y:F*(S.y-m.y)+m.y+k};return{start:ft,end:pt}},_._createCoord=function(){var m=this.get("coordController"),S=this.getViewRegion(),P=m.createCoord(S.start,S.end);this.set("coord",P)},_._renderAxes=function(){var m=this.get("options"),S=m.axes;if(S!==!1){var P=this.get("axisController");P.container=this.get("backPlot"),P.coord=this.get("coord"),P.options=S||{};var A=this.getXScale(),O=this.getYScales(),L=this.get("_id");P.createAxis(A,O,L)}},_._renderGuides=function(){var m=this.get("guideController");if(!r.isEmpty(m.options)){var S=this.get("coord");m.view=this,m.backContainer=this.get("backPlot"),m.frontContainer=this.get("frontPlot"),m.xScales=this._getScales("x"),m.yScales=this._getScales("y"),m.render(S)}},_._bindEvents=function(){var m=new h.Event({view:this,canvas:this.get("canvas")});m.bindEvents(),this.set("eventController",m)},_._clearEvents=function(){var m=this.get("eventController");m&&m.clearEvents()},_._getScales=function(m){for(var S=this.get("geoms"),P={},A=0;A<S.length;A++){var O=S[A],L=m==="x"?O.getXScale():O.getYScale();L&&!P[L.field]&&(P[L.field]=L)}return P},_._adjustScale=function(){this._setCatScalesRange();for(var m=this.get("geoms"),S=this.get("scaleController"),P=S.defs,A=0;A<m.length;A++){var O=m[A];if(O.get("type")==="interval"){var L=O.getYScale(),W=L.field,F=L.min,K=L.max,V=L.type;!(P[W]&&P[W].min)&&V!=="time"&&(F>0?L.change({min:0}):K<=0&&L.change({max:0}))}}},_._setCatScalesRange=function(){var m=this,S=m.get("coord"),P=m.get("viewTheme"),A=m.getXScale(),O=m.getYScales(),L=[];A&&L.push(A),L=L.concat(O);var W=S.isPolar&&u(S),F=m.get("scaleController"),K=F.defs;r.each(L,function(V){if((V.isCategory||V.isIdentity)&&V.values&&!(K[V.field]&&K[V.field].range)){var k=V.values.length,Z;if(k===1)Z=[.5,1];else{var X=1,it=0;W?S.isTransposed?(X=P.widthRatio.multiplePie,it=1/k*X,Z=[it/2,1-it/2]):Z=[0,1-1/k]:(it=1/k*1/2,Z=[it,1-it])}V.range=Z}})},_.getXScale=function(){var m=this.get("geoms"),S=null;return r.isEmpty(m)||(S=m[0].getXScale()),S},_.getYScales=function(){for(var m=this.get("geoms"),S=[],P=0;P<m.length;P++){var A=m[P],O=A.getYScale();O&&r.indexOf(S,O)===-1&&S.push(O)}return S},_.getXY=function(m){var S=this,P=S.get("coord"),A=S._getScales("x"),O=S._getScales("y"),L,W;for(var F in m)A[F]&&(L=A[F].scale(m[F])),O[F]&&(W=O[F].scale(m[F]));return!r.isNil(L)&&!r.isNil(W)?P.convert({x:L,y:W}):null},_.getSnapRecords=function(m){var S=this,P=S.get("geoms"),A=[];return r.each(P,function(O){var L=O.get("dataArray"),W;r.each(L,function(F){W=O.findPoint(m,F),W&&A.push(W)})}),A},_.addGeom=function(m){var S=this,P=S.get("geoms");P.push(m),m.set("view",S);var A=S.get("viewContainer");m.set("container",A),m.set("animate",S.get("animate")),m.bindEvents()},_.removeGeom=function(m){var S=this.get("geoms");r.Array.remove(S,m),m.destroy()},_.createScale=function(m,S){var P=this.get("scales"),A=this.get("parent"),O=P[m];if(!S){var L=this.get("filteredData"),W=this._getFieldsForLegend();L.length&&!W.includes(m)?S=L:S=this.get("data")}var F=this.get("scaleController");if(O){if(O.sync){var V=F.createScale(m,S);this._syncScale(O,V)}}else{if(O=F.createScale(m,S),O.sync&&A){var K=A.createScale(m,S);O=this._getSyncScale(K,O)}P[m]=O}return O},_._getFieldsForLegend=function(){var m=[],S=this.get("geoms");return r.each(S,function(P){var A=P.getFieldsForLegend();m=m.concat(A)}),r.uniq(m)},_._getSyncScale=function(m,S){return m.type!==S.type?S:(this._syncScale(m,S),m)},_._syncScale=function(m,S){var P=r.union(m.values,S.values);if(S.isLinear){var A=Math.max(m.max,S.max),O=Math.min(m.min,S.min);(m.max!==A||m.min!==O)&&m.change({min:O,max:A,values:P})}P.length!==m.values.length&&m.change({values:P})},_.getFilteredValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(A[m]):O=P.slice(0),O},_.getFilteredOutValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(function(){return!A[m].apply(A,arguments)}):O=[],O},_.filter=function(m,S){var P=this.get("options");P.filters||(P.filters={}),P.filters[m]=S,this.get("scaleController").filters=P.filters},_._getFilters=function(){var m=this.get("options");return m.filters},_.execFilter=function(m){var S=this,P=S._getFilters();return P&&(m=m.filter(function(A){var O=!0;return r.each(P,function(L,W){if(L&&(O=L(A[W],A),!O))return!1}),O})),m},_.axis=function(m,S){var P=this.get("options");if(m===!1)P.axes=!1;else{P.axes||(P.axes={});var A=P.axes;A[m]=S}return this},_.guide=function(){return this.get("guideController")},_._getKeyFields=function(m){var S=[];r.each(m,function(P,A){P.key&&S.push(A)}),this.set("keyFields",S)},_.scale=function(m,S){var P=this.get("options"),A=P.scales;return r.isObject(m)?r.mix(A,m):A[m]=S,this._getKeyFields(A),this},_.tooltip=function(m){return this.set("tooltipEnable",m),this},_.animate=function(m){var S=this.get("options");return S.animate=m,this.set("animate",m),this},_.changeOptions=function(m){return this.set("options",m),this._initOptions(m),this},_.getViewsByPoint=function(m){var S=[],P=this.get("views");return v(this.get("coord"),m)&&S.push(this),r.each(P,function(A){A.get("visible")&&v(A.get("coord"),m)&&S.push(A)}),S},_.eachShape=function(m){var S=this,P=S.get("views"),A=S.get("canvas");r.each(P,function(L){L.eachShape(m)});var O=this.get("geoms");return r.each(O,function(L){var W=L.getShapes();r.each(W,function(F){var K=F.get("origin");if(r.isArray(K)){var V=K.map(function(Z){return Z[a]});m(V,F,L,S)}else{var k=K[a];m(k,F,L,S)}})}),A.draw(),this},_.filterShape=function(m){var S=function(A,O,L,W){m(A,O,L,W)?O.show():O.hide()};return this.eachShape(S),this},_.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var m=this.get("options");m.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},_.clear=function(){var m=this.get("options");return m.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},_.coord=function(m,S){var P=this.get("coordController");return P.reset({type:m,cfg:S}),P},_.resetCoord=function(){this._createCoord()},_.source=function(m,S){return this._initData(m),S&&this.scale(S),this.emit("setdata"),this},_.changeData=function(m){return this.emit("beforechangedata"),this._initData(m),this.emit("afterchangedata"),this.repaint(),this},_._initData=function(m){var S=this.get("dataView");S&&(S.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),m&&m.isDataView&&(m.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",m),m=m.rows),this.set("data",m)},_._onViewChange=function(){this.emit("beforechangedata");var m=this.get("dataView"),S=m.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},_.beforeRender=function(){var m=this.get("views");r.each(m,function(S){S.beforeRender()}),this.initView()},_.drawComponents=function(){var m=this.get("views");r.each(m,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},_.drawCanvas=function(m){if(!m){var S=this.get("views"),P=this.get("backPlot");P.sort();var A=this.get("canvas"),O=this.get("animate");if(O){var L=this.get("isUpdate");r.each(S,function(W){o.execAnimation(W,L)}),o.execAnimation(this,L)}else A.draw()}},_.render=function(m){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(m),this.emit("afterrender"),this.set("rendered",!0),this},_.initView=function(){var m=this.get("data")||[],S=this.execFilter(m);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},_.paint=function(){var m=this.get("views");r.each(m,function(P){P.paint()});var S=this.get("data");r.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},_.changeVisible=function(m,S){var P=this.get("geoms");if(r.each(P,function(O){O.changeVisible(m,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(m),this.get("guideController")&&this.get("guideController").changeVisible(m),!S){var A=this.get("canvas");A.draw()}},_.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},_.destroy=function(){this._clearEvents();var m=this.get("dataView");m&&m.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),g.prototype.destroy.call(this)},M}(s);E.exports=y},function(E,T,e){var t=e(30),l=t.Guide,s=e(281);l.RegionFilter=s,E.exports=l},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(0),s=e(20),c=e(31),r=c.Path,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return l.mix({},u,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},a.render=function(u,f,v,b){var y=this,g=f.addGroup();g.name="guide-region-filter",b.once("afterpaint",function(){if(!g.get("destroyed")){y._drawShapes(b,g);var _=y._drawClip(u);g.attr({clip:_}),y.set("clip",_),y.get("appendInfo")&&g.setSilent("appendInfo",y.get("appendInfo")),y.set("el",g)}})},a._drawShapes=function(u,f){var v=this,b=[],y=u.getAllGeoms();return y.map(function(g){var _=g.getShapes(),M=g.get("type"),x=v._geomFilter(M);return x&&_.map(function(m){var S=m.type,P=l.cloneDeep(m.attr());v._adjustDisplay(P);var A=f.addShape(S,{attrs:P});return b.push(A),m}),g}),b},a._drawClip=function(u){var f=this,v=f.parsePoint(u,f.get("start")),b=f.parsePoint(u,f.get("end")),y=[["M",v.x,v.y],["L",b.x,v.y],["L",b.x,b.y],["L",v.x,b.y],["z"]],g=new r({attrs:{path:y,opacity:1}});return g},a._adjustDisplay=function(u){var f=this,v=f.get("color");u.fill&&(u.fill=u.fillStyle=v),u.stroke=u.strokeStyle=v},a._geomFilter=function(u){var f=this,v=f.get("apply");return v?l.contains(v,u):!0},a.clear=function(){n.prototype.clear.call(this);var u=this.get("clip");u&&u.remove()},i}(s);E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(0),s=e(30),c=e(5),r=s.Legend,h=r.Category,n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return l.mix({},f,{type:"tail-legend",layout:"vertical",autoLayout:!0})},o._addItem=function(f){var v=this.get("itemsGroup"),b=this._getNextX(),y=0,g=this.get("unCheckColor"),_=v.addGroup({x:0,y:0,value:f.value,scaleValue:f.scaleValue,checked:f.checked});_.translate(b,y),_.set("viewId",v.get("viewId"));var M=this.get("textStyle"),x=this.get("_wordSpaceing"),m=0;if(f.marker){var S=l.mix({},f.marker,{x:f.marker.radius,y:0});f.checked||(S.fill&&(S.fill=g),S.stroke&&(S.stroke=g));var P=_.addShape("marker",{type:"marker",attrs:S});P.attr("cursor","pointer"),P.name="legend-marker",m+=P.getBBox().width+x}var A=l.mix({},M,{x:m,y:0,text:this._formatItemValue(f.value)});f.checked||l.mix(A,{fill:g});var O=_.addShape("text",{attrs:A});O.attr("cursor","pointer"),O.name="legend-text",this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo"));var L=_.getBBox(),W=this.get("itemWidth"),F=_.addShape("rect",{attrs:{x:b,y:y-L.height/2,fill:"#fff",fillOpacity:0,width:W||L.width,height:L.height}});return F.attr("cursor","pointer"),F.setSilent("origin",f),F.name="legend-item",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo")),_.name="legendGroup",_},o._adjust=function(){var f=this,v=f.get("geom");if(v){var b=f.get("group").attr("matrix");b[7]=0;var y=f.get("geom").get("dataArray"),g=this.get("itemsGroup").get("children"),_=0;l.each(g,function(M){var x=y[_],m=x[x.length-1].y;l.isArray(m)&&(m=m[1]);var S=M.getBBox().height,P=M.get("x"),A=m-S/2;M.translate(P,A),_++}),f.get("autoLayout")&&f._antiCollision(g)}},o.render=function(){var f=this;i.prototype.render.call(this);var v=this.get("chart");v.once("afterpaint",function(){f._adjust()})},o._getPreviousY=function(f){var v=f.attr("matrix")[7],b=f.getBBox().height;return v+b},o._adjustDenote=function(f,v,b){var y=c.legend.legendMargin,g=-2,_=-y*2;f.addShape("path",{attrs:{path:"M"+g+","+v+"L"+_+","+(b+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},o._antiCollision=function(f){if(f===void 0&&(f=[]),!!f.length){var v=this;f.sort(function(V,k){var Z=V.attr("matrix")[7],X=k.attr("matrix")[7];return Z-X});var b=!0,y=v.get("chart").get("plotRange"),g=y.tl.y,_=Math.abs(g-y.bl.y),M=f[0].getBBox().height,x=Number.MIN_VALUE,m=0,S=f.map(function(V){var k=V.attr("matrix")[7];return k>m&&(m=k),k<x&&(x=k),{size:V.getBBox().height,targets:[k-g]}});x-=g;for(var P=0;b;){for(var A=0;A<S.length;A++){var O=S[A],L=(Math.min.apply(x,O.targets)+Math.max.apply(x,O.targets))/2;O.pos=Math.min(Math.max(x,L-O.size/2),_-O.size)}for(b=!1,P=S.length;P--;)if(P>0){var W=S[P-1],F=S[P];W.pos+W.size>F.pos&&(W.size+=F.size,W.targets=W.targets.concat(F.targets),S.splice(P,1),b=!0)}}P=0;var K=this.get("itemsGroup").addGroup();S.forEach(function(V){var k=g+M;V.targets.forEach(function(){var Z=f[P].attr("matrix")[7],X=V.pos+k-M/2,it=Math.abs(Z-X);it>M/2&&v._adjustDenote(K,X,Z-v.get("group").attr("matrix")[7]/2),f[P].translate(0,-Z),f[P].translate(0,X),k+=M,P++})})}},a}(h);E.exports=n},function(E,T,e){var t=e(0),l=e(16),s=l.Group,c="auto",r=function h(n){h.superclass.constructor.call(this,n)};t.extend(r,s),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var n=this,i=n.get("background");if(i){var a=this.get("canvas"),o=n.get("width")||a.get("width"),u=n.get("height")||a.get("height"),f={x:0,y:0,width:o,height:u},v=n.get("backgroundShape");v?v.attr(f):(v=this.addShape("rect",{attrs:t.mix(f,i)}),this.set("backgroundShape",v))}else return},_renderPlotBackground:function(){var n=this,i=n.get("plotBackground");if(i){var a=n.get("plotRange"),o=a.br.x-a.bl.x,u=a.br.y-a.tr.y,f=a.tl,v={x:f.x,y:f.y,width:o,height:u},b=n.get("plotBackShape");b?b.attr(v):(i.image?(v.img=i.image,b=n.addShape("image",{attrs:v})):(t.mix(v,i),b=n.addShape("rect",{attrs:v})),n.set("plotBackShape",b))}else return},_convert:function(n,i){if(t.isString(n)){if(n===c)n=0;else if(n.includes("%")){var a=this.get("canvas"),o=this.get("width")||a.get("width"),u=this.get("height")||a.get("height");n=parseInt(n,10)/100,n=i?n*o:n*u}}return n},_calculateRange:function(){var n=this,i=n.get("plotRange");t.isNil(i)&&(i={});var a=n.get("padding"),o=this.get("canvas"),u=n.get("width")||o.get("width"),f=n.get("height")||o.get("height"),v=t.toAllPadding(a),b=n._convert(v[0],!1),y=n._convert(v[1],!0),g=n._convert(v[2],!1),_=n._convert(v[3],!0),M=Math.min(_,u-y),x=Math.max(_,u-y),m=Math.min(f-g,b),S=Math.max(f-g,b);i.tl={x:M,y:m},i.tr={x,y:m},i.bl={x:M,y:S},i.br={x,y:S},i.cc={x:(x+M)/2,y:(S+m)/2},this.set("plotRange",i)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),E.exports=r},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(46);function s(r,h,n){return{x:r.x+h*Math.cos(n),y:r.y+h*Math.sin(n)}}var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="circle",a},n.getRegion=function(a,o){var u=1/2,f=Math.PI*2/a,v=-1*Math.PI/2+f*o,b=u/(1+1/Math.sin(f/2)),y={x:.5,y:.5},g=s(y,u-b,v),_=Math.PI*5/4,M=Math.PI*1/4;return{start:s(g,b,_),end:s(g,b,M)}},n.generateFacets=function(a){var o=this,u=o.fields,f=u[0];if(!f)throw"Please specify for the field for facet!";var v=o.getFieldValues(f,a),b=v.length,y=[];return v.forEach(function(g,_){var M=[{field:f,value:g,values:v}],x=o.getFilter(M),m=a.filter(x),S={type:o.type,colValue:g,colField:f,colIndex:_,cols:b,rows:1,rowIndex:0,data:m,region:o.getRegion(b,_)};y.push(S)}),y},h}(l);E.exports=c},function(E,T,e){var t=e(0),l=e(44),s={};s.Rect=e(126),s.List=e(125),s.Circle=e(284),s.Tree=e(288),s.Mirror=e(287),s.Matrix=e(286),l.prototype.facet=function(c,r){var h=s[t.upperFirst(c)];if(!h)throw new Error("Not support such type of facets as: "+c);var n=this.get("facets");n&&n.destroy(),r.chart=this;var i=new h(r);this.set("facets",i)},E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(126),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="matrix",i.showTitle=!1,i},h.generateFacets=function(i){for(var a=this,o=a.fields,u=o.length,f=u,v=[],b=0;b<f;b++)for(var y=o[b],g=0;g<u;g++){var _=o[g],M={type:a.type,colValue:y,rowValue:_,colField:y,rowField:_,colIndex:b,rowIndex:g,cols:f,rows:u,data:i,region:a.getRegion(u,f,b,g)};v.push(M)}return v},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&(a[i].title=null,a[i].label=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(125),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="mirror",this.transpose=!1,i},h.init=function(){var i=this;i.transpose?(i.cols=2,i.rows=1):(i.cols=1,i.rows=2),c.prototype.init.call(this)},h.beforeProcessView=function(i,a){this.transpose?a.colIndex%2==0?i.coord().transpose().scale(-1,1):i.coord().transpose():a.rowIndex%2!=0&&i.coord().scale(1,-1)},h.renderTitle=function(i,a){this.transpose?this.drawColTitle(i,a):this.drawRowTitle(i,a)},h.setXAxis=function(i,a,o){(o.colIndex===1||o.rowIndex===1)&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(){},r}(l);E.exports=s},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(46),s=e(0),c=s.assign,r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="tree",o.line={lineWidth:1,stroke:"#ddd"},o.lineSmooth=!1,o},i.generateFacets=function(o){var u=this,f=u.fields;if(!f.length)throw"Please specify for the fields for facet!";var v=[],b=u.getRootFacet(o);return v.push(b),b.children=u.getChildFacets(o,1,v),u.setRegion(v),v},i.getRootFacet=function(o){var u=this,f={type:u.type,rows:u.getRows(),rowIndex:0,colIndex:0,colValue:u.rootTitle,data:o};return f},i.getRows=function(){return this.fields.length+1},i.getChildFacets=function(o,u,f){var v=this,b=v.fields,y=b.length;if(!(y<u)){var g=[],_=b[u-1],M=v.getFieldValues(_,o);return M.forEach(function(x,m){var S=[{field:_,value:x,values:M}],P=v.getFilter(S),A=o.filter(P);if(A.length){var O={type:v.type,colValue:x,colField:_,colIndex:m,rows:v.getRows(),rowIndex:u,data:A,children:v.getChildFacets(A,u+1,f)};g.push(O),f.push(O)}}),g}},i.setRegion=function(o){var u=this;u.forceColIndex(o),o.forEach(function(f){f.region=u.getRegion(f.rows,f.cols,f.colIndex,f.rowIndex)})},i.forceColIndex=function(o){var u=this,f=[],v=0;o.forEach(function(x){u.isLeaf(x)&&(f.push(x),x.colIndex=v,v++)}),f.forEach(function(x){x.cols=f.length});for(var b=u.fields.length,y=b-1;y>=0;y--)for(var g=u.getFacetsByLevel(o,y),_=0;_<g.length;_++){var M=g[_];u.isLeaf(M)||(M.originColIndex=M.colIndex,M.colIndex=u.getRegionIndex(M.children),M.cols=f.length)}},i.getFacetsByLevel=function(o,u){var f=[];return o.forEach(function(v){v.rowIndex===u&&f.push(v)}),f},i.getRegion=function(o,u,f,v){var b=1/u,y=1/o,g={x:b*f,y:y*v},_={x:g.x+b,y:g.y+y*2/3};return{start:g,end:_}},i.getRegionIndex=function(o){var u=o[0],f=o[o.length-1];return(f.colIndex-u.colIndex)/2+u.colIndex},i.isLeaf=function(o){return!o.children||!o.children.length},i.setXAxis=function(o,u,f){f.rowIndex!==f.rows-1&&(u[o].label=null,u[o].title=null)},i.setYAxis=function(o,u,f){f.originColIndex!==0&&f.colIndex!==0&&(u[o].title=null,u[o].label=null)},i.onPaint=function(){h.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},i.drawLines=function(o,u){var f=this,v=u.addGroup();o.forEach(function(b){if(!f.isLeaf(b)){var y=b.children;f._addFacetLines(b,y,v)}})},i._addFacetLines=function(o,u,f){var v=this,b=o.view,y=b.getViewRegion(),g={x:y.start.x+(y.end.x-y.start.x)/2,y:y.start.y};u.forEach(function(_){var M=_.view.getViewRegion(),x={x:M.start.x+(M.end.x-M.start.x)/2,y:M.end.y},m={x:g.x,y:g.y+(x.y-g.y)/2},S={x:x.x,y:m.y};v._drawLine([g,m,S,x],f)})},i._getPath=function(o){var u=this,f=[],v=u.lineSmooth;return v?(f.push(["M",o[0].x,o[0].y]),f.push(["C",o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y])):o.forEach(function(b,y){y===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}),f},i._drawLine=function(o,u){var f=this,v=f._getPath(o),b=f.line;u.addShape("path",{attrs:c({path:v},b)})},n}(l);E.exports=r},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(128),r=e(0);e(304);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="area",f.shapeType="area",f.generatePoints=!0,f.sortable=!0,f};function o(u){var f;return f=i.call(this,u)||this,r.assign(t(f),c),f}return a.draw=function(f,v,b,y){var g=this,_=this.getDrawCfg(f[0]);g._applyViewThemeShapeStyle(_,_.shape,b);var M=this.splitData(f);_.origin=f,r.each(M,function(x,m){_.splitedIndex=m;var S=x.map(function(A){return A.points});_.points=S;var P=b.drawShape(_.shape,_,v);g.appendShapeInfo(P,y+m)})},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},a}(h);h.Stack=n,s.Area=h,s.AreaStack=n,E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(8);e(305);var s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="edge",i.shapeType="edge",i.generatePoints=!0,i},r}(l);l.Edge=s,E.exports=s},function(E,T,e){function t(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var l=e(65),s=l.ColorUtil,c=e(8),r=e(0),h="_origin",n="shadowCanvas",i="valueRange",a="imageShape",o="mappedData",u="grayScaleBlurredCanvas",f="heatmapSize",v=function(b){t(y,b);function y(){return b.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=b.prototype.getDefaultCfg.call(this);return M.type="heatmap",M.paletteCache={},M},g._prepareRange=function(){var M=this,x=M.get(o),m=M.getAttr("color"),S=m.field,P=Infinity,A=-Infinity;x.forEach(function(L){var W=L[h][S];W>A&&(A=W),W<P&&(P=W)}),P===A&&(P=A-1);var O=[P,A];M.set(i,O)},g._prepareSize=function(){var M=this,x=M.getDefaultValue("size");r.isNumber(x)||(x=M._getDefaultSize());var m=M.get("styleOptions"),S=m&&r.isObject(m.style)?m.style.blur:null;(!r.isFinite(S)||S===null)&&(S=x/2),M.set(f,{blur:S,radius:x})},g._getDefaultSize=function(){var M=this,x=M.getAttr("position"),m=M.get("coord"),S=Math.min(m.width/(x.scales[0].ticks.length*4),m.height/(x.scales[1].ticks.length*4));return S},g._colorize=function(M){for(var x=this,m=x.getAttr("color"),S=M.data,P=x.get("paletteCache"),A=3;A<S.length;A+=4){var O=S[A];if(O){var L=void 0;P[O]?L=P[O]:(L=s.rgb2arr(m.gradient(O/256)),P[O]=L),S[A-3]=L[0],S[A-2]=L[1],S[A-1]=L[2],S[A]=O}}},g._prepareGreyScaleBlurredCircle=function(M,x){var m=this,S=m.get(u);S||(S=document.createElement("canvas"),m.set(u,S));var P=M+x,A=S.getContext("2d");S.width=S.height=P*2,A.clearRect(0,0,S.width,S.height),A.shadowOffsetX=A.shadowOffsetY=P*2,A.shadowBlur=x,A.shadowColor="black",A.beginPath(),A.arc(-P,-P,M,0,Math.PI*2,!0),A.closePath(),A.fill()},g._drawGrayScaleBlurredCircle=function(M,x,m,S,P){var A=this,O=A.get(u);P.globalAlpha=S,P.drawImage(O,M-m,x-m)},g._getShadowCanvasCtx=function(){var M=this,x=M.get(n);x||(x=document.createElement("canvas"),M.set(n,x));var m=M.get("coord");return m&&(x.width=m.width,x.height=m.height),x.getContext("2d")},g._clearShadowCanvasCtx=function(){var M=this._getShadowCanvasCtx();M.clearRect(0,0,M.canvas.width,M.canvas.height)},g._getImageShape=function(){var M=this,x=M.get(a);if(x)return x;var m=M.get("container");return x=m.addShape("Image",{}),M.set(a,x),x},g.clear=function(){this._clearShadowCanvasCtx(),b.prototype.clear.call(this)},g.drawWithRange=function(M){var x=this,m=x.get("coord"),S=m.start,P=m.end,A=m.width,O=m.height,L=x.getAttr("color").field,W=x.get(f);x._clearShadowCanvasCtx();var F=x._getShadowCanvasCtx(),K=x.get(o);M&&(K=K.filter(function(ut){return ut[h][L]<=M[1]&&ut[h][L]>=M[0]}));for(var V=x._getScale(L),k=0;k<K.length;k++){var Z=K[k],X=x.getDrawCfg(Z),it=V.scale(Z[h][L]);x._drawGrayScaleBlurredCircle(X.x-S.x,X.y-P.y,W.radius+W.blur,it,F)}var ft=F.getImageData(0,0,A,O);x._clearShadowCanvasCtx(),x._colorize(ft),F.putImageData(ft,0,0);var pt=x._getImageShape();pt.attr("x",S.x),pt.attr("y",P.y),pt.attr("width",A),pt.attr("height",O),pt.attr("img",F.canvas)},g.draw=function(M){var x=this;x.set(o,M),x._prepareRange(),x._prepareSize();var m=x.get(f);x._prepareGreyScaleBlurredCircle(m.radius,m.blur);var S=x.get(i);x.drawWithRange(S)},y}(c);c.Heatmap=v,E.exports=v},function(E,T,e){var t=e(8);t.Point=e(301),t.PointJitter=t.Point.Jitter,t.PointStack=t.Point.Stack,t.Path=e(130),t.Line=e(297),t.LineStack=t.Line.Stack,t.Interval=e(293),t.IntervalStack=t.Interval.Stack,t.IntervalDodge=t.Interval.Dodge,t.IntervalSymmetric=t.Interval.Symmetric,t.Area=e(289),t.AreaStack=t.Area.Stack,t.Polygon=e(302),t.Schema=e(303),t.SchemaDodge=t.Schema.Dodge,t.Edge=e(290),t.Heatmap=e(291),t.Venn=e(315),t.Violin=e(316),E.exports=t},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function l(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var s=e(8),c=e(0),r=e(70);e(306);var h=function(o){l(f,o);var u=f.prototype;u.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.type="interval",b.shapeType="interval",b.generatePoints=!0,b};function f(v){var b;return b=o.call(this,v)||this,c.assign(t(b),r),b}return u.createShapePointsCfg=function(b){var y=o.prototype.createShapePointsCfg.call(this,b);return y.size=this.getNormalizedSize(b),y},u.clearInner=function(){o.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(s),n=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"stack"}],b},u}(h),i=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"dodge"}],b},u}(h),a=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"symmetric"}],b},u}(h);h.Stack=n,h.Dodge=i,h.Symmetric=a,s.Interval=h,s.IntervalStack=n,s.IntervalDodge=i,s.IntervalSymmetric=a,E.exports=h},function(E,T,e){var t=e(69),l=e(127),s=e(296),c=e(295),r={getLabelsClass:function(n,i){var a=t;return n==="polar"?a=l:n==="theta"?a=s:(i==="interval"||i==="polygon")&&(a=c),a}};E.exports=r},function(E,T,e){var t=e(0),l=e(69),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,l),t.augment(s,{setLabelPosition:function(r,h,n,i){t.isFunction(i)&&(i=i(r.text,h._origin,n));var a=this.get("coord"),o=a.isTransposed,u=a.convertPoint(h.points[0]),f=a.convertPoint(h.points[2]),v=(u.x-f.x)/2*(o?-1:1),b=(u.y-f.y)/2*(o?-1:1);switch(i){case"right":o?(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"center"):(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"left");break;case"left":o?(r.x-=v,r.y-=b,r.textAlign=r.textAlign||"center"):(r.x+=v,r.y+=b,r.textAlign=r.textAlign||"right");break;case"bottom":o?(r.x-=v*2,r.textAlign=r.textAlign||"left"):(r.y+=b*2,r.textAlign=r.textAlign||"center");break;case"middle":o?r.x-=v:r.y+=b,r.textAlign=r.textAlign||"center";break;case"top":o?r.textAlign=r.textAlign||"left":r.textAlign=r.textAlign||"center";break;default:break}}}),E.exports=s},function(E,T,e){var t=e(0),l=e(127),s=e(25),c=e(5),r=5;function h(a,o,u){return{x:a.x+u*Math.cos(o),y:a.y+u*Math.sin(o)}}function n(a,o,u,f,v){var b=!0,y=u.start,g=u.end,_=Math.min(y.y,g.y),M=Math.abs(y.y-g.y),x,m=0,S=Number.MIN_VALUE,P=a.map(function(L){return L.y>m&&(m=L.y),L.y<S&&(S=L.y),{size:o,targets:[L.y-_]}});for(S-=_,m-_>M&&(M=m-_);b;)for(P.forEach(function(L){var W=(Math.min.apply(S,L.targets)+Math.max.apply(S,L.targets))/2;L.pos=Math.min(Math.max(S,W-L.size/2),M-L.size)}),b=!1,x=P.length;x--;)if(x>0){var A=P[x-1],O=P[x];A.pos+A.size>O.pos&&(A.size+=O.size,A.targets=A.targets.concat(O.targets),A.pos+A.size>M&&(A.pos=M-A.size),P.splice(x,1),b=!0)}x=0,P.forEach(function(L){var W=_+o/2;L.targets.forEach(function(){a[x].y=L.pos+W,W+=o,x++})}),a.forEach(function(L){var W=L.r*L.r,F=Math.pow(Math.abs(L.y-f.y),2);if(W<F)L.x=f.x;else{var K=Math.sqrt(W-F);v?L.x=f.x+K:L.x=f.x-K}})}var i=function a(o){a.superclass.constructor.call(this,o)};t.extend(i,l),t.augment(i,{getDefaultCfg:function(){return{label:c.thetaLabels}},getDefaultOffset:function(o){return o.offset||0},adjustItems:function(o){var u=this,f=o[0]?o[0].offset:0;return f>0&&(o=u._distribute(o,f)),i.superclass.adjustItems.call(this,o)},_distribute:function(o,u){var f=this,v=f.get("coord"),b=v.getRadius(),y=f.get("label").labelHeight,g=v.getCenter(),_=b+u,M=_*2+y*2,x={start:v.start,end:v.end},m=f.get("geom");if(m){var S=m.get("view");x=S.getViewRegion()}var P=[[],[]];return o.forEach(function(A){!A||(A.textAlign==="right"?P[0].push(A):P[1].push(A))}),P.forEach(function(A,O){var L=parseInt(M/y,10);A.length>L&&(A.sort(function(W,F){return F["..percent"]-W["..percent"]}),A.splice(L,A.length-L)),A.sort(function(W,F){return W.y-F.y}),n(A,y,x,g,O)}),P[0].concat(P[1])},lineToLabel:function(o){var u=this,f=u.get("coord"),v=f.getRadius(),b=o.offset,y=o.orignAngle||o.angle,g=f.getCenter(),_=h(g,y,v+r/2),M=h(g,y,v+b/2);o.labelLine||(o.labelLine=u.get("label").labelLine||{}),o.labelLine.path=["M"+_.x,_.y+" Q"+M.x,M.y+" "+o.x,o.y].join(",")},getLabelRotate:function(o,u){var f;return u<0&&(f=o*180/Math.PI,f>90&&(f=f-180),f<-90&&(f=f+180)),f/180*Math.PI},getLabelAlign:function(o){var u=this,f=u.get("coord"),v=f.getCenter(),b;o.angle<=Math.PI/2&&o.x>=v.x?b="left":b="right";var y=u.getDefaultOffset(o);return y<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(o){return o},getPointAngle:function(o){var u=this,f=u.get("coord"),v={x:t.isArray(o.x)?o.x[0]:o.x,y:o.y[0]};u.transLabelPoint(v);var b={x:t.isArray(o.x)?o.x[1]:o.x,y:o.y[1]};u.transLabelPoint(b);var y,g=s.getPointAngle(f,v);if(o.points&&o.points[0].y===o.points[1].y)y=g;else{var _=s.getPointAngle(f,b);g>=_&&(_=_+Math.PI*2),y=g+(_-g)/2}return y},getCirclePoint:function(o,u){var f=this,v=f.get("coord"),b=v.getCenter(),y=v.getRadius()+u,g=h(b,o,y);return g.angle=o,g.r=y,g}}),E.exports=i},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(8),s=e(130);e(307);var c=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="line",o.sortable=!0,o},n}(s),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.hasDefaultAdjust=!0,o.adjusts=[{type:"stack"}],o},n}(c);c.Stack=r,l.Line=c,l.LineStack=r,E.exports=c},function(E,T,e){var t=e(0),l="_origin",s=e(129),c="_originActiveAttrs";function r(a,o){if(t.isNil(a)||t.isNil(o))return!1;var u=a.get("origin"),f=o.get("origin");return t.isEqual(u,f)}function h(a,o){if(!a||a.length!==o.length)return!0;var u=!1;return t.each(o,function(f,v){if(!r(f,a[v]))return u=!0,!1}),u}function n(a,o){var u={};return t.each(a,function(f,v){var b=o.attr(v);t.isArray(b)&&(b=t.cloneDeep(b)),u[v]=b}),u}var i={_isAllowActive:function(){var o=this.get("allowActive");if(t.isNil(o)){var u=this.get("view"),f=this.isShareTooltip(),v=u.get("options");if(v.tooltip===!1||!f)return!0}else return o;return!1},_onMouseenter:function(o){var u=this,f=o.shape,v=u.get("shapeContainer");f&&v.contain(f)&&u._isAllowActive()&&u.setShapesActived(f)},_onMouseleave:function(){var o=this,u=o.get("view"),f=u.get("canvas");o.get("activeShapes")&&(o.clearActivedShapes(),f.draw())},_bindActiveAction:function(){var o=this,u=o.get("view"),f=o.get("type");u.on(f+":mouseenter",t.wrapBehavior(o,"_onMouseenter")),u.on(f+":mouseleave",t.wrapBehavior(o,"_onMouseleave"))},_offActiveAction:function(){var o=this,u=o.get("view"),f=o.get("type");u.off(f+":mouseenter",t.getWrapBehavior(o,"_onMouseenter")),u.off(f+":mouseleave",t.getWrapBehavior(o,"_onMouseleave"))},_setActiveShape:function(o){var u=this,f=u.get("activedOptions")||{},v=o.get("origin"),b=v.shape||u.getDefaultValue("shape");t.isArray(b)&&(b=b[0]);var y=u.get("shapeFactory"),g=t.mix({},o.attr(),{origin:v}),_=y.getActiveCfg(b,g);f.style&&t.mix(_,f.style);var M=n(_,o);o.setSilent(c,M),f.animate?o.animate(_,300):o.attr(_),s.toFront(o)},setShapesActived:function(o){var u=this;t.isArray(o)||(o=[o]);var f=u.get("activeShapes");if(!!h(f,o)){var v=u.get("view"),b=v.get("canvas"),y=u.get("activedOptions");y&&y.highlight?(t.each(o,function(g){g.get("animating")&&g.stopAnimate()}),u.highlightShapes(o)):(f&&u.clearActivedShapes(),t.each(o,function(g){g.get("animating")&&g.stopAnimate(),g.get("visible")&&u._setActiveShape(g)})),u.set("activeShapes",o),b.draw()}},clearActivedShapes:function(){var o=this,u=o.get("shapeContainer"),f=o.get("activedOptions"),v=f&&f.animate;if(u&&!u.get("destroyed")){var b=o.get("activeShapes");t.each(b,function(_){var M=_.get(c);v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null)});var y=o.get("preHighlightShapes");if(y){var g=u.get("children");t.each(g,function(_){var M=_.get(c);M&&(v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null))})}o.set("activeShapes",null),o.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(o){var u=this,f=u.get("shapeContainer"),v=[];if(f){var b=u.getXScale().field,y=u.getShapes(),g=u._getOriginByPoint(o);t.each(y,function(_){var M=_.get("origin");if(_.get("visible")&&M){var x=M[l][b];x===g[b]&&v.push(_)}})}return v},getSingleShapeByPoint:function(o){var u=this,f=u.get("shapeContainer"),v=f.get("canvas"),b=v.get("pixelRatio"),y;if(f&&(y=f.getShape(o.x*b,o.y*b)),y&&y.get("origin"))return y},highlightShapes:function(o,u){var f=this;t.isArray(o)||(o=[o]);var v=f.get("activeShapes");if(!!h(v,o)){v&&f.clearActivedShapes();var b=f.getShapes(),y=f.get("activedOptions"),g=y&&y.animate,_=y&&y.style;t.each(b,function(M){var x={};M.stopAnimate(),t.indexOf(o,M)!==-1?(t.mix(x,_,u),s.toFront(M)):(t.mix(x,{fillOpacity:.3,opacity:.3}),s.resetZIndex(M));var m=n(x,M);M.setSilent(c,m),g?M.animate(x,300):M.attr(x)}),f.set("preHighlightShapes",o),f.set("activeShapes",o)}}};E.exports=i},function(E,T,e){var t=e(0),l="_origin",s=e(129);function c(n,i){if(t.isNil(n)||t.isNil(i))return!1;var a=n.get("origin"),o=i.get("origin");return t.isEqual(a,o)}function r(n,i){var a={};return t.each(n,function(o,u){u==="transform"&&(u="matrix");var f=i.attr(u);t.isArray(f)&&(f=t.cloneDeep(f)),a[u]=f}),a}var h={_isAllowSelect:function(){var i=this.get("allowSelect");if(t.isNil(i)){var a=this.get("type"),o=this.get("coord"),u=o&&o.type;if(a==="interval"&&u==="theta")return!0}else return i;return!1},_onClick:function(i){var a=this;if(a._isAllowSelect()){var o=i.shape,u=a.get("shapeContainer");o&&u.contain(o)&&a.setShapeSelected(o)}},_bindSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.on(o+":click",t.wrapBehavior(i,"_onClick"))},_offSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.off(o+":click",t.getWrapBehavior(i,"_onClick"))},_setShapeStatus:function(i,a){var o=this,u=o.get("view"),f=o.get("selectedOptions")||{},v=f.animate!==!1,b=u.get("canvas");i.set("selected",a);var y=i.get("origin");if(a){var g=y.shape||o.getDefaultValue("shape");t.isArray(g)&&(g=g[0]);var _=o.get("shapeFactory"),M=t.mix({geom:o,point:y},f),x=_.getSelectedCfg(g,M);t.mix(x,M.style),i.get("_originAttrs")||(i.get("animating")&&i.stopAnimate(),i.set("_originAttrs",r(x,i))),f.toFront&&s.toFront(i),v?i.animate(x,300):(i.attr(x),b.draw())}else{var m=i.get("_originAttrs");f.toFront&&s.resetZIndex(i),i.set("_originAttrs",null),v?i.animate(m,300):(i.attr(m),b.draw())}},setShapeSelected:function(i){var a=this,o=a._getSelectedShapes(),u=a.get("selectedOptions")||{},f=u.cancelable!==!1;if(u.mode==="multiple")t.indexOf(o,i)===-1?(o.push(i),a._setShapeStatus(i,!0)):f&&(t.Array.remove(o,i),a._setShapeStatus(i,!1));else{var v=o[0];f&&(i=c(v,i)?null:i),c(v,i)||(v&&a._setShapeStatus(v,!1),i&&a._setShapeStatus(i,!0))}},clearSelected:function(){var i=this,a=i.get("shapeContainer");if(a&&!a.get("destroyed")){var o=i._getSelectedShapes();t.each(o,function(u){i._setShapeStatus(u,!1),u.set("_originAttrs",null)})}},setSelected:function(i){var a=this,o=a.getShapes();return t.each(o,function(u){var f=u.get("origin");f&&f[l]===i&&a.setShapeSelected(u)}),this},_getSelectedShapes:function(){var i=this,a=i.getShapes(),o=[];return t.each(a,function(u){u.get("selected")&&o.push(u)}),i.set("selectedShapes",o),o}};E.exports=h},function(E,T,e){var t=e(0),l=e(5),s=l.defaultColor,c="_origin";function r(n){return n.alias||n.field}var h={_getIntervalSize:function(i){var a=null,o=this.get("type"),u=this.get("coord");if(u.isRect&&(o==="interval"||o==="schema")){a=this.getSize(i[c]);var f=u.isTransposed?"y":"x";if(t.isArray(i[f])){var v=Math.abs(i[f][1]-i[f][0]);a=a<v?null:a}}return a},_snapEqual:function(i,a,o){var u;return i=o.translate(i),a=o.translate(a),o.isCategory?u=i===a:u=t.snapEqual(i,a),u},_getScaleValueByPoint:function(i){var a=0,o=this.get("coord"),u=this.getXScale(),f=o.invert(i),v=f.x;return this.isInCircle()&&v>(1+u.rangeMax())/2&&(v=u.rangeMin()),a=u.invert(v),u.isCategory&&(a=u.translate(a)),a},_getOriginByPoint:function(i){var a=this.getXScale(),o=this.getYScale(),u=a.field,f=o.field,v=this.get("coord"),b=v.invert(i),y=a.invert(b.x),g=o.invert(b.y),_={};return _[u]=y,_[f]=g,_},_getScale:function(i){var a=this,o=a.get("scales"),u=null;return t.each(o,function(f){if(f.field===i)return u=f,!1}),u},_getTipValueScale:function(){var i=this.getAttrsForLegend(),a;t.each(i,function(f){var v=f.getScale(f.type);if(v.isLinear)return a=v,!1});var o=this.getXScale(),u=this.getYScale();return!a&&u&&u.field==="..y"?o:a||u||o},_getTipTitleScale:function(i){var a=this;if(i)return a._getScale(i);var o=a.getAttr("position"),u=o.getFields(),f;return t.each(u,function(v){if(!v.includes(".."))return f=v,!1}),a._getScale(f)},_filterValue:function(i,a){var o=this.get("coord"),u=this.getYScale(),f=u.field,v=o.invert(a),b=v.y;b=u.invert(b);var y=i[i.length-1];return t.each(i,function(g){var _=g[c];if(_[f][0]<=b&&_[f][1]>=b)return y=g,!1}),y},getXDistance:function(){var i=this,a=i.get("xDistance");if(!a){var o=i.getXScale();if(o.isCategory)a=1;else{var u=o.values,f=o.translate(u[0]),v=f;t.each(u,function(y){y=o.translate(y),y<f&&(f=y),y>v&&(v=y)});var b=u.length;a=(v-f)/(b-1)}i.set("xDistance",a)}return a},findPoint:function(i,a){var o=this,u=o.get("type"),f=o.getXScale(),v=o.getYScale(),b=f.field,y=v.field,g=null;if(t.indexOf(["heatmap","point"],u)>-1){var _=o.get("coord"),M=_.invert(i),x=f.invert(M.x),m=v.invert(M.y),S=Infinity;return t.each(a,function(pt){var ut=Math.pow(pt[c][b]-x,2)+Math.pow(pt[c][y]-m,2);ut<S&&(S=ut,g=pt)}),g}var P=a[0],A=a[a.length-1];if(!P)return g;var O=o._getScaleValueByPoint(i),L=P[c][b],W=P[c][y],F=A[c][b],K=v.isLinear&&t.isArray(W);if(t.isArray(L))t.each(a,function(pt){var ut=pt[c];if(f.translate(ut[b][0])<=O&&f.translate(ut[b][1])>=O)if(K)t.isArray(g)||(g=[]),g.push(pt);else return g=pt,!1}),t.isArray(g)&&(g=this._filterValue(g,i));else{var V;if(!f.isLinear&&f.type!=="timeCat")t.each(a,function(pt,ut){var It=pt[c];if(o._snapEqual(It[b],O,f))if(K)t.isArray(g)||(g=[]),g.push(pt);else return g=pt,!1;else f.translate(It[b])<=O&&(A=pt,V=a[ut+1])}),t.isArray(g)&&(g=this._filterValue(g,i));else{if((O>f.translate(F)||O<f.translate(L))&&(O>f.max||O<f.min))return null;for(var k=0,Z=a.length-1,X;k<=Z;){X=Math.floor((k+Z)/2);var it=a[X][c][b];if(o._snapEqual(it,O,f))return a[X];f.translate(it)<=f.translate(O)?(k=X+1,A=a[X],V=a[X+1]):(Z===0&&(A=a[0]),Z=X-1)}}A&&V&&Math.abs(f.translate(A[c][b])-O)>Math.abs(f.translate(V[c][b])-O)&&(A=V)}var ft=o.getXDistance();return!g&&Math.abs(f.translate(A[c][b])-O)<=ft/2&&(g=A),g},getTipTitle:function(i,a){var o="",u=this._getTipTitleScale(a);if(u){var f=i[u.field];o=u.getText(f)}else if(this.get("type")==="heatmap"){var v=this.getXScale(),b=this.getYScale(),y=v.getText(i[v.field]),g=b.getText(i[b.field]);o="( "+y+", "+g+" )"}return o},getTipValue:function(i,a){var o,u=a.field,f=i.key;if(o=i[u],t.isArray(o)){var v=[];t.each(o,function(b){v.push(a.getText(b))}),o=v.join("-")}else o=a.getText(o,f);return o},getTipName:function(i){var a,o,u=this._getGroupScales();if(u.length&&t.each(u,function(b){return o=b,!1}),o){var f=o.field;a=o.getText(i[f])}else{var v=this._getTipValueScale();a=r(v)}return a},getTipItems:function(i,a){var o=this,u=i[c],f=o.getTipTitle(u,a),v=o.get("tooltipCfg"),b=[],y,g;function _(A,O,L){if(!t.isNil(O)&&O!==""){var W={title:f,point:i,name:A||f,value:O,color:i.color||s,marker:!0};W.size=o._getIntervalSize(i),b.push(t.mix({},W,L))}}if(v){var M=v.fields,x=v.cfg,m=[];if(t.each(M,function(A){m.push(u[A])}),x){t.isFunction(x)&&(x=x.apply(null,m));var S=t.mix({},{point:i,title:f,color:i.color||s,marker:!0},x);S.size=o._getIntervalSize(i),b.push(S)}else t.each(M,function(A){if(!t.isNil(u[A])){var O=o._getScale(A);y=r(O),g=O.getText(u[A]),_(y,g)}})}else{var P=o._getTipValueScale();t.isNil(u[P.field])||(g=o.getTipValue(u,P),y=o.getTipName(u),_(y,g))}return b},isShareTooltip:function(){var i=this.get("shareTooltip"),a=this.get("type"),o=this.get("view"),u;if(o.get("parent")?u=o.get("parent").get("options"):u=o.get("options"),a==="interval"){var f=this.get("coord"),v=f.type;(v==="theta"||v==="polar"&&f.isTransposed)&&(i=!1)}else(!this.getYScale()||t.inArray(["contour","point","polygon","edge"],a))&&(i=!1);return u.tooltip&&t.isBoolean(u.tooltip.shared)&&(i=u.tooltip.shared),i}};E.exports=h},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(8),s=e(0);e(308);var c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.type="point",u.shapeType="point",u.generatePoints=!0,u},a.drawPoint=function(u,f,v,b){var y=this,g=u.shape,_=y.getDrawCfg(u);y._applyViewThemeShapeStyle(_,g,v);var M;if(s.isArray(u.y)){var x=y.hasStack();s.each(u.y,function(m,S){_.y=m,_.yIndex=S,(!x||S!==0)&&(M=v.drawShape(g,_,f),y.appendShapeInfo(M,b+S))})}else s.isNil(u.y)||(M=v.drawShape(g,_,f),y.appendShapeInfo(M,b))},i}(l),r=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"jitter"}],u},i}(c),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"stack"}],u},i}(c);c.Jitter=r,c.Stack=h,l.Point=c,l.PointJitter=r,l.PointStack=h,E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(8),s=e(0);e(309);var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="polygon",a.shapeType="polygon",a.generatePoints=!0,a},n.createShapePointsCfg=function(a){var o=r.prototype.createShapePointsCfg.call(this,a),u=this,f=o.x,v=o.y,b;if(!(s.isArray(f)&&s.isArray(v))){var y=u.getXScale(),g=u.getYScale(),_=y.values?y.values.length:y.ticks.length,M=g.values?g.values.length:g.ticks.length,x=.5*1/_,m=.5*1/M;y.isCategory&&g.isCategory?(f=[f-x,f-x,f+x,f+x],v=[v-m,v+m,v+m,v-m]):s.isArray(f)?(b=f,f=[b[0],b[0],b[1],b[1]],v=[v-m/2,v+m/2,v+m/2,v-m/2]):s.isArray(v)&&(b=v,v=[b[0],b[1],b[1],b[0]],f=[f-x/2,f-x/2,f+x/2,f+x/2]),o.x=f,o.y=v}return o},h}(l);l.Polygon=c,E.exports=c},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(310);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="schema",f.shapeType="schema",f.generatePoints=!0,f};function o(u){var f;return f=i.call(this,u)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=i.prototype.createShapePointsCfg.call(this,f);return v.size=this.getNormalizedSize(f),v},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Schema=h,s.SchemaDodge=n,E.exports=h},function(E,T,e){var t=e(0),l=e(9),s=e(25),c=e(23),r=e(5);function h(v){var b=r.shape.hollowArea,y=t.mix({},b,v.style);return c.addStrokeAttrs(y,v),t.isNumber(v.size)&&(y.lineWidth=v.size),y}function n(v){var b=r.shape.area,y=t.mix({},b,v.style);return c.addFillAttrs(y,v),v.color&&(y.stroke=y.stroke||v.color),t.isNumber(v.size)&&(y.lineWidth=v.size),y}function i(v,b,y){var g=[],_=[],M=[],x=[],m=v.isInCircle;return t.each(v.points,function(S){M.push(S[1]),x.push(S[0])}),x=x.reverse(),_.push(M,x),t.each(_,function(S,P){var A=[];S=y.parsePoints(S);var O=S[0];m&&S.push({x:O.x,y:O.y}),b?A=s.getSplinePath(S,!1,v.constraint):A=s.getLinePath(S,!1),P>0&&(A[0][0]="L"),g=g.concat(A)}),g.push(["Z"]),g}function a(v){return{symbol:function(y,g,_){return[["M",y-_,g-4],["L",y+_,g-4],["L",y+_,g+4],["L",y-_,g+4],["Z"]]},radius:5,fill:v.color,fillOpacity:.6}}function o(v,b){if(v==="line"||v==="smoothLine"){var y=b.lineWidth||0;return{lineWidth:y+1}}var g=b.fillOpacity||b.opacity||1;return{fillOpacity:g-.15,strokeOpacity:g-.15}}function u(v,b,y){var g=v._coord,_=g.convertPoint(b.points[0][1]);return y.addShape("circle",{attrs:t.mix({x:_.x,y:_.y,r:2,fill:b.color},b.style)})}var f=l.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var y=[],g=b.x,_=b.y,M=b.y0;return _=t.isArray(_)?_:[M,_],t.each(_,function(x){y.push({x:g,y:x})}),y},getActiveCfg:function(b,y){return o(b,y)},drawShape:function(b,y,g){var _=this.getShape(b),M;return y.points.length===1&&r.showSinglePoint?M=u(this,y,g):M=_.draw(y,g),M&&(M.set("origin",y.origin),M._id=y.splitedIndex?y._id+y.splitedIndex:y._id,M.name=this.name),M},getSelectedCfg:function(b,y){return y&&y.style?y.style:this.getActiveCfg(b,y)}});l.registerShape("area","area",{draw:function(b,y){var g=n(b),_=i(b,!1,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","smooth",{draw:function(b,y){var g=n(b),_=this._coord;b.constraint=[[_.start.x,_.end.y],[_.end.x,_.start.y]];var M=i(b,!0,this);return y.addShape("path",{attrs:t.mix(g,{path:M})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","line",{draw:function(b,y){var g=h(b),_=i(b,!1,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","smoothLine",{draw:function(b,y){var g=h(b),_=i(b,!0,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),f.spline=f.smooth,E.exports=f},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=e(25),h=1/3;function n(y){var g=c.shape.edge,_=t.mix({},g,y.style);return s.addStrokeAttrs(_,y),y.size&&(_.lineWidth=y.size),_}var i=l.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(g){return s.splitPoints(g)},getActiveCfg:function(g,_){var M=_.lineWidth||0;return{lineWidth:M+1}}});function a(y,g){var _=[];_.push({x:y.x,y:y.y*(1-1/2)+g.y*1/2}),_.push({y:y.y*(1-1/2)+g.y*1/2,x:g.x}),_.push(g);var M=["C"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function o(y,g){var _=[];_.push({x:g.x,y:g.y}),_.push(y);var M=["Q"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function u(y,g){var _=a(y,g),M=[["M",y.x,y.y]];return M.push(_),M}function f(y,g,_){var M=o(g,_),x=[["M",y.x,y.y]];return x.push(M),x}function v(y,g){var _=o(y[1],g),M=o(y[3],g),x=[["M",y[0].x,y[0].y]];return x.push(M),x.push(["L",y[3].x,y[3].y]),x.push(["L",y[2].x,y[2].y]),x.push(_),x.push(["L",y[1].x,y[1].y]),x.push(["L",y[0].x,y[0].y]),x.push(["Z"]),x}function b(y,g){var _=[];_.push({y:y.y*(1-h)+g.y*h,x:y.x}),_.push({y:y.y*(1-h)+g.y*h,x:g.x}),_.push(g);var M=[["M",y.x,y.y]];return t.each(_,function(x){M.push(["L",x.x,x.y])}),M}l.registerShape("edge","line",{draw:function(g,_){var M=this.parsePoints(g.points),x=n(g),m=r.getLinePath(M),S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","vhv",{draw:function(g,_){var M=g.points,x=n(g),m=b(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","smooth",{draw:function(g,_){var M=g.points,x=n(g),m=u(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","arc",{draw:function(g,_){var M=g.points,x=M.length>2?"weight":"normal",m=n(g),S,P;if(g.isInCircle){var A={x:0,y:1};x==="normal"?P=f(M[0],M[1],A):(m.fill=m.stroke,P=v(M,A)),P=this.parsePath(P),S=_.addShape("path",{attrs:t.mix(m,{path:P})})}else if(x==="normal")M=this.parsePoints(M),S=_.addShape("arc",{attrs:t.mix(m,{x:(M[1].x+M[0].x)/2,y:M[0].y,r:Math.abs(M[1].x-M[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{P=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y]];var O=a(M[1],M[3]),L=a(M[2],M[0]);P.push(O),P.push(["L",M[3].x,M[3].y]),P.push(["L",M[2].x,M[2].y]),P.push(L),P.push(["Z"]),P=this.parsePath(P),m.fill=m.stroke,S=_.addShape("path",{attrs:t.mix(m,{path:P})})}return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(25),c=e(23),r=e(5),h=e(16),n=t.PathUtil;function i(A,O){var L=A.x,W=A.y,F=A.y0,K=A.size,V=F,k=W;t.isArray(W)&&(k=W[1],V=W[0]);var Z,X;t.isArray(L)?(Z=L[0],X=L[1]):(Z=L-K/2,X=L+K/2);var it=[];return it.push({x:Z,y:V},{x:Z,y:k}),O?it.push({x:X,y:(k+V)/2}):it.push({x:X,y:k},{x:X,y:V}),it}function a(A){for(var O=[],L=0;L<A.length;L++){var W=A[L];if(W){var F=L===0?"M":"L";O.push([F,W.x,W.y])}}var K=A[0];return O.push(["L",K.x,K.y]),O.push(["z"]),O}function o(A){var O=A.x,L=A.y,W=A.y0,F=[];return t.isArray(L)?t.each(L,function(K,V){F.push({x:t.isArray(O)?O[V]:O,y:K})}):F.push({x:O,y:L},{x:O,y:W}),F}function u(A){var O=A.x,L=t.isArray(A.y)?A.y[1]:A.y,W=t.isArray(A.y)?A.y[0]:A.y0,F=A.size,K=[];return K.push({x:O-F/2,y:L},{x:O+F/2,y:L},{x:O,y:L},{x:O,y:W},{x:O-F/2,y:W},{x:O+F/2,y:W}),K}function f(A){var O=[];return O.push(["M",A[0].x,A[0].y],["L",A[1].x,A[1].y],["M",A[2].x,A[2].y],["L",A[3].x,A[3].y],["M",A[4].x,A[4].y],["L",A[5].x,A[5].y]),O}function v(A){var O=r.shape.interval,L=t.mix({},O,A.style);return c.addFillAttrs(L,A),A.color&&(L.stroke=L.stroke||A.color),L}function b(A){var O=r.shape.hollowInterval,L=t.mix({},O,A.style);return c.addStrokeAttrs(L,A),L}function y(A,O){var L=[],W=A.points,F=A.nextPoints;return t.isNil(F)?O?L.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[3].x,W[3].y],["Z"]):L.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[2].x,W[2].y],["Z"]):L.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",F[1].x,F[1].y],["L",F[0].x,F[0].y],["Z"]),L}function g(A,O){var L=O.getRadius(),W=O.innerRadius,F,K,V=L*W,k,Z;return!t.isArray(A.x)&&t.isArray(A.y)&&(A.x=[A.x,A.x]),t.isArray(A.x)?(k={x:A.x[0],y:A.y[0]},Z={x:A.x[1],y:A.y[1]},F=s.getPointAngle(O,k),K=s.getPointAngle(O,Z),K<=F&&(K=K+Math.PI*2)):(Z=A,F=O.startAngle,K=s.getPointAngle(O,Z)),{r:L,ir:V,startAngle:F,endAngle:K}}function _(A,O){var L=O.geom,W=L.get("coord"),F=O.point,K=7.5,V;if(W&&W.type==="theta"){var k=g(F,W),Z=(k.endAngle-k.startAngle)/2+k.startAngle,X=K*Math.cos(Z),it=K*Math.sin(Z);V={transform:[["t",X,it]]}}return t.mix({},V)}var M=l.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(O,L){if(!O||t.inArray(["rect","funnel","pyramid"],O)){var W=L.fillOpacity||L.opacity||1;return{fillOpacity:W-.15}}var F=L.lineWidth||0;return{lineWidth:F+1}},getDefaultPoints:function(O){return i(O)},getSelectedCfg:function(O,L){return _(O,L)}});l.registerShape("interval","rect",{draw:function(O,L){var W=v(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=v(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},L)}}),l.registerShape("interval","hollowRect",{draw:function(O,L){var W=b(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=b(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},L)}}),l.registerShape("interval","line",{getPoints:function(O){return o(O)},draw:function(O,L){var W=b(O);W.lineWidth=O.size||1;var F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"line",radius:5},L)}}),l.registerShape("interval","tick",{getPoints:function(O){return u(O)},draw:function(O,L){var W=b(O);W.lineWidth||(W.lineWidth=2);var F=f(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"tick",radius:5},L)}}),l.registerShape("interval","funnel",{getPoints:function(O){return O.size=O.size*2,i(O)},draw:function(O,L){var W=v(O),F=y(O,!0);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}}),l.registerShape("interval","pyramid",{getPoints:function(O){return O.size=O.size*2,i(O,!0)},draw:function(O,L){var W=v(O),F=y(O,!1);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}});function x(A,O,L,W){return O===0?[[A+1/2*L/Math.PI/2,W/2],[A+1/2*L/Math.PI,W],[A+L/4,W]]:O===1?[[A+1/2*L/Math.PI/2*(Math.PI-2),W],[A+1/2*L/Math.PI/2*(Math.PI-1),W/2],[A+L/4,0]]:O===2?[[A+1/2*L/Math.PI/2,-W/2],[A+1/2*L/Math.PI,-W],[A+L/4,-W]]:[[A+1/2*L/Math.PI/2*(Math.PI-2),-W],[A+1/2*L/Math.PI/2*(Math.PI-1),-W/2],[A+L/4,0]]}function m(A,O,L,W,F,K,V){for(var k=Math.ceil(2*A/L*4)*2,Z=[];W<-Math.PI*2;)W+=Math.PI*2;for(;W>0;)W-=Math.PI*2;W=W/Math.PI/2*L;var X=K-A+W-A*2;Z.push(["M",X,O]);for(var it=0,ft=0;ft<k;++ft){var pt=ft%4,ut=x(ft*L/4,pt,L,F);Z.push(["C",ut[0][0]+X,-ut[0][1]+O,ut[1][0]+X,-ut[1][1]+O,ut[2][0]+X,-ut[2][1]+O]),ft===k-1&&(it=ut[2][0])}return Z.push(["L",it+X,V+A]),Z.push(["L",X,V+A]),Z.push(["L",X,O]),Z}function S(A,O,L,W,F,K,V,k){for(var Z=V.getBBox(),X=Z.maxX-Z.minX,it=Z.maxY-Z.minY,ft=5e3,pt=300,ut=0;ut<W;ut++){var It=K.addShape("path",{attrs:{path:m(k,Z.minY+it*L,X/4,0,X/64,A,O),fill:F[ut],clip:V}});r.renderer==="canvas"&&It.animate({transform:[["t",X/2,0]],repeat:!0},ft-ut*pt)}}l.registerShape("interval","liquid-fill-gauge",{draw:function(O,L){var W=this,F=.5,K=0,V=Infinity;t.each(O.points,function(It){It.x<V&&(V=It.x),K+=It.x});var k=K/O.points.length,Z=W.parsePoint({x:k,y:F}),X=W.parsePoint({x:V,y:.5}),it=Z.x-X.x,ft=Math.min(it,X.y),pt=v(O),ut=new h.Circle({attrs:{x:Z.x,y:Z.y,r:ft}});return S(Z.x,Z.y,O.y/(2*Z.y),1,[pt.fill],L,ut,ft*4),L.addShape("circle",{attrs:t.mix(b(O),{x:Z.x,y:Z.y,r:ft+ft/8})})}});var P={};l.registerShape("interval","liquid-fill-path",{draw:function(O,L){var W=this,F=t.mix({},v(O)),K=O.shape[1],V=.5,k=0,Z=Infinity;t.each(O.points,function(ot){ot.x<Z&&(Z=ot.x),k+=ot.x});var X=k/O.points.length,it=W.parsePoint({x:X,y:V}),ft=W.parsePoint({x:Z,y:.5}),pt=it.x-ft.x,ut=Math.min(pt,ft.y),It;if(P[K])It=P[K];else{var Nt=n.parsePathString(K);P[K]=It={segments:Nt}}var Rt=[];F.rotate&&(Rt.push(["r",F.rotate/180*Math.PI]),delete F.rotate);var Mt=L.addShape("path",{attrs:t.mix(F,{fillOpacity:0,path:It.segments})}),bt=t.cloneDeep(Mt.getBBox()),At=bt.maxX-bt.minX,rt=bt.maxY-bt.minY,Pt=Math.max(At,rt),z=ut*2/Pt;Mt.transform(Rt.concat([["s",z,z]]));var Q=z*At/2,gt=z*rt/2;Mt.transform([["t",it.x-Q,it.y-gt]]),S(it.x,it.y,O.y/(2*it.y),1,[F.fill],L,Mt,ft.y*4);var et=L.addShape("path",{attrs:t.mix(b(O),{path:It.segments})});return et.transform(Rt.concat([["s",z,z],["t",it.x-Q,it.y-gt]])),et}}),l.registerShape("interval","top-line",{draw:function(O,L){var W=v(O),F=O.style||{},K=[["M",O.points[1].x,O.points[1].y],["L",O.points[2].x,O.points[2].y]],V={stroke:F.stroke||"white",lineWidth:F.lineWidth||1,path:this.parsePath(K)},k=a(O.points);k=this.parsePath(k),delete W.stroke;var Z=L.addShape("path",{attrs:t.mix(W,{zIndex:0,path:k})});return L.addShape("path",{zIndex:1,attrs:V}),Z},getMarkerCfg:function(O){var L=v(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},L)}}),E.exports=M},function(E,T,e){var t=e(0),l=e(25),s=e(23),c=e(9),r=e(5),h=[1,1],n=[5.5,1];function i(P){var A=r.shape.line,O=t.mix({},A,P.style);return s.addStrokeAttrs(O,P),P.size&&(O.lineWidth=P.size),O}function a(P){var A=r.shape.line,O=t.mix({lineWidth:2,radius:6},A,P.style);return s.addStrokeAttrs(O,P),O}function o(P,A,O,L){for(var W=[],F=L.isStack,K=[],V=0;V<P.length;V++){var k=P[V],Z=s.splitPoints(k);K.push(Z[0]),W.push(Z[1])}var X=u(W,A,O,L),it=u(K,A,O,L);return F?X:X.concat(it)}function u(P,A,O,L){var W;if(!A)W=l.getLinePath(P,!1),O&&W.push(["Z"]);else{var F=L.constraint;O&&P.length&&P.push({x:P[0].x,y:P[0].y}),W=l.getSplinePath(P,!1,F)}return W}function f(P,A){var O,L=P.points,W=P.isInCircle,F=L[0];return t.isArray(F.y)?O=o(L,A,W,P):O=u(L,A,W,P),O}function v(P,A){var O=[];return t.each(P,function(L,W){var F=P[W+1];O.push(L),F&&(O=O.concat(A(L,F)))}),O}function b(P){var A=[];return t.each(P,function(O,L){var W=L===0?["M",O.x,O.y]:["L",O.x,O.y];A.push(W)}),A}function y(P,A){var O=v(P.points,A);return b(O)}function g(P,A,O){return[["M",P-O,A],["L",P+O,A]]}function _(P,A,O){return[["M",P-O,A],["A",O/2,O/2,0,1,1,P,A],["A",O/2,O/2,0,1,0,P+O,A]]}function M(P,A){return t.mix({symbol:A?_:g},a(P))}function x(P,A){return t.mix({symbol:A},a(P))}function m(P,A,O){var L=A.points[0];return O.addShape("circle",{attrs:t.mix({x:L.x,y:L.y,r:2,fill:A.color},A.style)})}var S=c.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(A,O){var L=O.lineWidth||0;return{lineWidth:L+1}},getDefaultPoints:function(A){return s.splitPoints(A)},drawShape:function(A,O,L){var W=this.getShape(A),F;return O.points.length===1&&r.showSinglePoint?F=m(this,O,L):F=W.draw(O,L),F&&(F.set("origin",O.origin),F._id=O.splitedIndex?O._id+O.splitedIndex:O._id,F.name=this.name),F}});c.registerShape("line","line",{draw:function(A,O){var L=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:W})})},getMarkerCfg:function(A){return M(A)}}),c.registerShape("line","dot",{draw:function(A,O){var L=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:W,lineDash:h})})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=h,O}}),c.registerShape("line","dash",{draw:function(A,O){var L=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix({path:W,lineDash:n},L)})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=O.lineDash||n,O}}),c.registerShape("line","smooth",{draw:function(A,O){var L=i(A),W=this._coord;A.constraint=[[W.start.x,W.end.y],[W.end.x,W.start.y]];var F=f(A,!0);return O.addShape("path",{attrs:t.mix(L,{path:F})})},getMarkerCfg:function(A){return M(A,!0)}}),c.registerShape("line","hv",{draw:function(A,O){var L=i(A),W=y(A,function(F,K){var V=[];return V.push({x:K.x,y:F.y}),V});return O.addShape("path",{attrs:t.mix(L,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,L,W){return[["M",O-W-1,L-2.5],["L",O,L-2.5],["L",O,L+2.5],["L",O+W+1,L+2.5]]})}}),c.registerShape("line","vh",{draw:function(A,O){var L=i(A),W=y(A,function(F,K){var V=[];return V.push({x:F.x,y:K.y}),V});return O.addShape("path",{attrs:t.mix(L,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,L,W){return[["M",O-W-1,L+2.5],["L",O,L+2.5],["L",O,L-2.5],["L",O+W+1,L-2.5]]})}}),c.registerShape("line","hvh",{draw:function(A,O){var L=i(A),W=y(A,function(F,K){var V=[],k=(K.x-F.x)/2+F.x;return V.push({x:k,y:F.y}),V.push({x:k,y:K.y}),V});return O.addShape("path",{attrs:t.mix(L,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,L,W){return[["M",O-(W+1),L+2.5],["L",O-W/2,L+2.5],["L",O-W/2,L-2.5],["L",O+W/2,L-2.5],["L",O+W/2,L+2.5],["L",O+W+1,L+2.5]]})}}),c.registerShape("line","vhv",{draw:function(A,O){var L=i(A),W=y(A,function(F,K){var V=[],k=(K.y-F.y)/2+F.y;return V.push({x:F.x,y:k}),V.push({x:K.x,y:k}),V});return O.addShape("path",{attrs:t.mix(L,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,L){return[["M",O-5,L+2.5],["L",O-5,L],["L",O,L],["L",O,L-3],["L",O,L+3],["L",O+6.5,L+3]]})}}),S.spline=S.smooth,E.exports=S},function(E,T,e){var t=e(0),l=e(23),s=e(5),c=e(9),r=e(16),h=r.Marker,n=t.PathUtil,i=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],a=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],o=Math.sqrt(3);t.mix(h.Symbols,{hexagon:function(_,M,x){var m=x/2*o;return[["M",_,M-x],["L",_+m,M-x/2],["L",_+m,M+x/2],["L",_,M+x],["L",_-m,M+x/2],["L",_-m,M-x/2],["Z"]]},bowtie:function(_,M,x){var m=x-1.5;return[["M",_-x,M-m],["L",_+x,M+m],["L",_+x,M-m],["L",_-x,M+m],["Z"]]},cross:function(_,M,x){return[["M",_-x,M-x],["L",_+x,M+x],["M",_+x,M-x],["L",_-x,M+x]]},tick:function(_,M,x){return[["M",_-x/2,M-x],["L",_+x/2,M-x],["M",_,M-x],["L",_,M+x],["M",_-x/2,M+x],["L",_+x/2,M+x]]},plus:function(_,M,x){return[["M",_-x,M],["L",_+x,M],["M",_,M-x],["L",_,M+x]]},hyphen:function(_,M,x){return[["M",_-x,M],["L",_+x,M]]},line:function(_,M,x){return[["M",_,M-x],["L",_,M+x]]}});function u(g){var _=s.shape.point,M=t.mix({},_,g.style);return l.addFillAttrs(M,g),t.isNumber(g.size)&&(M.radius=g.size),M}function f(g){var _=s.shape.hollowPoint,M=t.mix({},_,g.style);return l.addStrokeAttrs(M,g),t.isNumber(g.size)&&(M.radius=g.size),M}var v=c.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(_,M){var x=M.radius,m;return _&&(_.indexOf("hollow")===0||t.indexOf(a,_)!==-1)||!_?m=M.stroke||M.strokeStyle:m=M.fill||M.fillStyle,{radius:x+1,shadowBlur:x,shadowColor:m,stroke:m,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(_){return l.splitPoints(_)}});function b(g){var _=g.points[0].x,M=g.points[0].y,x=g.size[0],m=g.size[1],S=[["M",_-.5*x,M-.5*m],["L",_+.5*x,M-.5*m],["L",_+.5*x,M+.5*m],["L",_-.5*x,M+.5*m],["z"]];return S}c.registerShape("point","rect",{draw:function(_,M){var x=u(_),m=b(_);m=this.parsePath(m);var S=M.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(_){var M=u(_);return M.symbol="rect",M.radius=4.5,M}}),t.each(i,function(g){c.registerShape("point",g,{draw:function(M,x){var m=u(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=u(M);return x.symbol=g,x.radius=4.5,x}}),c.registerShape("point","hollow"+t.upperFirst(g),{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=g,x.radius=4.5,x}})}),t.each(a,function(g){c.registerShape("point",g,{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=g,x.radius=4.5,x}})}),c.registerShape("point","image",{draw:function(_,M){return _.points=this.parsePoints(_.points),M.addShape("image",{attrs:{x:_.points[0].x-_.size/2,y:_.points[0].y-_.size,width:_.size,height:_.size,img:_.shape[1]}})}});var y={};c.registerShape("point","path",{draw:function(_,M){var x=t.mix({},f(_),u(_)),m=_.shape[1],S=_.size||10,P;if(y[m])P=y[m];else{var A=n.parsePathString(m),O=t.flatten(A).filter(function(K){return t.isNumber(K)});y[m]=P={range:Math.max.apply(null,O)-Math.min.apply(null,O),segments:A}}var L=S/P.range,W=[];x.rotate&&(W.push(["r",x.rotate/180*Math.PI]),delete x.rotate);var F=M.addShape("path",{attrs:t.mix(x,{path:P.segments})});return W.push(["s",L,L],["t",_.x,_.y]),F.transform(W),F}}),E.exports=v},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5);function r(a){var o=c.shape.polygon,u=t.mix({},o,a.style);return s.addFillAttrs(u,a),u}function h(a){var o=c.shape.hollowPolygon,u=t.mix({},o,a.style);return s.addStrokeAttrs(u,a),u}function n(a){for(var o=a[0],u=1,f=[["M",o.x,o.y]];u<a.length;){var v=a[u];(v.x!==a[u-1].x||v.y!==a[u-1].y)&&(f.push(["L",v.x,v.y]),v.x===o.x&&v.y===o.y&&u<a.length-1&&(o=a[u+1],f.push(["Z"]),f.push(["M",o.x,o.y]),u++)),u++}return t.isEqual(f[f.length-1],o)||f.push(["L",o.x,o.y]),f.push(["Z"]),f}var i=l.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var u=[];return t.each(o.x,function(f,v){var b=o.y[v];u.push({x:f,y:b})}),u},getActiveCfg:function(o,u){var f=u.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=u.fillOpacity||u.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,u){return u&&u.style?u.style:this.getActiveCfg(o,u)}});l.registerShape("polygon","polygon",{draw:function(o,u){if(!t.isEmpty(o.points)){var f=r(o),v=n(o.points);return v=this.parsePath(v),u.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),l.registerShape("polygon","hollow",{draw:function(o,u){if(!t.isEmpty(o.points)){var f=h(o),v=n(o.points);return v=this.parsePath(v),u.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5);function r(y){t.isArray(y)||(y=[y]);var g=y[0],_=y[y.length-1],M=y.length>1?y[1]:g,x=y.length>3?y[3]:_,m=y.length>2?y[2]:M;return{min:g,max:_,min1:M,max1:x,median:m}}function h(y,g){t.each(y,function(_){g.push({x:_[0],y:_[1]})})}function n(y){var g=c.shape.schema,_=t.mix({},g,y.style);return s.addStrokeAttrs(_,y),_}function i(y){var g=c.shape.schema,_=t.mix({},g,y.style);return s.addFillAttrs(_,y),y.color&&(_.stroke=y.color||_.stroke),_}function a(y,g,_){var M=[],x,m;return t.isArray(g)?(m=r(g),x=[[y-_/2,m.max],[y+_/2,m.max],[y,m.max],[y,m.max1],[y-_/2,m.min1],[y-_/2,m.max1],[y+_/2,m.max1],[y+_/2,m.min1],[y,m.min1],[y,m.min],[y-_/2,m.min],[y+_/2,m.min],[y-_/2,m.median],[y+_/2,m.median]]):(g=g||.5,m=r(y),x=[[m.min,g-_/2],[m.min,g+_/2],[m.min,g],[m.min1,g],[m.min1,g-_/2],[m.min1,g+_/2],[m.max1,g+_/2],[m.max1,g-_/2],[m.max1,g],[m.max,g],[m.max,g-_/2],[m.max,g+_/2],[m.median,g-_/2],[m.median,g+_/2]]),h(x,M),M}function o(y){t.isArray(y)||(y=[y]);var g=y.sort(function(m,S){return m<S?1:-1}),_=g.length;if(_<4)for(var M=g[_-1],x=0;x<4-_;x++)g.push(M);return g}function u(y,g,_){var M=o(g),x=[{x:y,y:M[0]},{x:y,y:M[1]},{x:y-_/2,y:M[2]},{x:y-_/2,y:M[1]},{x:y+_/2,y:M[1]},{x:y+_/2,y:M[2]},{x:y,y:M[2]},{x:y,y:M[3]}];return x}function f(y){var g=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y],["M",y[2].x,y[2].y],["L",y[3].x,y[3].y],["M",y[4].x,y[4].y],["L",y[5].x,y[5].y],["L",y[6].x,y[6].y],["L",y[7].x,y[7].y],["L",y[4].x,y[4].y],["Z"],["M",y[8].x,y[8].y],["L",y[9].x,y[9].y],["M",y[10].x,y[10].y],["L",y[11].x,y[11].y],["M",y[12].x,y[12].y],["L",y[13].x,y[13].y]];return g}function v(y){var g=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y],["M",y[2].x,y[2].y],["L",y[3].x,y[3].y],["L",y[4].x,y[4].y],["L",y[5].x,y[5].y],["Z"],["M",y[6].x,y[6].y],["L",y[7].x,y[7].y]];return g}var b=l.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(g,_){if(g==="box"){var M=_.lineWidth||1;return{lineWidth:M+1}}var x=_.fillOpacity||_.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}},getSelectedCfg:function(g,_){return _&&_.style?_.style:this.getActiveCfg(g,_)}});l.registerShape("schema","box",{getPoints:function(g){return a(g.x,g.y,g.size)},draw:function(g,_){var M=n(g),x=f(g.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(g){return{symbol:function(M,x,m){var S=[x-6,x-3,x,x+3,x+6],P=a(M,S,m);return[["M",P[0].x+1,P[0].y],["L",P[1].x-1,P[1].y],["M",P[2].x,P[2].y],["L",P[3].x,P[3].y],["M",P[4].x,P[4].y],["L",P[5].x,P[5].y],["L",P[6].x,P[6].y],["L",P[7].x,P[7].y],["L",P[4].x,P[4].y],["Z"],["M",P[8].x,P[8].y],["L",P[9].x,P[9].y],["M",P[10].x+1,P[10].y],["L",P[11].x-1,P[11].y],["M",P[12].x,P[12].y],["L",P[13].x,P[13].y]]},radius:6,lineWidth:1,stroke:g.color}}}),l.registerShape("schema","candle",{getPoints:function(g){return u(g.x,g.y,g.size)},draw:function(g,_){var M=i(g),x=v(g.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(g){return{symbol:function(M,x,m){x=[x+7.5,x+3,x-3,x-7.5];var S=u(M,x,m);return[["M",S[0].x,S[0].y],["L",S[1].x,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["L",S[4].x,S[4].y],["L",S[5].x,S[5].y],["Z"],["M",S[6].x,S[6].y],["L",S[7].x,S[7].y]]},lineWidth:1,stroke:g.color,fill:g.color,radius:6}}}),E.exports=b},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=t.PathUtil;function h(a){var o=c.shape.venn,u=t.mix({},o,a.style);return s.addFillAttrs(u,a),u}function n(a){var o=c.shape.hollowVenn,u=t.mix({},o,a.style);return s.addStrokeAttrs(u,a),u}var i=l.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(o,u){var f=u.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=u.fillOpacity||u.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,u){return u&&u.style?u.style:this.getActiveCfg(o,u)}});l.registerShape("venn","venn",{draw:function(o,u){var f=o.origin._origin,v=f.path,b=h(o),y=r.parsePathString(v),g=u.addShape("path",{attrs:t.mix(b,{path:y})});return g},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),l.registerShape("venn","hollow",{draw:function(o,u){var f=o.origin._origin,v=f.path,b=n(o),y=r.parsePathString(v),g=u.addShape("path",{attrs:t.mix(b,{path:y})});return g},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=e(25);function h(f){var v=c.shape.venn,b=t.mix({},v,f.style);return s.addFillAttrs(b,f),f.color&&(b.stroke=b.stroke||f.color),b}function n(f){var v=c.shape.hollowVenn,b=t.mix({},v,f.style);return s.addStrokeAttrs(b,f),b}function i(f){for(var v=[],b=0;b<f.length;b++){var y=f[b];if(y){var g=b===0?"M":"L";v.push([g,y.x,y.y])}}var _=f[0];return _&&(v.push(["L",_.x,_.y]),v.push(["z"])),v}function a(f){for(var v=f.length/2,b=[],y=[],g=0;g<f.length;g++)g<v?b.push(f[g]):y.push(f[g]);var _=r.getSplinePath(b,!1),M=r.getSplinePath(y,!1);y.length&&_.push(["L",y[0].x,y[0].y]),M.shift();var x=_.concat(M);return b.length&&x.push(["L",b[0].x,b[0].y]),x.push(["z"]),x}function o(f){var v=Math.max.apply(null,f);return f.map(function(b){return b/v})}var u=l.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(v){var b=v.size/2,y=[],g=o(v._size);return t.each(v.y,function(_,M){var x=g[M]*b,m=M===0,S=M===v.y.length-1;y.push({isMin:m,isMax:S,x:v.x-x,y:_}),y.unshift({isMin:m,isMax:S,x:v.x+x,y:_})}),y},getActiveCfg:function(v,b){var y=b.lineWidth||1;if(v==="hollow")return{lineWidth:y+1};var g=b.fillOpacity||b.opacity||1;return{fillOpacity:g-.08}},getSelectedCfg:function(v,b){return b&&b.style?b.style:this.getActiveCfg(v,b)}});l.registerShape("violin","violin",{draw:function(v,b){var y=h(v),g=i(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),l.registerShape("violin","smooth",{draw:function(v,b){var y=h(v),g=a(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),l.registerShape("violin","hollow",{draw:function(v,b){var y=n(v),g=i(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),l.registerShape("violin","smoothHollow",{draw:function(v,b){var y=n(v),g=a(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),E.exports=u},function(E,T,e){var t=e(0);E.exports=function(l){return t.isArray(l)?l:t.isString(l)?l.split("*"):[l]}},function(E,T,e){var t=e(0).MatrixUtil,l=t.vec2;function s(r,h,n,i){var a=[],o,u,f=!!i,v,b;if(f){v=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var y=0,g=r.length;y<g;y++){var _=r[y];v=l.min([],v,_),b=l.max([],b,_)}v=l.min([],v,i[0]),b=l.max([],b,i[1])}for(var M=0,x=r.length;M<x;M++){var m=r[M];if(n)o=r[M?M-1:x-1],u=r[(M+1)%x];else if(M===0||M===x-1){a.push(m);continue}else o=r[M-1],u=r[M+1];var S=[];S=l.sub(S,u,o),S=l.scale(S,S,h);var P=l.distance(m,o),A=l.distance(m,u),O=P+A;O!==0&&(P/=O,A/=O);var L=l.scale([],S,-P),W=l.scale([],S,A),F=l.add([],m,L),K=l.add([],m,W);f&&(F=l.max([],F,v),F=l.min([],F,b),K=l.max([],K,v),K=l.min([],K,b)),a.push(F),a.push(K)}return n&&a.push(a.shift()),a}function c(r,h,n){for(var i=!!h,a=[],o=0,u=r.length;o<u;o+=2)a.push([r[o],r[o+1]]);for(var f=s(a,.4,i,n),v=a.length,b=[],y,g,_,M=0;M<v-1;M++)y=f[M*2],g=f[M*2+1],_=a[M+1],b.push(["C",y[0],y[1],g[0],g[1],_[0],_[1]]);return i&&(y=f[v],g=f[v+1],_=a[0],b.push(["C",y[0],y[1],g[0],g[1],_[0],_[1]])),b}E.exports={catmullRom2bezier:c}},function(E,T,e){function t(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var l=e(8),s=e(0),c=e(544),r=c.venn,h=c.scaleSolution,n=c.circlePath,i=c.intersectionAreaPath,a=c.computeTextCentres;e(311);var o=function(u){t(f,u);function f(){return u.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=u.prototype.getDefaultCfg.call(this);return y.type="venn",y.shapeType="venn",y.generatePoints=!1,y},v._getAttrValues=function(y,g){return y.type==="position"?[g.x,g.y]:u.prototype._getAttrValues.call(this,y,g)},v.sets=function(y){return this.set("setsField",y),this},v._initAttrs=function(){var y=this;u.prototype._initAttrs.call(this);var g=y.get("attrOptions"),_=y.get("setsField")||"sets",M=y.get("data"),x=g.size?g.size.field:"size";M.forEach(function(k){k.sets=k[_],k._sets=k[_].join("&"),k.size=k[x]});var m=r(M),S=y.get("coord"),P=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],A=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],O=P[1]-P[0],L=A[1]-A[0],W=y.get("styleOptions"),F=W&&s.isObject(W.style)?W.style.padding:0;s.isFinite(F)||(F=0);var K=h(m,O,L,F),V=a(K,M);M.forEach(function(k){var Z=k.sets,X=Z.join(",");if(k.id=X,Z.length===1){var it=K[X];k.path=n(it.x,it.y,it.radius),s.assign(k,it)}else{var ft=Z.map(function(It){return K[It]}),pt=i(ft);/[zZ]$/.test(pt)||(pt+="Z"),k.path=pt;var ut=V[X]||{x:0,y:0};s.assign(k,ut)}})},f}(l);l.Venn=o,E.exports=o},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(312);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="violin",f.shapeType="violin",f.generatePoints=!0,f};function o(u){var f;return f=i.call(this,u)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=this,b=i.prototype.createShapePointsCfg.call(this,f);b.size=v.getNormalizedSize(f);var y=v.get("_sizeField");return b._size=f._origin[y],b},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},a._initAttrs=function(){var f=this,v=f.get("attrOptions"),b=v.size?v.size.field:f.get("_sizeField")?f.get("_sizeField"):"size";f.set("_sizeField",b),delete v.size,i.prototype._initAttrs.call(this)},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Violin=h,s.ViolinDodge=n,E.exports=h},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(0),c=e(28),r=["X","Y","XY","POLYGON"],h="XY",n=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return s.mix({},f,{type:h,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function o(u,f){var v;v=i.call(this,u,f)||this;var b=t(v);b.filter=!b.draggable,b.type=b.type.toUpperCase(),b.chart=f,r.includes(b.type)||(b.type=h);var y=b.canvas;if(y){var g;y.get("children").map(function(m){return m.get("type")==="plotBack"?(g=m.get("plotRange"),!1):m}),b.plot={start:g.bl,end:g.tr}}if(f){var _=f.get("coord");b.plot={start:_.start,end:_.end},f.on("afterrender",function(){b.plot={start:_.start,end:_.end}}),b.isTransposed=_.isTransposed;var M=f._getScales("x"),x=f._getScales("y");b.xScale=b.xField?M[b.xField]:f.getXScale(),b.yScale=b.yField?x[b.yField]:f.getYScales()[0]}return v}return a.start=function(f){var v=this,b=v.canvas,y=v.type,g=v.brushShape;if(!!y){v.brushing&&v.end(f);var _={x:f.offsetX,y:f.offsetY};if(!!_.x){var M=v.plot&&v.inPlot,x=b.get("canvasDOM"),m=b.get("pixelRatio");if(v.selection&&(v.selection=null),v.draggable&&g&&!g.get("destroyed")){if(g.isHit(_.x*m,_.y*m)){if(x.style.cursor="move",v.selection=g,v.dragging=!0,y==="X")v.dragoffX=_.x-g.attr("x"),v.dragoffY=0;else if(y==="Y")v.dragoffX=0,v.dragoffY=_.y-g.attr("y");else if(y==="XY")v.dragoffX=_.x-g.attr("x"),v.dragoffY=_.y-g.attr("y");else if(y==="POLYGON"){var S=g.getBBox();v.dragoffX=_.x-S.minX,v.dragoffY=_.y-S.minY}v.onDragstart&&v.onDragstart(f)}v.prePoint=_}if(!v.dragging){v.onBrushstart&&v.onBrushstart(_);var P=v.container;if(M){var A=v.plot,O=A.start,L=A.end;if(_.x<O.x||_.x>L.x||_.y<L.y||_.y>O.y)return}x.style.cursor="crosshair",v.startPoint=_,v.brushShape=null,v.brushing=!0,P?P.clear():(P=b.addGroup({zIndex:5}),P.initTransform()),v.container=P,y==="POLYGON"&&(v.polygonPath="M "+_.x+" "+_.y)}}}},a.process=function(f){var v=this,b=v.brushing,y=v.dragging,g=v.type,_=v.plot,M=v.startPoint,x=v.xScale,m=v.yScale,S=v.canvas;if(!(!b&&!y)){var P={x:f.offsetX,y:f.offsetY},A=S.get("canvasDOM");if(b){A.style.cursor="crosshair";var O=_.start,L=_.end,W=v.polygonPath,F=v.brushShape,K=v.container;v.plot&&v.inPlot&&(P=v._limitCoordScope(P));var V,k,Z,X;g==="Y"?(V=O.x,k=P.y>=M.y?M.y:P.y,Z=Math.abs(O.x-L.x),X=Math.abs(M.y-P.y)):g==="X"?(V=P.x>=M.x?M.x:P.x,k=L.y,Z=Math.abs(M.x-P.x),X=Math.abs(L.y-O.y)):g==="XY"?(P.x>=M.x?(V=M.x,k=P.y>=M.y?M.y:P.y):(V=P.x,k=P.y>=M.y?M.y:P.y),Z=Math.abs(M.x-P.x),X=Math.abs(M.y-P.y)):g==="POLYGON"&&(W+="L "+P.x+" "+P.y,v.polygonPath=W,F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{path:W})):F=K.addShape("path",{attrs:s.mix(v.style,{path:W})})),g!=="POLYGON"&&(F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{x:V,y:k,width:Z,height:X})):F=K.addShape("rect",{attrs:s.mix(v.style,{x:V,y:k,width:Z,height:X})})),v.brushShape=F}else if(y){A.style.cursor="move";var it=v.selection;if(it&&!it.get("destroyed"))if(g==="POLYGON"){var ft=v.prePoint;v.selection.translate(P.x-ft.x,P.y-ft.y)}else v.dragoffX&&it.attr("x",P.x-v.dragoffX),v.dragoffY&&it.attr("y",P.y-v.dragoffY)}v.prePoint=P,S.draw();var pt=v._getSelected(),ut=pt.data,It=pt.shapes,Nt=pt.xValues,Rt=pt.yValues,Mt={data:ut,shapes:It};x&&(Mt[x.field]=Nt),m&&(Mt[m.field]=Rt),s.mix(f,Mt),Mt.x=P.x,Mt.y=P.y,v.onDragmove&&v.onDragmove(Mt),v.onBrushmove&&v.onBrushmove(Mt)}},a.end=function(f){var v=this;if(!(!v.brushing&&!v.dragging)){var b=v.data,y=v.shapes,g=v.xValues,_=v.yValues,M=v.canvas,x=v.type,m=v.startPoint,S=v.chart,P=v.container,A=v.xScale,O=v.yScale,L=f.offsetX,W=f.offsetY,F=M.get("canvasDOM");if(F.style.cursor="default",m!==null){if(Math.abs(m.x-L)<=1&&Math.abs(m.y-W)<=1){v.brushing=!1,v.dragging=!1,P.clear(),M.draw();return}var K={data:b,shapes:y};if(A&&(K[A.field]=g),O&&(K[O.field]=_),s.mix(f,K),K.x=L,K.y=W,v.dragging)v.dragging=!1,v.onDragend&&v.onDragend(K);else if(v.brushing){v.brushing=!1;var V=v.brushShape,k=v.polygonPath;x==="POLYGON"&&(k+="z",V&&!V.get("destroyed")&&V.attr(s.mix({},V._attrs,{path:k})),v.polygonPath=k,M.draw()),v.onBrushend?v.onBrushend(K):S&&v.filter&&(P.clear(),!v.isTransposed&&x==="X"||v.isTransposed&&x==="Y"?A&&S.filter(A.field,function(Z){return g.indexOf(Z)>-1}):!v.isTransposed&&x==="Y"||v.isTransposed&&x==="X"?O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1}):(A&&S.filter(A.field,function(Z){return g.indexOf(Z)>-1}),O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1})),S.repaint())}}}},a.reset=function(){var f=this,v=f.chart,b=f.filter,y=f.brushShape,g=f.canvas;this._init(),v&&b&&(v.get("options").filters={},v.repaint()),y&&(y.destroy(),g.draw())},a._limitCoordScope=function(f){var v=this.plot,b=v.start,y=v.end;return f.x<b.x&&(f.x=b.x),f.x>y.x&&(f.x=y.x),f.y<y.y&&(f.y=y.y),f.y>b.y&&(f.y=b.y),f},a._getSelected=function(){var f=this,v=f.chart,b=f.xScale,y=f.yScale,g=f.brushShape,_=f.canvas,M=_.get("pixelRatio"),x=[],m=[],S=[],P=[];if(v){var A=v.get("geoms");A.map(function(O){var L=O.getShapes();return L.map(function(W){var F=W.get("origin");return Array.isArray(F)||(F=[F]),F.map(function(K){if(g.isHit(K.x*M,K.y*M)){x.push(W);var V=K._origin;P.push(V),b&&m.push(V[b.field]),y&&S.push(V[y.field])}return K}),W}),O})}return f.shapes=x,f.xValues=m,f.yValues=S,f.data=P,_.draw(),{data:P,xValues:m,yValues:S,shapes:x}},o}(c);E.exports=n},function(E,T,e){var t=e(0),l=e(16),s=l.Group,c=t.DomUtil,r=5,h=function n(i){n.superclass.constructor.call(this,i)};t.extend(h,s),t.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(i){var a=this,o=a.addGroup(),u=a.get("layout"),f=a.get("handleStyle"),v=f.img,b=f.width,y=f.height,g,_,M;if(u==="horizontal"){var x=f.width;M="ew-resize",_=o.addShape("Image",{attrs:{x:-x/2,y:0,width:x,height:y,img:v,cursor:M}}),g=o.addShape("Text",{attrs:t.mix({x:i==="min"?-(x/2+r):x/2+r,y:y/2,textAlign:i==="min"?"end":"start",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))})}else M="ns-resize",_=o.addShape("Image",{attrs:{x:0,y:-y/2,width:b,height:y,img:v,cursor:M}}),g=o.addShape("Text",{attrs:t.mix({x:b/2,y:i==="min"?y/2+r:-(y/2+r),textAlign:"center",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))});return this.set(i+"TextElement",g),this.set(i+"IconElement",_),o},_initSliderBackground:function(){var i=this.addGroup();return i.initTransform(),i.translate(0,0),i.addShape("Rect",{attrs:t.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),i},_beforeRenderUI:function(){var i=this._initSliderBackground(),a=this._initHandle("min"),o=this._initHandle("max"),u=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",u),this.set("minHandleElement",a),this.set("maxHandleElement",o),this.set("backgroundElement",i),i.set("zIndex",0),u.set("zIndex",1),a.set("zIndex",2),o.set("zIndex",2),u.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(i){var a=this.get("range"),o=a[0]/100,u=a[1]/100,f=this.get("width"),v=this.get("height"),b=this.get("minHandleElement"),y=this.get("maxHandleElement"),g=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),y.resetMatrix()):(b.initTransform(),y.initTransform()),i==="horizontal"?(g.attr({x:f*o,y:0,width:(u-o)*f,height:v}),b.translate(o*f,0),y.translate(u*f,0)):(g.attr({x:0,y:v*(1-u),width:f,height:(u-o)*v}),b.translate(0,(1-o)*v),y.translate(0,(1-u)*v))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(i,a){var o=this.get(a);if(i===o)return!0;if(o.isGroup){var u=o.get("children");return u.indexOf(i)>-1}return!1},_getRange:function(i,a){var o=i+a;return o=o>100?100:o,o=o<0?0:o,o},_limitRange:function(i,a,o){o[0]=this._getRange(i,o[0]),o[1]=o[0]+a,o[1]>100&&(o[1]=100,o[0]=o[1]-a)},_updateStatus:function(i,a){var o=i==="x"?this.get("width"):this.get("height");i=t.upperFirst(i);var u=this.get("range"),f=this.get("page"+i),v=this.get("currentTarget"),b=this.get("rangeStash"),y=this.get("layout"),g=y==="vertical"?-1:1,_=a["page"+i],M=_-f,x=M/o*100*g,m,S=this.get("minRange"),P=this.get("maxRange");u[1]<=u[0]?(this._isElement(v,"minHandleElement")||this._isElement(v,"maxHandleElement"))&&(u[0]=this._getRange(x,u[0]),u[1]=this._getRange(x,u[0])):(this._isElement(v,"minHandleElement")&&(u[0]=this._getRange(x,u[0]),S&&u[1]-u[0]<=S&&this._limitRange(x,S,u),P&&u[1]-u[0]>=P&&this._limitRange(x,P,u)),this._isElement(v,"maxHandleElement")&&(u[1]=this._getRange(x,u[1]),S&&u[1]-u[0]<=S&&this._limitRange(x,S,u),P&&u[1]-u[0]>=P&&this._limitRange(x,P,u))),this._isElement(v,"middleHandleElement")&&(m=b[1]-b[0],this._limitRange(x,m,u)),this.emit("sliderchange",{range:u}),this.set("page"+i,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(i){var a=i.currentTarget,o=i.event,u=this.get("range");o.stopPropagation(),o.preventDefault(),this.set("pageX",o.pageX),this.set("pageY",o.pageY),this.set("currentTarget",a),this.set("rangeStash",[u[0],u[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var i=this.get("canvas").get("containerDOM");this.onMouseMoveListener=c.addEventListener(i,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=c.addEventListener(i,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=c.addEventListener(i,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(i){var a=this.get("layout");a==="horizontal"?this._updateStatus("x",i):this._updateStatus("y",i)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),E.exports=h},function(E,T,e){function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function l(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var s=e(0),c=e(28),r=e(320),h=e(71),n=e(73),i=864e5,a=["X","Y","XY"],o="X",u=function(f){l(b,f);var v=b.prototype;v.getDefaultCfg=function(){var g=f.prototype.getDefaultCfg.call(this);return s.mix({},g,{type:o,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},v._disableTooltip=function(){var g=this,_=g.chart,M=_.get("tooltipController");M&&(g._showTooltip=!0,_.tooltip(!1))},v._enableTooltip=function(g){var _=this,M=_.chart;_._showTooltip&&(M.tooltip(!0),M.showTooltip(g))};function b(y,g){var _;_=f.call(this,y,g)||this;var M=t(_);M.type=M.type.toUpperCase(),M.chart=g,M.coord=g.get("coord");var x=M.data=g.get("data");r(g);var m=g.getYScales(),S=g.getXScale();m.push(S);var P=g.get("scaleController");return m.forEach(function(A){var O=A.field;M.limitRange[O]=n(x,A);var L=P.defs[O]||{};M.originScaleDefsByField[O]=s.mix(L,{nice:!!L.nice}),A.isLinear&&(M.stepByField[O]=(A.max-A.min)*M.stepRatio)}),a.includes(M.type)||(M.type=o),M._disableTooltip(),_}return v._applyTranslate=function(g,_,M){_===void 0&&(_=0);var x=this;g.isLinear?x._translateLinearScale(g,_,M):x._translateCatScale(g,_,M)},v._translateCatScale=function(g,_,M){var x=this,m=x.chart,S=g.type,P=g.field,A=g.values,O=g.ticks,L=h(m,P),W=x.limitRange[P],F=_/M,K=A.length,V=Math.max(1,Math.abs(parseInt(F*K))),k=W.indexOf(A[0]),Z=W.indexOf(A[K-1]);if(_>0&&k>=0){for(var X=0;X<V&&k>0;X++)k-=1,Z-=1;var it=W.slice(k,Z+1),ft=null;if(S==="timeCat"){for(var pt=O.length>2?O[1]-O[0]:i,ut=O[0]-pt;ut>=it[0];ut-=pt)O.unshift(ut);ft=O}m.scale(P,s.mix({},L,{values:it,ticks:ft}))}else if(_<0&&Z<=W.length-1){for(var It=0;It<V&&Z<W.length-1;It++)k+=1,Z+=1;var Nt=W.slice(k,Z+1),Rt=null;if(S==="timeCat"){for(var Mt=O.length>2?O[1]-O[0]:i,bt=O[O.length-1]+Mt;bt<=Nt[Nt.length-1];bt+=Mt)O.push(bt);Rt=O}m.scale(P,s.mix({},L,{values:Nt,ticks:Rt}))}},v._translateLinearScale=function(g,_,M){var x=this,m=x.chart,S=x.limitRange,P=g.min,A=g.max,O=g.field;if(!(P===S[O].min&&A===S[O].max)){var L=_/M,W=A-P,F=h(m,O);m.scale(O,s.mix({},F,{nice:!1,min:P+L*W,max:A+L*W}))}},v.start=function(g){var _=this,M=_.canvas,x=M.get("canvasDOM");x.style.cursor="pointer",_.isDragging=!0,_.previousPoint={x:g.x,y:g.y},_._disableTooltip()},v.process=function(g){var _=this;if(_.isDragging){var M=_.chart,x=_.type,m=_.canvas,S=_.coord,P=_.threshold,A=m.get("canvasDOM");A.style.cursor="move";var O=_.previousPoint,L=g,W=L.x-O.x,F=L.y-O.y,K=!1;if(Math.abs(W)>P&&x.indexOf("X")>-1){K=!0;var V=M.getXScale();_._applyTranslate(V,V.isLinear?-W:W,S.width)}if(Math.abs(F)>P&&x.indexOf("Y")>-1){K=!0;var k=M.getYScales();k.forEach(function(Z){_._applyTranslate(Z,L.y-O.y,S.height)})}K&&(_.previousPoint=L,M.repaint())}},v.end=function(g){var _=this;_.isDragging=!1;var M=_.canvas,x=M.get("canvasDOM");x.style.cursor="default",_._enableTooltip(g)},v.reset=function(){var g=this,_=g.view,M=g.originScaleDefsByField,x=_.getYScales(),m=_.getXScale();x.push(m),x.forEach(function(S){if(S.isLinear){var P=S.field;_.scale(P,M[P])}}),_.repaint(),g._disableTooltip()},b}(c);E.exports=u},function(E,T,e){var t=e(0),l=e(52),s=e(72);E.exports=function(c){c.on("beforeinitgeoms",function(){c.set("limitInPlot",!0);var r=c.get("data"),h=s(c);if(!h)return r;var n=c.get("geoms"),i=!1;t.each(n,function(u){if(["area","line","path"].includes(u.get("type")))return i=!0,!1});var a=[];if(t.each(h,function(u,f){!i&&u&&(u.values||u.min||u.max)&&a.push(f)}),a.length===0)return r;var o=[];t.each(r,function(u){var f=!0;t.each(a,function(v){var b=u[v];if(b){var y=h[v];if(y.type==="timeCat"){var g=y.values;t.isNumber(g[0])&&(b=l.toTimeStamp(b))}(y.values&&!y.values.includes(b)||y.min&&b<y.min||y.max&&b>y.max)&&(f=!1)}}),f&&o.push(u)}),c.set("filteredData",o)})}},function(E,T){E.exports=function(e,t,l){if(!e)return[0,1];var s=0,c=0;if(l==="linear"){var r=t.min,h=t.max,n=h-r;s=(e.min-r)/n,c=(e.max-r)/n}else{var i=t,a=e.values,o=i.indexOf(a[0]),u=i.indexOf(a[a.length-1]);s=o/(i.length-1),c=u/(i.length-1)}return[s,c]}},function(E,T,e){var t=e(45),l=e(44),s=e(0),c={Base:e(28),Brush:e(317),Drag:e(319),ScrollBar:e(323),ShapeSelect:e(324),Slider:e(325),Zoom:e(326)};t._Interactions={},t.registerInteraction=function(r,h){t._Interactions[r]=h},t.getInteraction=function(r){return t._Interactions[r]},l.prototype.getInteractions=function(){var r=this;return r._interactions||(r._interactions={}),r._interactions},l.prototype._setInteraction=function(r,h){var n=this,i=n.getInteractions();i[r]&&i[r]!==h&&i[r].destroy(),i[r]=h},l.prototype.clearInteraction=function(r){var h=this,n=h.getInteractions();r?(n[r]&&(n[r]._reset(),n[r].destroy()),delete n[r]):s.each(n,function(i,a){i._reset(),i.destroy(),delete n[a]})},l.prototype.interact=l.prototype.interaction=function(r,h){var n=this,i=t.getInteraction(r),a=new i(h,n);return n._setInteraction(r,a),n},t.registerInteraction("brush",c.Brush),t.registerInteraction("Brush",c.Brush),t.registerInteraction("drag",c.Drag),t.registerInteraction("Drag",c.Drag),t.registerInteraction("zoom",c.Zoom),t.registerInteraction("Zoom",c.Zoom),t.registerInteraction("scroll-bar",c.ScrollBar),t.registerInteraction("ScrollBar",c.ScrollBar),t.registerInteraction("shape-select",c.ShapeSelect),t.registerInteraction("ShapeSelect",c.ShapeSelect),t.registerInteraction("slider",c.Slider),t.registerInteraction("Slider",c.Slider),E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(0),s=e(28),c=e(321),r=e(73),h="X",n=function(i){t(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return l.mix({},f,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:h,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},a._renderScrollBars=function(){var f=this.chart,v=f.get("_scrollBarCfg");if(!!v){var b=f.get("data"),y=f.get("plotRange");y.width=Math.abs(y.br.x-y.bl.x),y.height=Math.abs(y.tl.y-y.bl.y);var g=f.get("backPlot"),_=f.get("canvas"),M=_.get("height"),x=f.get("_limitRange"),m=v.type;if(m.indexOf("X")>-1){var S=v.xStyle,P=S.offsetX,A=S.offsetY,O=S.lineCap,L=S.backgroundColor,W=S.fillerColor,F=S.size,K=f.getXScale(),V=x[K.field];V||(V=r(b,K),x[K.field]=V);var k=c(K,V,K.type),Z=f.get("_horizontalBar"),X=M-F/2+A;if(Z){var it=Z.get("children")[1];it.attr({x1:Math.max(y.bl.x+y.width*k[0]+P,y.bl.x),x2:Math.min(y.bl.x+y.width*k[1]+P,y.br.x)})}else Z=g.addGroup({className:"horizontalBar"}),Z.addShape("line",{attrs:{x1:y.bl.x+P,y1:X,x2:y.br.x+P,y2:X,lineWidth:F,stroke:L,lineCap:O}}),Z.addShape("line",{attrs:{x1:Math.max(y.bl.x+y.width*k[0]+P,y.bl.x),y1:X,x2:Math.min(y.bl.x+y.width*k[1]+P,y.br.x),y2:X,lineWidth:F,stroke:W,lineCap:O}}),f.set("_horizontalBar",Z)}if(m.indexOf("Y")>-1){var ft=v.yStyle,pt=ft.offsetX,ut=ft.offsetY,It=ft.lineCap,Nt=ft.backgroundColor,Rt=ft.fillerColor,Mt=ft.size,bt=f.getYScales()[0],At=x[bt.field];At||(At=r(b,bt),x[bt.field]=At);var rt=c(bt,At,bt.type),Pt=f.get("_verticalBar"),z=Mt/2+pt;if(Pt){var Q=Pt.get("children")[1];Q.attr({y1:Math.max(y.tl.y+y.height*rt[0]+ut,y.tl.y),y2:Math.min(y.tl.y+y.height*rt[1]+ut,y.bl.y)})}else Pt=g.addGroup({className:"verticalBar"}),Pt.addShape("line",{attrs:{x1:z,y1:y.tl.y+ut,x2:z,y2:y.bl.y+ut,lineWidth:Mt,stroke:Nt,lineCap:It}}),Pt.addShape("line",{attrs:{x1:z,y1:Math.max(y.tl.y+y.height*rt[0]+ut,y.tl.y),x2:z,y2:Math.min(y.tl.y+y.height*rt[1]+ut,y.bl.y),lineWidth:Mt,stroke:Rt,lineCap:It}}),f.set("_verticalBar",Pt)}}};function o(u,f){var v;v=i.call(this,u,f)||this;var b=v.getDefaultCfg();return f.set("_scrollBarCfg",l.deepMix({},b,u)),f.set("_limitRange",{}),!f.get("_horizontalBar")&&!f.get("_verticalBar")&&v._renderScrollBars(),v}return a._clear=function(){var f=this.chart;if(f){var v=f.get("_horizontalBar"),b=f.get("_verticalBar");v&&v.remove(!0),b&&b.remove(!0),f.set("_horizontalBar",null),f.set("_verticalBar",null)}},a._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var f=this.chart;f.on("afterclear",this._onAfterclearOrBeforechangedata),f.on("beforechangedata",this._onAfterclearOrBeforechangedata),f.on("afterclearinner",this._onAfterclearinner),f.on("afterdrawgeoms",this._onAfterdrawgeoms)},a._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},a._onAfterclearinner=function(){this._clear()},a._onAfterdrawgeoms=function(){this._renderScrollBars()},a._clearEvents=function(){var f=this.chart;f&&(f.off("afterclear",this._onAfterclearOrBeforechangedata),f.off("beforechangedata",this._onAfterclearOrBeforechangedata),f.off("afterclearinner",this._onAfterclearinner),f.off("afterdrawgeoms",this._onAfterdrawgeoms))},a.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},o}(s);E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(0),s=e(28);function c(h,n){var i={};for(var a in n)i[a]=h[a];return i}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return l.mix({},o,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},i.start=function(o){var u=this,f=u.view,v,b=[];if(f.eachShape(function(M,x){x.isPointInPath(o.x,o.y)?v=x:b.push(x)}),!v){u.reset();return}if(v.get("_selected")){if(!u.cancelable)return;u.reset()}else{var y=u.selectStyle,g=u.unSelectStyle,_=c(v.attr(),v);v.set("_originAttrs",_),v.attr(y),l.each(b,function(M){var x=M.get("_originAttrs");x&&M.attr(x),M.set("_selected",!1),g&&(x=c(M.attr(),g),M.set("_originAttrs",x),M.attr(g))}),v.set("_selected",!0),u.selectedShape=v,u.canvas.draw()}},i.end=function(o){var u=this.selectedShape;u&&!u.get("destroyed")&&u.get("origin")&&(o.data=u.get("origin")._origin,o.shapeInfo=u.get("origin"),o.shape=u,o.selected=!!u.get("_selected"))},i.reset=function(){var o=this;if(!!o.selectedShape){var u=o.view,f=u.get("geoms")[0],v=f.get("container").get("children")[0],b=v.get("children");l.each(b,function(y){var g=y.get("_originAttrs");g&&(y._attrs=g,y.set("_originAttrs",null)),y.set("_selected",!1)}),o.canvas.draw()}},n}(s);E.exports=r},function(E,T,e){function t(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function l(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var s=e(318),c=e(44),r=e(0),h=e(16),n=e(5),i=e(28),a=e(71),o=e(72),u=h.Canvas,f=r.DomUtil,v=r.isNumber,b=function(y){l(_,y);var g=_.prototype;g.getDefaultCfg=function(){var x=y.prototype.getDefaultCfg.call(this);return r.mix({},x,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:n.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},g._initContainer=function(){var x=this,m=x.container;if(!m)throw new Error("Please specify the container for the Slider!");r.isString(m)?x.domContainer=document.getElementById(m):x.domContainer=m},g.forceFit=function(){var x=this;if(!(!x||x.destroyed)){var m=f.getWidth(x.domContainer),S=x.height;if(m!==x.domWidth){var P=x.canvas;P.changeSize(m,S),x.bgChart&&x.bgChart.changeWidth(m),P.clear(),x._initWidth(),x._initSlider(),x._bindEvent(),P.draw()}}},g._initForceFitEvent=function(){var x=this,m=setTimeout(r.wrapBehavior(x,"forceFit"),200);clearTimeout(x.resizeTimer),x.resizeTimer=m},g._initStyle=function(){var x=this;x.handleStyle=r.mix({width:x.height,height:x.height},x.handleStyle),x.width==="auto"&&window.addEventListener("resize",r.wrapBehavior(x,"_initForceFitEvent"))},g._initWidth=function(){var x=this,m;x.width==="auto"?m=f.getWidth(x.domContainer):m=x.width,x.domWidth=m;var S=r.toAllPadding(x.padding);x.layout==="horizontal"?(x.plotWidth=m-S[1]-S[3],x.plotPadding=S[3],x.plotHeight=x.height):x.layout==="vertical"&&(x.plotWidth=x.width,x.plotHeight=x.height-S[0]-S[2],x.plotPadding=S[0])},g._initCanvas=function(){var x=this,m=x.domWidth,S=x.height,P=new u({width:m,height:S,containerDOM:x.domContainer,capture:!1}),A=P.get("el");A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.zIndex=3,x.canvas=P},g._initBackground=function(){var x,m=this,S=this.chart,P=S.getAllGeoms[0],A=m.data=m.data||S.get("data"),O=S.getXScale(),L=m.xAxis||O.field,W=m.yAxis||S.getYScales()[0].field,F=r.deepMix((x={},x[""+L]={range:[0,1]},x),o(S),m.scales);if(delete F[L].min,delete F[L].max,!A)throw new Error("Please specify the data!");if(!L)throw new Error("Please specify the xAxis!");if(!W)throw new Error("Please specify the yAxis!");var K=m.backgroundChart,V=K.type||P.get("type"),k=K.color||"grey",Z=K.shape;r.isArray(V)||(V=[V]);var X=r.toAllPadding(m.padding),it=new c({container:m.container,width:m.domWidth,height:m.height,padding:[0,X[1],0,X[3]],animate:!1});it.source(A),it.scale(F),it.axis(!1),it.tooltip(!1),it.legend(!1),r.each(V,function(ft,pt){var ut=it[ft]().position(L+"*"+W).opacity(1),It=r.isArray(k)?k[pt]:k;It&&(r.isObject(It)?It.field&&ut.color(It.field,It.colors):ut.color(It));var Nt=r.isArray(Z)?Z[pt]:Z;Nt&&(r.isObject(Nt)?Nt.field&&ut.shape(Nt.field,Nt.callback||Nt.shapes):ut.shape(Nt))}),it.render(),m.bgChart=it,m.scale=m.layout==="horizontal"?it.getXScale():it.getYScales()[0],m.layout==="vertical"&&it.destroy()},g._initRange=function(){var x=this,m=x.startRadio,S=x.endRadio,P=x._startValue,A=x._endValue,O=x.scale,L=0,W=1;v(m)?L=m:P&&(L=O.scale(O.translate(P))),v(S)?W=S:A&&(W=O.scale(O.translate(A)));var F=x.minSpan,K=x.maxSpan,V=0;if(O.type==="time"||O.type==="timeCat"){var k=O.values,Z=k[0],X=k[k.length-1];V=X-Z}else O.isLinear&&(V=O.max-O.min);V&&F&&(x.minRange=F/V*100),V&&K&&(x.maxRange=K/V*100);var it=[L*100,W*100];return x.range=it,it},g._getHandleValue=function(x){var m=this,S,P=m.range,A=P[0]/100,O=P[1]/100,L=m.scale;return x==="min"?S=m._startValue?m._startValue:L.invert(A):S=m._endValue?m._endValue:L.invert(O),S},g._initSlider=function(){var x=this,m=x.canvas,S=x._initRange(),P=x.scale,A=m.addGroup(s,{middleAttr:x.fillerStyle,range:S,minRange:x.minRange,maxRange:x.maxRange,layout:x.layout,width:x.plotWidth,height:x.plotHeight,backgroundStyle:x.backgroundStyle,textStyle:x.textStyle,handleStyle:x.handleStyle,minText:P.getText(x._getHandleValue("min")),maxText:P.getText(x._getHandleValue("max"))});x.layout==="horizontal"?A.translate(x.plotPadding,0):x.layout==="vertical"&&A.translate(0,x.plotPadding),x.rangeElement=A},g._updateElement=function(x,m){var S=this,P=S.chart,A=S.scale,O=S.rangeElement,L=A.field,W=O.get("minTextElement"),F=O.get("maxTextElement"),K=A.invert(x),V=A.invert(m),k=A.getText(K),Z=A.getText(V);W.attr("text",k),F.attr("text",Z),S._startValue=k,S._endValue=Z,S.onChange&&S.onChange({startText:k,endText:Z,startValue:K,endValue:V,startRadio:x,endRadio:m}),P.scale(L,r.mix({},a(P,L),{nice:!1,min:K,max:V})),P.repaint()},g._bindEvent=function(){var x=this,m=x.rangeElement;m.on("sliderchange",function(S){var P=S.range,A=P[0]/100,O=P[1]/100;x._updateElement(A,O)})};function _(M,x){var m;m=y.call(this,M,x)||this;var S=t(m);return S._initContainer(),S._initStyle(),S.render(),m}return g.clear=function(){var x=this;x.canvas.clear(),x.bgChart&&x.bgChart.destroy(),x.bgChart=null,x.scale=null,x.canvas.draw()},g.repaint=function(){var x=this;x.clear(),x.render()},g.render=function(){var x=this;x._initWidth(),x._initCanvas(),x._initBackground(),x._initSlider(),x._bindEvent(),x.canvas.draw()},g.destroy=function(){var x=this;clearTimeout(x.resizeTimer);var m=x.rangeElement;m.off("sliderchange"),x.bgChart&&x.bgChart.destroy(),x.canvas.destroy();for(var S=x.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",r.getWrapBehavior(x,"_initForceFitEvent")),x.destroyed=!0},_}(i);E.exports=b},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function l(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var s=e(0),c=e(28),r=e(71),h=e(73),n=["X","Y","XY"],i="X",a=function(o){l(f,o);var u=f.prototype;u.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return s.mix({},b,{processEvent:"mousewheel",type:i,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function f(v,b){var y;y=o.call(this,v,b)||this;var g=t(y);g.chart=b,g.type=g.type.toUpperCase();var _=g.data=b.get("data"),M=b.getYScales(),x=b.getXScale();M.push(x);var m=b.get("scaleController");return M.forEach(function(S){var P=S.field,A=m.defs[P]||{};g.limitRange[P]=h(_,S),g.originScaleDefsByField[P]=s.mix(A,{nice:!!A.nice}),S.isLinear?g.stepByField[P]=(S.max-S.min)*g.stepRatio:g.stepByField[P]=g.catStep}),n.includes(g.type)||(g.type=i),y}return u._applyScale=function(b,y,g,_){g===void 0&&(g=0);var M=this,x=M.chart,m=M.stepByField;if(b.isLinear){var S=b.min,P=b.max,A=b.field,O=1-g,L=m[A]*y,W=S+L*g,F=P-L*O;if(F>W){var K=r(x,A);x.scale(A,s.mix({},K,{nice:!1,min:W,max:F}))}}else{var V=b.field,k=b.values,Z=M.chart,X=Z.get("coord"),it=r(Z,V),ft=M.limitRange[V],pt=ft.length,ut=M.maxScale,It=M.minScale,Nt=pt/ut,Rt=pt/It,Mt=k.length,bt=X.invertPoint(_),At=bt.x,rt=Mt-y*this.catStep,Pt=parseInt(rt*At),z=rt+Pt;if(y>0&&Mt>=Nt){var Q=Pt,gt=z;z>Mt&&(gt=Mt-1,Q=Mt-rt);var et=k.slice(Q,gt);Z.scale(V,s.mix({},it,{values:et}))}else if(y<0&&Mt<=Rt){var ot=ft.indexOf(k[0]),xt=ft.indexOf(k[Mt-1]),H=Math.max(0,ot-Pt),nt=Math.min(xt+z,pt),at=ft.slice(H,nt);Z.scale(V,s.mix({},it,{values:at}))}}},u.process=function(b){var y=this,g=y.chart,_=y.type,M=g.get("coord"),x=b.deltaY,m=M.invertPoint(b);if(x){y.onZoom&&y.onZoom(x,m,y),x>0?y.onZoomin&&y.onZoomin(x,m,y):y.onZoomout&&y.onZoomout(x,m,y);var S=x/Math.abs(x);if(_.indexOf("X")>-1&&y._applyScale(g.getXScale(),S,m.x,b),_.indexOf("Y")>-1){var P=g.getYScales();P.forEach(function(A){y._applyScale(A,S,m.y,b)})}}g.repaint()},u.reset=function(){var b=this,y=b.view,g=b.originScaleDefsByField,_=y.getYScales(),M=y.getXScale();_.push(M),_.forEach(function(x){if(x.isLinear){var m=x.field;y.scale(m,g[m])}}),y.repaint()},f}(c);E.exports=a},function(E,T,e){var t,l,s=e(0),c=e(131),r="g2-tooltip",h="g2-legend",n=s.deepMix({},c,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(t={},t[""+h]={color:"#D9D9D9"},t),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(l={},l[""+r]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},l),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});E.exports=n},function(E,T,e){var t=e(1),l=e(135),s=e(134),c=e(332),r=e(337),h=function n(i){n.superclass.constructor.call(this,i)};h.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(h,s),t.augment(h,{init:function(){h.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(i,a){if(i)if(t.isEmpty(i._getEvents())){var o=i.get("parent");if(o&&!a.propagationStopped)return this.getEmitter(o,a)}else return i},_getEventObj:function(i,a,o,u){var f=new l(i,a,!0,!0);return f.x=o.x,f.y=o.y,f.clientX=a.clientX,f.clientY=a.clientY,f.currentTarget=u,f.target=u,f},_triggerEvent:function(i,a){var o=this.getPointByClient(a.clientX,a.clientY),u=this.getShape(o.x,o.y,a),f=this.get("el"),v;if(i==="mousemove"){var b=this.get("preShape");if(b&&b!==u){var y=this._getEventObj("mouseleave",a,o,b);v=this.getEmitter(b,a),v&&v.emit("mouseleave",y),f.style.cursor="default"}if(u){var g=this._getEventObj("mousemove",a,o,u);if(v=this.getEmitter(u,a),v&&v.emit("mousemove",g),b!==u){var _=this._getEventObj("mouseenter",a,o,u);v&&v.emit("mouseenter",_,a)}}else{var M=this._getEventObj("mousemove",a,o,this);this.emit("mousemove",M)}this.set("preShape",u)}else{var x=this._getEventObj(i,a,o,u||this);v=this.getEmitter(u,a),v&&v!==this&&v.emit(i,x),this.emit(i,x)}u&&!u.get("destroyed")&&(f.style.cursor=u.attr("cursor")||"default")},_registEvents:function(){var i=this,a=i.get("el"),o=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];t.each(o,function(u){a.addEventListener(u,function(f){i._triggerEvent(u,f)},!1)}),a.addEventListener("touchstart",function(u){t.isEmpty(u.touches)||i._triggerEvent("touchstart",u.touches[0])},!1),a.addEventListener("touchmove",function(u){t.isEmpty(u.touches)||i._triggerEvent("touchmove",u.touches[0])},!1),a.addEventListener("touchend",function(u){t.isEmpty(u.changedTouches)||i._triggerEvent("touchend",u.changedTouches[0])},!1)},_scale:function(){var i=this.get("pixelRatio");this.scale(i,i)},_setGlobalParam:function(){var i=this.get("pixelRatio");i||this.set("pixelRatio",t.getRatio());var a=r[this.get("renderer")||"canvas"];this._cfg.renderer=a,this._cfg.canvas=this;var o=new c(this);this._cfg.timeline=o},_setContainer:function(){var i=this.get("containerId"),a=this.get("containerDOM");a||(a=document.getElementById(i),this.set("containerDOM",a)),t.modifyCSS(a,{position:"relative"})},_initPainter:function(){var i=this.get("containerDOM"),a=new this._cfg.renderer.painter(i);this._cfg.painter=a,this._cfg.canvasDOM=this._cfg.el=a.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var i=this.get("canvasDOM"),a=this.get("widthCanvas"),o=this.get("heightCanvas"),u=this.get("widthStyle"),f=this.get("heightStyle");i.style.width=u,i.style.height=f,i.setAttribute("width",a),i.setAttribute("height",o)},getWidth:function(){var i=this.get("pixelRatio"),a=this.get("width");return a*i},getHeight:function(){var i=this.get("pixelRatio"),a=this.get("height");return a*i},changeSize:function(i,a){var o=this.get("pixelRatio"),u=i*o,f=a*o;this.set("widthCanvas",u),this.set("heightCanvas",f),this.set("widthStyle",i+"px"),this.set("heightStyle",a+"px"),this.set("width",i),this.set("height",a),this._resize()},getPointByClient:function(i,a){var o=this.get("el"),u=this.get("pixelRatio")||1,f=o.getBoundingClientRect();return{x:(i-f.left)*u,y:(a-f.top)*u}},getClientByPoint:function(i,a){var o=this.get("el"),u=o.getBoundingClientRect(),f=this.get("pixelRatio")||1;return{clientX:i/f+u.left,clientY:a/f+u.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(i,a,o){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,i,a,o):h.superclass.getShape.call(this,i,a)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var i=this._cfg,a=i.containerDOM,o=i.canvasDOM;o&&a&&a.removeChild(o),i.timeline.stop(),h.superclass.destroy.call(this)}}),E.exports=h},function(E,T,e){var t=e(1),l={delay:"delay",rotate:"rotate"},s={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function c(n,i){var a={},o=i._attrs;for(var u in n.attrs)a[u]=o[u];return a}function r(n,i){var a={matrix:null,attrs:{}},o=i._attrs;for(var u in n)if(u==="transform")a.matrix=t.transform(i.getMatrix(),n[u]);else if(u==="rotate")a.matrix=t.transform(i.getMatrix(),[["r",n[u]]]);else if(u==="matrix")a.matrix=n[u];else{if(s[u]&&/^[r,R,L,l]{1}[\s]*\(/.test(n[u]))continue;!l[u]&&o[u]!==n[u]&&(a.attrs[u]=n[u])}return a}function h(n,i){var a=i.delay,o=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(u,f){t.each(n,function(v){a<v.startTime+v.duration&&o.call(v.toAttrs,f)&&(delete v.toAttrs[f],delete v.fromAttrs[f])})}),i.toMatrix&&t.each(n,function(u){a<u.startTime+u.duration&&u.toMatrix&&delete u.toMatrix}),n}E.exports={animate:function(i,a,o,u,f){f===void 0&&(f=0);var v=this;v.set("animating",!0);var b=v.get("timeline");b||(b=v.get("canvas").get("timeline"),v.setSilent("timeline",b));var y=v.get("animators")||[];b._timer||b.initTimer(),t.isNumber(u)&&(f=u,u=null),t.isFunction(o)?(u=o,o="easeLinear"):o=o||"easeLinear";var g=r(i,v),_={fromAttrs:c(g,v),toAttrs:g.attrs,fromMatrix:t.clone(v.getMatrix()),toMatrix:g.matrix,duration:a,easing:o,callback:u,delay:f,startTime:b.getTime(),id:t.uniqueId()};y.length>0?y=h(y,_):b.addAnimator(v),y.push(_),v.setSilent("animators",y),v.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var i=this,a=this.get("animators");t.each(a,function(o){i.attr(o.toAttrs),o.toMatrix&&i.attr("matrix",o.toMatrix),o.callback&&o.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var i=this,a=i.get("timeline");return i.setSilent("pause",{isPaused:!0,pauseTime:a.getTime()}),i},resumeAnimate:function(){var i=this,a=i.get("timeline"),o=a.getTime(),u=i.get("animators"),f=i.get("pause").pauseTime;return t.each(u,function(v){v.startTime=v.startTime+(o-f),v._paused=!1,v._pauseTime=null}),i.setSilent("pause",{isPaused:!1}),i.setSilent("animators",u),i}}},function(E,T,e){var t=e(1);E.exports={canFill:!1,canStroke:!1,initAttrs:function(s){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),s)),this},getDefaultAttrs:function(){return{}},attr:function(s,c){var r=this;if(arguments.length===0)return r._attrs;if(t.isObject(s)){for(var h in s)this._setAttr(h,s[h]);return r.clearBBox(),this._cfg.hasUpdate=!0,r}return arguments.length===2?(this._setAttr(s,c),r.clearBBox(),this._cfg.hasUpdate=!0,r):r._attrs[s]},_setAttr:function(s,c){var r=this,h=this._attrs;if(h[s]=c,s==="fill"||s==="stroke"){h[s+"Style"]=c;return}if(s==="opacity"){h.globalAlpha=c;return}if(s==="clip"&&c){r._setClip(c);return}if(s==="path"&&r._afterSetAttrPath){r._afterSetAttrPath(c);return}if(s==="transform"){r.transform(c);return}s==="rotate"&&r.rotateAtStart(c)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(s){s._cfg.renderer=this._cfg.renderer,s._cfg.canvas=this._cfg.canvas,s._cfg.parent=this._cfg.parent,s.hasFill=function(){return!0}}}},function(E,T,e){var t=e(1),l=e(76),s={arc:e(47),ellipse:e(143),line:e(48)},c=t.createDom('<canvas width="500" height="500"></canvas>'),r=c.getContext("2d");function h(S,P,A){return A.createPath(r),r.isPointInPath(S,P)}var n=function(P,A){var O=this._attrs,L=O.x,W=O.y,F=O.r,K=O.startAngle,V=O.endAngle,k=O.clockwise,Z=this.getHitLineWidth();return this.hasStroke()?l.arcline(L,W,F,K,V,k,Z,P,A):!1},i=function(P,A){var O=this._attrs,L=O.x,W=O.y,F=O.r,K=this.getHitLineWidth(),V=this.hasFill(),k=this.hasStroke();return V&&k?l.circle(L,W,F,P,A)||l.arcline(L,W,F,0,Math.PI*2,!1,K,P,A):V?l.circle(L,W,F,P,A):k?l.arcline(L,W,F,0,Math.PI*2,!1,K,P,A):!1},a=function(P,A){var O=this._attrs,L=this.hasFill(),W=this.hasStroke(),F=O.x,K=O.y,V=O.rx,k=O.ry,Z=this.getHitLineWidth(),X=V>k?V:k,it=V>k?1:V/k,ft=V>k?k/V:1,pt=[P,A,1],ut=[1,0,0,0,1,0,0,0,1];t.mat3.scale(ut,ut,[it,ft]),t.mat3.translate(ut,ut,[F,K]);var It=t.mat3.invert([],ut);return t.vec3.transformMat3(pt,pt,It),L&&W?l.circle(0,0,X,pt[0],pt[1])||l.arcline(0,0,X,0,Math.PI*2,!1,Z,pt[0],pt[1]):L?l.circle(0,0,X,pt[0],pt[1]):W?l.arcline(0,0,X,0,Math.PI*2,!1,Z,pt[0],pt[1]):!1},o=function(P,A){var O=this,L=O.hasFill(),W=O.hasStroke(),F=O._attrs,K=F.x,V=F.y,k=F.rs,Z=F.re,X=F.startAngle,it=F.endAngle,ft=F.clockwise,pt=[1,0],ut=[P-K,A-V],It=t.vec2.angleTo(pt,ut);function Nt(){var Mt=s.arc.nearAngle(It,X,it,ft);if(t.isNumberEqual(It,Mt)){var bt=t.vec2.squaredLength(ut);if(k*k<=bt&&bt<=Z*Z)return!0}return!1}function Rt(){var Mt=O.getHitLineWidth(),bt={x:Math.cos(X)*k+K,y:Math.sin(X)*k+V},At={x:Math.cos(X)*Z+K,y:Math.sin(X)*Z+V},rt={x:Math.cos(it)*k+K,y:Math.sin(it)*k+V},Pt={x:Math.cos(it)*Z+K,y:Math.sin(it)*Z+V};return!!(l.line(bt.x,bt.y,At.x,At.y,Mt,P,A)||l.line(rt.x,rt.y,Pt.x,Pt.y,Mt,P,A)||l.arcline(K,V,k,X,it,ft,Mt,P,A)||l.arcline(K,V,Z,X,it,ft,Mt,P,A))}return L&&W?Nt()||Rt():L?Nt():W?Rt():!1},u=function(P,A){var O=this._attrs;if(this.get("toDraw")||!O.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==O.img)&&this._setAttrImg();var L=O.x,W=O.y,F=O.width,K=O.height;return l.rect(L,W,F,K,P,A)},f=function(P,A){var O=this._attrs,L=O.x1,W=O.y1,F=O.x2,K=O.y2,V=this.getHitLineWidth();return this.hasStroke()?l.line(L,W,F,K,V,P,A):!1},v=function(P,A){var O=this,L=O.get("segments"),W=O.hasFill(),F=O.hasStroke();function K(){if(!t.isEmpty(L)){for(var V=O.getHitLineWidth(),k=0,Z=L.length;k<Z;k++)if(L[k].isInside(P,A,V))return!0;return!1}}return W&&F?h(P,A,O)||K():W?h(P,A,O):F?K():!1},b=function(P,A){var O=this,L=O.hasFill(),W=O.hasStroke();function F(){var K=O._attrs,V=K.points;if(V.length<2)return!1;var k=O.getHitLineWidth(),Z=V.slice(0);return V.length>=3&&Z.push(V[0]),l.polyline(Z,k,P,A)}return L&&W?h(P,A,O)||F():L?h(P,A,O):W?F():!1},y=function(P,A){var O=this._attrs,L=O.x,W=O.y,F=O.radius||O.r,K=this.getHitLineWidth();return l.circle(L,W,F+K/2,P,A)},g=function(P,A){var O=this,L=O._attrs;if(O.hasStroke()){var W=L.points;if(W.length<2)return!1;var F=L.lineWidth;return l.polyline(W,F,P,A)}return!1},_=function(P,A){var O=this,L=O.hasFill(),W=O.hasStroke();function F(){var K=O._attrs,V=K.x,k=K.y,Z=K.width,X=K.height,it=K.radius,ft=O.getHitLineWidth();if(it===0){var pt=ft/2;return l.line(V-pt,k,V+Z+pt,k,ft,P,A)||l.line(V+Z,k-pt,V+Z,k+X+pt,ft,P,A)||l.line(V+Z+pt,k+X,V-pt,k+X,ft,P,A)||l.line(V,k+X+pt,V,k-pt,ft,P,A)}return l.line(V+it,k,V+Z-it,k,ft,P,A)||l.line(V+Z,k+it,V+Z,k+X-it,ft,P,A)||l.line(V+Z-it,k+X,V+it,k+X,ft,P,A)||l.line(V,k+X-it,V,k+it,ft,P,A)||l.arcline(V+Z-it,k+it,it,1.5*Math.PI,2*Math.PI,!1,ft,P,A)||l.arcline(V+Z-it,k+X-it,it,0,.5*Math.PI,!1,ft,P,A)||l.arcline(V+it,k+X-it,it,.5*Math.PI,Math.PI,!1,ft,P,A)||l.arcline(V+it,k+it,it,Math.PI,1.5*Math.PI,!1,ft,P,A)}return L&&W?h(P,A,O)||F():L?h(P,A,O):W?F():!1},M=function(P,A){var O=this,L=O.getBBox();if(O.hasFill()||O.hasStroke())return l.box(L.minX,L.maxX,L.minY,L.maxY,P,A)},x=function(P,A){if(!this._cfg.el)return!1;var O=this._cfg.el.getBBox();return l.box(O.x,O.x+O.width,O.y,O.y+O.height,P,A)},m={arc:n,circle:i,dom:x,ellipse:a,fan:o,image:u,line:f,path:v,marker:y,polygon:b,polyline:g,rect:_,text:M};E.exports={isPointInPath:function(P,A){var O=m[this.type];return O?O.call(this,P,A):!1}}},function(E,T,e){var t=e(1),l=e(77),s=e(103),c=e(199),r=e(453),h=r.interpolate,n=r.interpolateArray,i=function(f){this._animators=[],this._current=0,this._timer=null,this.canvas=f};function a(u,f,v){var b={},y=f.toAttrs,g=f.fromAttrs,_=f.toMatrix;if(!u.get("destroyed")){var M;for(var x in y)if(!t.isEqual(g[x],y[x]))if(x==="path"){var m=y[x],S=g[x];m.length>S.length?(m=l.parsePathString(y[x]),S=l.parsePathString(g[x]),S=l.fillPathByDiff(S,m),S=l.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m):f.pathFormatted||(m=l.parsePathString(y[x]),S=l.parsePathString(g[x]),S=l.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m,f.pathFormatted=!0),b[x]=[];for(var P=0;P<m.length;P++){for(var A=m[P],O=S[P],L=[],W=0;W<A.length;W++)t.isNumber(A[W])&&O&&t.isNumber(O[W])?(M=h(O[W],A[W]),L.push(M(v))):L.push(A[W]);b[x].push(L)}}else M=h(g[x],y[x]),b[x]=M(v);if(_){var F=n(f.fromMatrix,_),K=F(v);u.setMatrix(K)}u.attr(b)}}function o(u,f,v){var b=f.startTime;if(v<b+f.delay||f.isPaused)return!1;var y,g=f.duration,_=f.easing;if(v=v-b-f.delay,f.toAttrs.repeat)y=v%g/g,y=c[_](y);else if(y=v/g,y<1)y=c[_](y);else return u.attr(f.toAttrs),f.toMatrix&&u.setMatrix(f.toMatrix),!0;return a(u,f,y),!1}t.augment(i,{initTimer:function(){var f=this,v=this,b=!1,y,g,_;v._timer=s.timer(function(M){if(v._current=M,f._animators.length>0){for(var x=f._animators.length-1;x>=0;x--){if(y=f._animators[x],y.get("destroyed")){v.removeAnimator(x);continue}if(!y.get("pause").isPaused){g=y.get("animators");for(var m=g.length-1;m>=0;m--)_=g[m],b=o(y,_,M),b&&(g.splice(m,1),b=!1,_.callback&&_.callback())}g.length===0&&v.removeAnimator(x)}f.canvas.draw()}})},addAnimator:function(f){this._animators.push(f)},removeAnimator:function(f){this._animators.splice(f,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(f){f.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),E.exports=i},function(E,T,e){var t=e(1);function l(r){return r[0]===1&&r[1]===0&&r[3]===0&&r[4]===1&&r[6]===0&&r[7]===0}function s(r){return r[1]===0&&r[3]===0&&r[6]===0&&r[7]===0}function c(r,h){l(h)||(s(h)?(r[0]*=h[0],r[4]*=h[4]):t.mat3.multiply(r,r,h))}E.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,n){var i=this._attrs.matrix;return t.mat3.translate(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(h){var n=this._attrs.matrix;return t.mat3.rotate(n,n,h),this.clearTotalMatrix(),this.attr("matrix",n),this},scale:function(h,n){var i=this._attrs.matrix;return t.mat3.scale(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(h){var n=this._attrs.x||this._cfg.attrs.x,i=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-n,-i],["r",h],["t",n,i]])},move:function(h,n){var i=this.get("x")||0,a=this.get("y")||0;return this.translate(h-i,n-a),this.set("x",h),this.set("y",n),this},transform:function(h){var n=this,i=this._attrs.matrix;return t.each(h,function(a){switch(a[0]){case"t":n.translate(a[1],a[2]);break;case"s":n.scale(a[1],a[2]);break;case"r":n.rotate(a[1]);break;case"m":n.attr("matrix",t.mat3.multiply([],i,a[1])),n.clearTotalMatrix();break;default:break}}),n},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,n){var i;return n?i=this._getMatrixByRoot(n):i=this.attr("matrix"),t.vec3.transformMat3(h,h,i),this},_getMatrixByRoot:function(h){var n=this;h=h||n;for(var i=n,a=[];i!==h;)a.unshift(i),i=i.get("parent");a.unshift(i);var o=[1,0,0,0,1,0,0,0,1];return t.each(a,function(u){t.mat3.multiply(o,u.attr("matrix"),o)}),o},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var n=this._cfg.parent;if(n){var i=n.getTotalMatrix();c(h,i)}c(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var n=this.getTotalMatrix();if(s(n))h[0]/=n[0],h[1]/=n[4];else{var i=t.mat3.invert([],n);i&&t.vec3.transformMat3(h,h,i)}return this},resetTransform:function(h){var n=this.attr("matrix");l(n)||h.transform(n[0],n[1],n[3],n[4],n[6],n[7])}}},function(E,T,e){E.exports={painter:e(335)}},function(E,T,e){var t=e(1),l=e(336),s=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],c=function(){function r(n){if(!n)return null;var i=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+i+'"></canvas>');return n.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var h=r.prototype;return h.beforeDraw=function(){var i=this.canvas;this.context&&this.context.clearRect(0,0,i.width,i.height)},h.draw=function(i){var a=this;function o(){a.animateHandler=t.requestAnimationFrame(function(){a.animateHandler=void 0,a.toDraw&&o()}),a.beforeDraw();try{a._drawGroup(i)}catch(u){console.warn("error in draw canvas, detail as:"),console.warn(u),a.toDraw=!1}a.toDraw=!1}a.animateHandler?a.toDraw=!0:o()},h.drawSync=function(i){this.beforeDraw(),this._drawGroup(i)},h._drawGroup=function(i){if(!(i._cfg.removed||i._cfg.destroyed||!i._cfg.visible)){var a=this,o=i._cfg.children,u=null;this.setContext(i);for(var f=0;f<o.length;f++)u=o[f],o[f].isGroup?a._drawGroup(u):a._drawShape(u);this.restoreContext(i)}},h._drawShape=function(i){i._cfg.removed||i._cfg.destroyed||!i._cfg.visible||(this.setContext(i),i.drawInner(this.context),this.restoreContext(i),i._cfg.attrs=i._attrs,i._cfg.hasUpdate=!1)},h.setContext=function(i){var a=this.context,o=i._attrs.clip;a.save(),o&&(o.resetTransform(a),o.createPath(a),a.clip()),this.resetContext(i),i.resetTransform(a)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(i){var a=this.context,o=i._attrs;if(!i.isGroup){for(var u in o)if(s.indexOf(u)>-1){var f=o[u];u==="fillStyle"&&(f=l.parseStyle(f,i,a)),u==="strokeStyle"&&(f=l.parseStyle(f,i,a)),u==="lineDash"&&a.setLineDash?t.isArray(f)?a.setLineDash(f):t.isString(f)&&a.setLineDash(f.split(" ")):a[u]=f}}},r}();E.exports=c},function(E,T,e){var t=e(1),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,i={};function a(v,b){var y=v.match(n);t.each(y,function(g){g=g.split(":"),b.addColorStop(g[0],g[1])})}function o(v,b,y){var g=c.exec(v),_=t.mod(t.toRadian(parseFloat(g[1])),Math.PI*2),M=g[2],x=b.getBBox(),m,S;_>=0&&_<.5*Math.PI?(m={x:x.minX,y:x.minY},S={x:x.maxX,y:x.maxY}):.5*Math.PI<=_&&_<Math.PI?(m={x:x.maxX,y:x.minY},S={x:x.minX,y:x.maxY}):Math.PI<=_&&_<1.5*Math.PI?(m={x:x.maxX,y:x.maxY},S={x:x.minX,y:x.minY}):(m={x:x.minX,y:x.maxY},S={x:x.maxX,y:x.minY});var P=Math.tan(_),A=P*P,O=(S.x-m.x+P*(S.y-m.y))/(A+1)+m.x,L=P*(S.x-m.x+P*(S.y-m.y))/(A+1)+m.y,W=y.createLinearGradient(m.x,m.y,O,L);return a(M,W),W}function u(v,b,y){var g=r.exec(v),_=parseFloat(g[1]),M=parseFloat(g[2]),x=parseFloat(g[3]),m=g[4];if(x===0){var S=m.match(n);return S[S.length-1].split(":")[1]}var P=b.getBBox(),A=P.maxX-P.minX,O=P.maxY-P.minY,L=Math.sqrt(A*A+O*O)/2,W=y.createRadialGradient(P.minX+A*_,P.minY+O*M,x*L,P.minX+A/2,P.minY+O/2,L);return a(m,W),W}function f(v,b,y){if(b.get("patternSource")&&b.get("patternSource")===v)return b.get("pattern");var g,_,M=h.exec(v),x=M[1],m=M[2];function S(){g=y.createPattern(_,x),b.setSilent("pattern",g),b.setSilent("patternSource",v)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return _=new Image,m.match(/^data:/i)||(_.crossOrigin="Anonymous"),_.src=m,_.complete?S():(_.onload=S,_.src=_.src),g}E.exports={parsePath:function(b){if(b=b||[],t.isArray(b))return b;if(t.isString(b))return b=b.match(l),t.each(b,function(y,g){if(y=y.match(s),y[0].length>1){var _=y[0].charAt(0);y.splice(1,0,y[0].substr(1)),y[0]=_}t.each(y,function(M,x){isNaN(M)||(y[x]=+M)}),b[g]=y}),b},parseStyle:function(b,y,g){if(t.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return o(b,y,g);if(b[0]==="r")return u(b,y,g);if(b[0]==="p")return f(b,y,g)}return b}},numberToColor:function(b){var y=i[b];if(!y){for(var g=b.toString(16),_=g.length;_<6;_++)g="0"+g;y="#"+g,i[b]=y}return y}}},function(E,T,e){E.exports={canvas:e(334),svg:e(345)}},function(E,T,e){var t=e(1),l=e(341),s=e(343),c=e(339),r=e(340),h=e(342),n=function(){function i(o){var u=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=t.uniqueId("defs_");u.id=f,o.appendChild(u),this.children=[],this.defaultArrow={},this.el=u,this.canvas=o}var a=i.prototype;return a.find=function(u,f){for(var v=this.children,b=null,y=0;y<v.length;y++)if(v[y].match(u,f)){b=v[y].id;break}return b},a.findById=function(u){for(var f=this.children,v=null,b=0;b<f.length;b++)if(f[b].id===u){v=f[b];break}return v},a.add=function(u){this.children.push(u),u.canvas=this.canvas,u.parent=this},a.getDefaultArrow=function(u,f){var v=u.stroke||u.strokeStyle;if(this.defaultArrow[v])return this.defaultArrow[v].id;var b=new c(u,f);return this.defaultArrow[v]=b,this.el.appendChild(b.el),b.id},a.addGradient=function(u){var f=new l(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addArrow=function(u,f){var v=new c(u,f);return this.el.appendChild(v.el),v.id},a.addShadow=function(u){var f=new s(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addPattern=function(u){var f=new h(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addClip=function(u){var f=new r(u);return this.el.appendChild(f.el),this.add(f),f.id},i}();E.exports=n},function(E,T,e){var t=e(1),l=function(){function s(r,h){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=t.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",r.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=r[h==="marker-start"?"startArrow":"endArrow"],this.stroke=r.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,a):this._setMarker(r.lineWidth,a),this}var c=s.prototype;return c.match=function(){return!1},c._setDefaultPath=function(h,n){var i=this.el;n.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),i.setAttribute("refX",3),i.setAttribute("refY",3)},c._setMarker=function(h,n){var i=this.el,a=this.cfg.path,o=this.cfg.d;t.isArray(a)&&(a=a.map(function(u){return u.join(" ")}).join("")),n.setAttribute("d",a),i.appendChild(n),o&&i.setAttribute("refX",o/h)},c.update=function(h){var n=this.child;n.attr?n.attr("fill",h):n.setAttribute("fill",h)},s}();E.exports=l},function(E,T,e){var t=e(1),l=function(){function s(r){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=t.uniqueId("clip_"),h.id=this.id;var n=r._cfg.el;return h.appendChild(n.cloneNode(!0)),this.cfg=r,this}var c=s.prototype;return c.match=function(){return!1},c.remove=function(){var h=this.el;h.parentNode.removeChild(h)},s}();E.exports=l},function(E,T,e){var t=e(1),l=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(a){var o=a.match(c);if(!o)return"";var u="";return o.sort(function(f,v){return f=f.split(":"),v=v.split(":"),Number(f[0])-Number(v[0])}),t.each(o,function(f){f=f.split(":"),u+='<stop offset="'+f[0]+'" stop-color="'+f[1]+'"></stop>'}),u}function h(a,o){var u=l.exec(a),f=t.mod(t.toRadian(parseFloat(u[1])),Math.PI*2),v=u[2],b,y;f>=0&&f<.5*Math.PI?(b={x:0,y:0},y={x:1,y:1}):.5*Math.PI<=f&&f<Math.PI?(b={x:1,y:0},y={x:0,y:1}):Math.PI<=f&&f<1.5*Math.PI?(b={x:1,y:1},y={x:0,y:0}):(b={x:0,y:1},y={x:1,y:0});var g=Math.tan(f),_=g*g,M=(y.x-b.x+g*(y.y-b.y))/(_+1)+b.x,x=g*(y.x-b.x+g*(y.y-b.y))/(_+1)+b.y;o.setAttribute("x1",b.x),o.setAttribute("y1",b.y),o.setAttribute("x2",M),o.setAttribute("y2",x),o.innerHTML=r(v)}function n(a,o){var u=s.exec(a),f=parseFloat(u[1]),v=parseFloat(u[2]),b=parseFloat(u[3]),y=u[4];o.setAttribute("cx",f),o.setAttribute("cy",v),o.setAttribute("r",b),o.innerHTML=r(y)}var i=function(){function a(u){var f=null,v=t.uniqueId("gradient_");return u.toLowerCase()[0]==="l"?(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(u,f)):(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),n(u,f)),f.setAttribute("id",v),this.el=f,this.id=v,this.cfg=u,this}var o=a.prototype;return o.match=function(f,v){return this.cfg===v},a}();E.exports=i},function(E,T,e){var t=e(1),l=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=function(){function c(h){var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var i=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(i);var a=t.uniqueId("pattern_");n.id=a,this.el=n,this.id=a,this.cfg=h;var o=l.exec(h),u=o[2];i.setAttribute("href",u);var f=new Image;u.match(/^data:/i)||(f.crossOrigin="Anonymous"),f.src=u;function v(){console.log(f.width,f.height),n.setAttribute("width",f.width),n.setAttribute("height",f.height)}return f.complete?v():(f.onload=v,f.src=f.src),this}var r=c.prototype;return r.match=function(n,i){return this.cfg===i},c}();E.exports=s},function(E,T,e){var t=e(1),l={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},s={x:"-40%",y:"-40%",width:"200%",height:"200%"},c=function(){function r(n){this.type="filter";var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(s,function(a,o){i.setAttribute(o,a)}),this.el=i,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,i),this}var h=r.prototype;return h.match=function(i,a){if(this.type!==i)return!1;var o=!0,u=this.cfg;return t.each(Object.keys(u),function(f){if(u[f]!==a[f])return o=!1,!1}),o},h.update=function(i,a){var o=this.cfg;return o[l[i]]=a,this._parseShadow(o,this.el),this},h._parseShadow=function(i,a){var o=`<feDropShadow 
      dx="`+(i.dx||0)+`" 
      dy="`+(i.dy||0)+`" 
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;a.innerHTML=o},r}();E.exports=c},function(E,T){var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};E.exports=function(l,s,c){var r=c.target||c.srcElement;if(!e[r.tagName]){for(var h=r.parentNode;h&&!e[h.tagName];)h=h.parentNode;r=h}return this._cfg.el===r?this:this.find(function(n){return n._cfg&&n._cfg.el===r})}},function(E,T,e){E.exports={painter:e(346),getShape:e(344)}},function(E,T,e){var t=e(1),l=e(37),s=l.parseRadius,c=e(74),r=e(338),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,i={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},a={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o={left:"left",start:"left",center:"middle",right:"end",end:"end"},u=function(){function f(b){if(!b)return null;var y=t.uniqueId("canvas_"),g=t.createDom('<svg id="'+y+'"></svg>');return b.appendChild(g),this.type="svg",this.canvas=g,this.context=new r(g),this.toDraw=!1,this}var v=f.prototype;return v.draw=function(y){var g=this;function _(){g.animateHandler=t.requestAnimationFrame(function(){g.animateHandler=void 0,g.toDraw&&_()});try{y.resetMatrix(),g._drawGroup(y,!1)}catch(M){console.warn("error in draw canvas, detail as:"),console.warn(M),g.toDraw=!1}g.toDraw=!1}g.animateHandler?g.toDraw=!0:_()},v.drawSync=function(y){this._drawChildren(y,!1)},v._drawGroup=function(y,g){var _=y._cfg;_.removed||_.destroyed||(!_.el&&_.attrs&&(g=!0),_.tobeRemoved&&(t.each(_.tobeRemoved,function(M){M.parentNode&&M.parentNode.removeChild(M)}),_.tobeRemoved=[]),this._drawShape(y,g),_.children&&_.children.length>0&&this._drawChildren(y,g))},v._drawChildren=function(y,g){var _=this,M=y._cfg.children,x;if(!!M){if(y._cfg.el&&!g){var m=y._cfg.el.childNodes.length+1;m!==0&&m!==M.length&&(g=!0)}for(var S=0;S<M.length;S++)x=M[S],x.isGroup?_._drawGroup(x,g):_._drawShape(x,g)}},v._drawShape=function(y,g){var _=this,M=y._attrs,x=y._cfg,m=x.el;if(x.removed||x.destroyed){m&&m.parentNode.removeChild(x.el);return}if(g&&m&&(m.parentNode&&m.parentNode.removeChild(m),m=null),!m&&x.parent&&(_._createDom(y),_._updateShape(y)),m=x.el,x.visible===!1){m.setAttribute("visibility","hidden");return}x.visible&&m.hasAttribute("visibility")&&m.removeAttribute("visibility"),x.hasUpdate&&_._updateShape(y),M.clip&&M.clip._cfg.hasUpdate&&_._updateShape(M.clip)},v._updateShape=function(y){var g=this,_=y._attrs,M=y._cfg.attrs;if(!!M){if(y._cfg.el||g._createDom(y),"clip"in _&&this._setClip(y,_.clip),("shadowOffsetX"in _||"shadowOffsetY"in _||"shadowBlur"in _||"shadowColor"in _)&&this._setShadow(y),y.type==="text"){g._updateText(y);return}y.type==="fan"&&g._updateFan(y),y.type==="marker"&&y._cfg.el.setAttribute("d",g._assembleMarker(_)),y.type==="rect"&&y._cfg.el.setAttribute("d",g._assembleRect(_));for(var x in _)_[x]!==M[x]&&g._setAttribute(y,x,_[x]);y._cfg.attrs=t.deepMix({},y._attrs),y._cfg.hasUpdate=!1}},v._setAttribute=function(y,g,_){var M=y.type,x=y._attrs,m=y._cfg.el,S=this.context;if(!((M==="marker"||M==="rect")&&~["x","y","radius","r"].indexOf(g))){if(~["circle","ellipse"].indexOf(M)&&~["x","y"].indexOf(g)){m.setAttribute("c"+g,parseInt(_,10));return}if(M==="polygon"&&g==="points"){(!_||_.length===0)&&(_=""),t.isArray(_)&&(_=_.map(function(A){return A[0]+","+A[1]}),_=_.join(" ")),m.setAttribute("points",_);return}if(g==="path"&&t.isArray(_)){m.setAttribute("d",this._formatPath(_));return}if(g==="img"){this._setImage(y,_);return}if(g==="transform"){if(!_){m.removeAttribute("transform");return}this._setTransform(y);return}if(g==="rotate"){if(!_){m.removeAttribute("transform");return}this._setTransform(y);return}if(g==="matrix"){this._setTransform(y);return}if(g==="fillStyle"||g==="strokeStyle"){this._setColor(y,g,_);return}if(g!=="clip"){if(~g.indexOf("Arrow")){if(g=i[g],!_)y._cfg[g]=null,m.removeAttribute(g);else{var P=null;typeof _=="boolean"?P=S.getDefaultArrow(x,g):P=S.addArrow(x,g),m.setAttribute(g,"url(#"+P+")"),y._cfg[g]=P}return}g==="html"&&(typeof _=="string"?m.innerHTML=_:(m.innerHTML="",m.appendChild(_))),i[g]&&m.setAttribute(i[g],_)}}},v._createDom=function(y){var g=h[y.type],_=y._attrs;if(!g)throw new Error("the type"+y.type+"is not supported by svg");var M=document.createElementNS("http://www.w3.org/2000/svg",g);return y._cfg.el=M,y._cfg.parent&&y._cfg.parent.get("el").appendChild(M),y._cfg.attrs={},y.type==="text"?(M.setAttribute("paint-order","stroke"),M.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!_.stroke&&!_.strokeStyle&&M.setAttribute("stroke","none"),!_.fill&&!_.fillStyle&&M.setAttribute("fill","none")),M},v._assembleMarker=function(y){var g=y.r;if(typeof y.r=="undefined"&&(g=y.radius),isNaN(Number(y.x))||isNaN(Number(y.y))||isNaN(Number(g)))return"";var _="";return typeof y.symbol=="function"?_=y.symbol(y.x,y.y,g):_=c.Symbols[y.symbol||"circle"](y.x,y.y,g),t.isArray(_)&&(_=_.map(function(M){return M.join(" ")}).join("")),_},v._assembleRect=function(y){var g=y.x,_=y.y,M=y.width,x=y.height,m=y.radius;if(!m)return"M "+g+","+_+" l "+M+",0 l 0,"+x+" l"+-M+" 0 z";var S=s(m);t.isArray(m)?m.length===1?S.r1=S.r2=S.r3=S.r4=m[0]:m.length===2?(S.r1=S.r3=m[0],S.r2=S.r4=m[1]):m.length===3?(S.r1=m[0],S.r2=S.r4=m[1],S.r3=m[2]):(S.r1=m[0],S.r2=m[1],S.r3=m[2],S.r4=m[3]):S.r1=S.r2=S.r3=S.r4=m;var P=[["M "+(g+S.r1)+","+_],["l "+(M-S.r1-S.r2)+",0"],["a "+S.r2+","+S.r2+",0,0,1,"+S.r2+","+S.r2],["l 0,"+(x-S.r2-S.r3)],["a "+S.r3+","+S.r3+",0,0,1,"+-S.r3+","+S.r3],["l "+(S.r3+S.r4-M)+",0"],["a "+S.r4+","+S.r4+",0,0,1,"+-S.r4+","+-S.r4],["l 0,"+(S.r4+S.r1-x)],["a "+S.r1+","+S.r1+",0,0,1,"+S.r1+","+-S.r1],["z"]];return P.join(" ")},v._formatPath=function(y){return y=y.map(function(g){return g.join(" ")}).join(""),~y.indexOf("NaN")?"":y},v._setTransform=function(y){for(var g=y._attrs.matrix,_=y._cfg.el,M=[],x=0;x<9;x+=3)M.push(g[x]+","+g[x+1]);M=M.join(","),M.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+M+")"):console.warn("invalid matrix:",g)},v._setImage=function(y,g){var _=y._attrs,M=y._cfg.el;if(t.isString(g))M.setAttribute("href",g);else if(g instanceof Image)_.width||(M.setAttribute("width",g.width),y._attrs.width=g.width),_.height||(M.setAttribute("height",g.height),y._attrs.height=g.height),M.setAttribute("href",g.src);else if(g instanceof HTMLElement&&t.isString(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")M.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var x=document.createElement("canvas");x.setAttribute("width",g.width),x.setAttribute("height",g.height),x.getContext("2d").putImageData(g,0,0),_.width||(M.setAttribute("width",g.width),y._attrs.width=g.width),_.height||(M.setAttribute("height",g.height),y._attrs.height=g.height),M.setAttribute("href",x.toDataURL())}},v._updateFan=function(y){function g(Z,X,it){return{x:X*Math.cos(Z)+it.x,y:X*Math.sin(Z)+it.y}}var _=y._attrs,M=y._cfg,x={x:_.x,y:_.y},m=[],S=_.startAngle,P=_.endAngle;t.isNumberEqual(P-S,Math.PI*2)&&(P-=1e-5);var A=g(S,_.re,x),O=g(P,_.re,x),L=P>S?1:0,W=Math.abs(P-S)>Math.PI?1:0,F=_.rs,K=_.re,V=g(S,_.rs,x),k=g(P,_.rs,x);_.rs>0?(m.push("M "+O.x+","+O.y),m.push("L "+k.x+","+k.y),m.push("A "+F+","+F+",0,"+W+","+(L===1?0:1)+","+V.x+","+V.y),m.push("L "+A.x+" "+A.y)):(m.push("M "+x.x+","+x.y),m.push("L "+A.x+","+A.y)),m.push("A "+K+","+K+",0,"+W+","+L+","+O.x+","+O.y),_.rs>0?m.push("L "+k.x+","+k.y):m.push("Z"),M.el.setAttribute("d",m.join(" "))},v._updateText=function(y){var g=this,_=y._attrs,M=y._cfg.attrs,x=y._cfg.el;this._setFont(y);for(var m in _)if(_[m]!==M[m]){if(m==="text"){g._setText(y,""+_[m]);continue}if(m==="fillStyle"||m==="strokeStyle"){this._setColor(y,m,_[m]);continue}if(m==="matrix"){this._setTransform(y);continue}i[m]&&x.setAttribute(i[m],_[m])}y._cfg.attrs=Object.assign({},y._attrs),y._cfg.hasUpdate=!1},v._setFont=function(y){var g=y.get("el"),_=y._attrs,M=_.fontSize;g.setAttribute("alignment-baseline",a[_.textBaseline]||"baseline"),g.setAttribute("text-anchor",o[_.textAlign]||"left"),M&&+M<12&&(_.matrix=[1,0,0,0,1,0,0,0,1],y.transform([["t",-_.x,-_.y],["s",+M/12,+M/12],["t",_.x,_.y]]))},v._setText=function(y,g){var _=y._cfg.el,M=y._attrs.textBaseline||"bottom";if(!g)_.innerHTML="";else if(~g.indexOf(`
`)){var x=y._attrs.x,m=g.split(`
`),S=m.length-1,P="";t.each(m,function(A,O){O===0?M==="alphabetic"?P+='<tspan x="'+x+'" dy="'+-S+'em">'+A+"</tspan>":M==="top"?P+='<tspan x="'+x+'" dy="0.9em">'+A+"</tspan>":M==="middle"?P+='<tspan x="'+x+'" dy="'+-(S-1)/2+'em">'+A+"</tspan>":M==="bottom"?P+='<tspan x="'+x+'" dy="-'+(S+n)+'em">'+A+"</tspan>":M==="hanging"&&(P+='<tspan x="'+x+'" dy="'+(-(S-1)-n)+'em">'+A+"</tspan>"):P+='<tspan x="'+x+'" dy="1em">'+A+"</tspan>"}),_.innerHTML=P}else _.innerHTML=g},v._setClip=function(y,g){var _=y._cfg.el;if(!g){_.removeAttribute("clip-path");return}if(_.hasAttribute("clip-path"))g._cfg.hasUpdate&&this._updateShape(g);else{this._createDom(g),this._updateShape(g);var M=this.context.addClip(g);_.setAttribute("clip-path","url(#"+M+")")}},v._setColor=function(y,g,_){var M=y._cfg.el,x=this.context;if(!_){M.setAttribute(i[g],"none");return}if(_=_.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(_)){var m=x.find("gradient",_);m||(m=x.addGradient(_)),M.setAttribute(i[g],"url(#"+m+")")}else if(/^[p,P]{1}[\s]*\(/.test(_)){var S=x.find("pattern",_);S||(S=x.addPattern(_)),M.setAttribute(i[g],"url(#"+S+")")}else M.setAttribute(i[g],_)},v._setShadow=function(y){var g=y._cfg.el,_=y._attrs,M={dx:_.shadowOffsetX,dy:_.shadowOffsetY,blur:_.shadowBlur,color:_.shadowColor};if(!M.dx&&!M.dy&&!M.blur&&!M.color)g.removeAttribute("filter");else{var x=this.context.find("filter",M);x||(x=this.context.addShadow(M,this)),g.setAttribute("filter","url(#"+x+")")}},f}();E.exports=u},function(E,T,e){var t=e(7);t.Arc=e(136),t.Circle=e(137),t.Dom=e(138),t.Ellipse=e(139),t.Fan=e(140),t.Image=e(141),t.Line=e(142),t.Marker=e(74),t.Path=e(145),t.Polygon=e(146),t.Polyline=e(147),t.Rect=e(148),t.Text=e(149),E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=c,T.fromMat4=r,T.clone=h,T.copy=n,T.fromValues=i,T.set=a,T.identity=o,T.transpose=u,T.invert=f,T.adjoint=v,T.determinant=b,T.multiply=y,T.translate=g,T.rotate=_,T.scale=M,T.fromTranslation=x,T.fromRotation=m,T.fromScaling=S,T.fromMat2d=P,T.fromQuat=A,T.normalFromMat4=O,T.projection=L,T.str=W,T.frob=F,T.add=K,T.subtract=V,T.multiplyScalar=k,T.multiplyScalarAndAdd=Z,T.exactEquals=X,T.equals=it;var t=e(78),l=s(t);function s(ut){if(ut&&ut.__esModule)return ut;var It={};if(ut!=null)for(var Nt in ut)Object.prototype.hasOwnProperty.call(ut,Nt)&&(It[Nt]=ut[Nt]);return It.default=ut,It}function c(){var ut=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(ut[1]=0,ut[2]=0,ut[3]=0,ut[5]=0,ut[6]=0,ut[7]=0),ut[0]=1,ut[4]=1,ut[8]=1,ut}function r(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=It[2],ut[3]=It[4],ut[4]=It[5],ut[5]=It[6],ut[6]=It[8],ut[7]=It[9],ut[8]=It[10],ut}function h(ut){var It=new l.ARRAY_TYPE(9);return It[0]=ut[0],It[1]=ut[1],It[2]=ut[2],It[3]=ut[3],It[4]=ut[4],It[5]=ut[5],It[6]=ut[6],It[7]=ut[7],It[8]=ut[8],It}function n(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=It[2],ut[3]=It[3],ut[4]=It[4],ut[5]=It[5],ut[6]=It[6],ut[7]=It[7],ut[8]=It[8],ut}function i(ut,It,Nt,Rt,Mt,bt,At,rt,Pt){var z=new l.ARRAY_TYPE(9);return z[0]=ut,z[1]=It,z[2]=Nt,z[3]=Rt,z[4]=Mt,z[5]=bt,z[6]=At,z[7]=rt,z[8]=Pt,z}function a(ut,It,Nt,Rt,Mt,bt,At,rt,Pt,z){return ut[0]=It,ut[1]=Nt,ut[2]=Rt,ut[3]=Mt,ut[4]=bt,ut[5]=At,ut[6]=rt,ut[7]=Pt,ut[8]=z,ut}function o(ut){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function u(ut,It){if(ut===It){var Nt=It[1],Rt=It[2],Mt=It[5];ut[1]=It[3],ut[2]=It[6],ut[3]=Nt,ut[5]=It[7],ut[6]=Rt,ut[7]=Mt}else ut[0]=It[0],ut[1]=It[3],ut[2]=It[6],ut[3]=It[1],ut[4]=It[4],ut[5]=It[7],ut[6]=It[2],ut[7]=It[5],ut[8]=It[8];return ut}function f(ut,It){var Nt=It[0],Rt=It[1],Mt=It[2],bt=It[3],At=It[4],rt=It[5],Pt=It[6],z=It[7],Q=It[8],gt=Q*At-rt*z,et=-Q*bt+rt*Pt,ot=z*bt-At*Pt,xt=Nt*gt+Rt*et+Mt*ot;return xt?(xt=1/xt,ut[0]=gt*xt,ut[1]=(-Q*Rt+Mt*z)*xt,ut[2]=(rt*Rt-Mt*At)*xt,ut[3]=et*xt,ut[4]=(Q*Nt-Mt*Pt)*xt,ut[5]=(-rt*Nt+Mt*bt)*xt,ut[6]=ot*xt,ut[7]=(-z*Nt+Rt*Pt)*xt,ut[8]=(At*Nt-Rt*bt)*xt,ut):null}function v(ut,It){var Nt=It[0],Rt=It[1],Mt=It[2],bt=It[3],At=It[4],rt=It[5],Pt=It[6],z=It[7],Q=It[8];return ut[0]=At*Q-rt*z,ut[1]=Mt*z-Rt*Q,ut[2]=Rt*rt-Mt*At,ut[3]=rt*Pt-bt*Q,ut[4]=Nt*Q-Mt*Pt,ut[5]=Mt*bt-Nt*rt,ut[6]=bt*z-At*Pt,ut[7]=Rt*Pt-Nt*z,ut[8]=Nt*At-Rt*bt,ut}function b(ut){var It=ut[0],Nt=ut[1],Rt=ut[2],Mt=ut[3],bt=ut[4],At=ut[5],rt=ut[6],Pt=ut[7],z=ut[8];return It*(z*bt-At*Pt)+Nt*(-z*Mt+At*rt)+Rt*(Pt*Mt-bt*rt)}function y(ut,It,Nt){var Rt=It[0],Mt=It[1],bt=It[2],At=It[3],rt=It[4],Pt=It[5],z=It[6],Q=It[7],gt=It[8],et=Nt[0],ot=Nt[1],xt=Nt[2],H=Nt[3],nt=Nt[4],at=Nt[5],q=Nt[6],_t=Nt[7],yt=Nt[8];return ut[0]=et*Rt+ot*At+xt*z,ut[1]=et*Mt+ot*rt+xt*Q,ut[2]=et*bt+ot*Pt+xt*gt,ut[3]=H*Rt+nt*At+at*z,ut[4]=H*Mt+nt*rt+at*Q,ut[5]=H*bt+nt*Pt+at*gt,ut[6]=q*Rt+_t*At+yt*z,ut[7]=q*Mt+_t*rt+yt*Q,ut[8]=q*bt+_t*Pt+yt*gt,ut}function g(ut,It,Nt){var Rt=It[0],Mt=It[1],bt=It[2],At=It[3],rt=It[4],Pt=It[5],z=It[6],Q=It[7],gt=It[8],et=Nt[0],ot=Nt[1];return ut[0]=Rt,ut[1]=Mt,ut[2]=bt,ut[3]=At,ut[4]=rt,ut[5]=Pt,ut[6]=et*Rt+ot*At+z,ut[7]=et*Mt+ot*rt+Q,ut[8]=et*bt+ot*Pt+gt,ut}function _(ut,It,Nt){var Rt=It[0],Mt=It[1],bt=It[2],At=It[3],rt=It[4],Pt=It[5],z=It[6],Q=It[7],gt=It[8],et=Math.sin(Nt),ot=Math.cos(Nt);return ut[0]=ot*Rt+et*At,ut[1]=ot*Mt+et*rt,ut[2]=ot*bt+et*Pt,ut[3]=ot*At-et*Rt,ut[4]=ot*rt-et*Mt,ut[5]=ot*Pt-et*bt,ut[6]=z,ut[7]=Q,ut[8]=gt,ut}function M(ut,It,Nt){var Rt=Nt[0],Mt=Nt[1];return ut[0]=Rt*It[0],ut[1]=Rt*It[1],ut[2]=Rt*It[2],ut[3]=Mt*It[3],ut[4]=Mt*It[4],ut[5]=Mt*It[5],ut[6]=It[6],ut[7]=It[7],ut[8]=It[8],ut}function x(ut,It){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=It[0],ut[7]=It[1],ut[8]=1,ut}function m(ut,It){var Nt=Math.sin(It),Rt=Math.cos(It);return ut[0]=Rt,ut[1]=Nt,ut[2]=0,ut[3]=-Nt,ut[4]=Rt,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function S(ut,It){return ut[0]=It[0],ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=It[1],ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function P(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=0,ut[3]=It[2],ut[4]=It[3],ut[5]=0,ut[6]=It[4],ut[7]=It[5],ut[8]=1,ut}function A(ut,It){var Nt=It[0],Rt=It[1],Mt=It[2],bt=It[3],At=Nt+Nt,rt=Rt+Rt,Pt=Mt+Mt,z=Nt*At,Q=Rt*At,gt=Rt*rt,et=Mt*At,ot=Mt*rt,xt=Mt*Pt,H=bt*At,nt=bt*rt,at=bt*Pt;return ut[0]=1-gt-xt,ut[3]=Q-at,ut[6]=et+nt,ut[1]=Q+at,ut[4]=1-z-xt,ut[7]=ot-H,ut[2]=et-nt,ut[5]=ot+H,ut[8]=1-z-gt,ut}function O(ut,It){var Nt=It[0],Rt=It[1],Mt=It[2],bt=It[3],At=It[4],rt=It[5],Pt=It[6],z=It[7],Q=It[8],gt=It[9],et=It[10],ot=It[11],xt=It[12],H=It[13],nt=It[14],at=It[15],q=Nt*rt-Rt*At,_t=Nt*Pt-Mt*At,yt=Nt*z-bt*At,Ft=Rt*Pt-Mt*rt,Qt=Rt*z-bt*rt,ee=Mt*z-bt*Pt,Vt=Q*H-gt*xt,$t=Q*nt-et*xt,Me=Q*at-ot*xt,me=gt*nt-et*H,le=gt*at-ot*H,be=et*at-ot*nt,ze=q*be-_t*le+yt*me+Ft*Me-Qt*$t+ee*Vt;return ze?(ze=1/ze,ut[0]=(rt*be-Pt*le+z*me)*ze,ut[1]=(Pt*Me-At*be-z*$t)*ze,ut[2]=(At*le-rt*Me+z*Vt)*ze,ut[3]=(Mt*le-Rt*be-bt*me)*ze,ut[4]=(Nt*be-Mt*Me+bt*$t)*ze,ut[5]=(Rt*Me-Nt*le-bt*Vt)*ze,ut[6]=(H*ee-nt*Qt+at*Ft)*ze,ut[7]=(nt*yt-xt*ee-at*_t)*ze,ut[8]=(xt*Qt-H*yt+at*q)*ze,ut):null}function L(ut,It,Nt){return ut[0]=2/It,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=-2/Nt,ut[5]=0,ut[6]=-1,ut[7]=1,ut[8]=1,ut}function W(ut){return"mat3("+ut[0]+", "+ut[1]+", "+ut[2]+", "+ut[3]+", "+ut[4]+", "+ut[5]+", "+ut[6]+", "+ut[7]+", "+ut[8]+")"}function F(ut){return Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)+Math.pow(ut[3],2)+Math.pow(ut[4],2)+Math.pow(ut[5],2)+Math.pow(ut[6],2)+Math.pow(ut[7],2)+Math.pow(ut[8],2))}function K(ut,It,Nt){return ut[0]=It[0]+Nt[0],ut[1]=It[1]+Nt[1],ut[2]=It[2]+Nt[2],ut[3]=It[3]+Nt[3],ut[4]=It[4]+Nt[4],ut[5]=It[5]+Nt[5],ut[6]=It[6]+Nt[6],ut[7]=It[7]+Nt[7],ut[8]=It[8]+Nt[8],ut}function V(ut,It,Nt){return ut[0]=It[0]-Nt[0],ut[1]=It[1]-Nt[1],ut[2]=It[2]-Nt[2],ut[3]=It[3]-Nt[3],ut[4]=It[4]-Nt[4],ut[5]=It[5]-Nt[5],ut[6]=It[6]-Nt[6],ut[7]=It[7]-Nt[7],ut[8]=It[8]-Nt[8],ut}function k(ut,It,Nt){return ut[0]=It[0]*Nt,ut[1]=It[1]*Nt,ut[2]=It[2]*Nt,ut[3]=It[3]*Nt,ut[4]=It[4]*Nt,ut[5]=It[5]*Nt,ut[6]=It[6]*Nt,ut[7]=It[7]*Nt,ut[8]=It[8]*Nt,ut}function Z(ut,It,Nt,Rt){return ut[0]=It[0]+Nt[0]*Rt,ut[1]=It[1]+Nt[1]*Rt,ut[2]=It[2]+Nt[2]*Rt,ut[3]=It[3]+Nt[3]*Rt,ut[4]=It[4]+Nt[4]*Rt,ut[5]=It[5]+Nt[5]*Rt,ut[6]=It[6]+Nt[6]*Rt,ut[7]=It[7]+Nt[7]*Rt,ut[8]=It[8]+Nt[8]*Rt,ut}function X(ut,It){return ut[0]===It[0]&&ut[1]===It[1]&&ut[2]===It[2]&&ut[3]===It[3]&&ut[4]===It[4]&&ut[5]===It[5]&&ut[6]===It[6]&&ut[7]===It[7]&&ut[8]===It[8]}function it(ut,It){var Nt=ut[0],Rt=ut[1],Mt=ut[2],bt=ut[3],At=ut[4],rt=ut[5],Pt=ut[6],z=ut[7],Q=ut[8],gt=It[0],et=It[1],ot=It[2],xt=It[3],H=It[4],nt=It[5],at=It[6],q=It[7],_t=It[8];return Math.abs(Nt-gt)<=l.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(gt))&&Math.abs(Rt-et)<=l.EPSILON*Math.max(1,Math.abs(Rt),Math.abs(et))&&Math.abs(Mt-ot)<=l.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(ot))&&Math.abs(bt-xt)<=l.EPSILON*Math.max(1,Math.abs(bt),Math.abs(xt))&&Math.abs(At-H)<=l.EPSILON*Math.max(1,Math.abs(At),Math.abs(H))&&Math.abs(rt-nt)<=l.EPSILON*Math.max(1,Math.abs(rt),Math.abs(nt))&&Math.abs(Pt-at)<=l.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(at))&&Math.abs(z-q)<=l.EPSILON*Math.max(1,Math.abs(z),Math.abs(q))&&Math.abs(Q-_t)<=l.EPSILON*Math.max(1,Math.abs(Q),Math.abs(_t))}var ft=T.mul=y,pt=T.sub=V},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=c,T.clone=r,T.fromValues=h,T.copy=n,T.set=i,T.add=a,T.subtract=o,T.multiply=u,T.divide=f,T.ceil=v,T.floor=b,T.min=y,T.max=g,T.round=_,T.scale=M,T.scaleAndAdd=x,T.distance=m,T.squaredDistance=S,T.length=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=W,T.dot=F,T.cross=K,T.lerp=V,T.random=k,T.transformMat2=Z,T.transformMat2d=X,T.transformMat3=it,T.transformMat4=ft,T.rotate=pt,T.angle=ut,T.str=It,T.exactEquals=Nt,T.equals=Rt;var t=e(78),l=s(t);function s(et){if(et&&et.__esModule)return et;var ot={};if(et!=null)for(var xt in et)Object.prototype.hasOwnProperty.call(et,xt)&&(ot[xt]=et[xt]);return ot.default=et,ot}function c(){var et=new l.ARRAY_TYPE(2);return l.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0),et}function r(et){var ot=new l.ARRAY_TYPE(2);return ot[0]=et[0],ot[1]=et[1],ot}function h(et,ot){var xt=new l.ARRAY_TYPE(2);return xt[0]=et,xt[1]=ot,xt}function n(et,ot){return et[0]=ot[0],et[1]=ot[1],et}function i(et,ot,xt){return et[0]=ot,et[1]=xt,et}function a(et,ot,xt){return et[0]=ot[0]+xt[0],et[1]=ot[1]+xt[1],et}function o(et,ot,xt){return et[0]=ot[0]-xt[0],et[1]=ot[1]-xt[1],et}function u(et,ot,xt){return et[0]=ot[0]*xt[0],et[1]=ot[1]*xt[1],et}function f(et,ot,xt){return et[0]=ot[0]/xt[0],et[1]=ot[1]/xt[1],et}function v(et,ot){return et[0]=Math.ceil(ot[0]),et[1]=Math.ceil(ot[1]),et}function b(et,ot){return et[0]=Math.floor(ot[0]),et[1]=Math.floor(ot[1]),et}function y(et,ot,xt){return et[0]=Math.min(ot[0],xt[0]),et[1]=Math.min(ot[1],xt[1]),et}function g(et,ot,xt){return et[0]=Math.max(ot[0],xt[0]),et[1]=Math.max(ot[1],xt[1]),et}function _(et,ot){return et[0]=Math.round(ot[0]),et[1]=Math.round(ot[1]),et}function M(et,ot,xt){return et[0]=ot[0]*xt,et[1]=ot[1]*xt,et}function x(et,ot,xt,H){return et[0]=ot[0]+xt[0]*H,et[1]=ot[1]+xt[1]*H,et}function m(et,ot){var xt=ot[0]-et[0],H=ot[1]-et[1];return Math.sqrt(xt*xt+H*H)}function S(et,ot){var xt=ot[0]-et[0],H=ot[1]-et[1];return xt*xt+H*H}function P(et){var ot=et[0],xt=et[1];return Math.sqrt(ot*ot+xt*xt)}function A(et){var ot=et[0],xt=et[1];return ot*ot+xt*xt}function O(et,ot){return et[0]=-ot[0],et[1]=-ot[1],et}function L(et,ot){return et[0]=1/ot[0],et[1]=1/ot[1],et}function W(et,ot){var xt=ot[0],H=ot[1],nt=xt*xt+H*H;return nt>0&&(nt=1/Math.sqrt(nt),et[0]=ot[0]*nt,et[1]=ot[1]*nt),et}function F(et,ot){return et[0]*ot[0]+et[1]*ot[1]}function K(et,ot,xt){var H=ot[0]*xt[1]-ot[1]*xt[0];return et[0]=et[1]=0,et[2]=H,et}function V(et,ot,xt,H){var nt=ot[0],at=ot[1];return et[0]=nt+H*(xt[0]-nt),et[1]=at+H*(xt[1]-at),et}function k(et,ot){ot=ot||1;var xt=l.RANDOM()*2*Math.PI;return et[0]=Math.cos(xt)*ot,et[1]=Math.sin(xt)*ot,et}function Z(et,ot,xt){var H=ot[0],nt=ot[1];return et[0]=xt[0]*H+xt[2]*nt,et[1]=xt[1]*H+xt[3]*nt,et}function X(et,ot,xt){var H=ot[0],nt=ot[1];return et[0]=xt[0]*H+xt[2]*nt+xt[4],et[1]=xt[1]*H+xt[3]*nt+xt[5],et}function it(et,ot,xt){var H=ot[0],nt=ot[1];return et[0]=xt[0]*H+xt[3]*nt+xt[6],et[1]=xt[1]*H+xt[4]*nt+xt[7],et}function ft(et,ot,xt){var H=ot[0],nt=ot[1];return et[0]=xt[0]*H+xt[4]*nt+xt[12],et[1]=xt[1]*H+xt[5]*nt+xt[13],et}function pt(et,ot,xt,H){var nt=ot[0]-xt[0],at=ot[1]-xt[1],q=Math.sin(H),_t=Math.cos(H);return et[0]=nt*_t-at*q+xt[0],et[1]=nt*q+at*_t+xt[1],et}function ut(et,ot){var xt=et[0],H=et[1],nt=ot[0],at=ot[1],q=xt*xt+H*H;q>0&&(q=1/Math.sqrt(q));var _t=nt*nt+at*at;_t>0&&(_t=1/Math.sqrt(_t));var yt=(xt*nt+H*at)*q*_t;return yt>1?0:yt<-1?Math.PI:Math.acos(yt)}function It(et){return"vec2("+et[0]+", "+et[1]+")"}function Nt(et,ot){return et[0]===ot[0]&&et[1]===ot[1]}function Rt(et,ot){var xt=et[0],H=et[1],nt=ot[0],at=ot[1];return Math.abs(xt-nt)<=l.EPSILON*Math.max(1,Math.abs(xt),Math.abs(nt))&&Math.abs(H-at)<=l.EPSILON*Math.max(1,Math.abs(H),Math.abs(at))}var Mt=T.len=P,bt=T.sub=o,At=T.mul=u,rt=T.div=f,Pt=T.dist=m,z=T.sqrDist=S,Q=T.sqrLen=A,gt=T.forEach=function(){var et=c();return function(ot,xt,H,nt,at,q){var _t=void 0,yt=void 0;for(xt||(xt=2),H||(H=0),nt?yt=Math.min(nt*xt+H,ot.length):yt=ot.length,_t=H;_t<yt;_t+=xt)et[0]=ot[_t],et[1]=ot[_t+1],at(et,et,q),ot[_t]=et[0],ot[_t+1]=et[1];return ot}}()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=c,T.clone=r,T.length=h,T.fromValues=n,T.copy=i,T.set=a,T.add=o,T.subtract=u,T.multiply=f,T.divide=v,T.ceil=b,T.floor=y,T.min=g,T.max=_,T.round=M,T.scale=x,T.scaleAndAdd=m,T.distance=S,T.squaredDistance=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=W,T.dot=F,T.cross=K,T.lerp=V,T.hermite=k,T.bezier=Z,T.random=X,T.transformMat4=it,T.transformMat3=ft,T.transformQuat=pt,T.rotateX=ut,T.rotateY=It,T.rotateZ=Nt,T.angle=Rt,T.str=Mt,T.exactEquals=bt,T.equals=At;var t=e(78),l=s(t);function s(H){if(H&&H.__esModule)return H;var nt={};if(H!=null)for(var at in H)Object.prototype.hasOwnProperty.call(H,at)&&(nt[at]=H[at]);return nt.default=H,nt}function c(){var H=new l.ARRAY_TYPE(3);return l.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0),H}function r(H){var nt=new l.ARRAY_TYPE(3);return nt[0]=H[0],nt[1]=H[1],nt[2]=H[2],nt}function h(H){var nt=H[0],at=H[1],q=H[2];return Math.sqrt(nt*nt+at*at+q*q)}function n(H,nt,at){var q=new l.ARRAY_TYPE(3);return q[0]=H,q[1]=nt,q[2]=at,q}function i(H,nt){return H[0]=nt[0],H[1]=nt[1],H[2]=nt[2],H}function a(H,nt,at,q){return H[0]=nt,H[1]=at,H[2]=q,H}function o(H,nt,at){return H[0]=nt[0]+at[0],H[1]=nt[1]+at[1],H[2]=nt[2]+at[2],H}function u(H,nt,at){return H[0]=nt[0]-at[0],H[1]=nt[1]-at[1],H[2]=nt[2]-at[2],H}function f(H,nt,at){return H[0]=nt[0]*at[0],H[1]=nt[1]*at[1],H[2]=nt[2]*at[2],H}function v(H,nt,at){return H[0]=nt[0]/at[0],H[1]=nt[1]/at[1],H[2]=nt[2]/at[2],H}function b(H,nt){return H[0]=Math.ceil(nt[0]),H[1]=Math.ceil(nt[1]),H[2]=Math.ceil(nt[2]),H}function y(H,nt){return H[0]=Math.floor(nt[0]),H[1]=Math.floor(nt[1]),H[2]=Math.floor(nt[2]),H}function g(H,nt,at){return H[0]=Math.min(nt[0],at[0]),H[1]=Math.min(nt[1],at[1]),H[2]=Math.min(nt[2],at[2]),H}function _(H,nt,at){return H[0]=Math.max(nt[0],at[0]),H[1]=Math.max(nt[1],at[1]),H[2]=Math.max(nt[2],at[2]),H}function M(H,nt){return H[0]=Math.round(nt[0]),H[1]=Math.round(nt[1]),H[2]=Math.round(nt[2]),H}function x(H,nt,at){return H[0]=nt[0]*at,H[1]=nt[1]*at,H[2]=nt[2]*at,H}function m(H,nt,at,q){return H[0]=nt[0]+at[0]*q,H[1]=nt[1]+at[1]*q,H[2]=nt[2]+at[2]*q,H}function S(H,nt){var at=nt[0]-H[0],q=nt[1]-H[1],_t=nt[2]-H[2];return Math.sqrt(at*at+q*q+_t*_t)}function P(H,nt){var at=nt[0]-H[0],q=nt[1]-H[1],_t=nt[2]-H[2];return at*at+q*q+_t*_t}function A(H){var nt=H[0],at=H[1],q=H[2];return nt*nt+at*at+q*q}function O(H,nt){return H[0]=-nt[0],H[1]=-nt[1],H[2]=-nt[2],H}function L(H,nt){return H[0]=1/nt[0],H[1]=1/nt[1],H[2]=1/nt[2],H}function W(H,nt){var at=nt[0],q=nt[1],_t=nt[2],yt=at*at+q*q+_t*_t;return yt>0&&(yt=1/Math.sqrt(yt),H[0]=nt[0]*yt,H[1]=nt[1]*yt,H[2]=nt[2]*yt),H}function F(H,nt){return H[0]*nt[0]+H[1]*nt[1]+H[2]*nt[2]}function K(H,nt,at){var q=nt[0],_t=nt[1],yt=nt[2],Ft=at[0],Qt=at[1],ee=at[2];return H[0]=_t*ee-yt*Qt,H[1]=yt*Ft-q*ee,H[2]=q*Qt-_t*Ft,H}function V(H,nt,at,q){var _t=nt[0],yt=nt[1],Ft=nt[2];return H[0]=_t+q*(at[0]-_t),H[1]=yt+q*(at[1]-yt),H[2]=Ft+q*(at[2]-Ft),H}function k(H,nt,at,q,_t,yt){var Ft=yt*yt,Qt=Ft*(2*yt-3)+1,ee=Ft*(yt-2)+yt,Vt=Ft*(yt-1),$t=Ft*(3-2*yt);return H[0]=nt[0]*Qt+at[0]*ee+q[0]*Vt+_t[0]*$t,H[1]=nt[1]*Qt+at[1]*ee+q[1]*Vt+_t[1]*$t,H[2]=nt[2]*Qt+at[2]*ee+q[2]*Vt+_t[2]*$t,H}function Z(H,nt,at,q,_t,yt){var Ft=1-yt,Qt=Ft*Ft,ee=yt*yt,Vt=Qt*Ft,$t=3*yt*Qt,Me=3*ee*Ft,me=ee*yt;return H[0]=nt[0]*Vt+at[0]*$t+q[0]*Me+_t[0]*me,H[1]=nt[1]*Vt+at[1]*$t+q[1]*Me+_t[1]*me,H[2]=nt[2]*Vt+at[2]*$t+q[2]*Me+_t[2]*me,H}function X(H,nt){nt=nt||1;var at=l.RANDOM()*2*Math.PI,q=l.RANDOM()*2-1,_t=Math.sqrt(1-q*q)*nt;return H[0]=Math.cos(at)*_t,H[1]=Math.sin(at)*_t,H[2]=q*nt,H}function it(H,nt,at){var q=nt[0],_t=nt[1],yt=nt[2],Ft=at[3]*q+at[7]*_t+at[11]*yt+at[15];return Ft=Ft||1,H[0]=(at[0]*q+at[4]*_t+at[8]*yt+at[12])/Ft,H[1]=(at[1]*q+at[5]*_t+at[9]*yt+at[13])/Ft,H[2]=(at[2]*q+at[6]*_t+at[10]*yt+at[14])/Ft,H}function ft(H,nt,at){var q=nt[0],_t=nt[1],yt=nt[2];return H[0]=q*at[0]+_t*at[3]+yt*at[6],H[1]=q*at[1]+_t*at[4]+yt*at[7],H[2]=q*at[2]+_t*at[5]+yt*at[8],H}function pt(H,nt,at){var q=at[0],_t=at[1],yt=at[2],Ft=at[3],Qt=nt[0],ee=nt[1],Vt=nt[2],$t=_t*Vt-yt*ee,Me=yt*Qt-q*Vt,me=q*ee-_t*Qt,le=_t*me-yt*Me,be=yt*$t-q*me,ze=q*Me-_t*$t,Xe=Ft*2;return $t*=Xe,Me*=Xe,me*=Xe,le*=2,be*=2,ze*=2,H[0]=Qt+$t+le,H[1]=ee+Me+be,H[2]=Vt+me+ze,H}function ut(H,nt,at,q){var _t=[],yt=[];return _t[0]=nt[0]-at[0],_t[1]=nt[1]-at[1],_t[2]=nt[2]-at[2],yt[0]=_t[0],yt[1]=_t[1]*Math.cos(q)-_t[2]*Math.sin(q),yt[2]=_t[1]*Math.sin(q)+_t[2]*Math.cos(q),H[0]=yt[0]+at[0],H[1]=yt[1]+at[1],H[2]=yt[2]+at[2],H}function It(H,nt,at,q){var _t=[],yt=[];return _t[0]=nt[0]-at[0],_t[1]=nt[1]-at[1],_t[2]=nt[2]-at[2],yt[0]=_t[2]*Math.sin(q)+_t[0]*Math.cos(q),yt[1]=_t[1],yt[2]=_t[2]*Math.cos(q)-_t[0]*Math.sin(q),H[0]=yt[0]+at[0],H[1]=yt[1]+at[1],H[2]=yt[2]+at[2],H}function Nt(H,nt,at,q){var _t=[],yt=[];return _t[0]=nt[0]-at[0],_t[1]=nt[1]-at[1],_t[2]=nt[2]-at[2],yt[0]=_t[0]*Math.cos(q)-_t[1]*Math.sin(q),yt[1]=_t[0]*Math.sin(q)+_t[1]*Math.cos(q),yt[2]=_t[2],H[0]=yt[0]+at[0],H[1]=yt[1]+at[1],H[2]=yt[2]+at[2],H}function Rt(H,nt){var at=n(H[0],H[1],H[2]),q=n(nt[0],nt[1],nt[2]);W(at,at),W(q,q);var _t=F(at,q);return _t>1?0:_t<-1?Math.PI:Math.acos(_t)}function Mt(H){return"vec3("+H[0]+", "+H[1]+", "+H[2]+")"}function bt(H,nt){return H[0]===nt[0]&&H[1]===nt[1]&&H[2]===nt[2]}function At(H,nt){var at=H[0],q=H[1],_t=H[2],yt=nt[0],Ft=nt[1],Qt=nt[2];return Math.abs(at-yt)<=l.EPSILON*Math.max(1,Math.abs(at),Math.abs(yt))&&Math.abs(q-Ft)<=l.EPSILON*Math.max(1,Math.abs(q),Math.abs(Ft))&&Math.abs(_t-Qt)<=l.EPSILON*Math.max(1,Math.abs(_t),Math.abs(Qt))}var rt=T.sub=u,Pt=T.mul=f,z=T.div=v,Q=T.dist=S,gt=T.sqrDist=P,et=T.len=h,ot=T.sqrLen=A,xt=T.forEach=function(){var H=c();return function(nt,at,q,_t,yt,Ft){var Qt=void 0,ee=void 0;for(at||(at=3),q||(q=0),_t?ee=Math.min(_t*at+q,nt.length):ee=nt.length,Qt=q;Qt<ee;Qt+=at)H[0]=nt[Qt],H[1]=nt[Qt+1],H[2]=nt[Qt+2],yt(H,H,Ft),nt[Qt]=H[0],nt[Qt+1]=H[1],nt[Qt+2]=H[2];return nt}}()},function(E,T,e){var t=e(6),l=e(11),s=e(152),c=5,r=7,h=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],n=[1,2,4,5,10],i=1e-12;E.exports=function(a){var o=a.min,u=a.max,f=a.interval,v=a.minTickInterval,b=[],y=a.minCount||c,g=a.maxCount||r,_=y===g,M=t(a.minLimit)?-Infinity:a.minLimit,x=t(a.maxLimit)?Infinity:a.maxLimit,m=(y+g)/2,S=m,P=a.snapArray?a.snapArray:_?h:n;if(o===M&&u===x&&_&&(f=(u-o)/(S-1)),t(o)&&(o=0),t(u)&&(u=0),Math.abs(u-o)<i&&(o===0?u=1:o>0?o=0:u=0,u-o<5&&!f&&u-o>=1&&(f=1)),t(f)){var A=(u-o)/(m-1);f=s.snapFactorTo(A,P,"ceil"),g!==y&&(S=parseInt((u-o)/f,10),S>g&&(S=g),S<y&&(S=y),f=s.snapFactorTo((u-o)/(S-1),P))}if(l(v)&&f<v&&(f=v),a.interval||g!==y){u=Math.min(s.snapMultiple(u,f,"ceil"),x),o=Math.max(s.snapMultiple(o,f,"floor"),M),S=Math.round((u-o)/f),o=s.fixedBase(o,f),u=s.fixedBase(u,f);for(var O=null;o>M&&M>-Infinity&&(O===null||o<O);)O=o,o=s.fixedBase(o-f,f)}else{m=parseInt(m,10);var L=(u+o)/2,W=s.snapMultiple(L,f,"ceil"),F=Math.floor((m-2)/2),K=W+F*f,V;m%2==0?V=W-F*f:V=W-(F+1)*f;for(var k=null;K<u&&(k===null||K>k);)k=K,K=s.fixedBase(K+f,f);for(var Z=null;V>o&&(Z===null||V<Z);)Z=V,V=s.fixedBase(V-f,f);u=K,o=V}u=Math.min(u,x),o=Math.max(o,M),b.push(o);for(var X=1;X<S;X++){var it=s.fixedBase(f*X+o,f);it<u&&b.push(it)}return b[b.length-1]<u&&b.push(u),{min:o,max:u,interval:f,count:S,ticks:b}}},function(E,T,e){var t=e(152),l=e(6),s=6,c=[1,2,4,6,8,12],r=60*1e3,h=3600*1e3,n=24*3600*1e3;function i(g){return new Date(g).getFullYear()}function a(g){return new Date(g,0,1).getTime()}function o(g){return new Date(g).getMonth()}function u(g,_){var M=i(g),x=i(_),m=o(g),S=o(_);return(x-M)*12+(S-m)%12}function f(g,_){return new Date(g,_,1).getTime()}function v(g,_){return Math.ceil((_-g)/n)}function b(g,_){return Math.ceil((_-g)/h)}function y(g,_){return Math.ceil((_-g)/(60*1e3))}E.exports=function(g){var _=g.minInterval,M=[],x=g.min,m=g.max,S=g.interval,P;if(m===x&&(m=x+n),l(S)){var A=m-x,O=n,L=365*O;S=parseInt(A/(g.maxCount||s),10),_&&_>S&&(S=_);var W=S/L,F=i(x);if(W>.51){for(var K=Math.ceil(W),V=i(m),k=F;k<=V+K;k=k+K)M.push(a(k));S=null}else if(W>.0834){for(var Z=Math.ceil(W/.0834),X=o(x),it=u(x,m),ft=0;ft<=it+Z;ft=ft+Z)M.push(f(F,ft+X));S=null}else if(S>O*.5){var pt=new Date(x),ut=pt.getFullYear(),It=pt.getMonth(x),Nt=pt.getDate(),Rt=Math.ceil(S/O),Mt=v(x,m);S=Rt*O;for(var bt=0;bt<Mt+Rt;bt=bt+Rt)M.push(new Date(ut,It,Nt+bt).getTime())}else if(S>h){var At=new Date(x),rt=At.getFullYear(),Pt=At.getMonth(x),z=At.getDate(),Q=At.getHours(),gt=t.snapTo(c,Math.ceil(S/h)),et=b(x,m);S=gt*h;for(var ot=0;ot<=et+gt;ot=ot+gt)M.push(new Date(rt,Pt,z,Q+ot).getTime())}else if(S>r){var xt=y(x,m),H=Math.ceil(S/r);S=H*r;for(var nt=0;nt<=xt+H;nt=nt+H)M.push(x+nt*r)}else{S<1e3&&(S=1e3),x=Math.floor(x/1e3)*1e3;var at=Math.ceil((m-x)/1e3),q=Math.ceil(S/1e3);S=q*1e3;for(var _t=0;_t<at+q;_t=_t+q)M.push(x+_t*1e3)}}if(!M.length){x=Math.floor(x/1e3)*1e3,m=Math.ceil(m/1e3)*1e3,P=(m-x)/S;for(var yt=0;yt<=P;yt++)M.push(t.fixedBase(S*yt+x,S))}return{max:m,min:x,interval:S,ticks:M,count:M.length}}},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(26),s=e(11),c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(a){return this.value!==a&&s(a)?a:this.range[0]},n.invert=function(){return this.value},h}(l);l.Identity=c,E.exports=c},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(2),s=e(26),c=e(51);function r(n,i){return n===1?1:Math.log(i)/Math.log(n)}var h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var u=this,f=u.base,v;if(u.min<0)throw new Error("The minimum value must be greater than zero!");var b=r(f,u.max);if(u.min>0)v=Math.floor(r(f,u.min));else{var y=u.values,g=u.max;l(y,function(P){P>0&&P<g&&(g=P)}),g===u.max&&(g=u.max/f),g>1&&(g=1),v=Math.floor(r(f,g)),u._minTick=v,u.positiveMin=g}for(var _=b-v,M=u.tickCount,x=Math.ceil(_/M),m=[],S=v;S<b+x;S=S+x)m.push(Math.pow(f,S));return u.min===0&&m.unshift(0),m},a._getScalePercent=function(u){var f=this.max,v=this.min;if(f===v||u<=0)return 0;var b=this.base,y=this.positiveMin;y&&(v=y*1/b);var g;return u<y?g=u/y/(r(b,f)-r(b,v)):g=(r(b,u)-r(b,v))/(r(b,f)-r(b,v)),g},a.scale=function(u){var f=this._getScalePercent(u),v=this.rangeMin(),b=this.rangeMax();return v+f*(b-v)},a.invert=function(u){var f=this.base,v=r(f,this.max),b=this.rangeMin(),y=this.rangeMax()-b,g,_=this.positiveMin;if(_){if(u===0)return 0;g=r(f,_/f);var M=1/(v-g)*y;if(u<M)return u/M*_}else g=r(f,this.min);var x=(u-b)/y,m=x*(v-g)+g;return Math.pow(f,m)},i}(c);s.Log=h,E.exports=h},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(26),s=e(51);function c(h,n){var i=Math.E,a=Math.pow(i,Math.log(n)/h);return a}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){h.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},i.calculateTicks=function(){var o=this,u=o.exponent,f,v=Math.ceil(c(u,o.max));if(o.min>=0?f=Math.floor(c(u,o.min)):f=0,f>v){var b=v;v=f,f=b}for(var y=v-f,g=o.tickCount,_=Math.ceil(y/g),M=[],x=f;x<v+_;x=x+_)M.push(Math.pow(x,u));return M},i._getScalePercent=function(o){var u=this.max,f=this.min;if(u===f)return 0;var v=this.exponent,b=(c(v,o)-c(v,f))/(c(v,u)-c(v,f));return b},i.scale=function(o){var u=this._getScalePercent(o),f=this.rangeMin(),v=this.rangeMax();return f+u*(v-f)},i.invert=function(o){var u=(o-this.rangeMin())/(this.rangeMax()-this.rangeMin()),f=this.exponent,v=c(f,this.max),b=c(f,this.min),y=u*(v-b)+b;return Math.pow(y,f)},n}(s);l.Pow=r,E.exports=r},function(E,T,e){function t(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var l=e(26),s=e(153),c=e(222),r=e(151),h=e(52),n=e(2),i=e(11),a=e(39),o=e(15),u=function(f){t(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var g=this,_=this.values;n(_,function(M,x){_[x]=g._toTimeStamp(M)}),this.sortable&&_.sort(function(M,x){return M-x}),g.ticks||(g.ticks=this.calculateTicks())},b.calculateTicks=function(){var g=this,_=g.tickCount,M;if(_){var x=r({maxCount:_,data:g.values,isRounding:g.isRounding});M=x.ticks}else M=g.values;return M},b.translate=function(g){g=this._toTimeStamp(g);var _=this.values.indexOf(g);return _===-1&&(i(g)&&g<this.values.length?_=g:_=NaN),_},b.scale=function(g){var _=this.rangeMin(),M=this.rangeMax(),x=this.translate(g),m;return this.values.length===1||isNaN(x)?m=x:x>-1?m=x/(this.values.length-1):m=0,_+m*(M-_)},b.getText=function(g){var _="",M=this.translate(g);M>-1?_=this.values[M]:_=g;var x=this.formatter;return _=parseInt(_,10),_=x?x(_):c.format(_,this.mask),_},b.getTicks=function(){var g=this,_=this.ticks,M=[];return n(_,function(x){var m;a(x)?m=x:m={text:o(x)?x:g.getText(x),value:g.scale(x),tickValue:x},M.push(m)}),M},b._toTimeStamp=function(g){return h.toTimeStamp(g)},v}(s);l.TimeCat=u,E.exports=u},function(E,T,e){function t(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var l=e(222),s=e(2),c=e(6),r=e(15),h=e(26),n=e(51),i=e(352),a=e(52),o=function(u){t(f,u);function f(){return u.apply(this,arguments)||this}var v=f.prototype;return v._initDefaultCfg=function(){u.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},v.init=function(){var y=this,g=y.values;if(g&&g.length){var _=[],M=Infinity,x=M,m=0;s(g,function(S){var P=y._toTimeStamp(S);if(isNaN(P))throw new TypeError("Invalid Time: "+S);M>P?(x=M,M=P):x>P&&(x=P),m<P&&(m=P),_.push(P)}),g.length>1&&(y.minTickInterval=x-M),(c(y.min)||y._toTimeStamp(y.min)>M)&&(y.min=M),(c(y.max)||y._toTimeStamp(y.max)<m)&&(y.max=m)}u.prototype.init.call(this)},v.calculateTicks=function(){var y=this,g=y.min,_=y.max,M=y.tickCount,x=y.tickInterval,m=i({min:g,max:_,minCount:M,maxCount:M,interval:x,minInterval:y.minTickInterval});return m.ticks},v.getText=function(y){var g=this.formatter;return y=this.translate(y),y=g?g(y):l.format(y,this.mask),y},v.scale=function(y){return r(y)&&(y=this.translate(y)),u.prototype.scale.call(this,y)},v.translate=function(y){return this._toTimeStamp(y)},v._toTimeStamp=function(y){return a.toTimeStamp(y)},f}(n);h.Time=o,E.exports=o},function(E,T,e){var t=e(82),l=e(53),s=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t(r,function(n){return!l(h,n)})};E.exports=s},function(E,T,e){var t=e(14),l=e(40),s=e(177);function c(r,h){var n=void 0;if(t(h)&&(n=h),l(h)&&(n=function(o){return s(o,h)}),n){for(var i=0;i<r.length;i+=1)if(n(r[i]))return r[i]}return null}E.exports=c},function(E,T,e){var t=e(6),l=e(4),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t(o)){l(o)?n=o[0]:n=o;break}}return n};E.exports=s},function(E,T,e){var t=e(4),l=function s(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};E.exports=l},function(E,T,e){var t=e(4),l=e(2),s=function(r){if(!t(r))return r;var h=[];return l(r,function(n){t(n)?l(n,function(i){h.push(i)}):h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(82),l=e(4),s=function(r){if(r=t(r,function(o){return!isNaN(o)}),!r.length)return{min:0,max:0};if(l(r[0])){for(var h=[],n=0;n<r.length;n++)h=h.concat(r[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};E.exports=s},function(E,T,e){E.exports={contains:e(53),difference:e(358),find:e(359),firstValue:e(360),flatten:e(362),flattenDeep:e(361),getRange:e(363),merge:e(54),pull:e(156),pullAt:e(155),reduce:e(365),remove:e(366),sortBy:e(367),union:e(368),uniq:e(157),valuesOfKey:e(79)}},function(E,T,e){var t=e(4),l=e(40),s=e(2),c=function(h,n,i){if(!t(h)&&!l(h))return h;var a=i;return s(h,function(o,u){a=n(a,o,u)}),a};E.exports=c},function(E,T,e){var t=e(21),l=e(155),s=function(r,h){var n=[];if(!t(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var u=r[i];h(u,i,r)&&(n.push(u),a.push(i))}return l(r,a),n};E.exports=s},function(E,T,e){var t=e(15),l=e(14),s=e(4);function c(r,h){var n=void 0;if(l(h))n=function(o,u){return h(o)-h(u)};else{var i=[];t(h)?i.push(h):s(h)&&(i=h),n=function(o,u){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>u[v])return 1;if(o[v]<u[v])return-1}return 0}}return r.sort(n),r}E.exports=c},function(E,T,e){var t=e(2),l=e(57),s=e(157),c=function(){var h=[],n=l(arguments);return t(n,function(i){h=h.concat(i)}),s(h)};E.exports=c},function(E,T){function e(t,l,s){var c=void 0;return function(){var r=this,h=arguments,n=function(){c=null,s||t.apply(r,h)},i=s&&!c;clearTimeout(c),c=setTimeout(n,l),i&&t.apply(r,h)}}E.exports=e},function(E,T){E.exports=function(t,l,s){if(t){if(t.addEventListener)return t.addEventListener(l,s,!1),{remove:function(){t.removeEventListener(l,s,!1)}};if(t.attachEvent)return t.attachEvent("on"+l,s),{remove:function(){t.detachEvent("on"+l,s)}}}}},function(E,T){E.exports=function(t,l){if(t&&t.getBoundingClientRect){var s=t.getBoundingClientRect(),c=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:s.top-c,bottom:s.bottom-c,left:s.left-r,right:s.right-r}}return l||null}},function(E,T){E.exports=function(t,l){var s=this.getStyle(t,"height",l);return s==="auto"&&(s=t.offsetHeight),parseFloat(s)}},function(E,T){E.exports=function(t,l){var s=this.getHeight(t,l),c=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,h=parseFloat(this.getStyle(t,"paddingBottom"))||0,n=parseFloat(this.getStyle(t,"borderBottomWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(t,l){var s=this.getWidth(t,l),c=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,h=parseFloat(this.getStyle(t,"paddingRight"))||0,n=parseFloat(this.getStyle(t,"borderRightWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(E,T,e){var t=e(6);E.exports=function(s,c,r){try{return window.getComputedStyle?window.getComputedStyle(s,null)[c]:s.currentStyle[c]}catch(h){return t(r)?null:r}}},function(E,T){E.exports=function(t,l){var s=this.getStyle(t,"width",l);return s==="auto"&&(s=t.offsetWidth),parseFloat(s)}},function(E,T,e){E.exports={addEventListener:e(370),createDom:e(159),getBoundingClientRect:e(371),getHeight:e(372),getOuterHeight:e(373),getOuterWidth:e(374),getRatio:e(375),getStyle:e(376),getWidth:e(377),modifyCSS:e(160),requestAnimationFrame:e(161)}},function(E,T){function e(t,l){return t["_wrap_"+l]}E.exports=e},function(E,T,e){E.exports={getWrapBehavior:e(379),wrapBehavior:e(381)}},function(E,T){function e(t,l){if(t["_wrap_"+l])return t["_wrap_"+l];var s=function(r){t[l](r)};return t["_wrap_"+l]=s,s}E.exports=e},function(E,T,e){var t=e(383);E.exports={number2color:t,numberToColor:t,parsePath:e(384),parseRadius:e(385)}},function(E,T){var e={};E.exports=function(l){var s=e[l];if(!s){for(var c=l.toString(16),r=c.length;r<6;r++)c="0"+c;s="#"+c,e[l]=s}return s}},function(E,T,e){var t=e(4),l=e(15),s=e(2),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,r=/[^\s\,]+/ig;E.exports=function(n){if(n=n||[],t(n))return n;if(l(n))return n=n.match(c),s(n,function(i,a){if(i=i.match(r),i[0].length>1){var o=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=o}s(i,function(u,f){isNaN(u)||(i[f]=+u)}),n[a]=i}),n}},function(E,T,e){var t=e(4);E.exports=function(s){var c=0,r=0,h=0,n=0;return t(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}},function(E,T,e){var t=e(21),l=function(c,r){if(!t(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};E.exports=l},function(E,T,e){var t=e(14),l=e(83),s=function(r,h,n){return t(n)?!!n(r,h):l(r,h)};E.exports=s},function(E,T,e){var t=e(2),l=e(21),s=function(r,h){if(!l(r))return r;var n=[];return t(r,function(i,a){n.push(h(i,a))}),n};E.exports=s},function(E,T){var e=function(l,s){var c=s.toString(),r=c.indexOf(".");if(r===-1)return Math.round(l);var h=c.substr(r+1).length;return h>20&&(h=20),parseFloat(l.toFixed(h))};E.exports=e},function(E,T,e){var t=e(55);E.exports={clamp:e(84),fixedBase:e(389),isDecimal:e(391),isEven:e(392),isInteger:e(393),isNegative:e(394),isNumberEqual:t,isOdd:e(395),isPositive:e(396),maxBy:e(168),minBy:e(397),mod:e(169),snapEqual:t,toDegree:e(170),toInt:e(171),toInteger:e(171),toRadian:e(172)}},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%1!=0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%2==0};E.exports=l},function(E,T,e){var t=e(11),l=Number.isInteger?Number.isInteger:function(s){return t(s)&&s%1==0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c<0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%2!=0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c>0};E.exports=l},function(E,T,e){var t=e(4),l=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;l(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(u){l(n)?o=n(u):o=u[n],o<a&&(i=u,a=o)}),i}};E.exports=c},function(E,T,e){E.exports=e(2)},function(E,T,e){E.exports=e(176)},function(E,T,e){var t=e(53),l=e(179);E.exports=function(s,c){return t(l(s),c)}},function(E,T,e){E.exports={forIn:e(398),has:e(176),hasKey:e(399),hasValue:e(400),keys:e(178),isMatch:e(177),values:e(179)}},function(E,T,e){var t=e(406);function l(c,r,h){var n=null,i=h;return r<i&&(i=r,n="add"),c<i&&(i=c,n="del"),{type:n,min:i}}var s=function(r,h){var n=r.length,i=h.length,a=void 0,o=void 0,u=0;if(n===0||i===0)return null;for(var f=[],v=0;v<=n;v++)f[v]=[],f[v][0]={min:v};for(var b=0;b<=i;b++)f[0][b]={min:b};for(var y=1;y<=n;y++){a=r[y-1];for(var g=1;g<=i;g++){o=h[g-1],t(a,o)?u=0:u=1;var _=f[y-1][g].min+1,M=f[y][g-1].min+1,x=f[y-1][g-1].min+u;f[y][g]=l(_,M,x)}}return f};E.exports=function(r,h){var n=s(r,h),i=r.length,a=h.length,o=[],u=1,f=1;if(n[i][a]!==i){for(var v=1;v<=i;v++){var b=n[v][v].min;f=v;for(var y=u;y<=a;y++)n[v][y].min<b&&(b=n[v][y].min,f=y);u=f,n[v][u].type&&o.push({index:v-1,type:n[v][u].type})}for(var g=o.length-1;g>=0;g--)u=o[g].index,o[g].type==="add"?r.splice(u,0,[].concat(r[u])):r.splice(u,1)}if(i=r.length,i<a)for(var _=0;_<a-i;_++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]);return r}},function(E,T){function e(s,c){var r=[],h=[];function n(i,a){if(i.length===1)r.push(i[0]),h.push(i[0]);else{for(var o=[],u=0;u<i.length-1;u++)u===0&&r.push(i[0]),u===i.length-2&&h.push(i[u+1]),o[u]=[(1-a)*i[u][0]+a*i[u+1][0],(1-a)*i[u][1]+a*i[u+1][1]];n(o,a)}}return s.length&&n(s,c),{left:r,right:h.reverse()}}function t(s,c,r){var h=[[s[1],s[2]]];r=r||2;var n=[];c[0]==="A"?(h.push(c[6]),h.push(c[7])):c[0]==="C"?(h.push([c[1],c[2]]),h.push([c[3],c[4]]),h.push([c[5],c[6]])):c[0]==="S"||c[0]==="Q"?(h.push([c[1],c[2]]),h.push([c[3],c[4]])):h.push([c[1],c[2]]);for(var i=h,a=1/r,o=0;o<r-1;o++){var u=a/(1-a*o),f=e(i,u);n.push(f.left),i=f.right}n.push(i);var v=n.map(function(b){var y=[];return b.length===4&&(y.push("C"),y=y.concat(b[2])),b.length>=3&&(b.length===3&&y.push("Q"),y=y.concat(b[1])),b.length===2&&y.push("L"),y=y.concat(b[b.length-1]),y});return v}function l(s,c,r){if(r===1)return[[].concat(s)];var h=[];if(c[0]==="L"||c[0]==="C"||c[0]==="Q")h=h.concat(t(s,c,r));else{var n=[].concat(s);n[0]==="M"&&(n[0]="L");for(var i=0;i<=r-1;i++)h.push(n)}return h}E.exports=function(c,r){if(c.length===1)return c;var h=c.length-1,n=r.length-1,i=h/n,a=[];if(c.length===1&&c[0][0]==="M"){for(var o=0;o<n-h;o++)c.push(c[0]);return c}for(var u=0;u<n;u++){var f=Math.floor(i*u);a[f]=(a[f]||0)+1}var v=a.reduce(function(b,y,g){return g===h?b.concat(c[h]):b.concat(l(c[g],c[g+1],y))},[]);return v.unshift(c[0]),(r[n]==="Z"||r[n]==="z")&&v.push("Z"),v}},function(E,T){function e(l){var s=[];switch(l[0]){case"M":s.push([l[1],l[2]]);break;case"L":s.push([l[1],l[2]]);break;case"A":s.push([l[6],l[7]]);break;case"Q":s.push([l[3],l[4]]),s.push([l[1],l[2]]);break;case"T":s.push([l[1],l[2]]);break;case"C":s.push([l[5],l[6]]),s.push([l[1],l[2]]),s.push([l[3],l[4]]);break;case"S":s.push([l[3],l[4]]),s.push([l[1],l[2]]);break;case"H":s.push([l[1],l[1]]);break;case"V":s.push([l[1],l[1]]);break;default:}return s}function t(l,s,c){for(var r=[].concat(l),h=void 0,n=1/(c+1),i=e(s)[0],a=1;a<=c;a++)n*=a,h=Math.floor(l.length*n),h===0?r.unshift([i[0]*n+l[h][0]*(1-n),i[1]*n+l[h][1]*(1-n)]):r.splice(h,0,[i[0]*n+l[h][0]*(1-n),i[1]*n+l[h][1]*(1-n)]);return r}E.exports=function(s,c){if(s.length<=1)return s;for(var r=void 0,h=0;h<c.length;h++)if(s[h][0]!==c[h][0])switch(r=e(s[h]),c[h][0]){case"M":s[h]=["M"].concat(r[0]);break;case"L":s[h]=["L"].concat(r[0]);break;case"A":s[h]=[].concat(c[h]),s[h][6]=r[0][0],s[h][7]=r[0][1];break;case"Q":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["Q"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"T":s[h]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(h>0)r=t(r,s[h-1],2);else{s[h]=c[h];break}s[h]=["C"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["S"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;default:s[h]=c[h]}return s}},function(E,T,e){var t=e(407),l=e(183),s=e(184),c=e(180);E.exports={catmullRom2Bezier:c,catmullRomToBezier:c,fillPath:e(403),fillPathByDiff:e(402),formatPath:e(404),intersection:t,pathIntersection:t,parsePathArray:e(181),parsePathString:e(182),pathToAbsolute:l,path2absolute:l,pathTocurve:s,path2curve:s,rectPath:e(185)}},function(E,T,e){var t=e(2);E.exports=function(s,c){if(s.length!==c.length)return!1;var r=!0;return t(s,function(h,n){if(h!==c[n])return r=!1,!1}),r}},function(E,T,e){var t=e(4),l=e(185),s=e(184),c=function(g,_,M,x,m){var S=-3*_+9*M-9*x+3*m,P=g*S+6*_-12*M+6*x;return g*P-3*_+3*M},r=function(g,_,M,x,m,S,P,A,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var L=O/2,W=12,F=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],V=0,k=0;k<W;k++){var Z=L*F[k]+L,X=c(Z,g,M,m,P),it=c(Z,_,x,S,A),ft=X*X+it*it;V+=K[k]*Math.sqrt(ft)}return L*V},h=function(g,_,M,x,m,S,P,A){for(var O=[],L=[[],[]],W=void 0,F=void 0,K=void 0,V=void 0,k=0;k<2;++k){if(k===0?(F=6*g-12*M+6*m,W=-3*g+9*M-9*m+3*P,K=3*M-3*g):(F=6*_-12*x+6*S,W=-3*_+9*x-9*S+3*A,K=3*x-3*_),Math.abs(W)<1e-12){if(Math.abs(F)<1e-12)continue;V=-K/F,V>0&&V<1&&O.push(V);continue}var Z=F*F-4*K*W,X=Math.sqrt(Z);if(!(Z<0)){var it=(-F+X)/(2*W);it>0&&it<1&&O.push(it);var ft=(-F-X)/(2*W);ft>0&&ft<1&&O.push(ft)}}for(var pt=O.length,ut=pt,It=void 0;pt--;)V=O[pt],It=1-V,L[0][pt]=It*It*It*g+3*It*It*V*M+3*It*V*V*m+V*V*V*P,L[1][pt]=It*It*It*_+3*It*It*V*x+3*It*V*V*S+V*V*V*A;return L[0][ut]=g,L[1][ut]=_,L[0][ut+1]=P,L[1][ut+1]=A,L[0].length=L[1].length=ut+2,{min:{x:Math.min.apply(0,L[0]),y:Math.min.apply(0,L[1])},max:{x:Math.max.apply(0,L[0]),y:Math.max.apply(0,L[1])}}},n=function(g,_,M,x,m,S,P,A){if(!(Math.max(g,M)<Math.min(m,P)||Math.min(g,M)>Math.max(m,P)||Math.max(_,x)<Math.min(S,A)||Math.min(_,x)>Math.max(S,A))){var O=(g*x-_*M)*(m-P)-(g-M)*(m*A-S*P),L=(g*x-_*M)*(S-A)-(_-x)*(m*A-S*P),W=(g-M)*(S-A)-(_-x)*(m-P);if(!!W){var F=O/W,K=L/W,V=+F.toFixed(2),k=+K.toFixed(2);if(!(V<+Math.min(g,M).toFixed(2)||V>+Math.max(g,M).toFixed(2)||V<+Math.min(m,P).toFixed(2)||V>+Math.max(m,P).toFixed(2)||k<+Math.min(_,x).toFixed(2)||k>+Math.max(_,x).toFixed(2)||k<+Math.min(S,A).toFixed(2)||k>+Math.max(S,A).toFixed(2)))return{x:F,y:K}}}},i=function(g,_,M){return _>=g.x&&_<=g.x+g.width&&M>=g.y&&M<=g.y+g.height},a=function(g,_,M,x){return g===null&&(g=_=M=x=0),_===null&&(_=g.y,M=g.width,x=g.height,g=g.x),{x:g,y:_,width:M,w:M,height:x,h:x,x2:g+M,y2:_+x,cx:g+M/2,cy:_+x/2,r1:Math.min(M,x)/2,r2:Math.max(M,x)/2,r0:Math.sqrt(M*M+x*x)/2,path:l(g,_,M,x),vb:[g,_,M,x].join(" ")}},o=function(g,_){return g=a(g),_=a(_),i(_,g.x,g.y)||i(_,g.x2,g.y)||i(_,g.x,g.y2)||i(_,g.x2,g.y2)||i(g,_.x,_.y)||i(g,_.x2,_.y)||i(g,_.x,_.y2)||i(g,_.x2,_.y2)||(g.x<_.x2&&g.x>_.x||_.x<g.x2&&_.x>g.x)&&(g.y<_.y2&&g.y>_.y||_.y<g.y2&&_.y>g.y)},u=function(g,_,M,x,m,S,P,A){t(g)||(g=[g,_,M,x,m,S,P,A]);var O=h.apply(null,g);return a(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},f=function(g,_,M,x,m,S,P,A,O){var L=1-O,W=Math.pow(L,3),F=Math.pow(L,2),K=O*O,V=K*O,k=W*g+F*3*O*M+L*3*O*O*m+V*P,Z=W*_+F*3*O*x+L*3*O*O*S+V*A,X=g+2*O*(M-g)+K*(m-2*M+g),it=_+2*O*(x-_)+K*(S-2*x+_),ft=M+2*O*(m-M)+K*(P-2*m+M),pt=x+2*O*(S-x)+K*(A-2*S+x),ut=L*g+O*M,It=L*_+O*x,Nt=L*m+O*P,Rt=L*S+O*A,Mt=90-Math.atan2(X-ft,it-pt)*180/Math.PI;return{x:k,y:Z,m:{x:X,y:it},n:{x:ft,y:pt},start:{x:ut,y:It},end:{x:Nt,y:Rt},alpha:Mt}},v=function(g,_,M){var x=u(g),m=u(_);if(!o(x,m))return M?0:[];for(var S=r.apply(0,g),P=r.apply(0,_),A=~~(S/8),O=~~(P/8),L=[],W=[],F={},K=M?0:[],V=0;V<A+1;V++){var k=f.apply(0,g.concat(V/A));L.push({x:k.x,y:k.y,t:V/A})}for(var Z=0;Z<O+1;Z++){var X=f.apply(0,_.concat(Z/O));W.push({x:X.x,y:X.y,t:Z/O})}for(var it=0;it<A;it++)for(var ft=0;ft<O;ft++){var pt=L[it],ut=L[it+1],It=W[ft],Nt=W[ft+1],Rt=Math.abs(ut.x-pt.x)<.001?"y":"x",Mt=Math.abs(Nt.x-It.x)<.001?"y":"x",bt=n(pt.x,pt.y,ut.x,ut.y,It.x,It.y,Nt.x,Nt.y);if(bt){if(F[bt.x.toFixed(4)]===bt.y.toFixed(4))continue;F[bt.x.toFixed(4)]=bt.y.toFixed(4);var At=pt.t+Math.abs((bt[Rt]-pt[Rt])/(ut[Rt]-pt[Rt]))*(ut.t-pt.t),rt=It.t+Math.abs((bt[Mt]-It[Mt])/(Nt[Mt]-It[Mt]))*(Nt.t-It.t);At>=0&&At<=1&&rt>=0&&rt<=1&&(M?K++:K.push({x:bt.x,y:bt.y,t1:At,t2:rt}))}}return K},b=function(g,_,M){g=s(g),_=s(_);for(var x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=void 0,L=void 0,W=void 0,F=void 0,K=void 0,V=M?0:[],k=0,Z=g.length;k<Z;k++){var X=g[k];if(X[0]==="M")x=A=X[1],m=O=X[2];else{X[0]==="C"?(F=[x,m].concat(X.slice(1)),x=F[6],m=F[7]):(F=[x,m,x,m,A,O,A,O],x=A,m=O);for(var it=0,ft=_.length;it<ft;it++){var pt=_[it];if(pt[0]==="M")S=L=pt[1],P=W=pt[2];else{pt[0]==="C"?(K=[S,P].concat(pt.slice(1)),S=K[6],P=K[7]):(K=[S,P,S,P,L,W,L,W],S=L,P=W);var ut=v(F,K,M);if(M)V+=ut;else{for(var It=0,Nt=ut.length;It<Nt;It++)ut[It].segment1=k,ut[It].segment2=it,ut[It].bez1=F,ut[It].bez2=K;V=V.concat(ut)}}}}}return V};E.exports=function(g,_){return b(g,_)}},function(E,T,e){var t=e(2),l=e(40),s=Object.prototype.hasOwnProperty,c=function(h,n){if(h===null||!l(h))return{};var i={};return t(n,function(a){s.call(h,a)&&(i[a]=h[a])}),i};E.exports=c},function(E,T,e){var t={lc:e(410),lowerCase:e(186),lowerFirst:e(187),substitute:e(411),uc:e(412),upperCase:e(188),upperFirst:e(189)};E.exports=t},function(E,T,e){E.exports=e(186)},function(E,T){var e=function(l,s){return!l||!s?l:l.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})};E.exports=e},function(E,T,e){E.exports=e(188)},function(E,T){function e(t,l,s){var c=void 0,r=void 0,h=void 0,n=void 0,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=l-(f-i);return r=this,h=arguments,v<=0||v>l?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}E.exports=e},function(E,T,e){var t=e(17),l={getType:e(190),isArray:e(4),isArrayLike:e(21),isBoolean:e(191),isFunction:e(14),isNil:e(6),isNull:e(417),isNumber:e(11),isObject:e(39),isObjectLike:e(86),isPlainObject:e(40),isPrototype:e(193),isType:t,isUndefined:e(419),isString:e(15),isRegExp:e(418),isDate:e(192),isArguments:e(415),isError:e(416)};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Arguments")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Error")};E.exports=l},function(E,T){var e=function(l){return l===null};E.exports=e},function(E,T,e){var t=e(17),l=function(c){return t(c,"RegExp")};E.exports=l},function(E,T){var e=function(l){return l===void 0};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Axis")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,y){for(var g=0;g<y.length;g++){var _=y[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,y,g){return y&&v(b.prototype,y),g&&v(b,g),b}}(),l=e(42),s=i(l),c=e(29),r=i(c),h=e(545),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function u(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(0,n.default)(s.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var f=function(v){u(b,v);function b(){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var g=this.props,_=g.width,M=g.height,x=g.placeholder;return s.default.createElement("div",{style:{width:_,height:M}},x)}}]),b}(s.default.PureComponent||s.default.Component);f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),placeholder:r.default.node},f.defaultProps={width:"100%",placeholder:s.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},l=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),c=u(s),r=e(423),h=u(r),n=e(421),i=u(n),a=e(425),o=u(a);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,m){var S={};for(var P in x)m.indexOf(P)>=0||!Object.prototype.hasOwnProperty.call(x,P)||(S[P]=x[P]);return S}function v(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function b(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function y(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}function g(x){var m=!0;return(x==null||x.length===0||x.rows&&x.rows.length===0)&&(m=!1),!!m}var _=function(x){y(m,x);function m(){var S,P,A,O;v(this,m);for(var L=arguments.length,W=Array(L),F=0;F<L;F++)W[F]=arguments[F];return O=(P=(A=b(this,(S=m.__proto__||Object.getPrototypeOf(m)).call.apply(S,[this].concat(W))),A),A._refCallback=function(K){K&&(A.chart=K.getG2Instance())},A.hasViewSource=function(){var K=!1;return c.default.Children.map(A.props.children,function(V){!K&&V&&typeof V.type=="function"&&V.type.name==="View"&&V.props.data&&g(V.props.data)&&(K=!0)}),K},P),b(A,O)}return l(m,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var P=this.props,A=P.data,O=P.width,L=P.height,W=P.placeholder,F=P.className,K=P.style;return c.default.createElement("div",{className:F,style:K},g(A)||this.hasViewSource()||!W?c.default.createElement(h.default,t({ref:this._refCallback},this.props)):c.default.createElement(i.default,{width:O,height:L,placeholder:W===!0?void 0:W}))}}]),m}(c.default.PureComponent||c.default.Component),M=function(x){y(m,x);function m(){return v(this,m),b(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return l(m,[{key:"render",value:function(){var P=this.props,A=P.widthErrorBoundary,O=f(P,["widthErrorBoundary"]);return A===!1?c.default.createElement(_,O):c.default.createElement(o.default,null,c.default.createElement(_,O))}}]),m}(c.default.Component);T.default=M},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},l=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),c=v(s),r=e(29),h=v(r),n=e(436),i=v(n),a=e(543),o=v(a),u=e(538),f=v(u);function v(x){return x&&x.__esModule?x:{default:x}}function b(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function y(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function g(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}var _=function(x){g(m,x);function m(S){b(this,m);var P=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,S));return M.call(P),P.name="Chart",P.gId=0,P.id=P.createId(),P.g2Processor=new i.default,P.forceFit=(0,f.default)(function(){!P.chart||P.chart.forceFit()},300),P}return l(m,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,t({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var P=new o.default(this.forceFit);P.observe(this.containerWrap),this.observe=P}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,t({},this.props,{container:this.containerWrap}));var P=this.g2Processor.batchedUpdate();this.chart!==P&&(this.chart=P,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return c.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),m}(s.Component);_.propTypes={data:h.default.oneOfType([h.default.arrayOf(h.default.object),h.default.object]),scale:h.default.oneOfType([h.default.object,h.default.array]),animate:h.default.bool,width:h.default.number,height:h.default.number.isRequired,onGetG2Instance:h.default.func,forceFit:h.default.bool,forceUpdate:h.default.bool},_.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func};var M=function(){var m=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:m.id,name:m.name}},this.createId=function(){return m.gId+=1,m.gId},this.addElement=function(S,P,A,O,L){return m.g2Processor.addElement(S,P,A,O,L)},this.updateElement=function(S,P,A,O,L){m.g2Processor.updateElement(S,P,A,O,L)},this.deleteElement=function(S,P,A){m.g2Processor.deleteElement(S,P,A)},this.refHandle=function(S){m.containerWrap||(m.containerWrap=S)}};T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Coord")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function a(o,u){for(var f=0;f<u.length;f++){var v=u[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,u,f){return u&&a(o.prototype,u),f&&a(o,f),o}}(),l=e(42),s=c(l);function c(a){return a&&a.__esModule?a:{default:a}}function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function h(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function n(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var i=function(a){n(o,a);function o(u){r(this,o);var f=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,u));return f.state={hasError:!1},f}return t(o,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),o}(s.default.Component);T.default=i},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(285);var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Facet")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(292);var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Geom")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(r){return r&&r.__esModule?r:{default:r}}var c=l.default.generateBaseTypedComponent("Guide");c.Line=l.default.generateBaseTypedComponent("GuideLine"),c.Image=l.default.generateBaseTypedComponent("GuideImage"),c.Text=l.default.generateBaseTypedComponent("GuideText"),c.Region=l.default.generateBaseTypedComponent("GuideRegion"),c.Html=l.default.generateBaseTypedComponent("GuideHtml"),c.Arc=l.default.generateBaseTypedComponent("GuideArc"),c.RegionFilter=l.default.generateBaseTypedComponent("GuideRegionFilter"),c.DataMarker=l.default.generateBaseTypedComponent("GuideDataMarker"),c.DataRegion=l.default.generateBaseTypedComponent("GuideDataRegion"),T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,y){for(var g=0;g<y.length;g++){var _=y[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,y,g){return y&&v(b.prototype,y),g&&v(b,g),b}}(),l=e(537),s=i(l),c=e(24),r=i(c),h=e(29),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function u(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var f=function(v){u(b,v);function b(y){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,y,"Label"))}return t(b,[{key:"componentWillMount",value:function(){var g=this.context.getParentInfo();(0,s.default)(g.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(r.default);f.contextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},f.childContextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=r(t),s=e(29),c=r(s);function r(o){return o&&o.__esModule?o:{default:o}}function h(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")}function n(o,u){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:o}function i(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(o,u):o.__proto__=u)}var a=function(o){i(u,o);function u(f){return h(this,u),n(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,"Legend"))}return u}(l.default);a.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.defaultProps={visible:!0},T.default=a},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Tooltip")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function u(f,v){for(var b=0;b<v.length;b++){var y=v[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,v,b){return v&&u(f.prototype,v),b&&u(f,b),f}}(),l=e(24),s=h(l),c=e(29),r=h(c);function h(u){return u&&u.__esModule?u:{default:u}}function n(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function i(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function a(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var o=function(u){a(f,u);function f(v){n(this,f);var b=i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,"View"));return b.getViewId=function(){return b.id},b}return t(f,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),f}(s.default);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},T.default=o},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},l={addElement:function(c,r,h){this[t[c]](r,h,h.id,h.viewId,h.parentInfo)},getConfigContainer:function(c,r){return r&&(c.views||(c.views={}),c=c.views[r],c||(c={},c.views[r]=c)),c},addUniqueElement:function(c,r,h,n,i){var a=this.getConfigContainer(c,i);return a[r],a[r]=h,n},addChart:function(c,r,h){return this.addUniqueElement(c,"chart",r,h,null)},addView:function(c,r,h){return c.views||(c.views={}),c.views[h]=r,h},addAxis:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.axises||(i.axises={}),i.axises[h]=r,h},addCoord:function(c,r,h,n){return this.addUniqueElement(c,"coord",r,h,n)},addGeom:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),a.geoms[h]?i?a.geoms[h].label=r.label:(a.geoms[h].label||console.log("geom label error"),r.label=a.geoms[h].label,a.geoms[h]=r):a.geoms[h]=r,h},addLabel:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),this.addGeom(c,{label:r},i.id,n,!0),h},addTooltip:function(c,r,h,n){return this.addUniqueElement(c,"tooltip",r,h,n)},addFacet:function(c,r,h,n){return this.addUniqueElement(c,"facet",r,h,n)},addLegend:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.legends||(i.legends={}),i.legends[h]=r,h},addGuide:function(c,r,h,n){return this.addUniqueElement(c,"guide",r,h,n)},addTypedGuide:function(c,r,h,n,i,a){var o=this.getConfigContainer(c,i),u=o.guide;return u||(this.addUniqueElement("guide",{},a.id,i),u=o.guide),u.elements||(u.elements={}),h.type=r,u.elements[n]=h,n},addGuideLine:function(c,r,h,n,i){this.addTypedGuide(c,"line",r,h,n,i)},addGuideImage:function(c,r,h,n,i){this.addTypedGuide(c,"image",r,h,n,i)},addGuideText:function(c,r,h,n,i){this.addTypedGuide(c,"text",r,h,n,i)},addGuideRegion:function(c,r,h,n,i){this.addTypedGuide(c,"region",r,h,n,i)},addGuideHtml:function(c,r,h,n,i){this.addTypedGuide(c,"html",r,h,n,i)},addGuideArc:function(c,r,h,n,i){this.addTypedGuide(c,"arc",r,h,n,i)},addGuideRegionFilter:function(c,r,h,n,i){this.addTypedGuide(c,"regionFilter",r,h,n,i)},addGuideDataMarker:function(c,r,h,n,i){this.addTypedGuide(c,"dataMarker",r,h,n,i)},addGuideDataRegion:function(c,r,h,n,i){this.addTypedGuide(c,"dataRegion",r,h,n,i)}};T.default=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(r){if(Array.isArray(r)){for(var h=0,n=Array(r.length);h<r.length;h++)n[h]=r[h];return n}else return Array.from(r)}var l={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},s={Geom:!0,Label:!0,Facet:!0},c={deleteAxis:function(h,n,i){var a=n.axises[i].props;h.axis(a.name,!1)},deleteTooltip:function(h){h.tooltip(!1)},deleteCoord:function(h){h.coord("rect",{})},deleteLegend:function(h,n,i){var a=n.legends[i].props;h.legend.apply(h,t(a.name?[a.name,!1]:[!1]))},deleteGuide:function(h){h.guide().clear()},deleteView:function(h,n,i){!n.views[i].g2Instance||(h.removeView(n.views[i].g2Instance),delete n.views[i].g2Instance)},deleteViewElement:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(u){var f=a[u],v=f.viewId;v&&(s[f.name]?n.views[v].needReExecute=!0:n.views[v].g2Instance&&o[l[f.name]]&&o[l[f.name]](n.views[v].g2Instance,n.views[v],f.id))})},needReExecute:function(h,n){for(var i in h)if(s[n[i].name]&&!n[i].viewId)return!0;return!1},synchronizeG2Delete:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(u){var f=l[a[u].name];o[f]&&!a[u].viewId&&o[f](h,n,u)}),this.deleteViewElement(h,n,i,a)}};T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},l=e(88),s=e(195),c=u(s),r=e(197),h=u(r),n=e(87),i=u(n),a=e(196),o=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function f(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function v(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var b=c.default.COORD_FUNC_PROPS,y=c.default.GEOM_FUNC_PROPS,g={needRebuildChart:function(M){if(M.chart.props==null||M.chart.updateProps==null)return!1;var x=M.chart.props,m=M.chart.updateProps;return!l.Util.shallowEqual(x.padding,m.padding)||!l.Util.shallowEqual(x.background,m.background)||!l.Util.shallowEqual(x.plotBackground,m.plotBackground)||!l.Util.shallowEqual(x.pixelRatio,m.pixelRatio)},needReExecute:function(M){var x=M.geoms;if(x==null)return!1;for(var m in x)if(x[m].props&&x[m].updateProps&&(x[m].props.type!==x[m].updateProps.type||x[m].props.color&&!x[m].updateProps.color||x[m].props.size&&!x[m].updateProps.size||x[m].props.shape&&!x[m].updateProps.shape))return!0;return!1},needRepaint:function(M){var x=M.chart,m=x.props.data,S=x.updateProps.data;return m===S},synchronizeG2Update:function(M,x){this.updateChart(M,x.chart),this.updateAxises(M,x.axises),this.updateTooltip(M,x),this.updateCoord(M,x),this.updateLegends(M,x.legends),this.updateGeoms(M,x.geoms),this.updateGuide(M,x.guide),this.updateFacet(M,x),this.updateViews(M,x)},updateChart:function(M,x){if(!!x){var m=x.props,S=x.updateProps,P=m.width,A=m.height,O=m.animate,L=m.data,W=m.scale,F=S.width,K=S.height,V=S.animate,k=S.data,Z=S.scale;L!==k&&M.changeData(k),l.Util.shallowEqual(W,Z)||(l.Util.isArray(Z)?M.scale(Z[0],Z[1]):M.scale(Z)),O!==V&&M.animate(V),P!==F&&A!==K?M.changeSize(F,K):P!==F?M.changeWidth(F):A!==K&&M.changeHeight(K),o.default.updateEvents(M,o.default.chartEvents,x.props,S),o.default.updateBaseEvents(M,x.updateProps,S)}},updateAxis:function(M,x){var m=x.props,S=m.name,P=m.visible,A=v(m,["name","visible"]),O=x.updateProps,L=O.name,W=O.visible,F=v(O,["name","visible"]);P!==W&&M.axis(S,!!W),l.Util.shallowEqual(A,F)||M.axis(S,F)},updateAxises:function(M,x){if(!!x)for(var m in x)x[m]&&x[m].props&&x[m].updateProps&&this.updateAxis(M,x[m])},updateTooltip:function(M,x){if(!!x.tooltip){var m=x.tooltip.props,S=x.tooltip.updateProps;m==null&&S==null||l.Util.shallowEqual(m,S)||M.tooltip(t({},S))}},updateCoord:function(M,x){var m=x.coord;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=l.Util.without(P,b.concat(["type"]));if(!l.Util.shallowEqual(S,P)){var O=M.coord(P.type,A);m.g2Instance=O,l.Prop.init(b,P,function(L,W){W==="reflect"?l.Util.each(L,function(F){return O[W](F)}):W==="transpose"?L[0]===!0&&O[W].apply(O,f(L)):O[W].apply(O,f(L))})}}}},updateLegend:function(M,x){var m=x.props,S=x.updateProps;if(!!S&&!l.Util.shallowEqual(m,S)){var P=S.name,A=S.visible,O=v(S,["name","visible"]),L=A&&O;M.legend.apply(M,f(P?[P,L]:[L]))}},updateLegends:function(M,x){if(x!=null)for(var m in x)x[m]&&this.updateLegend(M,x[m])},updateLabel:function(M,x,m){if(!(x==null||m==null)){var S=x.content,P=v(x,["content"]),A=m.content,O=v(m,["content"]);(!l.Util.shallowEqual(P,O)||!l.Util.shallowEqual(S,A))&&(l.Util.isArray(A)?M.label(A[0],A[1],O):M.label(A,O))}},updateGeom:function(M,x){var m=x.props,S=x.updateProps;if(!(!m||!S)&&m.type===S.type){var P=x.g2Instance;if(l.Util.shallowEqual(m,S)){x.label&&this.updateLabel(P,x.label.props,x.label.updateProps);return}var A=m.adjust,O=v(m,["adjust"]),L=S.adjust,W=v(S,["adjust"]);(A||L)&&P.adjust(L),l.Prop.update(y,O,W,function(F,K){P[K].apply(P,f(F))}),x.label&&this.updateLabel(P,x.label.props,x.label.updateProps)}},updateGeoms:function(M,x){if(x==null)return!1;for(var m in x)x[m]&&this.updateGeom(M,x[m]);return!1},isTypedGuideChanged:function(M){return!l.Util.shallowEqual(M.props,M.updateProps)},updateGuide:function(M,x){if(!(!x||!x.elements)){var m=x.elements,S=!1;for(var P in m)if(m[P]&&(m[P].updateProps||this.isTypedGuideChanged(m[P]))){S=!0;break}S&&(i.default.mergeGuide(x,!0),M.guide().clear(),h.default.guide(M,x))}},updateView:function(M,x){if(!(!x||!x.props||!x.updateProps||x.parentInfo.name==="Facet")){var m=x.g2Instance,S=x.props,P=x.updateProps,A=S.scale,O=S.data,L=S.animate,W=S.axis,F=S.filter,K=P.scale,V=P.animate,k=P.data,Z=P.axis,X=P.filter;L!==V&&m.animate(V),O!==k&&m.changeData(k),l.Util.shallowEqual(A,K)||m.scale(K),l.Util.shallowEqual(F,X)||X.forEach(function(it){m.filter(it[0],it[1])}),W!==Z&&m.axis(Z),this.updateCoord(m,x),this.updateAxises(m,x.axises),this.updateGeoms(m,x.geoms),this.updateGuide(m,x.guide)}},updateViews:function(M,x){var m=x.views;if(!!m)for(var S in m){var P=m[S];P&&(P.needReExecute||this.needReExecute(P))?(h.default.synchronizeG2View(P.g2Instance,P),m[S].needReExecute=!1):this.updateView(M,P)}},updateFacet:function(M,x){var m=x.facet;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=S.type,O=v(S,["type"]),L=P.type,W=v(P,["type"]);(A!==L||!l.Util.shallowEqual(O,W))&&(m.props=P,h.default.facet(M,x))}}}};T.default=g},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(M){for(var x=1;x<arguments.length;x++){var m=arguments[x];for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(M[S]=m[S])}return M},l=function(){function M(x,m){for(var S=0;S<m.length;S++){var P=m[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,m,S){return m&&M(x.prototype,m),S&&M(x,S),x}}(),s=e(433),c=b(s),r=e(87),h=b(r),n=e(435),i=b(n),a=e(434),o=b(a),u=e(197),f=b(u),v=e(88);function b(M){return M&&M.__esModule?M:{default:M}}function y(M,x){var m={};for(var S in M)x.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(M,S)||(m[S]=M[S]);return m}function g(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}var _=function(){function M(){g(this,M),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return l(M,[{key:"calUpdateFlag",value:function(m,S){var P=this.elementInfos[S].props,A=P.children,O=y(P,["children"]),L=this.elementInfos[S].updateProps,W=L.children,F=y(L,["children"]);if(m==="Chart"||m==="View"){var K=O.data,V=y(O,["data"]),k=F.data,Z=y(F,["data"]);(K!==k||!v.Util.isEqual(V,Z))&&(this.updated=!0)}else v.Util.isEqual(O,F)||(this.updated=!0)}},{key:"addElement",value:function(m,S,P,A,O){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[S]={id:S,viewId:O,parentInfo:A,name:m,props:t({},P)},A&&!this.elementInfos[A.id]&&(this.elementInfos[A.id]={id:A.id,name:A.name}),c.default.addElement(m,this.config,this.elementInfos[S]))}},{key:"updateElement",value:function(m,S,P){this.elementInfos[S].updateProps=t({},P),this.calUpdateFlag(m,S)}},{key:"deleteElement",value:function(m,S){!this.chart||(this.deleteInfos[S]=S,this.deleted=!0)}},{key:"createG2Instance",value:function(){var m=this.config,S=f.default.createChart(m,this.elementInfos);return f.default.executeChartConfig(S,m,this.elementInfos),f.default.synchronizeG2Add(S,m,this.elementInfos),S.render(),this.chart=S,this.initedG2=!0,this.resetStates(),S}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var m=this.elementInfos;for(var S in m)m[S].updateProps&&delete m[S].updateProps,this.deleteInfos[S]&&delete m[S];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),f.default.executeChartConfig(this.chart,this.config,this.elementInfos),f.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||i.default.needRebuildChart(this.config)?(h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):o.default.needReExecute(this.deleteInfos,this.elementInfos)||i.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(o.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),h.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&f.default.synchronizeG2Add(this.chart,this.config),this.updated&&i.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),h.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),M}();T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(58),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default={init:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments[1],n=arguments[2];l.default.each(r,function(i){var a=h[i];a!==void 0&&(l.default.isArray(a)||(a=[a]),n(a,i))})},update:function(r,h,n,i){var a=void 0,o=void 0;l.default.each(r,function(u){a=h[u],o=n[u],l.default.shallowEqual(o,a)||(l.default.isArray(o)||(o=[o]),i(o,u))})}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={}},function(E,T,e){"use strict";T.a=v;var t=e(90),l=e(89),s=e(198),c=-.14861,r=1.78277,h=-.29227,n=-.90649,i=1.97294,a=i*n,o=i*r,u=r*h-n*c;function f(y){if(y instanceof b)return new b(y.h,y.s,y.l,y.opacity);y instanceof l.a||(y=e.i(l.b)(y));var g=y.r/255,_=y.g/255,M=y.b/255,x=(u*M+a*g-o*_)/(u+a-o),m=M-x,S=(i*(_-x)-h*m)/n,P=Math.sqrt(S*S+m*m)/(i*x*(1-x)),A=P?Math.atan2(S,m)*s.a-120:NaN;return new b(A<0?A+360:A,P,x,y.opacity)}function v(y,g,_,M){return arguments.length===1?f(y):new b(y,g,_,M==null?1:M)}function b(y,g,_,M){this.h=+y,this.s=+g,this.l=+_,this.opacity=+M}e.i(t.a)(b,v,e.i(t.b)(l.c,{brighter:function(y){return y=y==null?l.d:Math.pow(l.d,y),new b(this.h,this.s,this.l*y,this.opacity)},darker:function(y){return y=y==null?l.e:Math.pow(l.e,y),new b(this.h,this.s,this.l*y,this.opacity)},rgb:function(){var y=isNaN(this.h)?0:(this.h+120)*s.b,g=+this.l,_=isNaN(this.s)?0:this.s*g*(1-g),M=Math.cos(y),x=Math.sin(y);return new l.a(255*(g+_*(c*M+r*x)),255*(g+_*(h*M+n*x)),255*(g+_*(i*M)),this.opacity)}}))},function(E,T,e){"use strict";T.b=b,T.a=P;var t=e(90),l=e(89),s=e(198),c=18,r=.96422,h=1,n=.82521,i=4/29,a=6/29,o=3*a*a,u=a*a*a;function f(L){if(L instanceof y)return new y(L.l,L.a,L.b,L.opacity);if(L instanceof A)return O(L);L instanceof l.a||(L=e.i(l.b)(L));var W=x(L.r),F=x(L.g),K=x(L.b),V=g((.2225045*W+.7168786*F+.0606169*K)/h),k,Z;return W===F&&F===K?k=Z=V:(k=g((.4360747*W+.3850649*F+.1430804*K)/r),Z=g((.0139322*W+.0971045*F+.7141733*K)/n)),new y(116*V-16,500*(k-V),200*(V-Z),L.opacity)}function v(L,W){return new y(L,0,0,W==null?1:W)}function b(L,W,F,K){return arguments.length===1?f(L):new y(L,W,F,K==null?1:K)}function y(L,W,F,K){this.l=+L,this.a=+W,this.b=+F,this.opacity=+K}e.i(t.a)(y,b,e.i(t.b)(l.c,{brighter:function(L){return new y(this.l+c*(L==null?1:L),this.a,this.b,this.opacity)},darker:function(L){return new y(this.l-c*(L==null?1:L),this.a,this.b,this.opacity)},rgb:function(){var L=(this.l+16)/116,W=isNaN(this.a)?L:L+this.a/500,F=isNaN(this.b)?L:L-this.b/200;return W=r*_(W),L=h*_(L),F=n*_(F),new l.a(M(3.1338561*W-1.6168667*L-.4906146*F),M(-.9787684*W+1.9161415*L+.033454*F),M(.0719453*W-.2289914*L+1.4052427*F),this.opacity)}}));function g(L){return L>u?Math.pow(L,1/3):L/o+i}function _(L){return L>a?L*L*L:o*(L-i)}function M(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function x(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function m(L){if(L instanceof A)return new A(L.h,L.c,L.l,L.opacity);if(L instanceof y||(L=f(L)),L.a===0&&L.b===0)return new A(NaN,0<L.l&&L.l<100?0:NaN,L.l,L.opacity);var W=Math.atan2(L.b,L.a)*s.a;return new A(W<0?W+360:W,Math.sqrt(L.a*L.a+L.b*L.b),L.l,L.opacity)}function S(L,W,F,K){return arguments.length===1?m(L):new A(F,W,L,K==null?1:K)}function P(L,W,F,K){return arguments.length===1?m(L):new A(L,W,F,K==null?1:K)}function A(L,W,F,K){this.h=+L,this.c=+W,this.l=+F,this.opacity=+K}function O(L){if(isNaN(L.h))return new y(L.l,0,0,L.opacity);var W=L.h*s.b;return new y(L.l,Math.cos(W)*L.c,Math.sin(W)*L.c,L.opacity)}e.i(t.a)(A,P,e.i(t.b)(l.c,{brighter:function(L){return new A(this.h,this.c,this.l+c*(L==null?1:L),this.opacity)},darker:function(L){return new A(this.h,this.c,this.l-c*(L==null?1:L),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(E,T,e){"use strict";var t={value:function(){}};function l(){for(var n=0,i=arguments.length,a={},o;n<i;++n){if(!(o=arguments[n]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new s(a)}function s(n){this._=n}function c(n,i){return n.trim().split(/^|\s+/).map(function(a){var o="",u=a.indexOf(".");if(u>=0&&(o=a.slice(u+1),a=a.slice(0,u)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:o}})}s.prototype=l.prototype={constructor:s,on:function(n,i){var a=this._,o=c(n+"",a),u,f=-1,v=o.length;if(arguments.length<2){for(;++f<v;)if((u=(n=o[f]).type)&&(u=r(a[u],n.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<v;)if(u=(n=o[f]).type)a[u]=h(a[u],n.name,i);else if(i==null)for(u in a)a[u]=h(a[u],n.name,null);return this},copy:function(){var n={},i=this._;for(var a in i)n[a]=i[a].slice();return new s(n)},call:function(n,i){if((u=arguments.length-2)>0)for(var a=new Array(u),o=0,u,f;o<u;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],o=0,u=f.length;o<u;++o)f[o].value.apply(i,a)},apply:function(n,i,a){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],u=0,f=o.length;u<f;++u)o[u].value.apply(i,a)}};function r(n,i){for(var a=0,o=n.length,u;a<o;++a)if((u=n[a]).name===i)return u.value}function h(n,i,a){for(var o=0,u=n.length;o<u;++o)if(n[o].name===i){n[o]=t,n=n.slice(0,o).concat(n.slice(o+1));break}return a!=null&&n.push({name:i,value:a}),n}T.a=l},function(E,T,e){"use strict";var t=e(441);e.d(T,"a",function(){return t.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return l}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=1.70158,l=function r(h){h=+h;function n(i){return i*i*((h+1)*i-h)}return n.overshoot=r,n}(t),s=function r(h){h=+h;function n(i){return--i*i*((h+1)*i+h)+1}return n.overshoot=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<1?i*i*((h+1)*i-h):(i-=2)*i*((h+1)*i+h)+2)/2}return n.overshoot=r,n}(t)},function(E,T,e){"use strict";T.b=u,T.a=f,T.c=v;var t=4/11,l=6/11,s=8/11,c=3/4,r=9/11,h=10/11,n=15/16,i=21/22,a=63/64,o=1/t/t;function u(b){return 1-f(1-b)}function f(b){return(b=+b)<t?o*b*b:b<s?o*(b-=l)*b+c:b<h?o*(b-=r)*b+n:o*(b-=i)*b+a}function v(b){return((b*=2)<=1?1-f(1-b):f(b-1)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return 1-Math.sqrt(1-c*c)}function l(c){return Math.sqrt(1- --c*c)}function s(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return c*c*c}function l(c){return--c*c*c+1}function s(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}},function(E,T,e){"use strict";e.d(T,"b",function(){return c}),e.d(T,"a",function(){return r}),e.d(T,"c",function(){return h});var t=2*Math.PI,l=1,s=.3,c=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return i*Math.pow(2,10*--f)*Math.sin((o-f)/a)}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s),r=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return 1-i*Math.pow(2,-10*(f=+f))*Math.sin((f+o)/a)}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s),h=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return((f=f*2-1)<0?i*Math.pow(2,10*f)*Math.sin((o-f)/a):2-i*Math.pow(2,-10*f)*Math.sin((o+f)/a))/2}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s)},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return Math.pow(2,10*c-10)}function l(c){return 1-Math.pow(2,-10*c)}function s(c){return((c*=2)<=1?Math.pow(2,10*c-10):2-Math.pow(2,10-10*c))/2}},function(E,T,e){"use strict";T.a=t;function t(l){return+l}},function(E,T,e){"use strict";e.d(T,"b",function(){return l}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=3,l=function r(h){h=+h;function n(i){return Math.pow(i,h)}return n.exponent=r,n}(t),s=function r(h){h=+h;function n(i){return 1-Math.pow(1-i,h)}return n.exponent=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<=1?Math.pow(i,h):2-Math.pow(2-i,h))/2}return n.exponent=r,n}(t)},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return c*c}function l(c){return c*(2-c)}function s(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}},function(E,T,e){"use strict";T.b=s,T.c=c,T.a=r;var t=Math.PI,l=t/2;function s(h){return 1-Math.cos(h*l)}function c(h){return Math.sin(h*l)}function r(h){return(1-Math.cos(t*h))/2}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(92);e.d(T,"interpolate",function(){return t.a});var l=e(200);e.d(T,"interpolateArray",function(){return l.a});var s=e(91);e.d(T,"interpolateBasis",function(){return s.a});var c=e(201);e.d(T,"interpolateBasisClosed",function(){return c.a});var r=e(203);e.d(T,"interpolateDate",function(){return r.a});var h=e(59);e.d(T,"interpolateNumber",function(){return h.a});var n=e(204);e.d(T,"interpolateObject",function(){return n.a});var i=e(459);e.d(T,"interpolateRound",function(){return i.a});var a=e(206);e.d(T,"interpolateString",function(){return a.a});var o=e(461);e.d(T,"interpolateTransformCss",function(){return o.a}),e.d(T,"interpolateTransformSvg",function(){return o.b});var u=e(463);e.d(T,"interpolateZoom",function(){return u.a});var f=e(205);e.d(T,"interpolateRgb",function(){return f.a}),e.d(T,"interpolateRgbBasis",function(){return f.b}),e.d(T,"interpolateRgbBasisClosed",function(){return f.c});var v=e(456);e.d(T,"interpolateHsl",function(){return v.a}),e.d(T,"interpolateHslLong",function(){return v.b});var b=e(457);e.d(T,"interpolateLab",function(){return b.a});var y=e(455);e.d(T,"interpolateHcl",function(){return y.a}),e.d(T,"interpolateHclLong",function(){return y.b});var g=e(454);e.d(T,"interpolateCubehelix",function(){return g.a}),e.d(T,"interpolateCubehelixLong",function(){return g.b});var _=e(458);e.d(T,"quantize",function(){return _.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function h(n){n=+n;function i(a,o){var u=r((a=e.i(t.a)(a)).h,(o=e.i(t.a)(o)).h),f=e.i(l.a)(a.s,o.s),v=e.i(l.a)(a.l,o.l),b=e.i(l.a)(a.opacity,o.opacity);return function(y){return a.h=u(y),a.s=f(y),a.l=v(Math.pow(y,n)),a.opacity=b(y),a+""}}return i.gamma=h,i}(1)}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.b)(h)).h,(n=e.i(t.b)(n)).h),a=e.i(l.a)(h.c,n.c),o=e.i(l.a)(h.l,n.l),u=e.i(l.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.c=a(f),h.l=o(f),h.opacity=u(f),h+""}}}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.d)(h)).h,(n=e.i(t.d)(n)).h),a=e.i(l.a)(h.s,n.s),o=e.i(l.a)(h.l,n.l),u=e.i(l.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.s=a(f),h.l=o(f),h.opacity=u(f),h+""}}}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";T.a=s;var t=e(12),l=e(41);function s(c,r){var h=e.i(l.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(l.a)(c.a,r.a),i=e.i(l.a)(c.b,r.b),a=e.i(l.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";T.a=function(t,l){for(var s=new Array(l),c=0;c<l;++c)s[c]=t(c/(l-1));return s}},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l-=t,function(s){return Math.round(t+l*s)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return l});var t=180/Math.PI,l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,u;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(u=s*r+c*h)&&(r-=s*u,h-=c*u),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,u/=o),s*h<c*r&&(s=-s,c=-c,u=-u,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(u)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(59),l=e(462);function s(h,n,i,a){function o(y){return y.length?y.pop()+" ":""}function u(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(y,g,_,M){y!==g?(y-g>180?g+=360:g-y>180&&(y+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(y,g)})):g&&_.push(o(_)+"rotate("+g+a)}function v(y,g,_,M){y!==g?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(y,g)}):g&&_.push(o(_)+"skewX("+g+a)}function b(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(y,g){var _=[],M=[];return y=h(y),g=h(g),u(y.translateX,y.translateY,g.translateX,g.translateY,_,M),f(y.rotate,g.rotate,_,M),v(y.skewX,g.skewX,_,M),b(y.scaleX,y.scaleY,g.scaleX,g.scaleY,_,M),y=g=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var c=s(l.a,"px, ","px)","deg)"),r=s(l.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(460),l,s,c,r;function h(i){return i==="none"?t.a:(l||(l=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),l.style.transform=i,i=c.getComputedStyle(s.appendChild(l),null).getPropertyValue("transform"),s.removeChild(l),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,l=2,s=4,c=1e-12;function r(i){return((i=Math.exp(i))+1/i)/2}function h(i){return((i=Math.exp(i))-1/i)/2}function n(i){return((i=Math.exp(2*i))-1)/(i+1)}T.a=function(i,a){var o=i[0],u=i[1],f=i[2],v=a[0],b=a[1],y=a[2],g=v-o,_=b-u,M=g*g+_*_,x,m;if(M<c)m=Math.log(y/f)/t,x=function(W){return[o+W*g,u+W*_,f*Math.exp(t*W*m)]};else{var S=Math.sqrt(M),P=(y*y-f*f+s*M)/(2*f*l*S),A=(y*y-f*f-s*M)/(2*y*l*S),O=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(A*A+1)-A);m=(L-O)/t,x=function(W){var F=W*m,K=r(O),V=f/(l*S)*(K*n(t*F+O)-h(O));return[o+V*g,u+V*_,f*K/r(t*F+O)]}}return x.duration=m*1e3,x}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function n(i){i=+i;function a(o,u){var f=h((o=e.i(t.a)(o)).h,(u=e.i(t.a)(u)).h),v=e.i(l.a)(o.s,u.s),b=e.i(l.a)(o.l,u.l),y=e.i(l.a)(o.opacity,u.opacity);return function(g){return o.h=f(g),o.s=v(g),o.l=b(Math.pow(g,i)),o.opacity=y(g),o+""}}return a.gamma=n,a}(1)}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=function(l){var s=l.length;return function(c){return l[Math.max(0,Math.min(s-1,Math.floor(c*s)))]}}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.b)(n)).h,(i=e.i(t.b)(i)).h),o=e.i(l.a)(n.c,i.c),u=e.i(l.a)(n.l,i.l),f=e.i(l.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.c=o(v),n.l=u(v),n.opacity=f(v),n+""}}}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.d)(n)).h,(i=e.i(t.d)(i)).h),o=e.i(l.a)(n.s,i.s),u=e.i(l.a)(n.l,i.l),f=e.i(l.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.s=o(v),n.l=u(v),n.opacity=f(v),n+""}}}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=e(32),l=function(s,c){var r=e.i(t.b)(+s,+c);return function(h){var n=r(h);return n-360*Math.floor(n/360)}}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(c,r){var h=e.i(l.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(l.a)(c.a,r.a),i=e.i(l.a)(c.b,r.b),a=e.i(l.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";function t(l,s){for(var c=0,r=s.length-1,h=s[0],n=new Array(r<0?0:r);c<r;)n[c]=l(h,h=s[++c]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return n[a](i-a)}}},function(E,T,e){"use strict";var t=function(l,s){for(var c=new Array(s),r=0;r<s;++r)c[r]=l(r/(s-1));return c}},function(E,T,e){"use strict";var t=function(l,s){return l=+l,s=+s,function(c){return Math.round(l*(1-c)+s*c)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return l});var t=180/Math.PI,l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,u;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(u=s*r+c*h)&&(r-=s*u,h-=c*u),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,u/=o),s*h<c*r&&(s=-s,c=-c,u=-u,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(u)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(60),l=e(475);function s(h,n,i,a){function o(y){return y.length?y.pop()+" ":""}function u(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(y,g,_,M){y!==g?(y-g>180?g+=360:g-y>180&&(y+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(y,g)})):g&&_.push(o(_)+"rotate("+g+a)}function v(y,g,_,M){y!==g?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(y,g)}):g&&_.push(o(_)+"skewX("+g+a)}function b(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(y,g){var _=[],M=[];return y=h(y),g=h(g),u(y.translateX,y.translateY,g.translateX,g.translateY,_,M),f(y.rotate,g.rotate,_,M),v(y.skewX,g.skewX,_,M),b(y.scaleX,y.scaleY,g.scaleX,g.scaleY,_,M),y=g=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var c=s(l.a,"px, ","px)","deg)"),r=s(l.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(473),l,s,c,r;function h(i){return i==="none"?t.a:(l||(l=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),l.style.transform=i,i=c.getComputedStyle(s.appendChild(l),null).getPropertyValue("transform"),s.removeChild(l),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,l=2,s=4,c=1e-12;function r(a){return((a=Math.exp(a))+1/a)/2}function h(a){return((a=Math.exp(a))-1/a)/2}function n(a){return((a=Math.exp(2*a))-1)/(a+1)}var i=function(a,o){var u=a[0],f=a[1],v=a[2],b=o[0],y=o[1],g=o[2],_=b-u,M=y-f,x=_*_+M*M,m,S;if(x<c)S=Math.log(g/v)/t,m=function(F){return[u+F*_,f+F*M,v*Math.exp(t*F*S)]};else{var P=Math.sqrt(x),A=(g*g-v*v+s*x)/(2*v*l*P),O=(g*g-v*v-s*x)/(2*g*l*P),L=Math.log(Math.sqrt(A*A+1)-A),W=Math.log(Math.sqrt(O*O+1)-O);S=(W-L)/t,m=function(F){var K=F*S,V=r(L),k=v/(l*P)*(V*n(t*K+L)-h(L));return[u+k*_,f+k*M,v*V/r(t*K+L)]}}return m.duration=S*1e3,m}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";var t=e(61),l=e(215);T.a=function(s){return e.i(l.a)(e.i(t.a)(s).call(document.documentElement))}},function(E,T,e){"use strict";T.a=l;var t=0;function l(){return new s}function s(){this._="@"+(++t).toString(36)}s.prototype=l.prototype={constructor:s,get:function(c){for(var r=this._;!(r in c);)if(!(c=c.parentNode))return;return c[r]},set:function(c,r){return c[this._]=r},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s){var c=e.i(t.a)();return c.changedTouches&&(c=c.changedTouches[0]),e.i(l.a)(s,c)}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){return typeof l=="string"?new t.b([document.querySelectorAll(l)],[document.documentElement]):new t.b([l==null?[]:l],t.c)}},function(E,T,e){"use strict";var t=e(61);T.a=function(l){var s=typeof l=="function"?l:e.i(t.a)(l);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}},function(E,T,e){"use strict";var t=e(97);function l(i){return function(){this.removeAttribute(i)}}function s(i){return function(){this.removeAttributeNS(i.space,i.local)}}function c(i,a){return function(){this.setAttribute(i,a)}}function r(i,a){return function(){this.setAttributeNS(i.space,i.local,a)}}function h(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function n(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}T.a=function(i,a){var o=e.i(t.a)(i);if(arguments.length<2){var u=this.node();return o.local?u.getAttributeNS(o.space,o.local):u.getAttribute(o)}return this.each((a==null?o.local?s:l:typeof a=="function"?o.local?n:h:o.local?r:c)(o,a))}},function(E,T,e){"use strict";T.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(E,T,e){"use strict";function t(a){return a.trim().split(/^|\s+/)}function l(a){return a.classList||new s(a)}function s(a){this._node=a,this._names=t(a.getAttribute("class")||"")}s.prototype={add:function(a){var o=this._names.indexOf(a);o<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var o=this._names.indexOf(a);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function c(a,o){for(var u=l(a),f=-1,v=o.length;++f<v;)u.add(o[f])}function r(a,o){for(var u=l(a),f=-1,v=o.length;++f<v;)u.remove(o[f])}function h(a){return function(){c(this,a)}}function n(a){return function(){r(this,a)}}function i(a,o){return function(){(o.apply(this,arguments)?c:r)(this,a)}}T.a=function(a,o){var u=t(a+"");if(arguments.length<2){for(var f=l(this.node()),v=-1,b=u.length;++v<b;)if(!f.contains(u[v]))return!1;return!0}return this.each((typeof o=="function"?i:o?h:n)(u,o))}},function(E,T,e){"use strict";function t(){var s=this.cloneNode(!1),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}function l(){var s=this.cloneNode(!0),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}T.a=function(s){return this.select(s?l:t)}},function(E,T,e){"use strict";var t=e(18),l=e(216),s=e(477),c="$";function r(n,i,a,o,u,f){for(var v=0,b,y=i.length,g=f.length;v<g;++v)(b=i[v])?(b.__data__=f[v],o[v]=b):a[v]=new l.b(n,f[v]);for(;v<y;++v)(b=i[v])&&(u[v]=b)}function h(n,i,a,o,u,f,v){var b,y,g={},_=i.length,M=f.length,x=new Array(_),m;for(b=0;b<_;++b)(y=i[b])&&(x[b]=m=c+v.call(y,y.__data__,b,i),m in g?u[b]=y:g[m]=y);for(b=0;b<M;++b)m=c+v.call(n,f[b],b,f),(y=g[m])?(o[b]=y,y.__data__=f[b],g[m]=null):a[b]=new l.b(n,f[b]);for(b=0;b<_;++b)(y=i[b])&&g[x[b]]===y&&(u[b]=y)}T.a=function(n,i){if(!n)return m=new Array(this.size()),g=-1,this.each(function(V){m[++g]=V}),m;var a=i?h:r,o=this._parents,u=this._groups;typeof n!="function"&&(n=e.i(s.a)(n));for(var f=u.length,v=new Array(f),b=new Array(f),y=new Array(f),g=0;g<f;++g){var _=o[g],M=u[g],x=M.length,m=n.call(_,_&&_.__data__,g,o),S=m.length,P=b[g]=new Array(S),A=v[g]=new Array(S),O=y[g]=new Array(x);a(_,M,P,A,O,m,i);for(var L=0,W=0,F,K;L<S;++L)if(F=P[L]){for(L>=W&&(W=L+1);!(K=A[W])&&++W<S;);F._next=K||null}}return v=new t.b(v,o),v._enter=b,v._exit=y,v}},function(E,T,e){"use strict";T.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(E,T,e){"use strict";var t=e(102);function l(r,h,n){var i=e.i(t.a)(r),a=i.CustomEvent;typeof a=="function"?a=new a(h,n):(a=i.document.createEvent("Event"),n?(a.initEvent(h,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(h,!1,!1)),r.dispatchEvent(a)}function s(r,h){return function(){return l(this,r,h)}}function c(r,h){return function(){return l(this,r,h.apply(this,arguments))}}T.a=function(r,h){return this.each((typeof h=="function"?c:s)(r,h))}},function(E,T,e){"use strict";T.a=function(t){for(var l=this._groups,s=0,c=l.length;s<c;++s)for(var r=l[s],h=0,n=r.length,i;h<n;++h)(i=r[h])&&t.call(i,i.__data__,h,r);return this}},function(E,T,e){"use strict";T.a=function(){return!this.node()}},function(E,T,e){"use strict";var t=e(217),l=e(18);T.a=function(){return new l.b(this._exit||this._groups.map(t.a),this._parents)}},function(E,T,e){"use strict";var t=e(18),l=e(214);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],u,f=0;f<a;++f)(u=i[f])&&s.call(u,u.__data__,f,i)&&o.push(u);return new t.b(h,this._parents)}},function(E,T,e){"use strict";function t(){this.innerHTML=""}function l(c){return function(){this.innerHTML=c}}function s(c){return function(){var r=c.apply(this,arguments);this.innerHTML=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:l)(c)):this.node().innerHTML}},function(E,T,e){"use strict";var t=e(61),l=e(100);function s(){return null}T.a=function(c,r){var h=typeof c=="function"?c:e.i(t.a)(c),n=r==null?s:typeof r=="function"?r:e.i(l.a)(r);return this.select(function(){return this.insertBefore(h.apply(this,arguments),n.apply(this,arguments)||null)})}},function(E,T,e){"use strict";T.a=function(t,l,s){var c=this.enter(),r=this,h=this.exit();return c=typeof t=="function"?t(c):c.append(t+""),l!=null&&(r=l(r)),s==null?h.remove():s(h),c&&r?c.merge(r).order():r}},function(E,T,e){"use strict";function t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){for(var s=this._groups,c=l._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],u=c[a],f=o.length,v=i[a]=new Array(f),b,y=0;y<f;++y)(b=o[y]||u[y])&&(v[y]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents)}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,l=0,s=t.length;l<s;++l)for(var c=t[l],r=0,h=c.length;r<h;++r){var n=c[r];if(n)return n}return null}},function(E,T,e){"use strict";T.a=function(){var t=new Array(this.size()),l=-1;return this.each(function(){t[++l]=this}),t}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,l=-1,s=t.length;++l<s;)for(var c=t[l],r=c.length-1,h=c[r],n;--r>=0;)(n=c[r])&&(h&&n.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(n,h),h=n);return this}},function(E,T,e){"use strict";function t(c){return function(){delete this[c]}}function l(c,r){return function(){this[c]=r}}function s(c,r){return function(){var h=r.apply(this,arguments);h==null?delete this[c]:this[c]=h}}T.a=function(c,r){return arguments.length>1?this.each((r==null?t:typeof r=="function"?s:l)(c,r)):this.node()[c]}},function(E,T,e){"use strict";function t(){this.nextSibling&&this.parentNode.appendChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";function t(){var l=this.parentNode;l&&l.removeChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18),l=e(100);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=new Array(a),u,f,v=0;v<a;++v)(u=i[v])&&(f=s.call(u,u.__data__,v,i))&&("__data__"in u&&(f.__data__=u.__data__),o[v]=f);return new t.b(h,this._parents)}},function(E,T,e){"use strict";var t=e(18),l=e(219);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=[],n=[],i=0;i<r;++i)for(var a=c[i],o=a.length,u,f=0;f<o;++f)(u=a[f])&&(h.push(s.call(u,u.__data__,f,a)),n.push(u));return new t.b(h,n)}},function(E,T,e){"use strict";T.a=function(){var t=0;return this.each(function(){++t}),t}},function(E,T,e){"use strict";var t=e(18);T.a=function(s){s||(s=l);function c(b,y){return b&&y?s(b.__data__,y.__data__):!b-!y}for(var r=this._groups,h=r.length,n=new Array(h),i=0;i<h;++i){for(var a=r[i],o=a.length,u=n[i]=new Array(o),f,v=0;v<o;++v)(f=a[v])&&(u[v]=f);u.sort(c)}return new t.b(n,this._parents).order()};function l(s,c){return s<c?-1:s>c?1:s>=c?0:NaN}},function(E,T,e){"use strict";function t(){this.textContent=""}function l(c){return function(){this.textContent=c}}function s(c){return function(){var r=c.apply(this,arguments);this.textContent=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:l)(c)):this.node().textContent}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s,c,r){arguments.length<3&&(r=c,c=e.i(t.a)().changedTouches);for(var h=0,n=c?c.length:0,i;h<n;++h)if((i=c[h]).identifier===r)return e.i(l.a)(s,i);return null}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s,c){c==null&&(c=e.i(t.a)().touches);for(var r=0,h=c?c.length:0,n=new Array(h);r<h;++r)n[r]=e.i(l.a)(s,c[r]);return n}},function(E,T,e){"use strict";var t=e(104);T.a=function(l,s,c){var r=new t.d,h=s;return s==null?(r.restart(l,s,c),r):(s=+s,c=c==null?e.i(t.a)():+c,r.restart(function n(i){i+=h,r.restart(n,h+=s,c),l(i)},s,c),r)}},function(E,T,e){"use strict";var t=e(104);T.a=function(l,s,c){var r=new t.d;return s=s==null?0:+s,r.restart(function(h){r.stop(),l(h+s)},s,c),r}},function(E,T,e){"use strict";var t=e(27),l=e(13),s=[null];T.a=function(c,r){var h=c.__transition,n,i;if(h){r=r==null?null:r+"";for(i in h)if((n=h[i]).state>l.d&&n.name===r)return new t.b([[c]],s,r,+i)}return null}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(516),l=e(27);e.d(T,"transition",function(){return l.a});var s=e(514);e.d(T,"active",function(){return s.a});var c=e(220);e.d(T,"interrupt",function(){return c.a})},function(E,T,e){"use strict";var t=e(22),l=e(517),s=e(518);t.selection.prototype.interrupt=l.a,t.selection.prototype.transition=s.a},function(E,T,e){"use strict";var t=e(220);T.a=function(l){return this.each(function(){e.i(t.a)(this,l)})}},function(E,T,e){"use strict";var t=e(27),l=e(13),s=e(199),c=e(103),r={time:null,delay:0,duration:250,ease:s.easeCubicInOut};function h(n,i){for(var a;!(a=n.__transition)||!(a=a[i]);)if(!(n=n.parentNode))return r.time=e.i(c.now)(),r;return a}T.a=function(n){var i,a;n instanceof t.b?(i=n._id,n=n._name):(i=e.i(t.c)(),(a=r).time=e.i(c.now)(),n=n==null?null:n+"");for(var o=this._groups,u=o.length,f=0;f<u;++f)for(var v=o[f],b=v.length,y,g=0;g<b;++g)(y=v[g])&&e.i(l.h)(y,n,i,g,v,a||h(y,i));return new t.b(o,this._parents,n,i)}},function(E,T,e){"use strict";var t=e(94),l=e(22),s=e(63),c=e(221);function r(u){return function(){this.removeAttribute(u)}}function h(u){return function(){this.removeAttributeNS(u.space,u.local)}}function n(u,f,v){var b,y=v+"",g;return function(){var _=this.getAttribute(u);return _===y?null:_===b?g:g=f(b=_,v)}}function i(u,f,v){var b,y=v+"",g;return function(){var _=this.getAttributeNS(u.space,u.local);return _===y?null:_===b?g:g=f(b=_,v)}}function a(u,f,v){var b,y,g;return function(){var _,M=v(this),x;return M==null?void this.removeAttribute(u):(_=this.getAttribute(u),x=M+"",_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M)))}}function o(u,f,v){var b,y,g;return function(){var _,M=v(this),x;return M==null?void this.removeAttributeNS(u.space,u.local):(_=this.getAttributeNS(u.space,u.local),x=M+"",_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M)))}}T.a=function(u,f){var v=e.i(l.namespace)(u),b=v==="transform"?t.e:c.a;return this.attrTween(u,typeof f=="function"?(v.local?o:a)(v,b,e.i(s.b)(this,"attr."+u,f)):f==null?(v.local?h:r)(v):(v.local?i:n)(v,b,f))}},function(E,T,e){"use strict";var t=e(22);function l(h,n){return function(i){this.setAttribute(h,n.call(this,i))}}function s(h,n){return function(i){this.setAttributeNS(h.space,h.local,n.call(this,i))}}function c(h,n){var i,a;function o(){var u=n.apply(this,arguments);return u!==a&&(i=(a=u)&&s(h,u)),i}return o._value=n,o}function r(h,n){var i,a;function o(){var u=n.apply(this,arguments);return u!==a&&(i=(a=u)&&l(h,u)),i}return o._value=n,o}T.a=function(h,n){var i="attr."+h;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=e.i(t.namespace)(h);return this.tween(i,(a.local?c:r)(a,n))}},function(E,T,e){"use strict";var t=e(13);function l(c,r){return function(){e.i(t.g)(this,c).delay=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.g)(this,c).delay=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?l:s)(r,c)):e.i(t.f)(this.node(),r).delay}},function(E,T,e){"use strict";var t=e(13);function l(c,r){return function(){e.i(t.e)(this,c).duration=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.e)(this,c).duration=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?l:s)(r,c)):e.i(t.f)(this.node(),r).duration}},function(E,T,e){"use strict";var t=e(13);function l(s,c){if(typeof c!="function")throw new Error;return function(){e.i(t.e)(this,s).ease=c}}T.a=function(s){var c=this._id;return arguments.length?this.each(l(c,s)):e.i(t.f)(this.node(),c).ease}},function(E,T,e){"use strict";var t=e(13);T.a=function(){var l,s,c=this,r=c._id,h=c.size();return new Promise(function(n,i){var a={value:i},o={value:function(){--h==0&&n()}};c.each(function(){var u=e.i(t.e)(this,r),f=u.on;f!==l&&(s=(l=f).copy(),s._.cancel.push(a),s._.interrupt.push(a),s._.end.push(o)),u.on=s})})}},function(E,T,e){"use strict";var t=e(22),l=e(27);T.a=function(s){typeof s!="function"&&(s=e.i(t.matcher)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],u,f=0;f<a;++f)(u=i[f])&&s.call(u,u.__data__,f,i)&&o.push(u);return new l.b(h,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(27);T.a=function(l){if(l._id!==this._id)throw new Error;for(var s=this._groups,c=l._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],u=c[a],f=o.length,v=i[a]=new Array(f),b,y=0;y<f;++y)(b=o[y]||u[y])&&(v[y]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(13);function l(c){return(c+"").trim().split(/^|\s+/).every(function(r){var h=r.indexOf(".");return h>=0&&(r=r.slice(0,h)),!r||r==="start"})}function s(c,r,h){var n,i,a=l(r)?t.g:t.e;return function(){var o=a(this,c),u=o.on;u!==n&&(i=(n=u).copy()).on(r,h),o.on=i}}T.a=function(c,r){var h=this._id;return arguments.length<2?e.i(t.f)(this.node(),h).on.on(c):this.each(s(h,c,r))}},function(E,T,e){"use strict";function t(l){return function(){var s=this.parentNode;for(var c in this.__transition)if(+c!==l)return;s&&s.removeChild(this)}}T.a=function(){return this.on("end.remove",t(this._id))}},function(E,T,e){"use strict";var t=e(22),l=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selector)(c));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var u=n[o],f=u.length,v=a[o]=new Array(f),b,y,g=0;g<f;++g)(b=u[g])&&(y=c.call(b,b.__data__,g,u))&&("__data__"in b&&(y.__data__=b.__data__),v[g]=y,e.i(s.h)(v[g],r,h,g,v,e.i(s.f)(b,h)));return new l.b(a,this._parents,r,h)}},function(E,T,e){"use strict";var t=e(22),l=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selectorAll)(c));for(var n=this._groups,i=n.length,a=[],o=[],u=0;u<i;++u)for(var f=n[u],v=f.length,b,y=0;y<v;++y)if(b=f[y]){for(var g=c.call(b,b.__data__,y,f),_,M=e.i(s.f)(b,h),x=0,m=g.length;x<m;++x)(_=g[x])&&e.i(s.h)(_,r,h,x,g,M);a.push(g),o.push(b)}return new l.b(a,o,r,h)}},function(E,T,e){"use strict";var t=e(22),l=t.selection.prototype.constructor;T.a=function(){return new l(this._groups,this._parents)}},function(E,T,e){"use strict";var t=e(94),l=e(22),s=e(13),c=e(63),r=e(221);function h(u,f){var v,b,y;return function(){var g=e.i(l.style)(this,u),_=(this.style.removeProperty(u),e.i(l.style)(this,u));return g===_?null:g===v&&_===b?y:y=f(v=g,b=_)}}function n(u){return function(){this.style.removeProperty(u)}}function i(u,f,v){var b,y=v+"",g;return function(){var _=e.i(l.style)(this,u);return _===y?null:_===b?g:g=f(b=_,v)}}function a(u,f,v){var b,y,g;return function(){var _=e.i(l.style)(this,u),M=v(this),x=M+"";return M==null&&(x=M=(this.style.removeProperty(u),e.i(l.style)(this,u))),_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M))}}function o(u,f){var v,b,y,g="style."+f,_="end."+g,M;return function(){var x=e.i(s.e)(this,u),m=x.on,S=x.value[g]==null?M||(M=n(f)):void 0;(m!==v||y!==S)&&(b=(v=m).copy()).on(_,y=S),x.on=b}}T.a=function(u,f,v){var b=(u+="")==="transform"?t.a:r.a;return f==null?this.styleTween(u,h(u,b)).on("end.style."+u,n(u)):typeof f=="function"?this.styleTween(u,a(u,b,e.i(c.b)(this,"style."+u,f))).each(o(this._id,u)):this.styleTween(u,i(u,b,f),v).on("end.style."+u,null)}},function(E,T,e){"use strict";function t(s,c,r){return function(h){this.style.setProperty(s,c.call(this,h),r)}}function l(s,c,r){var h,n;function i(){var a=c.apply(this,arguments);return a!==n&&(h=(n=a)&&t(s,a,r)),h}return i._value=c,i}T.a=function(s,c,r){var h="style."+(s+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(c==null)return this.tween(h,null);if(typeof c!="function")throw new Error;return this.tween(h,l(s,c,r==null?"":r))}},function(E,T,e){"use strict";var t=e(63);function l(c){return function(){this.textContent=c}}function s(c){return function(){var r=c(this);this.textContent=r==null?"":r}}T.a=function(c){return this.tween("text",typeof c=="function"?s(e.i(t.b)(this,"text",c)):l(c==null?"":c+""))}},function(E,T,e){"use strict";function t(s){return function(c){this.textContent=s.call(this,c)}}function l(s){var c,r;function h(){var n=s.apply(this,arguments);return n!==r&&(c=(r=n)&&t(n)),c}return h._value=s,h}T.a=function(s){var c="text";if(arguments.length<1)return(c=this.tween(c))&&c._value;if(s==null)return this.tween(c,null);if(typeof s!="function")throw new Error;return this.tween(c,l(s))}},function(E,T,e){"use strict";var t=e(27),l=e(13);T.a=function(){for(var s=this._name,c=this._id,r=e.i(t.c)(),h=this._groups,n=h.length,i=0;i<n;++i)for(var a=h[i],o=a.length,u,f=0;f<o;++f)if(u=a[f]){var v=e.i(l.f)(u,c);e.i(l.h)(u,s,r,f,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new t.b(h,this._parents,s,r)}},function(E,T,e){"use strict";var t=function(l,s,c,r,h,n,i,a){if(s===void 0)throw new Error("invariant requires an error message argument");if(!l){var o;if(s===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[c,r,h,n,i,a],f=0;o=new Error(s.replace(/%s/g,function(){return u[f++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}};E.exports=t},function(E,T,e){(function(t){var l="Expected a function",s=0/0,c="[object Symbol]",r=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,o=typeof t=="object"&&t&&t.Object===Object&&t,u=typeof self=="object"&&self&&self.Object===Object&&self,f=o||u||Function("return this")(),v=Object.prototype,b=v.toString,y=Math.max,g=Math.min,_=function(){return f.Date.now()};function M(A,O,L){var W,F,K,V,k,Z,X=0,it=!1,ft=!1,pt=!0;if(typeof A!="function")throw new TypeError(l);O=P(O)||0,x(L)&&(it=!!L.leading,ft="maxWait"in L,K=ft?y(P(L.maxWait)||0,O):K,pt="trailing"in L?!!L.trailing:pt);function ut(z){var Q=W,gt=F;return W=F=void 0,X=z,V=A.apply(gt,Q),V}function It(z){return X=z,k=setTimeout(Mt,O),it?ut(z):V}function Nt(z){var Q=z-Z,gt=z-X,et=O-Q;return ft?g(et,K-gt):et}function Rt(z){var Q=z-Z,gt=z-X;return Z===void 0||Q>=O||Q<0||ft&&gt>=K}function Mt(){var z=_();if(Rt(z))return bt(z);k=setTimeout(Mt,Nt(z))}function bt(z){return k=void 0,pt&&W?ut(z):(W=F=void 0,V)}function At(){k!==void 0&&clearTimeout(k),X=0,W=Z=F=k=void 0}function rt(){return k===void 0?V:bt(_())}function Pt(){var z=_(),Q=Rt(z);if(W=arguments,F=this,Z=z,Q){if(k===void 0)return It(Z);if(ft)return k=setTimeout(Mt,O),ut(Z)}return k===void 0&&(k=setTimeout(Mt,O)),V}return Pt.cancel=At,Pt.flush=rt,Pt}function x(A){var O=typeof A;return!!A&&(O=="object"||O=="function")}function m(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||m(A)&&b.call(A)==c}function P(A){if(typeof A=="number")return A;if(S(A))return s;if(x(A)){var O=typeof A.valueOf=="function"?A.valueOf():A;A=x(O)?O+"":O}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var L=n.test(A);return L||i.test(A)?a(A.slice(2),L?2:8):h.test(A)?s:+A}E.exports=M}).call(T,e(225))},function(E,T,e){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function r(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(u){return n[u]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(u){o[u]=u}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(u){return!1}}E.exports=r()?Object.assign:function(h,n){for(var i,a=c(h),o,u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var f in i)l.call(i,f)&&(a[f]=i[f]);if(t){o=t(i);for(var v=0;v<o.length;v++)s.call(i,o[v])&&(a[o[v]]=i[o[v]])}}return a}},function(E,T,e){"use strict";var t=function(){},l=e(223),s={},c=Function.call.bind(Object.prototype.hasOwnProperty);t=function(h){var n="Warning: "+h;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(i){}};function r(h,n,i,a,o){for(var u in h)if(c(h,u)){var f;try{if(typeof h[u]!="function"){var v=Error((a||"React class")+": "+i+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof h[u]+"`.");throw v.name="Invariant Violation",v}f=h[u](n,u,a,i,null,l)}catch(y){f=y}if(f&&!(f instanceof Error)&&t((a||"React class")+": type specification of "+i+" `"+u+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var b=o?o():"";t("Failed "+i+" type: "+f.message+(b!=null?b:""))}}}r.resetWarningCache=function(){s={}},E.exports=r},function(E,T,e){"use strict";var t=e(224),l=e(539),s=e(223),c=e(540),r=Function.call.bind(Object.prototype.hasOwnProperty),h=function(){};h=function(i){var a="Warning: "+i;typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(o){}};function n(){return null}E.exports=function(i,a){var o=typeof Symbol=="function"&&Symbol.iterator,u="@@iterator";function f(ut){var It=ut&&(o&&ut[o]||ut[u]);if(typeof It=="function")return It}var v="<<anonymous>>",b={array:M("array"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:x(),arrayOf:m,element:S(),elementType:P(),instanceOf:A,node:F(),objectOf:L,oneOf:O,oneOfType:W,shape:K,exact:V};function y(ut,It){return ut===It?ut!==0||1/ut==1/It:ut!==ut&&It!==It}function g(ut){this.message=ut,this.stack=""}g.prototype=Error.prototype;function _(ut){var It={},Nt=0;function Rt(bt,At,rt,Pt,z,Q,gt){if(Pt=Pt||v,Q=Q||rt,gt!==s){if(a){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}else if(typeof console!="undefined"){var ot=Pt+":"+rt;!It[ot]&&Nt<3&&(h("You are manually calling a React.PropTypes validation function for the `"+Q+"` prop on `"+Pt+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),It[ot]=!0,Nt++)}}return At[rt]==null?bt?At[rt]===null?new g("The "+z+" `"+Q+"` is marked as required "+("in `"+Pt+"`, but its value is `null`.")):new g("The "+z+" `"+Q+"` is marked as required in "+("`"+Pt+"`, but its value is `undefined`.")):null:ut(At,rt,Pt,z,Q)}var Mt=Rt.bind(null,!1);return Mt.isRequired=Rt.bind(null,!0),Mt}function M(ut){function It(Nt,Rt,Mt,bt,At,rt){var Pt=Nt[Rt],z=X(Pt);if(z!==ut){var Q=it(Pt);return new g("Invalid "+bt+" `"+At+"` of type "+("`"+Q+"` supplied to `"+Mt+"`, expected ")+("`"+ut+"`."))}return null}return _(It)}function x(){return _(n)}function m(ut){function It(Nt,Rt,Mt,bt,At){if(typeof ut!="function")return new g("Property `"+At+"` of component `"+Mt+"` has invalid PropType notation inside arrayOf.");var rt=Nt[Rt];if(!Array.isArray(rt)){var Pt=X(rt);return new g("Invalid "+bt+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected an array."))}for(var z=0;z<rt.length;z++){var Q=ut(rt,z,Mt,bt,At+"["+z+"]",s);if(Q instanceof Error)return Q}return null}return _(It)}function S(){function ut(It,Nt,Rt,Mt,bt){var At=It[Nt];if(!i(At)){var rt=X(At);return new g("Invalid "+Mt+" `"+bt+"` of type "+("`"+rt+"` supplied to `"+Rt+"`, expected a single ReactElement."))}return null}return _(ut)}function P(){function ut(It,Nt,Rt,Mt,bt){var At=It[Nt];if(!t.isValidElementType(At)){var rt=X(At);return new g("Invalid "+Mt+" `"+bt+"` of type "+("`"+rt+"` supplied to `"+Rt+"`, expected a single ReactElement type."))}return null}return _(ut)}function A(ut){function It(Nt,Rt,Mt,bt,At){if(!(Nt[Rt]instanceof ut)){var rt=ut.name||v,Pt=pt(Nt[Rt]);return new g("Invalid "+bt+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected ")+("instance of `"+rt+"`."))}return null}return _(It)}function O(ut){if(!Array.isArray(ut))return arguments.length>1?h("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):h("Invalid argument supplied to oneOf, expected an array."),n;function It(Nt,Rt,Mt,bt,At){for(var rt=Nt[Rt],Pt=0;Pt<ut.length;Pt++)if(y(rt,ut[Pt]))return null;var z=JSON.stringify(ut,function(gt,et){var ot=it(et);return ot==="symbol"?String(et):et});return new g("Invalid "+bt+" `"+At+"` of value `"+String(rt)+"` "+("supplied to `"+Mt+"`, expected one of "+z+"."))}return _(It)}function L(ut){function It(Nt,Rt,Mt,bt,At){if(typeof ut!="function")return new g("Property `"+At+"` of component `"+Mt+"` has invalid PropType notation inside objectOf.");var rt=Nt[Rt],Pt=X(rt);if(Pt!=="object")return new g("Invalid "+bt+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected an object."));for(var z in rt)if(r(rt,z)){var Q=ut(rt,z,Mt,bt,At+"."+z,s);if(Q instanceof Error)return Q}return null}return _(It)}function W(ut){if(!Array.isArray(ut))return h("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var It=0;It<ut.length;It++){var Nt=ut[It];if(typeof Nt!="function")return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ft(Nt)+" at index "+It+"."),n}function Rt(Mt,bt,At,rt,Pt){for(var z=0;z<ut.length;z++){var Q=ut[z];if(Q(Mt,bt,At,rt,Pt,s)==null)return null}return new g("Invalid "+rt+" `"+Pt+"` supplied to "+("`"+At+"`."))}return _(Rt)}function F(){function ut(It,Nt,Rt,Mt,bt){return k(It[Nt])?null:new g("Invalid "+Mt+" `"+bt+"` supplied to "+("`"+Rt+"`, expected a ReactNode."))}return _(ut)}function K(ut){function It(Nt,Rt,Mt,bt,At){var rt=Nt[Rt],Pt=X(rt);if(Pt!=="object")return new g("Invalid "+bt+" `"+At+"` of type `"+Pt+"` "+("supplied to `"+Mt+"`, expected `object`."));for(var z in ut){var Q=ut[z];if(!!Q){var gt=Q(rt,z,Mt,bt,At+"."+z,s);if(gt)return gt}}return null}return _(It)}function V(ut){function It(Nt,Rt,Mt,bt,At){var rt=Nt[Rt],Pt=X(rt);if(Pt!=="object")return new g("Invalid "+bt+" `"+At+"` of type `"+Pt+"` "+("supplied to `"+Mt+"`, expected `object`."));var z=l({},Nt[Rt],ut);for(var Q in z){var gt=ut[Q];if(!gt)return new g("Invalid "+bt+" `"+At+"` key `"+Q+"` supplied to `"+Mt+"`.\nBad object: "+JSON.stringify(Nt[Rt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ut),null,"  "));var et=gt(rt,Q,Mt,bt,At+"."+Q,s);if(et)return et}return null}return _(It)}function k(ut){switch(typeof ut){case"number":case"string":case"undefined":return!0;case"boolean":return!ut;case"object":if(Array.isArray(ut))return ut.every(k);if(ut===null||i(ut))return!0;var It=f(ut);if(It){var Nt=It.call(ut),Rt;if(It!==ut.entries){for(;!(Rt=Nt.next()).done;)if(!k(Rt.value))return!1}else for(;!(Rt=Nt.next()).done;){var Mt=Rt.value;if(Mt&&!k(Mt[1]))return!1}}else return!1;return!0;default:return!1}}function Z(ut,It){return ut==="symbol"?!0:It?It["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&It instanceof Symbol:!1}function X(ut){var It=typeof ut;return Array.isArray(ut)?"array":ut instanceof RegExp?"object":Z(It,ut)?"symbol":It}function it(ut){if(typeof ut=="undefined"||ut===null)return""+ut;var It=X(ut);if(It==="object"){if(ut instanceof Date)return"date";if(ut instanceof RegExp)return"regexp"}return It}function ft(ut){var It=it(ut);switch(It){case"array":case"object":return"an "+It;case"boolean":case"date":case"regexp":return"a "+It;default:return It}}function pt(ut){return!ut.constructor||!ut.constructor.name?v:ut.constructor.name}return b.checkPropTypes=c,b.resetWarningCache=c.resetWarningCache,b.PropTypes=b,b}},function(E,T,e){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var t=typeof Symbol=="function"&&Symbol.for,l=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,c=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,h=t?Symbol.for("react.profiler"):60114,n=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,o=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,M=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function m(ot){return typeof ot=="string"||typeof ot=="function"||ot===c||ot===o||ot===h||ot===r||ot===f||ot===v||typeof ot=="object"&&ot!==null&&(ot.$$typeof===y||ot.$$typeof===b||ot.$$typeof===n||ot.$$typeof===i||ot.$$typeof===u||ot.$$typeof===_||ot.$$typeof===M||ot.$$typeof===x||ot.$$typeof===g)}function S(ot){if(typeof ot=="object"&&ot!==null){var xt=ot.$$typeof;switch(xt){case l:var H=ot.type;switch(H){case a:case o:case c:case h:case r:case f:return H;default:var nt=H&&H.$$typeof;switch(nt){case i:case u:case y:case b:case n:return nt;default:return xt}}case s:return xt}}}var P=a,A=o,O=i,L=n,W=l,F=u,K=c,V=y,k=b,Z=s,X=h,it=r,ft=f,pt=!1;function ut(ot){return pt||(pt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),It(ot)||S(ot)===a}function It(ot){return S(ot)===o}function Nt(ot){return S(ot)===i}function Rt(ot){return S(ot)===n}function Mt(ot){return typeof ot=="object"&&ot!==null&&ot.$$typeof===l}function bt(ot){return S(ot)===u}function At(ot){return S(ot)===c}function rt(ot){return S(ot)===y}function Pt(ot){return S(ot)===b}function z(ot){return S(ot)===s}function Q(ot){return S(ot)===h}function gt(ot){return S(ot)===r}function et(ot){return S(ot)===f}T.AsyncMode=P,T.ConcurrentMode=A,T.ContextConsumer=O,T.ContextProvider=L,T.Element=W,T.ForwardRef=F,T.Fragment=K,T.Lazy=V,T.Memo=k,T.Portal=Z,T.Profiler=X,T.StrictMode=it,T.Suspense=ft,T.isAsyncMode=ut,T.isConcurrentMode=It,T.isContextConsumer=Nt,T.isContextProvider=Rt,T.isElement=Mt,T.isForwardRef=bt,T.isFragment=At,T.isLazy=rt,T.isMemo=Pt,T.isPortal=z,T.isProfiler=Q,T.isStrictMode=gt,T.isSuspense=et,T.isValidElementType=m,T.typeOf=S})()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(t){var l=function(){if(typeof Map!="undefined")return Map;function Z(X,it){var ft=-1;return X.some(function(pt,ut){return pt[0]===it?(ft=ut,!0):!1}),ft}return function(){function X(){this.__entries__=[]}return Object.defineProperty(X.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),X.prototype.get=function(it){var ft=Z(this.__entries__,it),pt=this.__entries__[ft];return pt&&pt[1]},X.prototype.set=function(it,ft){var pt=Z(this.__entries__,it);~pt?this.__entries__[pt][1]=ft:this.__entries__.push([it,ft])},X.prototype.delete=function(it){var ft=this.__entries__,pt=Z(ft,it);~pt&&ft.splice(pt,1)},X.prototype.has=function(it){return!!~Z(this.__entries__,it)},X.prototype.clear=function(){this.__entries__.splice(0)},X.prototype.forEach=function(it,ft){ft===void 0&&(ft=null);for(var pt=0,ut=this.__entries__;pt<ut.length;pt++){var It=ut[pt];it.call(ft,It[1],It[0])}},X}()}(),s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,c=function(){return typeof t!="undefined"&&t.Math===Math?t:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(c):function(Z){return setTimeout(function(){return Z(Date.now())},1e3/60)}}(),h=2;function n(Z,X){var it=!1,ft=!1,pt=0;function ut(){it&&(it=!1,Z()),ft&&Nt()}function It(){r(ut)}function Nt(){var Rt=Date.now();if(it){if(Rt-pt<h)return;ft=!0}else it=!0,ft=!1,setTimeout(It,X);pt=Rt}return Nt}var i=20,a=["top","right","bottom","left","width","height","size","weight"],o=typeof MutationObserver!="undefined",u=function(){function Z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),i)}return Z.prototype.addObserver=function(X){~this.observers_.indexOf(X)||this.observers_.push(X),this.connected_||this.connect_()},Z.prototype.removeObserver=function(X){var it=this.observers_,ft=it.indexOf(X);~ft&&it.splice(ft,1),!it.length&&this.connected_&&this.disconnect_()},Z.prototype.refresh=function(){var X=this.updateObservers_();X&&this.refresh()},Z.prototype.updateObservers_=function(){var X=this.observers_.filter(function(it){return it.gatherActive(),it.hasActive()});return X.forEach(function(it){return it.broadcastActive()}),X.length>0},Z.prototype.connect_=function(){!s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Z.prototype.disconnect_=function(){!s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Z.prototype.onTransitionEnd_=function(X){var it=X.propertyName,ft=it===void 0?"":it,pt=a.some(function(ut){return!!~ft.indexOf(ut)});pt&&this.refresh()},Z.getInstance=function(){return this.instance_||(this.instance_=new Z),this.instance_},Z.instance_=null,Z}(),f=function(Z,X){for(var it=0,ft=Object.keys(X);it<ft.length;it++){var pt=ft[it];Object.defineProperty(Z,pt,{value:X[pt],enumerable:!1,writable:!1,configurable:!0})}return Z},v=function(Z){var X=Z&&Z.ownerDocument&&Z.ownerDocument.defaultView;return X||c},b=O(0,0,0,0);function y(Z){return parseFloat(Z)||0}function g(Z){for(var X=[],it=1;it<arguments.length;it++)X[it-1]=arguments[it];return X.reduce(function(ft,pt){var ut=Z["border-"+pt+"-width"];return ft+y(ut)},0)}function _(Z){for(var X=["top","right","bottom","left"],it={},ft=0,pt=X;ft<pt.length;ft++){var ut=pt[ft],It=Z["padding-"+ut];it[ut]=y(It)}return it}function M(Z){var X=Z.getBBox();return O(0,0,X.width,X.height)}function x(Z){var X=Z.clientWidth,it=Z.clientHeight;if(!X&&!it)return b;var ft=v(Z).getComputedStyle(Z),pt=_(ft),ut=pt.left+pt.right,It=pt.top+pt.bottom,Nt=y(ft.width),Rt=y(ft.height);if(ft.boxSizing==="border-box"&&(Math.round(Nt+ut)!==X&&(Nt-=g(ft,"left","right")+ut),Math.round(Rt+It)!==it&&(Rt-=g(ft,"top","bottom")+It)),!S(Z)){var Mt=Math.round(Nt+ut)-X,bt=Math.round(Rt+It)-it;Math.abs(Mt)!==1&&(Nt-=Mt),Math.abs(bt)!==1&&(Rt-=bt)}return O(pt.left,pt.top,Nt,Rt)}var m=function(){return typeof SVGGraphicsElement!="undefined"?function(Z){return Z instanceof v(Z).SVGGraphicsElement}:function(Z){return Z instanceof v(Z).SVGElement&&typeof Z.getBBox=="function"}}();function S(Z){return Z===v(Z).document.documentElement}function P(Z){return s?m(Z)?M(Z):x(Z):b}function A(Z){var X=Z.x,it=Z.y,ft=Z.width,pt=Z.height,ut=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,It=Object.create(ut.prototype);return f(It,{x:X,y:it,width:ft,height:pt,top:it,right:X+ft,bottom:pt+it,left:X}),It}function O(Z,X,it,ft){return{x:Z,y:X,width:it,height:ft}}var L=function(){function Z(X){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=X}return Z.prototype.isActive=function(){var X=P(this.target);return this.contentRect_=X,X.width!==this.broadcastWidth||X.height!==this.broadcastHeight},Z.prototype.broadcastRect=function(){var X=this.contentRect_;return this.broadcastWidth=X.width,this.broadcastHeight=X.height,X},Z}(),W=function(){function Z(X,it){var ft=A(it);f(this,{target:X,contentRect:ft})}return Z}(),F=function(){function Z(X,it,ft){if(this.activeObservations_=[],this.observations_=new l,typeof X!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=X,this.controller_=it,this.callbackCtx_=ft}return Z.prototype.observe=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(X instanceof v(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var it=this.observations_;it.has(X)||(it.set(X,new L(X)),this.controller_.addObserver(this),this.controller_.refresh())}},Z.prototype.unobserve=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(X instanceof v(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var it=this.observations_;!it.has(X)||(it.delete(X),it.size||this.controller_.removeObserver(this))}},Z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Z.prototype.gatherActive=function(){var X=this;this.clearActive(),this.observations_.forEach(function(it){it.isActive()&&X.activeObservations_.push(it)})},Z.prototype.broadcastActive=function(){if(!!this.hasActive()){var X=this.callbackCtx_,it=this.activeObservations_.map(function(ft){return new W(ft.target,ft.broadcastRect())});this.callback_.call(X,it,X),this.clearActive()}},Z.prototype.clearActive=function(){this.activeObservations_.splice(0)},Z.prototype.hasActive=function(){return this.activeObservations_.length>0},Z}(),K=typeof WeakMap!="undefined"?new WeakMap:new l,V=function(){function Z(X){if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var it=u.getInstance(),ft=new F(X,it,this);K.set(this,ft)}return Z}();["observe","unobserve","disconnect"].forEach(function(Z){V.prototype[Z]=function(){var X;return(X=K.get(this))[Z].apply(X,arguments)}});var k=function(){return typeof c.ResizeObserver!="undefined"?c.ResizeObserver:V}();T.default=k}.call(T,e(225))},function(E,T,e){(function(t,l){l(T,e(22),e(515))})(this,function(t,l,s){"use strict";var c=1e-10;function r(et,ot){var xt=n(et),H=xt.filter(function(nn){return h(nn,et)}),nt=0,at=0,q=[],_t;if(H.length>1){var yt=f(H);for(_t=0;_t<H.length;++_t){var Ft=H[_t];Ft.angle=Math.atan2(Ft.x-yt.x,Ft.y-yt.y)}H.sort(function(nn,en){return en.angle-nn.angle});var Qt=H[H.length-1];for(_t=0;_t<H.length;++_t){var ee=H[_t];at+=(Qt.x+ee.x)*(ee.y-Qt.y);for(var Vt={x:(ee.x+Qt.x)/2,y:(ee.y+Qt.y)/2},$t=null,Me=0;Me<ee.parentIndex.length;++Me)if(Qt.parentIndex.indexOf(ee.parentIndex[Me])>-1){var me=et[ee.parentIndex[Me]],le=Math.atan2(ee.x-me.x,ee.y-me.y),be=Math.atan2(Qt.x-me.x,Qt.y-me.y),ze=be-le;ze<0&&(ze+=2*Math.PI);var Xe=be-ze/2,Sn=a(Vt,{x:me.x+me.radius*Math.sin(Xe),y:me.y+me.radius*Math.cos(Xe)});Sn>me.radius*2&&(Sn=me.radius*2),($t===null||$t.width>Sn)&&($t={circle:me,width:Sn,p1:ee,p2:Qt})}$t!==null&&(q.push($t),nt+=i($t.circle.radius,$t.width),Qt=ee)}}else{var Xn=et[0];for(_t=1;_t<et.length;++_t)et[_t].radius<Xn.radius&&(Xn=et[_t]);var Hn=!1;for(_t=0;_t<et.length;++_t)if(a(et[_t],Xn)>Math.abs(Xn.radius-et[_t].radius)){Hn=!0;break}Hn?nt=at=0:(nt=Xn.radius*Xn.radius*Math.PI,q.push({circle:Xn,p1:{x:Xn.x,y:Xn.y+Xn.radius},p2:{x:Xn.x-c,y:Xn.y+Xn.radius},width:Xn.radius*2}))}return at/=2,ot&&(ot.area=nt+at,ot.arcArea=nt,ot.polygonArea=at,ot.arcs=q,ot.innerPoints=H,ot.intersectionPoints=xt),nt+at}function h(et,ot){for(var xt=0;xt<ot.length;++xt)if(a(et,ot[xt])>ot[xt].radius+c)return!1;return!0}function n(et){for(var ot=[],xt=0;xt<et.length;++xt)for(var H=xt+1;H<et.length;++H)for(var nt=u(et[xt],et[H]),at=0;at<nt.length;++at){var q=nt[at];q.parentIndex=[xt,H],ot.push(q)}return ot}function i(et,ot){return et*et*Math.acos(1-ot/et)-(et-ot)*Math.sqrt(ot*(2*et-ot))}function a(et,ot){return Math.sqrt((et.x-ot.x)*(et.x-ot.x)+(et.y-ot.y)*(et.y-ot.y))}function o(et,ot,xt){if(xt>=et+ot)return 0;if(xt<=Math.abs(et-ot))return Math.PI*Math.min(et,ot)*Math.min(et,ot);var H=et-(xt*xt-ot*ot+et*et)/(2*xt),nt=ot-(xt*xt-et*et+ot*ot)/(2*xt);return i(et,H)+i(ot,nt)}function u(et,ot){var xt=a(et,ot),H=et.radius,nt=ot.radius;if(xt>=H+nt||xt<=Math.abs(H-nt))return[];var at=(H*H-nt*nt+xt*xt)/(2*xt),q=Math.sqrt(H*H-at*at),_t=et.x+at*(ot.x-et.x)/xt,yt=et.y+at*(ot.y-et.y)/xt,Ft=-(ot.y-et.y)*(q/xt),Qt=-(ot.x-et.x)*(q/xt);return[{x:_t+Ft,y:yt-Qt},{x:_t-Ft,y:yt+Qt}]}function f(et){for(var ot={x:0,y:0},xt=0;xt<et.length;++xt)ot.x+=et[xt].x,ot.y+=et[xt].y;return ot.x/=et.length,ot.y/=et.length,ot}function v(et,ot,xt,H){H=H||{};var nt=H.maxIterations||100,at=H.tolerance||1e-10,q=et(ot),_t=et(xt),yt=xt-ot;if(q*_t>0)throw"Initial bisect points must have opposite signs";if(q===0)return ot;if(_t===0)return xt;for(var Ft=0;Ft<nt;++Ft){yt/=2;var Qt=ot+yt,ee=et(Qt);if(ee*q>=0&&(ot=Qt),Math.abs(yt)<at||ee===0)return Qt}return ot+yt}function b(et){for(var ot=new Array(et),xt=0;xt<et;++xt)ot[xt]=0;return ot}function y(et,ot){return b(et).map(function(){return b(ot)})}function g(et,ot){for(var xt=0,H=0;H<et.length;++H)xt+=et[H]*ot[H];return xt}function _(et){return Math.sqrt(g(et,et))}function M(et,ot,xt){for(var H=0;H<ot.length;++H)et[H]=ot[H]*xt}function x(et,ot,xt,H,nt){for(var at=0;at<et.length;++at)et[at]=ot*xt[at]+H*nt[at]}function m(et,ot,xt){xt=xt||{};var H=xt.maxIterations||ot.length*200,nt=xt.nonZeroDelta||1.05,at=xt.zeroDelta||.001,q=xt.minErrorDelta||1e-6,_t=xt.minErrorDelta||1e-5,yt=xt.rho!==void 0?xt.rho:1,Ft=xt.chi!==void 0?xt.chi:2,Qt=xt.psi!==void 0?xt.psi:-.5,ee=xt.sigma!==void 0?xt.sigma:.5,Vt,$t=ot.length,Me=new Array($t+1);Me[0]=ot,Me[0].fx=et(ot),Me[0].id=0;for(var me=0;me<$t;++me){var le=ot.slice();le[me]=le[me]?le[me]*nt:at,Me[me+1]=le,Me[me+1].fx=et(le),Me[me+1].id=me+1}function be(hi){for(var Ce=0;Ce<hi.length;Ce++)Me[$t][Ce]=hi[Ce];Me[$t].fx=hi.fx}for(var ze=function(hi,Ce){return hi.fx-Ce.fx},Xe=ot.slice(),Sn=ot.slice(),Xn=ot.slice(),Hn=ot.slice(),nn=0;nn<H;++nn){if(Me.sort(ze),xt.history){var en=Me.map(function(hi){var Ce=hi.slice();return Ce.fx=hi.fx,Ce.id=hi.id,Ce});en.sort(function(hi,Ce){return hi.id-Ce.id}),xt.history.push({x:Me[0].slice(),fx:Me[0].fx,simplex:en})}for(Vt=0,me=0;me<$t;++me)Vt=Math.max(Vt,Math.abs(Me[0][me]-Me[1][me]));if(Math.abs(Me[0].fx-Me[$t].fx)<q&&Vt<_t)break;for(me=0;me<$t;++me){Xe[me]=0;for(var An=0;An<$t;++An)Xe[me]+=Me[An][me];Xe[me]/=$t}var Nn=Me[$t];if(x(Sn,1+yt,Xe,-yt,Nn),Sn.fx=et(Sn),Sn.fx<Me[0].fx)x(Hn,1+Ft,Xe,-Ft,Nn),Hn.fx=et(Hn),Hn.fx<Sn.fx?be(Hn):be(Sn);else if(Sn.fx>=Me[$t-1].fx){var fr=!1;if(Sn.fx>Nn.fx?(x(Xn,1+Qt,Xe,-Qt,Nn),Xn.fx=et(Xn),Xn.fx<Nn.fx?be(Xn):fr=!0):(x(Xn,1-Qt*yt,Xe,Qt*yt,Nn),Xn.fx=et(Xn),Xn.fx<Sn.fx?be(Xn):fr=!0),fr){if(ee>=1)break;for(me=1;me<Me.length;++me)x(Me[me],1-ee,Me[0],ee,Me[me]),Me[me].fx=et(Me[me])}}else be(Sn)}return Me.sort(ze),{fx:Me[0].fx,x:Me[0]}}function S(et,ot,xt,H,nt,at,q){var _t=xt.fx,yt=g(xt.fxprime,ot),Ft=_t,Qt=_t,ee=yt,Vt=0;nt=nt||1,at=at||1e-6,q=q||.1;function $t(me,le,be){for(var ze=0;ze<16;++ze)if(nt=(me+le)/2,x(H.x,1,xt.x,nt,ot),Ft=H.fx=et(H.x,H.fxprime),ee=g(H.fxprime,ot),Ft>_t+at*nt*yt||Ft>=be)le=nt;else{if(Math.abs(ee)<=-q*yt)return nt;ee*(le-me)>=0&&(le=me),me=nt,be=Ft}return 0}for(var Me=0;Me<10;++Me){if(x(H.x,1,xt.x,nt,ot),Ft=H.fx=et(H.x,H.fxprime),ee=g(H.fxprime,ot),Ft>_t+at*nt*yt||Me&&Ft>=Qt)return $t(Vt,nt,Qt);if(Math.abs(ee)<=-q*yt)return nt;if(ee>=0)return $t(nt,Vt,Ft);Qt=Ft,Vt=nt,nt*=2}return nt}function P(et,ot,xt){var H={x:ot.slice(),fx:0,fxprime:ot.slice()},nt={x:ot.slice(),fx:0,fxprime:ot.slice()},at=ot.slice(),q,_t,yt=1,Ft;xt=xt||{},Ft=xt.maxIterations||ot.length*20,H.fx=et(H.x,H.fxprime),q=H.fxprime.slice(),M(q,H.fxprime,-1);for(var Qt=0;Qt<Ft;++Qt){if(yt=S(et,q,H,nt,yt),xt.history&&xt.history.push({x:H.x.slice(),fx:H.fx,fxprime:H.fxprime.slice(),alpha:yt}),!yt)M(q,H.fxprime,-1);else{x(at,1,nt.fxprime,-1,H.fxprime);var ee=g(H.fxprime,H.fxprime),Vt=Math.max(0,g(at,nt.fxprime)/ee);x(q,Vt,q,-1,nt.fxprime),_t=H,H=nt,nt=_t}if(_(H.fxprime)<=1e-5)break}return xt.history&&xt.history.push({x:H.x.slice(),fx:H.fx,fxprime:H.fxprime.slice(),alpha:yt}),H}function A(et,ot){ot=ot||{},ot.maxIterations=ot.maxIterations||500;var xt=ot.initialLayout||V,H=ot.lossFunction||X;et=W(et);var nt=xt(et,ot),at=[],q=[],_t;for(_t in nt)nt.hasOwnProperty(_t)&&(at.push(nt[_t].x),at.push(nt[_t].y),q.push(_t));for(var yt=m(function(ee){for(var Vt={},$t=0;$t<q.length;++$t){var Me=q[$t];Vt[Me]={x:ee[2*$t],y:ee[2*$t+1],radius:nt[Me].radius}}return H(Vt,et)},at,ot),Ft=yt.x,Qt=0;Qt<q.length;++Qt)_t=q[Qt],nt[_t].x=Ft[2*Qt],nt[_t].y=Ft[2*Qt+1];return nt}var O=1e-10;function L(et,ot,xt){return Math.min(et,ot)*Math.min(et,ot)*Math.PI<=xt+O?Math.abs(et-ot):v(function(H){return o(et,ot,H)-xt},0,et+ot)}function W(et){et=et.slice();var ot=[],xt={},H,nt,at,q;for(H=0;H<et.length;++H){var _t=et[H];_t.sets.length==1?ot.push(_t.sets[0]):_t.sets.length==2&&(at=_t.sets[0],q=_t.sets[1],xt[[at,q]]=!0,xt[[q,at]]=!0)}for(ot.sort(function(yt,Ft){return yt>Ft}),H=0;H<ot.length;++H)for(at=ot[H],nt=H+1;nt<ot.length;++nt)q=ot[nt],[at,q]in xt||et.push({sets:[at,q],size:0});return et}function F(et,ot,xt){var H=y(ot.length,ot.length),nt=y(ot.length,ot.length);return et.filter(function(at){return at.sets.length==2}).map(function(at){var q=xt[at.sets[0]],_t=xt[at.sets[1]],yt=Math.sqrt(ot[q].size/Math.PI),Ft=Math.sqrt(ot[_t].size/Math.PI),Qt=L(yt,Ft,at.size);H[q][_t]=H[_t][q]=Qt;var ee=0;at.size+1e-10>=Math.min(ot[q].size,ot[_t].size)?ee=1:at.size<=1e-10&&(ee=-1),nt[q][_t]=nt[_t][q]=ee}),{distances:H,constraints:nt}}function K(et,ot,xt,H){var nt=0,at;for(at=0;at<ot.length;++at)ot[at]=0;for(at=0;at<xt.length;++at)for(var q=et[2*at],_t=et[2*at+1],yt=at+1;yt<xt.length;++yt){var Ft=et[2*yt],Qt=et[2*yt+1],ee=xt[at][yt],Vt=H[at][yt],$t=(Ft-q)*(Ft-q)+(Qt-_t)*(Qt-_t),Me=Math.sqrt($t),me=$t-ee*ee;Vt>0&&Me<=ee||Vt<0&&Me>=ee||(nt+=2*me*me,ot[2*at]+=4*me*(q-Ft),ot[2*at+1]+=4*me*(_t-Qt),ot[2*yt]+=4*me*(Ft-q),ot[2*yt+1]+=4*me*(Qt-_t))}return nt}function V(et,ot){var xt=Z(et,ot),H=ot.lossFunction||X;if(et.length>=8){var nt=k(et,ot),at=H(nt,et),q=H(xt,et);at+1e-8<q&&(xt=nt)}return xt}function k(et,ot){ot=ot||{};var xt=ot.restarts||10,H=[],nt={},at;for(at=0;at<et.length;++at){var q=et[at];q.sets.length==1&&(nt[q.sets[0]]=H.length,H.push(q))}var _t=F(et,H,nt),yt=_t.distances,Ft=_t.constraints,Qt=_(yt.map(_))/yt.length;yt=yt.map(function(ze){return ze.map(function(Xe){return Xe/Qt})});var ee=function(ze,Xe){return K(ze,Xe,yt,Ft)},Vt,$t;for(at=0;at<xt;++at){var Me=b(yt.length*2).map(Math.random);$t=P(ee,Me,ot),(!Vt||$t.fx<Vt.fx)&&(Vt=$t)}var me=Vt.x,le={};for(at=0;at<H.length;++at){var be=H[at];le[be.sets[0]]={x:me[2*at]*Qt,y:me[2*at+1]*Qt,radius:Math.sqrt(be.size/Math.PI)}}if(ot.history)for(at=0;at<ot.history.length;++at)M(ot.history[at].x,Qt);return le}function Z(et,ot){for(var xt=ot&&ot.lossFunction?ot.lossFunction:X,H={},nt={},at,q=0;q<et.length;++q){var _t=et[q];_t.sets.length==1&&(at=_t.sets[0],H[at]={x:1e10,y:1e10,rowid:H.length,size:_t.size,radius:Math.sqrt(_t.size/Math.PI)},nt[at]=[])}for(et=et.filter(function(pe){return pe.sets.length==2}),q=0;q<et.length;++q){var yt=et[q],Ft=yt.hasOwnProperty("weight")?yt.weight:1,Qt=yt.sets[0],ee=yt.sets[1];yt.size+O>=Math.min(H[Qt].size,H[ee].size)&&(Ft=0),nt[Qt].push({set:ee,size:yt.size,weight:Ft}),nt[ee].push({set:Qt,size:yt.size,weight:Ft})}var Vt=[];for(at in nt)if(nt.hasOwnProperty(at)){var $t=0;for(q=0;q<nt[at].length;++q)$t+=nt[at][q].size*nt[at][q].weight;Vt.push({set:at,size:$t})}function Me(pe,Wt){return Wt.size-pe.size}Vt.sort(Me);var me={};function le(pe){return pe.set in me}function be(pe,Wt){H[Wt].x=pe.x,H[Wt].y=pe.y,me[Wt]=!0}for(be({x:0,y:0},Vt[0].set),q=1;q<Vt.length;++q){var ze=Vt[q].set,Xe=nt[ze].filter(le);if(at=H[ze],Xe.sort(Me),Xe.length===0)throw"ERROR: missing pairwise overlap information";for(var Sn=[],Xn=0;Xn<Xe.length;++Xn){var Hn=H[Xe[Xn].set],nn=L(at.radius,Hn.radius,Xe[Xn].size);Sn.push({x:Hn.x+nn,y:Hn.y}),Sn.push({x:Hn.x-nn,y:Hn.y}),Sn.push({y:Hn.y+nn,x:Hn.x}),Sn.push({y:Hn.y-nn,x:Hn.x});for(var en=Xn+1;en<Xe.length;++en)for(var An=H[Xe[en].set],Nn=L(at.radius,An.radius,Xe[en].size),fr=u({x:Hn.x,y:Hn.y,radius:nn},{x:An.x,y:An.y,radius:Nn}),hi=0;hi<fr.length;++hi)Sn.push(fr[hi])}var Ce=1e50,Te=Sn[0];for(Xn=0;Xn<Sn.length;++Xn){H[ze].x=Sn[Xn].x,H[ze].y=Sn[Xn].y;var Jt=xt(H,et);Jt<Ce&&(Ce=Jt,Te=Sn[Xn])}be(Te,ze)}return H}function X(et,ot){var xt=0;function H(Qt){return Qt.map(function(ee){return et[ee]})}for(var nt=0;nt<ot.length;++nt){var at=ot[nt],q;if(at.sets.length!=1){if(at.sets.length==2){var _t=et[at.sets[0]],yt=et[at.sets[1]];q=o(_t.radius,yt.radius,a(_t,yt))}else q=r(H(at.sets));var Ft=at.hasOwnProperty("weight")?at.weight:1;xt+=Ft*(q-at.size)*(q-at.size)}}return xt}function it(et,ot,xt){xt===null?et.sort(function(me,le){return le.radius-me.radius}):et.sort(xt);var H;if(et.length>0){var nt=et[0].x,at=et[0].y;for(H=0;H<et.length;++H)et[H].x-=nt,et[H].y-=at}if(et.length==2){var q=a(et[0],et[1]);q<Math.abs(et[1].radius-et[0].radius)&&(et[1].x=et[0].x+et[0].radius-et[1].radius-1e-10,et[1].y=et[0].y)}if(et.length>1){var _t=Math.atan2(et[1].x,et[1].y)-ot,yt=Math.cos(_t),Ft=Math.sin(_t),Qt,ee;for(H=0;H<et.length;++H)Qt=et[H].x,ee=et[H].y,et[H].x=yt*Qt-Ft*ee,et[H].y=Ft*Qt+yt*ee}if(et.length>2){for(var Vt=Math.atan2(et[2].x,et[2].y)-ot;Vt<0;)Vt+=2*Math.PI;for(;Vt>2*Math.PI;)Vt-=2*Math.PI;if(Vt>Math.PI){var $t=et[1].y/(1e-10+et[1].x);for(H=0;H<et.length;++H){var Me=(et[H].x+$t*et[H].y)/(1+$t*$t);et[H].x=2*Me-et[H].x,et[H].y=2*Me*$t-et[H].y}}}}function ft(et){et.map(function(Ft){Ft.parent=Ft});function ot(Ft){return Ft.parent!==Ft&&(Ft.parent=ot(Ft.parent)),Ft.parent}function xt(Ft,Qt){var ee=ot(Ft),Vt=ot(Qt);ee.parent=Vt}for(var H=0;H<et.length;++H)for(var nt=H+1;nt<et.length;++nt){var at=et[H].radius+et[nt].radius;a(et[H],et[nt])+1e-10<at&&xt(et[nt],et[H])}var q={},_t;for(H=0;H<et.length;++H)_t=ot(et[H]).parent.setid,_t in q||(q[_t]=[]),q[_t].push(et[H]);et.map(function(Ft){delete Ft.parent});var yt=[];for(_t in q)q.hasOwnProperty(_t)&&yt.push(q[_t]);return yt}function pt(et){var ot=function(xt){var H=Math.max.apply(null,et.map(function(at){return at[xt]+at.radius})),nt=Math.min.apply(null,et.map(function(at){return at[xt]-at.radius}));return{max:H,min:nt}};return{xRange:ot("x"),yRange:ot("y")}}function ut(et,ot,xt){ot===null&&(ot=Math.PI/2);var H=[],nt,at;for(at in et)if(et.hasOwnProperty(at)){var q=et[at];H.push({x:q.x,y:q.y,radius:q.radius,setid:at})}var _t=ft(H);for(nt=0;nt<_t.length;++nt){it(_t[nt],ot,xt);var yt=pt(_t[nt]);_t[nt].size=(yt.xRange.max-yt.xRange.min)*(yt.yRange.max-yt.yRange.min),_t[nt].bounds=yt}_t.sort(function(Me,me){return me.size-Me.size}),H=_t[0];var Ft=H.bounds,Qt=(Ft.xRange.max-Ft.xRange.min)/50;function ee(Me,me,le){if(!!Me){var be=Me.bounds,ze,Xe,Sn;me?ze=Ft.xRange.max-be.xRange.min+Qt:(ze=Ft.xRange.max-be.xRange.max,Sn=(be.xRange.max-be.xRange.min)/2-(Ft.xRange.max-Ft.xRange.min)/2,Sn<0&&(ze+=Sn)),le?Xe=Ft.yRange.max-be.yRange.min+Qt:(Xe=Ft.yRange.max-be.yRange.max,Sn=(be.yRange.max-be.yRange.min)/2-(Ft.yRange.max-Ft.yRange.min)/2,Sn<0&&(Xe+=Sn));for(var Xn=0;Xn<Me.length;++Xn)Me[Xn].x+=ze,Me[Xn].y+=Xe,H.push(Me[Xn])}}for(var Vt=1;Vt<_t.length;)ee(_t[Vt],!0,!1),ee(_t[Vt+1],!1,!0),ee(_t[Vt+2],!0,!0),Vt+=3,Ft=pt(H);var $t={};for(nt=0;nt<H.length;++nt)$t[H[nt].setid]=H[nt];return $t}function It(et,ot,xt,H){var nt=[],at=[];for(var q in et)et.hasOwnProperty(q)&&(at.push(q),nt.push(et[q]));ot-=2*H,xt-=2*H;var _t=pt(nt),yt=_t.xRange,Ft=_t.yRange;if(yt.max==yt.min||Ft.max==Ft.min)return console.log("not scaling solution: zero size detected"),et;for(var Qt=ot/(yt.max-yt.min),ee=xt/(Ft.max-Ft.min),Vt=Math.min(ee,Qt),$t=(ot-(yt.max-yt.min)*Vt)/2,Me=(xt-(Ft.max-Ft.min)*Vt)/2,me={},le=0;le<nt.length;++le){var be=nt[le];me[at[le]]={radius:Vt*be.radius,x:H+$t+(be.x-yt.min)*Vt,y:H+Me+(be.y-Ft.min)*Vt}}return me}function Nt(){var et=600,ot=350,xt=15,H=1e3,nt=Math.PI/2,at=!0,q=!0,_t=!0,yt=null,Ft=null,Qt={},ee=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Vt=0,$t=function(be){if(be in Qt)return Qt[be];var ze=Qt[be]=ee[Vt];return Vt+=1,Vt>=ee.length&&(Vt=0),ze},Me=A,me=X;function le(be){var ze=be.datum(),Xe={};ze.forEach(function(xe){xe.size==0&&xe.sets.length==1&&(Xe[xe.sets[0]]=1)}),ze=ze.filter(function(xe){return!xe.sets.some(function($e){return $e in Xe})});var Sn={},Xn={};if(ze.length>0){var Hn=Me(ze,{lossFunction:me});at&&(Hn=ut(Hn,nt,Ft)),Sn=It(Hn,et,ot,xt),Xn=rt(Sn,ze)}var nn={};ze.forEach(function(xe){xe.label&&(nn[xe.sets]=xe.label)});function en(xe){if(xe.sets in nn)return nn[xe.sets];if(xe.sets.length==1)return""+xe.sets[0]}be.selectAll("svg").data([Sn]).enter().append("svg");var An=be.select("svg").attr("width",et).attr("height",ot),Nn={},fr=!1;An.selectAll(".venn-area path").each(function(xe){var $e=l.select(this).attr("d");xe.sets.length==1&&$e&&(fr=!0,Nn[xe.sets[0]]=Q($e))});var hi=function(xe){return function($e){var Fn=xe.sets.map(function(or){var En=Nn[or],Pn=Sn[or];return En||(En={x:et/2,y:ot/2,radius:1}),Pn||(Pn={x:et/2,y:ot/2,radius:1}),{x:En.x*(1-$e)+Pn.x*$e,y:En.y*(1-$e)+Pn.y*$e,radius:En.radius*(1-$e)+Pn.radius*$e}});return gt(Fn)}},Ce=An.selectAll(".venn-area").data(ze,function(xe){return xe.sets}),Te=Ce.enter().append("g").attr("class",function(xe){return"venn-area venn-"+(xe.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(xe){return xe.sets.join("_")}),Jt=Te.append("path"),pe=Te.append("text").attr("class","label").text(function(xe){return en(xe)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",et/2).attr("y",ot/2);_t&&(Jt.style("fill-opacity","0").filter(function(xe){return xe.sets.length==1}).style("fill",function(xe){return $t(xe.sets)}).style("fill-opacity",".25"),pe.style("fill",function(xe){return xe.sets.length==1?$t(xe.sets):"#444"}));var Wt=be;fr?(Wt=be.transition("venn").duration(H),Wt.selectAll("path").attrTween("d",hi)):Wt.selectAll("path").attr("d",function(xe){return gt(xe.sets.map(function($e){return Sn[$e]}))});var ie=Wt.selectAll("text").filter(function(xe){return xe.sets in Xn}).text(function(xe){return en(xe)}).attr("x",function(xe){return Math.floor(Xn[xe.sets].x)}).attr("y",function(xe){return Math.floor(Xn[xe.sets].y)});q&&(fr?"on"in ie?ie.on("end",Rt(Sn,en)):ie.each("end",Rt(Sn,en)):ie.each(Rt(Sn,en)));var Ae=Ce.exit().transition("venn").duration(H).remove();Ae.selectAll("path").attrTween("d",hi);var ue=Ae.selectAll("text").attr("x",et/2).attr("y",ot/2);return yt!==null&&(pe.style("font-size","0px"),ie.style("font-size",yt),ue.style("font-size","0px")),{circles:Sn,textCentres:Xn,nodes:Ce,enter:Te,update:Wt,exit:Ae}}return le.wrap=function(be){return arguments.length?(q=be,le):q},le.width=function(be){return arguments.length?(et=be,le):et},le.height=function(be){return arguments.length?(ot=be,le):ot},le.padding=function(be){return arguments.length?(xt=be,le):xt},le.colours=function(be){return arguments.length?($t=be,le):$t},le.fontSize=function(be){return arguments.length?(yt=be,le):yt},le.duration=function(be){return arguments.length?(H=be,le):H},le.layoutFunction=function(be){return arguments.length?(Me=be,le):Me},le.normalize=function(be){return arguments.length?(at=be,le):at},le.styled=function(be){return arguments.length?(_t=be,le):_t},le.orientation=function(be){return arguments.length?(nt=be,le):nt},le.orientationOrder=function(be){return arguments.length?(Ft=be,le):Ft},le.lossFunction=function(be){return arguments.length?(me=be,le):me},le}function Rt(et,ot){return function(){for(var xt=l.select(this),H=xt.datum(),nt=et[H.sets[0]].radius||50,at=ot(H)||"",q=at.split(/\s+/).reverse(),_t=3,yt=(at.length+q.length)/_t,Ft=q.pop(),Qt=[Ft],ee,Vt=0,$t=1.1,Me=xt.text(null).append("tspan").text(Ft);Ft=q.pop(),!!Ft;)Qt.push(Ft),ee=Qt.join(" "),Me.text(ee),ee.length>yt&&Me.node().getComputedTextLength()>nt&&(Qt.pop(),Me.text(Qt.join(" ")),Qt=[Ft],Me=xt.append("tspan").text(Ft),Vt++);var me=.35-Vt*$t/2,le=xt.attr("x"),be=xt.attr("y");xt.selectAll("tspan").attr("x",le).attr("y",be).attr("dy",function(ze,Xe){return me+Xe*$t+"em"})}}function Mt(et,ot,xt){var H=ot[0].radius-a(ot[0],et),nt,at;for(nt=1;nt<ot.length;++nt)at=ot[nt].radius-a(ot[nt],et),at<=H&&(H=at);for(nt=0;nt<xt.length;++nt)at=a(xt[nt],et)-xt[nt].radius,at<=H&&(H=at);return H}function bt(et,ot){var xt=[],H;for(H=0;H<et.length;++H){var nt=et[H];xt.push({x:nt.x,y:nt.y}),xt.push({x:nt.x+nt.radius/2,y:nt.y}),xt.push({x:nt.x-nt.radius/2,y:nt.y}),xt.push({x:nt.x,y:nt.y+nt.radius/2}),xt.push({x:nt.x,y:nt.y-nt.radius/2})}var at=xt[0],q=Mt(xt[0],et,ot);for(H=1;H<xt.length;++H){var _t=Mt(xt[H],et,ot);_t>=q&&(at=xt[H],q=_t)}var yt=m(function(Vt){return-1*Mt({x:Vt[0],y:Vt[1]},et,ot)},[at.x,at.y],{maxIterations:500,minErrorDelta:1e-10}).x,Ft={x:yt[0],y:yt[1]},Qt=!0;for(H=0;H<et.length;++H)if(a(Ft,et[H])>et[H].radius){Qt=!1;break}for(H=0;H<ot.length;++H)if(a(Ft,ot[H])<ot[H].radius){Qt=!1;break}if(!Qt)if(et.length==1)Ft={x:et[0].x,y:et[0].y};else{var ee={};r(et,ee),ee.arcs.length===0?Ft={x:0,y:-1e3,disjoint:!0}:ee.arcs.length==1?Ft={x:ee.arcs[0].circle.x,y:ee.arcs[0].circle.y}:ot.length?Ft=bt(et,[]):Ft=f(ee.arcs.map(function(Vt){return Vt.p1}))}return Ft}function At(et){var ot={},xt=[];for(var H in et)xt.push(H),ot[H]=[];for(var nt=0;nt<xt.length;nt++)for(var at=et[xt[nt]],q=nt+1;q<xt.length;++q){var _t=et[xt[q]],yt=a(at,_t);yt+_t.radius<=at.radius+1e-10?ot[xt[q]].push(xt[nt]):yt+at.radius<=_t.radius+1e-10&&ot[xt[nt]].push(xt[q])}return ot}function rt(et,ot){for(var xt={},H=At(et),nt=0;nt<ot.length;++nt){for(var at=ot[nt].sets,q={},_t={},yt=0;yt<at.length;++yt){q[at[yt]]=!0;for(var Ft=H[at[yt]],Qt=0;Qt<Ft.length;++Qt)_t[Ft[Qt]]=!0}var ee=[],Vt=[];for(var $t in et)$t in q?ee.push(et[$t]):$t in _t||Vt.push(et[$t]);var Me=bt(ee,Vt);xt[at]=Me,Me.disjoint&&ot[nt].size>0&&console.log("WARNING: area "+at+" not represented on screen")}return xt}function Pt(et,ot){for(var xt=At(et.selectAll("svg").datum()),H={},nt=0;nt<ot.sets.length;++nt){var at=ot.sets[nt];for(var q in xt)for(var _t=xt[q],yt=0;yt<_t.length;++yt)if(_t[yt]==at){H[q]=!0;break}}function Ft(Qt){for(var ee=0;ee<Qt.length;++ee)if(!(Qt[ee]in H))return!1;return!0}et.selectAll("g").sort(function(Qt,ee){return Qt.sets.length!=ee.sets.length?Qt.sets.length-ee.sets.length:Qt==ot?Ft(ee.sets)?-1:1:ee==ot?Ft(Qt.sets)?1:-1:ee.size-Qt.size})}function z(et,ot,xt){var H=[];return H.push(`
M`,et,ot),H.push(`
m`,-xt,0),H.push(`
a`,xt,xt,0,1,0,xt*2,0),H.push(`
a`,xt,xt,0,1,0,-xt*2,0),H.join(" ")}function Q(et){var ot=et.split(" ");return{x:parseFloat(ot[1]),y:parseFloat(ot[2]),radius:-parseFloat(ot[4])}}function gt(et){var ot={};r(et,ot);var xt=ot.arcs;if(xt.length===0)return"M 0 0";if(xt.length==1){var H=xt[0].circle;return z(H.x,H.y,H.radius)}else{for(var nt=[`
M`,xt[0].p2.x,xt[0].p2.y],at=0;at<xt.length;++at){var q=xt[at],_t=q.circle.radius,yt=q.width>_t;nt.push(`
A`,_t,_t,0,yt?1:0,1,q.p1.x,q.p1.y)}return nt.join(" ")}}t.intersectionArea=r,t.circleCircleIntersection=u,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=A,t.greedyLayout=Z,t.scaleSolution=It,t.normalizeSolution=ut,t.bestInitialLayout=V,t.lossFunction=X,t.disjointCluster=ft,t.distanceFromIntersectArea=L,t.VennDiagram=Nt,t.wrapText=Rt,t.computeTextCentres=rt,t.computeTextCentre=bt,t.sortAreas=Pt,t.circlePath=z,t.circleFromPath=Q,t.intersectionAreaPath=gt,Object.defineProperty(t,"__esModule",{value:!0})})},function(E,T,e){"use strict";var t=function(){};t=function(l,s,c){var r=arguments.length;c=new Array(r>2?r-2:0);for(var h=2;h<r;h++)c[h-2]=arguments[h];if(s===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(s.length<10||/^[s\W]*$/.test(s))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+s);if(!l){var n=0,i="Warning: "+s.replace(/%s/g,function(){return c[n++]});typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(a){}}},E.exports=t},function(E,T,e){e(64),E.exports=e(64)}])})},yU0y:function(Oe,mt,R){"use strict";R.d(mt,"b",function(){return U}),R.d(mt,"a",function(){return E}),R.d(mt,"c",function(){return T});var U=1e-6,E=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function e(c){E=c}var t=Math.PI/180;function l(c){return c*t}function s(c,r){return Math.abs(c-r)<=U*Math.max(1,Math.abs(c),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var c=0,r=arguments.length;r--;)c+=arguments[r]*arguments[r];return Math.sqrt(c)})},yXPU:function(Oe,mt){function R(E,T,e,t,l,s,c){try{var r=E[s](c),h=r.value}catch(n){e(n);return}r.done?T(h):Promise.resolve(h).then(t,l)}function U(E){return function(){var T=this,e=arguments;return new Promise(function(t,l){var s=E.apply(T,e);function c(h){R(s,t,l,c,r,"next",h)}function r(h){R(s,t,l,c,r,"throw",h)}c(void 0)})}}Oe.exports=U,Oe.exports.default=Oe.exports,Oe.exports.__esModule=!0},ycre:function(Oe,mt,R){var U=R("711d"),E=U("length");Oe.exports=E},z4Hk:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.BindingWhenSyntax=void 0;var U=R("406g"),E=R("RR/i"),T=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=E.namedConstraint(t),new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var l=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return l},new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(t,l){return this._binding.constraint=E.taggedConstraint(t)(l),new U.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(l){return E.typeConstraint(t)(l.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(l){return E.namedConstraint(t)(l.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(t,l){return this._binding.constraint=function(s){return E.taggedConstraint(t)(l)(s.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,l){return this._binding.constraint=function(s){return E.traverseAncerstors(s,E.taggedConstraint(t)(l))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(t,l){return this._binding.constraint=function(s){return!E.traverseAncerstors(s,E.taggedConstraint(t)(l))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,t)},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,t)},new U.BindingOnSyntax(this._binding)},e}();mt.BindingWhenSyntax=T},zEVN:function(Oe,mt,R){var U=R("Gi0A"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isMap,t=e?E(e):U;Oe.exports=t},zZ0H:function(Oe,mt){function R(U){return U}Oe.exports=R},zZPE:function(Oe,mt){var R="[object Object]";function U(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch(o){}return a}function E(i,a){return function(o){return i(a(o))}}var T=Function.prototype,e=Object.prototype,t=T.toString,l=e.hasOwnProperty,s=t.call(Object),c=e.toString,r=E(Object.getPrototypeOf,Object);function h(i){return!!i&&typeof i=="object"}function n(i){if(!h(i)||c.call(i)!=R||U(i))return!1;var a=r(i);if(a===null)return!0;var o=l.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&t.call(o)==s}Oe.exports=n},zoYe:function(Oe,mt,R){var U=R("nmnc"),E=R("eUgh"),T=R("Z0cm"),e=R("/9aa"),t=1/0,l=U?U.prototype:void 0,s=l?l.toString:void 0;function c(r){if(typeof r=="string")return r;if(T(r))return E(r,c)+"";if(e(r))return s?s.call(r):"";var h=r+"";return h=="0"&&1/r==-t?"-0":h}Oe.exports=c},zvhG:function(Oe,mt){Oe.exports=R;function R(U,E,T,e){this.cx=3*U,this.bx=3*(T-U)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(e-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=U,this.p1y=e,this.p2x=T,this.p2y=e}R.prototype.sampleCurveX=function(U){return((this.ax*U+this.bx)*U+this.cx)*U},R.prototype.sampleCurveY=function(U){return((this.ay*U+this.by)*U+this.cy)*U},R.prototype.sampleCurveDerivativeX=function(U){return(3*this.ax*U+2*this.bx)*U+this.cx},R.prototype.solveCurveX=function(U,E){typeof E=="undefined"&&(E=1e-6);var T,e,t,l,s;for(t=U,s=0;s<8;s++){if(l=this.sampleCurveX(t)-U,Math.abs(l)<E)return t;var c=this.sampleCurveDerivativeX(t);if(Math.abs(c)<1e-6)break;t=t-l/c}if(T=0,e=1,t=U,t<T)return T;if(t>e)return e;for(;T<e;){if(l=this.sampleCurveX(t),Math.abs(l-U)<E)return t;U>l?T=t:e=t,t=(e-T)*.5+T}return t},R.prototype.solve=function(U,E){return this.sampleCurveY(this.solveCurveX(U,E))}},zxMA:function(Oe,mt,R){"use strict";Object.defineProperty(mt,"__esModule",{value:!0}),mt.QueryableString=void 0;var U=function(){function E(T){this.str=T}return E.prototype.startsWith=function(T){return this.str.indexOf(T)===0},E.prototype.endsWith=function(T){var e="",t=T.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},t)},E.prototype.contains=function(T){return this.str.indexOf(T)!==-1},E.prototype.equals=function(T){return this.str===T},E.prototype.value=function(){return this.str},E}();mt.QueryableString=U}}]);
